(self.webpackChunkpages=self.webpackChunkpages||[]).push([[167],{5167:(xt,lt,B)=>{"use strict";B.r(lt),B.d(lt,{LoginModule:()=>g});var tt=B(6814),H=B(5213),U=B(4295),et=B(7905),it=B(5861),F=B(1378),G=B(4020),X=B(3912),nt=B(1410),W=B(9018),q=B(463),P=B(7165),I=B(5661),N=B(2986),d=B(5879),J=B(2655),mt=B(9344),ut=B(7219);function wt(e,a){if(1&e&&(d.TgZ(0,"li",6)(1,"a",7),d._uU(2),d.ALo(3,"titlecase"),d.ALo(4,"titlecase"),d.qZA()()),2&e){const n=a.$implicit;d.xp6(1),d.Gre("fv-small-caps shadow-sm text-center d-block btn btn-",n.shortDomain,""),d.Q6J("href",n.link,d.LSH)("target",n.failed?"_blank":"_self"),d.xp6(1),d.AsE(" ",d.lcZ(3,7,n.title[0]),"",d.lcZ(4,9,n.title[1])," ")}}let yt=(()=>{var e;class a{constructor(r,u){this.loginService=r,this.endpointsService=u,this.failedAttempts=[],this.openQrModal=new d.vpe,this.buttons=[]}ngOnInit(){this.buttons=this.loginService.domains.map(r=>{const u=this.failedAttempts.includes(r);return{title:this.createCircuitName(r),link:u?`https://accounts.${r}/?act=Login`:this.endpointsService.get(X.jQ.LOGIN,X.G9.REDIRECT,void 0,r)+this.loginService.encodedRedirectParams,shortDomain:(0,X.yy)(r),failed:u}})}createCircuitName(r){const u=r.match(/^(forum|blog)(free|community)/i);return u?[u[1],u[2]]:["",""]}}return(e=a).\u0275fac=function(r){return new(r||e)(d.Y36(W.r),d.Y36(X.oz))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-login-buttons"]],inputs:{failedAttempts:"failedAttempts"},outputs:{openQrModal:"openQrModal"},decls:9,vars:1,consts:[[1,"mb-0","text-center"],[1,"list-unstyled","mb-0"],["class","my-3",4,"ngFor","ngForOf"],[1,"small","text-muted","d-flex","option","align-items-center","my-4"],[1,"px-3","pb-1"],[1,"fv-small-caps","text-center","border","mt-3","btn","btn-outline-secondary","d-block",3,"click"],[1,"my-3"],[3,"href","target"]],template:function(r,u){1&r&&(d.TgZ(0,"p",0),d._uU(1,"Scegli il circuito con cui accedere!"),d.qZA(),d.TgZ(2,"ul",1),d.YNc(3,wt,5,11,"li",2),d.qZA(),d.TgZ(4,"div",3)(5,"div",4),d._uU(6,"oppure autorizza con"),d.qZA()(),d.TgZ(7,"div",5),d.NdJ("click",function(){return u.openQrModal.emit()}),d._uU(8,"QR Code"),d.qZA()),2&r&&(d.xp6(3),d.Q6J("ngForOf",u.buttons))},dependencies:[tt.sg,tt.rS],styles:['.option[_ngcontent-%COMP%]:before, .option[_ngcontent-%COMP%]:after{content:"";flex-grow:1;border-bottom:1px solid #dee2e6}']}),a})();var at=B(1698),st=B(554);let bt=(()=>{var e;class a{constructor(r){this.tosService=r,this.appName=G.lW}openTosModal(){this.tosService.toggleModal(!0)}}return(e=a).\u0275fac=function(r){return new(r||e)(d.Y36(at.F))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-login-header"]],decls:11,vars:4,consts:[[1,"mb-2","mb-lg-3","d-flex","justify-content-center"],["svgSize","xl",3,"responsive"],[1,"mt-2","mb-3","mb-lg-2","text-justify"],[1,"text-justify","d-none","d-lg-block"],[1,"text-center","small","text-muted","mt-auto"],["role","button",1,"tos-modal-btn",3,"click"]],template:function(r,u){1&r&&(d.TgZ(0,"h1",0),d._UZ(1,"app-logo",1),d.qZA(),d.TgZ(2,"p",2),d._uU(3),d.qZA(),d.TgZ(4,"p",3),d._uU(5," Dopo aver selezionato un circuito con cui effettuare il login, si viene indirizzati nell'apposita area del sito in cui \xe8 possibile usufruire delle funzioni messe a disposizione per forum, blog e utenti, tra cui EasyScript, EasyUpload e la gestione degli Admin degli Script!\n"),d.qZA(),d.TgZ(6,"div",4),d._uU(7," Proseguendo accetti i "),d.TgZ(8,"a",5),d.NdJ("click",function(){return u.openTosModal()}),d._uU(9,"Termini di Servizio"),d.qZA(),d._uU(10),d.qZA()),2&r&&(d.xp6(1),d.Q6J("responsive",!1),d.xp6(2),d.AsE(" ",u.appName," \xe8 un progetto gratuito creato per raccogliere e offrire i principali servizi aggiuntivi disponibili per i siti e gli account dei circuiti Forumfree, Forumcommunity e Blogfree. Scritto principalmente in typescript, ",u.appName," sfrutta le potenzialit\xe0 offerte dal celebre pacchetto per sviluppo web Angular al fine di garantire un'esperienza di navigazione fluida, immediata e intuitiva!\n"),d.xp6(7),d.hij(" di ",u.appName,"\n"))},dependencies:[st.R],encapsulation:2}),a})();var dt=B(1413),_t=B(149),y=B.n(_t),w=B(4464),m=B(4004);const h=["canvas"],_=["modal"];let M=(()=>{var e;class a{constructor(r,u){this.graphqlService=r,this.loginService=u,this.loginQrEvent=new d.vpe,this.uuid=(0,m.Z)()}ngAfterViewInit(){const r=new URL(window.location.href);new(y())({width:250,height:250,margin:5,data:`${r.protocol}//${r.host}/settings?qr-login=${this.uuid}`,image:"/assets/easy-innovation-logo.svg",dotsOptions:{color:"#4b579a",type:"rounded"},backgroundOptions:{color:"#ffffff"},imageOptions:{crossOrigin:"anonymous",margin:3}}).append(this.canvas.nativeElement)}open(){this.graphqlService.subscribe({query:"\nsubscription securityLoginQr($listener: String!) {\n    securityLoginQr(listener: $listener) {\n        eventMessage\n        user {\n            host\n            id\n            nickname\n            avatar\n        }\n    }\n}",variables:{listener:this.uuid}},r=>{this.onNext(r)}).then(r=>{this.unsubscribeFunction&&this.unsubscribeFunction(),this.unsubscribeFunction=r}),this.modalComponent.open()}onModalHidden(){this.unsubscribeFunction&&this.unsubscribeFunction()}onNext(r){var u;const b=null===(u=r.data)||void 0===u?void 0:u.securityLoginQr;if(!b)return;const x=this.loginService.createProfileFromJwtResponse({host:b.user.host,user:(0,dt.Z)({},b.user)});this.loginQrEvent.emit({refreshToken:b.refreshToken,refreshTokenId:b.refreshTokenId,accessToken:"",profile:x}),this.modalComponent.close()}ngOnDestroy(){this.unsubscribeFunction&&this.unsubscribeFunction()}}return(e=a).\u0275fac=function(r){return new(r||e)(d.Y36(X.Jk),d.Y36(W.r))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-login-qr-modal"]],viewQuery:function(r,u){if(1&r&&(d.Gf(h,5),d.Gf(_,5)),2&r){let b;d.iGM(b=d.CRH())&&(u.canvas=b.first),d.iGM(b=d.CRH())&&(u.modalComponent=b.first)}},outputs:{loginQrEvent:"loginQrEvent"},decls:16,vars:1,consts:[["title","Login tramite QR Code",3,"hidden"],["modal",""],[1,"text-center"],["canvas",""]],template:function(r,u){1&r&&(d.TgZ(0,"app-modal",0,1),d.NdJ("hidden",function(){return u.onModalHidden()}),d.TgZ(2,"ol")(3,"li"),d._uU(4,"Apri l'app fotocamera integrata del telefono o tablet."),d.qZA(),d.TgZ(5,"li"),d._uU(6,"Inquadra il QR Code."),d.qZA(),d.TgZ(7,"li"),d._uU(8,"Tocca il banner che compare sul telefono o tablet."),d.qZA(),d.TgZ(9,"li"),d._uU(10,"Segui le istruzioni sullo schermo per terminare l'accesso."),d.qZA()(),d._UZ(11,"div",2,3),d.TgZ(13,"p",2)(14,"small",2),d._uU(15),d.qZA()()()),2&r&&(d.xp6(15),d.hij("Codice di verifica: ",u.uuid,""))},dependencies:[w.z]}),a})();var S=B(1187);let A=(()=>{var e;class a{}return(e=a).\u0275fac=function(r){return new(r||e)},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-login-svg"]],decls:23,vars:0,consts:[[1,"mx-auto","mw-100","position-relative"],["xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","viewBox","0 0 949.85 463.64",1,"w-100","pc-svg"],["d","m0,418.39c0,.94,1.07,1.69,2.41,1.69h945.03c1.33,0,2.41-.75,2.41-1.69s-1.07-1.69-2.41-1.69H2.41c-1.33,0-2.41.75-2.41,1.69Z","fill","#2f2e43","stroke-width","0"],["d","m789.19,420.78H162.66V17.31c0-9.54,7.76-17.31,17.31-17.31h591.91c9.54,0,17.31,7.76,17.31,17.31v403.47Z","fill","#2f2e41","stroke-width","0"],["d","m841.34,463.64H108.95c-2.53,0-4.6-1.57-5.29-4.01-.68-2.43.27-4.86,2.43-6.17l57.09-34.83h626.22l.18.11,54.72,34.77c2.11,1.34,3.03,3.76,2.33,6.17-.7,2.4-2.77,3.96-5.27,3.96Z","fill","#dfdfdf","stroke-width","0"],["x","179.09","y","25.72","width","592.95","height","368.63","fill","#fff","stroke-width","0"],["points","794.9 441.5 159.09 441.5 190.52 416 764.9 416 794.9 441.5","fill","#2f2e41","stroke-width","0"],["points","626.31 458.64 324.83 458.64 336.26 441.5 614.88 441.5 626.31 458.64","fill","#2f2e41","stroke-width","0"],["points","838.74 152.18 824.02 157.02 824.02 135.82 837.38 135.82 838.74 152.18","fill","#f2a7aa","stroke-width","0"],["cx","825.84","cy","127.02","r","14.67","fill","#f2a7aa","stroke-width","0"],["d","m829.87,125.57c-2.46-.07-4.07-2.56-5.02-4.82-.95-2.27-1.94-4.87-4.21-5.81-1.86-.77-5.15,4.4-6.62,3.03-1.53-1.43-.04-8.81,1.59-10.13s3.85-1.58,5.95-1.68c5.11-.24,10.26.18,15.27,1.22,3.1.65,6.29,1.62,8.53,3.86,2.83,2.84,3.56,7.13,3.76,11.14.21,4.1-.03,8.4-2.02,11.98-1.99,3.59-6.17,6.24-10.17,5.32-.4-2.18,0-4.41.16-6.62.15-2.21,0-4.59-1.35-6.35s-4.23-2.45-5.8-.89","fill","#36344e","stroke-width","0"],["d","m847.92,130.65c1.47-1.08,3.22-1.97,5.03-1.75,1.95.24,3.6,1.85,4.1,3.75s-.06,4-1.27,5.55c-1.21,1.55-3,2.58-4.9,3.1-1.1.3-2.3.42-3.35-.03-1.54-.66-2.37-2.64-1.77-4.2","fill","#36344e","stroke-width","0"],["x","820.09","y","388","width","13.79","height","19.56","fill","#f2a7aa","stroke-width","0"],["d","m806.66,419.41c-1.45,0-2.74-.04-3.71-.13-3.66-.34-7.16-3.04-8.92-4.62-.79-.71-1.04-1.84-.63-2.82h0c.29-.7.88-1.22,1.61-1.43l9.68-2.77,15.67-10.58.17.31c.07.12,1.6,2.89,2.12,4.76.2.71.14,1.31-.15,1.77-.21.32-.49.5-.73.61.28.3,1.17.9,3.91,1.34,3.99.64,4.84-3.51,4.87-3.68l.03-.14.12-.08c1.9-1.23,3.07-1.78,3.48-1.66.25.08.67.2,1.81,11.49.11.35.91,2.95.37,5.43-.59,2.7-12.39,1.77-14.75,1.56-.07,0-8.9.64-14.96.64Z","fill","#36344e","stroke-width","0"],["x","865.58","y","374.8","width","13.79","height","19.56","transform","translate(-71.35 519.94) rotate(-31.95)","fill","#f2a7aa","stroke-width","0"],["d","m857.61,416.73c-1.62,0-3.11-.19-4.17-.38-1.04-.18-1.86-1.01-2.03-2.06h0c-.12-.75.1-1.5.61-2.07l6.75-7.47,7.7-17.27.31.17c.12.06,2.89,1.6,4.32,2.92.54.5.81,1.03.8,1.58,0,.38-.15.69-.29.9.4.1,1.47.14,4.03-.94,3.73-1.57,2.25-5.54,2.19-5.71l-.05-.13.06-.13c.97-2.05,1.66-3.14,2.07-3.25.25-.07.68-.18,7.61,8.79.28.24,2.33,2.02,3.19,4.42.93,2.6-9.58,8.06-11.69,9.13-.07.05-11.06,8.04-15.57,10.31-1.79.9-3.91,1.18-5.84,1.18Z","fill","#36344e","stroke-width","0"],["d","m844.04,224.38h-38.61l-3.5,35.92,15.33,132.71h19.71l-7.88-76.65,31.97,69.2,17.52-12.26-24.97-64.6s8.92-56.28,1.91-70.3c-7.01-14.02-11.48-14.02-11.48-14.02Z","fill","#36344e","stroke-width","0"],["points","863.24 226.57 801.92 226.57 820.32 147.3 847.03 147.3 863.24 226.57","fill","#4864fe","stroke-width","0"],["id","uuid-52db3307-ec3e-496d-a5d4-9d1f33ffc652-45-45-642","d","m786.69,145.73c-.98-4.82.81-9.23,4-9.84,3.19-.61,6.56,2.8,7.54,7.63.42,1.92.35,3.91-.19,5.81l3.88,20.49-10.02,1.58-2.76-20.36c-1.24-1.55-2.08-3.37-2.45-5.31h0Z","fill","#f2a7aa","stroke-width","0"],["d","m846.38,147.3h-23.56l-15.88,31.77-5.99-23.8-13.16,1.4s3.11,46.51,16.73,44.94c13.61-1.57,45.36-43.48,41.87-54.3Z","fill","#4864fe","stroke-width","0"],["id","uuid-2800d917-a06e-4fc6-b661-0f9df9cadefc-46-46-643","d","m872.7,268.11c.98,4.82-.81,9.23-4,9.84-3.19.61-6.56-2.8-7.54-7.63-.42-1.92-.35-3.91.19-5.81l-3.88-20.49,10.02-1.58,2.76,20.36c1.24,1.55,2.08,3.37,2.45,5.31,0,0,0,0,0,0Z","fill","#f2a7aa","stroke-width","0"],["d","m832.95,147.3s13.39-.57,14.08,0c3.65,2.99,25.09,110.66,25.09,110.66h-13.58s-25.6-110.66-25.6-110.66Z","fill","#4864fe","stroke-width","0"],[1,"text-primary","d-block","position-absolute"]],template:function(r,u){1&r&&(d.TgZ(0,"div",0),d.O4$(),d.TgZ(1,"svg",1),d._UZ(2,"path",2)(3,"path",3)(4,"path",4)(5,"rect",5)(6,"polygon",6)(7,"polygon",7)(8,"polygon",8)(9,"circle",9)(10,"path",10)(11,"path",11)(12,"rect",12)(13,"path",13)(14,"rect",14)(15,"path",15)(16,"path",16)(17,"polygon",17)(18,"path",18)(19,"path",19)(20,"path",20)(21,"path",21),d.qZA(),d.kcU(),d._UZ(22,"app-logo-svg",22),d.qZA())},dependencies:[S.u],styles:["app-logo-svg[_ngcontent-%COMP%]{width:36px;left:50%;transform:translate(-50%);top:24%}.pc-svg[_ngcontent-%COMP%]{height:120px}"]}),a})();function $(e,a){if(1&e){const n=d.EpF();d.ynx(0),d.TgZ(1,"div",1)(2,"main",2)(3,"div",3),d._UZ(4,"app-login-header",4),d.qZA(),d.TgZ(5,"div",5),d._UZ(6,"app-login-svg",6),d.TgZ(7,"app-login-buttons",7),d.NdJ("openQrModal",function(){d.CHM(n);const u=d.MAs(9);return d.KtG(u.open())}),d.qZA()()(),d.TgZ(8,"app-login-qr-modal",8,9),d.NdJ("loginQrEvent",function(u){d.CHM(n);const b=d.oxw();return d.KtG(b.saveProfileTokensEvent(u))}),d.qZA(),d._UZ(10,"app-footer",10),d.qZA(),d.BQk()}if(2&e){const n=d.oxw();d.xp6(1),d.ekj("embedded",n.appEmbedded),d.xp6(6),d.Q6J("failedAttempts",n.failedAttempts),d.xp6(3),d.Q6J("subscribeToToggleTosModalSubject",!0)}}const t=[{path:"",component:(()=>{var e;class a{constructor(r,u,b,x,v,C,k,D,R,O,z){this.router=r,this.loginService=u,this.globalsService=b,this.activatedRoute=x,this.toastService=v,this.titleCasePipe=C,this.urlQueryParamsService=k,this.preferencesService=D,this.loadingBarService=R,this.tokensStorageService=O,this.tokensService=z,this.render=!1,this.appName=G.lW,this.appEmbedded=G.wS,this.failedAttempts=[],G.wS&&this.loadingBarService.useRef("http").disable()}saveProfileTokensEvent(r){var u=this;return(0,it.Z)(function*(){u.tokensStorageService.refreshToken={value:r.refreshToken,id:r.refreshTokenId},u.tokensStorageService.accessToken=r.accessToken,r.refreshToken||(u.loginService.loggedWithOnlyAccessToken=!0),yield u.setProfileAndNavigate(r.profile)})()}setProfileAndNavigate(r){var u=this;return(0,it.Z)(function*(){u.globalsService.credentials=r;const b=u.loginService.redirect;u.loginService.redirect=void 0,u.loginService.loggedInCurrentSession=!0,yield u.router.navigateByUrl(b)})()}ngOnInit(){var r=this;return(0,it.Z)(function*(){const u=r.activatedRoute.snapshot.data[P.RT.PROFILE];yield r.logout(u&&u.success&&u.data&&!u.data.refreshToken);const b=r.urlQueryParamsService.getAndDeleteParam(P.RT.REDIRECT_PATH);if(b&&(r.loginService.redirect=b),u)if(u.success){if(!u.data)return;if(u.data.profile)return void(yield r.saveProfileTokensEvent(u.data));const x=u.data.refreshToken,v=u.data.accessToken;let C;if(x){r.tokensStorageService.refreshToken={value:x,id:u.data.refreshTokenId};try{const k=yield r.tokensService.generateAccessToken();r.tokensStorageService.accessToken=k.token,C=k.info}catch(k){}}else v&&(r.tokensStorageService.accessToken=v,C=yield r.loginService.getProfileFromAccessToken(v),C||(yield r.loginService.invalidateCurrentSession()));if(C)return void(yield r.setProfileAndNavigate(r.loginService.createProfileFromJwtResponse({host:C.host,user:{id:C.id,avatar:C.avatar,nickname:C.nickname,roles:C.roles}})))}else u.domain&&(r.showToast(u.domain),r.failedAttempts.push(u.domain));r.render=!0})()}logout(r){var u=this;return(0,it.Z)(function*(){r||(yield u.loginService.invalidateCurrentSession(),u.globalsService.forum=void 0),u.globalsService.credentials=void 0,u.tokensStorageService.accessToken=void 0,u.loginService.loggedWithOnlyAccessToken=!1,u.preferencesService.resetItemsOnProfileChange()})()}showToast(r){this.toastService.show({content:`Non risulti loggato su ${this.titleCasePipe.transform(r.split(".")[0])}, prova ad effettuare l'accesso dal <a href="https://accounts.${r}/?act=Login" target="_blank">portale dedicato</a> e a ricaricare la pagina!`,level:F.m.ERROR})}}return(e=a).\u0275fac=function(r){return new(r||e)(d.Y36(J.F0),d.Y36(W.r),d.Y36(nt.d),d.Y36(J.gz),d.Y36(I.k),d.Y36(tt.rS),d.Y36(N.J),d.Y36(q.y),d.Y36(mt.dL),d.Y36(X.n5),d.Y36(X.H))},e.\u0275cmp=d.Xpm({type:e,selectors:[["ng-component"]],features:[d._Bn([tt.rS])],decls:1,vars:1,consts:[[4,"ngIf"],[1,"wrapper","d-flex","flex-column"],[1,"mx-auto","d-flex","align-items-stretch","bg-white","shadow-sm","overflow-hidden","flex-column","flex-lg-row"],[1,"bg-light","d-flex","flex-column","service","pt-4"],[1,"d-flex","flex-column","flex-grow-1"],[1,"login","d-flex","flex-column"],[1,"d-none","d-lg-block"],[1,"d-block","my-auto",3,"failedAttempts","openQrModal"],[3,"loginQrEvent"],["loginQrModal",""],[3,"subscribeToToggleTosModalSubject"]],template:function(r,u){1&r&&d.YNc(0,$,11,4,"ng-container",0),2&r&&d.Q6J("ngIf",u.render)},dependencies:[tt.O5,ut.c,yt,bt,M,A],styles:["[_nghost-%COMP%]{display:flex;min-height:100vh}.wrapper[_ngcontent-%COMP%]{flex-basis:100%;background-image:url(/assets/back-pattern.png)}.wrapper.embedded[_ngcontent-%COMP%]{display:none}main[_ngcontent-%COMP%]{max-width:992px;margin-bottom:2rem}.service[_ngcontent-%COMP%], .login[_ngcontent-%COMP%]{flex:1 1 0;padding:2rem}.service[_ngcontent-%COMP%]{border-bottom:1px solid #dee2e6;padding-bottom:1.5rem}@media (min-width: 992px){main[_ngcontent-%COMP%]{margin-top:5rem;margin-bottom:5rem;border-radius:.25rem;border:1px solid #dee2e6}.service[_ngcontent-%COMP%]{border-bottom:0;border-right:1px solid #dee2e6;padding-bottom:2rem}app-login-svg[_ngcontent-%COMP%]{margin-bottom:2rem}}"]}),a})()}];let i=(()=>{var e;class a{}return(e=a).\u0275fac=function(r){return new(r||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[J.Bz.forChild(t),J.Bz]}),a})();var o=B(2740),s=B(4610),l=B(3038),c=B(5063);let g=(()=>{var e;class a{}return(e=a).\u0275fac=function(r){return new(r||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({providers:[{provide:Window,useValue:window}],imports:[tt.ez,H._,U.$,et.q,i,o.h,s.z,l.G,c.g]}),a})()},149:xt=>{self,xt.exports=(()=>{var lt={192:(H,U)=>{var et,it,F=function(){var G=function(y,w){var m=y,p=I[w],h=null,_=0,M=null,S=[],A={},$=function(e,a){h=function(n){for(var r=new Array(n),u=0;u<n;u+=1){r[u]=new Array(n);for(var b=0;b<n;b+=1)r[u][b]=null}return r}(_=4*m+17),f(0,0),f(_-7,0),f(0,_-7),i(),t(),s(e,a),m>=7&&o(e),null==M&&(M=c(m,p,S)),l(M,a)},f=function(e,a){for(var n=-1;n<=7;n+=1)if(!(e+n<=-1||_<=e+n))for(var r=-1;r<=7;r+=1)a+r<=-1||_<=a+r||(h[e+n][a+r]=0<=n&&n<=6&&(0==r||6==r)||0<=r&&r<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=r&&r<=4)},t=function(){for(var e=8;e<_-8;e+=1)null==h[e][6]&&(h[e][6]=e%2==0);for(var a=8;a<_-8;a+=1)null==h[6][a]&&(h[6][a]=a%2==0)},i=function(){for(var e=N.getPatternPosition(m),a=0;a<e.length;a+=1)for(var n=0;n<e.length;n+=1){var r=e[a],u=e[n];if(null==h[r][u])for(var b=-2;b<=2;b+=1)for(var x=-2;x<=2;x+=1)h[r+b][u+x]=-2==b||2==b||-2==x||2==x||0==b&&0==x}},o=function(e){for(var a=N.getBCHTypeNumber(m),n=0;n<18;n+=1){var r=!e&&1==(a>>n&1);h[Math.floor(n/3)][n%3+_-8-3]=r}for(n=0;n<18;n+=1)r=!e&&1==(a>>n&1),h[n%3+_-8-3][Math.floor(n/3)]=r},s=function(e,a){for(var r=N.getBCHTypeInfo(p<<3|a),u=0;u<15;u+=1){var b=!e&&1==(r>>u&1);u<6?h[u][8]=b:u<8?h[u+1][8]=b:h[_-15+u][8]=b}for(u=0;u<15;u+=1)b=!e&&1==(r>>u&1),u<8?h[8][_-u-1]=b:u<9?h[8][15-u-1+1]=b:h[8][15-u-1]=b;h[_-8][8]=!e},l=function(e,a){for(var n=-1,r=_-1,u=7,b=0,x=N.getMaskFunction(a),v=_-1;v>0;v-=2)for(6==v&&(v-=1);;){for(var C=0;C<2;C+=1)if(null==h[r][v-C]){var k=!1;b<e.length&&(k=1==(e[b]>>>u&1)),x(r,v-C)&&(k=!k),h[r][v-C]=k,-1==(u-=1)&&(b+=1,u=7)}if((r+=n)<0||_<=r){r-=n,n=-n;break}}},c=function(e,a,n){for(var r=mt.getRSBlocks(e,a),u=ut(),b=0;b<n.length;b+=1){var x=n[b];u.put(x.getMode(),4),u.put(x.getLength(),N.getLengthInBits(x.getMode(),e)),x.write(u)}var v=0;for(b=0;b<r.length;b+=1)v+=r[b].dataCount;if(u.getLengthInBits()>8*v)throw"code length overflow. ("+u.getLengthInBits()+">"+8*v+")";for(u.getLengthInBits()+4<=8*v&&u.put(0,4);u.getLengthInBits()%8!=0;)u.putBit(!1);for(;!(u.getLengthInBits()>=8*v||(u.put(236,8),u.getLengthInBits()>=8*v));)u.put(17,8);return function(C,k){for(var D=0,R=0,O=0,z=new Array(k.length),T=new Array(k.length),L=0;L<k.length;L+=1){var ot=k[L].dataCount,Q=k[L].totalCount-ot;R=Math.max(R,ot),O=Math.max(O,Q),z[L]=new Array(ot);for(var E=0;E<z[L].length;E+=1)z[L][E]=255&C.getBuffer()[E+D];D+=ot;var j=N.getErrorCorrectPolynomial(Q),Z=J(z[L],j.getLength()-1).mod(j);for(T[L]=new Array(j.getLength()-1),E=0;E<T[L].length;E+=1){var Y=E+Z.getLength()-T[L].length;T[L][E]=Y>=0?Z.getAt(Y):0}}var V=0;for(E=0;E<k.length;E+=1)V+=k[E].totalCount;var K=new Array(V),rt=0;for(E=0;E<R;E+=1)for(L=0;L<k.length;L+=1)E<z[L].length&&(K[rt]=z[L][E],rt+=1);for(E=0;E<O;E+=1)for(L=0;L<k.length;L+=1)E<T[L].length&&(K[rt]=T[L][E],rt+=1);return K}(u,r)};A.addData=function(e,a){var n=null;switch(a=a||"Byte"){case"Numeric":n=wt(e);break;case"Alphanumeric":n=yt(e);break;case"Byte":n=at(e);break;case"Kanji":n=st(e);break;default:throw"mode:"+a}S.push(n),M=null},A.isDark=function(e,a){if(e<0||_<=e||a<0||_<=a)throw e+","+a;return h[e][a]},A.getModuleCount=function(){return _},A.make=function(){if(m<1){for(var e=1;e<40;e++){for(var a=mt.getRSBlocks(e,p),n=ut(),r=0;r<S.length;r++){var u=S[r];n.put(u.getMode(),4),n.put(u.getLength(),N.getLengthInBits(u.getMode(),e)),u.write(n)}var b=0;for(r=0;r<a.length;r++)b+=a[r].dataCount;if(n.getLengthInBits()<=8*b)break}m=e}$(!1,function(){for(var x=0,v=0,C=0;C<8;C+=1){$(!0,C);var k=N.getLostPoint(A);(0==C||x>k)&&(x=k,v=C)}return v}())},A.createTableTag=function(e,a){e=e||2;var n="";n+='<table style="',n+=" border-width: 0px; border-style: none;",n+=" border-collapse: collapse;",n+=" padding: 0px; margin: "+(a=void 0===a?4*e:a)+"px;",n+='">',n+="<tbody>";for(var r=0;r<A.getModuleCount();r+=1){n+="<tr>";for(var u=0;u<A.getModuleCount();u+=1)n+='<td style="',n+=" border-width: 0px; border-style: none;",n+=" border-collapse: collapse;",n+=" padding: 0px; margin: 0px;",n+=" width: "+e+"px;",n+=" height: "+e+"px;",n+=" background-color: ",n+=A.isDark(r,u)?"#000000":"#ffffff",n+=";",n+='"/>';n+="</tr>"}return(n+="</tbody>")+"</table>"},A.createSvgTag=function(e,a,n,r){var u={};"object"==typeof arguments[0]&&(e=(u=arguments[0]).cellSize,a=u.margin,n=u.alt,r=u.title),e=e||2,a=void 0===a?4*e:a,(n="string"==typeof n?{text:n}:n||{}).text=n.text||null,n.id=n.text?n.id||"qrcode-description":null,(r="string"==typeof r?{text:r}:r||{}).text=r.text||null,r.id=r.text?r.id||"qrcode-title":null;var b,x,v,C,k=A.getModuleCount()*e+2*a,D="";for(C="l"+e+",0 0,"+e+" -"+e+",0 0,-"+e+"z ",D+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',D+=u.scalable?"":' width="'+k+'px" height="'+k+'px"',D+=' viewBox="0 0 '+k+" "+k+'" ',D+=' preserveAspectRatio="xMinYMin meet"',D+=r.text||n.text?' role="img" aria-labelledby="'+g([r.id,n.id].join(" ").trim())+'"':"",D+=">",D+=r.text?'<title id="'+g(r.id)+'">'+g(r.text)+"</title>":"",D+=n.text?'<description id="'+g(n.id)+'">'+g(n.text)+"</description>":"",D+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',D+='<path d="',x=0;x<A.getModuleCount();x+=1)for(v=x*e+a,b=0;b<A.getModuleCount();b+=1)A.isDark(x,b)&&(D+="M"+(b*e+a)+","+v+C);return(D+='" stroke="transparent" fill="black"/>')+"</svg>"},A.createDataURL=function(e,a){e=e||2,a=void 0===a?4*e:a;var n=A.getModuleCount()*e+2*a,r=a,u=n-a;return _t(n,n,function(b,x){if(r<=b&&b<u&&r<=x&&x<u){var v=Math.floor((b-r)/e),C=Math.floor((x-r)/e);return A.isDark(C,v)?0:1}return 1})},A.createImgTag=function(e,a,n){e=e||2,a=void 0===a?4*e:a;var r=A.getModuleCount()*e+2*a,u="";return u+="<img",u+=' src="',u+=A.createDataURL(e,a),u+='"',u+=' width="',u+=r,u+='"',u+=' height="',u+=r,u+='"',n&&(u+=' alt="',u+=g(n),u+='"'),u+"/>"};var g=function(e){for(var a="",n=0;n<e.length;n+=1){var r=e.charAt(n);switch(r){case"<":a+="&lt;";break;case">":a+="&gt;";break;case"&":a+="&amp;";break;case'"':a+="&quot;";break;default:a+=r}}return a};return A.createASCII=function(e,a){if((e=e||1)<2)return function(z){z=void 0===z?2:z;var T,L,ot,Q,E,j=1*A.getModuleCount()+2*z,Z=z,Y=j-z,V={"\u2588\u2588":"\u2588","\u2588 ":"\u2580"," \u2588":"\u2584","  ":" "},K={"\u2588\u2588":"\u2580","\u2588 ":"\u2580"," \u2588":" ","  ":" "},rt="";for(T=0;T<j;T+=2){for(ot=Math.floor((T-Z)/1),Q=Math.floor((T+1-Z)/1),L=0;L<j;L+=1)E="\u2588",Z<=L&&L<Y&&Z<=T&&T<Y&&A.isDark(ot,Math.floor((L-Z)/1))&&(E=" "),Z<=L&&L<Y&&Z<=T+1&&T+1<Y&&A.isDark(Q,Math.floor((L-Z)/1))?E+=" ":E+="\u2588",rt+=z<1&&T+1>=Y?K[E]:V[E];rt+="\n"}return j%2&&z>0?rt.substring(0,rt.length-j-1)+Array(j+1).join("\u2580"):rt.substring(0,rt.length-1)}(a);e-=1,a=void 0===a?2*e:a;var n,r,u,b,x=A.getModuleCount()*e+2*a,v=a,C=x-a,k=Array(e+1).join("\u2588\u2588"),D=Array(e+1).join("  "),R="",O="";for(n=0;n<x;n+=1){for(u=Math.floor((n-v)/e),O="",r=0;r<x;r+=1)b=1,v<=r&&r<C&&v<=n&&n<C&&A.isDark(u,Math.floor((r-v)/e))&&(b=0),O+=b?k:D;for(u=0;u<e;u+=1)R+=O+"\n"}return R.substring(0,R.length-1)},A.renderTo2dContext=function(e,a){a=a||2;for(var n=A.getModuleCount(),r=0;r<n;r++)for(var u=0;u<n;u++)e.fillStyle=A.isDark(r,u)?"black":"white",e.fillRect(r*a,u*a,a,a)},A};G.stringToBytes=(G.stringToBytesFuncs={default:function(y){for(var w=[],m=0;m<y.length;m+=1){var p=y.charCodeAt(m);w.push(255&p)}return w}}).default,G.createStringToBytes=function(y,w){var m=function(){for(var h=dt(y),_=function(){var t=h.read();if(-1==t)throw"eof";return t},M=0,S={};;){var A=h.read();if(-1==A)break;var $=_(),f=_()<<8|_();S[String.fromCharCode(A<<8|$)]=f,M+=1}if(M!=w)throw M+" != "+w;return S}(),p="?".charCodeAt(0);return function(h){for(var _=[],M=0;M<h.length;M+=1){var S=h.charCodeAt(M);if(S<128)_.push(S);else{var A=m[h.charAt(M)];"number"==typeof A?(255&A)==A?_.push(A):(_.push(A>>>8),_.push(255&A)):_.push(p)}}return _}};var X,W,q,P,I={L:1,M:0,Q:3,H:2},N=(X=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],1335,W=7973,P=function(y){for(var w=0;0!=y;)w+=1,y>>>=1;return w},(q={}).getBCHTypeInfo=function(y){for(var w=y<<10;P(w)-P(1335)>=0;)w^=1335<<P(w)-P(1335);return 21522^(y<<10|w)},q.getBCHTypeNumber=function(y){for(var w=y<<12;P(w)-P(W)>=0;)w^=W<<P(w)-P(W);return y<<12|w},q.getPatternPosition=function(y){return X[y-1]},q.getMaskFunction=function(y){switch(y){case 0:return function(w,m){return(w+m)%2==0};case 1:return function(w,m){return w%2==0};case 2:return function(w,m){return m%3==0};case 3:return function(w,m){return(w+m)%3==0};case 4:return function(w,m){return(Math.floor(w/2)+Math.floor(m/3))%2==0};case 5:return function(w,m){return w*m%2+w*m%3==0};case 6:return function(w,m){return(w*m%2+w*m%3)%2==0};case 7:return function(w,m){return(w*m%3+(w+m)%2)%2==0};default:throw"bad maskPattern:"+y}},q.getErrorCorrectPolynomial=function(y){for(var w=J([1],0),m=0;m<y;m+=1)w=w.multiply(J([1,d.gexp(m)],0));return w},q.getLengthInBits=function(y,w){if(1<=w&&w<10)switch(y){case 1:return 10;case 2:return 9;case 4:case 8:return 8;default:throw"mode:"+y}else if(w<27)switch(y){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw"mode:"+y}else{if(!(w<41))throw"type:"+w;switch(y){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw"mode:"+y}}},q.getLostPoint=function(y){for(var w=y.getModuleCount(),m=0,p=0;p<w;p+=1)for(var h=0;h<w;h+=1){for(var _=0,M=y.isDark(p,h),S=-1;S<=1;S+=1)if(!(p+S<0||w<=p+S))for(var A=-1;A<=1;A+=1)h+A<0||w<=h+A||0==S&&0==A||M==y.isDark(p+S,h+A)&&(_+=1);_>5&&(m+=3+_-5)}for(p=0;p<w-1;p+=1)for(h=0;h<w-1;h+=1){var $=0;y.isDark(p,h)&&($+=1),y.isDark(p+1,h)&&($+=1),y.isDark(p,h+1)&&($+=1),y.isDark(p+1,h+1)&&($+=1),0!=$&&4!=$||(m+=3)}for(p=0;p<w;p+=1)for(h=0;h<w-6;h+=1)y.isDark(p,h)&&!y.isDark(p,h+1)&&y.isDark(p,h+2)&&y.isDark(p,h+3)&&y.isDark(p,h+4)&&!y.isDark(p,h+5)&&y.isDark(p,h+6)&&(m+=40);for(h=0;h<w;h+=1)for(p=0;p<w-6;p+=1)y.isDark(p,h)&&!y.isDark(p+1,h)&&y.isDark(p+2,h)&&y.isDark(p+3,h)&&y.isDark(p+4,h)&&!y.isDark(p+5,h)&&y.isDark(p+6,h)&&(m+=40);var f=0;for(h=0;h<w;h+=1)for(p=0;p<w;p+=1)y.isDark(p,h)&&(f+=1);return m+Math.abs(100*f/w/w-50)/5*10},q),d=function(){for(var y=new Array(256),w=new Array(256),m=0;m<8;m+=1)y[m]=1<<m;for(m=8;m<256;m+=1)y[m]=y[m-4]^y[m-5]^y[m-6]^y[m-8];for(m=0;m<255;m+=1)w[y[m]]=m;return{glog:function(p){if(p<1)throw"glog("+p+")";return w[p]},gexp:function(p){for(;p<0;)p+=255;for(;p>=256;)p-=255;return y[p]}}}();function J(y,w){if(void 0===y.length)throw y.length+"/"+w;var m=function(){for(var h=0;h<y.length&&0==y[h];)h+=1;for(var _=new Array(y.length-h+w),M=0;M<y.length-h;M+=1)_[M]=y[M+h];return _}(),p={getAt:function(h){return m[h]},getLength:function(){return m.length},multiply:function(h){for(var _=new Array(p.getLength()+h.getLength()-1),M=0;M<p.getLength();M+=1)for(var S=0;S<h.getLength();S+=1)_[M+S]^=d.gexp(d.glog(p.getAt(M))+d.glog(h.getAt(S)));return J(_,0)},mod:function(h){if(p.getLength()-h.getLength()<0)return p;for(var _=d.glog(p.getAt(0))-d.glog(h.getAt(0)),M=new Array(p.getLength()),S=0;S<p.getLength();S+=1)M[S]=p.getAt(S);for(S=0;S<h.getLength();S+=1)M[S]^=d.gexp(d.glog(h.getAt(S))+_);return J(M,0).mod(h)}};return p}var y,w,mt=(y=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],w=function(p,h){var _={};return _.totalCount=p,_.dataCount=h,_},{getRSBlocks:function(p,h){var _=function(o,s){switch(s){case I.L:return y[4*(o-1)+0];case I.M:return y[4*(o-1)+1];case I.Q:return y[4*(o-1)+2];case I.H:return y[4*(o-1)+3];default:return}}(p,h);if(void 0===_)throw"bad rs block @ typeNumber:"+p+"/errorCorrectionLevel:"+h;for(var M=_.length/3,S=[],A=0;A<M;A+=1)for(var $=_[3*A+0],f=_[3*A+1],t=_[3*A+2],i=0;i<$;i+=1)S.push(w(f,t));return S}}),ut=function(){var y=[],w=0,m={getBuffer:function(){return y},getAt:function(p){var h=Math.floor(p/8);return 1==(y[h]>>>7-p%8&1)},put:function(p,h){for(var _=0;_<h;_+=1)m.putBit(1==(p>>>h-_-1&1))},getLengthInBits:function(){return w},putBit:function(p){var h=Math.floor(w/8);y.length<=h&&y.push(0),p&&(y[h]|=128>>>w%8),w+=1}};return m},wt=function(y){var w=y,m={getMode:function(){return 1},getLength:function(_){return w.length},write:function(_){for(var M=w,S=0;S+2<M.length;)_.put(p(M.substring(S,S+3)),10),S+=3;S<M.length&&(M.length-S==1?_.put(p(M.substring(S,S+1)),4):M.length-S==2&&_.put(p(M.substring(S,S+2)),7))}},p=function(_){for(var M=0,S=0;S<_.length;S+=1)M=10*M+h(_.charAt(S));return M},h=function(_){if("0"<=_&&_<="9")return _.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+_};return m},yt=function(y){var w=y,m={getMode:function(){return 2},getLength:function(h){return w.length},write:function(h){for(var _=w,M=0;M+1<_.length;)h.put(45*p(_.charAt(M))+p(_.charAt(M+1)),11),M+=2;M<_.length&&h.put(p(_.charAt(M)),6)}},p=function(h){if("0"<=h&&h<="9")return h.charCodeAt(0)-"0".charCodeAt(0);if("A"<=h&&h<="Z")return h.charCodeAt(0)-"A".charCodeAt(0)+10;switch(h){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+h}};return m},at=function(y){var w=G.stringToBytes(y);return{getMode:function(){return 4},getLength:function(m){return w.length},write:function(m){for(var p=0;p<w.length;p+=1)m.put(w[p],8)}}},st=function(y){var w=G.stringToBytesFuncs.SJIS;if(!w)throw"sjis not supported.";!function(p,h){var _=w("\u53cb");if(2!=_.length||38726!=(_[0]<<8|_[1]))throw"sjis not supported."}();var m=w(y);return{getMode:function(){return 8},getLength:function(p){return~~(m.length/2)},write:function(p){for(var h=m,_=0;_+1<h.length;){var M=(255&h[_])<<8|255&h[_+1];if(33088<=M&&M<=40956)M-=33088;else{if(!(57408<=M&&M<=60351))throw"illegal char at "+(_+1)+"/"+M;M-=49472}p.put(M=192*(M>>>8&255)+(255&M),13),_+=2}if(_<h.length)throw"illegal char at "+(_+1)}}},bt=function(){var y=[],w={writeByte:function(m){y.push(255&m)},writeShort:function(m){w.writeByte(m),w.writeByte(m>>>8)},writeBytes:function(m,p,h){p=p||0,h=h||m.length;for(var _=0;_<h;_+=1)w.writeByte(m[_+p])},writeString:function(m){for(var p=0;p<m.length;p+=1)w.writeByte(m.charCodeAt(p))},toByteArray:function(){return y},toString:function(){var m="";m+="[";for(var p=0;p<y.length;p+=1)p>0&&(m+=","),m+=y[p];return m+"]"}};return w},dt=function(y){var w=y,m=0,p=0,h=0,_={read:function(){for(;h<8;){if(m>=w.length){if(0==h)return-1;throw"unexpected end of file./"+h}var S=w.charAt(m);if(m+=1,"="==S)return h=0,-1;S.match(/^\s$/)||(p=p<<6|M(S.charCodeAt(0)),h+=6)}var A=p>>>h-8&255;return h-=8,A}},M=function(S){if(65<=S&&S<=90)return S-65;if(97<=S&&S<=122)return S-97+26;if(48<=S&&S<=57)return S-48+52;if(43==S)return 62;if(47==S)return 63;throw"c:"+S};return _},_t=function(y,w,m){for(var p=function(f,t){var i=f,o=t,s=new Array(f*t),l={setPixel:function(e,a,n){s[a*i+e]=n},write:function(e){e.writeString("GIF87a"),e.writeShort(i),e.writeShort(o),e.writeByte(128),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(255),e.writeByte(255),e.writeByte(255),e.writeString(","),e.writeShort(0),e.writeShort(0),e.writeShort(i),e.writeShort(o),e.writeByte(0);var a=c(2);e.writeByte(2);for(var n=0;a.length-n>255;)e.writeByte(255),e.writeBytes(a,n,255),n+=255;e.writeByte(a.length-n),e.writeBytes(a,n,a.length-n),e.writeByte(0),e.writeString(";")}},c=function(e){for(var a=1<<e,n=1+(1<<e),r=e+1,u=g(),b=0;b<a;b+=1)u.add(String.fromCharCode(b));u.add(String.fromCharCode(a)),u.add(String.fromCharCode(n));var x,v,C,k=bt(),D=(x=k,v=0,C=0,{write:function(T,L){if(T>>>L)throw"length over";for(;v+L>=8;)x.writeByte(255&(T<<v|C)),L-=8-v,T>>>=8-v,C=0,v=0;C|=T<<v,v+=L},flush:function(){v>0&&x.writeByte(C)}});D.write(a,r);var R=0,O=String.fromCharCode(s[R]);for(R+=1;R<s.length;){var z=String.fromCharCode(s[R]);R+=1,u.contains(O+z)?O+=z:(D.write(u.indexOf(O),r),u.size()<4095&&(u.size()==1<<r&&(r+=1),u.add(O+z)),O=z)}return D.write(u.indexOf(O),r),D.write(n,r),D.flush(),k.toByteArray()},g=function(){var e={},a=0,n={add:function(r){if(n.contains(r))throw"dup key:"+r;e[r]=a,a+=1},size:function(){return a},indexOf:function(r){return e[r]},contains:function(r){return void 0!==e[r]}};return n};return l}(y,w),h=0;h<w;h+=1)for(var _=0;_<y;_+=1)p.setPixel(_,h,m(_,h));var M=bt();p.write(M);for(var S=function(){var f=0,t=0,i=0,o="",s={},l=function(g){o+=String.fromCharCode(c(63&g))},c=function(g){if(!(g<0)){if(g<26)return 65+g;if(g<52)return g-26+97;if(g<62)return g-52+48;if(62==g)return 43;if(63==g)return 47}throw"n:"+g};return s.writeByte=function(g){for(f=f<<8|255&g,t+=8,i+=1;t>=6;)l(f>>>t-6),t-=6},s.flush=function(){if(t>0&&(l(f<<6-t),f=0,t=0),i%3!=0)for(var g=3-i%3,e=0;e<g;e+=1)o+="="},s.toString=function(){return o},s}(),A=M.toByteArray(),$=0;$<A.length;$+=1)S.writeByte(A[$]);return S.flush(),"data:image/gif;base64,"+S};return G}();F.stringToBytesFuncs["UTF-8"]=function(G){return function(X){for(var nt=[],W=0;W<X.length;W++){var q=X.charCodeAt(W);q<128?nt.push(q):q<2048?nt.push(192|q>>6,128|63&q):q<55296||q>=57344?nt.push(224|q>>12,128|q>>6&63,128|63&q):(W++,q=65536+((1023&q)<<10|1023&X.charCodeAt(W)),nt.push(240|q>>18,128|q>>12&63,128|q>>6&63,128|63&q))}return nt}(G)},void 0===(it="function"==typeof(et=function(){return F})?et.apply(U,[]):et)||(H.exports=it)},676:(H,U,et)=>{"use strict";et.d(U,{default:()=>$});var it=function(){return(it=Object.assign||function(f){for(var t,i=1,o=arguments.length;i<o;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(f[s]=t[s]);return f}).apply(this,arguments)},G=function(f){return!!f&&"object"==typeof f&&!Array.isArray(f)};function X(f){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(!t.length)return f;var o=t.shift();return void 0!==o&&G(f)&&G(o)?(f=it({},f),Object.keys(o).forEach(function(s){var l=f[s],c=o[s];f[s]=Array.isArray(l)&&Array.isArray(c)?c:G(l)&&G(c)?X(Object.assign({},l),c):c}),X.apply(void 0,function(){for(var f=0,t=0,i=arguments.length;t<i;t++)f+=arguments[t].length;var o=Array(f),s=0;for(t=0;t<i;t++)for(var l=arguments[t],c=0,g=l.length;c<g;c++,s++)o[s]=l[c];return o}([f],t))):f}function nt(f,t){var i=document.createElement("a");i.download=t,i.href=f,document.body.appendChild(i),i.click(),document.body.removeChild(i)}function W(f){return t=this,void 0,s=function(){return function(l,c){var g,e,a,n,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return n={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function u(b){return function(x){return function(v){if(g)throw new TypeError("Generator is already executing.");for(;r;)try{if(g=1,e&&(a=2&v[0]?e.return:v[0]?e.throw||((a=e.return)&&a.call(e),0):e.next)&&!(a=a.call(e,v[1])).done)return a;switch(e=0,a&&(v=[2&v[0],a.value]),v[0]){case 0:case 1:a=v;break;case 4:return r.label++,{value:v[1],done:!1};case 5:r.label++,e=v[1],v=[0];continue;case 7:v=r.ops.pop(),r.trys.pop();continue;default:if(!((a=(a=r.trys).length>0&&a[a.length-1])||6!==v[0]&&2!==v[0])){r=0;continue}if(3===v[0]&&(!a||v[1]>a[0]&&v[1]<a[3])){r.label=v[1];break}if(6===v[0]&&r.label<a[1]){r.label=a[1],a=v;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(v);break}a[2]&&r.ops.pop(),r.trys.pop();continue}v=c.call(l,r)}catch(C){v=[6,C],e=0}finally{g=a=0}if(5&v[0])throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}([b,x])}}}(this,function(l){return[2,new Promise(function(c){var g=new XMLHttpRequest;g.onload=function(){var e=new FileReader;e.onloadend=function(){c(e.result)},e.readAsDataURL(g.response)},g.open("GET",f),g.responseType="blob",g.send()})]})},new((o=void 0)||(o=Promise))(function(l,c){function g(n){try{a(s.next(n))}catch(r){c(r)}}function e(n){try{a(s.throw(n))}catch(r){c(r)}}function a(n){var r;n.done?l(n.value):(r=n.value,r instanceof o?r:new o(function(u){u(r)})).then(g,e)}a((s=s.apply(t,[])).next())});var t,o,s}const q={L:.07,M:.15,Q:.25,H:.3};var P=function(){return(P=Object.assign||function(f){for(var t,i=1,o=arguments.length;i<o;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(f[s]=t[s]);return f}).apply(this,arguments)};const I=function(){function f(t){var o=t.type;this._svg=t.svg,this._type=o}return f.prototype.draw=function(t,i,o,s){var l;switch(this._type){case"dots":l=this._drawDot;break;case"classy":l=this._drawClassy;break;case"classy-rounded":l=this._drawClassyRounded;break;case"rounded":l=this._drawRounded;break;case"extra-rounded":l=this._drawExtraRounded;break;default:l=this._drawSquare}l.call(this,{x:t,y:i,size:o,getNeighbor:s})},f.prototype._rotateFigure=function(t){var i,l=t.size,c=t.rotation,g=void 0===c?0:c,e=t.x+l/2,a=t.y+l/2;(0,t.draw)(),null===(i=this._element)||void 0===i||i.setAttribute("transform","rotate("+180*g/Math.PI+","+e+","+a+")")},f.prototype._basicDot=function(t){var i=this,o=t.size,s=t.x,l=t.y;this._rotateFigure(P(P({},t),{draw:function(){i._element=document.createElementNS("http://www.w3.org/2000/svg","circle"),i._element.setAttribute("cx",String(s+o/2)),i._element.setAttribute("cy",String(l+o/2)),i._element.setAttribute("r",String(o/2))}}))},f.prototype._basicSquare=function(t){var i=this,o=t.size,s=t.x,l=t.y;this._rotateFigure(P(P({},t),{draw:function(){i._element=document.createElementNS("http://www.w3.org/2000/svg","rect"),i._element.setAttribute("x",String(s)),i._element.setAttribute("y",String(l)),i._element.setAttribute("width",String(o)),i._element.setAttribute("height",String(o))}}))},f.prototype._basicSideRounded=function(t){var i=this,o=t.size,s=t.x,l=t.y;this._rotateFigure(P(P({},t),{draw:function(){i._element=document.createElementNS("http://www.w3.org/2000/svg","path"),i._element.setAttribute("d","M "+s+" "+l+"v "+o+"h "+o/2+"a "+o/2+" "+o/2+", 0, 0, 0, 0 "+-o)}}))},f.prototype._basicCornerRounded=function(t){var i=this,o=t.size,s=t.x,l=t.y;this._rotateFigure(P(P({},t),{draw:function(){i._element=document.createElementNS("http://www.w3.org/2000/svg","path"),i._element.setAttribute("d","M "+s+" "+l+"v "+o+"h "+o+"v "+-o/2+"a "+o/2+" "+o/2+", 0, 0, 0, "+-o/2+" "+-o/2)}}))},f.prototype._basicCornerExtraRounded=function(t){var i=this,o=t.size,s=t.x,l=t.y;this._rotateFigure(P(P({},t),{draw:function(){i._element=document.createElementNS("http://www.w3.org/2000/svg","path"),i._element.setAttribute("d","M "+s+" "+l+"v "+o+"h "+o+"a "+o+" "+o+", 0, 0, 0, "+-o+" "+-o)}}))},f.prototype._basicCornersRounded=function(t){var i=this,o=t.size,s=t.x,l=t.y;this._rotateFigure(P(P({},t),{draw:function(){i._element=document.createElementNS("http://www.w3.org/2000/svg","path"),i._element.setAttribute("d","M "+s+" "+l+"v "+o/2+"a "+o/2+" "+o/2+", 0, 0, 0, "+o/2+" "+o/2+"h "+o/2+"v "+-o/2+"a "+o/2+" "+o/2+", 0, 0, 0, "+-o/2+" "+-o/2)}}))},f.prototype._drawDot=function(t){this._basicDot({x:t.x,y:t.y,size:t.size,rotation:0})},f.prototype._drawSquare=function(t){this._basicSquare({x:t.x,y:t.y,size:t.size,rotation:0})},f.prototype._drawRounded=function(t){var i=t.x,o=t.y,s=t.size,l=t.getNeighbor,c=l?+l(-1,0):0,g=l?+l(1,0):0,e=l?+l(0,-1):0,a=l?+l(0,1):0,n=c+g+e+a;if(0!==n)if(n>2||c&&g||e&&a)this._basicSquare({x:i,y:o,size:s,rotation:0});else{if(2===n){var r=0;return c&&e?r=Math.PI/2:e&&g?r=Math.PI:g&&a&&(r=-Math.PI/2),void this._basicCornerRounded({x:i,y:o,size:s,rotation:r})}if(1===n)return r=0,e?r=Math.PI/2:g?r=Math.PI:a&&(r=-Math.PI/2),void this._basicSideRounded({x:i,y:o,size:s,rotation:r})}else this._basicDot({x:i,y:o,size:s,rotation:0})},f.prototype._drawExtraRounded=function(t){var i=t.x,o=t.y,s=t.size,l=t.getNeighbor,c=l?+l(-1,0):0,g=l?+l(1,0):0,e=l?+l(0,-1):0,a=l?+l(0,1):0,n=c+g+e+a;if(0!==n)if(n>2||c&&g||e&&a)this._basicSquare({x:i,y:o,size:s,rotation:0});else{if(2===n){var r=0;return c&&e?r=Math.PI/2:e&&g?r=Math.PI:g&&a&&(r=-Math.PI/2),void this._basicCornerExtraRounded({x:i,y:o,size:s,rotation:r})}if(1===n)return r=0,e?r=Math.PI/2:g?r=Math.PI:a&&(r=-Math.PI/2),void this._basicSideRounded({x:i,y:o,size:s,rotation:r})}else this._basicDot({x:i,y:o,size:s,rotation:0})},f.prototype._drawClassy=function(t){var i=t.x,o=t.y,s=t.size,l=t.getNeighbor,c=l?+l(-1,0):0,g=l?+l(1,0):0,e=l?+l(0,-1):0,a=l?+l(0,1):0;c+g+e+a!==0?c||e?g||a?this._basicSquare({x:i,y:o,size:s,rotation:0}):this._basicCornerRounded({x:i,y:o,size:s,rotation:Math.PI/2}):this._basicCornerRounded({x:i,y:o,size:s,rotation:-Math.PI/2}):this._basicCornersRounded({x:i,y:o,size:s,rotation:Math.PI/2})},f.prototype._drawClassyRounded=function(t){var i=t.x,o=t.y,s=t.size,l=t.getNeighbor,c=l?+l(-1,0):0,g=l?+l(1,0):0,e=l?+l(0,-1):0,a=l?+l(0,1):0;c+g+e+a!==0?c||e?g||a?this._basicSquare({x:i,y:o,size:s,rotation:0}):this._basicCornerExtraRounded({x:i,y:o,size:s,rotation:Math.PI/2}):this._basicCornerExtraRounded({x:i,y:o,size:s,rotation:-Math.PI/2}):this._basicCornersRounded({x:i,y:o,size:s,rotation:Math.PI/2})},f}();var N=function(){return(N=Object.assign||function(f){for(var t,i=1,o=arguments.length;i<o;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(f[s]=t[s]);return f}).apply(this,arguments)};const d=function(){function f(t){var o=t.type;this._svg=t.svg,this._type=o}return f.prototype.draw=function(t,i,o,s){var l;switch(this._type){case"square":l=this._drawSquare;break;case"extra-rounded":l=this._drawExtraRounded;break;default:l=this._drawDot}l.call(this,{x:t,y:i,size:o,rotation:s})},f.prototype._rotateFigure=function(t){var i,l=t.size,c=t.rotation,g=void 0===c?0:c,e=t.x+l/2,a=t.y+l/2;(0,t.draw)(),null===(i=this._element)||void 0===i||i.setAttribute("transform","rotate("+180*g/Math.PI+","+e+","+a+")")},f.prototype._basicDot=function(t){var i=this,o=t.size,s=t.x,l=t.y,c=o/7;this._rotateFigure(N(N({},t),{draw:function(){i._element=document.createElementNS("http://www.w3.org/2000/svg","path"),i._element.setAttribute("clip-rule","evenodd"),i._element.setAttribute("d","M "+(s+o/2)+" "+l+"a "+o/2+" "+o/2+" 0 1 0 0.1 0zm 0 "+c+"a "+(o/2-c)+" "+(o/2-c)+" 0 1 1 -0.1 0Z")}}))},f.prototype._basicSquare=function(t){var i=this,o=t.size,s=t.x,l=t.y,c=o/7;this._rotateFigure(N(N({},t),{draw:function(){i._element=document.createElementNS("http://www.w3.org/2000/svg","path"),i._element.setAttribute("clip-rule","evenodd"),i._element.setAttribute("d","M "+s+" "+l+"v "+o+"h "+o+"v "+-o+"zM "+(s+c)+" "+(l+c)+"h "+(o-2*c)+"v "+(o-2*c)+"h "+(2*c-o)+"z")}}))},f.prototype._basicExtraRounded=function(t){var i=this,s=t.x,l=t.y,c=t.size/7;this._rotateFigure(N(N({},t),{draw:function(){i._element=document.createElementNS("http://www.w3.org/2000/svg","path"),i._element.setAttribute("clip-rule","evenodd"),i._element.setAttribute("d","M "+s+" "+(l+2.5*c)+"v "+2*c+"a "+2.5*c+" "+2.5*c+", 0, 0, 0, "+2.5*c+" "+2.5*c+"h "+2*c+"a "+2.5*c+" "+2.5*c+", 0, 0, 0, "+2.5*c+" "+2.5*-c+"v "+-2*c+"a "+2.5*c+" "+2.5*c+", 0, 0, 0, "+2.5*-c+" "+2.5*-c+"h "+-2*c+"a "+2.5*c+" "+2.5*c+", 0, 0, 0, "+2.5*-c+" "+2.5*c+"M "+(s+2.5*c)+" "+(l+c)+"h "+2*c+"a "+1.5*c+" "+1.5*c+", 0, 0, 1, "+1.5*c+" "+1.5*c+"v "+2*c+"a "+1.5*c+" "+1.5*c+", 0, 0, 1, "+1.5*-c+" "+1.5*c+"h "+-2*c+"a "+1.5*c+" "+1.5*c+", 0, 0, 1, "+1.5*-c+" "+1.5*-c+"v "+-2*c+"a "+1.5*c+" "+1.5*c+", 0, 0, 1, "+1.5*c+" "+1.5*-c)}}))},f.prototype._drawDot=function(t){this._basicDot({x:t.x,y:t.y,size:t.size,rotation:t.rotation})},f.prototype._drawSquare=function(t){this._basicSquare({x:t.x,y:t.y,size:t.size,rotation:t.rotation})},f.prototype._drawExtraRounded=function(t){this._basicExtraRounded({x:t.x,y:t.y,size:t.size,rotation:t.rotation})},f}();var J=function(){return(J=Object.assign||function(f){for(var t,i=1,o=arguments.length;i<o;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(f[s]=t[s]);return f}).apply(this,arguments)};const mt=function(){function f(t){var o=t.type;this._svg=t.svg,this._type=o}return f.prototype.draw=function(t,i,o,s){("square"===this._type?this._drawSquare:this._drawDot).call(this,{x:t,y:i,size:o,rotation:s})},f.prototype._rotateFigure=function(t){var i,l=t.size,c=t.rotation,g=void 0===c?0:c,e=t.x+l/2,a=t.y+l/2;(0,t.draw)(),null===(i=this._element)||void 0===i||i.setAttribute("transform","rotate("+180*g/Math.PI+","+e+","+a+")")},f.prototype._basicDot=function(t){var i=this,o=t.size,s=t.x,l=t.y;this._rotateFigure(J(J({},t),{draw:function(){i._element=document.createElementNS("http://www.w3.org/2000/svg","circle"),i._element.setAttribute("cx",String(s+o/2)),i._element.setAttribute("cy",String(l+o/2)),i._element.setAttribute("r",String(o/2))}}))},f.prototype._basicSquare=function(t){var i=this,o=t.size,s=t.x,l=t.y;this._rotateFigure(J(J({},t),{draw:function(){i._element=document.createElementNS("http://www.w3.org/2000/svg","rect"),i._element.setAttribute("x",String(s)),i._element.setAttribute("y",String(l)),i._element.setAttribute("width",String(o)),i._element.setAttribute("height",String(o))}}))},f.prototype._drawDot=function(t){this._basicDot({x:t.x,y:t.y,size:t.size,rotation:t.rotation})},f.prototype._drawSquare=function(t){this._basicSquare({x:t.x,y:t.y,size:t.size,rotation:t.rotation})},f}(),ut="circle";var wt=function(f,t,i,o){return new(i||(i=Promise))(function(s,l){function c(a){try{e(o.next(a))}catch(n){l(n)}}function g(a){try{e(o.throw(a))}catch(n){l(n)}}function e(a){var n;a.done?s(a.value):(n=a.value,n instanceof i?n:new i(function(r){r(n)})).then(c,g)}e((o=o.apply(f,t||[])).next())})},yt=function(f,t){var i,o,s,l,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return l={next:g(0),throw:g(1),return:g(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function g(e){return function(a){return function(n){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,o&&(s=2&n[0]?o.return:n[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[2&n[0],s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(!((s=(s=c.trys).length>0&&s[s.length-1])||6!==n[0]&&2!==n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(f,c)}catch(r){n=[6,r],o=0}finally{i=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([e,a])}}},at=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],st=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]];const bt=function(){function f(t){this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("width",String(t.width)),this._element.setAttribute("height",String(t.height)),this._defs=document.createElementNS("http://www.w3.org/2000/svg","defs"),this._element.appendChild(this._defs),this._options=t}return Object.defineProperty(f.prototype,"width",{get:function(){return this._options.width},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"height",{get:function(){return this._options.height},enumerable:!1,configurable:!0}),f.prototype.getElement=function(){return this._element},f.prototype.drawQR=function(t){return wt(this,void 0,void 0,function(){var i,o,s,l,c,g,r,u=this;return yt(this,function(b){switch(b.label){case 0:return i=t.getModuleCount(),o=Math.min(this._options.width,this._options.height)-2*this._options.margin,s=this._options.shape===ut?o/Math.sqrt(2):o,l=Math.floor(s/i),c={hideXDots:0,hideYDots:0,width:0,height:0},this._qr=t,this._options.image?[4,this.loadImage()]:[3,2];case 1:if(b.sent(),!this._image)return[2];g=this._options,r=Math.floor(g.imageOptions.imageSize*q[g.qrOptions.errorCorrectionLevel]*i*i),c=function(x){var v=x.originalHeight,C=x.originalWidth,k=x.maxHiddenDots,D=x.maxHiddenAxisDots,R=x.dotSize,O={x:0,y:0},z={x:0,y:0};if(v<=0||C<=0||k<=0||R<=0)return{height:0,width:0,hideYDots:0,hideXDots:0};var T=v/C;return O.x=Math.floor(Math.sqrt(k/T)),O.x<=0&&(O.x=1),D&&D<O.x&&(O.x=D),O.x%2==0&&O.x--,z.x=O.x*R,O.y=1+2*Math.ceil((O.x*T-1)/2),z.y=Math.round(z.x*T),(O.y*O.x>k||D&&D<O.y)&&(D&&D<O.y?(O.y=D,O.y%2==0&&O.x--):O.y-=2,z.y=O.y*R,O.x=1+2*Math.ceil((O.y/T-1)/2),z.x=Math.round(z.y/T)),{height:z.y,width:z.x,hideYDots:O.y,hideXDots:O.x}}({originalWidth:this._image.width,originalHeight:this._image.height,maxHiddenDots:r,maxHiddenAxisDots:i-14,dotSize:l}),b.label=2;case 2:return this.drawBackground(),this.drawDots(function(x,v){var C,k,D,R,O,z;return!(u._options.imageOptions.hideBackgroundDots&&x>=(i-c.hideXDots)/2&&x<(i+c.hideXDots)/2&&v>=(i-c.hideYDots)/2&&v<(i+c.hideYDots)/2||null!==(C=at[x])&&void 0!==C&&C[v]||null!==(k=at[x-i+7])&&void 0!==k&&k[v]||null!==(D=at[x])&&void 0!==D&&D[v-i+7]||null!==(R=st[x])&&void 0!==R&&R[v]||null!==(O=st[x-i+7])&&void 0!==O&&O[v]||null!==(z=st[x])&&void 0!==z&&z[v-i+7])}),this.drawCorners(),this._options.image?[4,this.drawImage({width:c.width,height:c.height,count:i,dotSize:l})]:[3,4];case 3:b.sent(),b.label=4;case 4:return[2]}})})},f.prototype.drawBackground=function(){var t,i,o,l=this._options;if(this._element){var c=null===(t=l.backgroundOptions)||void 0===t?void 0:t.gradient,g=null===(i=l.backgroundOptions)||void 0===i?void 0:i.color;if((c||g)&&this._createColor({options:c,color:g,additionalRotation:0,x:0,y:0,height:l.height,width:l.width,name:"background-color"}),null===(o=l.backgroundOptions)||void 0===o?void 0:o.round){var e=Math.min(l.width,l.height),a=document.createElementNS("http://www.w3.org/2000/svg","rect");this._backgroundClipPath=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._backgroundClipPath.setAttribute("id","clip-path-background-color"),this._defs.appendChild(this._backgroundClipPath),a.setAttribute("x",String((l.width-e)/2)),a.setAttribute("y",String((l.height-e)/2)),a.setAttribute("width",String(e)),a.setAttribute("height",String(e)),a.setAttribute("rx",String(e/2*l.backgroundOptions.round)),this._backgroundClipPath.appendChild(a)}}},f.prototype.drawDots=function(t){var i,o,s=this;if(!this._qr)throw"QR code is not defined";var l=this._options,c=this._qr.getModuleCount();if(c>l.width||c>l.height)throw"The canvas is too small.";var g=Math.min(l.width,l.height)-2*l.margin,e=l.shape===ut?g/Math.sqrt(2):g,a=Math.floor(e/c),n=Math.floor((l.width-c*a)/2),r=Math.floor((l.height-c*a)/2),u=new I({svg:this._element,type:l.dotsOptions.type});this._dotsClipPath=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._dotsClipPath.setAttribute("id","clip-path-dot-color"),this._defs.appendChild(this._dotsClipPath),this._createColor({options:null===(i=l.dotsOptions)||void 0===i?void 0:i.gradient,color:l.dotsOptions.color,additionalRotation:0,x:0,y:0,height:l.height,width:l.width,name:"dot-color"});for(var b=function(Q){for(var E=function(Z){return t&&!t(Q,Z)?"continue":null!==(o=x._qr)&&void 0!==o&&o.isDark(Q,Z)?(u.draw(n+Q*a,r+Z*a,a,function(Y,V){return!(Q+Y<0||Z+V<0||Q+Y>=c||Z+V>=c)&&!(t&&!t(Q+Y,Z+V))&&!!s._qr&&s._qr.isDark(Q+Y,Z+V)}),void(u._element&&x._dotsClipPath&&x._dotsClipPath.appendChild(u._element))):"continue"},j=0;j<c;j++)E(j)},x=this,v=0;v<c;v++)b(v);if(l.shape===ut){var C=Math.floor((g/a-c)/2),k=c+2*C,D=n-C*a,R=r-C*a,O=[],z=Math.floor(k/2);for(v=0;v<k;v++){O[v]=[];for(var T=0;T<k;T++)O[v][T]=v>=C-1&&v<=k-C&&T>=C-1&&T<=k-C||Math.sqrt((v-z)*(v-z)+(T-z)*(T-z))>z?0:this._qr.isDark(T-2*C<0?T:T>=c?T-2*C:T-C,v-2*C<0?v:v>=c?v-2*C:v-C)?1:0}var L=function(Q){for(var E=function(Z){if(!O[Q][Z])return"continue";u.draw(D+Q*a,R+Z*a,a,function(Y,V){var K;return!(null===(K=O[Q+Y])||void 0===K||!K[Z+V])}),u._element&&ot._dotsClipPath&&ot._dotsClipPath.appendChild(u._element)},j=0;j<k;j++)E(j)},ot=this;for(v=0;v<k;v++)L(v)}},f.prototype.drawCorners=function(){var t=this;if(!this._qr)throw"QR code is not defined";var o=this._options;if(!this._element)throw"Element code is not defined";var s=this._qr.getModuleCount(),l=Math.min(o.width,o.height)-2*o.margin,c=o.shape===ut?l/Math.sqrt(2):l,g=Math.floor(c/s),e=7*g,a=3*g,n=Math.floor((o.width-s*g)/2),r=Math.floor((o.height-s*g)/2);[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach(function(u){var b,x,v,C,k,D,R,O,z,T,L,ot,Q=u[0],E=u[1],j=u[2],Z=n+Q*g*(s-7),Y=r+E*g*(s-7),V=t._dotsClipPath,K=t._dotsClipPath;if((!(null===(b=o.cornersSquareOptions)||void 0===b)&&b.gradient||!(null===(x=o.cornersSquareOptions)||void 0===x)&&x.color)&&((V=document.createElementNS("http://www.w3.org/2000/svg","clipPath")).setAttribute("id","clip-path-corners-square-color-"+Q+"-"+E),t._defs.appendChild(V),t._cornersSquareClipPath=t._cornersDotClipPath=K=V,t._createColor({options:null===(v=o.cornersSquareOptions)||void 0===v?void 0:v.gradient,color:null===(C=o.cornersSquareOptions)||void 0===C?void 0:C.color,additionalRotation:j,x:Z,y:Y,height:e,width:e,name:"corners-square-color-"+Q+"-"+E})),null===(k=o.cornersSquareOptions)||void 0===k?void 0:k.type){var rt=new d({svg:t._element,type:o.cornersSquareOptions.type});rt.draw(Z,Y,e,j),rt._element&&V&&V.appendChild(rt._element)}else for(var ht=new I({svg:t._element,type:o.dotsOptions.type}),kt=function(ct){for(var Ct=function(pt){if(null===(D=at[ct])||void 0===D||!D[pt])return"continue";ht.draw(Z+ct*g,Y+pt*g,g,function(Mt,At){var vt;return!(null===(vt=at[ct+Mt])||void 0===vt||!vt[pt+At])}),ht._element&&V&&V.appendChild(ht._element)},ft=0;ft<at[ct].length;ft++)Ct(ft)},gt=0;gt<at.length;gt++)kt(gt);if((!(null===(R=o.cornersDotOptions)||void 0===R)&&R.gradient||!(null===(O=o.cornersDotOptions)||void 0===O)&&O.color)&&((K=document.createElementNS("http://www.w3.org/2000/svg","clipPath")).setAttribute("id","clip-path-corners-dot-color-"+Q+"-"+E),t._defs.appendChild(K),t._cornersDotClipPath=K,t._createColor({options:null===(z=o.cornersDotOptions)||void 0===z?void 0:z.gradient,color:null===(T=o.cornersDotOptions)||void 0===T?void 0:T.color,additionalRotation:j,x:Z+2*g,y:Y+2*g,height:a,width:a,name:"corners-dot-color-"+Q+"-"+E})),null===(L=o.cornersDotOptions)||void 0===L?void 0:L.type){var St=new mt({svg:t._element,type:o.cornersDotOptions.type});St.draw(Z+2*g,Y+2*g,a,j),St._element&&K&&K.appendChild(St._element)}else{ht=new I({svg:t._element,type:o.dotsOptions.type});var Ot=function(ct){for(var Ct=function(pt){if(null===(ot=st[ct])||void 0===ot||!ot[pt])return"continue";ht.draw(Z+ct*g,Y+pt*g,g,function(Mt,At){var vt;return!(null===(vt=st[ct+Mt])||void 0===vt||!vt[pt+At])}),ht._element&&K&&K.appendChild(ht._element)},ft=0;ft<st[ct].length;ft++)Ct(ft)};for(gt=0;gt<st.length;gt++)Ot(gt)}})},f.prototype.loadImage=function(){var t=this;return new Promise(function(i,o){var s=t._options,l=new Image;if(!s.image)return o("Image is not defined");"string"==typeof s.imageOptions.crossOrigin&&(l.crossOrigin=s.imageOptions.crossOrigin),t._image=l,l.onload=function(){i()},l.src=s.image})},f.prototype.drawImage=function(t){var i=t.width,o=t.height,s=t.count,l=t.dotSize;return wt(this,void 0,void 0,function(){var c,g,e,a,n,r,u,b,x;return yt(this,function(v){switch(v.label){case 0:return c=this._options,g=Math.floor((c.width-s*l)/2),e=Math.floor((c.height-s*l)/2),a=g+c.imageOptions.margin+(s*l-i)/2,n=e+c.imageOptions.margin+(s*l-o)/2,r=i-2*c.imageOptions.margin,u=o-2*c.imageOptions.margin,(b=document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("x",String(a)),b.setAttribute("y",String(n)),b.setAttribute("width",r+"px"),b.setAttribute("height",u+"px"),[4,W(c.image||"")];case 1:return x=v.sent(),b.setAttribute("href",x||""),this._element.appendChild(b),[2]}})})},f.prototype._createColor=function(t){var i=t.options,o=t.color,s=t.additionalRotation,l=t.x,c=t.y,g=t.height,e=t.width,a=t.name,n=e>g?e:g,r=document.createElementNS("http://www.w3.org/2000/svg","rect");if(r.setAttribute("x",String(l)),r.setAttribute("y",String(c)),r.setAttribute("height",String(g)),r.setAttribute("width",String(e)),r.setAttribute("clip-path","url('#clip-path-"+a+"')"),i){var u;if("radial"===i.type)(u=document.createElementNS("http://www.w3.org/2000/svg","radialGradient")).setAttribute("id",a),u.setAttribute("gradientUnits","userSpaceOnUse"),u.setAttribute("fx",String(l+e/2)),u.setAttribute("fy",String(c+g/2)),u.setAttribute("cx",String(l+e/2)),u.setAttribute("cy",String(c+g/2)),u.setAttribute("r",String(n/2));else{var b=((i.rotation||0)+s)%(2*Math.PI),x=(b+2*Math.PI)%(2*Math.PI),v=l+e/2,C=c+g/2,k=l+e/2,D=c+g/2;x>=0&&x<=.25*Math.PI||x>1.75*Math.PI&&x<=2*Math.PI?(v-=e/2,C-=g/2*Math.tan(b),k+=e/2,D+=g/2*Math.tan(b)):x>.25*Math.PI&&x<=.75*Math.PI?(C-=g/2,v-=e/2/Math.tan(b),D+=g/2,k+=e/2/Math.tan(b)):x>.75*Math.PI&&x<=1.25*Math.PI?(v+=e/2,C+=g/2*Math.tan(b),k-=e/2,D-=g/2*Math.tan(b)):x>1.25*Math.PI&&x<=1.75*Math.PI&&(C+=g/2,v+=e/2/Math.tan(b),D-=g/2,k-=e/2/Math.tan(b)),(u=document.createElementNS("http://www.w3.org/2000/svg","linearGradient")).setAttribute("id",a),u.setAttribute("gradientUnits","userSpaceOnUse"),u.setAttribute("x1",String(Math.round(v))),u.setAttribute("y1",String(Math.round(C))),u.setAttribute("x2",String(Math.round(k))),u.setAttribute("y2",String(Math.round(D)))}i.colorStops.forEach(function(R){var O=R.offset,z=R.color,T=document.createElementNS("http://www.w3.org/2000/svg","stop");T.setAttribute("offset",100*O+"%"),T.setAttribute("stop-color",z),u.appendChild(T)}),r.setAttribute("fill","url('#"+a+"')"),this._defs.appendChild(u)}else o&&r.setAttribute("fill",o);this._element.appendChild(r)},f}(),dt="canvas";for(var _t={},y=0;y<=40;y++)_t[y]=y;const w={type:dt,shape:"square",width:300,height:300,data:"",margin:0,qrOptions:{typeNumber:_t[0],mode:void 0,errorCorrectionLevel:"Q"},imageOptions:{hideBackgroundDots:!0,imageSize:.4,crossOrigin:void 0,margin:0},dotsOptions:{type:"square",color:"#000"},backgroundOptions:{round:0,color:"#fff"}};var m=function(){return(m=Object.assign||function(f){for(var t,i=1,o=arguments.length;i<o;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(f[s]=t[s]);return f}).apply(this,arguments)};function p(f){var t=m({},f);if(!t.colorStops||!t.colorStops.length)throw"Field 'colorStops' is required in gradient";return t.rotation=t.rotation?Number(t.rotation):0,t.colorStops=t.colorStops.map(function(i){return m(m({},i),{offset:Number(i.offset)})}),t}function h(f){var t=m({},f);return t.width=Number(t.width),t.height=Number(t.height),t.margin=Number(t.margin),t.imageOptions=m(m({},t.imageOptions),{hideBackgroundDots:!!t.imageOptions.hideBackgroundDots,imageSize:Number(t.imageOptions.imageSize),margin:Number(t.imageOptions.margin)}),t.margin>Math.min(t.width,t.height)&&(t.margin=Math.min(t.width,t.height)),t.dotsOptions=m({},t.dotsOptions),t.dotsOptions.gradient&&(t.dotsOptions.gradient=p(t.dotsOptions.gradient)),t.cornersSquareOptions&&(t.cornersSquareOptions=m({},t.cornersSquareOptions),t.cornersSquareOptions.gradient&&(t.cornersSquareOptions.gradient=p(t.cornersSquareOptions.gradient))),t.cornersDotOptions&&(t.cornersDotOptions=m({},t.cornersDotOptions),t.cornersDotOptions.gradient&&(t.cornersDotOptions.gradient=p(t.cornersDotOptions.gradient))),t.backgroundOptions&&(t.backgroundOptions=m({},t.backgroundOptions),t.backgroundOptions.gradient&&(t.backgroundOptions.gradient=p(t.backgroundOptions.gradient))),t}var _=et(192),M=et.n(_),S=function(f,t,i,o){return new(i||(i=Promise))(function(s,l){function c(a){try{e(o.next(a))}catch(n){l(n)}}function g(a){try{e(o.throw(a))}catch(n){l(n)}}function e(a){var n;a.done?s(a.value):(n=a.value,n instanceof i?n:new i(function(r){r(n)})).then(c,g)}e((o=o.apply(f,t||[])).next())})},A=function(f,t){var i,o,s,l,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return l={next:g(0),throw:g(1),return:g(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function g(e){return function(a){return function(n){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,o&&(s=2&n[0]?o.return:n[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[2&n[0],s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(!((s=(s=c.trys).length>0&&s[s.length-1])||6!==n[0]&&2!==n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(f,c)}catch(r){n=[6,r],o=0}finally{i=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([e,a])}}};const $=function(){function f(t){this._options=t?h(X(w,t)):w,this.update()}return f._clearContainer=function(t){t&&(t.innerHTML="")},f.prototype._setupSvg=function(){var t=this;if(this._qr){var i=new bt(this._options);this._svg=i.getElement(),this._svgDrawingPromise=i.drawQR(this._qr).then(function(){var o;t._svg&&(null===(o=t._extension)||void 0===o||o.call(t,i.getElement(),t._options))})}},f.prototype._setupCanvas=function(){var t,i=this;this._qr&&(this._canvas=document.createElement("canvas"),this._canvas.width=this._options.width,this._canvas.height=this._options.height,this._setupSvg(),this._canvasDrawingPromise=null===(t=this._svgDrawingPromise)||void 0===t?void 0:t.then(function(){if(i._svg){var o=i._svg,s=(new XMLSerializer).serializeToString(o),l="data:image/svg+xml;base64,"+btoa(s),c=new Image;return new Promise(function(g){c.onload=function(){var e,a;null===(a=null===(e=i._canvas)||void 0===e?void 0:e.getContext("2d"))||void 0===a||a.drawImage(c,0,0),g()},c.src=l})}}))},f.prototype._getElement=function(t){return void 0===t&&(t="png"),S(this,void 0,void 0,function(){return A(this,function(i){switch(i.label){case 0:if(!this._qr)throw"QR code is empty";return"svg"!==t.toLowerCase()?[3,2]:(this._svg&&this._svgDrawingPromise||this._setupSvg(),[4,this._svgDrawingPromise]);case 1:return i.sent(),[2,this._svg];case 2:return this._canvas&&this._canvasDrawingPromise||this._setupCanvas(),[4,this._canvasDrawingPromise];case 3:return i.sent(),[2,this._canvas]}})})},f.prototype.update=function(t){f._clearContainer(this._container),this._options=t?h(X(this._options,t)):this._options,this._options.data&&(this._qr=M()(this._options.qrOptions.typeNumber,this._options.qrOptions.errorCorrectionLevel),this._qr.addData(this._options.data,this._options.qrOptions.mode||function(i){switch(!0){case/^[0-9]*$/.test(i):return"Numeric";case/^[0-9A-Z $%*+\-./:]*$/.test(i):return"Alphanumeric";default:return"Byte"}}(this._options.data)),this._qr.make(),this._options.type===dt?this._setupCanvas():this._setupSvg(),this.append(this._container))},f.prototype.append=function(t){if(t){if("function"!=typeof t.appendChild)throw"Container should be a single DOM node";this._options.type===dt?this._canvas&&t.appendChild(this._canvas):this._svg&&t.appendChild(this._svg),this._container=t}},f.prototype.applyExtension=function(t){if(!t)throw"Extension function should be defined.";this._extension=t,this.update()},f.prototype.deleteExtension=function(){this._extension=void 0,this.update()},f.prototype.getRawData=function(t){return void 0===t&&(t="png"),S(this,void 0,void 0,function(){var i,o,s;return A(this,function(l){switch(l.label){case 0:if(!this._qr)throw"QR code is empty";return[4,this._getElement(t)];case 1:return(i=l.sent())?"svg"===t.toLowerCase()?(o=new XMLSerializer,s=o.serializeToString(i),[2,new Blob(['<?xml version="1.0" standalone="no"?>\r\n'+s],{type:"image/svg+xml"})]):[2,new Promise(function(c){return i.toBlob(c,"image/"+t,1)})]:[2,null]}})})},f.prototype.download=function(t){return S(this,void 0,void 0,function(){var i,o,s,l,c;return A(this,function(g){switch(g.label){case 0:if(!this._qr)throw"QR code is empty";return i="png",o="qr","string"==typeof t?(i=t,console.warn("Extension is deprecated as argument for 'download' method, please pass object { name: '...', extension: '...' } as argument")):"object"==typeof t&&null!==t&&(t.name&&(o=t.name),t.extension&&(i=t.extension)),[4,this._getElement(i)];case 1:return(s=g.sent())?("svg"===i.toLowerCase()?(l=new XMLSerializer,c='<?xml version="1.0" standalone="no"?>\r\n'+(c=l.serializeToString(s)),nt("data:image/svg+xml;charset=utf-8,"+encodeURIComponent(c),o+".svg")):nt(s.toDataURL("image/"+i),o+"."+i),[2]):[2]}})})},f}()}},B={};function tt(H){if(B[H])return B[H].exports;var U=B[H]={exports:{}};return lt[H](U,U.exports,tt),U.exports}return tt.n=H=>{var U=H&&H.__esModule?()=>H.default:()=>H;return tt.d(U,{a:U}),U},tt.d=(H,U)=>{for(var et in U)tt.o(U,et)&&!tt.o(H,et)&&Object.defineProperty(H,et,{enumerable:!0,get:U[et]})},tt.o=(H,U)=>Object.prototype.hasOwnProperty.call(H,U),tt(676)})().default},4004:(xt,lt,B)=>{"use strict";B.d(lt,{Z:()=>q});const H={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let U;const et=new Uint8Array(16);function it(){if(!U&&(U=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!U))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return U(et)}const F=[];for(let P=0;P<256;++P)F.push((P+256).toString(16).slice(1));const q=function W(P,I,N){if(H.randomUUID&&!I&&!P)return H.randomUUID();const d=(P=P||{}).random||(P.rng||it)();if(d[6]=15&d[6]|64,d[8]=63&d[8]|128,I){N=N||0;for(let J=0;J<16;++J)I[N+J]=d[J];return I}return function G(P,I=0){return F[P[I+0]]+F[P[I+1]]+F[P[I+2]]+F[P[I+3]]+"-"+F[P[I+4]]+F[P[I+5]]+"-"+F[P[I+6]]+F[P[I+7]]+"-"+F[P[I+8]]+F[P[I+9]]+"-"+F[P[I+10]]+F[P[I+11]]+F[P[I+12]]+F[P[I+13]]+F[P[I+14]]+F[P[I+15]]}(d)}}}]);