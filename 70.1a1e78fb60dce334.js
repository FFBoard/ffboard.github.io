(self.webpackChunkpages=self.webpackChunkpages||[]).push([[70],{5851:(te,B,t)=>{"use strict";t.d(B,{B:()=>X});var h=t(5861),M=t(1378),e=t(5879),T=t(2438),b=t(4036),a=t(9054),I=t(4020),x=t(148),c=t(9093),E=t(7621),O=t(1990),v=t(5661),y=t(5172),D=t(3845),H=t(4887),N=t(5487),V=t(658),A=t(9515),p=t(6814),u=t(6223),C=t(9473),f=t(554),_=t(4464),L=t(4228);const F=["fileInput"];function W(r,w){1&r&&(e.O4$(),e.TgZ(0,"svg",31),e._UZ(1,"path",32)(2,"path",33),e.qZA())}const K=function(){return["text-primary"]};function J(r,w){1&r&&e._UZ(0,"app-logo",34),2&r&&e.Q6J("svgClass",e.DdM(2,K))("responsive",!1)}function ie(r,w){1&r&&(e._UZ(0,"span",38),e.ALo(1,"translate")),2&r&&e.Q6J("innerHTML",e.lcZ(1,1,"COMPONENTS.UPLOADER.DESCRIPTION.DESKTOP"),e.oJD)}function he(r,w){1&r&&(e._UZ(0,"span",38),e.ALo(1,"translate")),2&r&&e.Q6J("innerHTML",e.lcZ(1,1,"COMPONENTS.UPLOADER.DESCRIPTION.TOUCH"),e.oJD)}const fe=function(r){return{"fw-bold fs-md-lg":r}},de=function(r){return{"text-decoration-underline":r}};function oe(r,w){if(1&r){const m=e.EpF();e.TgZ(0,"div",35),e.YNc(1,ie,2,3,"span",36),e.YNc(2,he,2,3,"span",36),e.TgZ(3,"span",37),e.NdJ("click",function(i){e.CHM(m);const l=e.oxw(2),j=e.MAs(23);return e.KtG(l.toggleRemoteUrlForm(i,j))}),e._uU(4),e.ALo(5,"translate"),e.qZA()()}if(2&r){const m=e.oxw(2);e.Q6J("ngClass",e.VKq(7,fe,!m.isWidget)),e.xp6(1),e.Q6J("ngIf",!m.touchDevice),e.xp6(1),e.Q6J("ngIf",m.touchDevice),e.xp6(1),e.Q6J("ngClass",e.VKq(9,de,m.isWidget)),e.xp6(1),e.Oqu(e.lcZ(5,5,"COMPONENTS.UPLOADER.DESCRIPTION.REMOTE_URL"))}}function me(r,w){1&r&&e.GkF(0)}function ve(r,w){if(1&r){const m=e.EpF();e.TgZ(0,"div",39),e.YNc(1,me,1,0,"ng-container",17),e.TgZ(2,"button",40),e.NdJ("click",function(i){e.CHM(m);const l=e.oxw(2);return e.KtG(l.handleRemoteUrlUpload(i))}),e.O4$(),e.TgZ(3,"svg",41),e._UZ(4,"path",42),e.qZA()(),e.kcU(),e.TgZ(5,"button",43),e.NdJ("click",function(i){e.CHM(m);const l=e.oxw(2);return e.KtG(l.toggleRemoteUrlForm(i))}),e.O4$(),e.TgZ(6,"svg",41),e._UZ(7,"path",44),e.qZA()()()}if(2&r){const m=e.oxw(2),d=e.MAs(34);e.xp6(1),e.Q6J("ngTemplateOutlet",d),e.xp6(1),e.Q6J("disabled",0===m.remoteUrl.length||!m.isRemoteUrlValid)}}function Ee(r,w){if(1&r&&(e.ynx(0),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"em",45),e.ALo(5,"arrayJoin"),e.BQk()),2&r){const m=e.oxw(2);e.xp6(2),e.hij("",e.lcZ(3,2,"COMPONENTS.UPLOADER.PATH.LONG")," "),e.xp6(2),e.Q6J("innerText",m.currentFolderPath.length?e.xi3(5,4,m.currentFolderPath,"/"):"root")}}function g(r,w){if(1&r&&(e._UZ(0,"div",50),e.ALo(1,"arrayJoin"),e.ALo(2,"slice")),2&r){const m=e.oxw(3);e.Q6J("innerText",e.xi3(1,1,e.Dn7(2,4,m.currentFolderPath,0,-1),"/"))}}function n(r,w){if(1&r&&(e.TgZ(0,"div",46)(1,"div",47),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,g,3,8,"div",48),e._UZ(5,"div",49),e.ALo(6,"arrayJoin"),e.ALo(7,"slice"),e.qZA()),2&r){const m=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,3,"COMPONENTS.UPLOADER.PATH.SHORT")," "),e.xp6(2),e.Q6J("ngIf",m.currentFolderPath.length>1),e.xp6(1),e.Q6J("innerText",(m.currentFolderPath.length>1?"/":"")+(m.currentFolderPath.length?e.xi3(6,5,e.xi3(7,8,m.currentFolderPath,m.currentFolderPath.length-1),"/"):"root"))}}const o=function(){return{bottom:0,left:0}};function s(r,w){if(1&r){const m=e.EpF();e.ynx(0),e.TgZ(1,"a",51),e.NdJ("click",function(){e.CHM(m);const i=e.oxw(2);return e.KtG(i.openInfoModal.emit())}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",52),e.NdJ("click",function(){e.CHM(m),e.oxw(2);const i=e.MAs(7);return e.KtG(i.open())}),e._uU(5," settings "),e.qZA(),e.TgZ(6,"div",53),e.NdJ("click",function(i){e.CHM(m);const l=e.oxw(2),j=e.MAs(23);return e.KtG(l.toggleRemoteUrlForm(i,j))}),e._uU(7," add_link "),e.qZA(),e.BQk()}2&r&&(e.xp6(1),e.Q6J("ngStyle",e.DdM(4,o)),e.xp6(1),e.Oqu(e.lcZ(3,2,"COMPONENTS.UPLOADER.INFO")))}const U=function(r,w,m){return{"cursor-pointer":r,"py-4 px-3 px-sm-4":w,"p-2 pb-3":m}},P=function(r,w,m){return{"my-2":r,"mb-2":w,"mw-100 mt-1":m}};function G(r,w){if(1&r){const m=e.EpF();e.ynx(0),e.TgZ(1,"div",22,23),e.NdJ("dragenter",function(){e.CHM(m);const i=e.MAs(2),l=e.oxw();return e.KtG(l.setDragOverEvent(i))})("drop",function(i){e.CHM(m);const l=e.oxw();return e.KtG(l.handleDropEvent(i))})("click",function(){e.CHM(m);const i=e.oxw(),l=e.MAs(2);return e.KtG(!i.isWaitingRemoteUrl&&l.click())}),e.YNc(3,W,3,0,"svg",24),e.YNc(4,J,1,3,"ng-template",null,25,e.W1O),e.YNc(6,oe,6,11,"div",26),e.YNc(7,ve,8,2,"div",27),e.TgZ(8,"div",28),e.YNc(9,Ee,6,7,"ng-container",3),e.YNc(10,n,8,11,"ng-template",null,29,e.W1O),e.qZA()(),e.YNc(12,s,8,5,"ng-container",30),e.BQk()}if(2&r){const m=e.MAs(5),d=e.MAs(11),i=e.oxw();e.xp6(1),e.Q6J("ngClass",e.kEZ(9,U,!i.loading&&!i.isWaitingRemoteUrl,!i.isWidget,i.isWidget)),e.xp6(2),e.Q6J("ngIf",!i.isWidget)("ngIfElse",m),e.xp6(3),e.Q6J("ngIf",!i.isWidget||!i.isWaitingRemoteUrl),e.xp6(1),e.Q6J("ngIf",i.isWidget&&i.isWaitingRemoteUrl),e.xp6(1),e.Q6J("ngClass",e.kEZ(13,P,!i.isWidget&&!i.touchDevice,!i.isWidget&&i.touchDevice,i.isWidget)),e.xp6(1),e.Q6J("ngIf",!i.isWidget)("ngIfElse",d),e.xp6(3),e.Q6J("ngIf",!i.isWidget)}}const k=function(r,w){return{"p-4":r,"p-2":w}};function S(r,w){if(1&r&&(e.TgZ(0,"div",54),e.O4$(),e.TgZ(1,"svg",55),e._UZ(2,"path",56),e.qZA(),e.kcU(),e._UZ(3,"app-loader",57),e.TgZ(4,"div",58),e._uU(5),e.ALo(6,"translate"),e.qZA()()),2&r){const m=e.oxw();e.Q6J("ngClass",e.WLB(6,k,!m.isWidget,m.isWidget)),e.xp6(3),e.Q6J("onlyMessage",!0)("message",m.loadingMessage),e.xp6(2),e.hij(" ",e.lcZ(6,4,"COMPONENTS.UPLOADER.LOADING.SUBTEXT")," ")}}function R(r,w){1&r&&e.GkF(0)}const z=function(r){return{"fs-reset":r}};function $(r,w){if(1&r){const m=e.EpF();e.TgZ(0,"input",59,60),e.NdJ("ngModelChange",function(i){e.CHM(m);const l=e.oxw();return e.KtG(l.remoteUrl=i)})("ngModelChange",function(){e.CHM(m);const i=e.MAs(1),l=e.oxw();return e.KtG(l.isRemoteUrlValid=!i.invalid)}),e.ALo(2,"translate"),e.qZA()}if(2&r){const m=e.oxw();e.Q6J("placeholder",e.lcZ(2,4,"COMPONENTS.UPLOADER.REMOTE_URL_INPUT_PLACEHOLDER"))("ngClass",e.VKq(6,z,m.isWidget))("ngModel",m.remoteUrl)("pattern","^https?://[^.]+\\.(.+)")}}const re=function(r,w){return{uploading:r,"widget flex-grow-1 min-w-0":w}};let X=(()=>{var r;class w{constructor(d,i,l,j,Z,Q,ne,q,ee){this.postMessageService=d,this.uploadService=i,this.uploadObservablesService=l,this.uploaderService=j,this.toastService=Z,this.renderer=Q,this.ngZone=ne,this.translateService=q,this.proxyService=ee,this.loading=!0,this.currentFolderPath=[],this.isWidget=!1,this.fileUploadedEvent=new e.vpe,this.openInfoModal=new e.vpe,this.isUploading=!1,this.loadingMessage="",this.touchDevice=I.eX,this.isWaitingRemoteUrl=!1,this.remoteUrl="",this.isRemoteUrlValid=!1,this.dragOverEvent=!1,this.checkingFileMessage="",this.options=this.uploaderService.uploaderOptions;const se=this.uploadService.preferences.uploader;se.checkImage.active||(this.options.compress=!1),se.showLinkModal&&(this.options.openLinkModalAfterUpload=!0),this.uploaderService.uploaderOptions=this.options}ngOnInit(){var d=this;return(0,h.Z)(function*(){d.handleClipboardPasteEvent(),d.handleExternalUpload(),d.checkingFileMessage=d.translateService.instant("COMPONENTS.UPLOADER.LOADING.MESSAGE.CHECK"),d.loadingMessage=d.checkingFileMessage})()}handleClipboardPasteEvent(){var d=this;this.clipboardPasteEventSubscription=(0,T.R)(document.body,"paste").subscribe(function(){var i=(0,h.Z)(function*(l){if(d.isWidget&&d.isWaitingRemoteUrl||!d.canUpload())return;const j=Array.from((l.clipboardData||l.originalEvent.clipboardData).items);let Z=[];for(const Q of j)if(0===Q.type.indexOf("image")){const ne=Q.getAsFile();ne&&Z.push(ne)}Z.length>0?yield d.preUpload(Z):d.reset()});return function(l){return i.apply(this,arguments)}}())}handleExternalUpload(){var d=this;this.startExternalUploadSubscription=this.uploadObservablesService.startUploadObservable.subscribe(function(){var i=(0,h.Z)(function*(l){if(l){if(!d.canUpload())return;yield d.preUpload([l.file],l.options)}else d.fileInputRef.nativeElement.click()});return function(l){return i.apply(this,arguments)}}())}handleSelectionEvent(d){var i=this;return(0,h.Z)(function*(){if(!i.canUpload())return;const l=d.target;if(l.files&&l.files.length){const j=Array.from(l.files);return l.value="",i.preUpload(j)}i.reset()})()}handleDropEvent(d){var i=this;return(0,h.Z)(function*(){var l;if(d.preventDefault(),d.stopPropagation(),d.stopImmediatePropagation(),!i.canUpload())return;const j=null!==(l=d.dataTransfer)&&void 0!==l&&l.files?Array.from(d.dataTransfer.files):[];if(j.length)return i.preUpload(j);i.reset()})()}handleRemoteUrlUpload(d,i){var l=this;return(0,h.Z)(function*(){if(!l.isRemoteUrlValid||0===l.remoteUrl.length||!l.canUpload())return;const j=l.remoteUrl;l.loadingMessage=l.translateService.instant("COMPONENTS.UPLOADER.LOADING.MESSAGE.GETTING_REMOTE_FILE"),l.toggleRemoteUrlForm(d,i);const Z=(0,a.Tb)(j);if(!Z.ext||-1===O.O8.findIndex(ne=>-1!==ne.ext.indexOf(Z.ext)))return l.handleErrors([Z.name],[]),void l.reset();const Q=yield l.proxyService.get(j);return Q?l.preUpload([new File([Q],Z.name,{type:Q.type,lastModified:Date.now()})]):(l.isWidget||l.toastService.show({content:"Errore nel recupero dell'immagine dall'url!",level:M.m.ERROR}),l.postMessageService.send(x.l.UPLOAD_ERROR,{filename:Z.name,error:D.S.REMOTE_URL_RESPONSE}),void l.reset())})()}saveOptions(d=!0){this.uploaderService.uploaderOptions=this.options,d&&this.savePreferences()}savePreferences(){this.uploadService.preferences.uploader={checkImage:{active:this.options.compress,time:Date.now()},showLinkModal:this.options.openLinkModalAfterUpload}}setDragOverEvent(d){this.dragOverEvent||(this.dragOverEvent=!0,this.ngZone.runOutsideAngular(()=>{this.renderer.listen(d,"dragover",i=>{i.preventDefault()})}))}canUpload(){return!this.loading&&!this.isUploading&&(this.isUploading=!0,this.dragOverEvent=!1,!0)}reset(){this.isUploading=!1,this.loadingMessage=this.checkingFileMessage,this.postMessageService.send(x.l.UPLOAD_END,{}),this.options.allowOverwrite=!1,this.saveOptions(!1)}preUpload(d,i){var l=this;return(0,h.Z)(function*(){const j=[...l.currentFolderPath];let Z=[],Q=[],ne=[],q=[];i?i.allowOverwrite=i.allowOverwrite||!1:(i=l.uploaderService.uploaderOptions).allowOverwrite=!1;for(let Y=0;Y<d.length;Y++){const ae=yield l.uploaderService.prepareFile(d[Y],i);if(ae){const ce=(0,a.Tb)(ae.name),pe=(0,a.g8)(ce.ext);if(!pe){ne.push(ae.name);continue}if(ae.size>pe.maxSize){q.push(ae.name);continue}Z.push({file:{name:ae.name,size:ae.size,time:0,url:"",ext:ce.ext,filename:ce.filename,isImage:(0,a.Or)(ce.ext),embedUrl:"",type:y.VC.FILE},progress:0,completed:!1}),Q.push(ae)}}if(l.handleErrors(ne,q),0===Q.length)return void l.reset();const ee=l.translateService.instant("COMPONENTS.UPLOADER.LOADING.MESSAGE.UPLOADING",{total:Q.length}),se=l.translateService.instant("COMPONENTS.UPLOADER.LOADING.MESSAGE.CREATING_PACKAGE",{total:Q.length});l.uploadObservablesService.pushUploadingFileQueue(Z);for(let Y=0;Y<Q.length;++Y){l.loadingMessage=se;const ae=yield l.uploadService.getHostToken(j,Q[Y].name);Z[Y].progress+=20,l.loadingMessage=ee.replace("{{current}}",`${Y+1}`),yield(0,b.z)(l.uploaderService.upload(Q[Y],Z[Y],ae,i.allowOverwrite))}l.uploadObservablesService.pushUploadingFileQueue([]);const le=Z.filter(Y=>!Y.error).map(Y=>Y.file);le.length>0&&(l.fileUploadedEvent.emit({list:le,rewrite:i.allowOverwrite,destPath:j}),l.postMessageService.send(x.l.UPLOAD_SUCCESS,{fileList:le.map(Y=>({filename:Y.name,isImage:Y.isImage,url:Y.url}))}),i.openLinkModalAfterUpload&&l.uploadObservablesService.pushAction({name:y.In.FILE_SHOW_LINKS,payload:{entities:(0,a.jL)(le)}})),l.reset()})()}handleErrors(d,i){if(0!==d.length||0!==i.length){if(!this.isWidget)return void this.toastService.show({content:this.createToastMessage(d,i),level:M.m.ERROR});[[D.S.UNSUPPORTED,d],[D.S.OVERSIZED,i]].forEach(l=>{l[1].forEach(j=>{this.postMessageService.send(x.l.UPLOAD_ERROR,{filename:j,error:l[0]})})})}}createToastMessage(d,i){let l=[];return d.length&&l.push(d.length>1?`I file <strong>${d.join(", ")}</strong> hanno un formato non supportato!`:`Il file <strong>${d[0]}</strong> ha un formato non supportato!`),i.length&&l.push(i.length>1?`I file <strong>${i.join(", ")}</strong> sono troppo pesanti!`:`Il file <strong>${i[0]}</strong> \xe8 troppo pesante!`),l.join("<br><br>")}toggleRemoteUrlForm(d,i){d.stopPropagation(),this.isWidget||(this.isWaitingRemoteUrl?null==i||i.close():null==i||i.open()),this.resetRemoteUrlForm(!this.isWaitingRemoteUrl)}resetRemoteUrlForm(d){this.isWaitingRemoteUrl=d,this.remoteUrl=""}ngOnDestroy(){var d;null===(d=this.startExternalUploadSubscription)||void 0===d||d.unsubscribe(),this.clipboardPasteEventSubscription.unsubscribe(),this.uploaderService.clearPendingRequests()}}return(r=w).\u0275fac=function(d){return new(d||r)(e.Y36(c.F),e.Y36(V.C),e.Y36(N.r),e.Y36(H.q),e.Y36(v.k),e.Y36(e.Qsj),e.Y36(e.R0b),e.Y36(A.sK),e.Y36(E.y))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-uploader"]],viewQuery:function(d,i){if(1&d&&e.Gf(F,5),2&d){let l;e.iGM(l=e.CRH())&&(i.fileInputRef=l.first)}},inputs:{loading:"loading",currentFolderPath:"currentFolderPath",isWidget:"isWidget"},outputs:{fileUploadedEvent:"fileUploadedEvent",openInfoModal:"openInfoModal"},decls:35,vars:37,consts:[[1,"uploader","rounded","position-relative",3,"ngClass"],["type","file",1,"d-none",3,"multiple","disabled","change"],["fileInput",""],[4,"ngIf","ngIfElse"],["uploading",""],[3,"title"],["optionsModal",""],[3,"innerHtml"],[1,"mb-1","list-unstyled"],[1,"form-check","form-switch"],["type","checkbox","role","switch","id","speed-upload",1,"form-check-input",3,"ngModel","ngModelChange"],["for","speed-upload",1,"form-check-label","me-auto",3,"innerHTML"],["type","checkbox","role","switch","id","show-link-modal",1,"form-check-input",3,"ngModel","ngModelChange"],["for","show-link-modal",1,"form-check-label","me-auto",3,"innerHTML"],["size","md",3,"title","disableCloseButton","hidden"],["remoteUrlModal",""],[1,"mb-2",3,"innerHTML"],[4,"ngTemplateOutlet"],["footer",""],["type","button",1,"btn","btn-secondary",3,"innerText","click"],["type","button",1,"btn","btn-primary",3,"disabled","innerText","click"],["remoteUrlInput",""],[1,"rounded","upload-area",3,"ngClass","dragenter","drop","click"],["uploadArea",""],["xmlns","http://www.w3.org/2000/svg","width","64","height","64","fill","currentColor","viewBox","0 0 16 16",4,"ngIf","ngIfElse"],["appLogo",""],["class","description text-center",3,"ngClass",4,"ngIf"],["class","input-group input-group-sm remote-url-form justify-content-center mb-1",4,"ngIf"],[1,"small","text-center",3,"ngClass"],["widgetFolder",""],[4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","64","height","64","fill","currentColor","viewBox","0 0 16 16"],["fill-rule","evenodd","d","M7.646 5.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 6.707V10.5a.5.5 0 0 1-1 0V6.707L6.354 7.854a.5.5 0 1 1-.708-.708l2-2z"],["d","M4.406 3.342A5.53 5.53 0 0 1 8 2c2.69 0 4.923 2 5.166 4.579C14.758 6.804 16 8.137 16 9.773 16 11.569 14.502 13 12.687 13H3.781C1.708 13 0 11.366 0 9.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383zm.653.757c-.757.653-1.153 1.44-1.153 2.056v.448l-.445.049C2.064 6.805 1 7.952 1 9.318 1 10.785 2.23 12 3.781 12h8.906C13.98 12 15 10.988 15 9.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 4.825 10.328 3 8 3a4.53 4.53 0 0 0-2.941 1.1z"],["svgSize","xl","subtext","Upload",1,"d-block","my-auto","py-1",3,"svgClass","responsive"],[1,"description","text-center",3,"ngClass"],[3,"innerHTML",4,"ngIf"],[1,"ms-1","remote-url-btn","fst-italic","cursor-pointer",3,"ngClass","click"],[3,"innerHTML"],[1,"input-group","input-group-sm","remote-url-form","justify-content-center","mb-1"],[1,"input-group-text","bg-light",3,"disabled","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 16 16"],["d","M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"],[1,"input-group-text","bg-light",3,"click"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],[1,"text-break",3,"innerText"],[1,"d-flex","min-w-0"],[1,"me-1"],["class","fst-italic text-truncate mw-100",3,"innerText",4,"ngIf"],[1,"fst-italic","text-nowrap",3,"innerText"],[1,"fst-italic","text-truncate","mw-100",3,"innerText"],[1,"fs-xs","fst-italic","d-block","px-2","py-1","text-reset","cursor-pointer","position-absolute",3,"ngStyle","click"],[1,"material-icons-outlined","d-block","cursor-pointer","fs-xl","position-absolute","icon","options-icon",3,"click"],[1,"material-icons-outlined","d-block","cursor-pointer","fs-xl","position-absolute","icon","remote-url-icon",3,"click"],[1,"p-4","rounded",3,"ngClass"],["xmlns","http://www.w3.org/2000/svg","width","64","height","64","viewBox","0 0 16 16",1,"overflow-visible"],["d","M 4.406 3.342 A 5.53 5.53 0 0 1 8 2 c 2.69 0 4.923 2 5.166 4.579 C 14.758 6.804 16 8.137 16 9.773 C 16 11.569 14.502 13 12.687 13 H 3.781 C 1.708 13 0 11.366 0 9.318 c 0 -1.763 1.266 -3.223 2.942 -3.593 c 0.143 -0.863 0.698 -1.723 1.464 -2.383 z",1,"cloud"],[3,"onlyMessage","message"],[1,"small","text-center"],["type","text","required","",1,"form-control",3,"placeholder","ngClass","ngModel","pattern","ngModelChange"],["input","ngModel"]],template:function(d,i){if(1&d){const l=e.EpF();e.TgZ(0,"div",0)(1,"input",1,2),e.NdJ("change",function(Z){return i.handleSelectionEvent(Z)}),e.qZA(),e.YNc(3,G,13,17,"ng-container",3),e.YNc(4,S,7,9,"ng-template",null,4,e.W1O),e.qZA(),e.TgZ(6,"app-modal",5,6),e.ALo(8,"translate"),e._UZ(9,"div",7),e.ALo(10,"translate"),e.TgZ(11,"ul",8)(12,"li")(13,"div",9)(14,"input",10),e.NdJ("ngModelChange",function(Z){return i.options.compress=Z})("ngModelChange",function(){return i.saveOptions()}),e.qZA(),e._UZ(15,"label",11),e.ALo(16,"translate"),e.qZA()(),e.TgZ(17,"li")(18,"div",9)(19,"input",12),e.NdJ("ngModelChange",function(Z){return i.options.openLinkModalAfterUpload=Z})("ngModelChange",function(){return i.saveOptions()}),e.qZA(),e._UZ(20,"label",13),e.ALo(21,"translate"),e.qZA()()()(),e.TgZ(22,"app-modal",14,15),e.NdJ("hidden",function(){return i.resetRemoteUrlForm(!1)}),e.ALo(24,"translate"),e._UZ(25,"p",16),e.ALo(26,"translate"),e.YNc(27,R,1,0,"ng-container",17),e.ynx(28,18),e.TgZ(29,"button",19),e.NdJ("click",function(){e.CHM(l);const Z=e.MAs(23);return e.KtG(Z.close())}),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"button",20),e.NdJ("click",function(Z){e.CHM(l);const Q=e.MAs(23);return e.KtG(i.handleRemoteUrlUpload(Z,Q))}),e.ALo(32,"translate"),e.qZA(),e.BQk(),e.qZA(),e.YNc(33,$,3,8,"ng-template",null,21,e.W1O)}if(2&d){const l=e.MAs(5),j=e.MAs(34);e.Q6J("ngClass",e.WLB(34,re,i.isUploading,i.isWidget)),e.xp6(1),e.Q6J("multiple",!0)("disabled",i.loading||i.isUploading),e.xp6(2),e.Q6J("ngIf",!i.isUploading)("ngIfElse",l),e.xp6(3),e.Q6J("title",e.lcZ(8,18,"COMPONENTS.UPLOADER.SETTINGS_MODAL.TITLE")),e.xp6(3),e.Q6J("innerHtml",e.lcZ(10,20,"COMPONENTS.UPLOADER.SETTINGS_MODAL.CONTENT.DESCRIPTION"),e.oJD),e.xp6(5),e.Q6J("ngModel",i.options.compress),e.xp6(1),e.Q6J("innerHTML",e.lcZ(16,22,"COMPONENTS.UPLOADER.SETTINGS_MODAL.CONTENT.COMPRESS_SWITCH"),e.oJD),e.xp6(4),e.Q6J("ngModel",i.options.openLinkModalAfterUpload),e.xp6(1),e.Q6J("innerHTML",e.lcZ(21,24,"COMPONENTS.UPLOADER.SETTINGS_MODAL.CONTENT.SHOW_LINK_SWITCH"),e.oJD),e.xp6(2),e.Q6J("title",e.lcZ(24,26,"COMPONENTS.UPLOADER.REMOTE_URL_MODAL.TITLE"))("disableCloseButton",!0),e.xp6(3),e.Q6J("innerHTML",e.lcZ(26,28,"COMPONENTS.UPLOADER.REMOTE_URL_MODAL.CONTENT"),e.oJD),e.xp6(2),e.Q6J("ngTemplateOutlet",j),e.xp6(2),e.Q6J("innerText",e.lcZ(30,30,"SHARED.CANCEL")),e.xp6(2),e.Q6J("disabled",0===i.remoteUrl.length||!i.isRemoteUrlValid)("innerText",e.lcZ(32,32,"COMPONENTS.UPLOADER.REMOTE_URL_MODAL.UPLOAD_BTN"))}},dependencies:[p.mk,p.O5,p.tP,p.PC,u.Fj,u.Wl,u.JJ,u.Q7,u.c5,u.On,C.R,f.R,_.z,L.J,p.OU,A.X$],styles:[".uploader[_ngcontent-%COMP%]:not(.widget){margin:0 1rem;border:2px dashed #4864fe;box-shadow:0 .125rem .25rem #00000013;color:#2036ad;height:100%}.uploader[_ngcontent-%COMP%]:not(.widget):not(.uploading)   svg[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bubble 4s linear infinite}.uploader[_ngcontent-%COMP%]:not(.widget).uploading   svg[_ngcontent-%COMP%]   path.cloud[_ngcontent-%COMP%]{stroke:#2036ad}.uploader[_ngcontent-%COMP%]:not(.widget)   .description[_ngcontent-%COMP%]{max-width:350px}.uploader.widget.uploading[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path.cloud[_ngcontent-%COMP%]{stroke:#4864fe}.uploader[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(.icon){height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.uploader.uploading[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path.cloud[_ngcontent-%COMP%]{fill:none;stroke-linecap:round;stroke-dasharray:50;stroke-dashoffset:100;animation:_ngcontent-%COMP%_draw 3.5s linear infinite}.uploader[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{top:5px;opacity:.7;transition:opacity .2s}.uploader[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:hover{opacity:1}.uploader[_ngcontent-%COMP%]   .options-icon[_ngcontent-%COMP%]{right:5px}.uploader[_ngcontent-%COMP%]   .remote-url-icon[_ngcontent-%COMP%]{right:30px}.upload-area.cursor-pointer[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(app-logo):not(.description), .upload-area.cursor-pointer[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(.remote-url-btn){pointer-events:none}.remote-url-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{max-width:300px}.remote-url-form[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{opacity:.5}@media (min-width: 768px){.uploader[_ngcontent-%COMP%]:not(.widget){margin:initial}}@keyframes _ngcontent-%COMP%_bubble{6%{transform:scale(1.3,.8)}9%{transform:scale(.8,1.3) translateY(-.5rem)}12%{transform:scale(1)}}@keyframes _ngcontent-%COMP%_draw{0%{stroke-dashoffset:100}to{stroke-dashoffset:0}}"]}),w})()},529:(te,B,t)=>{"use strict";t.d(B,{M:()=>c});var h=t(4243),M=t(6814),e=t(6223),T=t(7905),b=t(2740),a=t(4610),I=t(9515),x=t(5879);let c=(()=>{var E;class O{}return(E=O).\u0275fac=function(y){return new(y||E)},E.\u0275mod=x.oAB({type:E}),E.\u0275inj=x.cJS({imports:[h.r,M.ez,e.u5,T.q,b.h,a.z,I.aw.forChild()]}),O})()},3845:(te,B,t)=>{"use strict";t.d(B,{S:()=>h});var h=function(M){return M.UNSUPPORTED="unsupported",M.OVERSIZED="oversized",M.REMOTE_URL_RESPONSE="remote-url-response",M.UPLOAD_FAILED="upload-failed",M}(h||{})},4243:(te,B,t)=>{"use strict";t.d(B,{r:()=>e});var h=t(6814),M=t(5879);let e=(()=>{var T;class b{}return(T=b).\u0275fac=function(I){return new(I||T)},T.\u0275mod=M.oAB({type:T}),T.\u0275inj=M.cJS({imports:[h.ez]}),b})()},4228:(te,B,t)=>{"use strict";t.d(B,{J:()=>M});var h=t(5879);let M=(()=>{var e;class T{transform(a,I){return a.join(I)}}return(e=T).\u0275fac=function(a){return new(a||e)},e.\u0275pipe=h.Yjl({name:"arrayJoin",type:e,pure:!0}),T})()},5172:(te,B,t)=>{"use strict";t.d(B,{In:()=>h,Ky:()=>b,VC:()=>M,c5:()=>T,gG:()=>e});var h=function(a){return a.FILE_SHOW_LINKS="fileLinks",a.FILE_EDIT="fileEdit",a.DELETE="delete",a.RENAME="rename",a.MOVE="move",a}(h||{}),M=function(a){return a.FILE="file",a.FOLDER="folder",a}(M||{}),e=function(a){return a.FILENAME="filename",a.SIZE="size",a.TIME="time",a.EXTENSION="ext",a}(e||{}),T=function(a){return a.GRID="grid",a.LIST="list",a}(T||{}),b=function(a){return a.W_768_I_1="(max-width: 767.98px)",a.W_933_I_2="(min-width: 768px) and (max-width: 933.98px)",a.W_960_I_3="(min-width: 934px) and (max-width: 959.98px)",a.W_1226_I_2="(min-width: 960px) and (max-width: 1225.98px)",a.W_1540_I_3="(min-width: 1226px) and (max-width: 1539.98px)",a.W_1854_I_4="(min-width: 1540px) and (max-width: 1853.98px)",a.W_2168_I_5="(min-width: 1854px) and (max-width: 2167.98px)",a.W_2482_I_6="(min-width: 2168px) and (max-width: 2481.98px)",a.W_2796_I_7="(min-width: 2482px) and (max-width: 2795.98px)",a.W_3110_I_8="(min-width: 2796px) and (max-width: 3109.98px)",a.W_3424_I_9="(min-width: 3110px) and (max-width: 3423.98px)",a.W_3738_I_10="(min-width: 3424px)",a}(b||{})},1990:(te,B,t)=>{"use strict";t.d(B,{C7:()=>T,Mi:()=>b,O8:()=>M,er:()=>a,p0:()=>e,xt:()=>I});var h=t(5172);const M=[{ext:["png","apng"],maxSize:15},{ext:["jpeg","jpg","jpe"],maxSize:10},{ext:["gif"],maxSize:15},{ext:["bmp"],maxSize:10},{ext:["webp","webm"],maxSize:10},{ext:["psd","xcf"],maxSize:150},{ext:["svg"],maxSize:30}].map(x=>(x.maxSize*=1048576,x)),e={lastPath:[],layout:{asc:!0,orderBy:h.gG.FILENAME,type:h.c5.GRID},uploader:{checkImage:{time:0,active:!0},showLinkModal:!1}},T="https://upload.forumfree.net/api/",b=/^(?:(?![\t\r\n])[a-zA-Z0-9_\-.\s])*$/,a=/^(?:(?![\t\r\n])[a-zA-Z0-9_\-\s])*$/,I={invalidLength:!1,alreadyUsed:!1,invalidStartOrEnd:!1,invalidCharacter:!1}},7621:(te,B,t)=>{"use strict";t.d(B,{y:()=>E});var h=t(5861),M=t(3912),e=t(708),T=t(8180),b=t(4664),a=t(2096),I=t(6306),x=t(5879),c=t(9862);let E=(()=>{var O;class v{constructor(D,H){this.http=D,this.endpointsService=H}get(D){var H=this;return(0,h.Z)(function*(){const N=H.sendRequest(D);return yield(0,e.n)(N)})()}sendRequest(D){return this.getUrlContent(D).pipe((0,T.q)(1),(0,b.w)(H=>(0,a.of)(H)),(0,I.K)(()=>this.getUrlContentWithProxy(D)))}getUrlContent(D){return this.http.get(D,{responseType:"blob"})}getUrlContentWithProxy(D){return this.http.get(this.endpointsService.get(M.jQ.PROXY,M.ph.COMMON),{headers:{[M._o.HeaderKeys.TOKEN_TYPE]:M.s9.ACCESS,"x-remote-url":D},responseType:"blob"}).pipe((0,T.q)(1),(0,I.K)(()=>(0,a.of)(void 0)))}}return(O=v).\u0275fac=function(D){return new(D||O)(x.LFG(c.eN),x.LFG(M.oz))},O.\u0275prov=x.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),v})()},5983:(te,B,t)=>{"use strict";t.d(B,{B:()=>T});var h=t(5172),M=t(1410),e=t(5879);let T=(()=>{var b;class a{constructor(x){this.globalsService=x,this.ffuid="",this.cache={},this.profileSubscription=this.globalsService.profileObservable.subscribe(c=>{this.ffuid=c?c.user.ffuid:""})}getItem(x){const c=this.createKey(x);if(this.cache.hasOwnProperty(c))return this.cache[c]}setItem(x,c){this.cache[this.createKey(x)]=c}removeItem(x){const c=this.createKey(x);if(this.cache.hasOwnProperty(c)){if(this.cache[c].folders.length)for(const E of this.cache[c].folders)this.removeItem([...x,E.name]);return delete this.cache[c],!0}return!1}getEntities(x,c){let E={};const O=this.createKey(x);if(!this.cache.hasOwnProperty(O))return E;for(const v of c){const y=(v.type===h.VC.FILE?this.cache[O].files:this.cache[O].folders).find(D=>D.name===v.name);y&&(E[y.name]=y)}return E}addEntities(x,c,E=h.VC.FILE){const O=this.createKey(x);return!!this.cache.hasOwnProperty(O)&&(Array.isArray(c)||(c=[c]),E===h.VC.FILE?this.cache[O].files.unshift(...c):this.cache[O].folders.unshift(...c),!0)}removeEntities(x,c,E=h.VC.FILE){if(Array.isArray(c)||(c=[c]),E===h.VC.FOLDER)for(const D of c)this.removeItem([...x,D]);const O=this.createKey(x);if(!this.cache.hasOwnProperty(O))return[];const v=E===h.VC.FILE?"files":"folders";let y=[];for(const D of c){const H=this.cache[O][v].findIndex(N=>N.name===D);H>-1&&(this.cache[O][v].splice(H,1),y.push(D))}return y}refactorFolderContent(x,c){const E=this.createKey(x);if(!this.cache.hasOwnProperty(E))return!1;c.endsWith("/")||(c+="/");for(const O of this.cache[E].folders)O.url=c+O.name;for(const O of this.cache[E].files)O.url=O.embedUrl=c+O.name,O.time=Date.now();return!0}createKey(x){return`${this.ffuid}/${x.join("/")}`}ngOnDestroy(){this.profileSubscription.unsubscribe()}}return(b=a).\u0275fac=function(x){return new(x||b)(e.LFG(M.d))},b.\u0275prov=e.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),a})()},5571:(te,B,t)=>{"use strict";t.d(B,{AD:()=>M,It:()=>a,ex:()=>h,mH:()=>I,r2:()=>T,vO:()=>b,xJ:()=>e});const h="\nquery UploadEntitiesListToken($scope: String, $target: String!) {\n    uploadEntitiesListToken(scope: $scope, target: $target)\n}",M="\nquery UploadEntitiesHostToken($scope: String, $target: String!) {\n    uploadEntitiesHostToken(scope: $scope, target: $target)\n}",e="\nquery UploadEntitiesCreateDirectoryToken($scope: String, $target: String!) {\n    uploadEntitiesCreateDirectoryToken(scope: $scope, target: $target)\n}",T="\nquery UploadEntitiesMoveToken($scope: String, $source: String!, $target: String!) {\n    uploadEntitiesMoveToken(scope: $scope, source: $source, target: $target)\n}",b="\nquery UploadEntitiesDeleteToken($scope: String, $target: String!) {\n    uploadEntitiesDeleteToken(scope: $scope, target: $target)\n}",a="\nquery UploadHistoryAvailableDateRange {\n    uploadHistoryAvailableDateRange {\n        start\n        end\n    }\n}",I="\nsubscription UploadEntities($scope: String) {\n    uploadEntities(scope: $scope) {\n        eventMessage\n        eventType\n        user {\n            avatar\n            host\n            id\n            nickname\n        }\n    }\n}"},5487:(te,B,t)=>{"use strict";t.d(B,{r:()=>b});var h=t(8645),M=t(5619),e=t(446),T=t(5879);let b=(()=>{var a;class I{constructor(c){this.uploadPreferencesService=c,this.selectedFileListArray=[],this.actionSubject=new h.x,this.uploadingFileQueueSubject=new h.x,this.uploadingFileErrorSubject=new h.x,this.currentFolderPathSubject=new h.x,this.layoutOptionsSubject=new h.x,this.renameEntitySubject=new h.x,this.entityPendingSubject=new h.x,this.deleteFileSubject=new h.x,this.uploadedFileSubject=new h.x,this.draggedFileListSubject=new h.x,this.startUploadSubject=new h.x,this.startMoveSubject=new h.x,this.selectedFileListSubject=new M.X(this.selectedFileListArray)}get actionObservable(){return this.actionSubject.asObservable()}pushAction(c){this.actionSubject.next(c)}get layoutOptionsObservable(){return this.layoutOptionsSubject.asObservable()}pushLayoutOptions(c){this.uploadPreferencesService.layoutOptions=c,this.layoutOptionsSubject.next(c)}get currentFolderPathObservable(){return this.currentFolderPathSubject.asObservable()}pushCurrentFolderPath(c){this.uploadPreferencesService.lastFolderPath=c,this.currentFolderPathSubject.next(c)}get uploadingFileQueueObservable(){return this.uploadingFileQueueSubject.asObservable()}pushUploadingFileQueue(c){this.uploadingFileQueueSubject.next(c)}get uploadingFileErrorObservable(){return this.uploadingFileErrorSubject.asObservable()}pushUploadingFileError(c){this.uploadingFileErrorSubject.next(c)}get renameEntityObservable(){return this.renameEntitySubject.asObservable()}pushRenameEntity(c){this.renameEntitySubject.next(c)}get entityPendingObservable(){return this.entityPendingSubject.asObservable()}pushEntityPending(c){this.entityPendingSubject.next(c)}get deleteFileObservable(){return this.deleteFileSubject.asObservable()}pushDeleteFile(c){this.deleteFileSubject.next(c)}get uploadedFileObservable(){return this.uploadedFileSubject.asObservable()}pushUploadedFile(c){this.uploadedFileSubject.next(c)}get draggedFileListObservable(){return this.draggedFileListSubject.asObservable()}pushDraggedFileList(c){this.draggedFileListSubject.next(c)}get startUploadObservable(){return this.startUploadSubject.asObservable()}pushStartUpload(c){this.startUploadSubject.next(c)}get startMoveObservable(){return this.startMoveSubject.asObservable()}pushStartMove(c){this.startMoveSubject.next(c)}get selectedFileListObservable(){return this.selectedFileListSubject.asObservable()}pushSelectedFile(c){if(Array.isArray(c)||(c=[c]),0===c.length)return void(this.selectedFileListArray.length>0&&(this.selectedFileListArray=[],this.selectedFileListSubject.next(this.selectedFileListArray)));let E=!1;for(const O of c){const v=this.selectedFileListArray.findIndex(y=>y.name===O.name);O.selected?-1===v&&(this.selectedFileListArray.push({name:O.name}),E=!0):v>-1&&(this.selectedFileListArray.splice(v,1),E=!0)}E&&this.selectedFileListSubject.next(this.selectedFileListArray)}}return(a=I).\u0275fac=function(c){return new(c||a)(T.LFG(e.p))},a.\u0275prov=T.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),I})()},446:(te,B,t)=>{"use strict";t.d(B,{p:()=>a});var h=t(7165),M=t(463),e=t(1990),T=t(2986),b=t(5879);let a=(()=>{var I;class x{constructor(E,O){this.preferencesService=E,this.urlQueryParamsService=O;const v=this.urlQueryParamsService.getAndDeleteParam(h.RT.UPLOAD_PATH);v&&(this.lastFolderPath=v.split("/").filter(y=>y.length>0))}get preferences(){return this.preferencesService.getItem(h.Ye.UPLOAD)||e.p0}set preferences(E){this.preferencesService.setItem(h.Ye.UPLOAD,E)}get lastFolderPath(){return(this.preferences.lastPath||e.p0.lastPath).filter(E=>E.length>0)}set lastFolderPath(E){const O=this.preferences;O.lastPath=E,this.preferences=O}get layoutOptions(){const E=e.p0.layout,O=this.preferences.layout;return O&&0===Object.keys(E).filter(v=>!O.hasOwnProperty(v)).length?O:E}set layoutOptions(E){const O=this.preferences;O.layout=E,this.preferences=O}get uploader(){const E=this.preferences.uploader||e.p0.uploader;return!E.checkImage.active&&Date.now()-E.checkImage.time>6048e5&&(E.checkImage.active=!0,this.uploader=E),E.hasOwnProperty("showLinkModal")||(E.showLinkModal=!1),E}set uploader(E){const O=this.preferences;O.uploader=E,this.preferences=O}}return(I=x).\u0275fac=function(E){return new(E||I)(b.LFG(M.y),b.LFG(T.J))},I.\u0275prov=b.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),x})()},658:(te,B,t)=>{"use strict";t.d(B,{C:()=>D});var h=t(1413),M=t(5861),e=t(3912),T=t(4036),b=t(5172),a=t(9054),I=t(5571),x=t(5983),c=t(1990),E=t(446),O=t(4004),v=t(5879),y=t(9862);let D=(()=>{var H;class N{constructor(A,p,u,C){this.graphqlService=A,this.uploadCacheService=p,this.uploadPreferencesService=u,this.http=C}get cache(){return this.uploadCacheService}get preferences(){return this.uploadPreferencesService}setGqlIdHeader(){this.graphqlService.safeSetGlobalHeader(e._o.HeaderKeys.UUID,(0,O.Z)())}removeGqlIdHeader(){this.graphqlService.removeGlobalHeader(e._o.HeaderKeys.UUID)}getGqlIdHeader(){return this.graphqlService.getGlobalHeader(e._o.HeaderKeys.UUID)||""}getFileList(A,p){var u=this;return(0,M.Z)(function*(){const C=u.uploadCacheService.getItem(A);if(C)return C;const f=(yield u.graphqlService.query({query:I.ex,variables:{scope:p,target:A.join("/")}})).data.uploadEntitiesListToken,_=yield u.sendRequest(f),F={files:_.files.map(W=>{const K=(0,a.Tb)(W.url);return(0,h.Z)((0,h.Z)({},W),{time:1e3*W.time,filename:K.filename,ext:K.ext,isImage:(0,a.Or)(K.ext),embedUrl:`${W.url}?t=${W.time}`,type:b.VC.FILE})}),folders:_.folders.map(W=>(0,h.Z)((0,h.Z)({},W),{},{type:b.VC.FOLDER}))};return u.uploadCacheService.setItem(A,F),F})()}createDirectory(A,p){var u=this;return(0,M.Z)(function*(){const C=(yield u.graphqlService.mutate({mutation:I.xJ,variables:{scope:p,target:A.join("/")}})).data.uploadEntitiesCreateDirectoryToken;return yield u.sendRequest(C)})()}moveRenameEntity(A,p,u,C,f){var _=this;return(0,M.Z)(function*(){C||(C=u);const L=(yield _.graphqlService.mutate({mutation:I.r2,variables:{scope:f,source:(A.length?`${A.join("/")}/`:"")+u,target:(p.length?`${p.join("/")}/`:"")+C}})).data.uploadEntitiesMoveToken,F=yield _.sendRequest(L);return(0,h.Z)((0,h.Z)({},F),{},{time:1e3*F.time})})()}deleteEntity(A,p,u){var C=this;return(0,M.Z)(function*(){const f=(yield C.graphqlService.mutate({mutation:I.vO,variables:{scope:u,target:(A.length?`${A.join("/")}/`:"")+p}})).data.uploadEntitiesDeleteToken;return yield C.sendRequest(f),!0})()}getHostToken(A,p,u){var C=this;return(0,M.Z)(function*(){return(yield C.graphqlService.query({query:I.AD,variables:{scope:u,target:(A.length?`${A.join("/")}/`:"")+p}})).data.uploadEntitiesHostToken})()}sendRequest(A){var p=this;return(0,M.Z)(function*(){return(yield(0,T.z)(p.http.post(c.C7,JSON.stringify({payload:A}),{headers:{"Content-Type":"application/json"}}))).success})()}subscribeForChanges(A,p){var u=this;return(0,M.Z)(function*(){return yield u.graphqlService.subscribe({query:I.mH,variables:{scope:p}},C=>{var f;if(null===(f=C.data)||void 0===f||!f.uploadEntities)return;const _=JSON.parse(C.data.uploadEntities.eventMessage);!_.payload.customHeaders||!_.payload.customHeaders.hasOwnProperty(e._o.HeaderKeys.UUID)||_.payload.customHeaders[e._o.HeaderKeys.UUID]===u.getGqlIdHeader()||A({type:C.data.uploadEntities.eventType,message:_})})})()}}return(H=N).\u0275fac=function(A){return new(A||H)(v.LFG(e.Jk),v.LFG(x.B),v.LFG(E.p),v.LFG(y.eN))},H.\u0275prov=v.Yz7({token:H,factory:H.\u0275fac,providedIn:"root"}),N})()},9054:(te,B,t)=>{"use strict";t.d(B,{$H:()=>V,JN:()=>O,LZ:()=>y,Lv:()=>I,Or:()=>N,Tb:()=>b,g8:()=>C,jL:()=>H,lY:()=>x,ok:()=>p,rQ:()=>u,rc:()=>A,zO:()=>a});var h=t(5861),M=t(1413),e=t(5172),T=t(1990);function b(f){let _=f;if(f.indexOf("/")>-1){const K=f.split("/");_=K[K.length-1]}const L=_.replace(/\?.*$/,"").split("."),F=L.length>1?L[L.length-1].toLowerCase():"",W=decodeURIComponent(L.slice(0,-1).join("."));return{ext:F,filename:W,name:F?`${W}.${F}`:""}}function a(f,_={}){const L=b(f),F=Date.now();return(0,M.Z)({name:L.name,size:0,time:F,url:f,ext:L.ext,filename:L.filename,isImage:N(L.ext),embedUrl:`${f}?t=${F}`,type:e.VC.FILE},_)}function I(f){let _=f;_.endsWith("/")&&(_=_.slice(0,-1));const L=_.split("/");return{name:decodeURIComponent(L[L.length-1])}}function x(f){return{name:I(f).name,url:f,type:e.VC.FOLDER}}function c(f){return E.apply(this,arguments)}function E(){return(E=(0,h.Z)(function*(f){const _=new FileReader,L=new Promise(F=>_.addEventListener("load",()=>F(_.result)));return _.readAsDataURL(f),L})).apply(this,arguments)}function O(f){return v.apply(this,arguments)}function v(){return(v=(0,h.Z)(function*(f){const _=new DataView(yield f.arrayBuffer());if(2303741511===_.getUint32(0)&&218765834===_.getUint32(4)){if(-1===[4,6].indexOf(_.getUint8(25)))return!1;const F=Object.assign(new Image,{src:yield c(f)});yield new Promise(J=>F.addEventListener("load",()=>J(!0)));const W=Object.assign(document.createElement("canvas"),{width:F.width,height:F.height}).getContext("2d");if(!W)return!1;W.imageSmoothingEnabled=!1,W.drawImage(F,0,0);const K=null==W?void 0:W.getImageData(0,0,F.width,F.height);if(K)for(let J=0;J<K.data.length;J+=4)if(K.data[J+3]<255)return!0}return!1})).apply(this,arguments)}function y(f){return D.apply(this,arguments)}function D(){return(D=(0,h.Z)(function*(f){const _=Object.assign(new Image,{src:yield c(f)});return yield new Promise(L=>_.addEventListener("load",()=>L(!0))),_})).apply(this,arguments)}function H(f){return f.map(_=>({name:_.name,ext:_.ext,type:e.VC.FILE,url:_.url,embedUrl:_.embedUrl,isImage:_.isImage}))}function N(f,_=[]){return["png","apng","jpeg","jpg","jpe","gif","svg","webp"].includes(f)&&!_.includes(f)}function V(f){return N(f,["gif","svg"])}function A(f,_,L,F=[],W=""){let K=(0,M.Z)({},T.xt);const J=f.trim();K.invalidLength=0===J.length;const ie=(J+W).replace(/\s{2,}/g," ");return K.alreadyUsed=_!==J&&F.includes(ie),K.invalidStartOrEnd=/(^(\s|\.))|((\s|\.)$)/.test(f),K.invalidCharacter=!(L===e.VC.FILE?T.Mi.test(f):T.er.test(f)),K}function p(f,_){return f.join("/")===_.join("/")}function u(f){let _=[],L=[];for(const F of f)F.type===e.VC.FILE?_.push(F):L.push(F);return{[e.VC.FILE]:_,[e.VC.FOLDER]:L}}function C(f){return T.O8.find(_=>-1!==_.ext.indexOf(f))}},4887:(te,B,t)=>{"use strict";t.d(B,{q:()=>H});var h=t(5861),M=t(1413),e=t(4315),T=t.n(e),b=t(9054),a=t(9862),I=t(8645),x=t(1687),c=t(9773),E=t(1990),O=t(5487),v=function(N){return N[N.ORIENTATION=0]="ORIENTATION",N[N.CAMERA_MODEL=1]="CAMERA_MODEL",N}(v||{});class y{static findApp1Marker(V){const A=new DataView(V),p=new Set([65498,65497,65476,65474,65472,65499,65501]);for(let u=0;u<V.byteLength-2;u+=2){const C=A.getUint16(u);if(65505===C)return{offset:u,size:A.getUint16(u+2),little:18761==A.getUint16(u+8,!1)};if(p.has(C))break}}static stripAndReturnExif(V){return(0,h.Z)(function*(){const A=yield V.arrayBuffer(),p=y.findApp1Marker(A);return p?{file:new File([A.slice(0,p.offset),A.slice(p.offset+p.size+2)],V.name,{type:V.type,lastModified:V.lastModified}),exif:A.slice(p.offset,p.offset+p.size)}:{file:V}})()}static checkExifTagValue(V,A){const p=new DataView(V);if(1165519206!==p.getUint32(4,!1))return;const u=18761===p.getUint16(10,!1);let C=10;C+=p.getUint32(C+4,u);const f=p.getUint16(C,u);C+=2;for(let _=0;_<f;_++){const L=p.getUint16(C+12*_,u);if(A===v.ORIENTATION&&274===L)return p.getUint16(C+12*_+8,u);if(A===v.CAMERA_MODEL&&272===L){const F=p.getUint32(C+12*_+4,u),W=p.getUint32(C+12*_+8,u),K=new Uint8Array(V,W,F),J=Array.from(K);return String.fromCharCode.apply(null,J)}}}}var D=t(5879);let H=(()=>{var N;class V{constructor(p,u){this.http=p,this.uploadObservablesService=u,this.requestSubscriptions=[],this.uploaderOptionsObject={compress:!0,openLinkModalAfterUpload:!1}}get uploaderOptions(){return(0,M.Z)({},this.uploaderOptionsObject)}set uploaderOptions(p){this.uploaderOptionsObject=(0,M.Z)({},p)}prepareFile(p,u){var C=this;return(0,h.Z)(function*(){const f=yield C.orientAndCompressFileIfNeeded(p);return f.compressorCheck?f.file:u.compress?yield C.compressFileIfNeeded(p,u.imageDimensions?{width:u.imageDimensions.width,height:u.imageDimensions.height}:{}):p})()}compressFileIfNeeded(p,u={},C=!1){return(0,h.Z)(function*(){let f=["image/png","image/jpeg"],_=(0,M.Z)({strict:!0,checkOrientation:!0,quality:.8,convertSize:1},u);const L=void 0!==_.width||void 0!==_.height;L&&(f.push("image/webp"),_.resize="cover",_.strict=u.strict||!1);const F=p.type.toLowerCase();return p.size<=1e6&&!L&&!C||-1===f.indexOf(p.type.toLowerCase())?p:("image/png"===F&&(yield(0,b.JN)(p))&&(_.convertSize=1/0),new Promise((W,K)=>{new(T())(p,(0,M.Z)((0,M.Z)({},_),{},{success:J=>{const ie=J instanceof Blob?new File([J],p.name,{type:p.type,lastModified:p.lastModified}):p;W(ie)},error:K}))}))})()}getDimensionsForForcedResize(p){return(0,h.Z)(function*(){const C=yield(0,b.LZ)(p),f=C.width>C.height?"width":"height";if(C[f]>1e3)return{[f]:1e3}})()}orientAndCompressFileIfNeeded(p){var u=this;return(0,h.Z)(function*(){if(-1===["image/jpeg"].indexOf(p.type.toLowerCase()))return{file:p,compressorCheck:!1};const f=yield y.stripAndReturnExif(p),_=f.file;if(f.exif){if(void 0!==y.checkExifTagValue(f.exif,v.CAMERA_MODEL)){const K=yield u.getDimensionsForForcedResize(p);if(K)return{file:yield u.compressFileIfNeeded(p,(0,M.Z)({strict:!0,quality:.7},K)),compressorCheck:!0}}if(1!==y.checkExifTagValue(f.exif,v.ORIENTATION))return{file:yield u.compressFileIfNeeded(p,{},!0),compressorCheck:!0}}return{file:_,compressorCheck:!1}})()}upload(p,u,C,f=!1){const _=new I.x,L=new FormData;L.append("payload",C),L.append("upload",p,p.name),f&&L.append("allowOverwrite","1");const F=this.http.request(new a.aW("POST",E.C7,L,{reportProgress:!0,responseType:"json"}));return this.requestSubscriptions.push(F.subscribe({next:W=>{if(W.type===a.dt.UploadProgress){if(!W.total||(u.progress=Math.round(50*W.loaded/W.total)+20,u.progress<70))return;(0,x.F)(1e3).pipe((0,c.R)(_.asObservable())).subscribe(()=>{if(u.progress<95){const ie=Math.round(8*Math.random()+8);u.progress+ie>95?u.progress=95:u.progress+=ie}})}else if(W instanceof a.Zn){var K,J;if(u.progress=100,u.completed=!0,null!==(K=W.body)&&void 0!==K&&K.error||null===(J=W.body)||void 0===J||!J.success)u.error=!0,this.uploadObservablesService.pushUploadingFileError(u);else{u.file.url=W.body.success.url,u.file.time=Date.now(),u.file.embedUrl=`${u.file.url}?t=${u.file.time}`;const ie=(0,b.Tb)(u.file.url);u.file.name=ie.name,u.file.filename=ie.filename}_.next(),_.complete()}},error:()=>{u.error=!0,this.uploadObservablesService.pushUploadingFileError(u),_.next(),_.complete()}})),_.asObservable()}clearPendingRequests(){for(const p of this.requestSubscriptions)p.unsubscribe();this.requestSubscriptions=[]}}return(N=V).\u0275fac=function(p){return new(p||N)(D.LFG(a.eN),D.LFG(O.r))},N.\u0275prov=D.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"}),V})()},4315:function(te){te.exports=function(){"use strict";function B(g,n){var o=Object.keys(g);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(g);n&&(s=s.filter(function(U){return Object.getOwnPropertyDescriptor(g,U).enumerable})),o.push.apply(o,s)}return o}function t(g){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?B(Object(o),!0).forEach(function(s){T(g,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(o)):B(Object(o)).forEach(function(s){Object.defineProperty(g,s,Object.getOwnPropertyDescriptor(o,s))})}return g}function M(g,n){for(var o=0;o<n.length;o++){var s=n[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(g,I(s.key),s)}}function T(g,n,o){return(n=I(n))in g?Object.defineProperty(g,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):g[n]=o,g}function b(){return b=Object.assign?Object.assign.bind():function(g){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(g[s]=o[s])}return g},b.apply(this,arguments)}function I(g){var n=function a(g,n){if("object"!=typeof g||null===g)return g;var o=g[Symbol.toPrimitive];if(void 0!==o){var s=o.call(g,n||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(g)}(g,"string");return"symbol"==typeof n?n:String(n)}var g,n,o,s,U,P,G,k,x={exports:{}};g=x,typeof window>"u"||(n=window,o=n.HTMLCanvasElement&&n.HTMLCanvasElement.prototype,s=n.Blob&&function(){try{return!!new Blob}catch(S){return!1}}(),U=s&&n.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(S){return!1}}(),P=n.BlobBuilder||n.WebKitBlobBuilder||n.MozBlobBuilder||n.MSBlobBuilder,G=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,k=(s||P)&&n.atob&&n.ArrayBuffer&&n.Uint8Array&&function(S){var R,z,$,re,X,r,w,m,d;if(!(R=S.match(G)))throw new Error("invalid data URI");for(z=R[2]?R[1]:"text/plain"+(R[3]||";charset=US-ASCII"),$=!!R[4],re=S.slice(R[0].length),X=$?atob(re):decodeURIComponent(re),r=new ArrayBuffer(X.length),w=new Uint8Array(r),m=0;m<X.length;m+=1)w[m]=X.charCodeAt(m);return s?new Blob([U?w:r],{type:z}):((d=new P).append(r),d.getBlob(z))},n.HTMLCanvasElement&&!o.toBlob&&(o.mozGetAsFile?o.toBlob=function(S,R,z){var $=this;setTimeout(function(){S(z&&o.toDataURL&&k?k($.toDataURL(R,z)):$.mozGetAsFile("blob",R))})}:o.toDataURL&&k&&(o.toBlob=o.msToBlob?function(S,R,z){var $=this;setTimeout(function(){S((R&&"image/png"!==R||z)&&o.toDataURL&&k?k($.toDataURL(R,z)):$.msToBlob(R))})}:function(S,R,z){var $=this;setTimeout(function(){S(k($.toDataURL(R,z)))})})),g.exports?g.exports=k:n.dataURLtoBlob=k);var c=x.exports,O={strict:!0,checkOrientation:!0,retainExif:!1,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},y=typeof window<"u"&&typeof window.document<"u"?window:{},D=function(n){return n>0&&n<1/0},H=Array.prototype.slice;function N(g){return Array.from?Array.from(g):H.call(g)}var V=/^image\/.+$/;function A(g){return V.test(g)}var u=String.fromCharCode;var f=y.btoa;function _(g,n){for(var o=[],U=new Uint8Array(g);U.length>0;)o.push(u.apply(null,N(U.subarray(0,8192)))),U=U.subarray(8192);return"data:".concat(n,";base64,").concat(f(o.join("")))}function L(g){var o,n=new DataView(g);try{var s,U,P;if(255===n.getUint8(0)&&216===n.getUint8(1))for(var G=n.byteLength,k=2;k+1<G;){if(255===n.getUint8(k)&&225===n.getUint8(k+1)){U=k;break}k+=1}if(U){var R=U+10;if("Exif"===function C(g,n,o){var U,s="";for(o+=n,U=n;U<o;U+=1)s+=u(g.getUint8(U));return s}(n,U+4,4)){var z=n.getUint16(R);if(((s=18761===z)||19789===z)&&42===n.getUint16(R+2,s)){var $=n.getUint32(R+4,s);$>=8&&(P=R+$)}}}if(P){var X,r,re=n.getUint16(P,s);for(r=0;r<re;r+=1)if(274===n.getUint16(X=P+12*r+2,s)){o=n.getUint16(X+=8,s),n.setUint16(X,1,s);break}}}catch(w){o=1}return o}var W=/\.\d*(?:0|9){12}\d*$/;function K(g){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return W.test(g)?Math.round(g*n)/n:g}function J(g){var n=g.aspectRatio,o=g.height,s=g.width,U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",P=D(s),G=D(o);if(P&&G){var k=o*n;("contain"===U||"none"===U)&&k>s||"cover"===U&&k<s?o=s/n:s=o*n}else P?o=s/n:G&&(s=o*n);return{width:s,height:o}}var fe=y.ArrayBuffer,de=y.FileReader,oe=y.URL||y.webkitURL,me=/\.\w+$/,ve=y.Compressor,Ee=function(){function g(n,o){(function h(g,n){if(!(g instanceof n))throw new TypeError("Cannot call a class as a function")})(this,g),this.file=n,this.exif=[],this.image=new Image,this.options=t(t({},O),o),this.aborted=!1,this.result=null,this.init()}return function e(g,n,o){return n&&M(g.prototype,n),o&&M(g,o),Object.defineProperty(g,"prototype",{writable:!1}),g}(g,[{key:"init",value:function(){var o=this,s=this.file,U=this.options;if(function(n){return!(typeof Blob>"u")&&(n instanceof Blob||"[object Blob]"===Object.prototype.toString.call(n))}(s)){var P=s.type;if(A(P))if(oe&&de){fe||(U.checkOrientation=!1,U.retainExif=!1);var G="image/jpeg"===P,k=G&&U.checkOrientation,S=G&&U.retainExif;if(!oe||k||S){var R=new de;this.reader=R,R.onload=function(z){var re=z.target.result,X={},r=1;k&&(r=L(re))>1&&b(X,function F(g){var n=0,o=1,s=1;switch(g){case 2:o=-1;break;case 3:n=-180;break;case 4:s=-1;break;case 5:n=90,s=-1;break;case 6:n=90;break;case 7:n=90,o=-1;break;case 8:n=-90}return{rotate:n,scaleX:o,scaleY:s}}(r)),S&&(o.exif=function ie(g){for(var n=N(new Uint8Array(g)),o=n.length,s=[],U=0;U+3<o;){var P=n[U],G=n[U+1];if(255===P&&218===G)break;if(255===P&&216===G)U+=2;else{var S=U+(256*n[U+2]+n[U+3])+2,R=n.slice(U,S);s.push(R),U=S}}return s.reduce(function(z,$){return 255===$[0]&&225===$[1]?z.concat($):z},[])}(re)),X.url=k||S?!oe||r>1?_(re,P):oe.createObjectURL(s):re,o.load(X)},R.onabort=function(){o.fail(new Error("Aborted to read the image with FileReader."))},R.onerror=function(){o.fail(new Error("Failed to read the image with FileReader."))},R.onloadend=function(){o.reader=null},k||S?R.readAsArrayBuffer(s):R.readAsDataURL(s)}else this.load({url:oe.createObjectURL(s)})}else this.fail(new Error("The current browser does not support image compression."));else this.fail(new Error("The first argument must be an image File or Blob object."))}else this.fail(new Error("The first argument must be a File or Blob object."))}},{key:"load",value:function(o){var s=this,U=this.file,P=this.image;P.onload=function(){s.draw(t(t({},o),{},{naturalWidth:P.naturalWidth,naturalHeight:P.naturalHeight}))},P.onabort=function(){s.fail(new Error("Aborted to load the image."))},P.onerror=function(){s.fail(new Error("Failed to load the image."))},y.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(y.navigator.userAgent)&&(P.crossOrigin="anonymous"),P.alt=U.name,P.src=o.url}},{key:"draw",value:function(o){var s=this,U=o.naturalWidth,P=o.naturalHeight,G=o.rotate,k=void 0===G?0:G,S=o.scaleX,R=void 0===S?1:S,z=o.scaleY,$=void 0===z?1:z,re=this.file,X=this.image,r=this.options,w=document.createElement("canvas"),m=w.getContext("2d"),d=Math.abs(k)%180==90,i=("contain"===r.resize||"cover"===r.resize)&&D(r.width)&&D(r.height),l=Math.max(r.maxWidth,0)||1/0,j=Math.max(r.maxHeight,0)||1/0,Z=Math.max(r.minWidth,0)||0,Q=Math.max(r.minHeight,0)||0,ne=U/P,q=r.width,ee=r.height;if(d){var se=[j,l];l=se[0],j=se[1];var le=[Q,Z];Z=le[0],Q=le[1];var Y=[ee,q];q=Y[0],ee=Y[1]}i&&(ne=q/ee);var ae=J({aspectRatio:ne,width:l,height:j},"contain");l=ae.width,j=ae.height;var ce=J({aspectRatio:ne,width:Z,height:Q},"cover");if(Z=ce.width,Q=ce.height,i){var pe=J({aspectRatio:ne,width:q,height:ee},r.resize);q=pe.width,ee=pe.height}else{var xe=J({aspectRatio:ne,width:q,height:ee}),Pe=xe.width;q=void 0===Pe?U:Pe;var be=xe.height;ee=void 0===be?P:be}var Fe=-(q=Math.floor(K(Math.min(Math.max(q,Z),l))))/2,We=-(ee=Math.floor(K(Math.min(Math.max(ee,Q),j))))/2,Be=q,je=ee,Oe=[];if(i){var Me,ye,De=J({aspectRatio:ne,width:U,height:P},{contain:"cover",cover:"contain"}[r.resize]);Oe.push((U-(Me=De.width))/2,(P-(ye=De.height))/2,Me,ye)}if(Oe.push(Fe,We,Be,je),d){var Ae=[ee,q];q=Ae[0],ee=Ae[1]}w.width=q,w.height=ee,A(r.mimeType)||(r.mimeType=re.type);var Ie="transparent";re.size>r.convertSize&&r.convertTypes.indexOf(r.mimeType)>=0&&(r.mimeType="image/jpeg");var Le="image/jpeg"===r.mimeType;if(Le&&(Ie="#fff"),m.fillStyle=Ie,m.fillRect(0,0,q,ee),r.beforeDraw&&r.beforeDraw.call(this,m,w),!this.aborted&&(m.save(),m.translate(q/2,ee/2),m.rotate(k*Math.PI/180),m.scale(R,$),m.drawImage.apply(m,[X].concat(Oe)),m.restore(),r.drew&&r.drew.call(this,m,w),!this.aborted)){var Se=function(_e){if(!s.aborted){var Re=function(ge){return s.done({naturalWidth:U,naturalHeight:P,result:ge})};if(_e&&Le&&r.retainExif&&s.exif&&s.exif.length>0){var we=function(ge){return Re(c(_(function he(g,n){var o=N(new Uint8Array(g));if(255!==o[2]||224!==o[3])return g;var U=[255,216].concat(n,o.slice(4+(256*o[4]+o[5])));return new Uint8Array(U)}(ge,s.exif),r.mimeType)))};if(_e.arrayBuffer)_e.arrayBuffer().then(we).catch(function(){s.fail(new Error("Failed to read the compressed image with Blob.arrayBuffer()."))});else{var ue=new de;s.reader=ue,ue.onload=function(Ue){we(Ue.target.result)},ue.onabort=function(){s.fail(new Error("Aborted to read the compressed image with FileReader."))},ue.onerror=function(){s.fail(new Error("Failed to read the compressed image with FileReader."))},ue.onloadend=function(){s.reader=null},ue.readAsArrayBuffer(_e)}}else Re(_e)}};w.toBlob?w.toBlob(Se,r.mimeType,r.quality):Se(c(w.toDataURL(r.mimeType,r.quality)))}}},{key:"done",value:function(o){var s=o.naturalWidth,U=o.naturalHeight,P=o.result,G=this.file,k=this.image,S=this.options;if(oe&&0===k.src.indexOf("blob:")&&oe.revokeObjectURL(k.src),P)if(S.strict&&!S.retainExif&&P.size>G.size&&S.mimeType===G.type&&!(S.width>s||S.height>U||S.minWidth>s||S.minHeight>U||S.maxWidth<s||S.maxHeight<U))P=G;else{var R=new Date;P.lastModified=R.getTime(),P.lastModifiedDate=R,P.name=G.name,P.name&&P.type!==G.type&&(P.name=P.name.replace(me,function p(g){var n=A(g)?g.substr(6):"";return"jpeg"===n&&(n="jpg"),".".concat(n)}(P.type)))}else P=G;this.result=P,S.success&&S.success.call(this,P)}},{key:"fail",value:function(o){var s=this.options;if(!s.error)throw o;s.error.call(this,o)}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],[{key:"noConflict",value:function(){return window.Compressor=ve,g}},{key:"setDefaults",value:function(o){b(O,o)}}]),g}();return Ee}()},1687:(te,B,t)=>{"use strict";t.d(B,{F:()=>e});var h=t(6321),M=t(4825);function e(T=0,b=h.z){return T<0&&(T=0),(0,M.H)(T,T,b)}},4004:(te,B,t)=>{"use strict";t.d(B,{Z:()=>O});const M={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let e;const T=new Uint8Array(16);function b(){if(!e&&(e=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!e))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(T)}const a=[];for(let v=0;v<256;++v)a.push((v+256).toString(16).slice(1));const O=function E(v,y,D){if(M.randomUUID&&!y&&!v)return M.randomUUID();const H=(v=v||{}).random||(v.rng||b)();if(H[6]=15&H[6]|64,H[8]=63&H[8]|128,y){D=D||0;for(let N=0;N<16;++N)y[D+N]=H[N];return y}return function I(v,y=0){return a[v[y+0]]+a[v[y+1]]+a[v[y+2]]+a[v[y+3]]+"-"+a[v[y+4]]+a[v[y+5]]+"-"+a[v[y+6]]+a[v[y+7]]+"-"+a[v[y+8]]+a[v[y+9]]+"-"+a[v[y+10]]+a[v[y+11]]+a[v[y+12]]+a[v[y+13]]+a[v[y+14]]+a[v[y+15]]}(H)}}}]);