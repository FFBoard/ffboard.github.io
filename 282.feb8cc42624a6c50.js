(self.webpackChunkpages=self.webpackChunkpages||[]).push([[282],{3285:(it,Ce,g)=>{"use strict";g.d(Ce,{L:()=>y});var ce=g(1745),T=g(7165),A=g(9212);let xe=(()=>{var U;class W{constructor(){this.dependencies={[T.B2.LOGIN]:null,[T.B2.HOME]:null,[T.B2.SETTINGS]:T.B2.HOME,[T.B2.SCRIPT]:T.B2.HOME,[T.B2.SCRIPT_FORUM]:T.B2.SCRIPT,[T.B2.SCRIPT_USER]:T.B2.SCRIPT,[T.B2.SCRIPT_SETTINGS]:[T.B2.SCRIPT_USER,T.B2.SCRIPT_FORUM],[T.B2.SCRIPT_SANDBOX]:[T.B2.SCRIPT_USER,T.B2.SCRIPT_FORUM],[T.B2.SCRIPT_DEV]:T.B2.SCRIPT,[T.B2.SCRIPT_DEV_SETTINGS]:T.B2.SCRIPT_DEV,[T.B2.UPLOAD]:T.B2.HOME,[T.B2.ADMIN]:T.B2.HOME,[T.B2.STATS]:T.B2.HOME,[T.B2.STATS_UPLOAD]:T.B2.STATS},this.names={[T.B2.LOGIN]:"Login",[T.B2.HOME]:"Home",[T.B2.SETTINGS]:"Notifiche",[T.B2.SCRIPT]:"Script",[T.B2.SCRIPT_FORUM]:"Forum",[T.B2.SCRIPT_USER]:"Utenti",[T.B2.SCRIPT_SETTINGS]:"Impostazioni",[T.B2.SCRIPT_SANDBOX]:"Altro",[T.B2.SCRIPT_DEV]:"Sviluppo",[T.B2.SCRIPT_DEV_SETTINGS]:"Impostazioni",[T.B2.UPLOAD]:"Upload",[T.B2.ADMIN]:"Amministrazione",[T.B2.STATS]:"Statistiche",[T.B2.STATS_UPLOAD]:"Upload"}}createPathList(Q,te=[]){const B=(O,Te)=>{O.unshift({name:this.names[Te]||"",path:Te})},Ze=O=>(0,ce.o8)(this.dependencies,O)?this.dependencies[O]instanceof Array?this.dependencies[O].includes(te[0])?te.shift():this.dependencies[O][0]:this.dependencies[O]:null,Oe=[{name:this.names[Q]||"",path:""}];let Ee=Ze(Q);for(;Ee;)B(Oe,Ee),Ee=Ze(Ee);return Oe}}return(U=W).\u0275fac=function(Q){return new(Q||U)},U.\u0275prov=A.Yz7({token:U,factory:U.\u0275fac,providedIn:"root"}),W})();var f=g(4190),ee=g(6814);function w(U,W){if(1&U&&A._UZ(0,"a",8),2&U){const I=A.oxw().$implicit;A.Q6J("routerLink",I.path)("innerText",I.name)}}function e(U,W){if(1&U&&A._UZ(0,"span",9),2&U){const I=A.oxw().$implicit;A.Q6J("innerText",I.name)}}const de=U=>({active:U});function q(U,W){if(1&U&&(A.TgZ(0,"li",5),A.YNc(1,w,1,2,"a",6)(2,e,1,1,"ng-template",null,7,A.W1O),A.qZA()),2&U){const I=W.last,Q=A.MAs(3);A.Q6J("ngClass",A.VKq(4,de,I)),A.uIk("aria-current",I?"page":null),A.xp6(),A.Q6J("ngIf",!I)("ngIfElse",Q)}}const Y=U=>({"hide-nav":U}),J=U=>({"d-none d-md-block":U});let y=(()=>{var U;class W{constructor(Q,te){this.breadcrumbService=Q,this.router=te,this.pageTitle="",this.url="",this.nodes=[],this.hideNavOnSmallScreen=!1,this.breadcrumbs=[]}ngOnInit(){this.url||(this.url=this.router.url),this.breadcrumbs=this.breadcrumbService.createPathList(this.url,this.nodes)}}return(U=W).\u0275fac=function(Q){return new(Q||U)(A.Y36(xe),A.Y36(f.F0))},U.\u0275cmp=A.Xpm({type:U,selectors:[["app-breadcrumb"]],inputs:{pageTitle:"pageTitle",url:"url",nodes:"nodes",hideNavOnSmallScreen:"hideNavOnSmallScreen"},decls:5,vars:8,consts:[[1,"container-fluid","px-md-1","d-flex","flex-column","flex-md-row","align-items-md-center",3,"ngClass"],[1,"h3","fw-light","mb-0","lh-1","fv-small-caps","pb-1",3,"innerText"],["aria-label","breadcrumb",1,"ms-md-auto","mt-1","flex-shrink-0",3,"ngClass"],[1,"breadcrumb","mb-0","justify-content-md-end"],["class","breadcrumb-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"breadcrumb-item",3,"ngClass"],[3,"routerLink","innerText",4,"ngIf","ngIfElse"],["lastItem",""],[3,"routerLink","innerText"],[3,"innerText"]],template:function(Q,te){1&Q&&(A.TgZ(0,"div",0),A._UZ(1,"h2",1),A.TgZ(2,"nav",2)(3,"ol",3),A.YNc(4,q,4,6,"li",4),A.qZA()()()),2&Q&&(A.Q6J("ngClass",A.VKq(4,Y,te.hideNavOnSmallScreen)),A.xp6(),A.Q6J("innerText",te.pageTitle),A.xp6(),A.Q6J("ngClass",A.VKq(6,J,te.hideNavOnSmallScreen)),A.xp6(2),A.Q6J("ngForOf",te.breadcrumbs))},dependencies:[ee.mk,ee.sg,ee.O5,f.rH],styles:[".container-fluid[_ngcontent-%COMP%]:not(.hide-nav){margin-bottom:.75rem}.container-fluid.hide-nav[_ngcontent-%COMP%]{margin-bottom:.5rem}@media (min-width: 768px){.container-fluid.hide-nav[_ngcontent-%COMP%]{margin-bottom:.75rem}}@media (min-width: 960px){.container-fluid[_ngcontent-%COMP%]{margin-top:.5rem}}"]}),W})()},9090:(it,Ce,g)=>{"use strict";g.d(Ce,{w:()=>xe});var ce=g(6814),T=g(4190),A=g(9212);let xe=(()=>{var f;class ee{}return(f=ee).\u0275fac=function(e){return new(e||f)},f.\u0275mod=A.oAB({type:f}),f.\u0275inj=A.cJS({imports:[ce.ez,T.Bz]}),ee})()},9282:(it,Ce,g)=>{"use strict";g.r(Ce),g.d(Ce,{UploadModule:()=>jl});var ce=g(8225),T=g(4243),A=g(9090),xe=g(342),f=g(6814),ee=g(4041),w=g(6223),e=g(9212);let de=(()=>{var o;class s{}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[f.ez]}),s})();var q=g(4101),Y=g(578),J=g(4610),y=g(8726),U=g(4190);const W={suffixAgo:"fa",suffixFromNow:"da ora",seconds:"meno di un minuto",minute:"circa un minuto",minutes:"%d minuti",hour:"circa un'ora",hours:"circa %d ore",day:"un giorno",days:"%d giorni",month:"circa un mese",months:"%d mesi",year:"circa un anno",years:"%d anni"};var I=g(9360),Q=g(564);function te(o,s=1/0,i){return s=(s||0)<1?1/0:s,(0,I.e)((t,n)=>(0,Q.p)(t,n,o,s,void 0,!0,i))}var B=g(836),Ze=g(2096),Oe=g(4825),Ee=g(6232),O=g(8645),Te=g(2181);let Be=(()=>{var o;class s{constructor(){this.changes=new O.x}}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),s})();const kt=function(o){const s=Date.now(),i=Math.round(Math.abs(s-o)/1e3),t=o<s?"ago":"from now",[n,r]=i<60?[Math.round(i),"second"]:i<3600?[Math.round(i/60),"minute"]:i<86400?[Math.round(i/3600),"hour"]:i<604800?[Math.round(i/86400),"day"]:i<2592e3?[Math.round(i/604800),"week"]:i<31536e3?[Math.round(i/2592e3),"month"]:[Math.round(i/31536e3),"year"];return{value:n,unit:r,suffix:t}};class Ie{}let Rt=(()=>{var o;class s extends Ie{format(t){const{suffix:n,value:r,unit:a}=kt(t);return this.parse(r,a,n)}parse(t,n,r){return 1!==t&&(n+="s"),t+" "+n+" "+r}}return(o=s).\u0275fac=(()=>{let i;return function(n){return(i||(i=e.n5z(o)))(n||o)}})(),o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),s})(),dn=(()=>{var o;class s extends Ie{constructor(t){super(),this.intl=t}format(t){const{suffix:n,value:r,unit:a}=kt(t);return this.parse(r,a,n,Date.now(),t)}parse(t,n,r,a,c){"week"===n&&!this.intl.strings.week&&!this.intl.strings.weeks&&(t=Math.round(Math.abs(a-c)/864e5),n="day");const u=this.normalizeFn(t,a-c,this.intl.strings.numbers),_=[];return"ago"===r&&this.intl.strings.prefixAgo&&_.push(u(this.intl.strings.prefixAgo)),"from now"===r&&this.intl.strings.prefixFromNow&&_.push(u(this.intl.strings.prefixFromNow)),_.push(u(t>1?this.intl.strings[n+"s"]||this.intl.strings[n]||"%d "+n:this.intl.strings[n]||this.intl.strings[n+"s"]||"%d "+n)),"ago"===r&&this.intl.strings.suffixAgo&&_.push(u(this.intl.strings.suffixAgo)),"from now"===r&&this.intl.strings.suffixFromNow&&_.push(u(this.intl.strings.suffixFromNow)),_.join("string"==typeof this.intl.strings.wordSeparator?this.intl.strings.wordSeparator:" ")}normalizeNumber(t,n){return t&&10===t.length?String(n).split("").map(r=>r.match(/^[0-9]$/)?t[parseInt(r,10)]:r).join(""):String(n)}normalizeFn(t,n,r){return a=>"function"==typeof a?a(t,n).replace(/%d/g,this.normalizeNumber(r,t)):a.replace(/%d/g,this.normalizeNumber(r,t))}}return(o=s).\u0275fac=function(t){return new(t||o)(e.LFG(Be))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),s})();class ue{}let Nt=(()=>{var o;class s extends ue{tick(t){return(0,Ze.of)(0).pipe(te(()=>{const n=Date.now(),r=Math.round(Math.abs(n-t)/1e3),a=r<60?1e3:r<3600?6e4:r<86400?36e5:0;return a?(0,Oe.H)(a):(0,Ee.c)()}),(0,B.T)(1))}}return(o=s).\u0275fac=(()=>{let i;return function(n){return(i||(i=e.n5z(o)))(n||o)}})(),o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),s})(),st=(()=>{var o;class s{get date(){return this._date}set date(t){if(this._date=function ot(o){const s=new Date(o);if(!Number.isNaN(s.valueOf()))return s;const i=String(o).match(/\d+/g);if(null===i||i.length<=2)return s;{const[t,n,...r]=i.map(a=>parseInt(a,10));return new Date(Date.UTC(t,n-1,...r))}}(t).valueOf(),!this._date)throw new SyntaxError("Wrong parameter in TimeagoDirective. Expected a valid date, received: ".concat(t));this.clockSubscription&&(this.clockSubscription.unsubscribe(),this.clockSubscription=void 0),this.clockSubscription=this.clock.tick(this.date).pipe((0,Te.h)(()=>this.live,this)).subscribe(()=>this.stateChanges.next())}get live(){return this._live}set live(t){this._live=function Se(o){return null!=o&&"false"!=="".concat(o)}(t)}constructor(t,n,r,a,c){this.cd=n,this.clock=c,this.stateChanges=new O.x,this._live=!0,t&&(this.intlSubscription=t.changes.subscribe(()=>this.stateChanges.next())),this.stateChanges.subscribe(()=>{this.setContent(a.nativeElement,r.format(this.date)),this.cd.markForCheck()})}ngOnChanges(){this.stateChanges.next()}setContent(t,n){!function Dt(o){return typeof o<"u"&&null!==o}(t.textContent)?t.data=n:t.textContent=n}ngOnDestroy(){this.intlSubscription&&(this.intlSubscription.unsubscribe(),this.intlSubscription=void 0),this.clockSubscription&&(this.clockSubscription.unsubscribe(),this.clockSubscription=void 0),this.stateChanges.complete()}}return(o=s).\u0275fac=function(t){return new(t||o)(e.Y36(Be,8),e.Y36(e.sBO),e.Y36(Ie),e.Y36(e.SBq),e.Y36(ue))},o.\u0275dir=e.lG2({type:o,selectors:[["","timeago",""]],inputs:{date:"date",live:"live"},exportAs:["timeago"],features:[e.TTD]}),s})(),zt=(()=>{var o;class s{static forRoot(t={}){return{ngModule:s,providers:[t.clock||{provide:ue,useClass:Nt},t.intl||[],t.formatter||{provide:Ie,useClass:Rt}]}}static forChild(t={}){return{ngModule:s,providers:[t.clock||{provide:ue,useClass:Nt},t.intl||[],t.formatter||{provide:Ie,useClass:Rt}]}}}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({}),s})(),V=(()=>{var o;class s extends ue{constructor(){super(...arguments),this.minute=60,this.hour=60*this.minute,this.day=24*this.hour}tick(t){return(0,Ze.of)(0).pipe(te(()=>{const n=Date.now(),r=Math.round(Math.abs(n-t)/1e3),a=r<this.minute||r<this.hour?1e3*this.minute:r<this.day?1e3*this.hour:0;return a?(0,Oe.H)(a):Ee.E}),(0,B.T)(1))}}return(o=s).\u0275fac=(()=>{let i;return function(n){return(i||(i=e.n5z(o)))(n||o)}})(),o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),s})();var C=g(1413),b=g(5861),v=g(5172),F=g(9054),Re=g(5983);let Ve=(()=>{var o;class s{constructor(t){this.uploadCacheService=t,this.folderPath=[]}set currentFolderPath(t){this.folderPath=t}removeEntitiesCallback(t,n,r){const a=!(0,F.ok)(t,this.folderPath),c=this.uploadCacheService.removeEntities(t,n,r);return(0,C.Z)({success:c.length>0},a?{}:{payload:{list:c}})}addEntitiesCallback(t,n,r){const a=!(0,F.ok)(t,this.folderPath),c=this.uploadCacheService.addEntities(t,n,r);return(0,C.Z)({success:c},a?{}:{payload:{list:n}})}renameEntityCallback(t,n,r){if(!this.uploadCacheService.getItem(t))return{success:!1};this.uploadCacheService.removeEntities(t,n.name,n.type);const c=this.generateEntityFromUrl(r.url,n.type,n.type===v.VC.FILE?{size:r.size,time:r.time}:{});return this.uploadCacheService.addEntities(t,(0,C.Z)({},c),c.type),(0,C.Z)({success:!0},(0,F.ok)(t,this.folderPath)?{payload:{list:[c]}}:{})}moveEntitiesCallback(t){const n=[],r=[];for(const a of t)a.type===v.VC.FILE?n.push((0,F.zO)(a.data.url,{size:a.data.size,time:a.data.time})):r.push((0,F.lY)(a.data.url));return{success:!0,payload:{list:{files:n,folders:r}}}}generateEntityFromUrl(t,n,r={}){return n===v.VC.FILE?(0,F.zO)(t,r):(0,F.lY)(t)}}return(o=s).\u0275fac=function(t){return new(t||o)(e.LFG(Re.B))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),s})();var ne=g(1134),Ge=g(4887),L=g(5487),ie=g(9773),qt=g(1374),Ne=g(3019),be=g(2438),oe=g(6593);const pn=["wrapper"],un=["sourceImage"];function mn(o,s){if(1&o){const i=e.EpF();e.TgZ(0,"img",4,5),e.NdJ("load",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.imageLoadedInView())})("mousedown",function(n){e.CHM(i);const r=e.oxw();return e.KtG(r.startMove(n,r.moveTypes.Drag))})("touchstart",function(n){e.CHM(i);const r=e.oxw();return e.KtG(r.startMove(n,r.moveTypes.Drag))})("error",function(n){e.CHM(i);const r=e.oxw();return e.KtG(r.loadImageError(n))}),e.qZA()}if(2&o){const i=s.ngIf,t=e.oxw();e.Udp("visibility",t.imageVisible?"visible":"hidden")("transform",t.safeTransformStyle),e.ekj("ngx-ic-draggable",!t.disabled&&t.allowMoveImage),e.Q6J("src",i,e.LSH),e.uIk("alt",t.imageAltText)}}function gn(o,s){if(1&o){const i=e.EpF();e.ynx(0),e.TgZ(1,"span",9),e.NdJ("mousedown",function(n){e.CHM(i);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"topleft"))})("touchstart",function(n){e.CHM(i);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"topleft"))}),e._UZ(2,"span",10),e.qZA(),e.TgZ(3,"span",11),e._UZ(4,"span",10),e.qZA(),e.TgZ(5,"span",12),e.NdJ("mousedown",function(n){e.CHM(i);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"topright"))})("touchstart",function(n){e.CHM(i);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"topright"))}),e._UZ(6,"span",10),e.qZA(),e.TgZ(7,"span",13),e._UZ(8,"span",10),e.qZA(),e.TgZ(9,"span",14),e.NdJ("mousedown",function(n){e.CHM(i);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"bottomright"))})("touchstart",function(n){e.CHM(i);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"bottomright"))}),e._UZ(10,"span",10),e.qZA(),e.TgZ(11,"span",15),e._UZ(12,"span",10),e.qZA(),e.TgZ(13,"span",16),e.NdJ("mousedown",function(n){e.CHM(i);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"bottomleft"))})("touchstart",function(n){e.CHM(i);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"bottomleft"))}),e._UZ(14,"span",10),e.qZA(),e.TgZ(15,"span",17),e._UZ(16,"span",10),e.qZA(),e.TgZ(17,"span",18),e.NdJ("mousedown",function(n){e.CHM(i);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"top"))})("touchstart",function(n){e.CHM(i);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"top"))}),e.qZA(),e.TgZ(18,"span",19),e.NdJ("mousedown",function(n){e.CHM(i);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"right"))})("touchstart",function(n){e.CHM(i);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"right"))}),e.qZA(),e.TgZ(19,"span",20),e.NdJ("mousedown",function(n){e.CHM(i);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"bottom"))})("touchstart",function(n){e.CHM(i);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"bottom"))}),e.qZA(),e.TgZ(20,"span",21),e.NdJ("mousedown",function(n){e.CHM(i);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"left"))})("touchstart",function(n){e.CHM(i);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"left"))}),e.qZA(),e.BQk()}}function _n(o,s){if(1&o){const i=e.EpF();e.TgZ(0,"div",6),e.NdJ("keydown",function(n){e.CHM(i);const r=e.oxw();return e.KtG(r.keyboardAccess(n))}),e.TgZ(1,"div",7),e.NdJ("mousedown",function(n){e.CHM(i);const r=e.oxw();return e.KtG(r.startMove(n,r.moveTypes.Move))})("touchstart",function(n){e.CHM(i);const r=e.oxw();return e.KtG(r.startMove(n,r.moveTypes.Move))}),e.qZA(),e.YNc(2,gn,21,0,"ng-container",8),e.qZA()}if(2&o){const i=e.oxw();e.Udp("top",i.state.cropper.y1,"px")("left",i.state.cropper.x1,"px")("width",i.state.cropper.x2-i.state.cropper.x1,"px")("height",i.state.cropper.y2-i.state.cropper.y1,"px")("margin-left","center"===i.state.options.alignImage?i.marginLeft:null)("visibility",i.imageVisible?"visible":"hidden"),e.ekj("ngx-ic-round",i.state.options.roundCropper),e.uIk("aria-label",i.state.options.cropperFrameAriaLabel),e.xp6(2),e.Q6J("ngIf",!(i.state.options.hideResizeSquares||i.state.options.cropperStaticWidth&&i.state.options.cropperStaticHeight))}}function Ye(o,s,i){return o=function Ht(o,s){let i=o.x2-o.x1,t=o.y2-o.y1;const n=o.x1+i/2,r=o.y1+t/2;s.options.cropperStaticHeight&&s.options.cropperStaticWidth?(i=s.maxSize.width>s.options.cropperStaticWidth?s.options.cropperStaticWidth:s.maxSize.width,t=s.maxSize.height>s.options.cropperStaticHeight?s.options.cropperStaticHeight:s.maxSize.height):(i=Math.max(s.cropperScaledMinWidth,Math.min(i,s.cropperScaledMaxWidth,s.maxSize.width)),t=Math.max(s.cropperScaledMinHeight,Math.min(t,s.cropperScaledMaxHeight,s.maxSize.height)),s.options.maintainAspectRatio&&(s.maxSize.width/s.options.aspectRatio<s.maxSize.height?t=i/s.options.aspectRatio:i=t*s.options.aspectRatio));const a=n-i/2,u=r-t/2;return{x1:a,x2:a+i,y1:u,y2:u+t}}(o,s),We(o,s,i)}function We(o,s,i=!1){return o.x1<0&&(o=(0,C.Z)((0,C.Z)({},o),{},{x1:0,x2:o.x2-(i?o.x1:0)})),o.y1<0&&(o=(0,C.Z)((0,C.Z)({},o),{},{y2:o.y2-(i?o.y1:0),y1:0})),o.x2>s.maxSize.width&&(o=(0,C.Z)((0,C.Z)({},o),{},{x1:o.x1-(i?o.x2-s.maxSize.width:0),x2:s.maxSize.width})),o.y2>s.maxSize.height&&(o=(0,C.Z)((0,C.Z)({},o),{},{y1:o.y1-(i?o.y2-s.maxSize.height:0),y2:s.maxSize.height})),o}function Ke(o,s,i){const t=(0,C.Z)({},i.cropper),n=rt(o)-s.clientX,r=at(o)-s.clientY;switch(s.position){case"left":t.x1=Math.min(Math.max(s.cropper.x1+n,t.x2-i.cropperScaledMaxWidth),t.x2-i.cropperScaledMinWidth);break;case"topleft":t.x1=Math.min(Math.max(s.cropper.x1+n,t.x2-i.cropperScaledMaxWidth),t.x2-i.cropperScaledMinWidth),t.y1=Math.min(Math.max(s.cropper.y1+r,t.y2-i.cropperScaledMaxHeight),t.y2-i.cropperScaledMinHeight);break;case"top":t.y1=Math.min(Math.max(s.cropper.y1+r,t.y2-i.cropperScaledMaxHeight),t.y2-i.cropperScaledMinHeight);break;case"topright":t.x2=Math.max(Math.min(s.cropper.x2+n,t.x1+i.cropperScaledMaxWidth),t.x1+i.cropperScaledMinWidth),t.y1=Math.min(Math.max(s.cropper.y1+r,t.y2-i.cropperScaledMaxHeight),t.y2-i.cropperScaledMinHeight);break;case"right":t.x2=Math.max(Math.min(s.cropper.x2+n,t.x1+i.cropperScaledMaxWidth),t.x1+i.cropperScaledMinWidth);break;case"bottomright":t.x2=Math.max(Math.min(s.cropper.x2+n,t.x1+i.cropperScaledMaxWidth),t.x1+i.cropperScaledMinWidth),t.y2=Math.max(Math.min(s.cropper.y2+r,t.y1+i.cropperScaledMaxHeight),t.y1+i.cropperScaledMinHeight);break;case"bottom":t.y2=Math.max(Math.min(s.cropper.y2+r,t.y1+i.cropperScaledMaxHeight),t.y1+i.cropperScaledMinHeight);break;case"bottomleft":t.x1=Math.min(Math.max(s.cropper.x1+n,t.x2-i.cropperScaledMaxWidth),t.x2-i.cropperScaledMinWidth),t.y2=Math.max(Math.min(s.cropper.y2+r,t.y1+i.cropperScaledMaxHeight),t.y1+i.cropperScaledMinHeight);break;case"center":const a="scale"in o?o.scale:1,c=Math.min(Math.max(i.cropperScaledMinWidth,Math.abs(s.cropper.x2-s.cropper.x1)*a),i.cropperScaledMaxWidth),u=Math.min(Math.max(i.cropperScaledMinHeight,Math.abs(s.cropper.y2-s.cropper.y1)*a),i.cropperScaledMaxHeight);t.x1=s.clientX-c/2,t.x2=s.clientX+c/2,t.y1=s.clientY-u/2,t.y2=s.clientY+u/2,t.x1<0?(t.x2-=t.x1,t.x1=0):t.x2>i.maxSize.width&&(t.x1-=t.x2-i.maxSize.width,t.x2=i.maxSize.width),t.y1<0?(t.y2-=t.y1,t.y1=0):t.y2>i.maxSize.height&&(t.y1-=t.y2-i.maxSize.height,t.y2=i.maxSize.height)}return i.options.maintainAspectRatio?function ht(o,s,i){s=(0,C.Z)({},s);let t=0,n=0;switch(o){case"top":s.x2=s.x1+(s.y2-s.y1)*i.options.aspectRatio,t=Math.max(s.x2-i.maxSize.width,0),n=Math.max(0-s.y1,0),(t>0||n>0)&&(s.x2-=n*i.options.aspectRatio>t?n*i.options.aspectRatio:t,s.y1+=n*i.options.aspectRatio>t?n:t/i.options.aspectRatio);break;case"bottom":s.x2=s.x1+(s.y2-s.y1)*i.options.aspectRatio,t=Math.max(s.x2-i.maxSize.width,0),n=Math.max(s.y2-i.maxSize.height,0),(t>0||n>0)&&(s.x2-=n*i.options.aspectRatio>t?n*i.options.aspectRatio:t,s.y2-=n*i.options.aspectRatio>t?n:t/i.options.aspectRatio);break;case"topleft":s.y1=s.y2-(s.x2-s.x1)/i.options.aspectRatio,t=Math.max(0-s.x1,0),n=Math.max(0-s.y1,0),(t>0||n>0)&&(s.x1+=n*i.options.aspectRatio>t?n*i.options.aspectRatio:t,s.y1+=n*i.options.aspectRatio>t?n:t/i.options.aspectRatio);break;case"topright":s.y1=s.y2-(s.x2-s.x1)/i.options.aspectRatio,t=Math.max(s.x2-i.maxSize.width,0),n=Math.max(0-s.y1,0),(t>0||n>0)&&(s.x2-=n*i.options.aspectRatio>t?n*i.options.aspectRatio:t,s.y1+=n*i.options.aspectRatio>t?n:t/i.options.aspectRatio);break;case"right":case"bottomright":s.y2=s.y1+(s.x2-s.x1)/i.options.aspectRatio,t=Math.max(s.x2-i.maxSize.width,0),n=Math.max(s.y2-i.maxSize.height,0),(t>0||n>0)&&(s.x2-=n*i.options.aspectRatio>t?n*i.options.aspectRatio:t,s.y2-=n*i.options.aspectRatio>t?n:t/i.options.aspectRatio);break;case"left":case"bottomleft":s.y2=s.y1+(s.x2-s.x1)/i.options.aspectRatio,t=Math.max(0-s.x1,0),n=Math.max(s.y2-i.maxSize.height,0),(t>0||n>0)&&(s.x1+=n*i.options.aspectRatio>t?n*i.options.aspectRatio:t,s.y2-=n*i.options.aspectRatio>t?n:t/i.options.aspectRatio);break;case"center":s.x2=s.x1+(s.y2-s.y1)*i.options.aspectRatio,s.y2=s.y1+(s.x2-s.x1)/i.options.aspectRatio;const r=Math.max(0-s.x1,0),a=Math.max(s.x2-i.maxSize.width,0),c=Math.max(s.y2-i.maxSize.height,0),u=Math.max(0-s.y1,0);(r>0||a>0||c>0||u>0)&&(s.x1+=c*i.options.aspectRatio>r?c*i.options.aspectRatio:r,s.x2-=u*i.options.aspectRatio>a?u*i.options.aspectRatio:a,s.y1+=u*i.options.aspectRatio>a?u:a/i.options.aspectRatio,s.y2-=c*i.options.aspectRatio>r?c:r/i.options.aspectRatio)}return s}(s.position,t,i):t}function rt(o){return"touches"in o&&o.touches[0]?o.touches[0].clientX:"clientX"in o?o.clientX:0}function at(o){return"touches"in o&&o.touches[0]?o.touches[0].clientY:"clientX"in o?o.clientY:0}class hn{constructor(){this.options={format:"png",output:"blob",autoCrop:!0,maintainAspectRatio:!0,aspectRatio:1,resetCropOnAspectRatioChange:!0,resizeToWidth:0,resizeToHeight:0,cropperMinWidth:0,cropperMinHeight:0,cropperMaxHeight:0,cropperMaxWidth:0,cropperStaticWidth:0,cropperStaticHeight:0,canvasRotation:0,roundCropper:!1,onlyScaleDown:!1,imageQuality:92,backgroundColor:null,containWithinAspectRatio:!1,hideResizeSquares:!1,alignImage:"center",cropperFrameAriaLabel:void 0,checkImageType:!0},this.cropper={x1:0,x2:0,y1:0,y2:0},this.transform={},this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.cropperScaledMaxWidth=20,this.cropperScaledMaxHeight=20,this.stepSize=3}setOptionsFromChanges(s){var i;null!==(i=s.options)&&void 0!==i&&i.currentValue&&this.setOptions(s.options.currentValue);const t=Object.entries(s).filter(([n])=>n in this.options).reduce((n,[r,a])=>(0,C.Z)((0,C.Z)({},n),{},{[r]:a.currentValue}),{});Object.keys(t).length>0&&this.setOptions(t)}setOptions(s){var i;if(this.options=(0,C.Z)((0,C.Z)({},this.options),s||{}),this.validateOptions(),null===(i=this.loadedImage)||void 0===i||!i.transformed.image.complete||!this.maxSize)return;let t=!1;this.options.maintainAspectRatio&&s.aspectRatio||s.maintainAspectRatio?(this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.options.maintainAspectRatio&&(this.options.resetCropOnAspectRatioChange||!this.aspectRatioIsCorrect())&&(this.cropper=this.maxSizeCropperPosition(),t=!0)):((s.cropperMinWidth||s.cropperMinHeight)&&(this.setCropperScaledMinSize(),t=!0),(s.cropperMaxWidth||s.cropperMaxHeight)&&(this.setCropperScaledMaxSize(),t=!0),(s.cropperStaticWidth||s.cropperStaticHeight)&&(t=!0)),t&&(this.cropper=Ye(this.cropper,this,!1))}validateOptions(){if(this.options.maintainAspectRatio&&!this.options.aspectRatio)throw new Error("`aspectRatio` should > 0 when `maintainAspectRatio` is enabled")}setMaxSize(s,i){this.maxSize={width:s,height:i},this.setCropperScaledMinSize(),this.setCropperScaledMaxSize()}setCropperScaledMinSize(){var s;null!==(s=this.loadedImage)&&void 0!==s&&s.transformed.size?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20)}setCropperScaledMinWidth(){this.cropperScaledMinWidth=this.options.cropperMinWidth>0?Math.max(20,this.options.cropperMinWidth/this.loadedImage.transformed.size.width*this.maxSize.width):20}setCropperScaledMinHeight(){this.cropperScaledMinHeight=this.options.maintainAspectRatio?Math.max(20,this.cropperScaledMinWidth/this.options.aspectRatio):this.options.cropperMinHeight>0?Math.max(20,this.options.cropperMinHeight/this.loadedImage.transformed.size.height*this.maxSize.height):20}setCropperScaledMaxSize(){var s;if(null!==(s=this.loadedImage)&&void 0!==s&&s.transformed.size){const i=this.loadedImage.transformed.size.width/this.maxSize.width;this.cropperScaledMaxWidth=this.options.cropperMaxWidth>20?this.options.cropperMaxWidth/i:this.maxSize.width,this.cropperScaledMaxHeight=this.options.cropperMaxHeight>20?this.options.cropperMaxHeight/i:this.maxSize.height,this.options.maintainAspectRatio&&(this.cropperScaledMaxWidth>this.cropperScaledMaxHeight*this.options.aspectRatio?this.cropperScaledMaxWidth=this.cropperScaledMaxHeight*this.options.aspectRatio:this.cropperScaledMaxWidth<this.cropperScaledMaxHeight*this.options.aspectRatio&&(this.cropperScaledMaxHeight=this.cropperScaledMaxWidth/this.options.aspectRatio))}else this.cropperScaledMaxWidth=this.maxSize.width,this.cropperScaledMaxHeight=this.maxSize.height}equalsCropperPosition(s){return null==this.cropper&&null==s||null!=this.cropper&&null!=s&&this.cropper.x1.toFixed(3)===s.x1.toFixed(3)&&this.cropper.y1.toFixed(3)===s.y1.toFixed(3)&&this.cropper.x2.toFixed(3)===s.x2.toFixed(3)&&this.cropper.y2.toFixed(3)===s.y2.toFixed(3)}equalsTransformTranslate(s){var i,t,n,r;return(null!==(i=this.transform.translateH)&&void 0!==i?i:0)===(null!==(t=s.translateH)&&void 0!==t?t:0)&&(null!==(n=this.transform.translateV)&&void 0!==n?n:0)===(null!==(r=s.translateV)&&void 0!==r?r:0)}equalsTransform(s){var i,t,n,r,a,c,u,_;return this.equalsTransformTranslate(s)&&(null!==(i=this.transform.scale)&&void 0!==i?i:1)===(null!==(t=s.scale)&&void 0!==t?t:1)&&(null!==(n=this.transform.rotate)&&void 0!==n?n:0)===(null!==(r=s.rotate)&&void 0!==r?r:0)&&(null!==(a=this.transform.flipH)&&void 0!==a&&a)===(null!==(c=s.flipH)&&void 0!==c&&c)&&(null!==(u=this.transform.flipV)&&void 0!==u&&u)===(null!==(_=s.flipV)&&void 0!==_&&_)}aspectRatioIsCorrect(){return(this.cropper.x2-this.cropper.x1)/(this.cropper.y2-this.cropper.y1)===this.options.aspectRatio}resizeCropperPosition(s){this.cropper&&(s.width!==this.maxSize.width||s.height!==this.maxSize.height)&&(this.cropper={x1:this.cropper.x1*this.maxSize.width/s.width,x2:this.cropper.x2*this.maxSize.width/s.width,y1:this.cropper.y1*this.maxSize.height/s.height,y2:this.cropper.y2*this.maxSize.height/s.height})}maxSizeCropperPosition(){return{x1:0,y1:0,x2:this.maxSize.width,y2:this.maxSize.height}}}var j=function(o){return o.Drag="drag",o.Move="move",o.Resize="resize",o.Pinch="pinch",o}(j||{});function $e(o,s){return o/100*s}class vn{crop(s,i){const t=this.getImagePosition(s),n=t.x2-t.x1,r=t.y2-t.y1,a=document.createElement("canvas");a.width=n,a.height=r;const c=a.getContext("2d");if(!c)return null;null!=s.options.backgroundColor&&(c.fillStyle=s.options.backgroundColor,c.fillRect(0,0,n,r));const u=(s.transform.scale||1)*(s.transform.flipH?-1:1),_=(s.transform.scale||1)*(s.transform.flipV?-1:1),{translateH:M,translateV:E}=this.getCanvasTranslate(s),Z=s.loadedImage.transformed;c.setTransform(u,0,0,_,Z.size.width/2+M,Z.size.height/2+E),c.translate(-t.x1/u,-t.y1/_),c.rotate((s.transform.rotate||0)*Math.PI/180),c.drawImage(Z.image,-Z.size.width/2,-Z.size.height/2);const P={width:n,height:r,imagePosition:t,cropperPosition:(0,C.Z)({},s.cropper)};s.options.containWithinAspectRatio&&(P.offsetImagePosition=this.getOffsetImagePosition(s));const z=this.getResizeRatio(n,r,s.options);return 1!==z&&(P.width=Math.round(n*z),P.height=s.options.maintainAspectRatio?Math.round(P.width/s.options.aspectRatio):Math.round(r*z),function fn(o,s,i){const t=o.width,n=o.height,r=t/(s=Math.round(s)),a=n/(i=Math.round(i)),c=Math.ceil(r/2),u=Math.ceil(a/2),_=o.getContext("2d");if(_){const M=_.getImageData(0,0,t,n),E=_.createImageData(s,i),Z=M.data,P=E.data;for(let z=0;z<i;z++)for(let Ue=0;Ue<s;Ue++){const k=4*(Ue+z*s),Yn=z*a;let ve=0,Je=0,It=0,Hi=0,Ji=0,Qi=0,Bi=0;const Xl=Math.floor(Ue*r),ec=Math.floor(z*a);let Wn=Math.ceil((Ue+1)*r),Kn=Math.ceil((z+1)*a);Wn=Math.min(Wn,t),Kn=Math.min(Kn,n);for(let ln=ec;ln<Kn;ln++){const Vi=Math.abs(Yn-ln)/u,tc=Ue*r,nc=Vi*Vi;for(let cn=Xl;cn<Wn;cn++){const Gi=Math.abs(tc-cn)/c,gt=Math.sqrt(nc+Gi*Gi);if(gt>=1)continue;ve=2*gt*gt*gt-3*gt*gt+1;const _t=4*(cn+ln*t);Bi+=ve*Z[_t+3],It+=ve,Z[_t+3]<255&&(ve=ve*Z[_t+3]/250),Hi+=ve*Z[_t],Ji+=ve*Z[_t+1],Qi+=ve*Z[_t+2],Je+=ve}}P[k]=Hi/Je,P[k+1]=Ji/Je,P[k+2]=Qi/Je,P[k+3]=Bi/It}o.width=s,o.height=i,_.putImageData(E,0,0)}}(a,P.width,P.height)),"blob"===i?this.cropToBlob(P,a,s):(P.base64=a.toDataURL("image/"+s.options.format,this.getQuality(s.options)),P)}cropToBlob(s,i,t){var n=this;return(0,b.Z)(function*(){return s.blob=yield new Promise(r=>i.toBlob(r,"image/"+t.options.format,n.getQuality(t.options))),s.blob&&(s.objectUrl=URL.createObjectURL(s.blob)),s})()}getCanvasTranslate(s){if("px"===s.transform.translateUnit){const i=this.getRatio(s);return{translateH:(s.transform.translateH||0)*i,translateV:(s.transform.translateV||0)*i}}return{translateH:s.transform.translateH?$e(s.transform.translateH,s.loadedImage.transformed.size.width):0,translateV:s.transform.translateV?$e(s.transform.translateV,s.loadedImage.transformed.size.height):0}}getRatio(s){return s.loadedImage.transformed.size.width/s.maxSize.width}getImagePosition(s){const i=this.getRatio(s),t={x1:Math.round(s.cropper.x1*i),y1:Math.round(s.cropper.y1*i),x2:Math.round(s.cropper.x2*i),y2:Math.round(s.cropper.y2*i)};return s.options.containWithinAspectRatio||(t.x1=Math.max(t.x1,0),t.y1=Math.max(t.y1,0),t.x2=Math.min(t.x2,s.loadedImage.transformed.size.width),t.y2=Math.min(t.y2,s.loadedImage.transformed.size.height)),t}getOffsetImagePosition(s){const i=s.options.canvasRotation+s.loadedImage.exifTransform.rotate,t=this.getRatio(s);let n,r;i%2?(n=(s.loadedImage.transformed.size.width-s.loadedImage.original.size.height)/2,r=(s.loadedImage.transformed.size.height-s.loadedImage.original.size.width)/2):(n=(s.loadedImage.transformed.size.width-s.loadedImage.original.size.width)/2,r=(s.loadedImage.transformed.size.height-s.loadedImage.original.size.height)/2);const a={x1:Math.round(s.cropper.x1*t)-n,y1:Math.round(s.cropper.y1*t)-r,x2:Math.round(s.cropper.x2*t)-n,y2:Math.round(s.cropper.y2*t)-r};return s.options.containWithinAspectRatio||(a.x1=Math.max(a.x1,0),a.y1=Math.max(a.y1,0),a.x2=Math.min(a.x2,s.loadedImage.transformed.size.width),a.y2=Math.min(a.y2,s.loadedImage.transformed.size.height)),a}getResizeRatio(s,i,t){const n=t.resizeToWidth/s,r=t.resizeToHeight/i,a=new Array;t.resizeToWidth>0&&a.push(n),t.resizeToHeight>0&&a.push(r);const c=0===a.length?1:Math.min(...a);return c>1&&!t.onlyScaleDown?c:Math.min(c,1)}getQuality(s){return Math.min(1,Math.max(0,s.imageQuality/100))}}class xn{constructor(){this.autoRotateSupported=function Qt(){return new Promise(o=>{const s=new Image;s.onload=()=>{o(1===s.width&&2===s.height)},s.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q=="})}()}loadImageFile(s,i){var t=this;return(0,b.Z)(function*(){const n=yield s.arrayBuffer();return i.options.checkImageType?yield t.checkImageTypeAndLoadImageFromArrayBuffer(n,s.type,i):yield t.loadImageFromArrayBuffer(n,i)})()}checkImageTypeAndLoadImageFromArrayBuffer(s,i,t){return this.isValidImageType(i)?this.loadImageFromArrayBuffer(s,t,i):Promise.reject(new Error("Invalid image type"))}isValidImageType(s){return/image\/(png|jpg|jpeg|heic|bmp|gif|tiff|svg|webp|x-icon|vnd.microsoft.icon)/.test(s)}loadImageFromURL(s,i){var t=this;return(0,b.Z)(function*(){const r=yield(yield fetch(s)).blob(),a=yield r.arrayBuffer();return yield t.loadImageFromArrayBuffer(a,i,r.type)})()}loadBase64Image(s,i){const t=this.base64ToArrayBuffer(s);return this.loadImageFromArrayBuffer(t,i)}base64ToArrayBuffer(s){s=s.replace(/^data:([^;]+);base64,/gim,"");const i=atob(s),t=i.length,n=new Uint8Array(t);for(let r=0;r<t;r++)n[r]=i.charCodeAt(r);return n.buffer}loadImageFromArrayBuffer(s,i,t){var n=this;return(0,b.Z)(function*(){const r=yield new Promise(function(){var a=(0,b.Z)(function*(c,u){try{const _=new Blob([s],t?{type:t}:void 0),M=URL.createObjectURL(_),E=new Image,P="image/svg+xml"===t?yield n.getSvgImageSize(_):void 0;E.onload=()=>c({originalImage:E,originalImageSize:P,originalObjectUrl:M,originalArrayBuffer:s}),E.onerror=u,E.src=M}catch(_){u(_)}});return function(c,u){return a.apply(this,arguments)}}());return yield n.transformImageFromArrayBuffer(r,i,null!=r.originalImageSize)})()}getSvgImageSize(s){return(0,b.Z)(function*(){const n=(new DOMParser).parseFromString(yield s.text(),"image/svg+xml").querySelector("svg");if(!n)throw Error("Failed to parse SVG image");const r=n.getAttribute("width"),a=n.getAttribute("height");if(r&&a)return null;const c=n.getAttribute("viewBox")||n.getAttribute("viewbox");if(c){const u=c.split(" ");return{width:+u[2],height:+u[3]}}throw Error("Failed to load SVG image. SVG must have width + height or viewBox definition.")})()}transformImageFromArrayBuffer(s,i,t=!1){var n=this;return(0,b.Z)(function*(){var r;const c=function Bt(o){switch("object"==typeof o&&(o=function ft(o){const s=new DataView(o);if(65496!==s.getUint16(0,!1))return-2;const i=s.byteLength;let t=2;for(;t<i;){if(s.getUint16(t+2,!1)<=8)return-1;const n=s.getUint16(t,!1);if(t+=2,65505==n){if(1165519206!==s.getUint32(t+=2,!1))return-1;const r=18761==s.getUint16(t+=6,!1);t+=s.getUint32(t+4,r);const a=s.getUint16(t,r);t+=2;for(let c=0;c<a;c++)if(274==s.getUint16(t+12*c,r))return s.getUint16(t+12*c+8,r)}else{if(65280!=(65280&n))break;t+=s.getUint16(t,!1)}}return-1}(o)),o){case 2:return{rotate:0,flip:!0};case 3:return{rotate:2,flip:!1};case 4:return{rotate:2,flip:!0};case 5:return{rotate:1,flip:!0};case 6:return{rotate:1,flip:!1};case 7:return{rotate:3,flip:!0};case 8:return{rotate:3,flip:!1};default:return{rotate:0,flip:!1}}}((yield n.autoRotateSupported)?-1:s.originalArrayBuffer);if(!s.originalImage||!s.originalImage.complete)return Promise.reject(new Error("No image loaded"));const u={original:{objectUrl:s.originalObjectUrl,image:s.originalImage,size:null!==(r=s.originalImageSize)&&void 0!==r?r:{width:s.originalImage.naturalWidth,height:s.originalImage.naturalHeight}},exifTransform:c};return n.transformLoadedImage(u,i,t)})()}transformLoadedImage(s,i,t=!1){var n=this;return(0,b.Z)(function*(){const r=i.options.canvasRotation+s.exifTransform.rotate,a=s.original.size;if(!t&&0===r&&!s.exifTransform.flip&&!i.options.containWithinAspectRatio)return{original:{objectUrl:s.original.objectUrl,image:s.original.image,size:(0,C.Z)({},a)},transformed:{objectUrl:s.original.objectUrl,image:s.original.image,size:(0,C.Z)({},a)},exifTransform:s.exifTransform};const c=n.getTransformedSize(a,s.exifTransform,i),u=document.createElement("canvas");u.width=c.width,u.height=c.height;const _=u.getContext("2d");null==_||_.setTransform(s.exifTransform.flip?-1:1,0,0,1,u.width/2,u.height/2),null==_||_.rotate(Math.PI*(r/2)),null==_||_.drawImage(s.original.image,-a.width/2,-a.height/2);const M=yield new Promise(P=>u.toBlob(P,i.options.format));if(!M)throw new Error("Failed to get Blob for transformed image.");const E=URL.createObjectURL(M),Z=yield n.loadImageFromObjectUrl(E);return{original:{objectUrl:s.original.objectUrl,image:s.original.image,size:(0,C.Z)({},a)},transformed:{objectUrl:E,image:Z,size:{width:Z.width,height:Z.height}},exifTransform:s.exifTransform}})()}loadImageFromObjectUrl(s){return new Promise((i,t)=>{const n=new Image;n.onload=()=>i(n),n.onerror=t,n.src=s})}getTransformedSize(s,i,t){const n=t.options.canvasRotation+i.rotate;if(t.options.containWithinAspectRatio){if(n%2){const a=s.height/t.options.aspectRatio;return{width:Math.max(s.height,s.width*t.options.aspectRatio),height:Math.max(s.width,a)}}{const a=s.width/t.options.aspectRatio;return{width:Math.max(s.width,s.height*t.options.aspectRatio),height:Math.max(s.height,a)}}}return n%2?{height:s.width,width:s.height}:{width:s.width,height:s.height}}}let Gt=(()=>{var o;class s{get alignImageStyle(){return this.state.options.alignImage}constructor(t,n,r){this.sanitizer=t,this.cd=n,this.zone=r,this.pinchStart$=new O.x,this.cropService=new vn,this.loadImageService=new xn,this.setImageMaxSizeRetries=0,this.resizedWhileHidden=!1,this.moveTypes=j,this.state=new hn,this.safeImgDataUrl=(0,e.tdS)(void 0),this.marginLeft="0px",this.imageVisible=!1,this.allowMoveImage=!1,this.checkImageType=!0,this.disabled=!1,this.hidden=!1,this.imageCropped=new e.vpe,this.startCropImage=new e.vpe,this.imageLoaded=new e.vpe,this.cropperReady=new e.vpe,this.loadImageFailed=new e.vpe,this.transformChange=new e.vpe,this.cropperChange=new e.vpe,this.reset()}ngOnInit(){this.state.stepSize=this.initialStepSize||this.state.stepSize}ngOnChanges(t){var n;const r=this.state.cropper,a=this.state.transform,c=this.state.options.backgroundColor;if(this.state.setOptionsFromChanges(t),this.onChangesInputImage(t),t.transform&&this.transform&&(this.state.transform=this.transform,this.setCssTransform()),null===(n=this.state.loadedImage)||void 0===n||!n.transformed.image.complete||!this.state.maxSize)return;if(this.containWithinAspectRatio&&t.aspectRatio||t.containWithinAspectRatio||t.canvasRotation)return void this.loadImageService.transformLoadedImage(this.state.loadedImage,this.state).then(_=>this.setLoadedImage(_)).catch(_=>this.loadImageError(_));t.cropper&&this.cropper&&(this.state.cropper=Ye(this.cropper,this.state,!0));const u=!this.state.equalsCropperPosition(r);u&&(!this.cropper||!this.state.equalsCropperPosition(this.cropper))&&this.cropperChange.emit(this.state.cropper),(u||!this.state.equalsTransform(a)||this.state.options.backgroundColor!==c)&&this.doAutoCrop(),t.hidden&&this.resizedWhileHidden&&!this.hidden&&setTimeout(()=>{this.onResize(),this.resizedWhileHidden=!1})}onChangesInputImage(t){(t.imageChangedEvent||t.imageURL||t.imageBase64||t.imageFile)&&this.reset(),t.imageChangedEvent&&this.isValidImageChangedEvent()&&this.loadImageFile(this.imageChangedEvent.target.files[0]),t.imageURL&&this.imageURL&&this.loadImageFromURL(this.imageURL),t.imageBase64&&this.imageBase64&&this.loadBase64Image(this.imageBase64),t.imageFile&&this.imageFile&&this.loadImageFile(this.imageFile)}isValidImageChangedEvent(){var t;const n=null===(t=this.imageChangedEvent)||void 0===t||null===(t=t.target)||void 0===t?void 0:t.files;return n instanceof FileList&&n.length>0}reset(){this.safeImgDataUrl.set("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="),this.state.loadedImage=void 0,this.state.maxSize=void 0,this.imageVisible=!1}loadImageFile(t){this.loadImageService.loadImageFile(t,this.state).then(n=>this.setLoadedImage(n)).catch(n=>this.loadImageError(n))}loadBase64Image(t){this.loadImageService.loadBase64Image(t,this.state).then(n=>this.setLoadedImage(n)).catch(n=>this.loadImageError(n))}loadImageFromURL(t){this.loadImageService.loadImageFromURL(t,this.state).then(n=>this.setLoadedImage(n)).catch(n=>this.loadImageError(n))}setLoadedImage(t){this.state.loadedImage=t,this.safeImgDataUrl.set(this.sanitizer.bypassSecurityTrustResourceUrl(t.transformed.objectUrl))}loadImageError(t){console.error(t),this.loadImageFailed.emit()}setCssTransform(){var t;const n=(null===(t=this.state.transform)||void 0===t?void 0:t.translateUnit)||"%";this.safeTransformStyle=this.sanitizer.bypassSecurityTrustStyle("translate(".concat(this.state.transform.translateH||0).concat(n,", ").concat(this.state.transform.translateV||0).concat(n,")")+" scaleX("+(this.state.transform.scale||1)*(this.state.transform.flipH?-1:1)+") scaleY("+(this.state.transform.scale||1)*(this.state.transform.flipV?-1:1)+") rotate("+(this.state.transform.rotate||0)+"deg)")}imageLoadedInView(){null!=this.state.loadedImage&&(this.imageLoaded.emit(this.state.loadedImage),this.setImageMaxSizeRetries=0,setTimeout(()=>this.checkImageMaxSizeRecursively()))}checkImageMaxSizeRecursively(){this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImageLoaded()?(this.setMaxSize(),!this.cropper||this.maintainAspectRatio&&!this.state.aspectRatioIsCorrect()?(this.state.cropper=Ye(this.state.maxSizeCropperPosition(),this.state,!0),this.cropperChange.emit(this.state.cropper)):(this.state.cropper=Ye(this.cropper,this.state,!0),this.emitCropperPositionChange(this.cropper)),this.imageVisible=!0,this.cropperReady.emit((0,C.Z)({},this.state.maxSize)),this.doAutoCrop(),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout(()=>this.checkImageMaxSizeRecursively(),50))}sourceImageLoaded(){var t;return(null===(t=this.sourceImage)||void 0===t||null===(t=t.nativeElement)||void 0===t?void 0:t.offsetWidth)>1}onResize(){if(this.state.loadedImage)if(this.hidden)this.resizedWhileHidden=!0;else{const t=(0,C.Z)({},this.state.maxSize);this.setMaxSize(),this.state.resizeCropperPosition(t),this.cd.markForCheck()}}keyboardAccess(t){this.changeKeyboardStepSize(t),this.keyboardMoveCropper(t)}changeKeyboardStepSize(t){const n=+t.key;n>=1&&n<=9&&(this.state.stepSize=n)}keyboardMoveCropper(t){if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key))return;const r=t.shiftKey?j.Resize:j.Move,a=t.altKey?function bn(o){switch(o){case"ArrowUp":return"bottom";case"ArrowRight":return"left";case"ArrowDown":return"top";default:return"right"}}(t.key):function Tn(o){switch(o){case"ArrowUp":return"top";case"ArrowRight":return"right";case"ArrowDown":return"bottom";default:return"left"}}(t.key),c=function Vt(o,s){switch(o){case"ArrowUp":return{clientX:0,clientY:-1*s};case"ArrowRight":return{clientX:s,clientY:0};case"ArrowDown":return{clientX:0,clientY:s};default:return{clientX:-1*s,clientY:0}}}(t.key,this.state.stepSize);t.preventDefault(),t.stopPropagation(),this.moveStart={active:!0,type:r,position:a,clientX:0,clientY:0,transform:this.state.transform,cropper:this.state.cropper},this.handleMouseMove(c),this.handleMouseUp()}startMove(t,n,r=null){var a,c;this.disabled||null!==(a=this.moveStart)&&void 0!==a&&a.active&&(null===(c=this.moveStart)||void 0===c?void 0:c.type)===j.Pinch||n===j.Drag&&!this.allowMoveImage||("preventDefault"in t&&t.preventDefault(),this.moveStart={active:!0,type:n,position:r,clientX:rt(t),clientY:at(t),transform:this.state.transform,cropper:this.state.cropper},this.initMouseMove())}initMouseMove(){(0,Ne.T)((0,be.R)(document,"mousemove"),(0,be.R)(document,"touchmove")).pipe((0,ie.R)((0,Ne.T)((0,be.R)(document,"mouseup"),(0,be.R)(document,"touchend"),this.pinchStart$).pipe((0,qt.P)()))).subscribe({next:t=>this.zone.run(()=>{this.handleMouseMove(t),this.cd.markForCheck()}),complete:()=>this.zone.run(()=>{this.handleMouseUp(),this.cd.markForCheck()})})}handleMouseMove(t){var n;if(null!==(n=this.moveStart)&&void 0!==n&&n.active)if("stopPropagation"in t&&t.stopPropagation(),"preventDefault"in t&&t.preventDefault(),this.moveStart.type===j.Move)this.state.cropper=We(function Jt(o,s){const i=rt(o)-s.clientX,t=at(o)-s.clientY;return{x1:s.cropper.x1+i,y1:s.cropper.y1+t,x2:s.cropper.x2+i,y2:s.cropper.y2+t}}(t,this.moveStart),this.state,!0);else if(this.moveStart.type===j.Resize)!this.cropperStaticWidth&&!this.cropperStaticHeight&&(this.state.cropper=We(Ke(t,this.moveStart,this.state),this.state,!1));else if(this.moveStart.type===j.Drag){var r,a;const c=rt(t)-this.moveStart.clientX,u=at(t)-this.moveStart.clientY;this.state.transform=(0,C.Z)((0,C.Z)({},this.state.transform),{},{translateH:((null===(r=this.moveStart.transform)||void 0===r?void 0:r.translateH)||0)+c,translateV:((null===(a=this.moveStart.transform)||void 0===a?void 0:a.translateV)||0)+u}),this.setCssTransform()}}handleMouseUp(){var t,n;null===(t=this.moveStart)||void 0===t||!t.active||(null===(n=this.moveStart)||void 0===n?void 0:n.type)===j.Pinch||((!this.state.equalsCropperPosition(this.moveStart.cropper)||this.moveStart.transform&&!this.state.equalsTransform(this.moveStart.transform))&&(this.moveStart.type===j.Drag?this.transformChange.emit(this.state.transform):this.cropperChange.emit(this.state.cropper),this.doAutoCrop()),this.moveStart=void 0)}startPinch(t){this.disabled||!this.sourceImageLoaded()||t.touches.length<2||("preventDefault"in t&&t.preventDefault(),this.moveStart={active:!0,type:j.Pinch,position:"center",clientX:this.state.cropper.x1+(this.state.cropper.x2-this.state.cropper.x1)/2,clientY:this.state.cropper.y1+(this.state.cropper.y2-this.state.cropper.y1)/2,cropper:this.state.cropper},this.initPinch())}initPinch(){this.pinchStart$.next(),(0,be.R)(document,"touchmove").pipe((0,ie.R)((0,be.R)(document,"touchend"))).subscribe({next:t=>this.zone.run(()=>{this.handlePinchMove(t),this.cd.markForCheck()}),complete:()=>this.zone.run(()=>{this.handlePinchStop(),this.cd.markForCheck()})})}handlePinchMove(t){var n;null!==(n=this.moveStart)&&void 0!==n&&n.active&&(t.preventDefault&&t.preventDefault(),this.moveStart.type===j.Pinch&&!this.cropperStaticWidth&&!this.cropperStaticHeight&&(this.state.cropper=We(Ke(t,this.moveStart,this.state),this.state,!1)),this.cd.markForCheck())}handlePinchStop(){var t;null!==(t=this.moveStart)&&void 0!==t&&t.active&&(this.state.equalsCropperPosition(this.moveStart.cropper)||(this.emitCropperPositionChange(this.moveStart.cropper),this.doAutoCrop()),this.moveStart=void 0)}setMaxSize(){if(this.sourceImage){const t=getComputedStyle(this.sourceImage.nativeElement);this.state.setMaxSize(parseFloat(t.width),parseFloat(t.height)),this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.state.maxSize.width/2+"px)")}}emitCropperPositionChange(t){this.state.equalsCropperPosition(t)||this.cropperChange.emit(this.state.cropper)}doAutoCrop(){this.state.options.autoCrop&&this.crop()}crop(t=this.state.options.output){var n;if(null!=(null===(n=this.state.loadedImage)||void 0===n||null===(n=n.transformed)||void 0===n?void 0:n.image)){if(this.startCropImage.emit(),"blob"===t)return this.cropToBlob();if("base64"===t)return this.cropToBase64()}return null}cropToBlob(){var t=this;return new Promise((n,r)=>this.zone.run((0,b.Z)(function*(){const a=yield t.cropService.crop(t.state,"blob");a?(t.imageCropped.emit(a),n(a)):r("Crop image failed")})))}cropToBase64(){const t=this.cropService.crop(this.state,"base64");return t?(this.imageCropped.emit(t),t):null}ngOnDestroy(){this.pinchStart$.complete()}}return(o=s).\u0275fac=function(t){return new(t||o)(e.Y36(oe.H7),e.Y36(e.sBO),e.Y36(e.R0b))},o.\u0275cmp=e.Xpm({type:o,selectors:[["image-cropper"]],viewQuery:function(t,n){if(1&t&&(e.Gf(pn,7),e.Gf(un,5)),2&t){let r;e.iGM(r=e.CRH())&&(n.wrapper=r.first),e.iGM(r=e.CRH())&&(n.sourceImage=r.first)}},hostVars:6,hostBindings:function(t,n){1&t&&e.NdJ("resize",function(){return n.onResize()},!1,e.Jf7),2&t&&(e.Udp("text-align",n.alignImageStyle),e.ekj("disabled",n.disabled)("ngx-ic-hidden",n.hidden))},inputs:{imageChangedEvent:"imageChangedEvent",imageURL:"imageURL",imageBase64:"imageBase64",imageFile:"imageFile",imageAltText:"imageAltText",options:"options",cropperFrameAriaLabel:"cropperFrameAriaLabel",output:"output",format:"format",autoCrop:"autoCrop",cropper:"cropper",transform:"transform",maintainAspectRatio:"maintainAspectRatio",aspectRatio:"aspectRatio",resetCropOnAspectRatioChange:"resetCropOnAspectRatioChange",resizeToWidth:"resizeToWidth",resizeToHeight:"resizeToHeight",cropperMinWidth:"cropperMinWidth",cropperMinHeight:"cropperMinHeight",cropperMaxHeight:"cropperMaxHeight",cropperMaxWidth:"cropperMaxWidth",cropperStaticWidth:"cropperStaticWidth",cropperStaticHeight:"cropperStaticHeight",canvasRotation:"canvasRotation",initialStepSize:"initialStepSize",roundCropper:"roundCropper",onlyScaleDown:"onlyScaleDown",imageQuality:"imageQuality",backgroundColor:"backgroundColor",containWithinAspectRatio:"containWithinAspectRatio",hideResizeSquares:"hideResizeSquares",allowMoveImage:"allowMoveImage",checkImageType:"checkImageType",alignImage:"alignImage",disabled:"disabled",hidden:"hidden"},outputs:{imageCropped:"imageCropped",startCropImage:"startCropImage",imageLoaded:"imageLoaded",cropperReady:"cropperReady",loadImageFailed:"loadImageFailed",transformChange:"transformChange",cropperChange:"cropperChange"},standalone:!0,features:[e.TTD,e.jDz],decls:4,vars:10,consts:[[3,"touchstart"],["class","ngx-ic-source-image","role","presentation",3,"src","visibility","transform","ngx-ic-draggable","load","mousedown","touchstart","error",4,"ngIf"],[1,"ngx-ic-overlay"],["class","ngx-ic-cropper","tabindex","0",3,"ngx-ic-round","top","left","width","height","margin-left","visibility","keydown",4,"ngIf"],["role","presentation",1,"ngx-ic-source-image",3,"src","load","mousedown","touchstart","error"],["sourceImage",""],["tabindex","0",1,"ngx-ic-cropper",3,"keydown"],["role","presentation",1,"ngx-ic-move",3,"mousedown","touchstart"],[4,"ngIf"],["role","presentation",1,"ngx-ic-resize","ngx-ic-topleft",3,"mousedown","touchstart"],[1,"ngx-ic-square"],[1,"ngx-ic-resize","ngx-ic-top"],["role","presentation",1,"ngx-ic-resize","ngx-ic-topright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-right"],["role","presentation",1,"ngx-ic-resize","ngx-ic-bottomright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-bottom"],["role","presentation",1,"ngx-ic-resize","ngx-ic-bottomleft",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-left"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-top",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-right",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-bottom",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-left",3,"mousedown","touchstart"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.NdJ("touchstart",function(a){return n.startPinch(a)}),e.YNc(1,mn,2,8,"img",1),e._UZ(2,"div",2),e.YNc(3,_n,3,16,"div",3),e.qZA()),2&t&&(e.Udp("background",n.imageVisible&&n.state.options.backgroundColor),e.xp6(),e.Q6J("ngIf",n.safeImgDataUrl()),e.xp6(),e.Udp("width",(null==n.state.maxSize?null:n.state.maxSize.width)||0,"px")("height",(null==n.state.maxSize?null:n.state.maxSize.height)||0,"px")("margin-left","center"===n.alignImage?n.marginLeft:null),e.xp6(),e.Q6J("ngIf",n.imageVisible))},dependencies:[f.O5],styles:['[_nghost-%COMP%]{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%;position:relative}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;transform-origin:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image.ngx-ic-draggable[_ngcontent-%COMP%]{user-drag:none;-webkit-user-drag:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;cursor:grab}[_nghost-%COMP%]   .ngx-ic-overlay[_ngcontent-%COMP%]{position:absolute;pointer-events:none;touch-action:none;outline:var(--cropper-overlay-color, white) solid 100vw;top:0;left:0}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{position:absolute;display:flex;color:#53535c;background:transparent;outline:rgba(255,255,255,.3) solid 100vw;outline:var(--cropper-outline-color, rgba(255, 255, 255, .3)) solid 100vw;touch-action:none}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{outline-width:100vh}}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:after{position:absolute;content:"";inset:0;pointer-events:none;border:dashed 1px;opacity:.75;color:inherit;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{width:100%;cursor:move;border:var(--cropper-move-border, 1px solid rgba(255, 255, 255, .5))}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:focus   .ngx-ic-move[_ngcontent-%COMP%]{border-color:#1e90ff;border-width:2px}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]   .ngx-ic-square[_ngcontent-%COMP%]{display:inline-block;background:#53535c;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topleft[_ngcontent-%COMP%]{top:-12px;left:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-top[_ngcontent-%COMP%]{top:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topright[_ngcontent-%COMP%]{top:-12px;right:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-right[_ngcontent-%COMP%]{top:calc(50% - 12px);right:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomright[_ngcontent-%COMP%]{bottom:-12px;right:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomleft[_ngcontent-%COMP%]{bottom:-12px;left:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-left[_ngcontent-%COMP%]{top:calc(50% - 12px);left:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%]{position:absolute;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-top[_ngcontent-%COMP%]{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-right[_ngcontent-%COMP%]{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-left[_ngcontent-%COMP%]{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]{outline-color:transparent}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{border-radius:100%;box-shadow:0 0 0 100vw #ffffff4d;box-shadow:0 0 0 100vw var(--cropper-outline-color, rgba(255, 255, 255, .3))}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{box-shadow:0 0 0 100vh #ffffff4d;box-shadow:0 0 0 100vh var(--cropper-outline-color, rgba(255, 255, 255, .3))}}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{border-radius:100%}.disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{display:none}.ngx-ic-hidden[_nghost-%COMP%]{display:none}'],changeDetection:0}),s})();var vt=g(9473),se=g(8366),ze=g(5290),qe=g(8316),Yt=g(7357);const Ct=["modal"];function yn(o,s){1&o&&(e.ynx(0),e._UZ(1,"app-loader",60),e.BQk())}function Wt(o,s){1&o&&(e.TgZ(0,"div",61),e._uU(1," Se non viene rispettato l'aspect ratio, l'immagine verr\xe0 tagliata per adattarsi alle dimensioni specificate! "),e.qZA())}const Mn=()=>({placement:"bottom-start"}),re=()=>({placement:"bottom"}),Kt=(o,s)=>({"btn-outline-warning-dark":o,"btn-warning-dark":s}),$t=()=>({placement:"bottom",hideOnClick:!1}),xt=o=>({"is-invalid":o}),Tt=()=>({hideOnClick:!1});function De(o,s){if(1&o){const i=e.EpF();e.ynx(0),e.TgZ(1,"div",7)(2,"image-cropper",8),e.NdJ("cropperReady",function(){e.CHM(i);const n=e.oxw(3);return e.KtG(n.cropperReadyEvent())})("imageLoaded",function(n){e.CHM(i);const r=e.oxw(3);return e.KtG(r.imageLoadedEvent(n))})("imageCropped",function(n){e.CHM(i);const r=e.oxw(3);return e.KtG(r.imageCroppedEvent(n))}),e.ALo(3,"uploadsreplace"),e.qZA()(),e.YNc(4,yn,2,0,"ng-container",4),e.TgZ(5,"div",9)(6,"div",10)(7,"button",11),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(3);return e.KtG(n.rotateLeft())}),e.TgZ(8,"div",12),e._uU(9,"rotate_left"),e.qZA()(),e.TgZ(10,"button",13),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(3);return e.KtG(n.rotateRight())}),e.TgZ(11,"div",12),e._uU(12,"rotate_right"),e.qZA()()(),e.TgZ(13,"div",14)(14,"button",15),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(3);return e.KtG(n.flipHorizontal())}),e.TgZ(15,"div",16),e._uU(16," height "),e.qZA()(),e.TgZ(17,"button",17),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(3);return e.KtG(n.flipVertical())}),e.TgZ(18,"div",12),e._uU(19,"height"),e.qZA()()(),e.TgZ(20,"div",14)(21,"button",18),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(3);return e.KtG(n.zoomIn())}),e.TgZ(22,"div",12),e._uU(23,"zoom_in"),e.qZA()(),e.TgZ(24,"button",19),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(3);return e.KtG(n.zoomOut())}),e.TgZ(25,"div",12),e._uU(26,"zoom_out"),e.qZA()()(),e.TgZ(27,"div",14)(28,"button",20),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(3);return e.KtG(n.translateUp())}),e.TgZ(29,"div",21),e._uU(30," arrow_circle_up "),e.qZA()(),e.TgZ(31,"button",22),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(3);return e.KtG(n.translateDown())}),e.TgZ(32,"div",21),e._uU(33," arrow_circle_down "),e.qZA()(),e.TgZ(34,"button",23),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(3);return e.KtG(n.translateLeft())}),e.TgZ(35,"div",21),e._uU(36," arrow_circle_left "),e.qZA()(),e.TgZ(37,"button",24),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(3);return e.KtG(n.translateRight())}),e.TgZ(38,"div",21),e._uU(39," arrow_circle_right "),e.qZA()()(),e.TgZ(40,"button",25,26),e.NdJ("click",function(){e.CHM(i);const n=e.MAs(41);return e.oxw(3).toggleMaintainAspectRatio(),e.KtG(n.blur())}),e.TgZ(42,"div",27),e._uU(43,"image_aspect_ratio"),e.qZA()(),e.TgZ(44,"button",28),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(3);return e.KtG(n.resetImage())}),e.TgZ(45,"div",12),e._uU(46,"restart_alt"),e.qZA()()(),e.TgZ(47,"div",29)(48,"div",30)(49,"div",31)(50,"div",32)(51,"label",33),e._uU(52,"Rotazione libera:"),e.qZA()(),e.TgZ(53,"input",34),e.NdJ("ngModelChange",function(n){e.CHM(i);const r=e.oxw(3);return e.KtG(r.rotationInput=n)})("ngModelChange",function(){e.CHM(i);const n=e.oxw(3);return e.KtG(n.updateRotation())}),e.qZA()(),e.TgZ(54,"div",35)(55,"div",32)(56,"label",36),e._uU(57,"Sposta "),e.TgZ(58,"span",37),e._uU(59,"orizz"),e.qZA(),e.TgZ(60,"span",38),e._uU(61,"orizzontalmente (px)"),e.qZA(),e._uU(62,":"),e.qZA(),e.TgZ(63,"label",39),e._uU(64,"Sposta "),e.TgZ(65,"span",37),e._uU(66,"vert"),e.qZA(),e.TgZ(67,"span",38),e._uU(68,"verticalmente (px)"),e.qZA(),e._uU(69,":"),e.qZA()(),e.TgZ(70,"div",40)(71,"input",41),e.NdJ("ngModelChange",function(n){e.CHM(i);const r=e.oxw(3);return e.KtG(r.translateH=n)})("ngModelChange",function(){e.CHM(i);const n=e.oxw(3);return e.KtG(n.updateTranslate())}),e.qZA(),e.TgZ(72,"input",42),e.NdJ("ngModelChange",function(n){e.CHM(i);const r=e.oxw(3);return e.KtG(r.translateV=n)})("ngModelChange",function(){e.CHM(i);const n=e.oxw(3);return e.KtG(n.updateTranslate())}),e.qZA()()()()(),e.TgZ(73,"fieldset",43)(74,"legend",44),e._uU(75," Modifica le dimensioni "),e.qZA(),e.TgZ(76,"ul",45)(77,"li",46)(78,"div",47)(79,"div",32)(80,"label",48),e._uU(81,"Larghezza"),e.TgZ(82,"span",38),e._uU(83," (px)"),e.qZA(),e._uU(84,":"),e.qZA(),e.TgZ(85,"label",49),e._uU(86,"Altezza"),e.TgZ(87,"span",38),e._uU(88," (px)"),e.qZA(),e._uU(89,":"),e.qZA()(),e.TgZ(90,"div",40)(91,"input",50),e.NdJ("ngModelChange",function(n){e.CHM(i);const r=e.oxw(3);return e.KtG(r.imageWidth=n)})("ngModelChange",function(){e.CHM(i);const n=e.oxw(3);return e.KtG(n.imageWidthInputChange())}),e.qZA(),e.TgZ(92,"span",51),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(3);return e.KtG(n.keepAspectRationWhenScaling=!n.keepAspectRationWhenScaling)}),e._UZ(93,"span",52),e.qZA(),e.TgZ(94,"input",53),e.NdJ("ngModelChange",function(n){e.CHM(i);const r=e.oxw(3);return e.KtG(r.imageHeight=n)})("ngModelChange",function(){e.CHM(i);const n=e.oxw(3);return e.KtG(n.imageHeightInputChange())}),e.qZA()(),e.YNc(95,Wt,2,0,"div",54),e.qZA()(),e.TgZ(96,"li")(97,"div",55)(98,"input",56),e.NdJ("ngModelChange",function(n){e.CHM(i);const r=e.oxw(3);return e.KtG(r.forceDimensionsOnSave=n)}),e.qZA(),e.TgZ(99,"label",57),e._uU(100,"Salva l'immagine con le dimensioni specificate"),e.qZA()()()()(),e.TgZ(101,"div",55)(102,"input",58),e.NdJ("ngModelChange",function(n){e.CHM(i);const r=e.oxw(3);return e.KtG(r.rewriteOnSave=n)}),e.qZA(),e.TgZ(103,"label",59),e._uU(104,"Sostituisci la vecchia immagine con quella modificata"),e.qZA()(),e.BQk()}if(2&o){const i=e.oxw(3);e.xp6(2),e.Q6J("hidden",!i.isImageLoaded)("imageURL",e.lcZ(3,48,i.entity.embedUrl))("format",i.exportFormat)("aspectRatio",i.aspectRatio)("maintainAspectRatio",i.maintainAspectRatio)("canvasRotation",i.canvasRotation)("transform",i.transform),e.xp6(2),e.Q6J("ngIf",!i.isImageLoaded),e.xp6(3),e.Q6J("disableOnTouchDevice",!0)("tippyProps",e.DdM(50,Mn)),e.xp6(3),e.Q6J("disableOnTouchDevice",!0)("tippyProps",e.DdM(51,re)),e.xp6(4),e.Q6J("disableOnTouchDevice",!0)("tippyProps",e.DdM(52,re)),e.xp6(3),e.Q6J("disableOnTouchDevice",!0)("tippyProps",e.DdM(53,re)),e.xp6(4),e.Q6J("disableOnTouchDevice",!0)("tippyProps",e.DdM(54,re)),e.xp6(3),e.Q6J("disableOnTouchDevice",!0)("tippyProps",e.DdM(55,re)),e.xp6(4),e.Q6J("disableOnTouchDevice",!0)("tippyProps",e.DdM(56,re)),e.xp6(3),e.Q6J("disableOnTouchDevice",!0)("tippyProps",e.DdM(57,re)),e.xp6(3),e.Q6J("disableOnTouchDevice",!0)("tippyProps",e.DdM(58,re)),e.xp6(3),e.Q6J("disableOnTouchDevice",!0)("tippyProps",e.DdM(59,re)),e.xp6(3),e.Q6J("ngClass",e.WLB(60,Kt,!i.maintainAspectRatio,i.maintainAspectRatio))("appTippy",i.maintainAspectRatio?"Trasformazione libera":"Mantieni il rapporto larghezza/altezza")("disableOnTouchDevice",!0)("tippyProps",e.DdM(63,$t)),e.xp6(4),e.Q6J("disableOnTouchDevice",!0)("tippyProps",e.DdM(64,re)),e.xp6(9),e.Q6J("ngModel",i.rotationInput),e.xp6(18),e.Q6J("ngModel",i.translateH),e.xp6(),e.Q6J("ngModel",i.translateV),e.xp6(19),e.Q6J("ngClass",e.VKq(65,xt,i.isImageLoaded&&(!i.imageWidth||i.imageWidth<1)))("ngModel",i.imageWidth),e.xp6(),e.Q6J("appTippy",i.keepAspectRationWhenScaling?"Scala liberamente":"Mantieni l'aspect ratio")("disableOnTouchDevice",!0)("tippyProps",e.DdM(67,Tt)),e.xp6(),e.Q6J("innerText",i.keepAspectRationWhenScaling?"link":"link_off"),e.xp6(),e.Q6J("ngClass",e.VKq(68,xt,i.isImageLoaded&&(!i.imageHeight||i.imageHeight<1)))("ngModel",i.imageHeight),e.xp6(),e.Q6J("ngIf",!i.keepAspectRationWhenScaling),e.xp6(3),e.Q6J("ngModel",i.forceDimensionsOnSave),e.xp6(4),e.Q6J("ngModel",i.rewriteOnSave)}}function je(o,s){if(1&o&&(e.TgZ(0,"div",62)(1,"strong"),e._uU(2,"File non supportato!"),e.qZA(),e._UZ(3,"br"),e._uU(4," Purtroppo, al momento il file che si sta cercando di modificare ha un'estensione ("),e.TgZ(5,"em"),e._uU(6),e.qZA(),e._uU(7,") non supportata. Se lo si desidera, \xe8 possibile provare a convertire in autonomia il file in formato "),e.TgZ(8,"em"),e._uU(9,".jpg"),e.qZA(),e._uU(10," o "),e.TgZ(11,"em"),e._uU(12,".png"),e.qZA(),e._uU(13," e riprovare in seguito. "),e.qZA()),2&o){const i=e.oxw(3);e.xp6(6),e.hij(".",i.entity.ext,"")}}function Xe(o,s){if(1&o&&(e.ynx(0),e.YNc(1,De,105,70,"ng-container",5)(2,je,14,1,"ng-template",null,6,e.W1O),e.BQk()),2&o){const i=e.MAs(3),t=e.oxw(2);e.xp6(),e.Q6J("ngIf",t.canImageBeCropped)("ngIfElse",i)}}function lt(o,s){if(1&o&&e.YNc(0,Xe,4,2,"ng-container",4),2&o){const i=e.oxw();e.Q6J("ngIf",i.entity)}}function bt(o,s){if(1&o){const i=e.EpF();e.ynx(0),e.TgZ(1,"button",63),e.NdJ("click",function(){e.CHM(i),e.oxw(2);const n=e.MAs(1);return e.KtG(n.close("Close click"))}),e._uU(2," Annulla "),e.qZA(),e.TgZ(3,"button",64),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(2);return e.KtG(n.save())}),e._uU(4," Salva "),e.qZA(),e.BQk()}if(2&o){const i=e.oxw(2);e.xp6(3),e.Q6J("disabled",!i.isCropperReady||!i.canImageBeCropped||!i.croppedImageBlob)}}function En(o,s){if(1&o&&e.YNc(0,bt,5,1,"ng-container",4),2&o){const i=e.oxw();e.Q6J("ngIf",i.entity)}}let An=(()=>{var o;class s{constructor(t,n){this.uploaderService=t,this.uploadObservablesService=n,this.canImageBeCropped=!1,this.isCropperReady=!1,this.isImageLoaded=!1,this.rewriteOnSave=!1,this.imageWidth=0,this.imageHeight=0,this.keepAspectRationWhenScaling=!0,this.forceDimensionsOnSave=!1,this.exportFormat="jpeg",this.aspectRatio=4/3,this.maintainAspectRatio=!1,this.canvasRotation=0,this.transform={translateUnit:"px"},this.rotationInput=0,this.translateH=0,this.translateV=0,this.scale=1,this.translateHStep=0,this.translateVStep=0}ngOnChanges(t){t.entity&&!t.entity.firstChange&&this.entity&&(this.canImageBeCropped=(0,F.$H)(this.entity.ext),this.exportFormat=["png","apng"].includes(this.entity.ext)?"png":"webp"===this.entity.ext?"webp":"jpeg")}open(){return this.modalComponent.open()}resetOnHidden(){this.isImageLoaded=!1,this.isCropperReady=!1,this.resetImage(),this.maintainAspectRatio=!1,this.croppedImageBlob=void 0,this.keepAspectRationWhenScaling=!0,this.forceDimensionsOnSave=!1,this.imageHeight=0,this.imageWidth=0,this.rewriteOnSave=!1}save(){if(!(this.isCropperReady&&this.canImageBeCropped&&this.croppedImageBlob&&this.entity))return;this.modalComponent.close();const t={compress:this.uploaderService.uploaderOptions.compress,allowOverwrite:this.rewriteOnSave,openLinkModalAfterUpload:!1};this.forceDimensionsOnSave&&this.imageWidth>0&&this.imageHeight>0&&(t.compress=!0,t.imageDimensions={width:this.imageWidth,height:this.imageHeight}),this.uploadObservablesService.pushStartUpload({file:new File([this.croppedImageBlob],this.entity.name,{type:this.croppedImageBlob.type,lastModified:Date.now()}),options:t})}cropperReadyEvent(){this.isCropperReady=!0}imageLoadedEvent(t){this.imageWidth=t.original.size.width,this.imageHeight=t.original.size.height,this.translateHStep=Math.round(this.imageWidth/100),this.translateVStep=Math.round(this.imageHeight/100),this.aspectRatio=this.imageWidth/this.imageHeight,this.isImageLoaded=!0}imageCroppedEvent(t){this.croppedImageBlob=t.blob||void 0,this.imageWidth=t.width,this.imageHeight=t.height}imageWidthInputChange(){this.forceDimensionsOnSave=!0,this.keepAspectRationWhenScaling&&(this.imageHeight=Math.round(this.imageWidth/this.aspectRatio))}imageHeightInputChange(){this.forceDimensionsOnSave=!0,this.keepAspectRationWhenScaling&&(this.imageWidth=Math.round(this.imageHeight*this.aspectRatio))}rotateLeft(){this.canvasRotation--,this.flipAfterRotate()}rotateRight(){this.canvasRotation++,this.flipAfterRotate()}flipAfterRotate(){const t=this.transform.flipH,n=this.transform.flipV;this.transform=(0,C.Z)((0,C.Z)({},this.transform),{},{flipH:n,flipV:t})}updateRotation(){this.transform=(0,C.Z)((0,C.Z)({},this.transform),{},{rotate:this.rotationInput})}updateTranslate(){this.transform=(0,C.Z)((0,C.Z)({},this.transform),{},{translateV:this.translateV,translateH:this.translateH})}flipHorizontal(){this.transform=(0,C.Z)((0,C.Z)({},this.transform),{},{flipH:!this.transform.flipH})}flipVertical(){this.transform=(0,C.Z)((0,C.Z)({},this.transform),{},{flipV:!this.transform.flipV})}zoomOut(){this.scale-=.1,this.transform=(0,C.Z)((0,C.Z)({},this.transform),{},{scale:this.scale})}zoomIn(){this.scale+=.1,this.transform=(0,C.Z)((0,C.Z)({},this.transform),{},{scale:this.scale})}toggleMaintainAspectRatio(){this.maintainAspectRatio=!this.maintainAspectRatio}translateRight(){this.translateH+=this.translateHStep,this.transform=(0,C.Z)((0,C.Z)({},this.transform),{},{translateH:this.translateH})}translateLeft(){this.translateH+=-this.translateHStep,this.transform=(0,C.Z)((0,C.Z)({},this.transform),{},{translateH:this.translateH})}translateUp(){this.translateV+=-this.translateVStep,this.transform=(0,C.Z)((0,C.Z)({},this.transform),{},{translateV:this.translateV})}translateDown(){this.translateV+=this.translateVStep,this.transform=(0,C.Z)((0,C.Z)({},this.transform),{},{translateV:this.translateV})}resetImage(){this.scale=1,this.translateH=0,this.translateV=0,this.rotationInput=0,this.canvasRotation=0,this.transform={translateUnit:"px"}}}return(o=s).\u0275fac=function(t){return new(t||o)(e.Y36(Ge.q),e.Y36(L.r))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upload-crop-modal"]],viewQuery:function(t,n){if(1&t&&e.Gf(Ct,5),2&t){let r;e.iGM(r=e.CRH())&&(n.modalComponent=r.first)}},inputs:{entity:"entity"},features:[e.TTD],decls:4,vars:2,consts:[["size","xl",3,"title","disableCloseButton","hidden"],["modal",""],["appModalBody",""],["appModalFooter",""],[4,"ngIf"],[4,"ngIf","ngIfElse"],["noImage",""],[1,"image-cropper-container"],["alignImage","center",3,"hidden","imageURL","format","aspectRatio","maintainAspectRatio","canvasRotation","transform","cropperReady","imageLoaded","imageCropped"],[1,"image-cropper-utilities","d-flex","flex-wrap","align-items-center","py-1","mt-2","mb-1"],[1,"btn-group","my-2","me-3"],["appTippy","Ruota in senso antiorario",1,"btn","btn-outline-indigo","shadow-none",3,"disableOnTouchDevice","tippyProps","click"],[1,"d-block","material-icons"],["appTippy","Ruota in senso orario",1,"btn","btn-outline-indigo","shadow-none",3,"disableOnTouchDevice","tippyProps","click"],[1,"btn-group","me-3","my-2"],["appTippy","Rifletti orizzontalmente",1,"btn","btn-outline-primary","shadow-none",3,"disableOnTouchDevice","tippyProps","click"],[1,"d-block","material-icons","rotate-z90"],["appTippy","Rifletti verticalmente",1,"btn","btn-outline-primary","shadow-none",3,"disableOnTouchDevice","tippyProps","click"],["appTippy","Zoom in",1,"btn","btn-outline-success","shadow-none",3,"disableOnTouchDevice","tippyProps","click"],["appTippy","Zoom out",1,"btn","btn-outline-success","shadow-none",3,"disableOnTouchDevice","tippyProps","click"],["appTippy","Sposta in alto",1,"btn","btn-outline-secondary","shadow-none",3,"disableOnTouchDevice","tippyProps","click"],[1,"d-block","material-icons-outlined"],["appTippy","Sposta in basso",1,"btn","btn-outline-secondary","shadow-none",3,"disableOnTouchDevice","tippyProps","click"],["appTippy","Sposta a sinistra",1,"btn","btn-outline-secondary","shadow-none",3,"disableOnTouchDevice","tippyProps","click"],["appTippy","Sposta a destra",1,"btn","btn-outline-secondary","shadow-none",3,"disableOnTouchDevice","tippyProps","click"],[1,"btn","shadow-none","my-2","me-3",3,"ngClass","appTippy","disableOnTouchDevice","tippyProps","click"],["aspectBtn",""],[1,"material-icons","d-block"],["appTippy","Ripristina",1,"ms-lg-auto","my-2","btn","btn-danger","shadow-none",3,"disableOnTouchDevice","tippyProps","click"],[1,"container","mb-3"],[1,"row"],[1,"col","col-12","col-lg-4","px-0","pe-lg-2","mb-2","mb-lg-0"],[1,"d-flex"],["for","free-rotation",1,"fs-sm","ps-1"],["type","number","id","free-rotation",1,"form-control",3,"ngModel","ngModelChange"],[1,"col","col-12","col-lg-8","px-0","ps-lg-2","mb-2","mb-lg-0","free-translate-input-group"],["for","free-translate-h",1,"fs-sm","ps-1"],[1,"d-sm-none"],[1,"d-none","d-sm-inline"],["for","free-translate-v",1,"fs-sm","ps-1"],[1,"input-group"],["type","number","id","free-translate-h",1,"form-control",3,"ngModel","ngModelChange"],["type","number","id","free-translate-v",1,"form-control",3,"ngModel","ngModelChange"],[1,"px-3","pb-3","pt-2","rounded","mb-3","mb-1","border-dashed","border-light-gray"],[1,"legend-reset","fs-reset","px-2","mb-0"],[1,"list-unstyled","mb-0"],[1,"mb-3"],[1,"free-dimensions-input-group"],["for","free-width",1,"fs-sm","ps-1"],["for","free-height",1,"fs-sm","ps-1"],["type","number","id","free-width","min","1",1,"form-control",3,"ngClass","ngModel","ngModelChange"],[1,"input-group-text","cursor-pointer",3,"appTippy","disableOnTouchDevice","tippyProps","click"],[1,"material-icons",3,"innerText"],["type","number","id","free-height","min","1",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["class","small px-1",4,"ngIf"],[1,"form-check","form-switch"],["type","checkbox","role","switch","id","force-resize",1,"form-check-input",3,"ngModel","ngModelChange"],["for","force-resize",1,"form-check-label","me-auto"],["type","checkbox","role","switch","id","allow-rewrite",1,"form-check-input",3,"ngModel","ngModelChange"],["for","allow-rewrite",1,"form-check-label","me-auto"],["message","Caricamento del tool in corso"],[1,"small","px-1"],[1,"alert","alert-primary","text-center"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(t,n){1&t&&(e.TgZ(0,"app-modal",0,1),e.NdJ("hidden",function(){return n.resetOnHidden()}),e.YNc(2,lt,1,1,"ng-template",2)(3,En,1,1,"ng-template",3),e.qZA()),2&t&&e.Q6J("title","Modifica <em>"+(null==n.entity?null:n.entity.name)+"</em>")("disableCloseButton",!0)},dependencies:[f.mk,f.O5,w.Fj,w.wV,w.Wl,w.JJ,w.qQ,w.On,Gt,vt.R,ne.z,se.J,ze.j,qe.$,Yt.g],styles:[".rotate-z90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-group[_ngcontent-%COMP%]{width:100%}.free-translate-input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .free-dimensions-input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex:1 1 1px}.free-dimensions-input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:nth-of-type(2){margin-left:calc(24px + 1.5rem)}@media (min-width: 992px){.rotate-group[_ngcontent-%COMP%]{width:initial}.rotate-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{max-width:100px}}"]}),s})();var me=g(1378),R=g(5661),ae=g(658);const we=["modal"];function ye(o,s){if(1&o&&(e.TgZ(0,"div",9)(1,"a",10),e._UZ(2,"img",11),e.qZA()()),2&o){const i=e.oxw(4);e.xp6(),e.Q6J("href",i.entities[0].url,e.LSH),e.xp6(),e.Q6J("src",i.entities[0].embedUrl,e.LSH)("alt",i.entities[0].name)}}function et(o,s){1&o&&(e.ynx(0),e._uU(1," La cancellazione della cartella comporta anche la "),e.TgZ(2,"strong"),e._uU(3,"cancellazione di tutto il suo contenuto!"),e.qZA(),e._uU(4," Si consiglia di procedere solo se si \xe8 sicuro di voler rimuovere definitivamente la cartella. "),e.BQk())}function ge(o,s){if(1&o&&(e.ynx(0),e.YNc(1,ye,3,3,"div",7),e.TgZ(2,"div",8),e._uU(3," La cancellazione di "),e.TgZ(4,"em"),e._uU(5),e.qZA(),e._uU(6," \xe8 "),e.TgZ(7,"strong"),e._uU(8,"definitiva"),e.qZA(),e._uU(9,", senza possibilit\xe0 di ripristino. "),e.qZA(),e.TgZ(10,"p"),e._uU(11," Il suo link non sar\xe0 pi\xf9 funzionante e, di conseguenza, i siti su cui \xe8 stato condiviso non riusciranno pi\xf9 a visualizzarlo. "),e.YNc(12,et,5,0,"ng-container",4),e.qZA(),e.BQk()),2&o){const i=e.oxw(3);e.xp6(),e.Q6J("ngIf",i.entities[0].isImage),e.xp6(4),e.Oqu(i.entities[0].name),e.xp6(7),e.Q6J("ngIf",i.entities[0].type===i.entityTypes.FOLDER)}}function Me(o,s){if(1&o&&(e.TgZ(0,"div",8),e._uU(1," Saranno cancellati "),e.TgZ(2,"strong"),e._uU(3,"definitivamente"),e.qZA(),e._uU(4),e.qZA(),e.TgZ(5,"p"),e._uU(6," Tutti i file selezionati non saranno pi\xf9 accessibili, pertanto eventuali link condivisi non saranno pi\xf9 funzionanti. L'operazione potrebbe richiedere diverso tempo. "),e.qZA()),2&o){const i=e.oxw(3);e.xp6(4),e.hij(" i ",i.entities.length," file selezionati! ")}}function jt(o,s){if(1&o&&(e.ynx(0),e.YNc(1,ge,13,3,"ng-container",5)(2,Me,7,1,"ng-template",null,6,e.W1O),e.BQk()),2&o){const i=e.MAs(3),t=e.oxw(2);e.xp6(),e.Q6J("ngIf",1===t.entities.length)("ngIfElse",i)}}function Xt(o,s){if(1&o&&e.YNc(0,jt,4,2,"ng-container",4),2&o){const i=e.oxw();e.Q6J("ngIf",i.opened&&i.entities[0])}}function ct(o,s){if(1&o){const i=e.EpF();e.ynx(0,13),e.TgZ(1,"button",14),e.NdJ("click",function(){e.CHM(i),e.oxw(2);const n=e.MAs(1);return e.KtG(n.close("Close click"))}),e._uU(2," Annulla "),e.qZA(),e.TgZ(3,"button",15),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(2);return e.KtG(n.deleteEntity())}),e._uU(4," Elimina! "),e.qZA(),e.BQk()}}function le(o,s){if(1&o&&e.YNc(0,ct,5,0,"ng-container",12),2&o){const i=e.oxw();e.Q6J("ngIf",i.opened&&i.entities[0])}}let dt=(()=>{var o;class s{constructor(t,n){this.toastService=t,this.uploadService=n,this.currentFolderPath=[],this.entities=[],this.deleteStartEvent=new e.vpe,this.deleteEndEvent=new e.vpe,this.opened=!1,this.entityTypes=v.VC,this.modalTitle=""}ngOnChanges(t){if(t.entities&&!t.entities.firstChange)if(this.entities.length>1)this.modalTitle="Rimuovi ".concat(this.entities.length," file");else if(1===this.entities.length){var n;this.modalTitle="Rimuovi <em>".concat((null===(n=this.entities[0])||void 0===n?void 0:n.name)||"","</em>")}else this.modalTitle="Rimuovi 0 file"}open(){return this.opened=!0,this.modalComponent.open()}onHidden(){this.opened=!1}deleteEntity(){var t=this;return(0,b.Z)(function*(){if(!t.opened||!t.entities[0])return;const n=[...t.currentFolderPath];t.modalComponent.close(),t.deleteStartEvent.emit({destPath:n,list:t.entities});let r=!1;for(const a of t.entities)if(r=yield t.uploadService.deleteEntity(n,a.name),!r)break;if(t.deleteEndEvent.emit(),r)if(1===t.entities.length){const a=t.entities[0],c="La rimozione "+(a.type===v.VC.FILE?"del file":"della cartella")+" <strong>".concat(a.name,"</strong> \xe8 avvenuta con successo!");t.toastService.show({content:c})}else t.toastService.show({content:"<strong>".concat(t.entities.length," file</strong> eliminati con successo!")});else t.toastService.show({content:"Errore nella rimozione!",level:me.m.ERROR})})()}}return(o=s).\u0275fac=function(t){return new(t||o)(e.Y36(R.k),e.Y36(ae.C))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upload-delete-modal"]],viewQuery:function(t,n){if(1&t&&e.Gf(we,5),2&t){let r;e.iGM(r=e.CRH())&&(n.modalComponent=r.first)}},inputs:{currentFolderPath:"currentFolderPath",entities:"entities"},outputs:{deleteStartEvent:"deleteStartEvent",deleteEndEvent:"deleteEndEvent"},features:[e.TTD],decls:4,vars:2,consts:[[3,"title","disableCloseButton","hidden"],["modal",""],["appModalBody",""],["appModalFooter",""],[4,"ngIf"],[4,"ngIf","ngIfElse"],["multipleEntity",""],["class","preview py-1 text-center mb-3",4,"ngIf"],[1,"alert","alert-danger","text-center"],[1,"preview","py-1","text-center","mb-3"],["target","_blank","rel","noreferrer",1,"d-inline-block","mw-100",3,"href"],[1,"d-inline-block","mw-100",3,"src","alt"],["footer","",4,"ngIf"],["footer",""],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"app-modal",0,1),e.NdJ("hidden",function(){return n.onHidden()}),e.YNc(2,Xt,1,1,"ng-template",2)(3,le,1,1,"ng-template",3),e.qZA()),2&t&&e.Q6J("title",n.modalTitle)("disableCloseButton",!0)},dependencies:[f.O5,ne.z,se.J,ze.j],styles:[".preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:200px}"]}),s})();var D=g(4020),yt=g(2457),pt=g(4228);const Mt=["modal"];function ut(o,s){if(1&o&&(e.TgZ(0,"div",11)(1,"a",12),e._UZ(2,"img",13),e.qZA()()),2&o){const i=e.oxw(3);e.xp6(),e.Q6J("href",i.entities[0].url,e.LSH),e.xp6(),e.Q6J("src",i.entities[0].embedUrl,e.LSH)("alt",i.entities[0].name)}}function Fe(o,s){1&o&&e.GkF(0)}function wn(o,s){1&o&&e.GkF(0)}const Et=o=>({$implicit:o,description:"Tag de"});function At(o,s){if(1&o&&(e.TgZ(0,"li"),e.YNc(1,wn,1,0,"ng-container",6),e.qZA()),2&o){const i=e.oxw(3),t=e.MAs(4);e.xp6(),e.Q6J("ngTemplateOutlet",t)("ngTemplateOutletContext",e.VKq(2,Et,i.html.tag))}}function en(o,s){1&o&&e.GkF(0)}function Un(o,s){1&o&&e.GkF(0)}function Zn(o,s){if(1&o&&(e.TgZ(0,"li"),e.YNc(1,Un,1,0,"ng-container",6),e.qZA()),2&o){const i=e.oxw(3),t=e.MAs(4);e.xp6(),e.Q6J("ngTemplateOutlet",t)("ngTemplateOutletContext",e.VKq(2,Et,i.bbcode.tag))}}function l(o,s){1&o&&e.GkF(0)}const d=o=>({$implicit:o,description:"Url de"}),p=o=>({$implicit:o,description:"Link a"});function m(o,s){if(1&o&&(e.ynx(0),e.YNc(1,ut,3,3,"div",5),e.TgZ(2,"div"),e.YNc(3,Fe,1,0,"ng-container",6),e.qZA(),e.TgZ(4,"fieldset",7)(5,"legend",8),e._uU(6,"HTML"),e.qZA(),e.TgZ(7,"ul",9),e.YNc(8,At,2,4,"li",4),e.TgZ(9,"li"),e.YNc(10,en,1,0,"ng-container",6),e.qZA()()(),e.TgZ(11,"fieldset",10)(12,"legend",8),e._uU(13,"BBCODE"),e.qZA(),e.TgZ(14,"ul",9),e.YNc(15,Zn,2,4,"li",4),e.TgZ(16,"li"),e.YNc(17,l,1,0,"ng-container",6),e.qZA()()(),e.BQk()),2&o){const i=e.oxw(2),t=e.MAs(4);e.xp6(),e.Q6J("ngIf",1===i.entities.length&&i.entities[0].isImage),e.xp6(2),e.Q6J("ngTemplateOutlet",t)("ngTemplateOutletContext",e.VKq(9,d,i.urls)),e.xp6(5),e.Q6J("ngIf",i.html.tag.length),e.xp6(2),e.Q6J("ngTemplateOutlet",t)("ngTemplateOutletContext",e.VKq(11,p,i.html.link)),e.xp6(5),e.Q6J("ngIf",i.bbcode.tag.length),e.xp6(2),e.Q6J("ngTemplateOutlet",t)("ngTemplateOutletContext",e.VKq(13,p,i.bbcode.link))}}function h(o,s){if(1&o&&e.YNc(0,m,18,15,"ng-container",4),2&o){const i=e.oxw();e.Q6J("ngIf",i.entities.length)}}function x(o,s){if(1&o&&(e.TgZ(0,"div",14),e._uU(1),e.qZA(),e._UZ(2,"app-custom-pre",15),e.ALo(3,"arrayJoin")),2&o){const i=s.$implicit,t=s.description;e.xp6(),e.AsE(" ",t,"",i.length>1?"gli elementi":"ll'elemento",": "),e.xp6(),e.Q6J("content",e.xi3(3,3,i,"\n"))}}let S=(()=>{var o;class s{constructor(){this.entities=[],this.touchDevice=D.b1,this.modalTitle="",this.urls=[],this.html={tag:[],link:[]},this.bbcode={tag:[],link:[]},this.opened=!1}ngOnChanges(t){if(this.opened&&t.entities&&!t.entities.firstChange){var n;this.modalTitle=1!==this.entities.length?"Codici delle immagini":"Codici di <em>".concat((null===(n=this.entities[0])||void 0===n?void 0:n.name)||"","</em>"),this.urls=[],this.html={tag:[],link:[]},this.bbcode={tag:[],link:[]};for(const r of this.entities)this.urls.push(r.url),this.html.link.push('<a href="'.concat(r.url,'" target="_blank">').concat(r.name,"</a>")),this.bbcode.link.push("[URL=".concat(r.url,"]").concat(r.name,"[/URL]")),r.isImage&&(this.html.tag.push('<img src="'.concat(r.url,'" alt="').concat(r.name,'">')),this.bbcode.tag.push("[IMG]".concat(r.url,"[/IMG]")))}}open(){return this.opened=!0,this.modalComponent.open()}onHidden(){this.opened=!1}}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upload-file-links-modal"]],viewQuery:function(t,n){if(1&t&&e.Gf(Mt,5),2&t){let r;e.iGM(r=e.CRH())&&(n.modalComponent=r.first)}},inputs:{entities:"entities"},features:[e.TTD],decls:5,vars:1,consts:[[3,"title","hidden"],["modal",""],["appModalBody",""],["linkInput",""],[4,"ngIf"],["class","preview py-1 text-center mb-2",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"px-3","pb-3","pt-1","rounded","mt-3","border-dashed","border-light-gray"],[1,"legend-reset","fs-reset","px-2","mb-0"],[1,"list-unstyled","mb-0"],[1,"px-3","pb-3","pt-1","rounded","mt-3","mb-1","border-dashed","border-light-gray"],[1,"preview","py-1","text-center","mb-2"],["target","_blank","rel","noreferrer",1,"d-inline-block","mw-100",3,"href"],[1,"d-inline-block","mw-100",3,"src","alt"],[1,"fs-sm","d-inline-block"],[3,"content"]],template:function(t,n){1&t&&(e.TgZ(0,"app-modal",0,1),e.NdJ("hidden",function(){return n.onHidden()}),e.YNc(2,h,1,1,"ng-template",2),e.qZA(),e.YNc(3,x,4,6,"ng-template",null,3,e.W1O)),2&t&&e.Q6J("title",n.modalTitle)},dependencies:[f.O5,f.tP,yt.s,ne.z,se.J,pt.J],styles:[".preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:200px}fieldset[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:not(:first-of-type){margin-top:.75rem}"]}),s})();const N=["modal"];function H(o,s){1&o&&(e.TgZ(0,"p",15),e._uU(1," \xc8 possibile spostare pi\xf9 file contemporaneamente in una stessa destinazione. Occorre sottolineare che, a seguito dello spostamento, tutti i "),e.TgZ(2,"strong"),e._uU(3,"link dei file saranno modificati"),e.qZA(),e._uU(4," e, pertanto, i vacchi indirizzi non risulteranno pi\xf9 funzionanti. L'operazione potrebbe richiedere diverso tempo. "),e.qZA())}function G(o,s){1&o&&(e.TgZ(0,"p",15),e._uU(1," \xc8 possibile spostare un file nella cartella base ("),e.TgZ(2,"em"),e._uU(3,"root"),e.qZA(),e._uU(4,"), in quella di livello superiore, se esistente, oppure in una sottocartella presente nella cartella corrente. Spostanto un file, verr\xe0 "),e.TgZ(5,"strong"),e._uU(6,"modificato anche il suo link"),e.qZA(),e._uU(7,", pertanto eventuali link gi\xe0 condivisi andranno aggiornati. "),e.qZA())}function _e(o,s){1&o&&(e.TgZ(0,"p",15),e._uU(1," \xc8 possibile spostare un'intera cartella e "),e.TgZ(2,"strong"),e._uU(3,"tutto il suo contenuto"),e.qZA(),e._uU(4," nella cartella base ("),e.TgZ(5,"em"),e._uU(6,"root"),e.qZA(),e._uU(7,"), in quella di livello superiore, se esistente, oppure in una sottocartella presente nella cartella corrente. Occorre evidenziare che, spostando una cartella, i "),e.TgZ(8,"strong"),e._uU(9,"link di tutti gli elementi"),e.qZA(),e._uU(10," in essa contenuti saranno "),e.TgZ(11,"strong"),e._uU(12,"modificati"),e.qZA(),e._uU(13," e, pertanto, se gi\xe0 condivisi andranno aggiornati. "),e.qZA())}function Yi(o,s){if(1&o&&e.YNc(0,G,8,0,"p",7)(1,_e,14,0,"ng-template",null,16,e.W1O),2&o){const i=e.MAs(2),t=e.oxw(3);e.Q6J("ngIf",t.entities[0].type===t.entityTypes.FILE)("ngIfElse",i)}}function Wi(o,s){1&o&&e.GkF(0)}const On=o=>({$implicit:o});function Ki(o,s){if(1&o&&(e.TgZ(0,"div",17),e.YNc(1,Wi,1,0,"ng-container",14),e.qZA()),2&o){const i=e.oxw(3),t=e.MAs(5);e.xp6(),e.Q6J("ngTemplateOutlet",t)("ngTemplateOutletContext",e.VKq(2,On,i.newLink?i.newLink:i.entities[0].url))}}function $i(o,s){1&o&&e.GkF(0)}const ji=o=>({"mt-2":o}),Xi=(o,s,i)=>({loading:o,"has-error":s,"touch-device":i});function eo(o,s){if(1&o&&(e.ynx(0),e.YNc(1,H,5,0,"p",7)(2,Yi,3,2,"ng-template",null,8,e.W1O),e.TgZ(4,"p")(5,"em"),e._uU(6,"Tip:"),e.qZA(),e._uU(7," cliccando sulla "),e.TgZ(8,"strong"),e._uU(9,"freccia blu"),e.qZA(),e._uU(10," accanto al nome della cartella \xe8 possibile navigare nelle eventuali sottocartelle. Se non \xe8 presente alcun simbolo accanto al nome di una cartella, quest'ultima non ha sottocartelle. "),e.qZA(),e.TgZ(11,"div",9),e.YNc(12,Ki,2,4,"div",10),e.TgZ(13,"fieldset",11)(14,"legend",12),e._uU(15," Cartella di destinazione: "),e.qZA(),e.TgZ(16,"ul",13),e.YNc(17,$i,1,0,"ng-container",14),e.qZA()()(),e.BQk()),2&o){const i=e.MAs(3),t=e.oxw(2),n=e.MAs(7);e.xp6(),e.Q6J("ngIf",t.entities.length>1)("ngIfElse",i),e.xp6(11),e.Q6J("ngIf",1===t.entities.length),e.xp6(),e.Q6J("ngClass",e.VKq(7,ji,t.entities.length>1)),e.xp6(3),e.Q6J("ngClass",e.kEZ(9,Xi,t.loading,!t.isValid,t.touchDevice)),e.xp6(),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(13,On,t.folders[0]))}}function to(o,s){if(1&o&&e.YNc(0,eo,18,15,"ng-container",6),2&o){const i=e.oxw();e.Q6J("ngIf",i.entities[0])}}function no(o,s){if(1&o){const i=e.EpF();e.ynx(0,19),e.TgZ(1,"button",20),e.NdJ("click",function(){e.CHM(i),e.oxw(2);const n=e.MAs(1);return e.KtG(n.close("Close click"))}),e._uU(2," Annulla "),e.qZA(),e.TgZ(3,"button",21),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(2);return e.KtG(n.move())}),e._uU(4," Sposta "),e.qZA(),e.BQk()}if(2&o){const i=e.oxw(2);e.xp6(3),e.Q6J("disabled",!i.isValid)}}function io(o,s){if(1&o&&e.YNc(0,no,5,1,"ng-container",18),2&o){const i=e.oxw();e.Q6J("ngIf",i.entities.length)}}const oo=o=>({placement:"top",hideOnClick:o});function so(o,s){if(1&o){const i=e.EpF();e.TgZ(0,"label",22),e._uU(1,"Anteprima nuovo link:"),e.qZA(),e.TgZ(2,"div",23),e._UZ(3,"input",24),e.TgZ(4,"div",25,26),e.NdJ("click",function(){e.CHM(i);const n=e.MAs(5),r=e.oxw();return e.KtG(!r.touchDevice&&n.changeContent("Copiato!","Copia"))}),e.TgZ(6,"span",27),e._uU(7,"content_copy"),e.qZA()()()}if(2&o){const i=s.$implicit,t=e.oxw();e.xp6(3),e.Q6J("value",i),e.xp6(),e.Q6J("cdkCopyToClipboard",i)("appTippy",t.touchDevice?"Copiato!":"Copia")("tippyProps",e.VKq(4,oo,t.touchDevice))}}function ro(o,s){1&o&&(e.ynx(0),e.TgZ(1,"div",34)(2,"div",35)(3,"span",36),e._uU(4,"Loading..."),e.qZA()()(),e.BQk())}const ao=o=>({"is-expanded":o});function lo(o,s){if(1&o){const i=e.EpF();e.TgZ(0,"a",38),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(2).$implicit,r=e.oxw();return e.KtG(r.getSubfolders(n))}),e.TgZ(1,"div",39),e._uU(2," chevron_right "),e.qZA()()}if(2&o){const i=e.oxw(2).$implicit;e.Q6J("ngClass",e.VKq(1,ao,!i.collapsed))}}function co(o,s){if(1&o&&e.YNc(0,lo,3,3,"a",37),2&o){const i=e.oxw().$implicit;e.Q6J("ngIf",!i.checked||i.subfolders.length)}}const po=()=>[5,10],uo=o=>({placement:"top-end",offset:o});function mo(o,s){if(1&o&&(e.TgZ(0,"div",40)(1,"div",41),e._uU(2,"info"),e.qZA()()),2&o){const i=e.oxw(2);e.Q6J("appTippy",i.errorMessage)("tippyProps",e.VKq(3,uo,e.DdM(2,po)))}}function go(o,s){1&o&&e.GkF(0)}function _o(o,s){if(1&o&&(e.ynx(0),e.YNc(1,go,1,0,"ng-container",14),e.BQk()),2&o){const i=s.$implicit;e.oxw(3);const t=e.MAs(7);e.xp6(),e.Q6J("ngTemplateOutlet",t)("ngTemplateOutletContext",e.VKq(2,On,i))}}function ho(o,s){if(1&o){const i=e.EpF();e.TgZ(0,"ul",42),e.NdJ("ngbCollapseChange",function(n){e.CHM(i);const r=e.oxw().$implicit;return e.KtG(r.collapsed=n)}),e.YNc(1,_o,2,4,"ng-container",43),e.qZA()}if(2&o){const i=e.oxw().$implicit;e.Q6J("ngbCollapse",i.collapsed),e.xp6(),e.Q6J("ngForOf",i.subfolders)}}const fo=(o,s)=>({selected:o,"ps-2":s});function vo(o,s){if(1&o){const i=e.EpF();e.TgZ(0,"li")(1,"div",28),e.YNc(2,ro,5,0,"ng-container",29)(3,co,1,1,"ng-template",null,30,e.W1O),e.TgZ(5,"div",31),e.NdJ("click",function(){const r=e.CHM(i).$implicit,a=e.oxw();return e.KtG(a.setSelectedPath(r,r.collapsed))}),e.qZA(),e.YNc(6,mo,3,5,"div",32),e.qZA(),e.YNc(7,ho,2,2,"ul",33),e.qZA()}if(2&o){const i=s.$implicit,t=e.MAs(4),n=e.oxw();e.xp6(),e.Q6J("ngClass",e.WLB(6,fo,n.selectedPathAsString===i.pathString,!i.loading&&i.checked&&0===i.subfolders.length)),e.xp6(),e.Q6J("ngIf",i.loading)("ngIfElse",t),e.xp6(3),e.Q6J("innerHTML",i.name,e.oJD),e.xp6(),e.Q6J("ngIf",!n.isValid&&n.selectedPathAsString===i.pathString),e.xp6(),e.Q6J("ngIf",i.subfolders.length>0)}}let Co=(()=>{var o;class s{constructor(t,n,r){this.uploadService=t,this.toastService=n,this.uploadObservablesService=r,this.currentFolderPath=[],this.entities=[],this.moveEvent=new e.vpe,this.deleteBeforeMovingEvent=new e.vpe,this.touchDevice=D.b1,this.entityTypes=v.VC,this.modalTitle="",this.newLink="",this.isValid=!1,this.loading=!1,this.currentFolderPathAsString="",this.errorMessage="",this.folders=[],this.newFolderPath=[],this.basepath="",this.opened=!1}ngOnInit(){this.currentFolderPathAsString=this.currentFolderPath.join("/"),this.setRootFolder(),this.startExternalMoveSubscription=this.uploadObservablesService.startMoveObservable.subscribe(t=>{this.sendMoveRequest(t.destPath,t.originPath,t.entities)})}ngOnChanges(t){if(t.entities&&!t.entities.firstChange){if(this.entities.length>1)this.modalTitle="Sposta ".concat(this.entities.length," file");else if(1===this.entities.length){var n;this.modalTitle="Sposta <em>".concat((null===(n=this.entities[0])||void 0===n?void 0:n.name)||"","</em>")}else this.modalTitle="Sposta 0 file";const r=this.entities[0].url.match(/^(https:\/\/[^/]*\/i\/[^/]*)/);r&&(this.basepath="".concat(r[0],"/"))}t.currentFolderPath&&!t.currentFolderPath.firstChange&&(this.currentFolderPathAsString=this.currentFolderPath.join("/"))}open(){return this.opened=!0,this.reset(),this.modalComponent.open()}onHidden(){this.opened=!1}reset(){this.selectedPathAsString=void 0,this.newLink="",this.newFolderPath=[],this.isValid=!1,this.setRootFolder()}setRootFolder(){this.folders=[{name:"Cartella base (root)",paths:[],pathString:"",checked:!1,loading:!1,collapsed:!0,subfolders:[]}]}move(){var t=this;return(0,b.Z)(function*(){if(!t.opened||!t.isValid||!t.entities[0])return;const n=[...t.newFolderPath],r=[...t.currentFolderPath],a=[...t.entities];t.modalComponent.close(),t.sendMoveRequest(n,r,a)})()}sendMoveRequest(t,n,r){var a=this;return(0,b.Z)(function*(){a.deleteBeforeMovingEvent.emit({destPath:n,list:r});const c=1===r.length?(r[0].type===v.VC.FILE?"File <strong>".concat(r[0].name,"</strong> spostato"):"Cartella <strong>".concat(r[0].name,"</strong> spostata"))+" con successo!":"<strong>".concat(r.length," elementi</strong> spostati con successo!"),_=[];for(let M=0;M<r.length;M+=5){const E=r.slice(M,M+5),Z=yield Promise.all(E.map(P=>a.uploadService.moveRenameEntity(n,t,P.name)));_.push(...Z.map((P,z)=>({data:P,type:E[z].type})))}a.moveEvent.emit({list:r,destPath:t,originPath:n,results:_}),a.toastService.show({content:c})})()}getSubfolders(t){var n=this;return(0,b.Z)(function*(){if(n.loading)return;if(t.checked){if(0===t.subfolders.length)return;return t.collapsed||n.closeSubfoldersCollapseElements(t),void(t.collapsed=!t.collapsed)}n.loading=t.loading=!0;const r=yield n.uploadService.getFileList(t.paths);r.folders.length&&(t.subfolders=r.folders.map(a=>{const c=[...t.paths,a.name];return{name:a.name,paths:c,pathString:c.join("/"),checked:!1,loading:!1,collapsed:!0,subfolders:[]}}).sort((a,c)=>a.name.localeCompare(c.name))),t.checked=!0,setTimeout(()=>{t.subfolders.length>0&&(t.collapsed=!t.collapsed),n.loading=t.loading=!1},200)})()}setSelectedPath(t,n=!1){if(n&&this.getSubfolders(t).then(),this.selectedPathAsString=t.paths.join("/"),this.selectedPathAsString===this.currentFolderPathAsString)return this.isValid=!1,this.newLink="",void(this.errorMessage="La cartella di origine \xe8 uguale alla destinazione!");if(this.newFolderPath=[...t.paths],1===this.entities.length){if(this.entities[0].type===v.VC.FOLDER&&(this.selectedPathAsString+"/").startsWith(this.currentFolderPathAsString+(this.currentFolderPathAsString.length?"/":"")+this.entities[0].name+"/"))return this.isValid=!1,this.newLink="",void(this.errorMessage="La cartella di arrivo contiene quella di origine!");this.newLink=this.basepath+"".concat(this.newFolderPath.map(a=>encodeURIComponent(a)).join("/"))+(this.newFolderPath.length?"/":"")+encodeURIComponent(this.entities[0].name)}this.isValid=!0}closeSubfoldersCollapseElements(t){if(t.subfolders)for(const n of t.subfolders)n.collapsed=!0,this.closeSubfoldersCollapseElements(n)}ngOnDestroy(){var t;null===(t=this.startExternalMoveSubscription)||void 0===t||t.unsubscribe()}}return(o=s).\u0275fac=function(t){return new(t||o)(e.Y36(ae.C),e.Y36(R.k),e.Y36(L.r))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upload-move-modal"]],viewQuery:function(t,n){if(1&t&&e.Gf(N,5),2&t){let r;e.iGM(r=e.CRH())&&(n.modalComponent=r.first)}},inputs:{currentFolderPath:"currentFolderPath",entities:"entities"},outputs:{moveEvent:"moveEvent",deleteBeforeMovingEvent:"deleteBeforeMovingEvent"},features:[e.TTD],decls:8,vars:2,consts:[[3,"title","disableCloseButton","hidden"],["modal",""],["appModalBody",""],["appModalFooter",""],["newLinkInput",""],["folderTree",""],[4,"ngIf"],["class","mb-1",4,"ngIf","ngIfElse"],["singleEntity",""],[1,"mt-2"],["class","mb-3",4,"ngIf"],[1,"pb-3","pt-2","rounded","border-dashed","border-light-gray",3,"ngClass"],[1,"legend-reset","fs-sm","px-2","mb-0"],[1,"list-unstyled","mb-0","folder-tree",3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"mb-1"],["folderDesc",""],[1,"mb-3"],["footer","",4,"ngIf"],["footer",""],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["for","new-link",1,"fs-sm"],[1,"input-group"],["type","text","id","new-link","disabled","",1,"form-control",3,"value"],[1,"input-group-text","cursor-pointer",3,"cdkCopyToClipboard","appTippy","tippyProps","click"],["tippyRef","appTippy"],[1,"material-icons","d-block","text-muted"],[1,"d-flex","align-items-center","tree-title","rounded",3,"ngClass"],[4,"ngIf","ngIfElse"],["collapseButton",""],[1,"cursor-pointer","flex-grow-1","f-name","me-2","text-truncate",3,"innerHTML","click"],["class","me-1 d-flex cursor-pointer flex-shrink-0",3,"appTippy","tippyProps",4,"ngIf"],["class","list-unstyled collapse-content sub-tree mb-0",3,"ngbCollapse","ngbCollapseChange",4,"ngIf"],[1,"spinner-cont","d-flex","align-items-center","flex-shrink-0"],["role","status",1,"spinner-border"],[1,"visually-hidden"],["role","button","class","d-flex align-items-center collapse-btn flex-shrink-0",3,"ngClass","click",4,"ngIf"],["role","button",1,"d-flex","align-items-center","collapse-btn","flex-shrink-0",3,"ngClass","click"],[1,"collapse-icon","collapse-icon-right","material-icons"],[1,"me-1","d-flex","cursor-pointer","flex-shrink-0",3,"appTippy","tippyProps"],[1,"material-icons-outlined","icon-small"],[1,"list-unstyled","collapse-content","sub-tree","mb-0",3,"ngbCollapse","ngbCollapseChange"],[4,"ngFor","ngForOf"]],template:function(t,n){1&t&&(e.TgZ(0,"app-modal",0,1),e.NdJ("hidden",function(){return n.onHidden()}),e.YNc(2,to,1,1,"ng-template",2)(3,io,1,1,"ng-template",3),e.qZA(),e.YNc(4,so,8,6,"ng-template",null,4,e.W1O)(6,vo,8,9,"ng-template",null,5,e.W1O)),2&t&&e.Q6J("title",n.modalTitle)("disableCloseButton",!0)},dependencies:[xe.i3,f.mk,f.sg,f.O5,f.tP,ne.z,se.J,ze.j,y._D,qe.$],styles:["fieldset[_ngcontent-%COMP%]{padding-left:11px;padding-right:11px}.folder-tree.loading[_ngcontent-%COMP%]{pointer-events:none!important}.sub-tree[_ngcontent-%COMP%]{margin-left:.125rem}.spinner-cont[_ngcontent-%COMP%]{width:24px;height:24px;padding:6px}.spinner-border[_ngcontent-%COMP%]{width:100%;height:100%;border-width:.125rem;color:#4864fe}.tree-title[_ngcontent-%COMP%]{transition:background-color .2s}.folder-tree[_ngcontent-%COMP%]:not(.touch-device)   .tree-title[_ngcontent-%COMP%]:not(.selected):hover{background-color:rgb(var(--bs-light-rgb))}.f-name[_ngcontent-%COMP%]{padding:.125rem 0}.folder-tree[_ngcontent-%COMP%]:not(.has-error)   .tree-title.selected[_ngcontent-%COMP%]{background-color:#dae0ff}.has-error[_ngcontent-%COMP%]   .tree-title.selected[_ngcontent-%COMP%]{background-color:#f1d5d8;color:#701b23}.has-error[_ngcontent-%COMP%]   .tree-title.selected[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:inherit!important}.has-error[_ngcontent-%COMP%]   .tree-title.selected[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{color:#701b23}@media (min-width: 992px){.sub-tree[_ngcontent-%COMP%]{margin-left:11px;padding-left:12px;border-left:1px solid #dee2e6}}"]}),s})();var He=g(1990);const xo=["modal"];function To(o,s){1&o&&(e.ynx(0),e._uU(1," \xc8 possibile rinominare un file liberamente, tuttavia occorre tenere presente che "),e.TgZ(2,"strong"),e._uU(3,"la modifica del nome comporta il cambiamento del link"),e.qZA(),e._uU(4,", pertanto al termine dell'operazione andranno aggiornati tutti i link gi\xe0 condivisi, i quali in caso contrario non saranno pi\xf9 funzionanti. "),e.BQk())}function bo(o,s){1&o&&(e._uU(0," Rinominando una cartella, verr\xe0 "),e.TgZ(1,"strong"),e._uU(2,"modificato il link di tutti i file contenuti"),e.qZA(),e._uU(3," in essa. Pertanto, eventuali link gi\xe0 condivisi non saranno pi\xf9 funzionanti e andranno aggiornati. "))}function yo(o,s){1&o&&(e.ynx(0),e._uU(1," Il nome non pu\xf2 essere vuoto! "),e.BQk())}function Mo(o,s){if(1&o&&e._UZ(0,"span",24),2&o){const i=e.oxw(5);e.Q6J("innerHTML",i.errorMessage,e.oJD)}}function Eo(o,s){1&o&&e._uU(0,"Questo nome \xe8 gi\xe0 in uso!")}function Ao(o,s){if(1&o&&e.YNc(0,Mo,1,1,"span",22)(1,Eo,1,0,"ng-template",null,23,e.W1O),2&o){const i=e.MAs(2),t=e.oxw(4);e.Q6J("ngIf",!t.nameValidationErrors.alreadyUsed)("ngIfElse",i)}}function wo(o,s){if(1&o&&(e.TgZ(0,"div",20),e.YNc(1,yo,2,0,"ng-container",7)(2,Ao,3,2,"ng-template",null,21,e.W1O),e.qZA()),2&o){const i=e.MAs(3),t=e.oxw(3);e.xp6(),e.Q6J("ngIf",t.nameValidationErrors.invalidLength)("ngIfElse",i)}}function Uo(o,s){1&o&&e.GkF(0)}const Zo=(o,s)=>({"is-valid":o,"is-invalid":s}),Oo=o=>({$implicit:o});function So(o,s){if(1&o){const i=e.EpF();e.ynx(0),e.TgZ(1,"p",6),e._uU(2," Il nome pu\xf2 contenere i caratteri "),e.TgZ(3,"em"),e._uU(4,"a-z"),e.qZA(),e._uU(5,", sia maiuscoli che minuscoli, i trattini alti e bassi "),e.TgZ(6,"em"),e._uU(7,"-_"),e.qZA(),e._uU(8," e i numeri. "),e.YNc(9,To,5,0,"ng-container",7)(10,bo,4,0,"ng-template",null,8,e.W1O),e.qZA(),e.TgZ(12,"div",9)(13,"label",10),e._uU(14,"Nome attuale:"),e.qZA(),e._UZ(15,"input",11),e.qZA(),e.TgZ(16,"fieldset",12)(17,"legend",13),e._uU(18," Valori modificati "),e.qZA(),e.TgZ(19,"ul",14)(20,"li")(21,"label",15),e._uU(22,"Nuovo nome:"),e.qZA(),e.TgZ(23,"input",16,17),e.NdJ("ngModelChange",function(n){e.CHM(i);const r=e.oxw(2);return e.KtG(r.newName=n)})("ngModelChange",function(){e.CHM(i);const n=e.oxw(2);return e.KtG(n.checkNameValidity())}),e.qZA(),e.YNc(25,wo,4,2,"div",18),e.qZA(),e.TgZ(26,"li"),e.YNc(27,Uo,1,0,"ng-container",19),e.qZA()()(),e.BQk()}if(2&o){const i=e.MAs(11),t=e.MAs(24),n=e.oxw(2),r=e.MAs(5);e.xp6(9),e.Q6J("ngIf",n.entity.type===n.entityTypes.FILE)("ngIfElse",i),e.xp6(6),e.Q6J("value",n.currentName),e.xp6(8),e.Q6J("pattern",n.entity.type===n.entityTypes.FILE?n.filenameValidationRegex:n.foldernameValidationRegex)("ngClass",e.WLB(9,Zo,n.currentName!==n.newName&&t.dirty&&n.isNewNameValid,t.dirty&&!n.isNewNameValid))("ngModel",n.newName),e.xp6(2),e.Q6J("ngIf",!n.isNewNameValid),e.xp6(2),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(12,Oo,n.path+n.newNameParsedUrl+n.ext))}}function Po(o,s){if(1&o&&e.YNc(0,So,28,14,"ng-container",5),2&o){const i=e.oxw();e.Q6J("ngIf",i.entity)}}function Io(o,s){if(1&o){const i=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(i),e.oxw();const n=e.MAs(1);return e.KtG(n.close("Close click"))}),e._uU(1," Annulla "),e.qZA(),e.TgZ(2,"button",26),e.NdJ("click",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.rename())}),e._uU(3," Salva "),e.qZA()}if(2&o){const i=e.oxw();e.xp6(2),e.Q6J("disabled",i.currentName===i.newName||!i.isNewNameValid)}}const Do=o=>({placement:"top",hideOnClick:o});function Fo(o,s){if(1&o){const i=e.EpF();e.TgZ(0,"label",27),e._uU(1,"Anteprima nuovo link:"),e.qZA(),e.TgZ(2,"div",28),e._UZ(3,"input",29),e.TgZ(4,"div",30,31),e.NdJ("click",function(){e.CHM(i);const n=e.MAs(5),r=e.oxw();return e.KtG(!r.touchDevice&&n.changeContent("Copiato!","Copia"))}),e.TgZ(6,"span",32),e._uU(7,"content_copy"),e.qZA()()()}if(2&o){const i=s.$implicit,t=e.oxw();e.xp6(3),e.Q6J("value",i),e.xp6(),e.Q6J("cdkCopyToClipboard",i)("appTippy",t.touchDevice?"Copiato!":"Copia")("tippyProps",e.VKq(4,Do,t.touchDevice))}}let Lo=(()=>{var o;class s{constructor(t,n,r){this.toastService=t,this.uploadService=n,this.uploadObservablesService=r,this.currentFolderPath=[],this.reservedNames=[],this.renameEvent=new e.vpe,this.touchDevice=D.b1,this.currentName="",this.newName="",this.newNameParsedUrl="",this.ext="",this.isNewNameValid=!1,this.entityTypes=v.VC,this.path="",this.filenameValidationRegex=He.JJ,this.foldernameValidationRegex=He.b3,this.errorMessage="",this.nameValidationErrors=He.uJ,this.characterFileErrorMessage="Il nome pu\xf2 contenere solo i caratteri <em>a-z</em>, i trattini alti e bassi <em>-_</em>, gli spazi, i punti e i numeri!",this.characterFolderErrorMessage="Il nome pu\xf2 contenere solo i caratteri <em>a-z</em>, i trattini alti e bassi <em>-_</em>, gli spazi e i numeri!",this.startAndEndErrorMessage="Il nome non pu\xf2 iniziare o finire con un punto o uno spazio!",this.opened=!1}ngOnChanges(t){t.entity&&!t.entity.firstChange&&this.entity&&(this.ext=this.entity.ext?".".concat(this.entity.ext):"",this.currentName=this.newName=this.ext?this.entity.name.replace(this.ext,""):this.entity.name,this.path=this.entity.url.split("/").slice(0,-1).join("/")+"/",this.createNameForUrl())}open(){return this.opened=!0,this.modalComponent.open()}onHidden(){this.opened=!1,this.newName=this.newNameParsedUrl=this.currentName,this.isNewNameValid=!1,this.nameValidationErrors=He.uJ}checkNameValidity(){var t;this.nameValidationErrors=(0,F.rc)(this.newName,this.currentName,(null===(t=this.entity)||void 0===t?void 0:t.type)||v.VC.FILE,this.reservedNames||[],this.ext),this.isNewNameValid=!Object.values(this.nameValidationErrors).some(n=>n),this.isNewNameValid?this.createNameForUrl():this.setErrorMessage()}createNameForUrl(){this.newNameParsedUrl=encodeURIComponent(this.newName)}setErrorMessage(){var t;this.errorMessage=this.nameValidationErrors.invalidStartOrEnd?this.startAndEndErrorMessage:(null===(t=this.entity)||void 0===t?void 0:t.type)===v.VC.FOLDER?this.characterFolderErrorMessage:this.characterFileErrorMessage}rename(){var t=this;return(0,b.Z)(function*(){if(!t.opened||!t.isNewNameValid||!t.entity)return;const n=t.newName+t.ext,r=(0,C.Z)({},t.entity);t.modalComponent.close();let a=!1,c=" <strong>".concat(r.name,"</strong> modificato con successo!");const u=[...t.currentFolderPath];t.uploadObservablesService.pushEntityPending([{type:r.type,name:r.name,start:!0}]);const _=yield t.uploadService.moveRenameEntity(u,u,r.name,n);if(a=!(!_||!_.url),t.uploadObservablesService.pushEntityPending([{type:r.type,name:r.name,start:!1}]),a)return t.renameEvent.emit({list:[r],newEntityData:_,destPath:u}),c=(r.type===v.VC.FILE?"Nome del file":"Nome della cartella")+c,void t.toastService.show({content:c});t.toastService.show({content:"La modifica del nome <strong>non</strong> \xe8 andata a buon fine!<br>Prova a ricaricare la pagina ed a rieseguirla.",level:me.m.ERROR})})()}}return(o=s).\u0275fac=function(t){return new(t||o)(e.Y36(R.k),e.Y36(ae.C),e.Y36(L.r))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upload-rename-modal"]],viewQuery:function(t,n){if(1&t&&e.Gf(xo,5),2&t){let r;e.iGM(r=e.CRH())&&(n.modalComponent=r.first)}},inputs:{currentFolderPath:"currentFolderPath",entity:"entity",reservedNames:"reservedNames"},outputs:{renameEvent:"renameEvent"},features:[e.TTD],decls:6,vars:2,consts:[[3,"title","disableCloseButton","hidden"],["modal",""],["appModalBody",""],["appModalFooter",""],["newUrl",""],[4,"ngIf"],[1,"mb-0"],[4,"ngIf","ngIfElse"],["folderDesc",""],[1,"mt-2"],["for","current-name",1,"fs-sm"],["type","text","disabled","","id","current-name",1,"form-control",3,"value"],[1,"px-3","pb-3","pt-1","rounded","mt-3","mb-1","border-dashed","border-light-gray"],[1,"legend-reset","fs-reset","px-2","mb-0"],[1,"list-unstyled","mb-0"],["for","file-new-name",1,"fs-sm"],["type","text","id","file-new-name","required","",1,"form-control",3,"pattern","ngClass","ngModel","ngModelChange"],["newNameInput","ngModel"],["class","invalid-feedback",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"invalid-feedback"],["invalidName",""],[3,"innerHTML",4,"ngIf","ngIfElse"],["alreadyUsed",""],[3,"innerHTML"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["for","new-link",1,"fs-sm"],[1,"input-group"],["type","text","id","new-link","disabled","",1,"form-control",3,"value"],[1,"input-group-text","cursor-pointer",3,"cdkCopyToClipboard","appTippy","tippyProps","click"],["tippyRef","appTippy"],[1,"material-icons","d-block","text-muted"]],template:function(t,n){1&t&&(e.TgZ(0,"app-modal",0,1),e.NdJ("hidden",function(){return n.onHidden()}),e.YNc(2,Po,1,1,"ng-template",2)(3,Io,4,1,"ng-template",3),e.qZA(),e.YNc(4,Fo,8,6,"ng-template",null,4,e.W1O)),2&t&&e.Q6J("title","Rinomina <em>"+((null==n.entity?null:n.entity.name)||"")+"</em>")("disableCloseButton",!0)},dependencies:[xe.i3,f.mk,f.O5,f.tP,w.Fj,w.JJ,w.Q7,w.c5,w.On,ne.z,se.J,ze.j,qe.$],styles:["fieldset[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:not(:first-of-type){margin-top:.75rem}"]}),s})(),ko=(()=>{var o;class s{constructor(t){this.uploadCacheService=t}parseUploadEvent(t){const n=this.parseSubscriptionEventMessage(t),r=this.uploadCacheService.getItem(n.targetPaths);if(!r||!n.output)return;const a=r.files.findIndex(u=>{var _;return u.url===(null===(_=n.output)||void 0===_?void 0:_.url)})>-1,c=(0,F.zO)(n.output.url);return c.size=n.output.size,c.time=1e3*n.output.time,{rewrite:a,destPath:n.targetPaths,list:[c]}}parseCreateFolderEvent(t){const n=this.parseSubscriptionEventMessage(t);if(!n.output)return;const r=(0,F.lY)(n.output);return{opened:!1,destPath:n.targetPaths,list:[r]}}parseDeleteEntityEvent(t,n,r){const a=this.parseSubscriptionEventMessage(t);if(a.output)return(0,C.Z)((0,C.Z)({},this.checkCompromissions(a.targetPaths,n,a.targetName,a.isFile,r)),{},{event:{destPath:a.targetPaths,list:[{name:a.targetName,type:a.isFile?v.VC.FILE:v.VC.FOLDER}]}})}parseMoveEntityEvent(t,n,r){const a=this.parseSubscriptionEventMessage(t);if(!a.output)return;const c=a.sourcePaths.join("/")===a.targetPaths.join("/");return(0,C.Z)((0,C.Z)({isRename:c},this.checkCompromissions(a.sourcePaths,n,a.sourceName,a.isFile,r)),{},{newEntity:(0,C.Z)((0,C.Z)({},a.output),{},{time:1e3*a.output.time}),type:a.isFile?v.VC.FILE:v.VC.FOLDER,source:{name:a.sourceName,paths:a.sourcePaths},target:{name:a.targetName,paths:a.targetPaths}})}parseSubscriptionEventMessage(t){const n=(t.payload.content.source||"").split("/"),r=(t.payload.content.target||"").split("/"),a=r[r.length-1].indexOf(".")>-1;let c;try{c=JSON.parse(t.output).success||void 0}catch(u){}return{sourceName:n[n.length-1],sourcePaths:n.slice(0,-1),targetName:r[r.length-1],targetPaths:r.slice(0,-1),isFile:a,output:c}}checkCompromissions(t,n,r,a,c){const u=n.join("/");return!a&&u.includes([...t,r].join("/"))?{pathCompromised:!0,entityCompromised:!1}:u===t.join("/")&&c.find(_=>_.name===r)?{pathCompromised:!1,entityCompromised:!0}:{pathCompromised:!1,entityCompromised:!1}}}return(o=s).\u0275fac=function(t){return new(t||o)(e.LFG(Re.B))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),s})();var wt=function(o){return o.MOVE="MOVE",o.DELETE="DELETE",o.NEW_DIR="NEW_DIR",o.UPLOAD="UPLOAD",o}(wt||{}),tt=g(7595),Ro=g(2986),No=g(7165),Xn=g(6779),zo=g(3285);let ei=(()=>{var o;class s{constructor(){this.loginAsService=(0,e.f3M)(Xn.D)}logout(){this.loginAsService.disconnect()}}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-login-as-advice"]],standalone:!0,features:[e.jDz],decls:7,vars:2,consts:[[1,"d-flex","alert-container"],["type","danger",1,"d-flex","align-items-center","justify-content-center","flex-grow-1","position-fixed","p-0","min-w-0",3,"dismissible","closed"],[1,"me-1","flex-shrink-0"],[1,"text-truncate"],[3,"innerHTML"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"ngb-alert",1),e.NdJ("closed",function(){return n.logout()}),e.TgZ(2,"div",2),e._uU(3,"Sei connesso come"),e.qZA(),e.TgZ(4,"div",3),e._UZ(5,"strong",4),e._uU(6,"!"),e.qZA()()()),2&t&&(e.xp6(),e.Q6J("dismissible",!0),e.xp6(4),e.Q6J("innerHTML",(null==n.loginAsService.profile?null:n.loginAsService.profile.nickname)||"",e.oJD))},dependencies:[f.ez,y.xm],styles:[".alert-container[_ngcontent-%COMP%], ngb-alert[_ngcontent-%COMP%]{height:58px}.alert-container[_ngcontent-%COMP%]{margin-bottom:.5rem}ngb-alert[_ngcontent-%COMP%]{z-index:999;left:0;right:0;border-radius:0;border-left-width:0;border-right-width:0;padding-left:3rem}@media (min-width: 960px){ngb-alert[_ngcontent-%COMP%]{border-left-width:1px;border-right-width:1px;border-radius:.25rem;margin-left:calc(260px + 1.5rem);margin-right:1.5rem}}"]}),s})();var ti=g(2330),qo=g(5213);let ni=(()=>{var o;class s{constructor(){this.uploadEndpointsService=(0,e.f3M)(tt.r),this.privacyService=(0,e.f3M)(qo.h),this.savePreference=!1,this.appName=D.DJ}disable(){this.uploadEndpointsService.disableRemoteAdvice(this.savePreference)}}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upload-endpoint-advice"]],standalone:!0,features:[e.jDz],decls:32,vars:8,consts:[["type","primary",1,"mx-auto",3,"dismissible","closed"],["alert",""],[1,"text-center"],[1,"text-justify"],["target","_blank",3,"href"],["target","_blank",3,"href","innerText"],["role","button",1,"button",3,"click"],[1,"text-end"],["role","button",1,"small",3,"click"]],template:function(t,n){if(1&t){const r=e.EpF();e.TgZ(0,"ngb-alert",0,1),e.NdJ("closed",function(){return n.disable()}),e.TgZ(2,"p",2)(3,"strong"),e._uU(4,"Server esterno!"),e.qZA()(),e.TgZ(5,"p",3),e._uU(6," Il server selezionato per l'upload, "),e.TgZ(7,"strong"),e._uU(8),e.qZA(),e._uU(9,", non \xe8 presente nella lista di quelli suggeriti di default. "),e.qZA(),e.TgZ(10,"p",3)(11,"strong"),e._uU(12,"Tutti i file e i dati"),e.qZA(),e._uU(13," raccolti saranno conservati su "),e.TgZ(14,"strong"),e._uU(15,"server di terze parti"),e.qZA(),e._uU(16,": per ogni richiesta occorre contattare direttamente il proprietario del server tramite "),e.TgZ(17,"a",4),e.ALo(18,"ffuidToLink"),e._uU(19,"messaggio privato"),e.qZA(),e._uU(20," o l'indirizzo email "),e._UZ(21,"a",5),e._uU(22,". \xc8 possibile tornare al "),e.TgZ(23,"a",6),e.NdJ("click",function(){return n.uploadEndpointsService.resetActiveRemote()}),e._uU(24,"server di default"),e.qZA(),e._uU(25," tramite l'apposito select di scelta del server. Leggi di pi\xf9 nella "),e.TgZ(26,"a",6),e.NdJ("click",function(){return n.privacyService.toggleModal()}),e._uU(27,"privacy policy"),e.qZA(),e._uU(28),e.qZA(),e.TgZ(29,"div",7)(30,"a",8),e.NdJ("click",function(){e.CHM(r);const c=e.MAs(1);return n.savePreference=!0,e.KtG(c.close())}),e._uU(31,"Ho capito, non mostrare per 30 giorni"),e.qZA()()()}2&t&&(e.Q6J("dismissible",!0),e.xp6(8),e.Oqu(n.uploadEndpointsService.requiredActiveRemote.name),e.xp6(9),e.Q6J("href",e.lcZ(18,6,n.uploadEndpointsService.requiredActiveRemote.owner),e.LSH),e.xp6(4),e.Q6J("href","mailto:"+n.uploadEndpointsService.requiredActiveRemote.email,e.LSH)("innerText",n.uploadEndpointsService.requiredActiveRemote.email),e.xp6(7),e.hij(" di ",n.appName,". "))},dependencies:[y._A,y.xm,ti.H],styles:["ngb-alert[_ngcontent-%COMP%]{max-width:1000px;border-radius:0;border-left-width:0;border-right-width:0;padding-left:3rem}@media (min-width: 768px){ngb-alert[_ngcontent-%COMP%]{border-left-width:1px;border-right-width:1px;border-radius:.25rem}}"],changeDetection:0}),s})();var Le=g(9996);function Ho(o,s){1&o&&(e.TgZ(0,"p",5),e._uU(1," L'account loggato "),e.TgZ(2,"strong"),e._uU(3,"\xe8 proprietario di questo server"),e.qZA(),e._uU(4,". Rimuovendo il server dalla lista, gli altri utenti che hanno "),e.TgZ(5,"strong"),e._uU(6,"gi\xe0 aggiunto"),e.qZA(),e._uU(7," il server "),e.TgZ(8,"strong"),e._uU(9,"continueranno a vederne le informazioni di contatto"),e.qZA(),e._uU(10," (in particolare, account proprietario ed email di contatto), senza tuttavia poterlo selezionare. Gli utenti che invece "),e.TgZ(11,"strong"),e._uU(12,"non"),e.qZA(),e._uU(13," hanno ancora inserito il server nella loro lista, "),e.TgZ(14,"strong"),e._uU(15,"non potranno aggiungerlo"),e.qZA(),e._uU(16,". "),e.qZA(),e.TgZ(17,"p",5),e._uU(18," Cancellando il server, "),e.TgZ(19,"strong")(20,"u"),e._uU(21,"non"),e.qZA(),e._uU(22," saranno rimossi"),e.qZA(),e._uU(23," i file gi\xe0 caricati da tutti gli utenti che lo hanno utilizzato e, pertanto, tali file continueranno ad "),e.TgZ(24,"strong"),e._uU(25,"essere visibili"),e.qZA(),e._uU(26," a chiunque ne possegga il link. "),e.TgZ(27,"strong"),e._uU(28,"Il proprietario \xe8 responsabile"),e.qZA(),e._uU(29," e continua a rimanere responsabile per i file caricati sul suo server: se si desidera quindi chiudere completamente il server si consiglia di rimuovere anche i file caricati da chiunque lo abbia utilizzato oppure limitarne l'accesso. "),e.qZA(),e.TgZ(30,"p",5),e._uU(31," L'azione di cancellazione del server tramite questo pannello "),e.TgZ(32,"strong"),e._uU(33,"non adempie"),e.qZA(),e._uU(34," nemmeno agli obblighi di rimozione dei dati sensibili a fini della normativa privacy: tali obblighi "),e.TgZ(35,"strong"),e._uU(36,"permangono esclusivamente a carico del proprietario"),e.qZA(),e._uU(37,". "),e.qZA())}function Jo(o,s){1&o&&(e._uU(0," Una volta rimosso il server, \xe8 possibile aggiungerlo nuovamente "),e.TgZ(1,"strong"),e._uU(2,"solo se si possiede il suo ID"),e.qZA(),e._uU(3," e se, nel frattempo, il proprietario non lo rimuove a sua volta, limitandone cos\xec l'utilizzo. "))}function Qo(o,s){1&o&&(e._uU(0," Questo server \xe8 stato "),e.TgZ(1,"strong"),e._uU(2,"rimosso dal suo proprietario"),e.qZA(),e._uU(3,". Eliminandolo dalla lista "),e.TgZ(4,"strong"),e._uU(5,"non sar\xe0 in alcun modo possibile"),e.qZA(),e._uU(6," inserirlo nuovamente! "))}function Bo(o,s){if(1&o&&(e.TgZ(0,"p",5),e._uU(1," Rimuovendo il server dalla lista, non sar\xe0 pi\xf9 selezionabile tra quelli su cui agire. I file "),e.TgZ(2,"strong"),e._uU(3,"gi\xe0 caricati"),e.qZA(),e._uU(4," sul server che si sta eliminando "),e.TgZ(5,"strong")(6,"u"),e._uU(7,"non"),e.qZA(),e._uU(8," saranno rimossi"),e.qZA(),e._uU(9," e continueranno ad "),e.TgZ(10,"strong"),e._uU(11,"essere visibili"),e.qZA(),e._uU(12," a chiunque ne possegga il link. Per cancellare i file, si possono utilizzare le apposite funzioni del pannello di gestione file "),e.TgZ(13,"strong"),e._uU(14,"prima"),e.qZA(),e._uU(15," di rimuovere il server dalla lista, oppure "),e.TgZ(16,"strong"),e._uU(17,"contattare il proprietario"),e.qZA(),e._uU(18," del server stesso. "),e.qZA(),e.TgZ(19,"p",5),e.YNc(20,Jo,4,0)(21,Qo,7,0),e.qZA()),2&o){const i=e.oxw();e.xp6(20),e.um2(20,i.remote().deleted?21:20)}}let Vo=(()=>{var o;class s{constructor(){this.remote=e.qHZ.required(),this.type=e.qHZ.required(),this.confirmationEvent=new e.vpe,this.appName=D.DJ,this.isOwnedType=(0,e.Flj)(()=>this.type()===Le.D.OWNED)}}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upload-endpoints-delete"]],inputs:{remote:[e.lbL.SignalBased,"remote"],type:[e.lbL.SignalBased,"type"]},outputs:{confirmationEvent:"confirmationEvent"},standalone:!0,features:[e.jDz],decls:18,vars:5,consts:[[1,"alert","alert-danger","text-center"],[1,"form-check"],["type","checkbox","id","remove-remote-confirm",1,"form-check-input",3,"ngModel","ngModelChange"],["for","remove-remote-confirm",1,"form-check-label"],[3,"innerText"],[1,"text-justify","mb-3"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._uU(1," La rimozione del server "),e.TgZ(2,"strong"),e._uU(3),e.qZA(),e._uU(4," (id: "),e.TgZ(5,"em"),e._uU(6),e.qZA(),e._uU(7,") \xe8 "),e.TgZ(8,"strong"),e._uU(9,"definitiva"),e.qZA(),e._uU(10,", senza possibilit\xe0 di annullamento dell'operazione.\n"),e.qZA(),e.YNc(11,Ho,38,0)(12,Bo,22,1),e.TgZ(13,"p",1)(14,"input",2),e.NdJ("ngModelChange",function(a){return n.confirmationEvent.emit(a)}),e.qZA(),e.TgZ(15,"label",3),e._uU(16," Conferma la rimozione del server "),e._UZ(17,"strong",4),e.qZA()()),2&t&&(e.xp6(3),e.Oqu(n.remote().name),e.xp6(3),e.Oqu(n.remote().id),e.xp6(5),e.um2(11,n.isOwnedType()?11:12),e.xp6(3),e.Q6J("ngModel",!1),e.xp6(3),e.Q6J("innerText",n.remote().name))},dependencies:[w.u5,w.Wl,w.JJ,w.On],encapsulation:2,changeDetection:0}),s})();var Go=g(6687),Sn=g(1745);const Yo={type:"object",required:["name","address","email"],properties:{id:{type:["string",null],title:"Id del server:",description:"L'id del server che si sta modificando.",widget:{formlyConfig:{props:{disabled:!0},expressions:{hide:o=>{var s;return!(null!==(s=o.model)&&void 0!==s&&s.id)}}}}},name:{type:"string",title:"Nome del server:",description:"Il nome con cui il server sar\xe0 presente nell'elenco e riconosciuto dai suoi utilizzatori."},address:{type:"string",title:"Indirizzo del server:",description:"L'url a cui verranno inviate tutte le richieste per la gestione dei files.",widget:{formlyConfig:{validators:{pattern:{expression:o=>!o.value||/^https:\/\/.+/.test(o.value),message:(o,s)=>{var i;return'"'.concat(null===(i=s.formControl)||void 0===i?void 0:i.value,'" non \xe8 un url valido!')}}}}}},email:{type:"string",title:"Email di contatto:",description:"L'indirizzo email [b]pubblico[/b] e [b]visibile a tutti[/b] a cui gli utenti protranno inviare richieste di supporto.",widget:{formlyConfig:{validators:{validation:["email"]}}}},selectAfterAdd:{type:"checkbox",default:!1,widget:{formlyConfig:{expressions:{"props.label":o=>{var s;return"Seleziona il server dopo ".concat(null!==(s=o.model)&&void 0!==s&&s.id?"la modifica":"l'inserimento")}}}}}}};function ii(o){return D.A8.test(o)}var Ut=g(1993),Ko=g(7429);function $o(o,s){1&o&&e._uU(0," L'ID specificato non \xe8 corretto! ")}function jo(o,s){1&o&&e._uU(0," Inserisci un ID! ")}function Xo(o,s){if(1&o&&(e.TgZ(0,"div",20),e.YNc(1,$o,1,0)(2,jo,1,0),e.qZA()),2&o){const i=e.oxw(2);e.xp6(),e.um2(1,i.linkedRemoteIdModel.length?1:2)}}const es=o=>({"is-invalid":o});function ts(o,s){if(1&o){const i=e.EpF();e.TgZ(0,"div",9)(1,"p",10),e._uU(2," \xc8 possibile aggiungere un server alla propria lista tramite "),e.TgZ(3,"strong"),e._uU(4,"l'ID"),e.qZA(),e._uU(5),e.qZA(),e.TgZ(6,"p",10),e._uU(7," Dopo aver inserito l'ID e cliccato sull'apposito pulsante "),e.TgZ(8,"em"),e._uU(9,"Salva"),e.qZA(),e._uU(10,", se il server corrispondente \xe8 "),e.TgZ(11,"strong"),e._uU(12,"esistente e non disabilitato"),e.qZA(),e._uU(13," sar\xe0 aggiunto alla propria lista e "),e.TgZ(14,"strong"),e._uU(15,"potr\xe0 essere selezionato"),e.qZA(),e._uU(16," dall'apposito select per caricare e gestire file "),e.TgZ(17,"strong"),e._uU(18,"su quello spazio"),e.qZA(),e._uU(19,". "),e.qZA(),e.TgZ(20,"p",11),e._uU(21," Cos\xec facendo, "),e.TgZ(22,"strong"),e._uU(23,"tutti i file e i dati"),e.qZA(),e._uU(24," ad essi associati (tra cui tipo di file, ultima modifica, dimensione; nonch\xe9 le informazioni sull'account che ha caricato il file, ad esempio nome, id, user agent, ip) saranno "),e.TgZ(25,"strong"),e._uU(26,"conservati e gestiti"),e.qZA(),e._uU(27," direttamente dal "),e.TgZ(28,"strong"),e._uU(29,"proprietario del server"),e.qZA(),e._uU(30,", a cui devono essere "),e.TgZ(31,"strong"),e._uU(32,"indirizzate eventuali richieste"),e.qZA(),e._uU(33," in merito, sfruttando anche le informazioni di contatto presenti tra i dettagli del server nel pannello con la lista dei server aggiunti. "),e.qZA(),e.TgZ(34,"label",12),e._uU(35,"ID del server:"),e.qZA(),e.TgZ(36,"input",13,14),e.NdJ("ngModelChange",function(n){e.CHM(i);const r=e.oxw();return e.KtG(r.linkedRemoteIdModel=n)})("ngModelChange",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.checkIdValidity())}),e.qZA(),e.YNc(38,Xo,3,1,"div",15),e.TgZ(39,"div",16),e._uU(40," Inserisci l'id di un server fornito dal suo proprietario per caricare le immagini su quello spazio! "),e.qZA(),e.TgZ(41,"p",17)(42,"input",18),e.NdJ("ngModelChange",function(n){e.CHM(i);const r=e.oxw();return e.KtG(r.linkedRemoteSelectAfterAddModel=n)}),e.qZA(),e.TgZ(43,"label",19),e._uU(44," Seleziona il server dopo l'inserimento "),e.qZA()()()}if(2&o){const i=e.MAs(37),t=e.oxw();e.xp6(5),e.hij(" fornito o reso pubblico dal proprietario che ha inserito tutti i dati del server e lo ha reso idoneo a comunicare con il pannello di ",t.appName,". "),e.xp6(31),e.Q6J("ngClass",e.VKq(6,es,i.touched&&i.invalid))("pattern",t.linkedRemoteRegexp)("ngModel",t.linkedRemoteIdModel),e.xp6(2),e.um2(38,i.touched&&i.invalid?38:-1),e.xp6(4),e.Q6J("ngModel",t.linkedRemoteSelectAfterAddModel)}}function ns(o,s){if(1&o){const i=e.EpF();e.TgZ(0,"div",21)(1,"p",10),e._uU(2," Tramite questo form \xe8 possibile aggiungere un nuovo server in qualit\xe0 di proprietari oppure modificarne uno gi\xe0 inserito. L'aggiunta di un nuovo server pu\xf2 essere eseguita solo dal "),e.TgZ(3,"strong"),e._uU(4,"proprietario del server"),e.qZA(),e._uU(5,". "),e.qZA(),e.TgZ(6,"p",10),e._uU(7," Dopo averlo inserito, il server comparir\xe0 nella propria lista: da qui sar\xe0 possibile "),e.TgZ(8,"strong"),e._uU(9,"copiare l'ID"),e.qZA(),e._uU(10," del server per condividerlo con altri e permettere anche a loro di aggiungerlo e utilizzarlo. "),e.qZA(),e.TgZ(11,"p",11),e._uU(12," Si ricorda che il "),e.TgZ(13,"strong"),e._uU(14,"proprietario"),e.qZA(),e._uU(15," del server \xe8 "),e.TgZ(16,"strong"),e._uU(17,"responsabile per i file e i dati"),e.qZA(),e._uU(18),e.TgZ(19,"strong"),e._uU(20,"gestione di richieste o reclami"),e.qZA(),e._uU(21," da chiunque provenienti in merito ai file e dati presenti sul server aggiunto. \xc8 pertanto fondamentale "),e.TgZ(22,"strong"),e._uU(23,"specificare un indirizzo mail "),e.TgZ(24,"u"),e._uU(25,"pubblico"),e.qZA()(),e._uU(26," a cui gli utenti e chiunque ne abbia interesse possano scrivere. Tale indirizzo mail "),e.TgZ(27,"strong"),e._uU(28,"sar\xe0 pubblicamente mostrato"),e.qZA(),e._uU(29," a chiunque aggiunga il server alla propria lista: si consiglia pertanto di utilizzare un indirizzo dedicato a questo scopo. Anche il "),e.TgZ(30,"strong"),e._uU(31,"link all'account"),e.qZA(),e._uU(32," proprietario del server sar\xe0 "),e.TgZ(33,"strong"),e._uU(34,"mostrato tra le informazioni pubbliche"),e.qZA(),e._uU(35,", in modo da consentire agli utenti di inviare messaggi privati a tale account. "),e.qZA(),e.TgZ(36,"div",22,23),e.NdJ("modelChangeEvent",function(){e.CHM(i);const n=e.MAs(37),r=e.oxw();return e.KtG(r.checkFormValidity(n.form.valid))}),e.qZA()()}if(2&o){const i=e.oxw();e.xp6(18),e.hij(" caricati e conservati sul suo spazio. ",i.appName," non ha accesso al server n\xe9 si sostituisce in alcun modo al proprietario per la "),e.xp6(18),e.Q6J("schema",i.remoteFormSchema)("enableModelChangeEvent",!0)("model",i.remoteFormModel)}}var nt=function(o){return o.LINK="link",o.CREATE="create",o}(nt||{});let is=(()=>{var o;class s{constructor(){this.destroyRef=(0,e.f3M)(e.ktI),this.uploadEndpointsService=(0,e.f3M)(tt.r),this.remote=(0,e.qHZ)(),this.remoteId=(0,e.qHZ)(),this.saveObservable=e.qHZ.required(),this.validityChange=new e.vpe,this.saveRemoteEvent=new e.vpe,this.appName=D.DJ,this.formNavItems=nt,this.formNavActive=nt.LINK,this.linkedRemoteIdModel="",this.linkedRemoteRegexp=D.A8,this.linkedRemoteSelectAfterAddModel=!1,this.remoteFormSchema=Yo,this.remoteFormModel={address:"",name:"",email:"",selectAfterAdd:!1},this.currentValidity=!1,this.isRemoteFormValid=!1,this.isRemoteIdValid=!1}ngOnInit(){this.uploadEndpointsService.lastListSelected===Le.D.OWNED&&(this.formNavActive=nt.CREATE);const t=this.remote();if(t)this.formNavActive=nt.CREATE,this.remoteFormModel={id:t.id,name:t.name,address:t.address,email:t.email,selectAfterAdd:!1};else{const n=this.remoteId();n&&(this.linkedRemoteIdModel=n,this.checkIdValidity())}this.saveObservable().pipe((0,Ut.sL)(this.destroyRef)).subscribe(()=>{if(this.isLinkForm()&&this.isRemoteIdValid)this.saveRemoteEvent.emit({selectAfterAdd:this.linkedRemoteSelectAfterAddModel,id:this.linkedRemoteIdModel});else if(this.isCreateForm()&&this.isRemoteFormValid){var n;const r=null===(n=this.remote())||void 0===n?void 0:n.id;this.saveRemoteEvent.emit((0,C.Z)((0,C.Z)({},this.remoteFormModel),{},{id:r}))}})}checkValidityOnTabChange(){this.emitValidityEvent(this.isLinkForm()&&this.isRemoteIdValid||this.isCreateForm()&&this.isRemoteFormValid)}checkIdValidity(){this.emitValidityEvent(this.isRemoteIdValid=ii(this.linkedRemoteIdModel))}checkFormValidity(t){this.emitValidityEvent(this.isRemoteFormValid=t)}emitValidityEvent(t){t!==this.currentValidity&&this.validityChange.emit(this.currentValidity=t)}isLinkForm(){return this.formNavActive===nt.LINK}isCreateForm(){return this.formNavActive===nt.CREATE}}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upload-endpoints-form"]],inputs:{remote:[e.lbL.SignalBased,"remote"],remoteId:[e.lbL.SignalBased,"remoteId"],saveObservable:[e.lbL.SignalBased,"saveObservable"]},outputs:{validityChange:"validityChange",saveRemoteEvent:"saveRemoteEvent"},standalone:!0,features:[e.jDz],decls:20,vars:6,consts:[[1,"text-justify"],[1,"my-4","d-flex","justify-content-center"],[1,"btn","btn-sm","mx-2",3,"ngClass","click"],[1,"btn","btn-sm",3,"ngClass","click"],["ngbNav","",1,"mb-0","list-unstyled","d-none",3,"activeId","activeIdChange"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavContent",""],[3,"ngbNavOutlet"],[1,"linked-remote-form"],[1,"text-justify","mb-2"],[1,"text-justify","mb-3"],["for","remote-linked-id",1,"form-label"],["id","remote-linked-id","type","text","required","",1,"form-control",3,"ngClass","pattern","ngModel","ngModelChange"],["linkedIdInput","ngModel"],["class","invalid-feedback"],[1,"form-text","text-muted"],[1,"form-check","my-3"],["type","checkbox","id","linked-select-remote-after-add",1,"form-check-input",3,"ngModel","ngModelChange"],["for","linked-select-remote-after-add",1,"form-check-label"],[1,"invalid-feedback"],[1,"remote-form"],["app-custom-form","",3,"schema","enableModelChangeEvent","model","modelChangeEvent"],["customForm",""]],template:function(t,n){if(1&t){const r=e.EpF();e.TgZ(0,"p",0),e._uU(1," Questo pannello consente di aggiungere alla propria lista un server gi\xe0 inserito dal suo proprietario oppure di creare un nuovo server specificandone tutti i dati richiesti. In entrambi i casi, il server "),e.TgZ(2,"strong"),e._uU(3,"sar\xe0 inserito nella propria lista"),e.qZA(),e._uU(4," e in seguito potr\xe0 essere selezionato per iniziare a caricare e gestire file "),e.TgZ(5,"strong"),e._uU(6,"su quello spazio"),e.qZA(),e._uU(7,".\n"),e.qZA(),e.TgZ(8,"div",1)(9,"button",2),e.NdJ("click",function(){e.CHM(r);const c=e.MAs(14);return e.KtG(c.select(n.formNavItems.CREATE))}),e._uU(10,"Inserisci nuovo"),e.qZA(),e.TgZ(11,"button",3),e.NdJ("click",function(){e.CHM(r);const c=e.MAs(14);return e.KtG(c.select(n.formNavItems.LINK))}),e._uU(12,"Aggiungi da ID"),e.qZA()(),e.TgZ(13,"ul",4,5),e.NdJ("activeIdChange",function(c){return n.formNavActive=c})("activeIdChange",function(){return n.checkValidityOnTabChange()}),e.TgZ(15,"li",6),e.YNc(16,ts,45,8,"ng-template",7),e.qZA(),e.TgZ(17,"li",6),e.YNc(18,ns,38,4,"ng-template",7),e.qZA()(),e._UZ(19,"div",8)}if(2&t){const r=e.MAs(14);e.xp6(9),e.Q6J("ngClass",n.formNavActive===n.formNavItems.CREATE?"btn-primary":"btn-outline-primary"),e.xp6(2),e.Q6J("ngClass",n.formNavActive===n.formNavItems.LINK?"btn-primary":"btn-outline-primary"),e.xp6(2),e.Q6J("activeId",n.formNavActive),e.xp6(2),e.Q6J("ngbNavItem",n.formNavItems.LINK),e.xp6(2),e.Q6J("ngbNavItem",n.formNavItems.CREATE),e.xp6(2),e.Q6J("ngbNavOutlet",r)}},dependencies:[Go.I,Ko.d,w.u5,w.Fj,w.Wl,w.JJ,w.Q7,w.c5,w.On,y.Oz,y.uN,y.Pz,y.nv,y.Is,y.Dy,f.mk],styles:['.divider[_ngcontent-%COMP%]:before, .divider[_ngcontent-%COMP%]:after{content:"";flex-grow:1;border-bottom:1px solid #dee2e6}'],changeDetection:0}),s})();var os=g(9105),ss=g(8418),rs=g(2572),Pn=g(9397),oi=g(4664);function as(o,s){1&o&&e._UZ(0,"app-loader",0)}const ls=(o,s)=>s.id;function cs(o,s){1&o&&(e.TgZ(0,"div",21)(1,"div",22),e._uU(2,"star"),e.qZA()())}function ds(o,s){1&o&&(e.TgZ(0,"div",23),e._uU(1,"Disabilitato"),e.qZA())}const ps=()=>({placement:"left"});function us(o,s){if(1&o){const i=e.EpF();e.TgZ(0,"div",24)(1,"div",25),e.NdJ("click",function(){e.CHM(i);const n=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.selectRemote(n))}),e._uU(2,"push_pin"),e.qZA()()}2&o&&e.Q6J("tippyProps",e.DdM(1,ps))}function ms(o,s){if(1&o){const i=e.EpF();e.TgZ(0,"li")(1,"a",31),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(2).$implicit,r=e.oxw(2);return e.KtG(r.editEvent.emit(n.id))}),e.TgZ(2,"div",30),e._uU(3,"edit"),e.qZA(),e.TgZ(4,"div"),e._uU(5,"Modifica"),e.qZA()()()}}const gs=o=>({disabled:o});function _s(o,s){if(1&o){const i=e.EpF();e.TgZ(0,"li")(1,"a",32),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(2).$implicit,r=e.oxw(2);return e.KtG(r.selectRemote(n))}),e.TgZ(2,"div",30),e._uU(3,"check_circle"),e.qZA(),e.TgZ(4,"div"),e._uU(5,"Seleziona"),e.qZA()()()}if(2&o){const i=e.oxw(2).$implicit,t=e.oxw(2);let n;e.xp6(),e.Q6J("ngClass",e.VKq(1,gs,i.deleted||(null==(n=t.uploadEndpointsService.activeRemote())?null:n.id)===i.id))}}function hs(o,s){if(1&o){const i=e.EpF();e.TgZ(0,"li")(1,"a",31),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(2).$implicit,r=e.oxw(2);return e.KtG(r.deleteEvent.emit(n.id))}),e.TgZ(2,"div",30),e._uU(3,"delete"),e.qZA(),e._UZ(4,"div",33),e.qZA()()}if(2&o){const i=e.oxw(4);e.xp6(4),e.Q6J("innerText",i.removeButtonText())}}const fs=()=>["left-top","auto"];function vs(o,s){if(1&o&&(e.TgZ(0,"div",26)(1,"div",27),e._uU(2,"more_vert"),e.qZA(),e.TgZ(3,"ul",28)(4,"li")(5,"a",29)(6,"div",30),e._uU(7,"fingerprint"),e.qZA(),e.TgZ(8,"div"),e._uU(9,"Copia ID"),e.qZA()()(),e.YNc(10,ms,6,0,"li")(11,_s,6,3)(12,hs,5,1,"li"),e.qZA()()),2&o){const i=e.oxw().$implicit,t=e.oxw(2);e.Q6J("placement",e.DdM(4,fs)),e.xp6(5),e.Q6J("cdkCopyToClipboard",i.id),e.xp6(5),e.um2(10,t.isOwnedType()?10:11),e.xp6(2),e.um2(12,t.isOwnedType()&&i.deleted?-1:12)}}function Cs(o,s){1&o&&(e.TgZ(0,"div",34),e._uU(1," Il server \xe8 stato "),e.TgZ(2,"strong"),e._uU(3,"correttamente disabilitato"),e.qZA(),e._uU(4,". Continuer\xe0 a rimanere visibile agli utenti che lo hanno gi\xe0 inserito nella loro lista, in modo da poterne contattare il proprietario, senza tuttavia essere selezionabile tra quelli su cui agire. Nessun nuovo utente, anche se in possesso dell'ID del server, potr\xe0 aggiungerlo alla propria lista. "),e.qZA())}function xs(o,s){1&o&&(e.TgZ(0,"div",19),e._uU(1," Nome: "),e._UZ(2,"a",35),e.ALo(3,"ffuidToLink"),e.qZA()),2&o&&(e.xp6(2),e.Q6J("href",e.lcZ(3,2,s.uid),e.LSH)("innerHTML",s.nickname,e.oJD))}const Ts=o=>({"border-bottom pb-3 mb-3":o});function bs(o,s){if(1&o&&(e.TgZ(0,"li",2)(1,"div",3)(2,"div",4)(3,"div",5),e._UZ(4,"div",6),e.YNc(5,cs,3,0,"div",7)(6,ds,2,0,"div",8),e.qZA(),e._UZ(7,"div",9),e.qZA(),e.YNc(8,us,3,2,"div",10)(9,vs,13,5),e.qZA(),e.YNc(10,Cs,5,0,"div",11),e.TgZ(11,"div",12)(12,"div",13)(13,"div",14),e._uU(14,"Proprietario:"),e.qZA(),e.TgZ(15,"div",15),e.YNc(16,xs,4,4,"div",16),e._UZ(17,"div",17),e.qZA()(),e.TgZ(18,"div",18)(19,"div",14),e._uU(20," Dettagli: "),e.qZA(),e.TgZ(21,"div",15)(22,"div",19),e._uU(23," Contatto: "),e._UZ(24,"a",20),e.qZA(),e.TgZ(25,"div"),e._uU(26),e.ALo(27,"date"),e.qZA()()()()()),2&o){const i=s.$implicit,t=s.$index,n=s.$count,r=e.oxw(2);let a,c;e.Q6J("ngClass",e.VKq(15,Ts,t!==n-1)),e.xp6(4),e.Q6J("innerText",i.name),e.xp6(),e.um2(5,(null==(a=r.uploadEndpointsService.activeRemote())?null:a.id)===i.id?5:-1),e.xp6(),e.um2(6,i.deleted?6:-1),e.xp6(),e.Q6J("innerText",i.address),e.xp6(),e.um2(8,i.default?8:9),e.xp6(2),e.um2(10,i.deleted&&r.isOwnedType()?10:-1),e.xp6(6),e.um2(16,(c=i.ownerDetails)?16:-1,c),e.xp6(),e.Q6J("innerHTML","ID: "+i.owner,e.oJD),e.xp6(7),e.Q6J("href","mailto:"+i.email,e.LSH)("innerText",i.email),e.xp6(2),e.hij("Aggiornato: ",e.xi3(27,12,i.lastUpdate,"dd/MM/Y HH:mm"),"")}}const ys=o=>({"touch-device":o});function Ms(o,s){if(1&o&&(e.TgZ(0,"ul",1),e.SjG(1,bs,28,17,"li",36,ls),e.qZA()),2&o){const i=e.oxw();e.Q6J("ngClass",e.VKq(1,ys,i.touchDevice)),e.xp6(),e.wJu(i.remotes())}}let Es=(()=>{var o;class s{constructor(){this.userService=(0,e.f3M)(ss.K),this.uploadEndpointsService=(0,e.f3M)(tt.r),this.loading=(0,e.qHZ)(!0),this.listType=e.qHZ.required(),this.deleteEvent=new e.vpe,this.editEvent=new e.vpe,this.touchDevice=D.b1,this.userListLoading=(0,e.tdS)(!0),this.isOwnedType=(0,e.Flj)(()=>this.listType()===Le.D.OWNED),this.removeButtonText=(0,e.Flj)(()=>this.isOwnedType()?"Elimina":"Rimuovi"),this.remotes=(0,e.Flj)(()=>{const t=this.remoteList(),n=this.userList()||{};return t.map(r=>(0,C.Z)((0,C.Z)({},r),{},{ownerDetails:n[r.owner]}))}),this.remoteList=(0,e.Flj)(()=>this.uploadEndpointsService.remotesList()[this.listType()]),this.userList=(0,Ut.O4)((0,rs.a)([(0,Ut.Dx)(this.loading),(0,Ut.Dx)(this.remoteList)]).pipe((0,Te.h)(([t])=>!t),(0,Pn.b)(()=>this.userListLoading.set(!0)),(0,oi.w)(([,t])=>this.getUsers(t.map(n=>n.owner))),(0,Pn.b)(()=>this.userListLoading.set(!1))),{initialValue:void 0})}getUsers(t){var n=this;return(0,b.Z)(function*(){return t.length?(yield n.userService.getDetailsFromUids(t,!1)).reduce((a,c)=>(0,C.Z)((0,C.Z)({},a),{},{[c.uid]:c}),{}):{}})()}selectRemote(t){t.deleted||this.uploadEndpointsService.setActiveRemote(t.id)}}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upload-endpoints-list"]],inputs:{loading:[e.lbL.SignalBased,"loading"],listType:[e.lbL.SignalBased,"listType"]},outputs:{deleteEvent:"deleteEvent",editEvent:"editEvent"},standalone:!0,features:[e.jDz],decls:2,vars:1,consts:[["message","Recupero della lista"],[1,"remotes","list-unstyled","mb-0",3,"ngClass"],[1,"ps-2",3,"ngClass"],[1,"d-flex","align-items-center"],[1,"me-auto","flex-grow-1","d-flex","flex-column","min-w-0"],[1,"fw-bold","text-primary","d-flex","align-items-center"],[1,"text-truncate","mw-100",3,"innerText"],["class","owner-icon cursor-pointer ms-2","appTippy","Server selezionato"],["class","cursor-pointer badge text-bg-danger rounded-pill ms-2","appTippy","Il proprietario ha disabilitato questo server"],[1,"small","text-muted","text-truncate","mw-100",3,"innerText"],["class","ms-3 icon","appTippy","Predefinito",3,"tippyProps"],["class","alert alert-primary mb-0 small mt-2 text-justify"],[1,"row","mt-3","pe-2"],[1,"col-12","col-lg-6","mb-3","mb-lg-0"],[1,"bg-light","rounded","py-1","px-2"],[1,"px-2","py-1","small"],["class","text-truncate mw-100"],[3,"innerHTML"],[1,"col-12","col-lg-6"],[1,"text-truncate","mw-100"],["target","_blank",3,"href","innerText"],["appTippy","Server selezionato",1,"owner-icon","cursor-pointer","ms-2"],[1,"material-icons","d-block"],["appTippy","Il proprietario ha disabilitato questo server",1,"cursor-pointer","badge","text-bg-danger","rounded-pill","ms-2"],["appTippy","Predefinito",1,"ms-3","icon",3,"tippyProps"],[1,"material-icons-outlined","d-block","cursor-pointer",3,"click"],["ngbDropdown","","display","dynamic","container","body",1,"dropdown-no-caret","ms-3","icon",3,"placement"],["ngbDropdownToggle","",1,"material-icons-outlined","d-block","cursor-pointer","dropdown-toggle"],["ngbDropdownMenu","",1,"list-unstyled","mb-0","dropdown-material-icons","dropdown-menu"],["role","button",1,"dropdown-item","d-flex","align-items-center",3,"cdkCopyToClipboard"],[1,"material-icons-outlined","d-block"],["role","button",1,"dropdown-item","d-flex","align-items-center",3,"click"],["role","button",1,"dropdown-item","d-flex","align-items-center",3,"ngClass","click"],[3,"innerText"],[1,"alert","alert-primary","mb-0","small","mt-2","text-justify"],["target","_blank",3,"href","innerHTML"],["class","ps-2",3,"ngClass"]],template:function(t,n){1&t&&e.YNc(0,as,1,0,"app-loader",0)(1,Ms,3,3),2&t&&e.um2(0,n.loading()||n.userListLoading()?0:1)},dependencies:[f.uU,f.mk,y.XC,y.jt,y.iD,y.Vi,xe.i3,Y.q,vt.R,ti.H,os.E],styles:[".remotes[_ngcontent-%COMP%]:not(.touch-device)   .icon[_ngcontent-%COMP%]{opacity:.7;transition:opacity .2s}.remotes[_ngcontent-%COMP%]:not(.touch-device)   .icon[_ngcontent-%COMP%]:hover{opacity:1}.owner-icon[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:16px}"],changeDetection:0}),s})();function As(o,s){1&o&&(e.TgZ(0,"div",11),e.O4$(),e.TgZ(1,"svg",12),e._UZ(2,"path",13)(3,"rect",14)(4,"circle",15)(5,"circle",16)(6,"circle",17)(7,"path",18)(8,"rect",19)(9,"circle",20)(10,"circle",21)(11,"circle",22)(12,"path",23)(13,"rect",24)(14,"circle",25)(15,"circle",26)(16,"circle",27),e.qZA(),e.kcU(),e.TgZ(17,"div",28)(18,"p",29)(19,"strong"),e._uU(20,"Nessun server inserito!"),e.qZA()(),e.TgZ(21,"p",29),e._uU(22,"Usa l'apposito pulsante per aggiungere il tuo server."),e.qZA()()())}function ws(o,s){if(1&o){const i=e.EpF();e.TgZ(0,"app-upload-endpoints-list",30),e.NdJ("editEvent",function(n){e.CHM(i);const r=e.oxw(2);return e.KtG(r.editEvent.emit(n))})("deleteEvent",function(n){e.CHM(i);const r=e.oxw(2);return e.KtG(r.deleteEvent.emit(n))}),e.qZA()}if(2&o){const i=e.oxw(2);e.Q6J("loading",i.loading())("listType",i.listTypes.OWNED)}}function Us(o,s){if(1&o&&(e.TgZ(0,"div")(1,"p",9),e._uU(2," La lista "),e.TgZ(3,"em"),e._uU(4,"I miei server"),e.qZA(),e._uU(5," mostra tutti i server di cui si \xe8 proprietari e che sono stati aggiunti tramite l'apposito form. Cliccando sui tre puntini verticali di fianco al nome del server, sono disponibili le opzioni per "),e.TgZ(6,"strong"),e._uU(7,"copiare l'ID"),e.qZA(),e._uU(8," del server, "),e.TgZ(9,"strong"),e._uU(10,"modificarne i dati"),e.qZA(),e._uU(11," o "),e.TgZ(12,"strong"),e._uU(13,"eliminarlo"),e.qZA(),e._uU(14,". Con il pulsante "),e.TgZ(15,"em"),e._uU(16,"Nuovo"),e.qZA(),e._uU(17," in basso a destra nel modal, si pu\xf2 aggiungere un nuovo server. "),e.qZA(),e.YNc(18,As,23,0,"div",10)(19,ws,1,2),e.qZA()),2&o){const i=e.oxw();e.xp6(18),e.um2(18,0===i.uploadEndpointsService.remotesList().owned.length?18:19)}}function Zs(o,s){if(1&o){const i=e.EpF();e.TgZ(0,"div")(1,"p",9),e._uU(2," La lista "),e.TgZ(3,"em"),e._uU(4,"Server aggiunti"),e.qZA(),e._uU(5," contiene l'elenco dei server "),e.TgZ(6,"strong"),e._uU(7,"appartenenti a terzi"),e.qZA(),e._uU(8," che sono stati inseriti tramite ID. Per ogni server \xe8 possibile "),e.TgZ(9,"strong"),e._uU(10,"contattarne il proprietario"),e.qZA(),e._uU(11," mediante il link al suo profilo, per inviare un "),e.TgZ(12,"strong"),e._uU(13,"MP"),e.qZA(),e._uU(14,", oppure tramite l'"),e.TgZ(15,"strong"),e._uU(16,"email"),e.qZA(),e._uU(17," fornita dal proprietario stesso. Ad eccezione dei predefiniti, inseriti di default a tutti, cliccando sui tre puntini verticali di fianco al nome del server, diviene possibile "),e.TgZ(18,"strong"),e._uU(19,"copiare l'ID"),e.qZA(),e._uU(20," del server o "),e.TgZ(21,"strong"),e._uU(22,"togliere"),e.qZA(),e._uU(23," il server dalla lista. Con il pulsante "),e.TgZ(24,"em"),e._uU(25,"Nuovo"),e.qZA(),e._uU(26," in basso a destra nel modal, si pu\xf2 aggiungere un nuovo server. "),e.qZA(),e.TgZ(27,"app-upload-endpoints-list",31),e.NdJ("deleteEvent",function(n){e.CHM(i);const r=e.oxw();return e.KtG(r.unlinkEvent.emit(n))}),e.qZA()()}if(2&o){const i=e.oxw();e.xp6(27),e.Q6J("loading",i.loading())("listType",i.listTypes.LINKED)}}let Os=(()=>{var o;class s{constructor(){this.uploadEndpointsService=(0,e.f3M)(tt.r),this.loading=(0,e.qHZ)(!0),this.deleteEvent=new e.vpe,this.editEvent=new e.vpe,this.unlinkEvent=new e.vpe,this.activeList=Le.D.OWNED,this.listTypes=Le.D}ngOnInit(){this.activeList=this.uploadEndpointsService.lastListSelected||(0===this.uploadEndpointsService.remotesList().owned.length?Le.D.LINKED:Le.D.OWNED),this.uploadEndpointsService.lastListSelected||this.saveLastActiveList()}saveLastActiveList(){this.uploadEndpointsService.lastListSelected=this.activeList}}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upload-endpoints-list-wrapper"]],inputs:{loading:[e.lbL.SignalBased,"loading"]},outputs:{deleteEvent:"deleteEvent",editEvent:"editEvent",unlinkEvent:"unlinkEvent"},standalone:!0,features:[e.jDz],decls:14,vars:7,consts:[[1,"mb-3","text-justify"],[1,"my-4","d-flex","justify-content-center"],[1,"btn","btn-sm",3,"ngClass","click"],[1,"btn","btn-sm","mx-2",3,"ngClass","click"],["ngbNav","",1,"mb-0","list-unstyled","d-none",3,"activeId","destroyOnHide","activeIdChange"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavContent",""],[3,"ngbNavOutlet"],[1,"text-justify","mb-3"],["class","text-center mt-4"],[1,"text-center","mt-4"],["xmlns","http://www.w3.org/2000/svg","width","150","height","150","viewBox","458.8734130859375 250 280.2471923828125 331.2012939453125",0,"xmlns","xlink","http://www.w3.org/1999/xlink","role","img"],["d","M858.65906,513.48057H594.33494a7.97081,7.97081,0,0,1-7.96157-7.96157V416.34942a7.97081,7.97081,0,0,1,7.96157-7.96157H858.65906a7.9707,7.9707,0,0,1,7.96157,7.96157V505.519A7.9707,7.9707,0,0,1,858.65906,513.48057Z","transform","translate(-127.5 -158.38785)","fill","#f1f1f1"],["x","500.27353","y","273.88471","width","70.06181","height","7.96157","fill","currentColor"],["cx","662.68956","cy","278.66165","r","4.77694","fill","currentColor"],["cx","678.6127","cy","278.66165","r","4.77694","fill","currentColor"],["cx","694.53583","cy","278.66165","r","4.77694","fill","currentColor"],["d","M858.65906,626.53486H594.33494a7.97081,7.97081,0,0,1-7.96157-7.96157V529.40371a7.97081,7.97081,0,0,1,7.96157-7.96157H858.65906a7.9707,7.9707,0,0,1,7.96157,7.96157v89.16958A7.9707,7.9707,0,0,1,858.65906,626.53486Z","transform","translate(-127.5 -158.38785)","fill","#f1f1f1"],["x","500.27353","y","386.939","width","70.06181","height","7.96157","fill","currentColor"],["cx","662.68956","cy","391.71594","r","4.77694","fill","currentColor"],["cx","678.6127","cy","391.71594","r","4.77694","fill","currentColor"],["cx","694.53583","cy","391.71594","r","4.77694","fill","currentColor"],["d","M858.65906,739.58915H594.33494a7.97081,7.97081,0,0,1-7.96157-7.96156V642.458a7.97081,7.97081,0,0,1,7.96157-7.96157H858.65906a7.9707,7.9707,0,0,1,7.96157,7.96157v89.16959A7.97069,7.97069,0,0,1,858.65906,739.58915Z","transform","translate(-127.5 -158.38785)","fill","#f1f1f1"],["x","500.27353","y","499.99329","width","70.06181","height","7.96157","fill","currentColor"],["cx","662.68956","cy","504.77024","r","4.77694","fill","currentColor"],["cx","678.6127","cy","504.77024","r","4.77694","fill","currentColor"],["cx","694.53583","cy","504.77024","r","4.77694","fill","currentColor"],[1,"small","mt-2"],[1,"mb-0"],[3,"loading","listType","editEvent","deleteEvent"],[1,"d-block",3,"loading","listType","deleteEvent"]],template:function(t,n){if(1&t){const r=e.EpF();e.TgZ(0,"p",0),e._uU(1," Tramite le liste server \xe8 possibile visualizzare e gestire i server attualmente associati all'account loggato.\n"),e.qZA(),e.TgZ(2,"div",1)(3,"button",2),e.NdJ("click",function(){e.CHM(r);const c=e.MAs(8);return e.KtG(c.select(n.listTypes.OWNED))}),e._uU(4,"I miei server"),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){e.CHM(r);const c=e.MAs(8);return e.KtG(c.select(n.listTypes.LINKED))}),e._uU(6,"Server aggiunti"),e.qZA()(),e.TgZ(7,"ul",4,5),e.NdJ("activeIdChange",function(c){return n.activeList=c})("activeIdChange",function(){return n.saveLastActiveList()}),e.TgZ(9,"li",6),e.YNc(10,Us,20,1,"ng-template",7),e.qZA(),e.TgZ(11,"li",6),e.YNc(12,Zs,28,2,"ng-template",7),e.qZA()(),e._UZ(13,"div",8)}if(2&t){const r=e.MAs(8);e.xp6(3),e.Q6J("ngClass",n.activeList===n.listTypes.OWNED?"btn-primary":"btn-outline-primary"),e.xp6(2),e.Q6J("ngClass",n.activeList===n.listTypes.LINKED?"btn-primary":"btn-outline-primary"),e.xp6(2),e.Q6J("activeId",n.activeList)("destroyOnHide",!0),e.xp6(2),e.Q6J("ngbNavItem",n.listTypes.OWNED),e.xp6(2),e.Q6J("ngbNavItem",n.listTypes.LINKED),e.xp6(2),e.Q6J("ngbNavOutlet",r)}},dependencies:[y.Oz,y.uN,y.Pz,y.nv,y.Is,y.Dy,f.mk,Es],styles:["svg[_ngcontent-%COMP%]{opacity:.7;max-width:100%}"],changeDetection:0}),s})();var Ss=g(1513),Ps=g(2002);const Is=["uploadRemotesModal"];function Ds(o,s){if(1&o){const i=e.EpF();e.TgZ(0,"app-upload-endpoints-list-wrapper",5),e.NdJ("deleteEvent",function(n){e.CHM(i);const r=e.oxw(3);return e.KtG(r.listEvent(n,r.listTypes.OWNED,r.buttonActions.DELETE))})("editEvent",function(n){e.CHM(i);const r=e.oxw(3);return e.KtG(r.listEvent(n,r.listTypes.OWNED,r.buttonActions.SAVE))})("unlinkEvent",function(n){e.CHM(i);const r=e.oxw(3);return e.KtG(r.listEvent(n,r.listTypes.LINKED,r.buttonActions.DELETE))}),e.qZA()}if(2&o){const i=e.oxw(3);e.Q6J("loading",i.loading())}}function Fs(o,s){if(1&o){const i=e.EpF();e.TgZ(0,"app-upload-endpoints-delete",7),e.NdJ("confirmationEvent",function(n){e.CHM(i);const r=e.oxw(4);return e.KtG(r.deleteButtonEnabled.set(n))}),e.qZA()}if(2&o){const i=e.oxw(4);e.Q6J("remote",s)("type",i.currentRemoteType())}}function Ls(o,s){if(1&o&&e.YNc(0,Fs,1,2,"app-upload-endpoints-delete",6),2&o){const i=e.oxw(3);let t;e.um2(0,(t=i.currentRemote())?0:-1,t)}}function ks(o,s){if(1&o){const i=e.EpF();e.TgZ(0,"app-upload-endpoints-form",8),e.NdJ("validityChange",function(n){e.CHM(i);const r=e.oxw(3);return e.KtG(r.saveButtonEnabled.set(n))})("saveRemoteEvent",function(n){e.CHM(i);const r=e.oxw(3);return e.KtG(r.saveRemote(n))}),e.qZA()}if(2&o){const i=e.oxw(3);e.Q6J("remoteId",i.currentRemoteId())("remote",i.currentRemote())("saveObservable",i.buttonSaveSubject)}}function Rs(o,s){if(1&o&&e.YNc(0,Ds,1,1,"app-upload-endpoints-list-wrapper",4)(1,Ls,1,1)(2,ks,1,3),2&o){const i=e.oxw(2);e.um2(0,i.currentAction()===i.buttonActions.ADD?0:i.currentAction()===i.buttonActions.DELETE?1:2)}}function Ns(o,s){if(1&o&&e.YNc(0,Rs,3,1),2&o){const i=e.oxw();e.um2(0,i.isModalOpened()?0:-1)}}function zs(o,s){if(1&o){const i=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.secondaryButtonClick())}),e.qZA(),e.TgZ(1,"button",10),e.NdJ("click",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.primaryButtonClick())}),e.qZA()}if(2&o){const i=e.oxw();e.Q6J("innerText",i.buttonTexts().secondary),e.xp6(),e.Q6J("ngClass",i.currentAction()===i.buttonActions.DELETE?"btn-danger":"btn-primary")("innerText",i.buttonTexts().primary)("disabled",i.buttonDisabled())}}const qs=o=>({"pb-0":o});var K=function(o){return o.SAVE="save",o.ADD="add",o.DELETE="delete",o}(K||{});let Hs=(()=>{var o;class s{constructor(){this.uploadEndpointsService=(0,e.f3M)(tt.r),this.uploadObservablesService=(0,e.f3M)(L.r),this.toastService=(0,e.f3M)(R.k),this.modalsService=(0,e.f3M)(Ss.F),this.loading=(0,e.tdS)(!1),this.isModalOpened=(0,e.tdS)(!1),this.saveButtonEnabled=(0,e.tdS)(!1),this.deleteButtonEnabled=(0,e.tdS)(!1),this.buttonSaveSubject=new O.x,this.currentAction=(0,e.tdS)(K.ADD),this.buttonTexts=(0,e.Flj)(()=>{switch(this.currentAction()){case K.ADD:return{primary:"Nuovo",secondary:"Chiudi"};case K.SAVE:return{primary:"Salva",secondary:"Annulla"};case K.DELETE:return{primary:"Elimina",secondary:"Annulla"}}}),this.buttonActions=K,this.listTypes=Le.D,this.buttonDisabled=(0,e.Flj)(()=>{const t=this.currentAction(),n=this.saveButtonEnabled(),r=this.deleteButtonEnabled();return this.loading()||t===K.SAVE&&!n||t===K.DELETE&&!r}),this.currentRemoteId=(0,e.tdS)(void 0),this.currentRemoteType=(0,e.tdS)(void 0),this.currentRemote=(0,e.Flj)(()=>{const t=this.currentRemoteType();if(!t)return;const n=this.currentRemoteId();return n?this.uploadEndpointsService.remotesList()[t].find(r=>r.id===n):void 0}),this.uploadObservablesService.remoteFormObservable.pipe((0,Ut.sL)()).subscribe(t=>{t&&(this.currentAction.set(K.SAVE),this.currentRemoteId.set(t),this.saveButtonEnabled.set(ii(t)),this.open(!1))})}ngAfterViewInit(){this.modalsService.openFromUrlQueryParam(Ps.u.UPLOAD_ENDPOINTS,void 0,()=>this.open(!1)),this.currentAction()===K.SAVE&&this.open(!1)}open(t=!0){this.remotesModal&&(t&&this.resetAction(),this.isModalOpened.set(!0),this.remotesModal.open())}primaryButtonClick(){var t=this;return(0,b.Z)(function*(){const n=t.currentAction();if(n!==K.ADD){if(n===K.DELETE){var r;const a=null===(r=t.currentRemote())||void 0===r?void 0:r.id,c=t.currentRemoteType();return a&&c?void(yield t.removeRemote(a,c)):void t.toastService.show({content:"Nessun server selezionato!",level:me.m.ERROR})}n===K.SAVE&&t.saveButtonEnabled()&&t.buttonSaveSubject.next()}else t.setCurrentAction(K.SAVE)})()}removeRemote(t,n){var r=this;return(0,b.Z)(function*(){r.loading.set(!0),r.resetAction(),(n===Le.D.LINKED?yield r.uploadEndpointsService.unlinkRemote(t):yield r.uploadEndpointsService.deleteRemote(t))||r.toastService.show({content:"Errore nella rimozione del server!",level:me.m.ERROR}),r.loading.set(!1)})()}saveRemote(t){var n=this;return(0,b.Z)(function*(){n.loading.set(!0),n.resetAction();let r=!1;if(function Wo(o){return"object"==typeof o&&null!==o&&(0,Sn.o8)(o,"email")}(t)){const a=yield n.uploadEndpointsService.upsertRemote(t.name,t.address,t.email,t.id);r=void 0!==a,a&&t.selectAfterAdd&&n.uploadEndpointsService.setActiveRemote(a)}else{if(n.uploadEndpointsService.remotesList().linked.findIndex(a=>a.id===t.id)>-1)return n.toastService.show({content:"Questo server \xe8 gi\xe0 nella lista!"}),void n.loading.set(!1);r=yield n.uploadEndpointsService.linkRemote(t.id),t.selectAfterAdd&&r&&n.uploadEndpointsService.setActiveRemote(t.id)}r||n.toastService.show({content:"Errore nell'inserimento server!",level:me.m.ERROR}),n.loading.set(!1)})()}secondaryButtonClick(){var n;this.currentAction()===K.ADD?null===(n=this.remotesModal)||void 0===n||n.close():this.resetAction()}resetAction(){this.setCurrentAction(K.ADD),this.currentRemoteType.set(void 0),this.currentRemoteId.set(void 0),this.saveButtonEnabled.set(!1),this.deleteButtonEnabled.set(!1)}setCurrentAction(t){var n;this.currentAction.set(t),null===(n=this.remotesModal)||void 0===n||n.scrollBodyToTop()}listEvent(t,n,r){this.currentRemoteType.set(n),this.currentRemoteId.set(t),this.setCurrentAction(r)}}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upload-endpoints-manager"]],viewQuery:function(t,n){if(1&t&&e.Gf(Is,5),2&t){let r;e.iGM(r=e.CRH())&&(n.remotesModal=r.first)}},standalone:!0,features:[e.jDz],decls:4,vars:4,consts:[["title","Gestione server di upload",3,"disableCloseButton","bodyClass","hidden"],["uploadRemotesModal",""],["appModalBody",""],["appModalFooter",""],[3,"loading"],[3,"loading","deleteEvent","editEvent","unlinkEvent"],[3,"remote","type"],[3,"remote","type","confirmationEvent"],[3,"remoteId","remote","saveObservable","validityChange","saveRemoteEvent"],[1,"btn","btn-secondary",3,"innerText","click"],[1,"btn",3,"ngClass","innerText","disabled","click"]],template:function(t,n){1&t&&(e.TgZ(0,"app-modal",0,1),e.NdJ("hidden",function(){return n.isModalOpened.set(!1)}),e.YNc(2,Ns,1,1,"ng-template",2)(3,zs,2,4,"ng-template",3),e.qZA()),2&t&&e.Q6J("disableCloseButton",!0)("bodyClass",e.VKq(2,qs,n.currentAction()===n.buttonActions.SAVE))},dependencies:[J.z,ne.z,se.J,ze.j,Os,f.mk,Vo,is],encapsulation:2,changeDetection:0}),s})();const Js=(o,s)=>s.id;function Qs(o,s){if(1&o&&(e.TgZ(0,"option",7),e._uU(1),e.qZA()),2&o){const i=s.$implicit,t=s.$index,n=e.oxw();e.Q6J("value",t)("selected",i.id===n.uploadEndpointsService.activeRemoteId())("disabled",i.deleted),e.xp6(),e.Oqu(i.name)}}const Bs=o=>({"cursor-pointer":o});let si=(()=>{var o;class s{constructor(){this.uploadEndpointsService=(0,e.f3M)(tt.r),this.fileLoading=(0,e.qHZ)(!0)}setRemote(t){const n=this.uploadEndpointsService.remotesList().linked[Number(t)];n&&!n.deleted&&this.uploadEndpointsService.setActiveRemote(n.id)}}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upload-endpoints"]],inputs:{fileLoading:[e.lbL.SignalBased,"fileLoading"]},standalone:!0,features:[e.jDz],decls:12,vars:4,consts:[[1,"input-group"],["for","upload-endpoints-select",1,"input-group-text"],["id","upload-endpoints-select",1,"form-select",3,"disabled","change"],["remoteSelect",""],[1,"input-group-text","text-muted","cursor-pointer",3,"ngClass","click"],[1,"material-icons-outlined","d-block"],["modal",""],[3,"value","selected","disabled"]],template:function(t,n){if(1&t){const r=e.EpF();e.TgZ(0,"div",0)(1,"label",1),e._uU(2,"Server:"),e.qZA(),e.TgZ(3,"select",2,3),e.NdJ("change",function(){e.CHM(r);const c=e.MAs(4);return e.KtG(n.setRemote(c.value))}),e.SjG(5,Qs,2,4,"option",7,Js),e.qZA(),e.TgZ(7,"div",4),e.NdJ("click",function(){e.CHM(r);const c=e.MAs(11);return e.KtG(!n.fileLoading()&&c.open())}),e.TgZ(8,"span",5),e._uU(9,"edit"),e.qZA()()(),e._UZ(10,"app-upload-endpoints-manager",null,6)}2&t&&(e.xp6(3),e.Q6J("disabled",n.fileLoading()),e.xp6(2),e.wJu(n.uploadEndpointsService.remotesList().linked),e.xp6(2),e.Q6J("ngClass",e.VKq(2,Bs,!n.fileLoading())))},dependencies:[Hs,f.mk],styles:[".input-group[_ngcontent-%COMP%]{box-shadow:0 .125rem .25rem #00000013}@media (min-width: 960px){.input-group[_ngcontent-%COMP%]{margin-top:1.5rem}}"],changeDetection:0}),s})();var Vs=g(5851),ri=g(446),Gs=g(7621);const Ys=o=>({disabled:o});let ai=(()=>{var o;class s{constructor(t,n,r){this.uploadObservalesService=t,this.toastService=n,this.proxyService=r,this.isSelected=!1,this.actionNames=v.In,this.canBeCropped=!0}ngOnInit(){this.canBeCropped=(0,F.$H)(this.file.ext)}pushAction(t){this.uploadObservalesService.pushAction({name:t,payload:{entities:(0,F.jL)([this.file])}})}pushSelectedFile(){this.dropdownRef.close(),this.uploadObservalesService.pushSelectedFile({name:this.file.name,selected:!this.isSelected})}downloadFile(){var t=this;return(0,b.Z)(function*(){t.dropdownRef.close(),t.uploadObservalesService.pushEntityPending([{type:v.VC.FILE,name:t.file.name,start:!0}]);const n=yield t.proxyService.get(t.file.embedUrl);if(n){const r=URL.createObjectURL(n),a=document.createElement("a");a.href=r,a.download=t.file.name,a.click()}else t.toastService.show({content:"Errore nel download del file <strong>".concat(t.file.name,"</strong>!"),level:me.m.ERROR});t.uploadObservalesService.pushEntityPending([{type:v.VC.FILE,name:t.file.name,start:!1}])})()}}return(o=s).\u0275fac=function(t){return new(t||o)(e.Y36(L.r),e.Y36(R.k),e.Y36(Gs.y))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upload-file-menu"]],inputs:{file:"file",isSelected:"isSelected",dropdownRef:"dropdownRef"},decls:43,vars:5,consts:[[1,"list-unstyled","mb-0","dropdown-material-icons"],["role","button",1,"dropdown-item","d-flex","align-items-center",3,"click"],[1,"material-icons-outlined","d-block"],["role","button",1,"dropdown-item","d-flex","align-items-center",3,"ngClass","click"],[1,"material-icons-outlined","d-block",3,"innerText"],[3,"innerText"],[1,"dropdown-divider"]],template:function(t,n){1&t&&(e.TgZ(0,"ul",0)(1,"li")(2,"a",1),e.NdJ("click",function(){return n.pushAction(n.actionNames.FILE_SHOW_LINKS)}),e.TgZ(3,"div",2),e._uU(4,"construction"),e.qZA(),e.TgZ(5,"div"),e._uU(6,"Codici"),e.qZA()()(),e.TgZ(7,"li")(8,"a",1),e.NdJ("click",function(){return n.downloadFile()}),e.TgZ(9,"div",2),e._uU(10,"file_download"),e.qZA(),e.TgZ(11,"div"),e._uU(12,"Scarica"),e.qZA()()(),e.TgZ(13,"li")(14,"a",1),e.NdJ("click",function(){return n.pushAction(n.actionNames.MOVE)}),e.TgZ(15,"div",2),e._uU(16,"drive_file_move"),e.qZA(),e.TgZ(17,"div"),e._uU(18,"Sposta"),e.qZA()()(),e.TgZ(19,"li")(20,"a",1),e.NdJ("click",function(){return n.pushAction(n.actionNames.RENAME)}),e.TgZ(21,"div",2),e._uU(22," drive_file_rename_outline "),e.qZA(),e.TgZ(23,"div"),e._uU(24,"Rinomina"),e.qZA()()(),e.TgZ(25,"li")(26,"a",3),e.NdJ("click",function(){return n.pushAction(n.actionNames.FILE_EDIT)}),e.TgZ(27,"div",2),e._uU(28,"transform"),e.qZA(),e.TgZ(29,"div"),e._uU(30,"Modifica"),e.qZA()()(),e.TgZ(31,"li")(32,"a",1),e.NdJ("click",function(){return n.pushSelectedFile()}),e._UZ(33,"div",4)(34,"div",5),e.qZA()(),e.TgZ(35,"li"),e._UZ(36,"hr",6),e.qZA(),e.TgZ(37,"li")(38,"a",1),e.NdJ("click",function(){return n.pushAction(n.actionNames.DELETE)}),e.TgZ(39,"div",2),e._uU(40,"delete"),e.qZA(),e.TgZ(41,"div"),e._uU(42,"Elimina"),e.qZA()()()()),2&t&&(e.xp6(26),e.Q6J("ngClass",e.VKq(3,Ys,!n.canBeCropped)),e.xp6(7),e.Q6J("innerText",n.isSelected?"unpublished":"check_circle_outline"),e.xp6(),e.Q6J("innerText",n.isSelected?"Deseleziona":"Seleziona"))},dependencies:[f.mk]}),s})(),Ws=(()=>{var o;class s{}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upload-all-file-filtered"]],decls:17,vars:0,consts:[[1,"pt-3","px-2","text-center","empty-filtered-list"],["xmlns","http://www.w3.org/2000/svg","width","161.909065","height","158.04346","viewBox","0 0 647.63626 632.17383",1,"p-1","overflow-visible"],["d","M687.3279,276.08691H512.81813a15.01828,15.01828,0,0,0-15,15v387.85l-2,.61005-42.81006,13.11a8.00676,8.00676,0,0,1-9.98974-5.31L315.678,271.39691a8.00313,8.00313,0,0,1,5.31006-9.99l65.97022-20.2,191.25-58.54,65.96972-20.2a7.98927,7.98927,0,0,1,9.99024,5.3l32.5498,106.32Z","transform","translate(-276.18187 -133.91309)","fill","#f2f2f2"],["d","M725.408,274.08691l-39.23-128.14a16.99368,16.99368,0,0,0-21.23-11.28l-92.75,28.39L380.95827,221.60693l-92.75,28.4a17.0152,17.0152,0,0,0-11.28028,21.23l134.08008,437.93a17.02661,17.02661,0,0,0,16.26026,12.03,16.78926,16.78926,0,0,0,4.96972-.75l63.58008-19.46,2-.62v-2.09l-2,.61-64.16992,19.65a15.01489,15.01489,0,0,1-18.73-9.95l-134.06983-437.94a14.97935,14.97935,0,0,1,9.94971-18.73l92.75-28.4,191.24024-58.54,92.75-28.4a15.15551,15.15551,0,0,1,4.40966-.66,15.01461,15.01461,0,0,1,14.32032,10.61l39.0498,127.56.62012,2h2.08008Z","transform","translate(-276.18187 -133.91309)","fill","#3f3d56"],["d","M398.86279,261.73389a9.0157,9.0157,0,0,1-8.61133-6.3667l-12.88037-42.07178a8.99884,8.99884,0,0,1,5.9712-11.24023l175.939-53.86377a9.00867,9.00867,0,0,1,11.24072,5.9707l12.88037,42.07227a9.01029,9.01029,0,0,1-5.9707,11.24072L401.49219,261.33887A8.976,8.976,0,0,1,398.86279,261.73389Z","transform","translate(-276.18187 -133.91309)","fill","#565656"],["cx","190.15351","cy","24.95465","r","20","fill","#565656"],["cx","190.15351","cy","24.95465","r","12.66462","fill","#fff"],["d","M878.81836,716.08691h-338a8.50981,8.50981,0,0,1-8.5-8.5v-405a8.50951,8.50951,0,0,1,8.5-8.5h338a8.50982,8.50982,0,0,1,8.5,8.5v405A8.51013,8.51013,0,0,1,878.81836,716.08691Z","transform","translate(-276.18187 -133.91309)","fill","#e6e6e6"],["d","M723.31813,274.08691h-210.5a17.02411,17.02411,0,0,0-17,17v407.8l2-.61v-407.19a15.01828,15.01828,0,0,1,15-15H723.93825Zm183.5,0h-394a17.02411,17.02411,0,0,0-17,17v458a17.0241,17.0241,0,0,0,17,17h394a17.0241,17.0241,0,0,0,17-17v-458A17.02411,17.02411,0,0,0,906.81813,274.08691Zm15,475a15.01828,15.01828,0,0,1-15,15h-394a15.01828,15.01828,0,0,1-15-15v-458a15.01828,15.01828,0,0,1,15-15h394a15.01828,15.01828,0,0,1,15,15Z","transform","translate(-276.18187 -133.91309)","fill","#3f3d56"],["d","M801.81836,318.08691h-184a9.01015,9.01015,0,0,1-9-9v-44a9.01016,9.01016,0,0,1,9-9h184a9.01016,9.01016,0,0,1,9,9v44A9.01015,9.01015,0,0,1,801.81836,318.08691Z","transform","translate(-276.18187 -133.91309)","fill","#565656"],["cx","433.63626","cy","105.17383","r","20","fill","#565656"],["cx","433.63626","cy","105.17383","r","12.18187","fill","#fff"],[1,"mt-2"],[1,"text-muted"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.O4$(),e.TgZ(1,"svg",1),e._UZ(2,"path",2)(3,"path",3)(4,"path",4)(5,"circle",5)(6,"circle",6)(7,"path",7)(8,"path",8)(9,"path",9)(10,"circle",10)(11,"circle",11),e.qZA(),e.kcU(),e.TgZ(12,"div",12)(13,"strong"),e._uU(14,"Nessun elemento trovato!"),e.qZA()(),e.TgZ(15,"div",13),e._uU(16," Prova a modificare le parole chiave da cercare. "),e.qZA()())},styles:["svg[_ngcontent-%COMP%]{opacity:.5}"]}),s})(),Ks=(()=>{var o;class s{constructor(t){this.uploadObservablesService=t}startUpload(){this.uploadObservablesService.pushStartUpload()}}return(o=s).\u0275fac=function(t){return new(t||o)(e.Y36(L.r))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upload-empty-file-list"]],decls:7,vars:0,consts:[[1,"text-center","py-2","px-2"],[1,"text-muted"],[1,"mb-3"],[1,"btn","btn-primary",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"Nessun file caricato!"),e.qZA(),e.TgZ(3,"div",2),e._uU(4," Puoi iniziare l'upload di un nuovo file tramite il pulsante sottostante. "),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){return n.startUpload()}),e._uU(6,"Carica!"),e.qZA()())}}),s})();var li=g(8792),$s=g(1088),he=g(1116),ke=g(2831),$=g(2495),ci=g(6034),Zt=g(7394),js=g(1687),Xs=g(927),di=g(5592),er=g(7398),pi=g(8180),In=g(7921),ui=g(9388);function Dn(o,s,i){for(let t in s)if(s.hasOwnProperty(t)){const n=s[t];n?o.setProperty(t,n,null!=i&&i.has(t)?"important":""):o.removeProperty(t)}return o}function mt(o,s){const i=s?"":"none";Dn(o.style,{"touch-action":s?"":"none","-webkit-user-drag":s?"":"none","-webkit-tap-highlight-color":s?"":"transparent","user-select":i,"-ms-user-select":i,"-webkit-user-select":i,"-moz-user-select":i})}function mi(o,s,i){Dn(o.style,{position:s?"":"fixed",top:s?"":"0",opacity:s?"":"0",left:s?"":"-999em"},i)}function tn(o,s){return s&&"none"!=s?o+" "+s:o}function gi(o){const s=o.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(o)*s}function Fn(o,s){return o.getPropertyValue(s).split(",").map(t=>t.trim())}function Ln(o){const s=o.getBoundingClientRect();return{top:s.top,right:s.right,bottom:s.bottom,left:s.left,width:s.width,height:s.height,x:s.x,y:s.y}}function kn(o,s,i){const{top:t,bottom:n,left:r,right:a}=o;return i>=t&&i<=n&&s>=r&&s<=a}function Ot(o,s,i){o.top+=s,o.bottom=o.top+o.height,o.left+=i,o.right=o.left+o.width}function _i(o,s,i,t){const{top:n,right:r,bottom:a,left:c,width:u,height:_}=o,M=u*s,E=_*s;return t>n-E&&t<a+E&&i>c-M&&i<r+M}class hi{constructor(s){this._document=s,this.positions=new Map}clear(){this.positions.clear()}cache(s){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),s.forEach(i=>{this.positions.set(i,{scrollPosition:{top:i.scrollTop,left:i.scrollLeft},clientRect:Ln(i)})})}handleScroll(s){const i=(0,ke.sA)(s),t=this.positions.get(i);if(!t)return null;const n=t.scrollPosition;let r,a;if(i===this._document){const _=this.getViewportScrollPosition();r=_.top,a=_.left}else r=i.scrollTop,a=i.scrollLeft;const c=n.top-r,u=n.left-a;return this.positions.forEach((_,M)=>{_.clientRect&&i!==M&&i.contains(M)&&Ot(_.clientRect,c,u)}),n.top=r,n.left=a,{top:c,left:u}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function fi(o){const s=o.cloneNode(!0),i=s.querySelectorAll("[id]"),t=o.nodeName.toLowerCase();s.removeAttribute("id");for(let n=0;n<i.length;n++)i[n].removeAttribute("id");return"canvas"===t?xi(o,s):("input"===t||"select"===t||"textarea"===t)&&Ci(o,s),vi("canvas",o,s,xi),vi("input, textarea, select",o,s,Ci),s}function vi(o,s,i,t){const n=s.querySelectorAll(o);if(n.length){const r=i.querySelectorAll(o);for(let a=0;a<n.length;a++)t(n[a],r[a])}}let nr=0;function Ci(o,s){"file"!==s.type&&(s.value=o.value),"radio"===s.type&&s.name&&(s.name="mat-clone-".concat(s.name,"-").concat(nr++))}function xi(o,s){const i=s.getContext("2d");if(i)try{i.drawImage(o,0,0)}catch(t){}}const Ti=(0,ke.i$)({passive:!0}),nn=(0,ke.i$)({passive:!1}),Rn=new Set(["position"]);class or{get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(s){s!==this._disabled&&(this._disabled=s,this._toggleNativeDragInteractions(),this._handles.forEach(i=>mt(i,s)))}constructor(s,i,t,n,r,a){this._config=i,this._document=t,this._ngZone=n,this._viewportRuler=r,this._dragDropRegistry=a,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new O.x,this._pointerMoveSubscription=Zt.w0.EMPTY,this._pointerUpSubscription=Zt.w0.EMPTY,this._scrollSubscription=Zt.w0.EMPTY,this._resizeSubscription=Zt.w0.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new O.x,this.started=new O.x,this.released=new O.x,this.ended=new O.x,this.entered=new O.x,this.exited=new O.x,this.dropped=new O.x,this.moved=this._moveEvents,this._pointerDown=c=>{if(this.beforeStarted.next(),this._handles.length){const u=this._getTargetHandle(c);u&&!this._disabledHandles.has(u)&&!this.disabled&&this._initializeDragSequence(u,c)}else this.disabled||this._initializeDragSequence(this._rootElement,c)},this._pointerMove=c=>{const u=this._getPointerPositionOnPage(c);if(!this._hasStartedDragging){if(Math.abs(u.x-this._pickupPositionOnPage.x)+Math.abs(u.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const P=Date.now()>=this._dragStartTime+this._getDragStartDelay(c),z=this._dropContainer;if(!P)return void this._endDragSequence(c);(!z||!z.isDragging()&&!z.isReceiving())&&(c.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(c)))}return}c.preventDefault();const _=this._getConstrainedPointerPosition(u);if(this._hasMoved=!0,this._lastKnownPointerPosition=u,this._updatePointerDirectionDelta(_),this._dropContainer)this._updateActiveDropContainer(_,u);else{const M=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,E=this._activeTransform;E.x=_.x-M.x+this._passiveTransform.x,E.y=_.y-M.y+this._passiveTransform.y,this._applyRootElementTransform(E.x,E.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:_,event:c,distance:this._getDragDistance(_),delta:this._pointerDirectionDelta})})},this._pointerUp=c=>{this._endDragSequence(c)},this._nativeDragStart=c=>{if(this._handles.length){const u=this._getTargetHandle(c);u&&!this._disabledHandles.has(u)&&!this.disabled&&c.preventDefault()}else this.disabled||c.preventDefault()},this.withRootElement(s).withParent(i.parentDragRef||null),this._parentPositions=new hi(t),a.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(s){this._handles=s.map(t=>(0,$.fI)(t)),this._handles.forEach(t=>mt(t,this.disabled)),this._toggleNativeDragInteractions();const i=new Set;return this._disabledHandles.forEach(t=>{this._handles.indexOf(t)>-1&&i.add(t)}),this._disabledHandles=i,this}withPreviewTemplate(s){return this._previewTemplate=s,this}withPlaceholderTemplate(s){return this._placeholderTemplate=s,this}withRootElement(s){const i=(0,$.fI)(s);return i!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{i.addEventListener("mousedown",this._pointerDown,nn),i.addEventListener("touchstart",this._pointerDown,Ti),i.addEventListener("dragstart",this._nativeDragStart,nn)}),this._initialTransform=void 0,this._rootElement=i),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(s){return this._boundaryElement=s?(0,$.fI)(s):null,this._resizeSubscription.unsubscribe(),s&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(s){return this._parentDragRef=s,this}dispose(){var s,i;this._removeRootElementListeners(this._rootElement),this.isDragging()&&(null===(i=this._rootElement)||void 0===i||i.remove()),null===(s=this._anchor)||void 0===s||s.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(s){!this._disabledHandles.has(s)&&this._handles.indexOf(s)>-1&&(this._disabledHandles.add(s),mt(s,!0))}enableHandle(s){this._disabledHandles.has(s)&&(this._disabledHandles.delete(s),mt(s,this.disabled))}withDirection(s){return this._direction=s,this}_withDropContainer(s){this._dropContainer=s}getFreeDragPosition(){const s=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:s.x,y:s.y}}setFreeDragPosition(s){return this._activeTransform={x:0,y:0},this._passiveTransform.x=s.x,this._passiveTransform.y=s.y,this._dropContainer||this._applyRootElementTransform(s.x,s.y),this}withPreviewContainer(s){return this._previewContainer=s,this}_sortFromLastPointerPosition(){const s=this._lastKnownPointerPosition;s&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(s),s)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){var s,i;null===(s=this._preview)||void 0===s||s.remove(),null===(i=this._previewRef)||void 0===i||i.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){var s,i;null===(s=this._placeholder)||void 0===s||s.remove(),null===(i=this._placeholderRef)||void 0===i||i.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(s){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:s}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(s),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const i=this._getPointerPositionOnPage(s);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(i),dropPoint:i,event:s})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(s){St(s)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const i=this._dropContainer;if(i){const t=this._rootElement,n=t.parentNode,r=this._placeholder=this._createPlaceholderElement(),a=this._anchor=this._anchor||this._document.createComment(""),c=this._getShadowRoot();n.insertBefore(a,t),this._initialTransform=t.style.transform||"",this._preview=this._createPreviewElement(),mi(t,!1,Rn),this._document.body.appendChild(n.replaceChild(r,t)),this._getPreviewInsertionPoint(n,c).appendChild(this._preview),this.started.next({source:this,event:s}),i.start(),this._initialContainer=i,this._initialIndex=i.getItemIndex(this)}else this.started.next({source:this,event:s}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(i?i.getScrollableParents():[])}_initializeDragSequence(s,i){this._parentDragRef&&i.stopPropagation();const t=this.isDragging(),n=St(i),r=!n&&0!==i.button,a=this._rootElement,c=(0,ke.sA)(i),u=!n&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),_=n?(0,ci.yG)(i):(0,ci.X6)(i);if(c&&c.draggable&&"mousedown"===i.type&&i.preventDefault(),t||r||u||_)return;if(this._handles.length){const Z=a.style;this._rootElementTapHighlight=Z.webkitTapHighlightColor||"",Z.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(Z=>this._updateOnScroll(Z)),this._boundaryElement&&(this._boundaryRect=Ln(this._boundaryElement));const M=this._previewTemplate;this._pickupPositionInElement=M&&M.template&&!M.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,s,i);const E=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(i);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:E.x,y:E.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,i)}_cleanupDragArtifacts(s){mi(this._rootElement,!0,Rn),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const i=this._dropContainer,t=i.getItemIndex(this),n=this._getPointerPositionOnPage(s),r=this._getDragDistance(n),a=i._isOverContainer(n.x,n.y);this.ended.next({source:this,distance:r,dropPoint:n,event:s}),this.dropped.next({item:this,currentIndex:t,previousIndex:this._initialIndex,container:i,previousContainer:this._initialContainer,isPointerOverContainer:a,distance:r,dropPoint:n,event:s}),i.drop(this,t,this._initialIndex,this._initialContainer,a,r,n,s),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:s,y:i},{x:t,y:n}){let r=this._initialContainer._getSiblingContainerFromPosition(this,s,i);!r&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(s,i)&&(r=this._initialContainer),r&&r!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=r,this._dropContainer.enter(this,s,i,r===this._initialContainer&&r.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:r,currentIndex:r.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(t,n),this._dropContainer._sortItem(this,s,i,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(s,i):this._applyPreviewTransform(s-this._pickupPositionInElement.x,i-this._pickupPositionInElement.y))}_createPreviewElement(){const s=this._previewTemplate,i=this.previewClass,t=s?s.template:null;let n;if(t&&s){const r=s.matchSize?this._initialDomRect:null,a=s.viewContainer.createEmbeddedView(t,s.context);a.detectChanges(),n=yi(a,this._document),this._previewRef=a,s.matchSize?Mi(n,r):n.style.transform=on(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else n=fi(this._rootElement),Mi(n,this._initialDomRect),this._initialTransform&&(n.style.transform=this._initialTransform);return Dn(n.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":"".concat(this._config.zIndex||1e3)},Rn),mt(n,!1),n.classList.add("cdk-drag-preview"),n.setAttribute("dir",this._direction),i&&(Array.isArray(i)?i.forEach(r=>n.classList.add(r)):n.classList.add(i)),n}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const s=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(s.left,s.top);const i=function tr(o){const s=getComputedStyle(o),i=Fn(s,"transition-property"),t=i.find(c=>"transform"===c||"all"===c);if(!t)return 0;const n=i.indexOf(t),r=Fn(s,"transition-duration"),a=Fn(s,"transition-delay");return gi(r[n])+gi(a[n])}(this._preview);return 0===i?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(t=>{const n=a=>{var c;(!a||(0,ke.sA)(a)===this._preview&&"transform"===a.propertyName)&&(null===(c=this._preview)||void 0===c||c.removeEventListener("transitionend",n),t(),clearTimeout(r))},r=setTimeout(n,1.5*i);this._preview.addEventListener("transitionend",n)}))}_createPlaceholderElement(){const s=this._placeholderTemplate,i=s?s.template:null;let t;return i?(this._placeholderRef=s.viewContainer.createEmbeddedView(i,s.context),this._placeholderRef.detectChanges(),t=yi(this._placeholderRef,this._document)):t=fi(this._rootElement),t.style.pointerEvents="none",t.classList.add("cdk-drag-placeholder"),t}_getPointerPositionInElement(s,i,t){const n=i===this._rootElement?null:i,r=n?n.getBoundingClientRect():s,a=St(t)?t.targetTouches[0]:t,c=this._getViewportScrollPosition();return{x:r.left-s.left+(a.pageX-r.left-c.left),y:r.top-s.top+(a.pageY-r.top-c.top)}}_getPointerPositionOnPage(s){const i=this._getViewportScrollPosition(),t=St(s)?s.touches[0]||s.changedTouches[0]||{pageX:0,pageY:0}:s,n=t.pageX-i.left,r=t.pageY-i.top;if(this._ownerSVGElement){const a=this._ownerSVGElement.getScreenCTM();if(a){const c=this._ownerSVGElement.createSVGPoint();return c.x=n,c.y=r,c.matrixTransform(a.inverse())}}return{x:n,y:r}}_getConstrainedPointerPosition(s){const i=this._dropContainer?this._dropContainer.lockAxis:null;let{x:t,y:n}=this.constrainPosition?this.constrainPosition(s,this,this._initialDomRect,this._pickupPositionInElement):s;if("x"===this.lockAxis||"x"===i?n=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):("y"===this.lockAxis||"y"===i)&&(t=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){const{x:r,y:a}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,c=this._boundaryRect,{width:u,height:_}=this._getPreviewRect(),M=c.top+a,E=c.bottom-(_-a);t=bi(t,c.left+r,c.right-(u-r)),n=bi(n,M,E)}return{x:t,y:n}}_updatePointerDirectionDelta(s){const{x:i,y:t}=s,n=this._pointerDirectionDelta,r=this._pointerPositionAtLastDirectionChange,a=Math.abs(i-r.x),c=Math.abs(t-r.y);return a>this._config.pointerDirectionChangeThreshold&&(n.x=i>r.x?1:-1,r.x=i),c>this._config.pointerDirectionChangeThreshold&&(n.y=t>r.y?1:-1,r.y=t),n}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const s=this._handles.length>0||!this.isDragging();s!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=s,mt(this._rootElement,s))}_removeRootElementListeners(s){s.removeEventListener("mousedown",this._pointerDown,nn),s.removeEventListener("touchstart",this._pointerDown,Ti),s.removeEventListener("dragstart",this._nativeDragStart,nn)}_applyRootElementTransform(s,i){const t=on(s,i),n=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=n.transform&&"none"!=n.transform?n.transform:""),n.transform=tn(t,this._initialTransform)}_applyPreviewTransform(s,i){var t;const n=null!==(t=this._previewTemplate)&&void 0!==t&&t.template?void 0:this._initialTransform,r=on(s,i);this._preview.style.transform=tn(r,n)}_getDragDistance(s){const i=this._pickupPositionOnPage;return i?{x:s.x-i.x,y:s.y-i.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:s,y:i}=this._passiveTransform;if(0===s&&0===i||this.isDragging()||!this._boundaryElement)return;const t=this._rootElement.getBoundingClientRect(),n=this._boundaryElement.getBoundingClientRect();if(0===n.width&&0===n.height||0===t.width&&0===t.height)return;const r=n.left-t.left,a=t.right-n.right,c=n.top-t.top,u=t.bottom-n.bottom;n.width>t.width?(r>0&&(s+=r),a>0&&(s-=a)):s=0,n.height>t.height?(c>0&&(i+=c),u>0&&(i-=u)):i=0,(s!==this._passiveTransform.x||i!==this._passiveTransform.y)&&this.setFreeDragPosition({y:i,x:s})}_getDragStartDelay(s){const i=this.dragStartDelay;return"number"==typeof i?i:St(s)?i.touch:i?i.mouse:0}_updateOnScroll(s){const i=this._parentPositions.handleScroll(s);if(i){const t=(0,ke.sA)(s);this._boundaryRect&&t!==this._boundaryElement&&t.contains(this._boundaryElement)&&Ot(this._boundaryRect,i.top,i.left),this._pickupPositionOnPage.x+=i.left,this._pickupPositionOnPage.y+=i.top,this._dropContainer||(this._activeTransform.x-=i.left,this._activeTransform.y-=i.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){var s;return(null===(s=this._parentPositions.positions.get(this._document))||void 0===s?void 0:s.scrollPosition)||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=(0,ke.kV)(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(s,i){const t=this._previewContainer||"global";if("parent"===t)return s;if("global"===t){const n=this._document;return i||n.fullscreenElement||n.webkitFullscreenElement||n.mozFullScreenElement||n.msFullscreenElement||n.body}return(0,$.fI)(t)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_getTargetHandle(s){return this._handles.find(i=>s.target&&(s.target===i||i.contains(s.target)))}}function on(o,s){return"translate3d(".concat(Math.round(o),"px, ").concat(Math.round(s),"px, 0)")}function bi(o,s,i){return Math.max(s,Math.min(i,o))}function St(o){return"t"===o.type[0]}function yi(o,s){const i=o.rootNodes;if(1===i.length&&i[0].nodeType===s.ELEMENT_NODE)return i[0];const t=s.createElement("div");return i.forEach(n=>t.appendChild(n)),t}function Mi(o,s){o.style.width="".concat(s.width,"px"),o.style.height="".concat(s.height,"px"),o.style.transform=on(s.left,s.top)}function Pt(o,s){return Math.max(0,Math.min(s,o))}class rr{constructor(s,i){this._element=s,this._dragDropRegistry=i,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(s){this.withItems(s)}sort(s,i,t,n){const r=this._itemPositions,a=this._getItemIndexFromPointerPosition(s,i,t,n);if(-1===a&&r.length>0)return null;const c="horizontal"===this.orientation,u=r.findIndex(k=>k.drag===s),_=r[a],E=_.clientRect,Z=u>a?1:-1,P=this._getItemOffsetPx(r[u].clientRect,E,Z),z=this._getSiblingOffsetPx(u,r,Z),Ue=r.slice();return function sr(o,s,i){const t=Pt(s,o.length-1),n=Pt(i,o.length-1);if(t===n)return;const r=o[t],a=n<t?-1:1;for(let c=t;c!==n;c+=a)o[c]=o[c+a];o[n]=r}(r,u,a),r.forEach((k,Yn)=>{if(Ue[Yn]===k)return;const ve=k.drag===s,Je=ve?P:z,It=ve?s.getPlaceholderElement():k.drag.getRootElement();k.offset+=Je,c?(It.style.transform=tn("translate3d(".concat(Math.round(k.offset),"px, 0, 0)"),k.initialTransform),Ot(k.clientRect,0,Je)):(It.style.transform=tn("translate3d(0, ".concat(Math.round(k.offset),"px, 0)"),k.initialTransform),Ot(k.clientRect,Je,0))}),this._previousSwap.overlaps=kn(E,i,t),this._previousSwap.drag=_.drag,this._previousSwap.delta=c?n.x:n.y,{previousIndex:u,currentIndex:a}}enter(s,i,t,n){const r=null==n||n<0?this._getItemIndexFromPointerPosition(s,i,t):n,a=this._activeDraggables,c=a.indexOf(s),u=s.getPlaceholderElement();let _=a[r];if(_===s&&(_=a[r+1]),!_&&(null==r||-1===r||r<a.length-1)&&this._shouldEnterAsFirstChild(i,t)&&(_=a[0]),c>-1&&a.splice(c,1),_&&!this._dragDropRegistry.isDragging(_)){const M=_.getRootElement();M.parentElement.insertBefore(u,M),a.splice(r,0,s)}else(0,$.fI)(this._element).appendChild(u),a.push(s);u.style.transform="",this._cacheItemPositions()}withItems(s){this._activeDraggables=s.slice(),this._cacheItemPositions()}withSortPredicate(s){this._sortPredicate=s}reset(){this._activeDraggables.forEach(s=>{const i=s.getRootElement();if(i){var t;const n=null===(t=this._itemPositions.find(r=>r.drag===s))||void 0===t?void 0:t.initialTransform;i.style.transform=n||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(s){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(t=>t.drag===s)}updateOnScroll(s,i){this._itemPositions.forEach(({clientRect:t})=>{Ot(t,s,i)}),this._itemPositions.forEach(({drag:t})=>{this._dragDropRegistry.isDragging(t)&&t._sortFromLastPointerPosition()})}_cacheItemPositions(){const s="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(i=>{const t=i.getVisibleElement();return{drag:i,offset:0,initialTransform:t.style.transform||"",clientRect:Ln(t)}}).sort((i,t)=>s?i.clientRect.left-t.clientRect.left:i.clientRect.top-t.clientRect.top)}_getItemOffsetPx(s,i,t){const n="horizontal"===this.orientation;let r=n?i.left-s.left:i.top-s.top;return-1===t&&(r+=n?i.width-s.width:i.height-s.height),r}_getSiblingOffsetPx(s,i,t){const n="horizontal"===this.orientation,r=i[s].clientRect,a=i[s+-1*t];let c=r[n?"width":"height"]*t;if(a){const u=n?"left":"top",_=n?"right":"bottom";-1===t?c-=a.clientRect[u]-r[_]:c+=r[u]-a.clientRect[_]}return c}_shouldEnterAsFirstChild(s,i){if(!this._activeDraggables.length)return!1;const t=this._itemPositions,n="horizontal"===this.orientation;if(t[0].drag!==this._activeDraggables[0]){const a=t[t.length-1].clientRect;return n?s>=a.right:i>=a.bottom}{const a=t[0].clientRect;return n?s<=a.left:i<=a.top}}_getItemIndexFromPointerPosition(s,i,t,n){const r="horizontal"===this.orientation,a=this._itemPositions.findIndex(({drag:c,clientRect:u})=>c!==s&&((!n||c!==this._previousSwap.drag||!this._previousSwap.overlaps||(r?n.x:n.y)!==this._previousSwap.delta)&&(r?i>=Math.floor(u.left)&&i<Math.floor(u.right):t>=Math.floor(u.top)&&t<Math.floor(u.bottom))));return-1!==a&&this._sortPredicate(a,s)?a:-1}}var fe=function(o){return o[o.NONE=0]="NONE",o[o.UP=1]="UP",o[o.DOWN=2]="DOWN",o}(fe||{}),X=function(o){return o[o.NONE=0]="NONE",o[o.LEFT=1]="LEFT",o[o.RIGHT=2]="RIGHT",o}(X||{});class ar{constructor(s,i,t,n,r){this._dragDropRegistry=i,this._ngZone=n,this._viewportRuler=r,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new O.x,this.entered=new O.x,this.exited=new O.x,this.dropped=new O.x,this.sorted=new O.x,this.receivingStarted=new O.x,this.receivingStopped=new O.x,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=Zt.w0.EMPTY,this._verticalScrollDirection=fe.NONE,this._horizontalScrollDirection=X.NONE,this._stopScrollTimers=new O.x,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),(0,js.F)(0,Xs.Z).pipe((0,ie.R)(this._stopScrollTimers)).subscribe(()=>{const a=this._scrollNode,c=this.autoScrollStep;this._verticalScrollDirection===fe.UP?a.scrollBy(0,-c):this._verticalScrollDirection===fe.DOWN&&a.scrollBy(0,c),this._horizontalScrollDirection===X.LEFT?a.scrollBy(-c,0):this._horizontalScrollDirection===X.RIGHT&&a.scrollBy(c,0)})},this.element=(0,$.fI)(s),this._document=t,this.withScrollableParents([this.element]),i.registerDropContainer(this),this._parentPositions=new hi(t),this._sortStrategy=new rr(this.element,i),this._sortStrategy.withSortPredicate((a,c)=>this.sortPredicate(a,c,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(s,i,t,n){this._draggingStarted(),null==n&&this.sortingDisabled&&(n=this._draggables.indexOf(s)),this._sortStrategy.enter(s,i,t,n),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:s,container:this,currentIndex:this.getItemIndex(s)})}exit(s){this._reset(),this.exited.next({item:s,container:this})}drop(s,i,t,n,r,a,c,u={}){this._reset(),this.dropped.next({item:s,currentIndex:i,previousIndex:t,container:this,previousContainer:n,isPointerOverContainer:r,distance:a,dropPoint:c,event:u})}withItems(s){const i=this._draggables;return this._draggables=s,s.forEach(t=>t._withDropContainer(this)),this.isDragging()&&(i.filter(n=>n.isDragging()).every(n=>-1===s.indexOf(n))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(s){return this._sortStrategy.direction=s,this}connectedTo(s){return this._siblings=s.slice(),this}withOrientation(s){return this._sortStrategy.orientation=s,this}withScrollableParents(s){const i=(0,$.fI)(this.element);return this._scrollableElements=-1===s.indexOf(i)?[i,...s]:s.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(s){return this._isDragging?this._sortStrategy.getItemIndex(s):this._draggables.indexOf(s)}isReceiving(){return this._activeSiblings.size>0}_sortItem(s,i,t,n){if(this.sortingDisabled||!this._domRect||!_i(this._domRect,.05,i,t))return;const r=this._sortStrategy.sort(s,i,t,n);r&&this.sorted.next({previousIndex:r.previousIndex,currentIndex:r.currentIndex,container:this,item:s})}_startScrollingIfNecessary(s,i){if(this.autoScrollDisabled)return;let t,n=fe.NONE,r=X.NONE;if(this._parentPositions.positions.forEach((a,c)=>{c===this._document||!a.clientRect||t||_i(a.clientRect,.05,s,i)&&([n,r]=function lr(o,s,i,t,n){const r=wi(s,n),a=Ui(s,t);let c=fe.NONE,u=X.NONE;if(r){const _=o.scrollTop;r===fe.UP?_>0&&(c=fe.UP):o.scrollHeight-_>o.clientHeight&&(c=fe.DOWN)}if(a){const _=o.scrollLeft;"rtl"===i?a===X.RIGHT?_<0&&(u=X.RIGHT):o.scrollWidth+_>o.clientWidth&&(u=X.LEFT):a===X.LEFT?_>0&&(u=X.LEFT):o.scrollWidth-_>o.clientWidth&&(u=X.RIGHT)}return[c,u]}(c,a.clientRect,this._sortStrategy.direction,s,i),(n||r)&&(t=c))}),!n&&!r){const{width:a,height:c}=this._viewportRuler.getViewportSize(),u={width:a,height:c,top:0,right:a,bottom:c,left:0};n=wi(u,i),r=Ui(u,s),t=window}t&&(n!==this._verticalScrollDirection||r!==this._horizontalScrollDirection||t!==this._scrollNode)&&(this._verticalScrollDirection=n,this._horizontalScrollDirection=r,this._scrollNode=t,(n||r)&&t?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const s=(0,$.fI)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=s.msScrollSnapType||s.scrollSnapType||"",s.scrollSnapType=s.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const s=(0,$.fI)(this.element);this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(s).clientRect}_reset(){this._isDragging=!1;const s=(0,$.fI)(this.element).style;s.scrollSnapType=s.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(i=>i._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(s,i){return null!=this._domRect&&kn(this._domRect,s,i)}_getSiblingContainerFromPosition(s,i,t){return this._siblings.find(n=>n._canReceive(s,i,t))}_canReceive(s,i,t){if(!this._domRect||!kn(this._domRect,i,t)||!this.enterPredicate(s,this))return!1;const n=this._getShadowRoot().elementFromPoint(i,t);if(!n)return!1;const r=(0,$.fI)(this.element);return n===r||r.contains(n)}_startReceiving(s,i){const t=this._activeSiblings;!t.has(s)&&i.every(n=>this.enterPredicate(n,this)||this._draggables.indexOf(n)>-1)&&(t.add(s),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:s,receiver:this,items:i}))}_stopReceiving(s){this._activeSiblings.delete(s),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:s,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(s=>{if(this.isDragging()){const i=this._parentPositions.handleScroll(s);i&&this._sortStrategy.updateOnScroll(i.top,i.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const s=(0,ke.kV)((0,$.fI)(this.element));this._cachedShadowRoot=s||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const s=this._sortStrategy.getActiveItemsSnapshot().filter(i=>i.isDragging());this._siblings.forEach(i=>i._startReceiving(this,s))}}function wi(o,s){const{top:i,bottom:t,height:n}=o,r=.05*n;return s>=i-r&&s<=i+r?fe.UP:s>=t-r&&s<=t+r?fe.DOWN:fe.NONE}function Ui(o,s){const{left:i,right:t,width:n}=o,r=.05*n;return s>=i-r&&s<=i+r?X.LEFT:s>=t-r&&s<=t+r?X.RIGHT:X.NONE}const sn=(0,ke.i$)({passive:!1,capture:!0});let cr=(()=>{var o;class s{constructor(t,n){this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=r=>r.isDragging(),this.pointerMove=new O.x,this.pointerUp=new O.x,this.scroll=new O.x,this._preventDefaultWhileDragging=r=>{this._activeDragInstances.length>0&&r.preventDefault()},this._persistentTouchmoveListener=r=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&r.preventDefault(),this.pointerMove.next(r))},this._document=n}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,sn)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,sn)}startDragging(t,n){if(!(this._activeDragInstances.indexOf(t)>-1)&&(this._activeDragInstances.push(t),1===this._activeDragInstances.length)){const r=n.type.startsWith("touch");this._globalListeners.set(r?"touchend":"mouseup",{handler:a=>this.pointerUp.next(a),options:!0}).set("scroll",{handler:a=>this.scroll.next(a),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:sn}),r||this._globalListeners.set("mousemove",{handler:a=>this.pointerMove.next(a),options:sn}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((a,c)=>{this._document.addEventListener(c,a.handler,a.options)})})}}stopDragging(t){const n=this._activeDragInstances.indexOf(t);n>-1&&(this._activeDragInstances.splice(n,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(t){return this._activeDragInstances.indexOf(t)>-1}scrolled(t){const n=[this.scroll];return t&&t!==this._document&&n.push(new di.y(r=>this._ngZone.runOutsideAngular(()=>{const c=u=>{this._activeDragInstances.length&&r.next(u)};return t.addEventListener("scroll",c,!0),()=>{t.removeEventListener("scroll",c,!0)}}))),(0,Ne.T)(...n)}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((t,n)=>{this._document.removeEventListener(n,t.handler,t.options)}),this._globalListeners.clear()}}return(o=s).\u0275fac=function(t){return new(t||o)(e.LFG(e.R0b),e.LFG(f.K0))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),s})();const dr={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let Nn=(()=>{var o;class s{constructor(t,n,r,a){this._document=t,this._ngZone=n,this._viewportRuler=r,this._dragDropRegistry=a}createDrag(t,n=dr){return new or(t,n,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(t){return new ar(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return(o=s).\u0275fac=function(t){return new(t||o)(e.LFG(f.K0),e.LFG(e.R0b),e.LFG(he.rL),e.LFG(cr))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),s})();const zn=new e.OlP("CDK_DRAG_PARENT"),qn=new e.OlP("CdkDragHandle"),Zi=new e.OlP("CdkDragPlaceholder"),Oi=new e.OlP("CdkDragPreview");let Hn=(()=>{var o;class s{constructor(t){this.templateRef=t,this.matchSize=!1}}return(o=s).\u0275fac=function(t){return new(t||o)(e.Y36(e.Rgc))},o.\u0275dir=e.lG2({type:o,selectors:[["ng-template","cdkDragPreview",""]],inputs:{data:"data",matchSize:[e.lbL.HasDecoratorInputTransform,"matchSize","matchSize",e.VuI]},standalone:!0,features:[e._Bn([{provide:Oi,useExisting:o}]),e.Xq5]}),s})();const Si=new e.OlP("CDK_DRAG_CONFIG"),Pi=new e.OlP("CdkDropList");let Jn=(()=>{var o;class s{get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(t){this._disabled=t,this._dragRef.disabled=this._disabled}constructor(t,n,r,a,c,u,_,M,E,Z,P){this.element=t,this.dropContainer=n,this._ngZone=a,this._viewContainerRef=c,this._dir=_,this._changeDetectorRef=E,this._selfHandle=Z,this._parentDrag=P,this._destroyed=new O.x,this.started=new e.vpe,this.released=new e.vpe,this.ended=new e.vpe,this.entered=new e.vpe,this.exited=new e.vpe,this.dropped=new e.vpe,this.moved=new di.y(z=>{const Ue=this._dragRef.moved.pipe((0,er.U)(k=>({source:this,pointerPosition:k.pointerPosition,event:k.event,delta:k.delta,distance:k.distance}))).subscribe(z);return()=>{Ue.unsubscribe()}}),this._dragRef=M.createDrag(t,{dragStartThreshold:u&&null!=u.dragStartThreshold?u.dragStartThreshold:5,pointerDirectionChangeThreshold:u&&null!=u.pointerDirectionChangeThreshold?u.pointerDirectionChangeThreshold:5,zIndex:null==u?void 0:u.zIndex}),this._dragRef.data=this,s._dragInstances.push(this),u&&this._assignDefaults(u),n&&(this._dragRef._withDropContainer(n._dropListRef),n.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(t){this._dragRef.setFreeDragPosition(t)}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,pi.q)(1),(0,ie.R)(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(t){const n=t.rootElementSelector,r=t.freeDragPosition;n&&!n.firstChange&&this._updateRootElement(),r&&!r.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const t=s._dragInstances.indexOf(this);t>-1&&s._dragInstances.splice(t,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){const t=this.element.nativeElement;let n=t;var r;this.rootElementSelector&&(n=void 0!==t.closest?t.closest(this.rootElementSelector):null===(r=t.parentElement)||void 0===r?void 0:r.closest(this.rootElementSelector)),this._dragRef.withRootElement(n||t)}_getBoundaryElement(){const t=this.boundaryElement;return t?"string"==typeof t?this.element.nativeElement.closest(t):(0,$.fI)(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){const n=this._dir,r=this.dragStartDelay,a=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,c=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.dragStartDelay="object"==typeof r&&r?r:(0,$.su)(r),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(a).withPreviewTemplate(c).withPreviewContainer(this.previewContainer||"global"),n&&t.withDirection(n.value)}}),t.beforeStarted.pipe((0,pi.q)(1)).subscribe(()=>{if(this._parentDrag)return void t.withParent(this._parentDrag._dragRef);let n=this.element.nativeElement.parentElement;for(;n;){if(n.classList.contains("cdk-drag")){var r;t.withParent((null===(r=s._dragInstances.find(a=>a.element.nativeElement===n))||void 0===r?void 0:r._dragRef)||null);break}n=n.parentElement}})}_handleEvents(t){t.started.subscribe(n=>{this.started.emit({source:this,event:n.event}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(n=>{this.released.emit({source:this,event:n.event})}),t.ended.subscribe(n=>{this.ended.emit({source:this,distance:n.distance,dropPoint:n.dropPoint,event:n.event}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(n=>{this.entered.emit({container:n.container.data,item:this,currentIndex:n.currentIndex})}),t.exited.subscribe(n=>{this.exited.emit({container:n.container.data,item:this})}),t.dropped.subscribe(n=>{this.dropped.emit({previousIndex:n.previousIndex,currentIndex:n.currentIndex,previousContainer:n.previousContainer.data,container:n.container.data,isPointerOverContainer:n.isPointerOverContainer,item:this,distance:n.distance,dropPoint:n.dropPoint,event:n.event})})}_assignDefaults(t){const{lockAxis:n,dragStartDelay:r,constrainPosition:a,previewClass:c,boundaryElement:u,draggingDisabled:_,rootElementSelector:M,previewContainer:E}=t;this.disabled=null!=_&&_,this.dragStartDelay=r||0,n&&(this.lockAxis=n),a&&(this.constrainPosition=a),c&&(this.previewClass=c),u&&(this.boundaryElement=u),M&&(this.rootElementSelector=M),E&&(this.previewContainer=E)}_setupHandlesListener(){this._handles.changes.pipe((0,In.O)(this._handles),(0,Pn.b)(t=>{const n=t.filter(r=>r._parentDrag===this).map(r=>r.element);this._selfHandle&&this.rootElementSelector&&n.push(this.element),this._dragRef.withHandles(n)}),(0,oi.w)(t=>(0,Ne.T)(...t.map(n=>n._stateChanges.pipe((0,In.O)(n))))),(0,ie.R)(this._destroyed)).subscribe(t=>{const n=this._dragRef,r=t.element.nativeElement;t.disabled?n.disableHandle(r):n.enableHandle(r)})}}return(o=s)._dragInstances=[],o.\u0275fac=function(t){return new(t||o)(e.Y36(e.SBq),e.Y36(Pi,12),e.Y36(f.K0),e.Y36(e.R0b),e.Y36(e.s_b),e.Y36(Si,8),e.Y36(ui.Is,8),e.Y36(Nn),e.Y36(e.sBO),e.Y36(qn,10),e.Y36(zn,12))},o.\u0275dir=e.lG2({type:o,selectors:[["","cdkDrag",""]],contentQueries:function(t,n,r){if(1&t&&(e.Suo(r,Oi,5),e.Suo(r,Zi,5),e.Suo(r,qn,5)),2&t){let a;e.iGM(a=e.CRH())&&(n._previewTemplate=a.first),e.iGM(a=e.CRH())&&(n._placeholderTemplate=a.first),e.iGM(a=e.CRH())&&(n._handles=a)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(t,n){2&t&&e.ekj("cdk-drag-disabled",n.disabled)("cdk-drag-dragging",n._dragRef.isDragging())},inputs:{data:[e.lbL.None,"cdkDragData","data"],lockAxis:[e.lbL.None,"cdkDragLockAxis","lockAxis"],rootElementSelector:[e.lbL.None,"cdkDragRootElement","rootElementSelector"],boundaryElement:[e.lbL.None,"cdkDragBoundary","boundaryElement"],dragStartDelay:[e.lbL.None,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[e.lbL.None,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[e.lbL.HasDecoratorInputTransform,"cdkDragDisabled","disabled",e.VuI],constrainPosition:[e.lbL.None,"cdkDragConstrainPosition","constrainPosition"],previewClass:[e.lbL.None,"cdkDragPreviewClass","previewClass"],previewContainer:[e.lbL.None,"cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],standalone:!0,features:[e._Bn([{provide:zn,useExisting:o}]),e.Xq5,e.TTD]}),s})();const Qn=new e.OlP("CdkDropListGroup");let _r=0,Bn=(()=>{var o;class s{get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(t){this._dropListRef.disabled=this._disabled=t}constructor(t,n,r,a,c,u,_){this.element=t,this._changeDetectorRef=r,this._scrollDispatcher=a,this._dir=c,this._group=u,this._destroyed=new O.x,this.connectedTo=[],this.id="cdk-drop-list-".concat(_r++),this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new e.vpe,this.entered=new e.vpe,this.exited=new e.vpe,this.sorted=new e.vpe,this._unsortedItems=new Set,this._dropListRef=n.createDropList(t),this._dropListRef.data=this,_&&this._assignDefaults(_),this._dropListRef.enterPredicate=(M,E)=>this.enterPredicate(M.data,E.data),this._dropListRef.sortPredicate=(M,E,Z)=>this.sortPredicate(M,E.data,Z.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),s._dropLists.push(this),u&&u._items.add(this)}addItem(t){this._unsortedItems.add(t),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(t){this._unsortedItems.delete(t),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((t,n)=>t._dragRef.getVisibleElement().compareDocumentPosition(n._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const t=s._dropLists.indexOf(this);t>-1&&s._dropLists.splice(t,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(t){this._dir&&this._dir.change.pipe((0,In.O)(this._dir.value),(0,ie.R)(this._destroyed)).subscribe(n=>t.withDirection(n)),t.beforeStarted.subscribe(()=>{const n=(0,$.Eq)(this.connectedTo).map(r=>"string"==typeof r?s._dropLists.find(c=>c.id===r):r);if(this._group&&this._group._items.forEach(r=>{-1===n.indexOf(r)&&n.push(r)}),!this._scrollableParentsResolved){const r=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(a=>a.getElementRef().nativeElement);this._dropListRef.withScrollableParents(r),this._scrollableParentsResolved=!0}t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.sortingDisabled=this.sortingDisabled,t.autoScrollDisabled=this.autoScrollDisabled,t.autoScrollStep=(0,$.su)(this.autoScrollStep,2),t.connectedTo(n.filter(r=>r&&r!==this).map(r=>r._dropListRef)).withOrientation(this.orientation)})}_handleEvents(t){t.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(n=>{this.entered.emit({container:this,item:n.item.data,currentIndex:n.currentIndex})}),t.exited.subscribe(n=>{this.exited.emit({container:this,item:n.item.data}),this._changeDetectorRef.markForCheck()}),t.sorted.subscribe(n=>{this.sorted.emit({previousIndex:n.previousIndex,currentIndex:n.currentIndex,container:this,item:n.item.data})}),t.dropped.subscribe(n=>{this.dropped.emit({previousIndex:n.previousIndex,currentIndex:n.currentIndex,previousContainer:n.previousContainer.data,container:n.container.data,item:n.item.data,isPointerOverContainer:n.isPointerOverContainer,distance:n.distance,dropPoint:n.dropPoint,event:n.event}),this._changeDetectorRef.markForCheck()}),(0,Ne.T)(t.receivingStarted,t.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(t){const{lockAxis:n,draggingDisabled:r,sortingDisabled:a,listAutoScrollDisabled:c,listOrientation:u}=t;this.disabled=null!=r&&r,this.sortingDisabled=null!=a&&a,this.autoScrollDisabled=null!=c&&c,this.orientation=u||"vertical",n&&(this.lockAxis=n)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(t=>t._dragRef))}}return(o=s)._dropLists=[],o.\u0275fac=function(t){return new(t||o)(e.Y36(e.SBq),e.Y36(Nn),e.Y36(e.sBO),e.Y36(he.mF),e.Y36(ui.Is,8),e.Y36(Qn,12),e.Y36(Si,8))},o.\u0275dir=e.lG2({type:o,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(t,n){2&t&&(e.uIk("id",n.id),e.ekj("cdk-drop-list-disabled",n.disabled)("cdk-drop-list-dragging",n._dropListRef.isDragging())("cdk-drop-list-receiving",n._dropListRef.isReceiving()))},inputs:{connectedTo:[e.lbL.None,"cdkDropListConnectedTo","connectedTo"],data:[e.lbL.None,"cdkDropListData","data"],orientation:[e.lbL.None,"cdkDropListOrientation","orientation"],id:"id",lockAxis:[e.lbL.None,"cdkDropListLockAxis","lockAxis"],disabled:[e.lbL.HasDecoratorInputTransform,"cdkDropListDisabled","disabled",e.VuI],sortingDisabled:[e.lbL.HasDecoratorInputTransform,"cdkDropListSortingDisabled","sortingDisabled",e.VuI],enterPredicate:[e.lbL.None,"cdkDropListEnterPredicate","enterPredicate"],sortPredicate:[e.lbL.None,"cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:[e.lbL.HasDecoratorInputTransform,"cdkDropListAutoScrollDisabled","autoScrollDisabled",e.VuI],autoScrollStep:[e.lbL.None,"cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],standalone:!0,features:[e._Bn([{provide:Qn,useValue:void 0},{provide:Pi,useExisting:o}]),e.Xq5]}),s})(),hr=(()=>{var o;class s{}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[Nn],imports:[he.ZD]}),s})();var Ii=g(7827),Di=g(3264),fr=g(3602),Fi=g(7795);function vr(o,s){1&o&&e.GkF(0)}const Li=o=>({$implicit:o});function Cr(o,s){if(1&o&&(e.ynx(0),e.YNc(1,vr,1,0,"ng-container",17),e.BQk()),2&o){const i=e.oxw().$implicit,t=e.oxw(2);e.xp6(),e.Q6J("ngTemplateOutlet",t.templates.cdkPreview)("ngTemplateOutletContext",e.VKq(2,Li,i.name))}}function xr(o,s){if(1&o&&e._UZ(0,"img",19),2&o){const i=e.oxw().$implicit;e.Q6J("lazyLoad",i.embedUrl)("offset",100)("alt",i.name)}}function Tr(o,s){1&o&&e.GkF(0)}function br(o,s){1&o&&e.GkF(0)}function yr(o,s){1&o&&e.GkF(0)}const Mr=(o,s)=>({pending:o,selected:s}),Er=o=>({$implicit:o,addAfterContent:!0}),Ar=o=>({$implicit:o,firstPlacement:"left"});function wr(o,s){if(1&o){const i=e.EpF();e.TgZ(0,"li",4),e.NdJ("contextmenu",function(n){const a=e.CHM(i).$implicit,c=e.oxw(2);return e.KtG(c.emitRightClick(n,a,!1))})("press",function(n){const a=e.CHM(i).$implicit,c=e.oxw(2);return e.KtG(c.emitRightClick(n,a,!0,!1))})("tap",function(n){const a=e.CHM(i).$implicit,c=e.oxw(2);return e.KtG(c.emitRightClick(n,a,!0,!0))})("cdkDragStarted",function(){const r=e.CHM(i).$implicit,a=e.oxw(2);return e.KtG(a.draggedFileEvent.emit(r))})("cdkDragReleased",function(){e.CHM(i);const n=e.oxw(2);return e.KtG(n.draggedFileEvent.emit(void 0))}),e.YNc(1,Cr,2,4,"ng-container",5),e.TgZ(2,"div",6)(3,"div",7),e.YNc(4,xr,1,3,"img",8),e.TgZ(5,"div",9),e._UZ(6,"app-svg-icon",10),e.qZA()(),e.TgZ(7,"div",11)(8,"div",12)(9,"a",13),e._UZ(10,"div",14)(11,"div",15),e.qZA(),e.TgZ(12,"div",16),e.YNc(13,Tr,1,0,"ng-container",17)(14,br,1,0,"ng-container",17),e.qZA()(),e.TgZ(15,"div",18),e.YNc(16,yr,1,0,"ng-container",17),e.qZA()()()()}if(2&o){const i=s.$implicit,t=e.oxw(2);e.Q6J("ngClass",e.WLB(15,Mr,i.pending,i.selected))("cdkDragDisabled",t.touchDevice||i.pending),e.xp6(4),e.Q6J("ngIf",i.isImage),e.xp6(2),e.Q6J("setKey",t.iconSetKeys.FILE_ICONS)("iconType",i.ext)("width",64),e.xp6(3),e.Q6J("href",i.url,e.LSH),e.xp6(),e.Q6J("innerText",i.filename),e.xp6(),e.Q6J("innerText","."+i.ext),e.xp6(2),e.Q6J("ngTemplateOutlet",t.templates.size)("ngTemplateOutletContext",e.VKq(18,Er,i.size)),e.xp6(),e.Q6J("ngTemplateOutlet",t.templates.time)("ngTemplateOutletContext",e.VKq(20,Li,i.time)),e.xp6(2),e.Q6J("ngTemplateOutlet",t.templates.dropdown)("ngTemplateOutletContext",e.VKq(22,Ar,i))}}function Ur(o,s){if(1&o&&(e.ynx(0),e.YNc(1,wr,17,24,"li",3),e.BQk()),2&o){const i=s.$implicit;e.xp6(),e.Q6J("ngForOf",i)}}const Zr=o=>({"touch-device":o});let Or=(()=>{var o;class s{constructor(t){this.breakpointObserver=t,this.sortedList=[],this.rightClickEvent=new e.vpe,this.draggedFileEvent=new e.vpe,this.touchDevice=D.b1,this.filterCallback=n=>!n.isFiltered,this.filesPerRow=1,this.fileListGap=16,this.iconSetKeys=li.C,this.filesPerRowMap=new Map([[v.Ky.W_768_I_1,1],[v.Ky.W_933_I_2,2],[v.Ky.W_960_I_3,3],[v.Ky.W_1226_I_2,2],[v.Ky.W_1540_I_3,3],[v.Ky.W_1854_I_4,4],[v.Ky.W_2168_I_5,5],[v.Ky.W_2482_I_6,6],[v.Ky.W_2796_I_7,7],[v.Ky.W_3110_I_8,8],[v.Ky.W_3424_I_9,9],[v.Ky.W_3738_I_10,10]])}ngOnInit(){this.breakpointObserverSubscription=this.breakpointObserver.observe(Object.values(v.Ky)).subscribe(t=>{for(const r of Object.keys(t.breakpoints))if(t.breakpoints[r]){var n;this.filesPerRow=null!==(n=this.filesPerRowMap.get(r))&&void 0!==n?n:1}this.fileListGap=t.breakpoints[v.Ky.W_768_I_1]||t.breakpoints[v.Ky.W_933_I_2]||t.breakpoints[v.Ky.W_960_I_3]?16:24})}emitRightClick(t,n,r,a){t.preventDefault(),!(!D.b1&&r||D.b1&&(!r||"A"===t.target.nodeName||t.target.classList.contains("dropdown-toggle")))&&this.rightClickEvent.emit({file:n,isTap:a||!1})}ngOnDestroy(){var t;null===(t=this.breakpointObserverSubscription)||void 0===t||t.unsubscribe()}}return(o=s).\u0275fac=function(t){return new(t||o)(e.Y36($s.Yg))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upload-file-grid-list"]],inputs:{templates:"templates",sortedList:"sortedList"},outputs:{rightClickEvent:"rightClickEvent",draggedFileEvent:"draggedFileEvent"},decls:5,vars:12,consts:[["scrollWindow","",1,"file-grid-scroll",3,"itemSize","ngClass"],["cdkDropList","","cdkDropListSortingDisabled","",1,"list-unstyled","mb-0","d-grid","file-list","file-grid-list",3,"cdkDropListData"],[4,"cdkVirtualFor","cdkVirtualForOf"],["class","min-w-0 file-item","cdkDrag","",3,"ngClass","cdkDragDisabled","contextmenu","press","tap","cdkDragStarted","cdkDragReleased",4,"ngFor","ngForOf"],["cdkDrag","",1,"min-w-0","file-item",3,"ngClass","cdkDragDisabled","contextmenu","press","tap","cdkDragStarted","cdkDragReleased"],[4,"cdkDragPreview"],[1,"flat-container","overflow-hidden","h-100","d-flex","flex-column"],[1,"file-preview","border-bottom","overflow-hidden","text-center","position-relative"],["src","data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D","class","mw-100",3,"lazyLoad","offset","alt",4,"ngIf"],[1,"position-absolute","svg-container"],[1,"d-block",3,"setKey","iconType","width"],[1,"file-info","py-3","ps-3","pe-2","d-flex","align-items-center","flex-grow-1"],[1,"d-flex","flex-column","min-w-0","flex-grow-1","pe-2"],["target","_blank","rel","noreferrer",1,"file-link","d-flex","fw-bold","me-auto","mw-100",3,"href"],[1,"text-truncate",3,"innerText"],[3,"innerText"],[1,"text-muted","fs-xs","d-flex","align-items-center"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"dropdown-tpl"],["src","data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D",1,"mw-100",3,"lazyLoad","offset","alt"]],template:function(t,n){1&t&&(e.TgZ(0,"cdk-virtual-scroll-viewport",0)(1,"ul",1),e.YNc(2,Ur,2,1,"ng-container",2),e.ALo(3,"arrayChunk"),e.ALo(4,"arrayFilter"),e.qZA()()),2&t&&(e.Q6J("itemSize",228+n.fileListGap)("ngClass",e.VKq(10,Zr,n.touchDevice)),e.xp6(),e.Q6J("cdkDropListData",n.sortedList),e.xp6(),e.Q6J("cdkVirtualForOf",e.xi3(3,4,e.xi3(4,7,n.sortedList,n.filterCallback),n.filesPerRow)))},dependencies:[f.mk,f.sg,f.O5,f.tP,Bn,Jn,Hn,Ii.z1,he.xd,he.x0,he.N7,he.LO,Di.b,fr.K,Fi.H],styles:[".file-item.pending[_ngcontent-%COMP%]{opacity:.5}.file-item.pending[_ngcontent-%COMP%]   .dropdown-tpl[_ngcontent-%COMP%]{display:none!important}.file-item.pending[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{pointer-events:none}.cdk-drag-placeholder[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{opacity:.4}.drag-multiple-files[_nghost-%COMP%]   .file-item.selected[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{opacity:.4;pointer-events:none}.cdk-drag-preview[_ngcontent-%COMP%]{min-width:150px}.cdk-drag-dragging[_ngcontent-%COMP%]{display:none}",".file-grid-scroll[_ngcontent-%COMP%]{margin-bottom:-16px!important}[_nghost-%COMP%]:not(.drag-multiple-files)   .file-grid-scroll[_ngcontent-%COMP%]:not(.touch-device)   .file-item[_ngcontent-%COMP%]:not(.pending):hover, .drag-multiple-files[_nghost-%COMP%]   .file-grid-scroll[_ngcontent-%COMP%]:not(.touch-device)   .file-item[_ngcontent-%COMP%]:not(.pending):not(.selected):hover{box-shadow:0 .375rem .25rem #00000013}.file-grid-list[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:16px;padding-bottom:16px!important}.file-item[_ngcontent-%COMP%]{transition:opacity .2s,box-shadow .2s;height:228px}.file-item.selected[_ngcontent-%COMP%]   .flat-container[_ngcontent-%COMP%]{border-color:#c6cfff}.file-item.selected[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]{background-color:#dae0ff}.file-item.selected[_ngcontent-%COMP%]   .file-link[_ngcontent-%COMP%]{text-shadow:0 1px #fff}.touch-device[_ngcontent-%COMP%]   .file-link[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{pointer-events:none}.flat-container[_ngcontent-%COMP%]{transition:border-color .2s}.file-info[_ngcontent-%COMP%]{transition:background-color .2s}.file-preview[_ngcontent-%COMP%]{height:150px;background-color:rgb(var(--bs-light-rgb))}.file-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{opacity:0;transition:opacity .3s}.file-preview[_ngcontent-%COMP%]   img.ng-lazyloaded[_ngcontent-%COMP%]:not(.ng-failed-lazyloaded){opacity:1}.file-preview[_ngcontent-%COMP%]   img.ng-failed-lazyloaded[_ngcontent-%COMP%]{display:none}.ng-lazyloaded[_ngcontent-%COMP%]:not(.ng-failed-lazyloaded) + .svg-container[_ngcontent-%COMP%], .ng-lazyloading[_ngcontent-%COMP%] + .svg-container[_ngcontent-%COMP%]{display:none}.svg-container[_ngcontent-%COMP%]{left:50%;top:50%;transform:translate(-50%,-50%);background-color:inherit}.file-item[_ngcontent-%COMP%]:not(.cdk-drag-placeholder)   .svg-container[_ngcontent-%COMP%]{opacity:0;animation:_ngcontent-%COMP%_fadeIn07 .3s linear forwards}.cdk-drag-placeholder[_ngcontent-%COMP%]   .svg-container[_ngcontent-%COMP%]{opacity:.7}@keyframes _ngcontent-%COMP%_fadeIn07{0%{opacity:0}to{opacity:.7}}@media (min-width: 768px){.file-grid-list[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(290px,1fr))}}@media (min-width: 960px){.file-grid-list[_ngcontent-%COMP%]{gap:24px;padding-bottom:24px!important}.file-grid-scroll[_ngcontent-%COMP%]{margin-bottom:-24px!important}.file-grid-scroll[_ngcontent-%COMP%]:not(.touch-device){margin-left:-.5rem!important;margin-right:-.5rem!important}.file-grid-scroll[_ngcontent-%COMP%]:not(.touch-device)   .file-list[_ngcontent-%COMP%]{padding-left:.5rem!important;padding-right:.5rem!important}}@media (min-width: 3738px){.file-grid-list[_ngcontent-%COMP%]{grid-template-columns:repeat(10,1fr)}}"]}),s})();function Sr(o,s){1&o&&e.GkF(0)}const Vn=o=>({$implicit:o});function Pr(o,s){if(1&o&&(e.ynx(0),e.YNc(1,Sr,1,0,"ng-container",12),e.BQk()),2&o){const i=e.oxw().$implicit,t=e.oxw();e.xp6(),e.Q6J("ngTemplateOutlet",t.templates.cdkPreview)("ngTemplateOutletContext",e.VKq(2,Vn,i.name))}}function Ir(o,s){1&o&&e.GkF(0)}function Dr(o,s){1&o&&e.GkF(0)}function Fr(o,s){1&o&&e.GkF(0)}const Lr=(o,s)=>({pending:o,selected:s}),kr=o=>({"file-unused":o}),Rr=o=>({$implicit:o,firstPlacement:"left-top"});function Nr(o,s){if(1&o){const i=e.EpF();e.TgZ(0,"li",4),e.NdJ("contextmenu",function(n){const a=e.CHM(i).$implicit,c=e.oxw();return e.KtG(c.emitRightClick(n,a,!1))})("press",function(n){const a=e.CHM(i).$implicit,c=e.oxw();return e.KtG(c.emitRightClick(n,a,!0,!1))})("tap",function(n){const a=e.CHM(i).$implicit,c=e.oxw();return e.KtG(c.emitRightClick(n,a,!0,!0))})("cdkDragStarted",function(){const r=e.CHM(i).$implicit,a=e.oxw();return e.KtG(a.draggedFileEvent.emit(r))})("cdkDragReleased",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.draggedFileEvent.emit(void 0))}),e.YNc(1,Pr,2,4,"ng-container",5),e._UZ(2,"app-svg-icon",6),e.TgZ(3,"a",7),e._UZ(4,"div",8)(5,"div",9),e.qZA(),e._UZ(6,"div",10),e.TgZ(7,"div",11),e.YNc(8,Ir,1,0,"ng-container",12),e.qZA(),e.TgZ(9,"div",13),e.YNc(10,Dr,1,0,"ng-container",12),e.qZA(),e.TgZ(11,"div",14),e.YNc(12,Fr,1,0,"ng-container",12),e.qZA()()}if(2&o){const i=s.$implicit,t=e.oxw();e.Q6J("ngClass",e.WLB(16,Lr,i.pending,i.selected))("cdkDragDisabled",t.touchDevice||i.pending),e.xp6(2),e.Q6J("setKey",t.iconSetKeys.FILE_ICONS)("iconType",i.ext)("width",24),e.xp6(),e.Q6J("href",i.url,e.LSH)("ngClass",e.VKq(19,kr,!1===i.accessedInThreshold)),e.xp6(),e.Q6J("innerText",i.filename),e.xp6(),e.Q6J("innerText","."+i.ext),e.xp6(),e.Q6J("innerText",i.ext),e.xp6(2),e.Q6J("ngTemplateOutlet",t.templates.size)("ngTemplateOutletContext",e.VKq(21,Vn,i.size)),e.xp6(2),e.Q6J("ngTemplateOutlet",t.templates.time)("ngTemplateOutletContext",e.VKq(23,Vn,i.time)),e.xp6(2),e.Q6J("ngTemplateOutlet",t.templates.dropdown)("ngTemplateOutletContext",e.VKq(25,Rr,i))}}const zr=o=>({"touch-device":o});let qr=(()=>{var o;class s{constructor(){this.sortedList=[],this.rightClickEvent=new e.vpe,this.draggedFileEvent=new e.vpe,this.touchDevice=D.b1,this.filterCallback=t=>!t.isFiltered,this.iconSetKeys=li.C}emitRightClick(t,n,r,a){t.preventDefault(),!(!D.b1&&r||D.b1&&(!r||"A"===t.target.nodeName||t.target.classList.contains("dropdown-toggle")))&&this.rightClickEvent.emit({file:n,isTap:a||!1})}}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upload-file-simple-list"]],inputs:{templates:"templates",sortedList:"sortedList"},outputs:{rightClickEvent:"rightClickEvent",draggedFileEvent:"draggedFileEvent"},decls:5,vars:9,consts:[[1,"flat-container","overflow-hidden"],["scrollWindow","",1,"file-simple-scroll",3,"itemSize","ngClass"],["cdkDropList","","cdkDropListSortingDisabled","",1,"list-unstyled","mb-0","file-list","file-simple-list",3,"cdkDropListData"],["class","file-item d-grid ps-3 ps-md-4 pe-2 pe-md-3","cdkDrag","",3,"ngClass","cdkDragDisabled","contextmenu","press","tap","cdkDragStarted","cdkDragReleased",4,"cdkVirtualFor","cdkVirtualForOf"],["cdkDrag","",1,"file-item","d-grid","ps-3","ps-md-4","pe-2","pe-md-3",3,"ngClass","cdkDragDisabled","contextmenu","press","tap","cdkDragStarted","cdkDragReleased"],[4,"cdkDragPreview"],[1,"me-3","me-md-4","text-center","mx-auto","d-block",3,"setKey","iconType","width"],["target","_blank","rel","noreferrer",1,"filename","fw-bold","d-flex","me-auto","min-w-0","mw-100",3,"href","ngClass"],[1,"mw-100","text-truncate",3,"innerText"],[1,"flex-shrink-0","pe-2",3,"innerText"],[1,"text-uppercase","file-extension","text-center","mx-auto",3,"innerText"],[1,"size-tpl","text-center","mx-auto"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"time-tpl","text-center","mx-auto"],[1,"dropdown-tpl","d-flex","flex-end"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"cdk-virtual-scroll-viewport",1)(2,"ul",2),e.YNc(3,Nr,13,27,"li",3),e.ALo(4,"arrayFilter"),e.qZA()()()),2&t&&(e.xp6(),e.Q6J("itemSize",57)("ngClass",e.VKq(7,zr,n.touchDevice)),e.xp6(),e.Q6J("cdkDropListData",n.sortedList),e.xp6(),e.Q6J("cdkVirtualForOf",e.xi3(4,4,n.sortedList,n.filterCallback)))},dependencies:[f.mk,f.tP,Bn,Jn,Hn,he.xd,he.x0,he.N7,he.LO,Di.b,Fi.H],styles:[".file-item.pending[_ngcontent-%COMP%]{opacity:.5}.file-item.pending[_ngcontent-%COMP%]   .dropdown-tpl[_ngcontent-%COMP%]{display:none!important}.file-item.pending[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{pointer-events:none}.cdk-drag-placeholder[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{opacity:.4}.drag-multiple-files[_nghost-%COMP%]   .file-item.selected[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{opacity:.4;pointer-events:none}.cdk-drag-preview[_ngcontent-%COMP%]{min-width:150px}.cdk-drag-dragging[_ngcontent-%COMP%]{display:none}",".file-simple-scroll[_ngcontent-%COMP%]:not(.touch-device)   .file-item[_ngcontent-%COMP%]:not(.selected):hover{background-color:rgb(var(--bs-light-rgb))}.file-item[_ngcontent-%COMP%]{grid-template-columns:calc(24px + 1rem) calc(100% - 48px - 1rem) 24px;align-items:center;transition:opacity .2s,background-color .2s;background-color:#fff;height:57px}.file-item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(.dropdown-tpl){font-size:.875rem}.file-item[_ngcontent-%COMP%]:not(:first-of-type){border-top:1px solid transparent}.file-item[_ngcontent-%COMP%]:not(:first-of-type):not(.selected){border-color:#dee2e6}.file-item[_ngcontent-%COMP%]:not(:first-of-type).selected, .file-item[_ngcontent-%COMP%]:not(:first-of-type).selected + .file-item[_ngcontent-%COMP%]{border-color:#c6cfff}.file-item.selected[_ngcontent-%COMP%]{background-color:#dae0ff}.file-extension[_ngcontent-%COMP%], .size-tpl[_ngcontent-%COMP%], .time-tpl[_ngcontent-%COMP%]{display:none}app-svg-icon[_ngcontent-%COMP%]{color:#495057}.filename.file-unused[_ngcontent-%COMP%]{color:rgba(var(--bs-link-color-rgb),var(--bs-link-opacity, .8))}.touch-device[_ngcontent-%COMP%]   .filename[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{pointer-events:none}@media (min-width: 768px){.file-simple-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]{grid-template-columns:calc(24px + 1.5rem) calc(58% - 24px - 1.5rem) repeat(2,18%) 6%}.file-simple-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .size-tpl[_ngcontent-%COMP%], .file-simple-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .time-tpl[_ngcontent-%COMP%]{display:initial}}@media (min-width: 1200px){.file-simple-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]{grid-template-columns:calc(24px + 1.5rem) calc(52% - 24px - 1.5rem) repeat(3,14%) 6%}.file-simple-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-extension[_ngcontent-%COMP%]{display:initial}}"]}),s})();var rn=g(9010);const ki=o=>({"drag-multiple-files":o}),Ri=(o,s,i,t)=>({size:o,time:s,dropdown:i,cdkPreview:t});function Hr(o,s){if(1&o){const i=e.EpF();e.TgZ(0,"app-upload-file-grid-list",11),e.NdJ("rightClickEvent",function(n){e.CHM(i);const r=e.oxw(4);return e.KtG(r.onRightClick(n))})("draggedFileEvent",function(n){e.CHM(i);const r=e.oxw(4);return e.KtG(r.pushDraggedFile(n))}),e.qZA()}if(2&o){const i=e.oxw(4),t=e.MAs(2),n=e.MAs(4),r=e.MAs(6),a=e.MAs(8);e.Q6J("ngClass",e.VKq(3,ki,i.isDraggingSelectedFiles))("sortedList",i.sortedList)("templates",e.l5B(5,Ri,t,n,r,a))}}function Jr(o,s){if(1&o){const i=e.EpF();e.TgZ(0,"app-upload-file-simple-list",12),e.NdJ("rightClickEvent",function(n){e.CHM(i);const r=e.oxw(4);return e.KtG(r.onRightClick(n))})("draggedFileEvent",function(n){e.CHM(i);const r=e.oxw(4);return e.KtG(r.pushDraggedFile(n))}),e.qZA()}if(2&o){const i=e.oxw(4),t=e.MAs(2),n=e.MAs(4),r=e.MAs(6),a=e.MAs(8);e.Q6J("sortedList",i.sortedList)("ngClass",e.VKq(3,ki,i.isDraggingSelectedFiles))("templates",e.l5B(5,Ri,t,n,r,a))}}function Qr(o,s){if(1&o&&(e.ynx(0),e.YNc(1,Hr,1,10,"app-upload-file-grid-list",9)(2,Jr,1,10,"ng-template",null,10,e.W1O),e.BQk()),2&o){const i=e.MAs(3),t=e.oxw(3);e.xp6(),e.Q6J("ngIf",t.layoutOptions.type===t.layoutTypes.GRID)("ngIfElse",i)}}function Br(o,s){1&o&&e._UZ(0,"app-upload-all-file-filtered")}function Vr(o,s){if(1&o&&(e.ynx(0),e.YNc(1,Qr,4,2,"ng-container",6)(2,Br,1,0,"ng-template",null,8,e.W1O),e.BQk()),2&o){const i=e.MAs(3),t=e.oxw(2);e.xp6(),e.Q6J("ngIf",t.filteredElementsCount<t.sortedList.length)("ngIfElse",i)}}function Gr(o,s){1&o&&e._UZ(0,"app-upload-empty-file-list")}function Yr(o,s){if(1&o&&(e.ynx(0),e.TgZ(1,"div",5),e._uU(2," File e Immagini "),e.qZA(),e.YNc(3,Vr,4,2,"ng-container",6)(4,Gr,1,0,"ng-template",null,7,e.W1O),e.BQk()),2&o){const i=e.MAs(5),t=e.oxw();e.xp6(3),e.Q6J("ngIf",t.sortedList.length>0)("ngIfElse",i)}}const Wr=o=>({"me-1 after-content":o});function Kr(o,s){if(1&o&&(e._UZ(0,"div",13),e.ALo(1,"formatBytes")),2&o){const t=s.addAfterContent;e.Q6J("innerText",e.lcZ(1,2,s.$implicit))("ngClass",e.VKq(4,Wr,t))}}const $r=()=>[0,5],jr=o=>({offset:o});function Xr(o,s){if(1&o&&(e.TgZ(0,"div",14),e.ALo(1,"date"),e._UZ(2,"span",15),e.qZA()),2&o){const i=s.$implicit;e.Q6J("appTippy",e.xi3(1,3,i,"dd-MM-YY HH:mm")||"")("tippyProps",e.VKq(7,jr,e.DdM(6,$r))),e.xp6(2),e.Q6J("date",i)}}function ea(o,s){if(1&o&&e._UZ(0,"app-upload-file-menu",21),2&o){const i=e.oxw().$implicit,t=e.MAs(1);e.Q6J("file",i)("isSelected",i.selected)("dropdownRef",t)}}const ta=o=>({"touch-device":o}),na=o=>[o,"left-bottom","auto"];function ia(o,s){if(1&o){const i=e.EpF();e.TgZ(0,"div",16,17),e.NdJ("openChange",function(n){const a=e.CHM(i).$implicit,c=e.oxw();return e.KtG(c.onDropdownOpenChange(n,a))}),e.TgZ(2,"div",18),e._uU(3," more_vert "),e.qZA(),e.TgZ(4,"div",19),e.YNc(5,ea,1,3,"app-upload-file-menu",20),e.qZA()()}if(2&o){const i=s.$implicit,t=s.firstPlacement,n=e.oxw();e.Q6J("ngClass",e.VKq(3,ta,n.touchDevice))("placement",e.VKq(5,na,t)),e.xp6(5),e.Q6J("ngIf",i.hasDropdown)}}function oa(o,s){if(1&o&&e._UZ(0,"div",22),2&o){const i=s.$implicit,t=e.oxw();e.Q6J("innerHTML",t.isDraggingSelectedFiles&&t.selectedFileCounter>1?t.selectedFileCounter+" file selezionati":i,e.oJD)}}let sa=(()=>{var o;class s{constructor(t,n){this.uploadObservablesService=t,this.uploadPreferencesService=n,this.fileList=[],this.filter="",this.loading=!0,this.sortedList=[],this.layoutTypes=v.c5,this.filteredElementsCount=0,this.isDraggingSelectedFiles=!1,this.selectedFileCounter=0,this.touchDevice=D.b1,this.currentFilter="",this.sortedBy=v.gG.FILENAME,this.sortOrder=1,this.subscriptions=[],this.layoutOptions=this.uploadPreferencesService.layoutOptions}ngOnInit(){this.setSortOption(this.layoutOptions.orderBy,this.layoutOptions.asc),this.copyList(),this.sort(),this.setSubscriptions()}updateListAfterChange(){this.sortedList=[...this.sortedList]}setSubscriptions(){this.subscriptions.push(this.uploadObservablesService.layoutOptionsObservable.subscribe(t=>{this.layoutOptions=t,this.setSortOption(t.orderBy,t.asc),this.sort(),this.updateListAfterChange()}),this.uploadObservablesService.renameEntityObservable.subscribe(t=>{if(t.newEntity.type!==v.VC.FILE)return;const n=this.sortedList.findIndex(r=>r.name===t.oldName);if(n>-1){const r=this.sortedList[n].selected,a=this.sortedList[n].hasDropdown;this.sortedList[n]=(0,C.Z)((0,C.Z)({},t.newEntity),{},{isFiltered:!1,pending:!1,selected:r,hasDropdown:a})}this.updateListAfterChange()}),this.uploadObservablesService.deleteFileObservable.subscribe(t=>{for(const n of t){const r=this.sortedList.findIndex(a=>a.name===n);r>-1&&this.sortedList.splice(r,1)}this.updateListAfterChange()}),this.uploadObservablesService.uploadedFileObservable.subscribe(t=>{this.sortedList.unshift(...t.map(n=>(0,C.Z)((0,C.Z)({},n),{},{isFiltered:!1,pending:!1,selected:!1,hasDropdown:!1}))),this.sort(),this.filterList(),this.updateListAfterChange()}),this.uploadObservablesService.entityPendingObservable.subscribe(t=>{t.forEach(n=>{if(n.type!==v.VC.FILE)return;const r=this.sortedList.findIndex(a=>a.name===n.name);r>-1&&(this.sortedList[r].pending=n.start)})}),this.uploadObservablesService.selectedFileListObservable.subscribe(t=>{const n=t.map(r=>r.name);this.sortedList.filter(r=>r.selected||n.includes(r.name)).forEach(r=>{r.selected=n.includes(r.name)}),this.selectedFileCounter=t.length}))}ngOnChanges(t){t.fileList&&!t.fileList.firstChange&&(this.copyList(),this.sortedList.length&&(this.sort(),this.currentFilter="",this.filterList())),t.filter&&!t.filter.firstChange&&(this.filterList(),this.updateListAfterChange())}setSortOption(t,n){this.sortedBy=t,this.sortOrder=n?1:-1}sort(){this.sortedBy!==v.gG.FILENAME?(this.sortedList.sort((t,n)=>this.sortOrder*(t[this.sortedBy]>n[this.sortedBy]?1:-1)),this.sortedBy===v.gG.TIME&&this.sortedList.reverse()):(0,Sn.Qt)(this.sortedList,"filename",this.sortOrder>0)}copyList(){this.sortedList=this.fileList.map(t=>(0,C.Z)((0,C.Z)({},t),{},{isFiltered:!1,pending:!1,selected:!1,hasDropdown:!1}))}filterList(){if(this.currentFilter===this.filter)return;if(this.currentFilter=this.filter,this.filteredElementsCount=0,0===this.filter.length)return void this.sortedList.filter(n=>n.isFiltered).forEach(n=>n.isFiltered=!1);const t=this.filter.toLowerCase();for(const n of this.sortedList)n.isFiltered=!n.name.toLowerCase().includes(t),this.filteredElementsCount+=+n.isFiltered}pushDraggedFile(t){if(this.isDraggingSelectedFiles=!1,t)return t.selected?(this.uploadObservablesService.pushDraggedFileList(this.sortedList.filter(n=>n.selected)),void(this.isDraggingSelectedFiles=!0)):void this.uploadObservablesService.pushDraggedFileList([t]);this.uploadObservablesService.pushDraggedFileList([])}onRightClick(t){if(!t.isTap||0!==this.selectedFileCounter)return this.uploadObservablesService.pushSelectedFile({name:t.file.name,selected:!t.file.selected}),!1}onDropdownOpenChange(t,n){t&&!n.hasDropdown&&(n.hasDropdown=!0)}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return(o=s).\u0275fac=function(t){return new(t||o)(e.Y36(L.r),e.Y36(ri.p))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upload-file-list"]],inputs:{fileList:"fileList",filter:"filter",loading:"loading"},features:[e.TTD],decls:9,vars:1,consts:[[4,"ngIf"],["fileSizeTemplate",""],["fileTimeTemplate",""],["fileDropdownTemplate",""],["fileCdkPreview",""],[1,"px-md-1","mb-2","fv-small-caps","container-fluid"],[4,"ngIf","ngIfElse"],["noFiles",""],["allFilesFilteredMessage",""],[3,"ngClass","sortedList","templates","rightClickEvent","draggedFileEvent",4,"ngIf","ngIfElse"],["listLayout",""],[3,"ngClass","sortedList","templates","rightClickEvent","draggedFileEvent"],[3,"sortedList","ngClass","templates","rightClickEvent","draggedFileEvent"],[1,"file-size",3,"innerText","ngClass"],[1,"file-time",3,"appTippy","tippyProps"],["timeago","",3,"date"],["ngbDropdown","","display","dynamic","container","body",1,"dropdown-no-caret","ms-auto","flex-shrink-0",3,"ngClass","placement","openChange"],["fileDropdown","ngbDropdown"],["ngbDropdownToggle","",1,"material-icons-outlined","d-block","cursor-pointer","dropdown-icon"],["ngbDropdownMenu",""],[3,"file","isSelected","dropdownRef",4,"ngIf"],[3,"file","isSelected","dropdownRef"],[1,"flat-container","p-3",3,"innerHTML"]],template:function(t,n){1&t&&e.YNc(0,Yr,6,2,"ng-container",0)(1,Kr,2,6,"ng-template",null,1,e.W1O)(3,Xr,3,9,"ng-template",null,2,e.W1O)(5,ia,6,7,"ng-template",null,3,e.W1O)(7,oa,1,1,"ng-template",null,4,e.W1O),2&t&&e.Q6J("ngIf",!n.loading)},dependencies:[f.mk,f.O5,y.jt,y.iD,y.Vi,st,qe.$,ai,Ws,Ks,Or,qr,f.uU,rn.b],styles:['.file-size.after-content[_ngcontent-%COMP%]:after{content:" - "}.dropdown-no-caret[_ngcontent-%COMP%]:not(.touch-device)   .dropdown-icon[_ngcontent-%COMP%]{opacity:.7;transition:opacity .2s}.dropdown-no-caret[_ngcontent-%COMP%]:not(.touch-device)   .dropdown-icon[_ngcontent-%COMP%]:hover{opacity:1}']}),s})();function ra(o,s){1&o&&e.GkF(0)}function aa(o,s){1&o&&e.GkF(0)}const la=(o,s,i)=>({$implicit:o,index:s,last:i});function ca(o,s){if(1&o&&(e.ynx(0),e.YNc(1,aa,1,0,"ng-container",1),e.BQk()),2&o){const i=s.$implicit,t=s.index,n=s.last;e.oxw();const r=e.MAs(4);e.xp6(),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.kEZ(2,la,i,t+1,n))}}function da(o,s){if(1&o){const i=e.EpF();e.TgZ(0,"a",7),e.NdJ("click",function(){e.CHM(i);const n=e.oxw().index,r=e.oxw();return e.KtG(r.navigateEvent.emit(n))}),e.qZA()}if(2&o){const i=e.oxw().$implicit;e.Q6J("innerText",i)}}function pa(o,s){if(1&o&&e._UZ(0,"span",8),2&o){const i=e.oxw().$implicit;e.Q6J("innerText",i)}}const ua=o=>({active:o});function ma(o,s){if(1&o&&(e.TgZ(0,"li",4),e.YNc(1,da,1,1,"a",5)(2,pa,1,1,"ng-template",null,6,e.W1O),e.qZA()),2&o){const i=s.last,t=e.MAs(3);e.Q6J("ngClass",e.VKq(3,ua,i)),e.xp6(),e.Q6J("ngIf",!i)("ngIfElse",t)}}const ga=(o,s)=>({$implicit:o,index:0,last:s});let _a=(()=>{var o;class s{constructor(){this.currentFolderPath=[],this.navigateEvent=new e.vpe,this.rootName="Il mio spazio"}}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upload-breadcrumb"]],inputs:{currentFolderPath:"currentFolderPath"},outputs:{navigateEvent:"navigateEvent"},decls:5,vars:6,consts:[[1,"breadcrumb","folders-breadcrumb","mb-0"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngFor","ngForOf"],["breadcrumbItem",""],[1,"breadcrumb-item","small","text-break",3,"ngClass"],["role","button",3,"innerText","click",4,"ngIf","ngIfElse"],["lastItem",""],["role","button",3,"innerText","click"],[3,"innerText"]],template:function(t,n){if(1&t&&(e.TgZ(0,"ol",0),e.YNc(1,ra,1,0,"ng-container",1)(2,ca,2,6,"ng-container",2)(3,ma,4,5,"ng-template",null,3,e.W1O),e.qZA()),2&t){const r=e.MAs(4);e.xp6(),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.WLB(3,ga,n.rootName,0===n.currentFolderPath.length)),e.xp6(),e.Q6J("ngForOf",n.currentFolderPath)}},dependencies:[f.mk,f.sg,f.O5,f.tP],styles:[".folders-breadcrumb[_ngcontent-%COMP%]{--bs-breadcrumb-divider: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='%236c757d'/%3E%3C/svg%3E\")}"]}),s})(),ha=(()=>{var o;class s{constructor(t){this.uploadObservablesService=t,this.createNewFolderEvent=new e.vpe,this.actionNames=v.In}pushAction(t){this.uploadObservablesService.pushAction({name:t,payload:{entities:[{name:this.folder.name,type:v.VC.FOLDER,ext:"",url:this.folder.url,embedUrl:this.folder.url,isImage:!1}]}})}}return(o=s).\u0275fac=function(t){return new(t||o)(e.Y36(L.r))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upload-folder-menu"]],inputs:{folder:"folder"},outputs:{createNewFolderEvent:"createNewFolderEvent"},decls:27,vars:0,consts:[[1,"list-unstyled","mb-0","dropdown-material-icons"],["role","button",1,"dropdown-item","d-flex","align-items-center",3,"click"],[1,"material-icons-outlined","d-block"],[1,"dropdown-divider"]],template:function(t,n){1&t&&(e.TgZ(0,"ul",0)(1,"li")(2,"a",1),e.NdJ("click",function(){return n.createNewFolderEvent.emit()}),e.TgZ(3,"div",2),e._uU(4," add_circle_outline "),e.qZA(),e.TgZ(5,"div"),e._uU(6,"Nuova cartella"),e.qZA()()(),e.TgZ(7,"li")(8,"a",1),e.NdJ("click",function(){return n.pushAction(n.actionNames.MOVE)}),e.TgZ(9,"div",2),e._uU(10,"drive_file_move"),e.qZA(),e.TgZ(11,"div"),e._uU(12,"Sposta"),e.qZA()()(),e.TgZ(13,"li")(14,"a",1),e.NdJ("click",function(){return n.pushAction(n.actionNames.RENAME)}),e.TgZ(15,"div",2),e._uU(16," drive_file_rename_outline "),e.qZA(),e.TgZ(17,"div"),e._uU(18,"Rinomina"),e.qZA()()(),e.TgZ(19,"li"),e._UZ(20,"hr",3),e.qZA(),e.TgZ(21,"li")(22,"a",1),e.NdJ("click",function(){return n.pushAction(n.actionNames.DELETE)}),e.TgZ(23,"div",2),e._uU(24,"delete"),e.qZA(),e.TgZ(25,"div"),e._uU(26,"Elimina"),e.qZA()()()())}}),s})();const fa=["modal"];function va(o,s){1&o&&(e.ynx(0),e._uU(1," Il nome non pu\xf2 essere vuoto! "),e.BQk())}function Ca(o,s){if(1&o&&e._UZ(0,"span",17),2&o){const i=e.oxw(4);e.Q6J("innerHTML",i.errorMessage,e.oJD)}}function xa(o,s){1&o&&e._uU(0,"Questo nome \xe8 gi\xe0 usato da un'altra cartella!")}function Ta(o,s){if(1&o&&e.YNc(0,Ca,1,1,"span",15)(1,xa,1,0,"ng-template",null,16,e.W1O),2&o){const i=e.MAs(2),t=e.oxw(3);e.Q6J("ngIf",!t.nameValidationErrors.alreadyUsed)("ngIfElse",i)}}function ba(o,s){if(1&o&&(e.TgZ(0,"div",12),e.YNc(1,va,2,0,"ng-container",13)(2,Ta,3,2,"ng-template",null,14,e.W1O),e.qZA()),2&o){const i=e.MAs(3),t=e.oxw(2);e.xp6(),e.Q6J("ngIf",t.nameValidationErrors.invalidLength)("ngIfElse",i)}}const ya=(o,s)=>({"is-valid":o,"is-invalid":s});function Ma(o,s){if(1&o){const i=e.EpF();e.TgZ(0,"p"),e._uU(1," Tramite questo modal \xe8 possibile "),e.TgZ(2,"strong"),e._uU(3,"creare una nuova cartella"),e.qZA(),e._uU(4," nella posizione corrente. Il nome della nuova cartella far\xe0 "),e.TgZ(5,"strong"),e._uU(6,"parte dell'url"),e.qZA(),e._uU(7," di tutti i file che la cartella stessa conterr\xe0. Per questo motivo, \xe8 bene che includa esclusivamente dei caratteri facilmente inseribili nei link di un file: in particolare, sono accettati i caratteri "),e.TgZ(8,"em"),e._uU(9,"a-z"),e.qZA(),e._uU(10,", sia maiuscoli che minuscoli, i trattini alti e bassi "),e.TgZ(11,"em"),e._uU(12,"-_"),e.qZA(),e._uU(13," e i numeri. "),e.qZA(),e.TgZ(14,"div",4)(15,"label",5),e._uU(16,"Nome della nuova cartella:"),e.qZA(),e.TgZ(17,"input",6,7),e.NdJ("ngModelChange",function(n){e.CHM(i);const r=e.oxw();return e.KtG(r.name=n)})("ngModelChange",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.checkNameValidity())}),e.qZA(),e.YNc(19,ba,4,2,"div",8),e.qZA(),e.TgZ(20,"div",9)(21,"input",10),e.NdJ("ngModelChange",function(n){e.CHM(i);const r=e.oxw();return e.KtG(r.openFolderOnCreation=n)}),e.qZA(),e.TgZ(22,"label",11),e._uU(23,"Apri la cartella dopo la creazione"),e.qZA()()}if(2&o){const i=e.MAs(18),t=e.oxw();e.xp6(17),e.Q6J("ngClass",e.WLB(5,ya,i.dirty&&t.isNameValid,i.dirty&&!t.isNameValid))("pattern",t.nameRegex)("ngModel",t.name),e.xp6(2),e.Q6J("ngIf",!t.isNameValid),e.xp6(2),e.Q6J("ngModel",t.openFolderOnCreation)}}function Ea(o,s){if(1&o){const i=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){e.CHM(i),e.oxw();const n=e.MAs(1);return e.KtG(n.close("Close click"))}),e._uU(1," Annulla "),e.qZA(),e.TgZ(2,"button",19),e.NdJ("click",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.create())}),e._uU(3," Crea "),e.qZA()}if(2&o){const i=e.oxw();e.xp6(2),e.Q6J("disabled",!i.isNameValid)}}let Aa=(()=>{var o;class s{constructor(){this.reservedNames=[],this.createFolderEvent=new e.vpe,this.nameRegex=He.b3,this.name="",this.openFolderOnCreation=!1,this.isNameValid=!1,this.nameValidationErrors=He.uJ,this.errorMessage="",this.opened=!1}open(){this.opened=!0,this.modalComponent.open()}onHidden(){this.opened=!1,this.name="",this.openFolderOnCreation=!1,this.isNameValid=!1,this.errorMessage="",this.nameValidationErrors=He.uJ}checkNameValidity(){this.nameValidationErrors=(0,F.rc)(this.name,"",v.VC.FOLDER,this.reservedNames),this.isNameValid=!Object.values(this.nameValidationErrors).some(t=>t),this.nameValidationErrors.invalidStartOrEnd?this.errorMessage="Il nome non pu\xf2 iniziare o finire con un punto o uno spazio!":this.isNameValid||(this.errorMessage="Il nome pu\xf2 contenere solo i caratteri <em>a-z</em>, i trattini alti e bassi <em>-_</em>, gli spazi e i numeri!")}create(){!this.opened||!this.isNameValid||(this.createFolderEvent.emit({name:this.name,open:this.openFolderOnCreation}),this.modalComponent.close())}}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upload-newfolder-modal"]],viewQuery:function(t,n){if(1&t&&e.Gf(fa,5),2&t){let r;e.iGM(r=e.CRH())&&(n.modalComponent=r.first)}},inputs:{reservedNames:"reservedNames"},outputs:{createFolderEvent:"createFolderEvent"},decls:4,vars:1,consts:[["title","Crea nuova cartella",3,"disableCloseButton","hidden"],["modal",""],["appModalBody",""],["appModalFooter",""],[1,"mt-2"],["for","folder-name",1,"fs-sm"],["type","text","id","folder-name","required","",1,"form-control",3,"ngClass","pattern","ngModel","ngModelChange"],["newNameInput","ngModel"],["class","invalid-feedback",4,"ngIf"],[1,"form-check","mt-2","mb-0","fs-sm"],["type","checkbox","id","open-folder",1,"form-check-input",3,"ngModel","ngModelChange"],["for","open-folder",1,"form-check-label"],[1,"invalid-feedback"],[4,"ngIf","ngIfElse"],["invalidName",""],[3,"innerHTML",4,"ngIf","ngIfElse"],["alreadyUsed",""],[3,"innerHTML"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(t,n){1&t&&(e.TgZ(0,"app-modal",0,1),e.NdJ("hidden",function(){return n.onHidden()}),e.YNc(2,Ma,24,8,"ng-template",2)(3,Ea,4,1,"ng-template",3),e.qZA()),2&t&&e.Q6J("disableCloseButton",!0)},dependencies:[f.mk,f.O5,w.Fj,w.Wl,w.JJ,w.Q7,w.c5,w.On,ne.z,se.J,ze.j]}),s})();var Ni=g(6441);function wa(o,s){1&o&&(e.TgZ(0,"div",4),e._UZ(1,"app-loader",5),e.qZA())}function Ua(o,s){1&o&&(e.O4$(),e.ynx(0),e._UZ(1,"path",21)(2,"path",22),e.BQk())}function Za(o,s){1&o&&(e.O4$(),e._UZ(0,"path",23))}const Oa=(o,s)=>({"is-entered":o,"flat-container px-3":s});function Sa(o,s){if(1&o){const i=e.EpF();e.TgZ(0,"li",17),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(2);return e.KtG(n.navigateUp(-1))})("mouseenter",function(){e.CHM(i);const n=e.oxw(2);return e.KtG(n.setFolderEntered(null,!0))})("mouseleave",function(){e.CHM(i);const n=e.oxw(2);return e.KtG(n.setFolderEntered(void 0))}),e.O4$(),e.TgZ(1,"svg",13),e.YNc(2,Ua,3,0,"ng-container",18)(3,Za,1,0,"ng-template",null,19,e.W1O),e.qZA(),e.kcU(),e.TgZ(5,"div",20),e._uU(6,"cartella superiore"),e.qZA()()}if(2&o){const i=e.MAs(4),t=e.oxw(2);e.Q6J("ngClass",e.WLB(3,Oa,null===t.currentFolderEnteredName,t.currentLayout===t.layouts.GRID)),e.xp6(2),e.Q6J("ngIf",t.currentLayout===t.layouts.GRID)("ngIfElse",i)}}function Pa(o,s){1&o&&(e.O4$(),e._UZ(0,"path",32))}function Ia(o,s){1&o&&(e.O4$(),e._UZ(0,"path",33))}const Da=(o,s,i)=>({pending:o,"is-entered":s,"flat-container":i}),Fa=()=>["left-top","auto"];function La(o,s){if(1&o){const i=e.EpF();e.TgZ(0,"li",24),e.NdJ("mouseenter",function(){const r=e.CHM(i).$implicit,a=e.oxw(2);return e.KtG(a.setFolderEntered(r.name))})("mouseleave",function(){e.CHM(i);const n=e.oxw(2);return e.KtG(n.setFolderEntered(void 0))}),e.ALo(1,"arrayIncludes"),e.TgZ(2,"div",25),e.NdJ("click",function(){const r=e.CHM(i).$implicit,a=e.oxw(2);return e.KtG(a.navigateDown(r.name))}),e.O4$(),e.TgZ(3,"svg",26),e.YNc(4,Pa,1,0,"path",27)(5,Ia,1,0,"ng-template",null,19,e.W1O),e.qZA(),e.kcU(),e._UZ(7,"div",28),e.qZA(),e.TgZ(8,"div",29)(9,"div",30),e._uU(10," more_vert "),e.qZA(),e.TgZ(11,"app-upload-folder-menu",31),e.NdJ("createNewFolderEvent",function(){e.CHM(i),e.oxw(2);const n=e.MAs(4);return e.KtG(n.open())}),e.qZA()()()}if(2&o){const i=s.$implicit,t=e.MAs(6),n=e.oxw(2);e.Q6J("ngClass",e.kEZ(9,Da,e.xi3(1,6,n.pendingFolders,i.name),n.currentFolderEnteredName===i.name,n.currentLayout===n.layouts.GRID)),e.xp6(4),e.Q6J("ngIf",n.currentLayout===n.layouts.GRID)("ngIfElse",t),e.xp6(3),e.Q6J("innerText",i.name),e.xp6(),e.Q6J("placement",e.DdM(13,Fa)),e.xp6(3),e.Q6J("folder",i)}}function ka(o,s){1&o&&(e.O4$(),e.kcU(),e.TgZ(0,"div",34),e._uU(1," nuova cartella "),e.qZA())}const Ra=(o,s,i)=>({"touch-device":o,"d-grid grid-list":s,"simple-list flat-container d-flex flex-column":i});function Na(o,s){if(1&o){const i=e.EpF();e.TgZ(0,"div",6)(1,"div",7),e._uU(2,"Cartelle"),e.qZA(),e.TgZ(3,"app-upload-breadcrumb",8),e.NdJ("navigateEvent",function(n){e.CHM(i);const r=e.oxw();return e.KtG(r.navigateUp(n))}),e.qZA()(),e.TgZ(4,"ul",9),e.YNc(5,Sa,7,6,"li",10)(6,La,12,14,"li",11),e.TgZ(7,"li",12),e.NdJ("click",function(){e.CHM(i),e.oxw();const n=e.MAs(4);return e.KtG(n.open())}),e.O4$(),e.TgZ(8,"svg",13),e._UZ(9,"path",14)(10,"path",15),e.qZA(),e.YNc(11,ka,2,0,"div",16),e.qZA()()}if(2&o){const i=e.oxw();e.xp6(3),e.Q6J("currentFolderPath",i.currentFolderPath),e.xp6(),e.Q6J("ngClass",e.kEZ(5,Ra,i.touchDevice,i.currentLayout===i.layouts.GRID,i.currentLayout===i.layouts.LIST)),e.xp6(),e.Q6J("ngIf",i.currentFolderPath.length>0),e.xp6(),e.Q6J("ngForOf",i.filteredAndSortedList),e.xp6(5),e.Q6J("ngIf",i.currentLayout===i.layouts.LIST)}}let za=(()=>{var o;class s{constructor(t,n,r){this.uploadService=t,this.uploadObservablesService=n,this.toastService=r,this.folderList=[],this.currentFolderPath=[],this.loading=!0,this.filter="",this.newFolderEvent=new e.vpe,this.filteredAndSortedList=[],this.layouts=v.c5,this.currentLayout=v.c5.GRID,this.touchDevice=D.b1,this.actionNames=v.In,this.pendingFolders=[],this.currentFolderEnteredName="",this.folderNamesList=[],this.orderAsc=!0,this.currentDraggedFileList=[]}ngOnInit(){this.folderNamesList=this.folderList.map(t=>t.name),this.filterList(),this.orderAsc=this.uploadService.preferences.layoutOptions.asc,this.currentLayout=this.uploadService.preferences.layoutOptions.type,this.orderList(),this.layoutOptionsSubscription=this.uploadObservablesService.layoutOptionsObservable.subscribe(t=>{this.currentLayout=t.type,this.orderAsc=t.asc,this.orderList()}),this.draggedFileSubscription=this.uploadObservablesService.draggedFileListObservable.subscribe(t=>{void 0!==this.currentFolderEnteredPath&&0===t.length&&this.currentDraggedFileList.length&&(this.uploadObservablesService.pushStartMove({entities:(0,F.jL)(this.currentDraggedFileList),destPath:[...this.currentFolderEnteredPath],originPath:[...this.currentFolderPath]}),this.currentFolderEnteredName=""),this.currentDraggedFileList=[...t]}),this.entityPendingSubscription=this.uploadObservablesService.entityPendingObservable.subscribe(t=>{t.forEach(n=>{n.type===v.VC.FOLDER&&(n.start?this.pendingFolders.includes(n.name)||(this.pendingFolders=[...this.pendingFolders,n.name]):this.pendingFolders.indexOf(n.name)>-1&&(this.pendingFolders=this.pendingFolders.filter(a=>n.name!==a)))})}),this.renameFolderSubscription=this.uploadObservablesService.renameEntityObservable.subscribe(t=>{t.newEntity.type===v.VC.FOLDER&&(this.folderNamesList=this.folderList.map(n=>n.name))})}ngOnChanges(t){t.folderList&&!t.folderList.firstChange&&(this.folderNamesList=this.folderList.map(n=>n.name),this.filterList(),this.orderList()),t.filter&&!t.filter.firstChange&&(this.filterList(),this.orderList())}filterList(){if(0===this.filter.length)return void(this.filteredAndSortedList=this.folderList);const t=this.filter.toLowerCase();this.filteredAndSortedList=this.folderList.filter(n=>n.name.toLowerCase().includes(t))}orderList(){(0,Sn.Qt)(this.filteredAndSortedList,"name",this.orderAsc)}navigateUp(t){this.uploadObservablesService.pushCurrentFolderPath(this.currentFolderPath.slice(0,t))}navigateDown(t){this.pendingFolders.includes(t)||this.uploadObservablesService.pushCurrentFolderPath([...this.currentFolderPath,t])}createFolder(t){var n=this;return(0,b.Z)(function*(){const r=t.name,a=[...n.currentFolderPath],c=yield n.uploadService.createDirectory([...a,r]);if(c){const _={name:(0,F.Lv)(c).name,url:c,type:v.VC.FOLDER};return n.newFolderEvent.emit({list:[_],destPath:a,opened:t.open}),n.toastService.show({content:"Cartella <strong>".concat(r,"</strong> creata con successo!")}),void(t.open&&n.navigateDown(r))}n.toastService.show({content:"La creazione della cartella ha <strong>riscontrato un errore!</strong><br>Prova a ricaricare la pagina ed a rieseguirla.",level:me.m.ERROR})})()}setFolderEntered(t,n=!1){if(void 0===t)return this.currentFolderEnteredPath=void 0,void(this.currentFolderEnteredName="");if(0!==this.currentDraggedFileList.length){if(this.currentFolderEnteredName=t,n)return void(this.currentFolderEnteredPath=this.currentFolderPath.length<2?[]:this.currentFolderPath.slice(0,-1));this.currentFolderEnteredPath=[...this.currentFolderPath,t]}}ngOnDestroy(){var t,n,r,a;null===(t=this.layoutOptionsSubscription)||void 0===t||t.unsubscribe(),null===(n=this.draggedFileSubscription)||void 0===n||n.unsubscribe(),null===(r=this.entityPendingSubscription)||void 0===r||r.unsubscribe(),null===(a=this.renameFolderSubscription)||void 0===a||a.unsubscribe()}}return(o=s).\u0275fac=function(t){return new(t||o)(e.Y36(ae.C),e.Y36(L.r),e.Y36(R.k))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upload-folder-list"]],inputs:{folderList:"folderList",currentFolderPath:"currentFolderPath",loading:"loading",filter:"filter"},outputs:{newFolderEvent:"newFolderEvent"},features:[e.TTD],decls:5,vars:3,consts:[["class","d-flex justify-content-center",4,"ngIf","ngIfElse"],["dataList",""],[3,"reservedNames","createFolderEvent"],["modal",""],[1,"d-flex","justify-content-center"],["message","Recupero dei file in corso"],[1,"px-md-1","mb-2","d-flex","flex-wrap","flex-column","flex-md-row","align-items-md-center","container-fluid"],[1,"fv-small-caps"],[1,"d-block","ms-md-auto",3,"currentFolderPath","navigateEvent"],[1,"folders","list-unstyled",3,"ngClass"],["class","d-flex align-items-center cursor-pointer navigate-upper-level",3,"ngClass","click","mouseenter","mouseleave",4,"ngIf"],["class","d-flex align-items-center min-w-0",3,"ngClass","mouseenter","mouseleave",4,"ngFor","ngForOf"],[1,"new-folder","d-flex","align-items-center","cursor-pointer",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 16 16",1,"d-block"],["d","m.5 3 .04.87a1.99 1.99 0 0 0-.342 1.311l.637 7A2 2 0 0 0 2.826 14H9v-1H2.826a1 1 0 0 1-.995-.91l-.637-7A1 1 0 0 1 2.19 4h11.62a1 1 0 0 1 .996 1.09L14.54 8h1.005l.256-2.819A2 2 0 0 0 13.81 3H9.828a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 6.172 1H2.5a2 2 0 0 0-2 2zm5.672-1a1 1 0 0 1 .707.293L7.586 3H2.19c-.24 0-.47.042-.683.12L1.5 2.98a1 1 0 0 1 1-.98h3.672z"],["d","M13.5 10a.5.5 0 0 1 .5.5V12h1.5a.5.5 0 1 1 0 1H14v1.5a.5.5 0 1 1-1 0V13h-1.5a.5.5 0 0 1 0-1H13v-1.5a.5.5 0 0 1 .5-.5z"],["class","new-folder-description fst-italic",4,"ngIf"],[1,"d-flex","align-items-center","cursor-pointer","navigate-upper-level",3,"ngClass","click","mouseenter","mouseleave"],[4,"ngIf","ngIfElse"],["folderFilled",""],[1,"folder-name","fst-italic"],["d","m11.798 8.271-3.182 1.97c-.27.166-.616-.036-.616-.372V9.1s-2.571-.3-4 2.4c.571-4.8 3.143-4.8 4-4.8v-.769c0-.336.346-.538.616-.371l3.182 1.969c.27.166.27.576 0 .742z"],["d","m.5 3 .04.87a1.99 1.99 0 0 0-.342 1.311l.637 7A2 2 0 0 0 2.826 14h10.348a2 2 0 0 0 1.991-1.819l.637-7A2 2 0 0 0 13.81 3H9.828a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 6.172 1H2.5a2 2 0 0 0-2 2zm.694 2.09A1 1 0 0 1 2.19 4h11.62a1 1 0 0 1 .996 1.09l-.636 7a1 1 0 0 1-.996.91H2.826a1 1 0 0 1-.995-.91l-.637-7zM6.172 2a1 1 0 0 1 .707.293L7.586 3H2.19c-.24 0-.47.042-.683.12L1.5 2.98a1 1 0 0 1 1-.98h3.672z"],["d","M13.81 3H9.828a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 6.172 1H2.5a2 2 0 0 0-2 2l.04.87a1.99 1.99 0 0 0-.342 1.311l.637 7A2 2 0 0 0 2.826 14h10.348a2 2 0 0 0 1.991-1.819l.637-7A2 2 0 0 0 13.81 3zM2.19 3c-.24 0-.47.042-.683.12L1.5 2.98a1 1 0 0 1 1-.98h3.672a1 1 0 0 1 .707.293L7.586 3H2.19zm9.608 5.271-3.182 1.97c-.27.166-.616-.036-.616-.372V9.1s-2.571-.3-4 2.4c.571-4.8 3.143-4.8 4-4.8v-.769c0-.336.346-.538.616-.371l3.182 1.969c.27.166.27.576 0 .742z"],[1,"d-flex","align-items-center","min-w-0",3,"ngClass","mouseenter","mouseleave"],[1,"d-flex","align-items-center","min-w-0","navigate-item","flex-grow-1","h-100","pe-1",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 16 16",1,"d-block","flex-shrink-0"],["d","M.54 3.87.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.826a2 2 0 0 1-1.991-1.819l-.637-7a1.99 1.99 0 0 1 .342-1.31zM2.19 4a1 1 0 0 0-.996 1.09l.637 7a1 1 0 0 0 .995.91h10.348a1 1 0 0 0 .995-.91l.637-7A1 1 0 0 0 13.81 4H2.19zm4.69-1.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707z",4,"ngIf","ngIfElse"],[1,"folder-name","text-truncate",3,"innerText"],["ngbDropdown","","display","dynamic","container","body",1,"dropdown-no-caret","ms-auto",3,"placement"],["ngbDropdownToggle","",1,"material-icons-outlined","d-block","cursor-pointer","dropdown-toggle"],["ngbDropdownMenu","",1,"dropdown-menu",3,"folder","createNewFolderEvent"],["d","M.54 3.87.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.826a2 2 0 0 1-1.991-1.819l-.637-7a1.99 1.99 0 0 1 .342-1.31zM2.19 4a1 1 0 0 0-.996 1.09l.637 7a1 1 0 0 0 .995.91h10.348a1 1 0 0 0 .995-.91l.637-7A1 1 0 0 0 13.81 4H2.19zm4.69-1.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707z"],["d","M9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.825a2 2 0 0 1-1.991-1.819l-.637-7a1.99 1.99 0 0 1 .342-1.31L.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3zm-8.322.12C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139z"],[1,"new-folder-description","fst-italic"]],template:function(t,n){if(1&t&&(e.YNc(0,wa,2,0,"div",0)(1,Na,12,9,"ng-template",null,1,e.W1O),e.TgZ(3,"app-upload-newfolder-modal",2,3),e.NdJ("createFolderEvent",function(a){return n.createFolder(a)}),e.qZA()),2&t){const r=e.MAs(2);e.Q6J("ngIf",n.loading)("ngIfElse",r),e.xp6(3),e.Q6J("reservedNames",n.folderNamesList)}},dependencies:[f.mk,f.sg,f.O5,vt.R,y.jt,y.iD,y.Vi,_a,ha,Aa,Ni.Q],styles:[".folders[_ngcontent-%COMP%]{margin-bottom:1.5rem}.folders[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{transition:opacity .2s,background-color .2s}.folders[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .navigate-item[_ngcontent-%COMP%]{cursor:pointer}.folders[_ngcontent-%COMP%] > li.pending[_ngcontent-%COMP%]{opacity:.5}.folders[_ngcontent-%COMP%] > li.pending[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]{display:none!important}.folders[_ngcontent-%COMP%] > li.pending[_ngcontent-%COMP%]   .navigate-item[_ngcontent-%COMP%]{cursor:default!important;pointer-events:none}.folders[_ngcontent-%COMP%] > li.is-entered[_ngcontent-%COMP%]{background-color:#dae0ff;border-color:#c6cfff}.folders[_ngcontent-%COMP%]:not(.touch-device)   .dropdown-toggle[_ngcontent-%COMP%]{opacity:.7;transition:opacity .2s}.folders[_ngcontent-%COMP%]:not(.touch-device)   .dropdown-toggle[_ngcontent-%COMP%]:hover{opacity:1}.folders[_ngcontent-%COMP%]:not(.touch-device).simple-list > li[_ngcontent-%COMP%]:not(.is-entered):hover{background-color:rgb(var(--bs-light-rgb))}.grid-list[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}.grid-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{min-height:75px}.grid-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:32px;height:32px}.grid-list[_ngcontent-%COMP%]   .navigate-item[_ngcontent-%COMP%]{padding-left:1rem}.grid-list[_ngcontent-%COMP%]   .dropdown-no-caret[_ngcontent-%COMP%]{margin-right:.5rem}.grid-list[_ngcontent-%COMP%]   .folder-name[_ngcontent-%COMP%]{margin-left:.75rem}.grid-list[_ngcontent-%COMP%]   .new-folder[_ngcontent-%COMP%]{color:var(--bs-gray-600);border-top:1px dashed;border-bottom:1px dashed;border-radius:.25rem;justify-content:center}.simple-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{height:57px;padding-right:.5rem}.simple-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:not(:first-of-type){border-top:1px solid #dee2e6}.simple-list[_ngcontent-%COMP%] > li.is-entered[_ngcontent-%COMP%], .simple-list[_ngcontent-%COMP%] > li.is-entered[_ngcontent-%COMP%] + li[_ngcontent-%COMP%]{border-color:#c6cfff}.simple-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;color:#4864fe}.simple-list[_ngcontent-%COMP%]   .navigate-item[_ngcontent-%COMP%], .simple-list[_ngcontent-%COMP%]   .folder-name[_ngcontent-%COMP%], .simple-list[_ngcontent-%COMP%]   .navigate-upper-level[_ngcontent-%COMP%], .simple-list[_ngcontent-%COMP%]   .new-folder[_ngcontent-%COMP%], .simple-list[_ngcontent-%COMP%]   .new-folder-description[_ngcontent-%COMP%]{padding-left:1rem}app-loader[_ngcontent-%COMP%]{margin-top:1rem}@media (min-width: 768px){.folders[_ngcontent-%COMP%]{margin-bottom:2rem}.grid-list[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(250px,1fr))}.grid-list[_ngcontent-%COMP%]   .new-folder[_ngcontent-%COMP%]{border:1px dashed}.simple-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{padding-right:1rem}.simple-list[_ngcontent-%COMP%]   .navigate-item[_ngcontent-%COMP%], .simple-list[_ngcontent-%COMP%]   .folder-name[_ngcontent-%COMP%], .simple-list[_ngcontent-%COMP%]   .navigate-upper-level[_ngcontent-%COMP%], .simple-list[_ngcontent-%COMP%]   .new-folder[_ngcontent-%COMP%], .simple-list[_ngcontent-%COMP%]   .new-folder-description[_ngcontent-%COMP%]{padding-left:1.5rem}app-loader[_ngcontent-%COMP%]{margin-top:0}}@media (min-width: 960px){.grid-list[_ngcontent-%COMP%]{gap:1.5rem}}"]}),s})();var qa=g(4733),Ha=g(4723);function Ja(o,s){1&o&&(e.O4$(),e.ynx(0),e._UZ(1,"path",20)(2,"path",21),e.BQk())}function Qa(o,s){1&o&&(e.O4$(),e._UZ(0,"path",20)(1,"path",22))}function Ba(o,s){1&o&&e.GkF(0)}function Va(o,s){1&o&&e.GkF(0)}function Ga(o,s){if(1&o){const i=e.EpF();e.ynx(0),e.TgZ(1,"li")(2,"a",31),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(3);return e.KtG(n.pushMassiveAction(n.actionNames.FILE_SHOW_LINKS))}),e.TgZ(3,"div",17),e._uU(4," construction "),e.qZA(),e.TgZ(5,"div"),e._uU(6,"Visualizza codici"),e.qZA()()(),e.TgZ(7,"li")(8,"a",31),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(3);return e.KtG(n.pushMassiveAction(n.actionNames.MOVE))}),e.TgZ(9,"div",17),e._uU(10," drive_file_move "),e.qZA(),e.TgZ(11,"div"),e._uU(12,"Sposta selezionati"),e.qZA()()(),e.TgZ(13,"li"),e._UZ(14,"hr",35),e.qZA(),e.TgZ(15,"li")(16,"a",31),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(3);return e.KtG(n.pushMassiveAction(n.actionNames.DELETE))}),e.TgZ(17,"div",17),e._uU(18," delete "),e.qZA(),e.TgZ(19,"div"),e._uU(20,"Elimina selezionati"),e.qZA()()(),e.BQk()}}const Ya=o=>({"position-fixed fixed-dropdown rounded-circle":o}),Wa=()=>["start-bottom","top-end","auto"],zi=()=>["bottom-end","top-end","auto"],Ka=(o,s)=>({"rounded-circle btn-success":o,"btn-outline-success":s});function $a(o,s){if(1&o){const i=e.EpF();e.TgZ(0,"div",24,25)(2,"button",26),e.O4$(),e.TgZ(3,"svg",7),e._UZ(4,"path",27)(5,"path",28),e.qZA()(),e.kcU(),e.TgZ(6,"div",29)(7,"ul",30)(8,"li")(9,"h6",15),e._uU(10,"Azioni massive"),e.qZA()(),e.TgZ(11,"li")(12,"a",31),e.NdJ("click",function(){e.CHM(i);const n=e.MAs(1),r=e.oxw(2);return e.KtG(r.selectOrDeselectAll(n))}),e._UZ(13,"div",32)(14,"div",33),e.qZA()(),e.YNc(15,Ga,21,0,"ng-container",34),e.qZA()()()}if(2&o){const i=e.oxw().$implicit,t=e.oxw();e.Q6J("ngClass",e.VKq(7,Ya,i))("placement",i?e.DdM(9,Wa):e.DdM(10,zi)),e.xp6(2),e.Q6J("ngClass",e.WLB(11,Ka,i,!i))("disabled",t.loading),e.xp6(11),e.Q6J("innerText",t.selectedFiles.length?"unpublished":"check_circle_outline"),e.xp6(),e.Q6J("innerText",t.selectedFiles.length?"Deseleziona tutti":"Seleziona tutti"),e.xp6(),e.Q6J("ngIf",t.selectedFiles.length)}}function ja(o,s){if(1&o&&e.YNc(0,$a,16,14,"div",23),2&o){const i=s.$implicit,t=e.oxw();e.Q6J("ngIf",!i||t.touchDevice&&t.selectedFiles.length)}}const an=o=>({disabled:o}),Xa=()=>({$implicit:!1}),el=()=>({$implicit:!0});let tl=(()=>{var o;class s{constructor(t,n){this.uploadPreferencesService=t,this.uploadObservablesService=n,this.loading=!0,this.fileList=[],this.filterEvent=new e.vpe,this.selectAllFilesEvent=new e.vpe,this.touchDevice=D.b1,this.layoutParams=v.gG,this.layoutTypes=v.c5,this.selectedFiles=[],this.actionNames=v.In,this.layoutOptions=this.uploadPreferencesService.layoutOptions}ngOnInit(){this.selectedFileListSubscription=this.uploadObservablesService.selectedFileListObservable.subscribe(t=>{this.selectedFiles=t.map(n=>n.name)})}pushLayoutOptions(){this.uploadObservablesService.pushLayoutOptions(this.layoutOptions)}toggleLayoutOrder(){this.layoutOptions.asc=!this.layoutOptions.asc,this.pushLayoutOptions()}setLayoutType(){this.layoutOptions.type=this.layoutOptions.type===v.c5.GRID?v.c5.LIST:v.c5.GRID,this.pushLayoutOptions()}setLayoutOrder(t){this.layoutOptions.orderBy=t,this.pushLayoutOptions()}selectOrDeselectAll(t){t.close(),this.selectedFiles.length?this.uploadObservablesService.pushSelectedFile([]):this.selectAllFilesEvent.emit()}pushMassiveAction(t){const n=this.fileList.filter(r=>this.selectedFiles.includes(r.name));this.uploadObservablesService.pushAction({name:t,payload:{entities:(0,F.jL)(n)}})}ngOnDestroy(){var t;null===(t=this.selectedFileListSubscription)||void 0===t||t.unsubscribe()}}return(o=s).\u0275fac=function(t){return new(t||o)(e.Y36(ri.p),e.Y36(L.r))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upload-filter"]],inputs:{loading:"loading",fileList:"fileList"},outputs:{filterEvent:"filterEvent",selectAllFilesEvent:"selectAllFilesEvent"},decls:47,vars:28,consts:[[1,"d-flex","utilities"],[1,"d-block","flex-grow-1","input-filter",3,"disabled","enterKeyOnly","textEvent"],[1,"flex-shrink-0","ms-auto","btn-container","d-flex","align-items-stretch"],[1,"btn","btn-outline-indigo","shadow-none","d-flex","align-items-center",3,"disabled","click"],[1,"material-icons",3,"innerText"],[1,"btn-group","mx-3"],[1,"btn","btn-outline-primary","py-1","shadow-none",3,"disabled","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 16 16"],[4,"ngIf","ngIfElse"],["desc",""],["ngbDropdown","","display","dynamic",1,"dropdown-no-caret","btn-group",3,"placement"],["ngbDropdownToggle","",1,"btn","btn-outline-primary","px-1","shadow-none",3,"disabled"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16"],["d","M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"],["ngbDropdownMenu","",1,"list-unstyled","mb-0","dropdown-menu","dropdown-material-icons"],[1,"dropdown-header","text-center"],["role","button",1,"dropdown-item","d-flex","align-items-center",3,"ngClass","click"],[1,"material-icons-outlined","d-block"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["massiveActionsButton",""],["fill-rule","evenodd","d","M10.082 5.629 9.664 7H8.598l1.789-5.332h1.234L13.402 7h-1.12l-.419-1.371h-1.781zm1.57-.785L11 2.687h-.047l-.652 2.157h1.351z"],["d","M12.96 14H9.028v-.691l2.579-3.72v-.054H9.098v-.867h3.785v.691l-2.567 3.72v.054h2.645V14zM4.5 2.5a.5.5 0 0 0-1 0v9.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L4.5 12.293V2.5z"],["d","M12.96 14H9.028v-.691l2.579-3.72v-.054H9.098v-.867h3.785v.691l-2.567 3.72v.054h2.645V14zm-8.46-.5a.5.5 0 0 1-1 0V3.707L2.354 4.854a.5.5 0 1 1-.708-.708l2-1.999.007-.007a.498.498 0 0 1 .7.006l2 2a.5.5 0 1 1-.707.708L4.5 3.707V13.5z"],["class","dropdown-no-caret btn-group","ngbDropdown","","display","dynamic",3,"ngClass","placement",4,"ngIf"],["ngbDropdown","","display","dynamic",1,"dropdown-no-caret","btn-group",3,"ngClass","placement"],["actionsDropdown","ngbDropdown"],["ngbDropdownToggle","",1,"btn","py-1","h-100","shadow-none",3,"ngClass","disabled"],["d","M3 14.5A1.5 1.5 0 0 1 1.5 13V3A1.5 1.5 0 0 1 3 1.5h8a.5.5 0 0 1 0 1H3a.5.5 0 0 0-.5.5v10a.5.5 0 0 0 .5.5h10a.5.5 0 0 0 .5-.5V8a.5.5 0 0 1 1 0v5a1.5 1.5 0 0 1-1.5 1.5H3z"],["d","m8.354 10.354 7-7a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0z"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-material-icons"],[1,"list-unstyled","mb-0"],["role","button",1,"dropdown-item","d-flex","align-items-center",3,"click"],[1,"material-icons-outlined","d-block",3,"innerText"],[3,"innerText"],[4,"ngIf"],[1,"dropdown-divider"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"app-input-filter-text",1),e.NdJ("textEvent",function(a){return n.filterEvent.emit(a)}),e.qZA(),e.TgZ(2,"div",2)(3,"button",3),e.NdJ("click",function(){return n.setLayoutType()}),e._UZ(4,"span",4),e.qZA(),e.TgZ(5,"div",5)(6,"button",6),e.NdJ("click",function(){return n.toggleLayoutOrder()}),e.O4$(),e.TgZ(7,"svg",7),e.YNc(8,Ja,3,0,"ng-container",8)(9,Qa,2,0,"ng-template",null,9,e.W1O),e.qZA()(),e.kcU(),e.TgZ(11,"div",10)(12,"button",11),e.O4$(),e.TgZ(13,"svg",12),e._UZ(14,"path",13),e.qZA()(),e.kcU(),e.TgZ(15,"ul",14)(16,"li")(17,"h6",15),e._uU(18," Criterio di ordinamento "),e.qZA()(),e.TgZ(19,"li")(20,"a",16),e.NdJ("click",function(){return n.setLayoutOrder(n.layoutParams.FILENAME)}),e.TgZ(21,"div",17),e._uU(22," account_box "),e.qZA(),e.TgZ(23,"div"),e._uU(24,"Nome"),e.qZA()()(),e.TgZ(25,"li")(26,"a",16),e.NdJ("click",function(){return n.setLayoutOrder(n.layoutParams.TIME)}),e.TgZ(27,"div",17),e._uU(28," history "),e.qZA(),e.TgZ(29,"div"),e._uU(30,"Ultima modifica"),e.qZA()()(),e.TgZ(31,"li")(32,"a",16),e.NdJ("click",function(){return n.setLayoutOrder(n.layoutParams.SIZE)}),e.TgZ(33,"div",17),e._uU(34," balance "),e.qZA(),e.TgZ(35,"div"),e._uU(36,"Dimensione"),e.qZA()()(),e.TgZ(37,"li")(38,"a",16),e.NdJ("click",function(){return n.setLayoutOrder(n.layoutParams.EXTENSION)}),e.TgZ(39,"div",17),e._uU(40," description "),e.qZA(),e.TgZ(41,"div"),e._uU(42,"Estensione"),e.qZA()()()()()(),e.YNc(43,Ba,1,0,"ng-container",18),e.qZA()(),e.YNc(44,Va,1,0,"ng-container",18)(45,ja,1,1,"ng-template",null,19,e.W1O)),2&t){const r=e.MAs(10),a=e.MAs(46);e.xp6(),e.Q6J("disabled",n.loading)("enterKeyOnly",!0),e.xp6(2),e.Q6J("disabled",n.loading),e.xp6(),e.Q6J("innerText",n.layoutOptions.type===n.layoutTypes.GRID?"space_dashboard":"view_list"),e.xp6(2),e.Q6J("disabled",n.loading),e.xp6(2),e.Q6J("ngIf",n.layoutOptions.asc)("ngIfElse",r),e.xp6(3),e.Q6J("placement",e.DdM(17,zi)),e.xp6(),e.Q6J("disabled",n.loading),e.xp6(8),e.Q6J("ngClass",e.VKq(18,an,n.layoutOptions.orderBy===n.layoutParams.FILENAME)),e.xp6(6),e.Q6J("ngClass",e.VKq(20,an,n.layoutOptions.orderBy===n.layoutParams.TIME)),e.xp6(6),e.Q6J("ngClass",e.VKq(22,an,n.layoutOptions.orderBy===n.layoutParams.SIZE)),e.xp6(6),e.Q6J("ngClass",e.VKq(24,an,n.layoutOptions.orderBy===n.layoutParams.EXTENSION)),e.xp6(5),e.Q6J("ngTemplateOutlet",a)("ngTemplateOutletContext",e.DdM(26,Xa)),e.xp6(),e.Q6J("ngTemplateOutlet",a)("ngTemplateOutletContext",e.DdM(27,el))}},dependencies:[f.mk,f.O5,f.tP,Ha.r,y.jt,y.iD,y.Vi],styles:[".utilities[_ngcontent-%COMP%]{margin:1rem 1rem 0;flex-wrap:wrap}.utilities[_ngcontent-%COMP%]   .btn-container[_ngcontent-%COMP%]{margin-top:1rem}.input-filter[_ngcontent-%COMP%]{width:100%;box-shadow:0 .125rem .25rem #00000013}.fixed-dropdown[_ngcontent-%COMP%]{bottom:2rem;right:2rem;z-index:1;width:56px;height:56px;box-shadow:0 .125rem .25rem #00000040}@media (min-width: 500px){.input-filter[_ngcontent-%COMP%]{width:auto}.utilities[_ngcontent-%COMP%]{flex-wrap:nowrap}.utilities[_ngcontent-%COMP%]   .btn-container[_ngcontent-%COMP%]{margin-top:initial}.utilities[_ngcontent-%COMP%]   .btn-outline-indigo[_ngcontent-%COMP%]{margin-left:1rem}}@media (min-width: 960px){.utilities[_ngcontent-%COMP%]{margin:1.5rem 0 0}}"]}),s})();const nl=["modal"];function il(o,s){if(1&o&&(e.TgZ(0,"tr"),e._UZ(1,"td",10),e.ALo(2,"arrayJoin"),e._UZ(3,"td",11),e.ALo(4,"formatBytes"),e.qZA()),2&o){const i=s.$implicit;e.xp6(),e.Q6J("innerText","."+e.xi3(2,2,i.ext,", .")),e.xp6(2),e.Q6J("innerText",e.lcZ(4,5,i.maxSize))}}function ol(o,s){if(1&o&&(e.ynx(0),e.YNc(1,il,5,7,"tr",9),e.BQk()),2&o){const i=e.oxw(2);e.xp6(),e.Q6J("ngForOf",i.supportedFiles)}}function sl(o,s){if(1&o&&(e.TgZ(0,"p"),e._uU(1," Il servizio "),e.TgZ(2,"strong"),e._uU(3,"Upload"),e.qZA(),e._uU(4),e.TgZ(5,"strong"),e._uU(6,"spazio gestito e amministrato"),e.qZA(),e._uU(7," dagli utenti per caricare immagini e file da condividere e utilizzare sui circuiti ForumFree, ForumCommunity e BlogFree. Grazie all'elevato livello di sicurezza e alle numerose funzioni disponibili, il servizio si presenta come alternativa "),e.TgZ(8,"strong"),e._uU(9,"valida e affidabile"),e.qZA(),e._uU(10," agli altri "),e.TgZ(11,"em"),e._uU(12,"hosting"),e.qZA(),e._uU(13," disponibili. "),e.qZA(),e.TgZ(14,"h6",3),e._uU(15,"Metodi di caricamento"),e.qZA(),e.TgZ(16,"p",4),e._uU(17,"Sono possibili i seguenti metodi di upload:"),e.qZA(),e.TgZ(18,"ul")(19,"li")(20,"em"),e._uU(21,"caricare file da memoria"),e.qZA(),e._uU(22,": cliccando sull'apposita area, \xe8 possibile "),e.TgZ(23,"strong"),e._uU(24,"selezionare"),e.qZA(),e._uU(25," uno o pi\xf9 file da caricare direttamente dalla memoria del dispositivo in uso. Nel caso di dispositivi mobile, \xe8 necessario che sia presente l'autorizzazione del browser ad accedere ai file presenti in locale; "),e.qZA(),e.TgZ(26,"li")(27,"em"),e._uU(28,"drag & drop"),e.qZA(),e._uU(29,": \xe8 possibile "),e.TgZ(30,"strong"),e._uU(31,"trascinare"),e.qZA(),e._uU(32," nell'apposita area i file che si desiderano caricare. Una volta rilasciati i file, l'upload inizier\xe0 immediatamente senza ulteriori conferme; "),e.qZA(),e.TgZ(33,"li")(34,"em"),e._uU(35,"clipboard"),e.qZA(),e._uU(36,": \xe8 consentito "),e.TgZ(37,"strong"),e._uU(38,"copincollare"),e.qZA(),e._uU(39," un file che si vuole aggiungere al proprio spazio. Per fare ci\xf2, occorre dapprima copiare (ad esempio premendo "),e.TgZ(40,"em"),e._uU(41,"ctrl + c"),e.qZA(),e._uU(42,") il file e in seguito, rimanendo sulla pagina di upload, incollarlo (ad esempio premendo "),e.TgZ(43,"em"),e._uU(44,"ctrl + v"),e.qZA(),e._uU(45,"). Se ci\xf2 che \xe8 stato copiato e incollato soddisfa i requisiti richiesti, l'upload inizier\xe0 senza ulteriori conferme. Questa tecnica pu\xf2 essere utilizzata come valida alternativa per caricare file da indirizzo remoto: \xe8 infatti sufficiente aprire il file da caricare in una finestra del browser, copiarlo e infine incollarlo nella pagina di upload. "),e.qZA()(),e.TgZ(46,"h6",3),e._uU(47,"Azioni disponibili"),e.qZA(),e.TgZ(48,"p",4),e._uU(49," Il servizio Upload consente di eseguire diverse azioni su singoli file o cartelle. Per aprire il men\xf9 con le opzioni disponibili, \xe8 sufficiente cliccare sui tre pallini verticali presenti vicino ad ogni file e cartella. In particolare, i pulsanti a disposizione sono: "),e.qZA(),e.TgZ(50,"ul")(51,"li")(52,"em"),e._uU(53,"sposta"),e.qZA(),e._uU(54,": questa azione, disponibile sia per file che per cartelle, consente, tramite l'apposito modal, di "),e.TgZ(55,"strong"),e._uU(56,"muovere"),e.qZA(),e._uU(57," l'elemento selezionato verso un'altra destinazione; "),e.qZA(),e.TgZ(58,"li")(59,"em"),e._uU(60,"rinomina"),e.qZA(),e._uU(61,": questa azione, disponibile sia per file che per cartelle, consente, tramite l'apposito modal, di assegnare un "),e.TgZ(62,"strong"),e._uU(63,"nuovo nome"),e.qZA(),e._uU(64," all'elemento selezionato; "),e.qZA(),e.TgZ(65,"li")(66,"em"),e._uU(67,"elimina"),e.qZA(),e._uU(68,": questa azione, disponibile sia per file che per cartelle, consente, tramite l'apposito modal, di "),e.TgZ(69,"strong"),e._uU(70,"rimuovere"),e.qZA(),e._uU(71," completamente e senza possibilit\xe0 di ripristino l'elemento selezionato. Nel caso in cui si agisca su una cartella, la rimozione viene estesa anche a tutto il suo contenuto, comprese eventuali sottocartelle; "),e.qZA(),e.TgZ(72,"li")(73,"em"),e._uU(74,"nuova cartella"),e.qZA(),e._uU(75,": premendo questo pulsante, presente solo tra le opzioni di una cartella, \xe8 possibile aggiungere una "),e.TgZ(76,"strong"),e._uU(77,"nuova cartella"),e.qZA(),e._uU(78,"; "),e.qZA(),e.TgZ(79,"li")(80,"em"),e._uU(81,"codici"),e.qZA(),e._uU(82,": questo pulsante, presente solo per i file, consente di aprire un modal contenente i vari "),e.TgZ(83,"strong"),e._uU(84,"codici"),e.qZA(),e._uU(85," del file stesso, tra cui i link per condividerlo ed eventualmente per incorporarlo come immagine; "),e.qZA(),e.TgZ(86,"li")(87,"em"),e._uU(88,"scarica"),e.qZA(),e._uU(89,": questo pulsante, presente solo per i file, permette di "),e.TgZ(90,"strong"),e._uU(91,"scaricare"),e.qZA(),e._uU(92," il file selezionato; "),e.qZA(),e.TgZ(93,"li")(94,"em"),e._uU(95,"modifica"),e.qZA(),e._uU(96,": questa azione, abilitata solo per i file supportati, permette di "),e.TgZ(97,"strong"),e._uU(98,"modificare"),e.qZA(),e._uU(99," (ritagliare, ingrandire, rimpicciolire, ruotare) il file selezionato; "),e.qZA(),e.TgZ(100,"li")(101,"em"),e._uU(102,"seleziona"),e.qZA(),e._uU(103,": questo pulsante consente di "),e.TgZ(104,"strong"),e._uU(105,"selezionare"),e.qZA(),e._uU(106," il file per eseguire in seguito un'azione massiva. "),e.qZA()(),e.TgZ(107,"h6",3),e._uU(108,"Azioni massive"),e.qZA(),e.TgZ(109,"p",4),e._uU(110," Tramite il pulsante verde con il simbolo del checkbox, \xe8 possibile aprire l'elenco delle azioni massive disponibili. Un'azione massiva \xe8 un'operazione che coinvolge contemporaneamente e allo stesso modo due o pi\xf9 file. Sono effettuabili le seguenti azioni massive: "),e.qZA(),e.TgZ(111,"ul")(112,"li")(113,"em"),e._uU(114,"seleziona tutti"),e.qZA(),e._uU(115,": questo pulsante, visibile solo se non \xe8 ancora stato selezionato alcun file, consente di "),e.TgZ(116,"strong"),e._uU(117,"selezionare tutti"),e.qZA(),e._uU(118," i file presente nella cartella corrente; "),e.qZA(),e.TgZ(119,"li")(120,"em"),e._uU(121,"deseleziona tutti"),e.qZA(),e._uU(122,": questo pulsante, visibile solo se \xe8 stato selezionato almeno un file, consente di "),e.TgZ(123,"strong"),e._uU(124,"rimuovere la selezione"),e.qZA(),e._uU(125," da tutti i file in precedenza selezionati; "),e.qZA(),e.TgZ(126,"li")(127,"em"),e._uU(128,"visualizza codici"),e.qZA(),e._uU(129,": questa azione, visibile solo se \xe8 stato selezionato almeno un file, consente di aprire un modal contenente i vari "),e.TgZ(130,"strong"),e._uU(131,"codici"),e.qZA(),e._uU(132," di tutti i file selezionati, tra cui i link per condividerli insieme ed eventualmente per incorporarli come immagine; "),e.qZA(),e.TgZ(133,"li")(134,"em"),e._uU(135,"sposta selezionati"),e.qZA(),e._uU(136,": questa azione, visibile solo se \xe8 stato selezionato almeno un file, consente di "),e.TgZ(137,"strong"),e._uU(138,"spostare"),e.qZA(),e._uU(139," verso un'unica destinazione tutti i file selezionati; "),e.qZA(),e.TgZ(140,"li")(141,"em"),e._uU(142,"elimina selezionati"),e.qZA(),e._uU(143,": questa azione, visibile solo se \xe8 stato selezionato almeno un file, consente di "),e.TgZ(144,"strong"),e._uU(145,"eliminare"),e.qZA(),e._uU(146," in modo definitivo tutti i file selezionati. "),e.qZA()(),e.TgZ(147,"h6",3),e._uU(148,"File accettati"),e.qZA(),e.TgZ(149,"p",5),e._uU(150," Vengono accettati differenti tipi di file, ciascuno con un limite massimo di dimensione: "),e.qZA(),e.TgZ(151,"table",6)(152,"thead")(153,"tr")(154,"th"),e._uU(155,"Estensione"),e.qZA(),e.TgZ(156,"th"),e._uU(157,"Dimensione"),e.qZA()()(),e.TgZ(158,"tbody"),e.YNc(159,ol,2,1,"ng-container",7),e.qZA()(),e.TgZ(160,"h6",3),e._uU(161,"Ricerca e opzioni di layout"),e.qZA(),e.TgZ(162,"p",4),e._uU(163," Nell'apposito input "),e.TgZ(164,"em"),e._uU(165,"Cerca"),e.qZA(),e._uU(166," \xe8 possibile inserire una parola che verr\xe0 usata per filtrare la lista dei file e delle cartelle sulla base del nome e dell'estensione degli stessi. Il pulsante viola accanto all'input di ricerca consente di modificare il layout dell'elenco di cartelle e file, scegliendo tra griglia e lista. I due pulsanti blu permettono infine di personalizzare l'ordinamento degli elementi presenti nella cartella corrente: "),e.qZA(),e.TgZ(167,"ul",8)(168,"li"),e._uU(169," il pulsante "),e.TgZ(170,"em"),e._uU(171,"a-z"),e.qZA(),e._uU(172," e "),e.TgZ(173,"em"),e._uU(174,"z-a"),e.qZA(),e._uU(175," consente di ordinare gli elementi seguendo un criterio rispettivamente crescente o decrescente; "),e.qZA(),e.TgZ(176,"li"),e._uU(177," il secondo pulsante apre un men\xf9 in cui \xe8 possibile scegliere un criterio di ordinamento tra "),e.TgZ(178,"em"),e._uU(179,"nome"),e.qZA(),e._uU(180,", "),e.TgZ(181,"em"),e._uU(182,"data di ultima modifica"),e.qZA(),e._uU(183,", che per i file non modificati coincide con la data di caricamento, "),e.TgZ(184,"em"),e._uU(185,"dimensione"),e.qZA(),e._uU(186,", cio\xe8 peso in byte del file, ed "),e.TgZ(187,"em"),e._uU(188,"estensione"),e.qZA(),e._uU(189,". "),e.qZA()()),2&o){const i=e.oxw();e.xp6(4),e.hij(" di ",i.appName," si pone come obiettivo fornire uno "),e.xp6(155),e.Q6J("ngIf",i.supportedFiles)}}let rl=(()=>{var o;class s{constructor(t){this.uploadService=t,this.appName=D.DJ}open(){var t=this;return(0,b.Z)(function*(){t.modalComponent.open(),t.supportedFiles||(t.supportedFiles=yield t.uploadService.getFileLimits())})()}}return(o=s).\u0275fac=function(t){return new(t||o)(e.Y36(ae.C))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upload-info-modal"]],viewQuery:function(t,n){if(1&t&&e.Gf(nl,5),2&t){let r;e.iGM(r=e.CRH())&&(n.modalComponent=r.first)}},decls:3,vars:0,consts:[["title","Servizio Upload"],["modal",""],["appModalBody",""],[1,"fst-italic"],[1,"mb-1"],[1,"mb-3"],[1,"table","table-striped","text-center","border"],[4,"ngIf"],[1,"mb-0"],[4,"ngFor","ngForOf"],[1,"fst-italic",3,"innerText"],[3,"innerText"]],template:function(t,n){1&t&&(e.TgZ(0,"app-modal",0,1),e.YNc(2,sl,190,2,"ng-template",2),e.qZA())},dependencies:[f.sg,f.O5,ne.z,se.J,pt.J,rn.b]}),s})();const al=["scrollerContainer"],ll=["app-hidden-scroller",""],cl=(o,s)=>({"max-height":o,height:s}),dl=["*"];let pl=(()=>{var o;class s{constructor(){this.touchDevice=D.b1}ngAfterViewInit(){const t=this.scrollerContainer.nativeElement;t.style.marginRight=-(t.offsetWidth-t.clientWidth)+"px"}}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["","app-hidden-scroller",""]],viewQuery:function(t,n){if(1&t&&e.Gf(al,5),2&t){let r;e.iGM(r=e.CRH())&&(n.scrollerContainer=r.first)}},inputs:{maxHeight:"maxHeight",height:"height"},attrs:ll,ngContentSelectors:dl,decls:3,vars:4,consts:[[1,"scroller-container",3,"ngStyle"],["scrollerContainer",""]],template:function(t,n){1&t&&(e.F$t(),e.TgZ(0,"div",0,1),e.Hsn(2),e.qZA()),2&t&&e.Q6J("ngStyle",e.WLB(1,cl,n.maxHeight||null,n.height||null))},dependencies:[f.PC],styles:[".scroller-container[_ngcontent-%COMP%]{overflow-y:scroll}[_nghost-%COMP%]{overflow:hidden}"]}),s})();const ul=o=>({"mb-2":o});function ml(o,s){1&o&&e._UZ(0,"li",6),2&o&&e.Q6J("ngClass",e.VKq(1,ul,!s.last))}const gl=()=>[];function _l(o,s){1&o&&(e.ynx(0),e.TgZ(1,"ul",4),e.YNc(2,ml,1,3,"li",5),e.qZA(),e.BQk()),2&o&&(e.xp6(2),e.Q6J("ngForOf",e.DdM(1,gl).constructor(2)))}function hl(o,s){1&o&&(e.ynx(0),e.TgZ(1,"div",9),e._uU(2," Non ci sono file recenti! "),e.qZA(),e.BQk())}const fl=o=>({rotating:o}),vl=o=>({width:o});function Cl(o,s){if(1&o&&(e.TgZ(0,"li",16),e._UZ(1,"div",17),e.TgZ(2,"div",18)(3,"div",19),e._UZ(4,"div",20)(5,"div",21),e.TgZ(6,"div",22),e._uU(7),e.qZA()(),e.TgZ(8,"div",23),e._UZ(9,"div",24),e.qZA()()()),2&o){const i=e.oxw().$implicit;e.xp6(),e.Q6J("ngClass",e.VKq(6,fl,i.progress>0&&i.progress<100))("innerText",i.progress>0?i.progress<100?"sync":"check_circle":"schedule"),e.xp6(3),e.Q6J("innerText",i.file.filename),e.xp6(),e.Q6J("innerText","."+i.file.ext),e.xp6(2),e.hij(" ",i.progress,"% "),e.xp6(2),e.Q6J("ngStyle",e.VKq(8,vl,i.progress+"%"))}}function xl(o,s){if(1&o&&(e.ynx(0),e.YNc(1,Cl,10,10,"li",15),e.BQk()),2&o){const i=s.$implicit;e.xp6(),e.Q6J("ngIf",!i.error)}}function Tl(o,s){if(1&o&&(e.TgZ(0,"li",25)(1,"div",26),e._uU(2," cancel "),e.qZA(),e.TgZ(3,"div",18)(4,"div",27),e._UZ(5,"div",20)(6,"div",21),e.qZA(),e.TgZ(7,"div",28),e._uU(8," Errore durante il caricamento "),e.qZA()()()),2&o){const i=s.$implicit;e.xp6(5),e.Q6J("innerText",i.file.filename),e.xp6(),e.Q6J("innerText","."+i.file.ext)}}const bl=(o,s)=>({pending:o,selected:s}),yl=()=>[0,5],Ml=o=>({offset:o,appendTo:"parent"});function El(o,s){if(1&o){const i=e.EpF();e.TgZ(0,"li",29),e.ALo(1,"arrayIncludes"),e.ALo(2,"arrayIncludes"),e.TgZ(3,"button",30),e.NdJ("click",function(){const r=e.CHM(i).$implicit,a=e.oxw(3);return e.KtG(a.unselectFile(r.name))}),e.O4$(),e.TgZ(4,"svg",31),e._UZ(5,"path",32)(6,"path",33),e.qZA()(),e.kcU(),e.TgZ(7,"a",34),e._uU(8,"wallpaper"),e.qZA(),e.TgZ(9,"div",35)(10,"a",36),e._UZ(11,"div",20)(12,"div",37),e.qZA(),e.TgZ(13,"div",38)(14,"div",39),e._uU(15),e.ALo(16,"formatBytes"),e.qZA(),e.TgZ(17,"div",40),e.ALo(18,"date"),e._UZ(19,"span",41),e.qZA()()(),e.TgZ(20,"div",42,43),e.NdJ("openChange",function(n){e.CHM(i);const r=e.MAs(21);e.oxw();const a=e.MAs(1),c=e.oxw(2);return e.KtG(c.saveDropdown(r,a,n))}),e.TgZ(22,"div",44),e._uU(23," more_vert "),e.qZA(),e.TgZ(24,"div",45),e._UZ(25,"app-upload-file-menu",46),e.ALo(26,"arrayIncludes"),e.qZA()()()}if(2&o){const i=s.$implicit,t=e.MAs(21),n=e.oxw(3);e.Q6J("ngClass",e.WLB(26,bl,e.xi3(1,12,n.pendingFiles,i.name),e.xi3(2,15,n.selectedFiles,i.name))),e.xp6(7),e.Q6J("href",i.url,e.LSH),e.xp6(3),e.Q6J("href",i.url,e.LSH),e.xp6(),e.Q6J("innerText",i.filename),e.xp6(),e.Q6J("innerText","."+i.ext),e.xp6(3),e.hij(" ",e.lcZ(16,18,i.size)," "),e.xp6(2),e.Q6J("appTippy",e.xi3(18,20,i.time,"dd-MM-YY HH:mm")||"")("tippyProps",e.VKq(30,Ml,e.DdM(29,yl))),e.xp6(2),e.Q6J("date",i.time),e.xp6(6),e.Q6J("file",i)("isSelected",e.xi3(26,23,n.selectedFiles,i.name))("dropdownRef",t)}}function Al(o,s){if(1&o&&(e.TgZ(0,"ul",10,11),e.YNc(2,xl,2,1,"ng-container",12)(3,Tl,9,2,"li",13)(4,El,27,32,"li",14),e.ALo(5,"slice"),e.qZA()),2&o){const i=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",i.uploadingFileList),e.xp6(),e.Q6J("ngForOf",i.uploadedFileWithErrors),e.xp6(),e.Q6J("ngForOf",e.Dn7(5,3,i.fileList,0,5))}}function wl(o,s){if(1&o&&(e.TgZ(0,"div",7),e.YNc(1,hl,3,0,"ng-container",2)(2,Al,6,7,"ng-template",null,8,e.W1O),e.qZA()),2&o){const i=e.MAs(3),t=e.oxw();e.xp6(),e.Q6J("ngIf",0===t.fileList.length&&0===t.uploadingFileList.length&&0===t.uploadedFileWithErrors.length)("ngIfElse",i)}}const Ul=o=>({"touch-device":o});let Zl=(()=>{var o;class s{constructor(t,n){this.uploadObservablesService=t,this.renderer=n,this.fileList=[],this.loading=!0,this.touchDevice=D.b1,this.uploadingFileList=[],this.uploadedFileWithErrors=[],this.pendingFiles=[],this.selectedFiles=[],this.openedDropdown=[],this.checkOpenedDropdownEvent=!1}ngOnInit(){this.uploadingListSubscription=this.uploadObservablesService.uploadingFileQueueObservable.subscribe(t=>{this.uploadingFileList=[...t].reverse()}),this.uploadingErrorSubscription=this.uploadObservablesService.uploadingFileErrorObservable.subscribe(t=>{this.uploadedFileWithErrors.unshift(t)}),this.entityPendingSubscription=this.uploadObservablesService.entityPendingObservable.subscribe(t=>{t.forEach(n=>{n.type===v.VC.FILE&&(this.pendingFiles=[...this.updatePendingFileList(this.pendingFiles,n.name,n.start)])})}),this.selectedFileListSubscription=this.uploadObservablesService.selectedFileListObservable.subscribe(t=>{this.selectedFiles=t.map(n=>n.name)})}updatePendingFileList(t,n,r){if(r)t.includes(n)||t.push(n);else{const a=t.indexOf(n);a>-1&&t.splice(a,1)}return t}saveDropdown(t,n,r){if(!r||(this.openedDropdown.push(t),this.checkOpenedDropdownEvent))return;this.checkOpenedDropdownEvent=!0;const a=this.renderer.listen(n,"scroll",()=>{this.openedDropdown.forEach(c=>{c.isOpen()&&c.close()}),this.openedDropdown=[],this.checkOpenedDropdownEvent=!1,a()})}unselectFile(t){this.uploadObservablesService.pushSelectedFile({name:t,selected:!1})}ngOnDestroy(){var t,n,r,a;null===(t=this.uploadingListSubscription)||void 0===t||t.unsubscribe(),null===(n=this.uploadingErrorSubscription)||void 0===n||n.unsubscribe(),null===(r=this.entityPendingSubscription)||void 0===r||r.unsubscribe(),null===(a=this.selectedFileListSubscription)||void 0===a||a.unsubscribe()}}return(o=s).\u0275fac=function(t){return new(t||o)(e.Y36(L.r),e.Y36(e.Qsj))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upload-recent-files"]],inputs:{fileList:"fileList",loading:"loading"},decls:6,vars:5,consts:[[1,"flat-container","py-2","px-3","h-100","d-flex","flex-column",3,"ngClass"],[1,"fv-small-caps","fs-lg","mb-2"],[4,"ngIf","ngIfElse"],["listContainer",""],[1,"list-unstyled","mb-1","placeholder-glow"],["class","placeholder col-12 rounded",3,"ngClass",4,"ngFor","ngForOf"],[1,"placeholder","col-12","rounded",3,"ngClass"],["app-hidden-scroller","","height","100%",1,"file-list-container","mb-1","flex-grow-1"],["listContent",""],[1,"alert","alert-primary","mb-0","text-center"],[1,"list-unstyled","mb-0","file-list"],["list",""],[4,"ngFor","ngForOf"],["class","file-container rounded bg-danger text-white",4,"ngFor","ngForOf"],["class","file-container rounded position-relative",3,"ngClass",4,"ngFor","ngForOf"],["class","file-container rounded uploading",4,"ngIf"],[1,"file-container","rounded","uploading"],[1,"d-block","material-icons-outlined","text-primary",3,"ngClass","innerText"],[1,"ms-3","flex-grow-1","min-w-0"],[1,"d-flex","align-items-end"],[1,"text-truncate",3,"innerText"],[1,"me-3",3,"innerText"],[1,"ms-auto","fs-sm"],[1,"progress","bg-white","mt-1"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar",3,"ngStyle"],[1,"file-container","rounded","bg-danger","text-white"],[1,"d-block","material-icons-outlined"],[1,"d-flex"],[1,"fs-xs"],[1,"file-container","rounded","position-relative",3,"ngClass"],[1,"btn","btn-primary","shadow-none","pre-button","d-flex","justify-content-center","align-items-center","p-0","position-absolute",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 16 16"],["d","M2.5 8a5.5 5.5 0 0 1 8.25-4.764.5.5 0 0 0 .5-.866A6.5 6.5 0 1 0 14.5 8a.5.5 0 0 0-1 0 5.5 5.5 0 1 1-11 0z"],["d","M15.354 3.354a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l7-7z"],["target","_blank","rel","noreferrer",1,"material-icons-outlined","d-block","text-primary",3,"href"],[1,"mx-3","flex-grow-1","min-w-0"],["target","_blank","rel","noreferrer",1,"text-reset","d-inline-flex","mw-100",3,"href"],[3,"innerText"],[1,"text-muted","fs-xs","d-flex","flex-wrap","align-items-center","position-relative"],[1,"file-size","me-1"],[1,"file-time",3,"appTippy","tippyProps"],["timeago","",3,"date"],["ngbDropdown","","placement","left-top","display","dynamic","container","body",1,"dropdown-no-caret","ms-auto",3,"openChange"],["dropdownRef","ngbDropdown"],["ngbDropdownToggle","",1,"material-icons-outlined","d-block","text-primary","cursor-pointer","dropdown-icon"],["ngbDropdownMenu","",1,"dropdown-menu"],[3,"file","isSelected","dropdownRef"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"File recenti"),e.qZA(),e.YNc(3,_l,3,2,"ng-container",2)(4,wl,4,2,"ng-template",null,3,e.W1O),e.qZA()),2&t){const r=e.MAs(5);e.Q6J("ngClass",e.VKq(3,Ul,n.touchDevice)),e.xp6(3),e.Q6J("ngIf",n.loading)("ngIfElse",r)}},dependencies:[f.mk,f.sg,f.O5,f.PC,pl,y.jt,y.iD,y.Vi,st,qe.$,ai,Ni.Q,f.OU,f.uU,rn.b],styles:['.flat-container[_ngcontent-%COMP%]{--file-item-height: 62px}.placeholder[_ngcontent-%COMP%]{height:var(--file-item-height);background-color:var(--bs-gray-500)}.file-list-container[_ngcontent-%COMP%]{overflow:hidden;height:1px;min-height:calc(var(--file-item-height) * 2 + .5rem)}.file-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.5rem 1rem;transition:opacity .2s,margin-left .2s;height:var(--file-item-height)}.file-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .pre-button[_ngcontent-%COMP%]{width:40px;left:-10px;transform:translate(-100%);height:70%}.file-list[_ngcontent-%COMP%] > li.selected[_ngcontent-%COMP%]{margin-left:50px}.file-list[_ngcontent-%COMP%] > li.pending[_ngcontent-%COMP%]{opacity:.5}.file-list[_ngcontent-%COMP%] > li.pending[_ngcontent-%COMP%]   .dropdown-icon[_ngcontent-%COMP%]{display:none!important}.file-list[_ngcontent-%COMP%] > li.pending[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{pointer-events:none}.file-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:not(:last-of-type){margin-bottom:.5rem}.file-container[_ngcontent-%COMP%]{background-color:#dae0ff;min-height:var(--file-item-height)}.file-container.uploading[_ngcontent-%COMP%]   .rotating[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fullRotation 1s linear infinite}.file-container.uploading[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{height:.5rem;border-radius:.15rem}.touch-device[_ngcontent-%COMP%]   .file-time[_ngcontent-%COMP%]{cursor:pointer}.file-size[_ngcontent-%COMP%]:after{content:" - "}@keyframes _ngcontent-%COMP%_fullRotation{0%{transform:rotate(0)}to{transform:rotate(-360deg)}}']}),s})();function Ol(o,s){if(1&o&&e._UZ(0,"span",13),2&o){const i=e.oxw();e.Q6J("innerText",i.usedStoragePercentage+"%")}}const Sl=o=>({width:o}),Pl=(o,s)=>({pending:o,loading:s});let Il=(()=>{var o;class s{constructor(){this.recalculatingStorage=!1,this.loading=!1,this.openInfoModal=new e.vpe,this.recalculateStorage=new e.vpe,this.usedStoragePercentage=0,this.storageAvailable=0}ngOnChanges(t){t.userStorage&&(this.usedStoragePercentage=Math.round(Math.min(100*this.userStorage.used/this.userStorage.max,100)),this.storageAvailable=Math.max(this.userStorage.max-this.userStorage.used,0))}}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upload-used-storage"]],inputs:{userStorage:"userStorage",recalculatingStorage:"recalculatingStorage",loading:"loading"},outputs:{openInfoModal:"openInfoModal",recalculateStorage:"recalculateStorage"},features:[e.TTD],decls:28,vars:22,consts:[[1,"flat-container","py-2","px-3","flex-grow-1","position-relative","d-flex","flex-column"],[1,"d-flex","align-items-end"],[1,"fv-small-caps","fs-lg"],[1,"material-icons-outlined","d-block","ms-auto","text-primary","cursor-pointer",3,"click"],[1,"my-auto"],[1,"storage-desc","text-justify"],[3,"innerHTML"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress",3,"appTippy","ariaValueNow"],[1,"progress-bar",3,"ngStyle"],[3,"innerText",4,"ngIf"],[1,"d-flex","align-items-center"],[1,"me-auto"],["role","button","appTippy","Ricalcola lo spazio",1,"d-block","material-icons-outlined","icon-small","mt-1","ms-1","refresh-storage",3,"ngClass","disableOnTouchDevice","click"],[3,"innerText"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"Spazio occupato"),e.qZA(),e.TgZ(4,"div",3),e.NdJ("click",function(){return n.openInfoModal.emit()}),e._uU(5," info "),e.qZA()(),e.TgZ(6,"div",4)(7,"p",5),e._uU(8," A questo account \xe8 associato uno spazio di "),e._UZ(9,"span",6),e.ALo(10,"formatBytes"),e._uU(11,". Una volta occupato tutto lo spazio disponibile, per caricare nuovi file occorre cancellare quelli pi\xf9 vecchi o inutilizzati. "),e.qZA()(),e.TgZ(12,"div")(13,"div",7),e.ALo(14,"formatBytes"),e.TgZ(15,"div",8),e.YNc(16,Ol,1,1,"span",9),e.qZA()(),e.TgZ(17,"div",10)(18,"div",11)(19,"small"),e._uU(20,"Spazio libero: "),e._UZ(21,"span",6),e.ALo(22,"formatBytes"),e._uU(23," su "),e._UZ(24,"span",6),e.ALo(25,"formatBytes"),e.qZA()(),e.TgZ(26,"a",12),e.NdJ("click",function(){return n.recalculateStorage.emit()}),e._uU(27,"sync"),e.qZA()()()()),2&t&&(e.xp6(9),e.Q6J("innerHTML",e.lcZ(10,9,n.userStorage.max),e.oJD),e.xp6(4),e.Q6J("appTippy","I file caricati occupano "+e.lcZ(14,11,n.userStorage.used))("ariaValueNow",n.usedStoragePercentage),e.xp6(2),e.Q6J("ngStyle",e.VKq(17,Sl,n.usedStoragePercentage+"%")),e.xp6(),e.Q6J("ngIf",n.usedStoragePercentage>1),e.xp6(5),e.Q6J("innerHTML",e.lcZ(22,13,n.storageAvailable),e.oJD),e.xp6(3),e.Q6J("innerHTML",e.lcZ(25,15,n.userStorage.max),e.oJD),e.xp6(2),e.Q6J("ngClass",e.WLB(19,Pl,n.recalculatingStorage,n.loading))("disableOnTouchDevice",!0))},dependencies:[f.mk,f.O5,f.PC,qe.$,rn.b],styles:[".storage-desc[_ngcontent-%COMP%]{margin:.5rem 0 1rem}.progress-bar[_ngcontent-%COMP%]{transition:none}.refresh-storage.pending[_ngcontent-%COMP%], .refresh-storage.loading[_ngcontent-%COMP%]{pointer-events:none}.refresh-storage.pending[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rotation 1s linear infinite}@media (min-width: 1100px){.storage-desc[_ngcontent-%COMP%]{margin:.25rem 0 .5rem}}@keyframes _ngcontent-%COMP%_rotation{0%{transform:rotate(0)}to{transform:rotate(-360deg)}}"]}),s})();const Dl=["fileLinksModal"],Fl=["renameModal"],Ll=["deleteModal"],kl=["moveModal"],Rl=["cropModal"];function Nl(o,s){1&o&&e._UZ(0,"app-login-as-advice")}function zl(o,s){1&o&&e._UZ(0,"app-upload-endpoint-advice")}function ql(o,s){if(1&o&&e._UZ(0,"app-upload-no-storage-advice",23),2&o){const i=e.oxw();e.Q6J("storageToFree",i.userStorage.used-i.userStorage.max)}}let Hl=(()=>{var o;class s{constructor(t,n,r,a,c,u,_,M){this.uploadService=t,this.uploadObservablesService=n,this.uploadActionsService=r,this.uploadSubscriptionsService=a,this.toastService=c,this.uploadEndpointsService=u,this.urlQueryParamsService=_,this.loginAsService=M,this.fileList=[],this.folderList=[],this.loading=!0,this.currentFolderPath=[],this.currentFilter="",this.currentActionEntities=[],this.currentActionReservedNames=[],this.userStoragePlaceholder={used:0,max:He.p$,exceeded:!1},this.recalculatingUserStorage=!1,this.showRemoteAdvice=(0,e.Flj)(()=>{const E=this.uploadEndpointsService.activeRemote();return!this.remotesLoading()&&this.uploadEndpointsService.isRemoteAdviceEnabled()&&E&&!E.default}),this.loadingCounter=1,this.remotesLoading=(0,e.tdS)(!0)}ngOnInit(){var t=this;return(0,b.Z)(function*(){t.uploadService.setGqlIdHeader(),t.currentFolderPath=t.uploadService.preferences.lastFolderPath;const n=t.urlQueryParamsService.getAndDeleteParam(No.RT.UPLOAD_REMOTE),r=yield t.uploadEndpointsService.setRemoteList(n,{size:{},list:{paths:t.currentFolderPath}});t.uploadEndpointsService.disableActiveRemoteChange(),t.remotesLoading.set(!1),r.activeRemoteChangedId&&(t.uploadObservablesService.pushCurrentFolderPath([]),t.currentFolderPath=[]),t.uploadActionsService.currentFolderPath=[...t.currentFolderPath],yield Promise.all([t.getUserStorage(),t.getFiles()]),t.setSubscriptions(),yield t.subscribeForChanges(),t.setLoading(!1)})()}setLoading(t){if(t)return this.uploadEndpointsService.disableActiveRemoteChange(),++this.loadingCounter,void(this.loading=!0);--this.loadingCounter,this.loadingCounter<=0&&(this.uploadEndpointsService.enableActiveRemoteChange(),this.loading=!1)}getUserStorage(t=!1){var n=this;return(0,b.Z)(function*(){t&&n.uploadService.flushUserStorage(),n.userStorage=yield n.uploadService.getUserStorage()})()}recalculateUserStorage(){var t=this;return(0,b.Z)(function*(){t.recalculatingUserStorage=!0,t.userStorage=yield t.uploadService.getUserStorage(!0),t.recalculatingUserStorage=!1,t.toastService.show({content:"Lo spazio occupato \xe8 stato ricalcolato!"})})()}subscribeForChanges(){var t=this;return(0,b.Z)(function*(){t.graphqlChangesSubscriptionDispose=yield t.uploadService.subscribeForChanges(function(){var n=(0,b.Z)(function*(r){const a=(c,u)=>{c&&t.closeActionModal(),u&&t.uploadObservablesService.pushCurrentFolderPath([])};switch(r.type){case wt.UPLOAD:{const c=t.uploadSubscriptionsService.parseUploadEvent(r.message);c&&t.uploadedFiles(c)}break;case wt.NEW_DIR:{const c=t.uploadSubscriptionsService.parseCreateFolderEvent(r.message);c&&t.createFolder(c)}break;case wt.DELETE:{const c=t.uploadSubscriptionsService.parseDeleteEntityEvent(r.message,t.currentFolderPath,t.currentActionEntities);c&&(a(c.entityCompromised,c.pathCompromised),t.removeEntitiesFromList(c.event))}break;case wt.MOVE:{const c=t.uploadSubscriptionsService.parseMoveEntityEvent(r.message,t.currentFolderPath,t.currentActionEntities);if(!c)break;a(c.entityCompromised,c.pathCompromised);const u={name:c.source.name,type:c.type};c.isRename?t.renameEntityInList({list:[u],destPath:c.target.paths,newEntityData:c.newEntity}):(t.removeEntitiesFromList({destPath:c.source.paths,list:[u]}),t.moveEntitiesInList({list:[u],destPath:c.target.paths,originPath:c.source.paths,results:[{data:c.newEntity,type:u.type}]}))}}});return function(r){return n.apply(this,arguments)}}())})()}setSubscriptions(){var t=this;this.actionSubscription=this.uploadObservablesService.actionObservable.subscribe(n=>{if(n.payload.entities[0]){switch(n.name){case v.In.FILE_SHOW_LINKS:this.currentActionModalRef=this.fileLinksModalComponent.open();break;case v.In.RENAME:this.currentActionReservedNames=n.payload.entities[0].type===v.VC.FILE?this.fileList.map(r=>r.name):this.folderList.map(r=>r.name),this.currentActionModalRef=this.renameModalComponent.open();break;case v.In.MOVE:this.currentActionModalRef=this.fileMoveModalComponent.open();break;case v.In.DELETE:this.currentActionModalRef=this.deleteModalComponent.open();break;case v.In.FILE_EDIT:this.currentActionModalRef=this.fileCropModalComponent.open()}this.currentActionEntities=n.payload.entities}}),this.currentFolderPathSubscription=this.uploadObservablesService.currentFolderPathObservable.subscribe(function(){var n=(0,b.Z)(function*(r){t.setLoading(!0),t.uploadObservablesService.pushSelectedFile([]),t.uploadObservablesService.pushUploadingFileQueue([]),t.closeActionModal(),t.currentFolderPath=r,t.uploadActionsService.currentFolderPath=[...r],yield t.getFiles(),t.setLoading(!1)});return function(r){return n.apply(this,arguments)}}()),this.loginAsSubscription=this.loginAsService.profileObservable.subscribe(function(){var n=(0,b.Z)(function*(r){r||(yield t.loginAndRemoteCallback(t.uploadService.preferences.lastFolderPath))});return function(r){return n.apply(this,arguments)}}()),this.remoteSubscription=this.uploadObservablesService.activeRemoteObservable.pipe((0,Te.h)(n=>!!n)).subscribe((0,b.Z)(function*(){return yield t.loginAndRemoteCallback()}))}loginAndRemoteCallback(t=[]){var n=this;return(0,b.Z)(function*(){n.setLoading(!0),n.uploadObservablesService.pushCurrentFolderPath(t),yield n.getUserStorage(),n.setLoading(!1)})()}closeActionModal(){this.currentActionModalRef&&(this.currentActionModalRef.close(),this.currentActionModalRef=void 0)}getFiles(){var t=this;return(0,b.Z)(function*(){const n=yield t.uploadService.getFileList(t.currentFolderPath);t.fileList=n.files.map(r=>(0,C.Z)({},r)),t.folderList=n.folders.map(r=>(0,C.Z)({},r)),t.sortListByTime()})()}sortListByTime(){this.fileList.sort((t,n)=>t.time>n.time?-1:1)}deleteEndEvent(){var t=this;return(0,b.Z)(function*(){yield t.getUserStorage(!0)})()}removeEntitiesFromList(t){const n=(0,F.rQ)(t.list);for(const[r,a]of Object.entries(n)){if(0===a.length)continue;const c=this.uploadActionsService.removeEntitiesCallback(t.destPath,a.map(u=>u.name),r);if(c.success&&c.payload){const u=r===v.VC.FILE,_=u?this.fileList:this.folderList;for(const M of c.payload.list){const E=_.findIndex(Z=>Z.name===M);E>-1&&_.splice(E,1)}u?(this.uploadObservablesService.pushDeleteFile(c.payload.list),this.deselectFiles(c.payload.list)):this.folderList=[..._]}}}renameEntityInList(t){const n=t.list[0],r=this.uploadActionsService.renameEntityCallback(t.destPath,n,t.newEntityData);if(!r.payload)return;const a=r.payload.list[0],c=n.type===v.VC.FILE?this.fileList:this.folderList,u=c.findIndex(_=>_.name===n.name);u<0||(c[u]=a,this.uploadObservablesService.pushRenameEntity({oldName:n.name,newEntity:a}),n.type===v.VC.FILE&&this.sortListByTime())}moveEntitiesInList(t){const n=this.uploadActionsService.moveEntitiesCallback(t.results);n.payload&&(n.payload.list.files.length&&this.uploadedFiles({destPath:t.destPath,list:n.payload.list.files,rewrite:!1}),n.payload.list.folders.length&&this.createFolder({destPath:t.destPath,list:n.payload.list.folders,opened:!1}))}fileUploadedEvent(t){var n=this;return(0,b.Z)(function*(){n.uploadedFiles(t),t.list.length&&(yield n.getUserStorage(!0))})()}uploadedFiles(t){let n=[];if(t.rewrite)n=t.list.map(c=>c.name);else{var r;const c=null===(r=this.uploadService.cache.getItem(t.destPath))||void 0===r?void 0:r.files;if(c)for(const u of t.list)c.findIndex(_=>_.name===u.name)>-1&&n.push(u.name)}n.length&&this.removeEntitiesFromList({destPath:t.destPath,list:n.map(c=>({name:c,type:v.VC.FILE}))});const a=this.uploadActionsService.addEntitiesCallback(t.destPath,t.list,v.VC.FILE);a.success&&a.payload&&(this.fileList.unshift(...a.payload.list),this.uploadObservablesService.pushUploadedFile(a.payload.list))}createFolder(t){const n=this.uploadActionsService.addEntitiesCallback(t.destPath,t.list,v.VC.FOLDER);!t.opened&&n.success&&n.payload&&(this.folderList=[...this.folderList,...n.payload.list])}selectAllFiles(){this.uploadObservablesService.pushSelectedFile(this.fileList.map(t=>({name:t.name,selected:!0})))}deselectFiles(t){this.uploadObservablesService.pushSelectedFile(t.map(n=>({name:n,selected:!1})))}ngOnDestroy(){var t,n,r,a;null===(t=this.actionSubscription)||void 0===t||t.unsubscribe(),null===(n=this.currentFolderPathSubscription)||void 0===n||n.unsubscribe(),null===(r=this.loginAsSubscription)||void 0===r||r.unsubscribe(),null===(a=this.remoteSubscription)||void 0===a||a.unsubscribe(),this.graphqlChangesSubscriptionDispose&&this.graphqlChangesSubscriptionDispose(),this.uploadService.removeGqlIdHeader(),this.deselectFiles([])}}return(o=s).\u0275fac=function(t){return new(t||o)(e.Y36(ae.C),e.Y36(L.r),e.Y36(Ve),e.Y36(ko),e.Y36(R.k),e.Y36(tt.r),e.Y36(Ro.J),e.Y36(Xn.D))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],viewQuery:function(t,n){if(1&t&&(e.Gf(Dl,5),e.Gf(Fl,5),e.Gf(Ll,5),e.Gf(kl,5),e.Gf(Rl,5)),2&t){let r;e.iGM(r=e.CRH())&&(n.fileLinksModalComponent=r.first),e.iGM(r=e.CRH())&&(n.renameModalComponent=r.first),e.iGM(r=e.CRH())&&(n.deleteModalComponent=r.first),e.iGM(r=e.CRH())&&(n.fileMoveModalComponent=r.first),e.iGM(r=e.CRH())&&(n.fileCropModalComponent=r.first)}},decls:26,vars:31,consts:[[4,"ngIf"],["pageTitle","Gestione file"],[1,"d-grid","upload-header"],[3,"loading","currentFolderPath","disabled","disabledLoading","fileUploadedEvent","openInfoModal"],[1,"d-flex","flex-column"],[1,"min-w-0",3,"fileList","loading"],[1,"d-block",3,"fileLoading"],[1,"d-flex","flex-grow-1",3,"loading","userStorage","recalculatingStorage","openInfoModal","recalculateStorage"],[3,"loading","fileList","filterEvent","selectAllFilesEvent"],[3,"storageToFree",4,"ngIf"],[3,"loading","folderList","currentFolderPath","filter","newFolderEvent"],[3,"loading","fileList","filter"],[3,"entities"],["fileLinksModal",""],[3,"currentFolderPath","entity","reservedNames","renameEvent"],["renameModal",""],[3,"entities","currentFolderPath","deleteStartEvent","deleteEndEvent"],["deleteModal",""],[3,"entities","currentFolderPath","moveEvent","deleteBeforeMovingEvent"],["moveModal",""],[3,"entity"],["cropModal",""],["infoModal",""],[3,"storageToFree"]],template:function(t,n){if(1&t){const r=e.EpF();e.YNc(0,Nl,1,0,"app-login-as-advice",0),e._UZ(1,"app-breadcrumb",1),e.TgZ(2,"div",2)(3,"app-uploader",3),e.NdJ("fileUploadedEvent",function(c){return n.fileUploadedEvent(c)})("openInfoModal",function(){e.CHM(r);const c=e.MAs(25);return e.KtG(c.open())}),e.qZA(),e.TgZ(4,"div",4),e._UZ(5,"app-upload-recent-files",5)(6,"app-upload-endpoints",6),e.qZA(),e.TgZ(7,"div",4)(8,"app-upload-used-storage",7),e.NdJ("openInfoModal",function(){e.CHM(r);const c=e.MAs(25);return e.KtG(c.open())})("recalculateStorage",function(){return n.recalculateUserStorage()}),e.qZA(),e.TgZ(9,"app-upload-filter",8),e.NdJ("filterEvent",function(c){return n.currentFilter=c})("selectAllFilesEvent",function(){return n.selectAllFiles()}),e.qZA()()(),e.YNc(10,zl,1,0,"app-upload-endpoint-advice",0)(11,ql,1,1,"app-upload-no-storage-advice",9),e.TgZ(12,"app-upload-folder-list",10),e.NdJ("newFolderEvent",function(c){return n.createFolder(c)}),e.qZA(),e._UZ(13,"app-upload-file-list",11)(14,"app-upload-file-links-modal",12,13),e.TgZ(16,"app-upload-rename-modal",14,15),e.NdJ("renameEvent",function(c){return n.renameEntityInList(c)}),e.qZA(),e.TgZ(18,"app-upload-delete-modal",16,17),e.NdJ("deleteStartEvent",function(c){return n.removeEntitiesFromList(c)})("deleteEndEvent",function(){return n.deleteEndEvent()}),e.qZA(),e.TgZ(20,"app-upload-move-modal",18,19),e.NdJ("moveEvent",function(c){return n.moveEntitiesInList(c)})("deleteBeforeMovingEvent",function(c){return n.removeEntitiesFromList(c)}),e.qZA(),e._UZ(22,"app-upload-crop-modal",20,21)(24,"app-upload-info-modal",null,22)}2&t&&(e.Q6J("ngIf",n.loginAsService.isActive),e.xp6(3),e.Q6J("loading",n.loading)("currentFolderPath",n.currentFolderPath)("disabled",(null==n.userStorage?null:n.userStorage.exceeded)||!1)("disabledLoading",!n.userStorage),e.xp6(2),e.Q6J("fileList",n.fileList)("loading",n.loading),e.xp6(),e.Q6J("fileLoading",n.loading),e.xp6(2),e.Q6J("loading",n.loading)("userStorage",n.userStorage||n.userStoragePlaceholder)("recalculatingStorage",n.recalculatingUserStorage),e.xp6(),e.Q6J("loading",n.loading)("fileList",n.fileList),e.xp6(),e.Q6J("ngIf",n.showRemoteAdvice()),e.xp6(),e.Q6J("ngIf",n.userStorage&&n.userStorage.exceeded),e.xp6(),e.Q6J("loading",n.loading)("folderList",n.folderList)("currentFolderPath",n.currentFolderPath)("filter",n.currentFilter),e.xp6(),e.Q6J("loading",n.loading)("fileList",n.fileList)("filter",n.currentFilter),e.xp6(),e.Q6J("entities",n.currentActionEntities),e.xp6(2),e.Q6J("currentFolderPath",n.currentFolderPath)("entity",n.currentActionEntities[0])("reservedNames",n.currentActionReservedNames),e.xp6(2),e.Q6J("entities",n.currentActionEntities)("currentFolderPath",n.currentFolderPath),e.xp6(2),e.Q6J("entities",n.currentActionEntities)("currentFolderPath",n.currentFolderPath),e.xp6(2),e.Q6J("entity",n.currentActionEntities[0]))},dependencies:[zo.L,f.O5,ei,ni,si,Vs.B,sa,za,qa.P,An,dt,S,tl,rl,Co,Zl,Lo,Il],styles:["app-upload-recent-files[_ngcontent-%COMP%]{display:none}app-upload-endpoints[_ngcontent-%COMP%]{margin:0 1rem}.upload-header[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem;margin-bottom:1rem}@media (min-width: 500px){.upload-header[_ngcontent-%COMP%]{margin-bottom:1.5rem}}@media (min-width: 768px){app-upload-endpoints[_ngcontent-%COMP%]{margin:0}.upload-header[_ngcontent-%COMP%]{margin-bottom:2rem}}@media (min-width: 960px){app-upload-recent-files[_ngcontent-%COMP%]{display:block;flex-grow:1}.upload-header[_ngcontent-%COMP%]{gap:1.5rem}}@media (min-width: 1100px) and (max-width: 1499.98px){.upload-header[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.upload-header[_ngcontent-%COMP%]   app-uploader[_ngcontent-%COMP%]{grid-column:span 2}}@media (min-width: 1500px){.upload-header[_ngcontent-%COMP%]{grid-template-columns:calc(38% - 1rem) calc(28% - 1rem) calc(34% - 1rem)}.upload-header[_ngcontent-%COMP%]   app-uploader[_ngcontent-%COMP%]{grid-column:initial;min-height:250px}}"]}),s})();var Jl=g(529),Ql=g(3746),Bl=g(6355),Vl=g(1679);let qi=(()=>{var o;class s{}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[f.ez]}),s})();var Gn=g(7271);Gn.defaults.touchAction="",Gn.defaults.cssProps.userSelect="",D.b1&&(Gn.defaults.cssProps.userSelect="none");let Gl=(()=>{var o;class s{}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[Ql.P,Bl.E,f.ez,hr,ee.C,Ii.mZ,y.XC,he.Cl,Vl.Y,zt.forChild(),qi]}),s})(),Yl=(()=>{var o;class s{}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[ce.b,f.ez,w.u5,Y.q,J.z,y.XC]}),s})();var Wl=g(469),Kl=g(5063);const $l=[{path:"",component:Hl}];let jl=(()=>{var o;class s{constructor(t){this.timeagoIntl=t,this.timeagoIntl.strings=W,this.timeagoIntl.changes.next()}}return(o=s).\u0275fac=function(t){return new(t||o)(e.LFG(Be))},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[ce.b,T.r,A.w,xe.Iq,f.ez,ee.C,w.u5,de,Gt,q.O,Y.q,ei,J.z,y._A,y.lQ,y.XC,U.Bz.forChild($l),zt.forRoot({intl:{provide:Be},formatter:{provide:Ie,useClass:dn},clock:{provide:ue,useClass:V}}),ni,si,Jl.M,Gl,qi,Yl,Kl.g,Wl.n]}),s})()},8418:(it,Ce,g)=>{"use strict";g.d(Ce,{K:()=>ee});var ce=g(5861),T=g(1410),A=g(1745),f=g(9212);let ee=(()=>{var w;class e extends A.KD{constructor(q,Y,J){super(q,J),this.graphqlService=q,this.globalsService=Y,this.requestsService=J,this.searchByNameCache={}}searchUserByName(q,Y){var J=this;return(0,ce.Z)(function*(){var y;Y||(Y=(0,A.vV)((null===(y=J.globalsService.credentials)||void 0===y?void 0:y.site.domain)||A.ig.FORUMFREE));const U="".concat(Y).concat(q);if((0,A.o8)(J.searchByNameCache,U))return J.searchByNameCache[U];const W=yield J.graphqlService.query({query:"\nquery UserSearchByName($name: String!, $cid: String) {\n    userSearchByName(name: $name, cid: $cid) {\n        uid\n        nickname\n        avatar\n    }\n}",variables:{name:q,cid:Y}});return J.searchByNameCache[U]=W.data.userSearchByName})()}}return(w=e).\u0275fac=function(q){return new(q||w)(f.LFG(A.Jk),f.LFG(T.d),f.LFG(A.r8))},w.\u0275prov=f.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),e})()},7271:(it,Ce,g)=>{var ce;!function(T,A,xe,f){"use strict";var I,ee=["","webkit","Moz","MS","ms","o"],w=A.createElement("div"),e="function",de=Math.round,q=Math.abs,Y=Date.now;function J(l,d,p){return setTimeout(Ze(l,p),d)}function y(l,d,p){return!!Array.isArray(l)&&(U(l,p[d],p),!0)}function U(l,d,p){var m;if(l)if(l.forEach)l.forEach(d,p);else if(l.length!==f)for(m=0;m<l.length;)d.call(p,l[m],m,l),m++;else for(m in l)l.hasOwnProperty(m)&&d.call(p,l[m],m,l)}function W(l,d,p){var m="DEPRECATED METHOD: "+d+"\n"+p+" AT \n";return function(){var h=new Error("get-stack-trace"),x=h&&h.stack?h.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",S=T.console&&(T.console.warn||T.console.log);return S&&S.call(T.console,m,x),l.apply(this,arguments)}}I="function"!=typeof Object.assign?function(d){if(d===f||null===d)throw new TypeError("Cannot convert undefined or null to object");for(var p=Object(d),m=1;m<arguments.length;m++){var h=arguments[m];if(h!==f&&null!==h)for(var x in h)h.hasOwnProperty(x)&&(p[x]=h[x])}return p}:Object.assign;var Q=W(function(d,p,m){for(var h=Object.keys(p),x=0;x<h.length;)(!m||m&&d[h[x]]===f)&&(d[h[x]]=p[h[x]]),x++;return d},"extend","Use `assign`."),te=W(function(d,p){return Q(d,p,!0)},"merge","Use `assign`.");function B(l,d,p){var h,m=d.prototype;(h=l.prototype=Object.create(m)).constructor=l,h._super=m,p&&I(h,p)}function Ze(l,d){return function(){return l.apply(d,arguments)}}function Oe(l,d){return typeof l==e?l.apply(d&&d[0]||f,d):l}function Ee(l,d){return l===f?d:l}function O(l,d,p){U(ot(d),function(m){l.addEventListener(m,p,!1)})}function Te(l,d,p){U(ot(d),function(m){l.removeEventListener(m,p,!1)})}function Dt(l,d){for(;l;){if(l==d)return!0;l=l.parentNode}return!1}function Se(l,d){return l.indexOf(d)>-1}function ot(l){return l.trim().split(/\s+/g)}function pe(l,d,p){if(l.indexOf&&!p)return l.indexOf(d);for(var m=0;m<l.length;){if(p&&l[m][p]==d||!p&&l[m]===d)return m;m++}return-1}function Ae(l){return Array.prototype.slice.call(l,0)}function Pe(l,d,p){for(var m=[],h=[],x=0;x<l.length;){var S=d?l[x][d]:l[x];pe(h,S)<0&&m.push(l[x]),h[x]=S,x++}return p&&(m=d?m.sort(function(H,G){return H[d]>G[d]}):m.sort()),m}function Qe(l,d){for(var p,m,h=d[0].toUpperCase()+d.slice(1),x=0;x<ee.length;){if((m=(p=ee[x])?p+h:d)in l)return m;x++}return f}var Ft=1;function Be(l){var d=l.ownerDocument||l;return d.defaultView||d.parentWindow||T}var Ie="ontouchstart"in T,Rt=Qe(T,"PointerEvent")!==f,dn=Ie&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),ue="touch",st="mouse",zt=25,V=1,b=4,v=8,F=1,Re=2,Ve=4,ne=8,Ge=16,L=Re|Ve,ie=ne|Ge,qt=L|ie,Ne=["x","y"],be=["clientX","clientY"];function oe(l,d){var p=this;this.manager=l,this.callback=d,this.element=l.element,this.target=l.options.inputTarget,this.domHandler=function(m){Oe(l.options.enable,[l])&&p.handler(m)},this.init()}function un(l,d,p){var m=p.pointers.length,h=p.changedPointers.length,x=d&V&&m-h==0,S=d&(b|v)&&m-h==0;p.isFirst=!!x,p.isFinal=!!S,x&&(l.session={}),p.eventType=d,function mn(l,d){var p=l.session,m=d.pointers,h=m.length;p.firstInput||(p.firstInput=Ye(d)),h>1&&!p.firstMultiple?p.firstMultiple=Ye(d):1===h&&(p.firstMultiple=!1);var x=p.firstInput,S=p.firstMultiple,N=S?S.center:x.center,H=d.center=Ht(m);d.timeStamp=Y(),d.deltaTime=d.timeStamp-x.timeStamp,d.angle=ht(N,H),d.distance=Ke(N,H),function gn(l,d){var p=d.center,m=l.offsetDelta||{},h=l.prevDelta||{},x=l.prevInput||{};(d.eventType===V||x.eventType===b)&&(h=l.prevDelta={x:x.deltaX||0,y:x.deltaY||0},m=l.offsetDelta={x:p.x,y:p.y}),d.deltaX=h.x+(p.x-m.x),d.deltaY=h.y+(p.y-m.y)}(p,d),d.offsetDirection=Jt(d.deltaX,d.deltaY);var G=We(d.deltaTime,d.deltaX,d.deltaY);d.overallVelocityX=G.x,d.overallVelocityY=G.y,d.overallVelocity=q(G.x)>q(G.y)?G.x:G.y,d.scale=S?function at(l,d){return Ke(d[0],d[1],be)/Ke(l[0],l[1],be)}(S.pointers,m):1,d.rotation=S?function rt(l,d){return ht(d[1],d[0],be)+ht(l[1],l[0],be)}(S.pointers,m):0,d.maxPointers=p.prevInput?d.pointers.length>p.prevInput.maxPointers?d.pointers.length:p.prevInput.maxPointers:d.pointers.length,function _n(l,d){var h,x,S,N,p=l.lastInterval||d,m=d.timeStamp-p.timeStamp;if(d.eventType!=v&&(m>zt||p.velocity===f)){var H=d.deltaX-p.deltaX,G=d.deltaY-p.deltaY,_e=We(m,H,G);x=_e.x,S=_e.y,h=q(_e.x)>q(_e.y)?_e.x:_e.y,N=Jt(H,G),l.lastInterval=d}else h=p.velocity,x=p.velocityX,S=p.velocityY,N=p.direction;d.velocity=h,d.velocityX=x,d.velocityY=S,d.direction=N}(p,d);var _e=l.element;Dt(d.srcEvent.target,_e)&&(_e=d.srcEvent.target),d.target=_e}(l,p),l.emit("hammer.input",p),l.recognize(p),l.session.prevInput=p}function Ye(l){for(var d=[],p=0;p<l.pointers.length;)d[p]={clientX:de(l.pointers[p].clientX),clientY:de(l.pointers[p].clientY)},p++;return{timeStamp:Y(),pointers:d,center:Ht(d),deltaX:l.deltaX,deltaY:l.deltaY}}function Ht(l){var d=l.length;if(1===d)return{x:de(l[0].clientX),y:de(l[0].clientY)};for(var p=0,m=0,h=0;h<d;)p+=l[h].clientX,m+=l[h].clientY,h++;return{x:de(p/d),y:de(m/d)}}function We(l,d,p){return{x:d/l||0,y:p/l||0}}function Jt(l,d){return l===d?F:q(l)>=q(d)?l<0?Re:Ve:d<0?ne:Ge}function Ke(l,d,p){p||(p=Ne);var m=d[p[0]]-l[p[0]],h=d[p[1]]-l[p[1]];return Math.sqrt(m*m+h*h)}function ht(l,d,p){return p||(p=Ne),180*Math.atan2(d[p[1]]-l[p[1]],d[p[0]]-l[p[0]])/Math.PI}oe.prototype={handler:function(){},init:function(){this.evEl&&O(this.element,this.evEl,this.domHandler),this.evTarget&&O(this.target,this.evTarget,this.domHandler),this.evWin&&O(Be(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&Te(this.element,this.evEl,this.domHandler),this.evTarget&&Te(this.target,this.evTarget,this.domHandler),this.evWin&&Te(Be(this.element),this.evWin,this.domHandler)}};var hn={mousedown:V,mousemove:2,mouseup:b},j="mousedown",fn="mousemove mouseup";function $e(){this.evEl=j,this.evWin=fn,this.pressed=!1,oe.apply(this,arguments)}B($e,oe,{handler:function(d){var p=hn[d.type];p&V&&0===d.button&&(this.pressed=!0),2&p&&1!==d.which&&(p=b),this.pressed&&(p&b&&(this.pressed=!1),this.callback(this.manager,p,{pointers:[d],changedPointers:[d],pointerType:st,srcEvent:d}))}});var vn={pointerdown:V,pointermove:2,pointerup:b,pointercancel:v,pointerout:v},Cn={2:ue,3:"pen",4:st,5:"kinect"},Qt="pointerdown",Bt="pointermove pointerup pointercancel";function ft(){this.evEl=Qt,this.evWin=Bt,oe.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}T.MSPointerEvent&&!T.PointerEvent&&(Qt="MSPointerDown",Bt="MSPointerMove MSPointerUp MSPointerCancel"),B(ft,oe,{handler:function(d){var p=this.store,m=!1,h=d.type.toLowerCase().replace("ms",""),x=vn[h],S=Cn[d.pointerType]||d.pointerType,N=S==ue,H=pe(p,d.pointerId,"pointerId");x&V&&(0===d.button||N)?H<0&&(p.push(d),H=p.length-1):x&(b|v)&&(m=!0),!(H<0)&&(p[H]=d,this.callback(this.manager,x,{pointers:p,changedPointers:[d],pointerType:S,srcEvent:d}),m&&p.splice(H,1))}});var xn={touchstart:V,touchmove:2,touchend:b,touchcancel:v};function Vt(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,oe.apply(this,arguments)}function Gt(l,d){var p=Ae(l.touches),m=Ae(l.changedTouches);return d&(b|v)&&(p=Pe(p.concat(m),"identifier",!0)),[p,m]}B(Vt,oe,{handler:function(d){var p=xn[d.type];if(p===V&&(this.started=!0),this.started){var m=Gt.call(this,d,p);p&(b|v)&&m[0].length-m[1].length==0&&(this.started=!1),this.callback(this.manager,p,{pointers:m[0],changedPointers:m[1],pointerType:ue,srcEvent:d})}}});var jn={touchstart:V,touchmove:2,touchend:b,touchcancel:v},vt="touchstart touchmove touchend touchcancel";function se(){this.evTarget=vt,this.targetIds={},oe.apply(this,arguments)}function ze(l,d){var p=Ae(l.touches),m=this.targetIds;if(d&(2|V)&&1===p.length)return m[p[0].identifier]=!0,[p,p];var h,x,S=Ae(l.changedTouches),N=[],H=this.target;if(x=p.filter(function(G){return Dt(G.target,H)}),d===V)for(h=0;h<x.length;)m[x[h].identifier]=!0,h++;for(h=0;h<S.length;)m[S[h].identifier]&&N.push(S[h]),d&(b|v)&&delete m[S[h].identifier],h++;return N.length?[Pe(x.concat(N),"identifier",!0),N]:void 0}B(se,oe,{handler:function(d){var p=jn[d.type],m=ze.call(this,d,p);m&&this.callback(this.manager,p,{pointers:m[0],changedPointers:m[1],pointerType:ue,srcEvent:d})}});var qe=2500;function Ct(){oe.apply(this,arguments);var l=Ze(this.handler,this);this.touch=new se(this.manager,l),this.mouse=new $e(this.manager,l),this.primaryTouch=null,this.lastTouches=[]}function yn(l,d){l&V?(this.primaryTouch=d.changedPointers[0].identifier,Wt.call(this,d)):l&(b|v)&&Wt.call(this,d)}function Wt(l){var d=l.changedPointers[0];if(d.identifier===this.primaryTouch){var p={x:d.clientX,y:d.clientY};this.lastTouches.push(p);var m=this.lastTouches;setTimeout(function(){var x=m.indexOf(p);x>-1&&m.splice(x,1)},qe)}}function Mn(l){for(var d=l.srcEvent.clientX,p=l.srcEvent.clientY,m=0;m<this.lastTouches.length;m++){var h=this.lastTouches[m],x=Math.abs(d-h.x),S=Math.abs(p-h.y);if(x<=25&&S<=25)return!0}return!1}B(Ct,oe,{handler:function(d,p,m){var x=m.pointerType==st;if(!(x&&m.sourceCapabilities&&m.sourceCapabilities.firesTouchEvents)){if(m.pointerType==ue)yn.call(this,p,m);else if(x&&Mn.call(this,m))return;this.callback(d,p,m)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var re=Qe(w.style,"touchAction"),Kt=re!==f,$t="compute",Tt="manipulation",De="none",je="pan-x",Xe="pan-y",lt=function An(){if(!Kt)return!1;var l={},d=T.CSS&&T.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(p){l[p]=!d||T.CSS.supports("touch-action",p)}),l}();function bt(l,d){this.manager=l,this.set(d)}bt.prototype={set:function(l){l==$t&&(l=this.compute()),Kt&&this.manager.element.style&&lt[l]&&(this.manager.element.style[re]=l),this.actions=l.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var l=[];return U(this.manager.recognizers,function(d){Oe(d.options.enable,[d])&&(l=l.concat(d.getTouchAction()))}),function En(l){if(Se(l,De))return De;var d=Se(l,je),p=Se(l,Xe);return d&&p?De:d||p?d?je:Xe:Se(l,Tt)?Tt:"auto"}(l.join(" "))},preventDefaults:function(l){var d=l.srcEvent,p=l.offsetDirection;if(!this.manager.session.prevented){var m=this.actions,h=Se(m,De)&&!lt[De],x=Se(m,Xe)&&!lt[Xe],S=Se(m,je)&&!lt[je];if(h&&1===l.pointers.length&&l.distance<2&&l.deltaTime<250)return;return S&&x||!(h||x&&p&L||S&&p&ie)?void 0:this.preventSrc(d)}d.preventDefault()},preventSrc:function(l){this.manager.session.prevented=!0,l.preventDefault()}};var me=1;function Me(l){this.options=I({},this.defaults,l||{}),this.id=function Lt(){return Ft++}(),this.manager=null,this.options.enable=Ee(this.options.enable,!0),this.state=me,this.simultaneous={},this.requireFail=[]}function jt(l){return 16&l?"cancel":8&l?"end":4&l?"move":2&l?"start":""}function Xt(l){return l==Ge?"down":l==ne?"up":l==Re?"left":l==Ve?"right":""}function ct(l,d){var p=d.manager;return p?p.get(l):l}function le(){Me.apply(this,arguments)}function dt(){le.apply(this,arguments),this.pX=null,this.pY=null}function D(){le.apply(this,arguments)}function yt(){Me.apply(this,arguments),this._timer=null,this._input=null}function pt(){le.apply(this,arguments)}function Mt(){le.apply(this,arguments)}function ut(){Me.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Fe(l,d){return(d=d||{}).recognizers=Ee(d.recognizers,Fe.defaults.preset),new At(l,d)}function At(l,d){this.options=I({},Fe.defaults,d||{}),this.options.inputTarget=this.options.inputTarget||l,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=l,this.input=function pn(l){return new(l.options.inputClass||(Rt?ft:dn?se:Ie?Ct:$e))(l,un)}(this),this.touchAction=new bt(this,this.options.touchAction),en(this,!0),U(this.options.recognizers,function(p){var m=this.add(new p[0](p[1]));p[2]&&m.recognizeWith(p[2]),p[3]&&m.requireFailure(p[3])},this)}function en(l,d){var m,p=l.element;p.style&&(U(l.options.cssProps,function(h,x){m=Qe(p.style,x),d?(l.oldCssProps[m]=p.style[m],p.style[m]=h):p.style[m]=l.oldCssProps[m]||""}),d||(l.oldCssProps={}))}Me.prototype={defaults:{},set:function(l){return I(this.options,l),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(l){if(y(l,"recognizeWith",this))return this;var d=this.simultaneous;return d[(l=ct(l,this)).id]||(d[l.id]=l,l.recognizeWith(this)),this},dropRecognizeWith:function(l){return y(l,"dropRecognizeWith",this)||(l=ct(l,this),delete this.simultaneous[l.id]),this},requireFailure:function(l){if(y(l,"requireFailure",this))return this;var d=this.requireFail;return-1===pe(d,l=ct(l,this))&&(d.push(l),l.requireFailure(this)),this},dropRequireFailure:function(l){if(y(l,"dropRequireFailure",this))return this;l=ct(l,this);var d=pe(this.requireFail,l);return d>-1&&this.requireFail.splice(d,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(l){return!!this.simultaneous[l.id]},emit:function(l){var d=this,p=this.state;function m(h){d.manager.emit(h,l)}p<8&&m(d.options.event+jt(p)),m(d.options.event),l.additionalEvent&&m(l.additionalEvent),p>=8&&m(d.options.event+jt(p))},tryEmit:function(l){if(this.canEmit())return this.emit(l);this.state=32},canEmit:function(){for(var l=0;l<this.requireFail.length;){if(!(this.requireFail[l].state&(32|me)))return!1;l++}return!0},recognize:function(l){var d=I({},l);if(!Oe(this.options.enable,[this,d]))return this.reset(),void(this.state=32);56&this.state&&(this.state=me),this.state=this.process(d),30&this.state&&this.tryEmit(d)},process:function(l){},getTouchAction:function(){},reset:function(){}},B(le,Me,{defaults:{pointers:1},attrTest:function(l){var d=this.options.pointers;return 0===d||l.pointers.length===d},process:function(l){var d=this.state,p=l.eventType,m=6&d,h=this.attrTest(l);return m&&(p&v||!h)?16|d:m||h?p&b?8|d:2&d?4|d:2:32}}),B(dt,le,{defaults:{event:"pan",threshold:10,pointers:1,direction:qt},getTouchAction:function(){var l=this.options.direction,d=[];return l&L&&d.push(Xe),l&ie&&d.push(je),d},directionTest:function(l){var d=this.options,p=!0,m=l.distance,h=l.direction,x=l.deltaX,S=l.deltaY;return h&d.direction||(d.direction&L?(h=0===x?F:x<0?Re:Ve,p=x!=this.pX,m=Math.abs(l.deltaX)):(h=0===S?F:S<0?ne:Ge,p=S!=this.pY,m=Math.abs(l.deltaY))),l.direction=h,p&&m>d.threshold&&h&d.direction},attrTest:function(l){return le.prototype.attrTest.call(this,l)&&(2&this.state||!(2&this.state)&&this.directionTest(l))},emit:function(l){this.pX=l.deltaX,this.pY=l.deltaY;var d=Xt(l.direction);d&&(l.additionalEvent=this.options.event+d),this._super.emit.call(this,l)}}),B(D,le,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[De]},attrTest:function(l){return this._super.attrTest.call(this,l)&&(Math.abs(l.scale-1)>this.options.threshold||2&this.state)},emit:function(l){1!==l.scale&&(l.additionalEvent=this.options.event+(l.scale<1?"in":"out")),this._super.emit.call(this,l)}}),B(yt,Me,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(l){var d=this.options,p=l.pointers.length===d.pointers,m=l.distance<d.threshold,h=l.deltaTime>d.time;if(this._input=l,!m||!p||l.eventType&(b|v)&&!h)this.reset();else if(l.eventType&V)this.reset(),this._timer=J(function(){this.state=8,this.tryEmit()},d.time,this);else if(l.eventType&b)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(l){8===this.state&&(l&&l.eventType&b?this.manager.emit(this.options.event+"up",l):(this._input.timeStamp=Y(),this.manager.emit(this.options.event,this._input)))}}),B(pt,le,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[De]},attrTest:function(l){return this._super.attrTest.call(this,l)&&(Math.abs(l.rotation)>this.options.threshold||2&this.state)}}),B(Mt,le,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:L|ie,pointers:1},getTouchAction:function(){return dt.prototype.getTouchAction.call(this)},attrTest:function(l){var p,d=this.options.direction;return d&(L|ie)?p=l.overallVelocity:d&L?p=l.overallVelocityX:d&ie&&(p=l.overallVelocityY),this._super.attrTest.call(this,l)&&d&l.offsetDirection&&l.distance>this.options.threshold&&l.maxPointers==this.options.pointers&&q(p)>this.options.velocity&&l.eventType&b},emit:function(l){var d=Xt(l.offsetDirection);d&&this.manager.emit(this.options.event+d,l),this.manager.emit(this.options.event,l)}}),B(ut,Me,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Tt]},process:function(l){var d=this.options,p=l.pointers.length===d.pointers,m=l.distance<d.threshold,h=l.deltaTime<d.time;if(this.reset(),l.eventType&V&&0===this.count)return this.failTimeout();if(m&&h&&p){if(l.eventType!=b)return this.failTimeout();var x=!this.pTime||l.timeStamp-this.pTime<d.interval,S=!this.pCenter||Ke(this.pCenter,l.center)<d.posThreshold;if(this.pTime=l.timeStamp,this.pCenter=l.center,S&&x?this.count+=1:this.count=1,this._input=l,0==this.count%d.taps)return this.hasRequireFailures()?(this._timer=J(function(){this.state=8,this.tryEmit()},d.interval,this),2):8}return 32},failTimeout:function(){return this._timer=J(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Fe.VERSION="2.0.7",Fe.defaults={domEvents:!1,touchAction:$t,enable:!0,inputTarget:null,inputClass:null,preset:[[pt,{enable:!1}],[D,{enable:!1},["rotate"]],[Mt,{direction:L}],[dt,{direction:L},["swipe"]],[ut],[ut,{event:"doubletap",taps:2},["tap"]],[yt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},At.prototype={set:function(l){return I(this.options,l),l.touchAction&&this.touchAction.update(),l.inputTarget&&(this.input.destroy(),this.input.target=l.inputTarget,this.input.init()),this},stop:function(l){this.session.stopped=l?2:1},recognize:function(l){var d=this.session;if(!d.stopped){this.touchAction.preventDefaults(l);var p,m=this.recognizers,h=d.curRecognizer;(!h||h&&8&h.state)&&(h=d.curRecognizer=null);for(var x=0;x<m.length;)p=m[x],2===d.stopped||h&&p!=h&&!p.canRecognizeWith(h)?p.reset():p.recognize(l),!h&&14&p.state&&(h=d.curRecognizer=p),x++}},get:function(l){if(l instanceof Me)return l;for(var d=this.recognizers,p=0;p<d.length;p++)if(d[p].options.event==l)return d[p];return null},add:function(l){if(y(l,"add",this))return this;var d=this.get(l.options.event);return d&&this.remove(d),this.recognizers.push(l),l.manager=this,this.touchAction.update(),l},remove:function(l){if(y(l,"remove",this))return this;if(l=this.get(l)){var d=this.recognizers,p=pe(d,l);-1!==p&&(d.splice(p,1),this.touchAction.update())}return this},on:function(l,d){if(l!==f&&d!==f){var p=this.handlers;return U(ot(l),function(m){p[m]=p[m]||[],p[m].push(d)}),this}},off:function(l,d){if(l!==f){var p=this.handlers;return U(ot(l),function(m){d?p[m]&&p[m].splice(pe(p[m],d),1):delete p[m]}),this}},emit:function(l,d){this.options.domEvents&&function Un(l,d){var p=A.createEvent("Event");p.initEvent(l,!0,!0),p.gesture=d,d.target.dispatchEvent(p)}(l,d);var p=this.handlers[l]&&this.handlers[l].slice();if(p&&p.length){d.type=l,d.preventDefault=function(){d.srcEvent.preventDefault()};for(var m=0;m<p.length;)p[m](d),m++}},destroy:function(){this.element&&en(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},I(Fe,{INPUT_START:V,INPUT_MOVE:2,INPUT_END:b,INPUT_CANCEL:v,STATE_POSSIBLE:me,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:F,DIRECTION_LEFT:Re,DIRECTION_RIGHT:Ve,DIRECTION_UP:ne,DIRECTION_DOWN:Ge,DIRECTION_HORIZONTAL:L,DIRECTION_VERTICAL:ie,DIRECTION_ALL:qt,Manager:At,Input:oe,TouchAction:bt,TouchInput:se,MouseInput:$e,PointerEventInput:ft,TouchMouseInput:Ct,SingleTouchInput:Vt,Recognizer:Me,AttrRecognizer:le,Tap:ut,Pan:dt,Swipe:Mt,Pinch:D,Rotate:pt,Press:yt,on:O,off:Te,each:U,merge:te,extend:Q,assign:I,inherit:B,bindFn:Ze,prefixed:Qe}),(typeof T<"u"?T:typeof self<"u"?self:{}).Hammer=Fe,(ce=function(){return Fe}.call(Ce,g,Ce,it))!==f&&(it.exports=ce)}(window,document)}}]);