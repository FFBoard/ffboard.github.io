"use strict";(self.webpackChunkpages=self.webpackChunkpages||[]).push([[306],{1306:(D,U,l)=>{l.r(U),l.d(U,{ScriptDevSettingsModule:()=>Ke});var x=l(9090),d=l(6814),Z=l(6687),y=l(1568),T=l(4610),e=l(5879);let z=(()=>{var t;class r{}return(t=r).\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[d.ez,T.z]}),r})();var A=l(6223),M=l(4853),F=l(7905),_=l(8726),p=l(2655),u=l(5861),f=l(1378),v=l(8413),b=l(6245),g=l(3729),C=l(5661),k=l(7165),R=l(3285),w=l(9473),j=l(1274),h=l(1413),S=l(4601),q=l(9960),H=l(4064),V=l(4004);function N(t,r=!1){let o;try{o=new URL(t)}catch(i){return!1}return!r&&"http:"===o.protocol||"https:"===o.protocol}function K(t){return t&&t.forums.length+t.users.length!==0?"WHITELIST["+[...t.forums,...t.users.map(o=>o.substring(0,2)+"u"+o.substring(2))].join(",").toUpperCase()+"]":""}var ee=l(8372),E=function(t){return t[t.GENERIC=0]="GENERIC",t[t.BASE=1]="BASE",t[t.OPTIONS=2]="OPTIONS",t[t.ADVANCED=3]="ADVANCED",t}(E||{});const J={array:[],boolean:!1,checkbox:!1,"forum-groups":[],"forum-sections":[],"forum-users":[],"forum-list":[],integer:0,number:0};let te=(()=>{var t;class r{constructor(){}createModel(i){let n={};for(const s of i)if("string"==typeof s.key){if(void 0!==s.defaultValue){n[s.key]=s.defaultValue;continue}if("enum"===s.type){var a;n[s.key]=null!==(a=s.props)&&void 0!==a&&a.options&&Array.isArray(s.props.options)?s.props.options[0].value:"";continue}if("object"===s.type){n[s.key]=this.createModel(s.fieldGroup||[]);continue}n[s.key]=this.createDefaultValue("string"==typeof s.type?s.type:"string")}return n}createDefaultValue(i){return J.hasOwnProperty(i)?J[i]:""}}return(t=r).\u0275fac=function(i){return new(i||t)},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),r})();var ie=l(336);let oe=(()=>{var t;class r{constructor(i,n){this.customFormModelService=i,this.formlyJsonschema=n}createDefaultSettings(i){const n=this.formlyJsonschema.toFieldConfig(i);return this.customFormModelService.createModel(n.fieldGroup||[])}}return(t=r).\u0275fac=function(i){return new(i||t)(e.LFG(te),e.LFG(ie.c))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),r})();var L=l(7429),I=l(4464);const ne=["modal"];let re=(()=>{var t;class r{constructor(i){this.toastService=i,this.modalTitle="",this.exportEvent=new e.vpe,this.importEvent=new e.vpe}open(){this.modalRef.open()}close(){this.modalRef.close()}export(){this.exportEvent.emit(),this.close()}handleSelectionEvent(i){const n=i.target;if(n.files&&n.files.length){const a=new FileReader;a.onload=s=>{var c;this.parseInputFile(null===(c=s.target)||void 0===c?void 0:c.result)},a.readAsText(n.files[0]),n.value=""}this.close()}parseInputFile(i){try{const n=JSON.parse(i);this.importEvent.emit(n)}catch(n){this.toastService.show({content:"Errore nella decodifica del file!",level:f.m.ERROR})}}}return(t=r).\u0275fac=function(i){return new(i||t)(e.Y36(C.k))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-form-exporter"]],viewQuery:function(i,n){if(1&i&&e.Gf(ne,5),2&i){let a;e.iGM(a=e.CRH())&&(n.modalRef=a.first)}},inputs:{modalTitle:"modalTitle"},outputs:{exportEvent:"exportEvent",importEvent:"importEvent"},decls:35,vars:2,consts:[["size","md",3,"title","disableCloseButton"],["modal",""],[1,"mb-3"],[1,"flat-inline-code"],[1,"mb-0"],["footer",""],["type","button",1,"btn","btn-indigo","me-2",3,"click"],["type","file",1,"d-none",3,"change"],["fileInput",""],["type","button",1,"btn","btn-primary","me-2",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(i,n){if(1&i){const a=e.EpF();e.TgZ(0,"app-modal",0,1),e.ynx(2),e.TgZ(3,"p",2),e._uU(4," Tramite questa funzione \xe8 possibile esportare il contenuto del form visualizzato nella pagina corrente in formato "),e.TgZ(5,"code",3),e._uU(6,"JSON"),e.qZA(),e._uU(7," in modo da poterlo salvare ed eventualmente importare in un secondo momento. Si consiglia di evitare di utilizzare questa azione come backup a lungo termine, in quanto eventuali modifiche strutturali al form renderebbero inefficace il file esportato. I backup vengono gi\xe0 automaticamente effettuati senza richiedere l'intervento dell'utente. "),e.qZA(),e.TgZ(8,"p"),e._uU(9," Le opzioni presenti sono: "),e.qZA(),e.TgZ(10,"ul",4)(11,"li")(12,"em"),e._uU(13,"Importa:"),e.qZA(),e._uU(14," questo pulsante consente di importare un file precedentemente esportato. Caricando il file, i "),e.TgZ(15,"strong"),e._uU(16,"campi presenti saranno sovrascritti"),e.qZA(),e._uU(17,";"),e.qZA(),e.TgZ(18,"li")(19,"em"),e._uU(20,"Esporta:"),e.qZA(),e._uU(21," tramite questo pulsante \xe8 possibile salvare in locale una copia del form su cui si sta operando;"),e.qZA(),e.TgZ(22,"li")(23,"em"),e._uU(24,"Chiudi:"),e.qZA(),e._uU(25," il pulsante chiude il modal senza effettuare alcuna operazione."),e.qZA()(),e.BQk(),e.ynx(26,5),e.TgZ(27,"button",6),e.NdJ("click",function(){e.CHM(a);const c=e.MAs(29);return e.KtG(c.click())}),e.TgZ(28,"input",7,8),e.NdJ("change",function(c){return n.handleSelectionEvent(c)}),e.qZA(),e._uU(30," Importa "),e.qZA(),e.TgZ(31,"button",9),e.NdJ("click",function(){return n.export()}),e._uU(32," Esporta "),e.qZA(),e.TgZ(33,"button",10),e.NdJ("click",function(){e.CHM(a);const c=e.MAs(1);return e.KtG(c.close("Close click"))}),e._uU(34," Chiudi "),e.qZA(),e.BQk(),e.qZA()}2&i&&e.Q6J("title",n.modalTitle)("disableCloseButton",!0)},dependencies:[I.z]}),r})();var ae=l(8595),Q=l(8940);const se=["modal"];function le(t,r){1&t&&(e.TgZ(0,"div",9),e._uU(1,"Lo schema non ha alcun campo da mostrare!"),e.qZA())}function pe(t,r){if(1&t){const o=e.EpF();e.TgZ(0,"div",10),e.NdJ("validityChangeEvent",function(n){e.CHM(o);const a=e.oxw(2);return e.KtG(a.isFormValid=n)}),e.qZA()}if(2&t){const o=e.oxw(2);e.Q6J("schema",o.formSchema)("validateSchema",!0)("model",o.formModel)}}function ce(t,r){if(1&t&&(e.ynx(0),e.YNc(1,le,2,0,"div",7),e.YNc(2,pe,1,3,"ng-template",null,8,e.W1O),e.BQk()),2&t){const o=e.MAs(3),i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.emptySchema)("ngIfElse",o)}}function ue(t,r){if(1&t&&(e.TgZ(0,"p",11),e._uU(1," Il form compilato genera un oggetto con le seguenti propriet\xe0: "),e.qZA(),e._UZ(2,"app-custom-pre",12),e.TgZ(3,"p"),e._uU(4," L'oggetto sar\xe0 disponibile nel codice dello script nella variabile "),e.TgZ(5,"code",13),e._uU(6,"scriptInfo.settings"),e.qZA(),e._uU(7,". "),e.qZA()),2&t){const o=e.oxw();e.xp6(2),e.Q6J("object",o.formModel)}}let de=(()=>{var t;class r{constructor(){this.formSchemaString="{}",this.formSchema={},this.formModel={},this.emptySchema=!0,this.showResult=!1,this.isFormValid=!0}ngOnInit(){}open(){this.modalComponent.open();try{this.formSchema=JSON.parse(this.formSchemaString)}catch(i){this.formSchema={}}this.emptySchema=0===Object.keys(this.formSchema).length||"object"!==this.formSchema.type||!this.formSchema.hasOwnProperty("properties")}resetVars(){this.formSchema={},this.formModel={},this.isFormValid=!0,this.emptySchema=!0,this.showResult=!1}}return(t=r).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-script-dev-settings-schema-demo"]],viewQuery:function(i,n){if(1&i&&e.Gf(se,5),2&i){let a;e.iGM(a=e.CRH())&&(n.modalComponent=a.first)}},inputs:{formSchemaString:"formSchemaString"},decls:9,vars:5,consts:[["title","Demo JSON schema","size","xl",3,"disableCloseButton","hidden"],["modal",""],[4,"ngIf","ngIfElse"],["formResult",""],["footer",""],["type","button",1,"btn","btn-primary",3,"disabled","innerText","click"],["type","button",1,"btn","btn-secondary",3,"click"],["class","alert alert-primary mb-0",4,"ngIf","ngIfElse"],["demoForm",""],[1,"alert","alert-primary","mb-0"],["app-custom-form","",1,"demo-json-schema",3,"schema","validateSchema","model","validityChangeEvent"],[1,"mb-0"],[3,"object"],[1,"flat-inline-code"]],template:function(i,n){if(1&i){const a=e.EpF();e.TgZ(0,"app-modal",0,1),e.NdJ("hidden",function(){return n.resetVars()}),e.YNc(2,ce,4,2,"ng-container",2),e.YNc(3,ue,8,1,"ng-template",null,3,e.W1O),e.ynx(5,4),e.TgZ(6,"button",5),e.NdJ("click",function(){return n.showResult=!n.emptySchema&&!n.showResult&&n.isFormValid}),e.qZA(),e.TgZ(7,"button",6),e.NdJ("click",function(){e.CHM(a);const c=e.MAs(1);return e.KtG(c.close())}),e._uU(8," Chiudi "),e.qZA(),e.BQk(),e.qZA()}if(2&i){const a=e.MAs(4);e.Q6J("disableCloseButton",!0),e.xp6(2),e.Q6J("ngIf",!n.showResult)("ngIfElse",a),e.xp6(4),e.Q6J("disabled",n.emptySchema||!n.isFormValid)("innerText",n.showResult?"Torna al form":"Compila")}},dependencies:[d.O5,L.d,Q.s,I.z],styles:[".demo-json-schema[_ngcontent-%COMP%]{margin-bottom:-1rem}"]}),r})();const me=["jsonSchemaLabel"];function ge(t,r){if(1&t){const o=e.EpF();e.TgZ(0,"div",17,18),e.NdJ("validityChangeEvent",function(n){e.CHM(o);const a=e.oxw().$implicit,s=e.oxw();return e.KtG(s.changeFormValidity(a,n))}),e.qZA()}if(2&t){const o=e.oxw().$implicit;e.Q6J("schema",o.schema)("model",o.model)("showFieldValidationOnInit",!0)}}function fe(t,r){if(1&t&&(e.TgZ(0,"div",12)(1,"h2",13),e._UZ(2,"button",14),e.qZA(),e.TgZ(3,"div",15)(4,"div",16),e.YNc(5,ge,2,3,"ng-template"),e.qZA()()()),2&t){const o=r.$implicit;e.xp6(2),e.Q6J("innerText",o.title)}}function _e(t,r){1&t&&(e.TgZ(0,"span",25),e._uU(1,"*"),e.qZA())}function ve(t,r){if(1&t&&(e.TgZ(0,"label",23),e._uU(1),e.YNc(2,_e,2,0,"span",24),e.qZA()),2&t){const o=e.oxw(),n=o.props;e.s9C("for",o.$implicit),e.xp6(1),e.hij(" ",n.label," "),e.xp6(1),e.Q6J("ngIf",n.required&&!0!==n.hideRequiredMarker)}}const he=function(){return{placement:"left"}};function Ze(t,r){if(1&t){const o=e.EpF();e.TgZ(0,"div",19),e.YNc(1,ve,3,3,"label",20),e.TgZ(2,"div",21),e.NdJ("click",function(){e.CHM(o),e.oxw();const n=e.MAs(12);return e.KtG(n.open())}),e.TgZ(3,"span",22),e._uU(4,"play_circle"),e.qZA()()()}if(2&t){const o=r.props;e.xp6(1),e.Q6J("ngIf",o.label&&!0!==o.hideLabel),e.xp6(1),e.Q6J("tippyProps",e.DdM(3,he))("disableOnTouchDevice",!0)}}const be=function(t,r,o,i){return[t,r,o,i]};let Ue=(()=>{var t;class r{constructor(i,n,a,s,c){this.profileService=i,this.changeDetectorRef=n,this.toastService=a,this.scriptDevFormService=s,this.scriptDevService=c,this.scriptList=[],this.tipsEvent=new e.vpe,this.cancelEvent=new e.vpe,this.saveEvent=new e.vpe,this.isNewScript=!1,this.constructAllForms=!1,this.pendingRequest=!1}ngOnInit(){var i;this.isNewScript=!this.script,this.genericInfoForm=(0,h.Z)({title:"Informazioni generali",valid:!this.isNewScript,type:E.GENERIC},function G(t,r=[g.tr.OTHER]){return{model:t?{name:t.name,description:t.description,docsLink:t.docs.link||"",preview:t.preview,type:t.type,publisher:t.publisher.id}:{},schema:{type:"object",required:["name","type","publisher"],properties:{name:{type:"string",title:"Nome:",description:"Scegli un nome facile da ricordare, che distingua lo script da tutti gli altri!"},description:{type:"string",title:"Descrizione:",description:"Una descrizione accattivante incentiva gli utenti ad installare lo script!",default:""},docsLink:{type:"string",title:"Link alla guida:",description:"Una guida completa \xe8 fondamentale per mostrare tutte le potenzialit\xe0 dello script!",default:"",widget:{formlyConfig:{validators:{pattern:{expression:o=>!o.value||/^https:\/\/(.+?)\.(forumfree\.it|forumcommunity\.net|blogfree\.net)\/\?t=(\d+)(#entry(\d+))?$/.test(o.value),message:(o,i)=>{var n;return`"${null===(n=i.formControl)||void 0===n?void 0:n.value}" non \xe8 un valido link alla guida!`}}}}}},preview:{type:"string",title:"Link all'anteprima (jpg, png, gif o webp):",description:"Un'anteprima perfetta riesce a mostrare in pochi secondi il funzionamento dello script!",default:"",widget:{formlyConfig:{validators:{pattern:{expression:o=>!o.value||/^https:\/\/(.+?)\.(jpg|png|gif|webp)$/.test(o.value),message:(o,i)=>{var n;return`"${null===(n=i.formControl)||void 0===n?void 0:n.value}" non \xe8 un valido link all'anteprima!`}}}}}},type:{type:"string",title:"Tipo:",oneOf:[{title:"Script per forum",const:g.AV.FORUM},{title:"Script per utenti (profilo o userscript)",const:g.AV.USER},{title:"Script per entrambi",const:g.AV.ALL}],default:g.AV.FORUM},publisher:{type:"string",title:"Tab:",oneOf:r.map(o=>({title:H.yT[o].name,const:o})),default:r[0]}}}}}(this.script,null===(i=this.profileService.scriptDev)||void 0===i?void 0:i.tabs)),this.baseInfoForm=(0,h.Z)({title:"Funzioni base",valid:!this.isNewScript,type:E.BASE},function B(t){return{model:t?{sources:(0,h.Z)({},t.sources),layouts:(0,h.Z)({},t.layouts),privacy:{hidden:t.privacy.hidden,allowed:{forums:[...t.privacy.allowed.forums],users:[...t.privacy.allowed.users]}}}:{},schema:{type:"object",properties:{sources:{type:"object",title:"File javascript",required:["prod","position"],widget:{formlyConfig:{props:{fieldsetTemplate:!0}}},properties:{prod:{type:"string",title:"Link del file javascript (pubblico):",description:"Si tratta del codice che verr\xe0 caricato per la generalit\xe0 di utenti che useranno lo script.",widget:{formlyConfig:{validators:{pattern:{expression:r=>!r.value||q.Bc.test(r.value),message:(r,o)=>{var i;return`"${null===(i=o.formControl)||void 0===i?void 0:i.value}" non \xe8 un file javascript valido!`}}}}}},beta:{type:["string","null"],title:"Link del file javascript per la versione beta (caricata solo per il dev):",description:"Si tratta del codice che verr\xe0 caricato, in alternativa a quello pubblico, solo per lo sviluppatore.",default:null,widget:{formlyConfig:{validators:{pattern:{expression:r=>!r.value||q.ii.test(r.value),message:(r,o)=>{var i;return`"${null===(i=o.formControl)||void 0===i?void 0:i.value}" non \xe8 un file javascript valido!`}}}}}},position:{type:"string",title:"Posizione in cui verr\xe0 importato il file js:",oneOf:q.Wf,default:q.Wf[7].const}}},layouts:{type:"object",title:"Compatibilit\xe0",description:"Se uno script non \xe8 compatibile con un determinato layout, in automatico [i]non[/i] verr\xe0 eseguito sui forum che possiedono tale layout.",widget:{formlyConfig:{props:{fieldsetTemplate:!0}}},properties:{quirks:{type:"boolean",title:"Compatibile con il layout Quirks",default:!1},standard:{type:"boolean",title:"Compatibile con il layout Standard",default:!0},ffmobile:{type:"boolean",title:"Compatibile con il layout FFMobile",default:!0}}},privacy:{type:"object",title:"Visibilit\xe0",description:"Nascondi lo script dalla lista per tenerlo privato. Se lo desideri, puoi aggiungere una serie di forum e utenti che saranno abilitati a usarlo.",widget:{formlyConfig:{props:{fieldsetTemplate:!0}}},properties:{hidden:{type:"boolean",title:"Script nascosto (test o script privati)",default:!1},allowed:{type:"object",widget:{formlyConfig:{expressions:{hide:r=>{var o;return!(null!==(o=r.parent)&&void 0!==o&&o.model.hidden)}}}},properties:{forums:{type:"forum-list",title:"Forum abilitati",default:[],widget:{formlyConfig:{props:{selectDomain:!0}}}},users:{type:"forum-users",title:"Utenti abilitati",default:[],widget:{formlyConfig:{props:{selectDomain:!0}}}}}}}}}}}}(this.script)),this.optionsForm={title:"Opzioni e codici",valid:!0,type:E.OPTIONS,model:{},schema:{}},this.advancedForm=(0,h.Z)({title:"Avanzate",valid:!0,type:E.ADVANCED},function W(t){return{model:t?{webhook:JSON.parse(JSON.stringify(t.webhook)),sandboxes:JSON.parse(JSON.stringify(t.sandboxes))}:{},schema:{type:"object",properties:{sandboxes:{type:"array",title:"Sandbox legate allo script (opzionali)",description:"Le sandbox posso essere usate per aggiungere contenuti specifici allo script nella pagina delle impostazioni oppure per creare delle vere e proprie pagine personalizzate!",uniqueItems:!0,default:[],items:{type:"object",required:["value","slug"],properties:{name:{type:["string","null"],title:"Nome della sandbox:",default:""},slug:{type:"string",title:"Slug della sandbox:",description:"Lo slug viene usato per generare il link alla sandbox, se non inserita nella pagina delle impostazioni dello script. Pertanto, se verr\xe0 cambiato, [b]cambier\xe0 anche il link![/b]",widget:{formlyConfig:{hooks:{onInit:r=>{const o=r.formControl;null!=o&&o.value||null==o||o.setValue((0,V.Z)())}},validators:{pattern:{expression:r=>!r.value||/^[a-zA-Z0-9\-]+$/.test(r.value),message:(r,o)=>{var i;return`"${null===(i=o.formControl)||void 0===i?void 0:i.value}" non \xe8 uno slug valido!`}}}}}},inSettings:{type:"boolean",title:"Visualizza questa sandbox nella pagina delle impostazioni dello script",default:!1},value:{type:"array",title:"Risorse js-css-html",description:"\xc8 possibile inserire una lista di link a risorse js, css o ad intere pagine html. Se viene specificata una risorsa HTML, il suo contenuto sar\xe0 riportato nella sandbox.",uniqueItems:!0,items:{type:"string",title:"Link alla risorsa:",widget:{formlyConfig:{validators:{pattern:{expression:r=>!r.value||N(r.value),message:(r,o)=>{var i;return`"${null===(i=o.formControl)||void 0===i?void 0:i.value}" non \xe8 un file valido!`}}}}}}}}}},webhook:{type:"object",title:"Impostazioni webhook (opzionali)",description:"Se lo desideri, puoi indicare un url che verr\xe0 chiamato (richiesta [i]POST[/i]) ogni volta che si verifica [i]l'evento abilitato[/i] dai checkbox seguenti (visibili dopo aver specificato il link al webhook), avente come payload le informazioni riguardanti l'evento (ad esempio nel caso di modifica delle impostazioni dello script verranno inviate le impostazioni dello script stesso).",widget:{formlyConfig:{props:{fieldsetTemplate:!0}}},properties:{url:{type:["string","null"],title:"Link al webhook:",default:null,widget:{formlyConfig:{validators:{pattern:{expression:r=>!r.value||N(r.value),message:(r,o)=>{var i;return`"${null===(i=o.formControl)||void 0===i?void 0:i.value}" non \xe8 un link valido!`}}}}}},scriptSettings:{type:"boolean",title:"Chiama il webhook quando vengono salvate le impostazioni",default:!1,widget:{formlyConfig:{expressions:{hide:r=>{var o,i;return!(null!==(o=r.model)&&void 0!==o&&o.url&&null!==(i=r.parent)&&void 0!==i&&null!==(i=i.formControl)&&void 0!==i&&i.valid)}}}}},scriptManage:{type:"boolean",title:"Chiama il webhook quando lo script viene installato o disinstallato",default:!1,widget:{formlyConfig:{expressions:{hide:r=>{var o,i;return!(null!==(o=r.model)&&void 0!==o&&o.url&&null!==(i=r.parent)&&void 0!==i&&null!==(i=i.formControl)&&void 0!==i&&i.valid)}}}}}}}}}}}(this.script))}ngAfterViewInit(){var i;this.optionsForm=(0,h.Z)((0,h.Z)({},this.optionsForm),function $(t,r=[],o=[g.tr.OTHER],i){return{model:t?{packages:[...t.packages],html:t.html,parentDeps:t.dependencies.parents.map(n=>n.id),settingsSchema:(0,S._W)(t.settings.schema||"{}")}:{},schema:{type:"object",required:["settingsSchema"],properties:{packages:{type:"array",uniqueItems:!0,title:"Librerie e framework da importare:",default:[],items:{type:"string",oneOf:q.O9.filter(n=>!n.tab||o.includes(n.tab)).map(n=>({title:n.title,const:n.link}))},widget:{formlyConfig:{props:{resetButton:!0}}}},parentDeps:{type:"array",uniqueItems:!0,title:"Script richiesti per l'installazione:",default:[],items:{type:"string",oneOf:r.map(n=>({title:`[${n.type===g.AV.FORUM?"Forum":n.type===g.AV.USER?"User":"All"}] ${n.name}`,const:n.id})).sort((n,a)=>n.title>a.title?1:a.title>n.title?-1:0)},widget:{formlyConfig:{props:{resetButton:!0}}}},settingsSchema:{type:"code-editor",title:"Schema JSON per le opzioni:",default:"{}",widget:{formlyConfig:{props:{editorOptions:{height:"300px"},customLabelTemplate:i}}}},html:{type:"code-editor",title:"Codice HTML che sar\xe0 mostrato nel tag HEAD (anche sul layout FFMobile):",description:"In questo campo \xe8 possibile inserire degli stili usando il tag <style>",default:"",widget:{formlyConfig:{props:{editorOptions:{height:"300px",language:"html"}}}}}}}}}(this.script,this.scriptList,null===(i=this.profileService.scriptDev)||void 0===i?void 0:i.tabs,this.jsonSchemaLabelTemplate)),this.changeDetectorRef.detectChanges()}get areAllFormsValid(){return this.genericInfoForm.valid&&this.baseInfoForm.valid&&this.optionsForm.valid&&this.advancedForm.valid}get allForms(){return[this.genericInfoForm,this.baseInfoForm,this.optionsForm,this.advancedForm]}exportFormModel(){var i;const n=Object.assign({},...this.allForms.map(s=>s.model));n.settingsSchema=(0,S.PX)(this.optionsForm.model.settingsSchema);const a=new Blob([JSON.stringify(n)],{type:"application/json"});(0,S.On)(a,`${((null===(i=this.script)||void 0===i?void 0:i.name)||"new_script").replace(/\s+/g,"_")}-${Date.now()}.json`)}importFormModel(i){this.constructAllForms=!0,[this.genericInfoForm.model,this.baseInfoForm.model,this.optionsForm.model,this.advancedForm.model]=function Y(t){return[{name:t.name,description:t.description,preview:t.preview,type:t.type,docsLink:t.docsLink,publisher:t.publisher},{sources:t.sources,layouts:t.layouts,privacy:t.privacy},{packages:t.packages,parentDeps:t.parentDeps,settingsSchema:(0,S._W)(t.settingsSchema),html:t.html},{sandboxes:t.sandboxes,webhook:t.webhook}]}(i),this.toastService.show({content:"Il form \xe8 stato aggiornato con i dati contenuti nel file!"})}changeFormValidity(i,n){i.valid=n,this.constructAllForms&&this.changeDetectorRef.detectChanges()}save(){var i=this;return(0,u.Z)(function*(){var n;if(!i.areAllFormsValid)return;if(i.pendingRequest)return void i.toastService.advice(f.V.REQUEST_PENDING);i.pendingRequest=!0;const a=Object.assign({},...i.allForms.map(O=>(0,S.nK)(O.model)?i.scriptDevFormService.createDefaultSettings(O.schema):O.model));a.settingsSchema=(0,S.PX)(i.optionsForm.model.settingsSchema);const s=JSON.parse(a.settingsSchema),c=function X(t,r){return{type:t.type,name:K(t.privacy.allowed)+t.name,description:t.description,faqLink:t.docsLink,preview:t.preview,publisher:t.publisher,source:t.sources.prod,sourceBeta:t.sources.beta,position:t.sources.position,sandboxes:t.sandboxes,packages:t.packages,dependencies:t.parentDeps,settingsDefault:JSON.stringify(r),settingsSchema:t.settingsSchema,hidden:t.privacy.hidden,html:t.html,cpQuirks:t.layouts.quirks,cpStandard:t.layouts.standard,cpMobile:t.layouts.mobile,webhook:t.webhook.source,webhookCallOnSettings:t.webhook.calls.onSettings,webhookCallOnManage:t.webhook.calls.onManage}}(a,i.scriptDevFormService.createDefaultSettings(s)),m=yield i.scriptDevService.upsertScript(c,null===(n=i.script)||void 0===n?void 0:n.id);i.saveEvent.emit(m?a.name:void 0),i.pendingRequest=!1})()}}return(t=r).\u0275fac=function(i){return new(i||t)(e.Y36(ee.H),e.Y36(e.sBO),e.Y36(C.k),e.Y36(oe),e.Y36(v.N))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-script-dev-settings-form"]],viewQuery:function(i,n){if(1&i&&e.Gf(me,5),2&i){let a;e.iGM(a=e.CRH())&&(n.jsonSchemaLabelTemplate=a.first)}},inputs:{script:"script",scriptList:"scriptList"},outputs:{tipsEvent:"tipsEvent",cancelEvent:"cancelEvent",saveEvent:"saveEvent"},decls:16,vars:12,consts:[["ngbAccordion","",1,"flat-container","border-0",3,"closeOthers","destroyOnHide"],["ngbAccordionItem","",4,"ngFor","ngForOf"],["id","dev-form-btns",1,"list-unstyled","d-flex","justify-content-end","align-items-center","mb-0","mt-3"],[1,"me-2"],["type","button",1,"btn","btn-danger","d-flex","align-items-center",3,"click"],["type","button",1,"btn","btn-success","d-flex","align-items-center",3,"disabled","click"],["jsonSchemaLabel",""],[3,"formSchemaString"],["schemaDemo",""],["buttonsId","dev-form-btns",3,"isFormValid","canDownload","tipsEvent","cancelEvent","saveEvent","downloadEvent"],["modalTitle","Esportazione script",3,"exportEvent","importEvent"],["exporter",""],["ngbAccordionItem",""],["ngbAccordionHeader",""],["ngbAccordionButton","",1,"fs-lg","fv-small-caps",3,"innerText"],["ngbAccordionCollapse",""],["ngbAccordionBody",""],["app-custom-form","",3,"schema","model","showFieldValidationOnInit","validityChangeEvent"],["customForm",""],[1,"form-label","d-flex"],["class","d-block",3,"for",4,"ngIf"],["appTippy","Visualizza la demo",1,"ms-auto",3,"tippyProps","disableOnTouchDevice","click"],[1,"d-block","material-icons-outlined","text-success","cursor-pointer"],[1,"d-block",3,"for"],["aria-hidden","true",4,"ngIf"],["aria-hidden","true"]],template:function(i,n){if(1&i){const a=e.EpF();e.TgZ(0,"div",0),e.YNc(1,fe,6,1,"div",1),e.qZA(),e.TgZ(2,"ul",2)(3,"li",3)(4,"button",4),e.NdJ("click",function(){return n.cancelEvent.emit()}),e._uU(5,"Annulla"),e.qZA()(),e.TgZ(6,"li")(7,"button",5),e.NdJ("click",function(){return n.save()}),e._uU(8,"Salva"),e.qZA()()(),e.YNc(9,Ze,5,4,"ng-template",null,6,e.W1O),e._UZ(11,"app-script-dev-settings-schema-demo",7,8),e.TgZ(13,"app-script-form-utilities",9),e.NdJ("tipsEvent",function(){return n.tipsEvent.emit()})("cancelEvent",function(){return n.cancelEvent.emit()})("saveEvent",function(){return n.save()})("downloadEvent",function(){e.CHM(a);const c=e.MAs(15);return e.KtG(c.open())}),e.qZA(),e.TgZ(14,"app-form-exporter",10,11),e.NdJ("exportEvent",function(){return n.exportFormModel()})("importEvent",function(c){return n.importFormModel(c)}),e.qZA()}2&i&&(e.Q6J("closeOthers",!0)("destroyOnHide",!n.constructAllForms),e.xp6(1),e.Q6J("ngForOf",e.l5B(7,be,n.genericInfoForm,n.baseInfoForm,n.optionsForm,n.advancedForm)),e.xp6(6),e.Q6J("disabled",!n.areAllFormsValid),e.xp6(4),e.Q6J("formSchemaString",n.optionsForm.model.settingsSchema||"{}"),e.xp6(2),e.Q6J("isFormValid",n.areAllFormsValid)("canDownload",!n.isNewScript))},dependencies:[d.sg,d.O5,L.d,re,_.fD,_.QQ,_.VE,_.I,_.fA,_.ud,j.b,ae.$,de],styles:["ul[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{box-shadow:0 .125rem .25rem #00000013}"]}),r})();var Te=l(4143),Se=l(9485);const ye=["app-script-dev-settings-info",""];function Ae(t,r){1&t&&(e.ynx(0),e.TgZ(1,"div",15),e._uU(2,"Creazione di un nuovo script!"),e.qZA(),e.TgZ(3,"div")(4,"small"),e._uU(5,"Lo script verr\xe0 aggiunto dopo aver salvato le impostazioni"),e.qZA()(),e.BQk())}function qe(t,r){if(1&t){const o=e.EpF();e.TgZ(0,"a",23),e.NdJ("click",function(){e.CHM(o);const n=e.oxw(3),a=e.MAs(31);return n.installationClick(),e.KtG(a.open())}),e.qZA()}if(2&t){const o=e.oxw(3);e.Q6J("innerText",o.scriptWithStats.stats.users.length+o.scriptWithStats.stats.forums.length)}}function Ee(t,r){1&t&&(e.TgZ(0,"div",24),e._uU(1,"-"),e.qZA())}function xe(t,r){if(1&t&&(e.ynx(0),e.TgZ(1,"div",17),e._UZ(2,"div",18)(3,"div",19),e.qZA(),e.TgZ(4,"div",20)(5,"div"),e._uU(6,"Installazioni:"),e.qZA(),e.YNc(7,qe,1,1,"a",21),e.YNc(8,Ee,2,0,"ng-template",null,22,e.W1O),e.qZA(),e.BQk()),2&t){const o=e.MAs(9),i=e.oxw(2);e.xp6(2),e.Q6J("innerText","Script:"),e.xp6(1),e.Q6J("innerText",i.scriptWithStats.script.name),e.xp6(4),e.Q6J("ngIf",i.scriptWithStats.stats.users.length>0||i.scriptWithStats.stats.forums.length>0)("ngIfElse",o)}}function ze(t,r){1&t&&(e.TgZ(0,"div",25),e._UZ(1,"span",26),e.qZA(),e.TgZ(2,"div",25),e._UZ(3,"span",27),e.qZA())}function Fe(t,r){if(1&t&&(e.YNc(0,xe,10,4,"ng-container",4),e.YNc(1,ze,4,0,"ng-template",null,16,e.W1O)),2&t){const o=e.MAs(2),i=e.oxw();e.Q6J("ngIf",i.scriptWithStats)("ngIfElse",o)}}let Ce=(()=>{var t;class r{constructor(i){this.scriptListService=i,this.isNewScript=!0,this.tipsButtonEvent=new e.vpe,this.initializeTipsModal=!1,this.readMore=Te.f,this.redirectAfterSaving=!0}ngOnInit(){this.settingsOptions=this.scriptListService.settingsOptions,this.redirectAfterSaving=this.settingsOptions.redirectAfterSaving||this.isNewScript}installationClick(){this.selectedScript=this.scriptWithStats}saveSettingsOptions(){this.scriptListService.settingsOptions=(0,h.Z)((0,h.Z)({},this.settingsOptions),{},{redirectAfterSaving:this.redirectAfterSaving})}}return(t=r).\u0275fac=function(i){return new(i||t)(e.Y36(b.o))},t.\u0275cmp=e.Xpm({type:t,selectors:[["","app-script-dev-settings-info",""]],inputs:{isNewScript:"isNewScript",scriptWithStats:"scriptWithStats"},outputs:{tipsButtonEvent:"tipsButtonEvent"},attrs:ye,decls:59,vars:7,consts:[[1,"flat-container","px-3","px-md-4","py-3","target-info","min-w-0","d-flex","flex-column"],[1,"mb-2"],["role","button",1,"cursor-pointer","d-sm-none",3,"innerText","click"],[1,"my-auto"],[4,"ngIf","ngIfElse"],["edit",""],[1,"form-check","mb-0","mt-2"],["type","checkbox","id","redirect-back",1,"form-check-input",3,"ngModel","disabled","ngModelChange"],["for","redirect-back",1,"form-check-label"],[3,"scriptWithStats"],["installationModal",""],[1,"flat-container","px-3","px-md-4","py-3","tips","min-w-0","d-none","d-sm-block"],[1,"mb-2","h5"],[1,"mb-0"],["role","button",1,"cursor-pointer",3,"innerText","click"],[1,"text-uppercase"],["placeholders",""],[1,"script","d-flex"],[1,"text-nowrap",3,"innerText"],[1,"text-uppercase","text-truncate","mw-100","ms-1",3,"innerText"],[1,"installations","d-flex"],["role","button","class","d-block ms-1",3,"innerText","click",4,"ngIf","ngIfElse"],["noInstalled",""],["role","button",1,"d-block","ms-1",3,"innerText","click"],[1,"ms-1"],[1,"placeholder-glow"],[1,"placeholder","col-10","col-sm-8"],[1,"placeholder","col-8","col-sm-6"]],template:function(i,n){if(1&i&&(e.TgZ(0,"div",0)(1,"p",1),e._uU(2," Questo pannello consente di modificare le "),e.TgZ(3,"em"),e._uU(4,"impostazioni"),e.qZA(),e._uU(5," di uno script o di "),e.TgZ(6,"em"),e._uU(7,"crearne"),e.qZA(),e._uU(8," uno nuovo. Le varie opzioni presenti determineranno il comportamento dello script una volta "),e.TgZ(9,"em"),e._uU(10,"installato"),e.qZA(),e._uU(11," da un utente o sito. Dopo aver salvato le modifiche, queste diverranno "),e.TgZ(12,"em"),e._uU(13,"automaticamente"),e.qZA(),e._uU(14," effettive anche per coloro che hanno gi\xe0 aggiunto lo script. Per questo motivo, \xe8 importante "),e.TgZ(15,"em"),e._uU(16,"adattare il codice javascript"),e.qZA(),e._uU(17," affinch\xe9 risulti adeguato alle eventuali nuove impostazioni specificate. Data la loro importanza, solo gli "),e.TgZ(18,"em"),e._uU(19,"sviluppatori"),e.qZA(),e._uU(20," abilitati possono cambiare le variabili di uno script. "),e.TgZ(21,"a",2),e.NdJ("click",function(){return n.tipsButtonEvent.emit()}),e.qZA()(),e.TgZ(22,"div",3),e.YNc(23,Ae,6,0,"ng-container",4),e.YNc(24,Fe,3,2,"ng-template",null,5,e.W1O),e.qZA(),e.TgZ(26,"div",6)(27,"input",7),e.NdJ("ngModelChange",function(s){return n.redirectAfterSaving=s})("ngModelChange",function(){return n.saveSettingsOptions()}),e.qZA(),e.TgZ(28,"label",8),e._uU(29," Torna alla lista script dopo il salvataggio "),e.qZA()(),e._UZ(30,"app-script-dev-stats-details",9,10),e.qZA(),e.TgZ(32,"div",11)(33,"div",12),e._uU(34,"Tips and tricks"),e.qZA(),e.TgZ(35,"p",1),e._uU(36," Accedendo a questo pannello da "),e.TgZ(37,"em"),e._uU(38,"desktop"),e.qZA(),e._uU(39,", si possono usare le icone presenti sulla barra laterale destra per navigare velocemente nella pagina e salvare o annullare l'operazione corrente in un istante. Inoltre, diviene possibile utilizzare l'apposito "),e.TgZ(40,"em"),e._uU(41,"editor del codice"),e.qZA(),e._uU(42," per i campi "),e.TgZ(43,"em"),e._uU(44,"Schema JSON delle opzioni"),e.qZA(),e._uU(45," e "),e.TgZ(46,"em"),e._uU(47,"Codice HTML che sar\xe0 mostrato nel tag HEAD"),e.qZA(),e._uU(48,", in modo da essere agevolati nella scrittura del codice. Tramite l'opzione per mantenere lo script "),e.TgZ(49,"em"),e._uU(50,"nascosto nella lista"),e.qZA(),e._uU(51,", \xe8 possibile infine effettuare dei brevi test prima di renderlo accessibile a terzi."),e._UZ(52,"br"),e.qZA(),e.TgZ(53,"p",13),e._uU(54," Sfuttando il "),e.TgZ(55,"em"),e._uU(56,"JSON delle opzioni"),e.qZA(),e._uU(57," e la definizione dei campi personalizzabili, si possono creare script adatti ad ogni esigenza! "),e.TgZ(58,"a",14),e.NdJ("click",function(){return n.tipsButtonEvent.emit()}),e.qZA()()()),2&i){const a=e.MAs(25);e.xp6(21),e.Q6J("innerText",n.readMore),e.xp6(2),e.Q6J("ngIf",n.isNewScript)("ngIfElse",a),e.xp6(4),e.Q6J("ngModel",n.redirectAfterSaving)("disabled",n.isNewScript),e.xp6(3),e.Q6J("scriptWithStats",n.selectedScript),e.xp6(28),e.Q6J("innerText",n.readMore)}},dependencies:[d.O5,A.Wl,A.JJ,A.On,Se.d],styles:["p[_ngcontent-%COMP%]{text-align:justify}"]}),r})();const Ie={webhook:{manageScript:{eventType:"EASY_MANAGE_SCRIPT",eventPayload:'{"scriptId":1,"targetId":"ff500","targetType":"FORUM","action":"INSTALL"}'},manageSettings:{eventType:"EASY_MANAGE_SETTINGS",eventPayload:'{"scriptId":1,"targetId":"ff500","targetType":"FORUM","settings":"{}"}'}},stringField:{type:"object",properties:{stringField:{type:"string",title:"Titolo del campo stringa:"}}},numberField:{type:"object",properties:{numberField:{type:"number",title:"Titolo del campo numerico:"}}},checkboxField:{type:"object",properties:{checkboxField:{type:"boolean",title:"Titolo del checkbox:"}}},textareaField:{type:"object",properties:{textareaField:{type:"textarea",title:"Titolo della textarea:"}}},selectField:{type:"object",properties:{selectField:{type:"string",title:"Titolo del select:",enum:["Opzione 1","Opzione 2","Opzione 3"]}}},arrayField:{type:"object",properties:{arrayField:{type:"array",title:"Titolo del campo array",items:{type:"string",title:"Titolo del singolo elemento della lista:"}}}},arrayFieldWithObject:{type:"object",properties:{arrayField:{type:"array",title:"Titolo del campo array",items:{type:"object",properties:{textareaField:{type:"textarea",title:"Titolo della textarea:"},numberField:{type:"number",title:"Titolo del campo numerico:"},checkboxField:{type:"boolean",title:"Titolo del checkbox:"}}}}}},multiselectField:{type:"object",properties:{arrayField:{type:"array",title:"Titolo del campo array:",uniqueItems:!0,items:{type:"string",enum:["Opzione 1","Opzione 2","Opzione 3"]}}}},radioField:{type:"object",properties:{radioField:{type:"string",title:"Titolo del campo radio:",enum:["Opzione 1","Opzione 2","Opzione 3"],widget:{formlyConfig:{type:"radio"}}}}},forumSectionsField:{type:"object",properties:{sections:{type:"forum-sections",title:"Sezioni del forum:"}}},singleForumSectionsField:{type:"object",properties:{sections:{type:"forum-sections",title:"Sezioni del forum:",widget:{formlyConfig:{props:{multiple:!1}}}}}},forumGroupsField:{type:"object",properties:{groups:{type:"forum-groups",title:"Gruppi del forum:"}}},forumAllGroupsField:{type:"object",properties:{groups:{type:"forum-groups",title:"Gruppi del forum:",widget:{formlyConfig:{props:{keepGroupsWithoutId:!0}}}}}}},Oe={minMax:{type:"object",properties:{numberField:{type:"number",title:"Titolo del campo numerico:",minimum:10,maximum:100}}},default:{type:"object",properties:{stringField:{type:"string",title:"Titolo del campo stringa:",default:"Valore di default"}}},required:{type:"object",required:["stringField"],properties:{stringField:{type:"string",title:"Titolo del campo stringa:"}}},placeholder:{type:"object",properties:{stringField:{type:"string",title:"Titolo del campo stringa:",widget:{formlyConfig:{props:{placeholder:"Il mio placeholder..."}}}}}},oneOf:{type:"object",properties:{selectField:{type:"number",title:"Titolo del select:",oneOf:[{title:"Placeholder dell'opzione 1",const:1},{title:"Placeholder dell'opzione 2",const:2},{title:"Placeholder dell'opzione 3",const:3}]}}},pattern:{type:"object",properties:{stringField:{type:"string",title:"Titolo del campo stringa:",widget:{formlyConfig:{props:{pattern:"/^(forumfree|forumcommunity|blogfree)$/i"}}}}}},multipleOf:{type:"object",properties:{numberField:{type:"number",title:"Titolo del campo numerico:",minimum:10,maximum:100,multipleOf:10}}},hidden:{type:"object",properties:{numberField:{type:"number",title:"Titolo del campo numerico:",minimum:10,maximum:100,multipleOf:10},hiddenField:{type:"string",default:"Hidden value",widget:{formlyConfig:{props:{type:"hidden"}}}}}},multischema:{type:"object",properties:{multiSchema:{type:"object",title:"Titolo del multischema",oneOf:[{title:"Primo schema",type:"object",properties:{field1:{type:"boolean",default:!0,title:"Checkbox abilitato di default"},field2:{type:"string",title:"Un campo stringa richiesto:",default:"Un contenuto..."}}},{title:"Secondo schema",type:"object",properties:{field1:{type:"number",title:"Input numerico:"},field2:{type:"number",title:"Titolo del select:",oneOf:[{title:"Placeholder dell'opzione 1",const:1},{title:"Placeholder dell'opzione 2",const:2},{title:"Placeholder dell'opzione 3",const:3}]}}},{title:"Terzo schema",type:"object",properties:{arrayField:{type:"array",title:"Titolo del campo array",items:{type:"object",properties:{textareaField:{type:"textarea",title:"Titolo della textarea:"},numberField:{type:"number",title:"Titolo del campo numerico:"},checkboxField:{type:"boolean",title:"Titolo del checkbox:"}}}}}}]}}}},De=["modal"];function Me(t,r){1&t&&e._UZ(0,"app-loader",4)}const ke=function(){return{}},we=function(t){return{type:"object",properties:t}},je=function(){return{stringField:"contenuto specificato dall'utente"}},Ne=function(){return{textareaField:"Contenuto della textarea dell'item 1",numberField:1,checkboxField:!0}},Je=function(){return{textareaField:"Contenuto della textarea dell'item 2",numberField:2,checkboxField:!1}},Le=function(){return{textareaField:"Contenuto della textarea dell'item 3",numberField:3,checkboxField:!1}},Qe=function(t,r,o){return[t,r,o]},Pe=function(t){return{arrayField:t}};function Re(t,r){if(1&t&&(e.TgZ(0,"p"),e._uU(1," Questo pannello consente di creare un nuovo script o di modificarne uno esistente. "),e.qZA(),e.TgZ(2,"h6",5),e._uU(3,"Campi disponibili"),e.qZA(),e.TgZ(4,"p",6),e._uU(5," Il form contiene differenti campi che permettono allo sviluppatore di adattare al meglio lo script alle proprie esigenze. Alcuni di questi campi sono "),e.TgZ(6,"strong"),e._uU(7,"obbligatori"),e.qZA(),e._uU(8,", altri "),e.TgZ(9,"strong"),e._uU(10,"facoltativi"),e.qZA(),e._uU(11,". Tra i primi vi sono: "),e.qZA(),e.TgZ(12,"ul",6)(13,"li")(14,"em"),e._uU(15,"nome"),e.qZA(),e._uU(16,": il nome con cui lo script viene riconosciuto dagli utenti; "),e.qZA(),e.TgZ(17,"li")(18,"em"),e._uU(19,"tab"),e.qZA(),e._uU(20,": il fornitore che accoglie lo script. Gli script vengono suddivisi per fornitore in modo da essere facilmente individuabili dagli utenti e da indicare chiaramente a chi saranno indirizzate eventuali richieste di supporto. Il tab "),e.TgZ(21,"em"),e._uU(22,"Altri"),e.qZA(),e._uU(23," accoglie tutti gli script non riferiti a uno specifico fornitore; "),e.qZA(),e.TgZ(24,"li")(25,"em"),e._uU(26,"link del file javascript"),e.qZA(),e._uU(27,": il link al file contenente il codice dello script; "),e.qZA(),e.TgZ(28,"li")(29,"em"),e._uU(30,"posizione in cui verr\xe0 importato il file js"),e.qZA(),e._uU(31,": il punto della pagina HTML in cui verr\xe0 eseguito lo script. Sono disponibili i vari blocchi presenti anche nel classico pannello di amministrazione del forum o blog; "),e.qZA(),e.TgZ(32,"li")(33,"em"),e._uU(34,"tipo"),e.qZA(),e._uU(35,": la tipologia dello script. Uno script per forum \xe8 installabile solo dopo aver selezionato un sito amministrato ed \xe8 eseguito per tutti gli account che visitano il sito. Uno script per l'account, al contrario, pu\xf2 essere installato da un qualunque utente e segue tale utente su ogni sito che visita. Inoltre, in quest'ultimo caso, il codice dello script viene eseguito anche nella pagina del profilo dell'utente. Se lo script \xe8 pensato tanto per i forum, quanto per gli account, \xe8 possibile specificare in questo campo il valore "),e.TgZ(36,"em"),e._uU(37,"entrambi"),e.qZA(),e._uU(38,"; "),e.qZA(),e.TgZ(39,"li")(40,"em"),e._uU(41,"schema JSON per le opzioni"),e.qZA(),e._uU(42,": il JSON contenente le opzioni dello script personalizzabili dall'utilizzatore tramite l'apposita pagina dopo aver effettuato l'installazione. Se lo script non necessita o non fornisce personalizzazioni, \xe8 possibile indicare in questo campo un oggetto vuoto "),e.TgZ(43,"code",7),e._uU(44),e.qZA(),e._uU(45,". Per una descrizione dettagliata dei vari campi inseribili, si rimanda a quanto specificato nel prosieguo. "),e.qZA()(),e.TgZ(46,"p",6),e._uU(47,"I campi facoltativi sono:"),e.qZA(),e.TgZ(48,"ul")(49,"li")(50,"em"),e._uU(51,"descrizione"),e.qZA(),e._uU(52,": una concisa spiegazione dello scopo e delle funzionalit\xe0 offerte dallo script. Una buona descrizione non solo \xe8 d'aiuto ai potenziali utilizzatori dello script, ma pu\xf2 anche diventare un'ottima pubblicit\xe0! "),e.qZA(),e.TgZ(53,"li")(54,"em"),e._uU(55,"link alla guida"),e.qZA(),e._uU(56,": l'url che riporta alla guida dello script. Una guida ben scritta risulta fondamentale per comprendere il funzionamento dello script, soprattutto in caso di elevata complessit\xe0 e personalizzazione! In questo campo sono accettati esclusivamente link a discussioni presenti sui circuiti Forumfree, Forumcommunity, Blogfree; "),e.qZA(),e.TgZ(57,"li")(58,"em"),e._uU(59,"link all'anteprima"),e.qZA(),e._uU(60,": l'url dell'immagine da utilizzare come anteprima nella lista degli script. Una buona anteprima riesce a cogliere le funzionalit\xe0 fondamentali dello script e a comunicarle con chiarezza e immediatezza. In questo campo sono accettati solo link a immagini in formato jpg, png o gif; "),e.qZA(),e.TgZ(61,"li")(62,"em"),e._uU(63,"impostazioni webhook"),e.qZA(),e._uU(64,": in questo campo si pu\xf2 specificare un link a cui verr\xe0 inviata una richiesta "),e.TgZ(65,"em"),e._uU(66,"POST"),e.qZA(),e._uU(67," ogni volta che si verifica l'evento abilitato. Le informazioni contenute nella richiesta, in formato "),e.TgZ(68,"em"),e._uU(69,"JSON"),e.qZA(),e._uU(70,", variano a seconda dell'evento. Sono tuttavia sempre presenti le propriet\xe0 "),e.TgZ(71,"code",7),e._uU(72,"eventType"),e.qZA(),e._uU(73," che descrive il tipo di evento ed "),e.TgZ(74,"code",7),e._uU(75,"eventPayload"),e.qZA(),e._uU(76," che contiene i dati relativi all'evento verificatosi."),e._UZ(77,"br"),e._uU(78,"Nel caso di installazione o disinstallazione, il tipo di evento \xe8 "),e.TgZ(79,"code",7),e._uU(80,"EASY_MANAGE_SCRIPT"),e.qZA(),e._uU(81,", mentre "),e.TgZ(82,"code",7),e._uU(83,"eventPayload"),e.qZA(),e._uU(84," contiene l'id dello script installato o disinstallato, il tipo di soggetto che ha compiuto l'azione, "),e.TgZ(85,"code",7),e._uU(86,"FORUM"),e.qZA(),e._uU(87," o "),e.TgZ(88,"code",7),e._uU(89,"USER"),e.qZA(),e._uU(90,", l'id del forum o dell'utente, nel formato "),e.TgZ(91,"em"),e._uU(92,"ffuid"),e.qZA(),e._uU(93,", e l'azione eseguita, "),e.TgZ(94,"code",7),e._uU(95,"INSTALL"),e.qZA(),e._uU(96," o "),e.TgZ(97,"code",7),e._uU(98,"UNINSTALL"),e.qZA(),e._uU(99,". "),e._UZ(100,"app-custom-pre",8),e._uU(101," Nel caso di salvataggio delle impostazioni, il tipo di evento \xe8 "),e.TgZ(102,"code",7),e._uU(103,"EASY_MANAGE_SETTINGS"),e.qZA(),e._uU(104,", mentre "),e.TgZ(105,"code",7),e._uU(106,"eventPayload"),e.qZA(),e._uU(107," contiene l'id dello script gestito, il tipo di soggetto che ha compiuto l'azione, "),e.TgZ(108,"code",7),e._uU(109,"FORUM"),e.qZA(),e._uU(110," o "),e.TgZ(111,"code",7),e._uU(112,"USER"),e.qZA(),e._uU(113,", l'id del forum o dell'utente, nel formato "),e.TgZ(114,"em"),e._uU(115,"ffuid"),e.qZA(),e._uU(116,", e le nuove impostazioni. "),e._UZ(117,"app-custom-pre",8),e._uU(118," La richiesta viene inviata quando l'azione \xe8 compiuta sia da un admin per il proprio forum (script per forum), sia da un profilo per il proprio account (userscript); "),e.qZA(),e.TgZ(119,"li")(120,"em"),e._uU(121,"librerie e framework da importare"),e.qZA(),e._uU(122,": eventuali librerie da cui dipende lo script e che verranno importate insieme ad esso. Le librerie selezionate in questo campo saranno importate una sola volta, anche se richieste da pi\xf9 script installati sul sito o sull'account utilizzatore; "),e.qZA(),e.TgZ(123,"li")(124,"em"),e._uU(125,"script richiesti per l'installazione"),e.qZA(),e._uU(126,": tramite questo select \xe8 possibile indicare uno o pi\xf9 script che sono richiesti affinch\xe9 lo script che si sta modificando possa essere installato. In particolare, questo campo pu\xf2 essere utile quando si sviluppano add-on o estensioni facoltative di un altro script gi\xe0 pubblicato; "),e.qZA(),e.TgZ(127,"li")(128,"em"),e._uU(129,"codice HTML che sar\xe0 mostrato nel tag HEAD (anche sul layout FFMobile)"),e.qZA(),e._uU(130,": in questo campo \xe8 possibile inserire del codice HTML da importare nell'HEAD delle pagine su cui viene eseguito lo script. Ci\xf2 risulta utile soprattutto per aggiungere degli stili agli elementi HTML eventualmente stampati dal codice javascript. In tal caso, per inserire correttamente il CSS, occorre racchiuderlo nell'apposito tag "),e.TgZ(131,"code",7),e._uU(132,"style"),e.qZA(),e._uU(133,"; "),e.qZA(),e.TgZ(134,"li")(135,"em"),e._uU(136,"checkbox di compatibilit\xe0"),e.qZA(),e._uU(137,": tramite i quattro checkbox \xe8 possibile specificare se lo script \xe8 compatibile con i layout messi a disposizione sui circuiti. Se uno script non \xe8 compatibile con un layout, \xe8 comunque installabile, ma non verr\xe0 eseguito sulle pagine che adottano tale layout; "),e.qZA(),e.TgZ(138,"li")(139,"em"),e._uU(140,"checkbox nascosto nella lista"),e.qZA(),e._uU(141,": abilitando questo checkbox, lo script potr\xe0 essere tenuto in fase di test e sar\xe0 visualizzato nella lista degli script installabili solo dal suo creatore. "),e.qZA()(),e.TgZ(142,"div",9)(143,"h6",5),e._uU(144,"Schema JSON delle opzioni"),e.qZA(),e.TgZ(145,"p"),e._uU(146," Tramite lo schema JSON \xe8 possibile determinare quali campi saranno presenti nel form di modifica delle impostazioni dello script. \xc8 possibile inserire 5 elementi-base differenti, combinabili tra loro e personalizzabili tramite le opzioni descritte nei paragrafi seguenti: input, textarea, select, checkbox e radio. "),e.qZA(),e.TgZ(147,"p",5),e._uU(148,"Creazione dell'oggetto JSON"),e.qZA(),e.TgZ(149,"p"),e._uU(150," Il JSON delle opzioni \xe8 un oggetto che deve descrivere i campi HTML che verranno in seguito automaticamente creati. Per fare ci\xf2, \xe8 essenziale focalizzarsi sulla propriet\xe0 "),e.TgZ(151,"code",7),e._uU(152,"type"),e.qZA(),e._uU(153,", che indica il tipo di campo che sar\xe0 generato. Questa propriet\xe0 pu\xf2 assumere i valori: "),e.TgZ(154,"code",7),e._uU(155,"object"),e.qZA(),e._uU(156,", "),e.TgZ(157,"code",7),e._uU(158,"string"),e.qZA(),e._uU(159,", "),e.TgZ(160,"code",7),e._uU(161,"number"),e.qZA(),e._uU(162,", "),e.TgZ(163,"code",7),e._uU(164,"boolean"),e.qZA(),e._uU(165,", "),e.TgZ(166,"code",7),e._uU(167,"textarea"),e.qZA(),e._uU(168,", "),e.TgZ(169,"code",7),e._uU(170,"array"),e.qZA(),e._uU(171,", "),e.TgZ(172,"code",7),e._uU(173,"forum-sections"),e.qZA(),e._uU(174,", "),e.TgZ(175,"code",7),e._uU(176,"forum-groups"),e.qZA(),e._uU(177,"."),e._UZ(178,"br"),e._uU(179," Il primo campo di ogni script deve obbligatoriamente essere di tipo "),e.TgZ(180,"code",7),e._uU(181,"object"),e.qZA(),e._uU(182,". Un campo di questo tipo pu\xf2 essere visto semplicemente come un raccoglitore di altri campi, i quali devono essere descritti nella propriet\xe0 denominata "),e.TgZ(183,"code",7),e._uU(184,"properties"),e.qZA(),e._uU(185,": "),e.qZA(),e._UZ(186,"app-custom-pre",8),e.TgZ(187,"p"),e._uU(188," Tale primo campo, che racchiude tutte le altre impostazioni, diviene accessibile nel codice dello script tramite la variabile "),e.TgZ(189,"code",7),e._uU(190,"scriptInfo.settings"),e.qZA(),e._uU(191,". Da un punto di vista grafico, un tipo "),e.TgZ(192,"code",7),e._uU(193,"object"),e.qZA(),e._uU(194," non viene visualizzato in alcun modo dall'utente, ma \xe8 presente come propriet\xe0 nel JSON costruito in automatico al salvataggio delle impostazioni da parte dell'utilizzatore. "),e.qZA(),e.TgZ(195,"p")(196,"span",5),e._uU(197,"Popolare l'oggetto"),e.qZA(),e._uU(198," properties"),e.qZA(),e.TgZ(199,"p"),e._uU(200," All'interno della propriet\xe0 "),e.TgZ(201,"code",7),e._uU(202,"properties"),e.qZA(),e._uU(203," occorre specificare i vari campi personalizzabili dall'utente. Il formato risulta piuttosto semplice: le chiavi dell'oggetto rappresentano i nomi univoci dei campi, cio\xe8 le chiavi con cui saranno accessibili quei campi nel codice dello script, mentre il contenuto di ciascuna chiave \xe8 un altro oggetto che descrive il campo da inserire. "),e.qZA(),e.TgZ(204,"p")(205,"span",5),e._uU(206,"Input di tipo stringa:"),e.qZA(),e._uU(207," type string "),e.qZA(),e.TgZ(208,"p"),e._uU(209," Per inserire un input di tipo stringa, \xe8 possibile usare il seguente codice: "),e.qZA(),e._UZ(210,"app-custom-pre",8),e.TgZ(211,"p"),e._uU(212," dove "),e.TgZ(213,"code",7),e._uU(214,"stringField"),e.qZA(),e._uU(215," \xe8 il nome univoco del campo, mentre l'oggetto che lo descrive contiene due informazioni: in primo luogo il tipo di campo, "),e.TgZ(216,"code",7),e._uU(217,"string"),e.qZA(),e._uU(218,"; in secondo luogo, il titolo di tale campo, "),e.TgZ(219,"code",7),e._uU(220,"title"),e.qZA(),e._uU(221,". Nel form delle impostazioni, il titolo di un campo viene visualizzato come label sopra il campo stesso. Una volta che l'utilizzatore avr\xe0 personalizzato il campo e avr\xe0 salvato le impostazioni, nel codice dello script sar\xe0 disponibile un oggetto di questo tipo, contenuto nella variabile "),e.TgZ(222,"code",7),e._uU(223,"scriptInfo.settings"),e.qZA(),e._uU(224,": "),e.qZA(),e._UZ(225,"app-custom-pre",8),e.TgZ(226,"p")(227,"span",5),e._uU(228,"Input di tipo numerico:"),e.qZA(),e._uU(229," type number "),e.qZA(),e.TgZ(230,"p"),e._uU(231," Per creare un input di tipo numerico, \xe8 possibile usare il seguente codice: "),e.qZA(),e._UZ(232,"app-custom-pre",8),e.TgZ(233,"p"),e._uU(234," Nel codice dello script, un input di questo tipo avr\xe0 come contenuto un numero. "),e.qZA(),e.TgZ(235,"p")(236,"span",5),e._uU(237,"Checkbox:"),e.qZA(),e._uU(238," type boolean"),e.qZA(),e.TgZ(239,"p"),e._uU(240," Per aggiungere un checkbox, \xe8 possibile usare il seguente codice: "),e.qZA(),e._UZ(241,"app-custom-pre",8),e.TgZ(242,"p"),e._uU(243," Nel codice dello script, un checkbox assume valore "),e.TgZ(244,"code",7),e._uU(245,"true"),e.qZA(),e._uU(246,", se abilitato, o "),e.TgZ(247,"code",7),e._uU(248,"false"),e.qZA(),e._uU(249,", se non abilitato. "),e.qZA(),e.TgZ(250,"p")(251,"span",5),e._uU(252,"Area di testo:"),e.qZA(),e._uU(253," type textarea"),e.qZA(),e.TgZ(254,"p"),e._uU(255," Per generare una textarea, \xe8 possibile usare il seguente codice: "),e.qZA(),e._UZ(256,"app-custom-pre",8),e.TgZ(257,"p"),e._uU(258,"Nel codice dello script, tale textarea sar\xe0 una stringa."),e.qZA(),e.TgZ(259,"p")(260,"span",5),e._uU(261,"Select: propriet\xe0"),e.qZA(),e._uU(262," enum"),e.qZA(),e.TgZ(263,"p"),e._uU(264," Per inserire un select, occorre fare riferimento alla propriet\xe0 "),e.TgZ(265,"code",7),e._uU(266,"enum"),e.qZA(),e._uU(267,". Un select, infatti, non \xe8 altro che una lista, o enumerazione, dalla quale pu\xf2 essere scelto un solo elemento: "),e.qZA(),e._UZ(268,"app-custom-pre",8),e.TgZ(269,"p"),e._uU(270," La propriet\xe0 "),e.TgZ(271,"code",7),e._uU(272,"enum"),e.qZA(),e._uU(273," \xe8 un array contenente tutte le varie opzioni del select che sar\xe0 generato. Il "),e.TgZ(274,"code",7),e._uU(275,"type"),e.qZA(),e._uU(276," del campo deve necessariamente rispecchiare il tipo dei valori elencati nell'"),e.TgZ(277,"code",7),e._uU(278,"enum"),e.qZA(),e._uU(279," . Cos\xec, ad esempio, se si vuole inserire una scelta tra stringhe, allora il tipo deve essere "),e.TgZ(280,"code",7),e._uU(281,"string"),e.qZA(),e._uU(282,"; se invece la scelta ricade tra numeri, il tipo deve essere "),e.TgZ(283,"code",7),e._uU(284,"number"),e.qZA(),e._uU(285,". Nel codice dello script, si avr\xe0 a disposizione la sola opzione scelta, del tipo specificato. "),e.qZA(),e.TgZ(286,"p")(287,"span",5),e._uU(288,"Lista di campi:"),e.qZA(),e._uU(289," type array"),e.qZA(),e.TgZ(290,"p"),e._uU(291," Talvolta si desidera lasciare specificare all'utente il numero di elementi, tutti uguali tra loro, da inserire e, in seguito, raccogliere in un array tutti gli elementi aggiunti. Tramite il tipo di campo "),e.TgZ(292,"code",7),e._uU(293,"array"),e.qZA(),e._uU(294," \xe8 possibile permettere all'utilizzatore di aggiungere o rimuovere liberamente uno o pi\xf9 campi. Questi ultimi dovranno essere descritti nell'oggetto "),e.TgZ(295,"code",7),e._uU(296,"items"),e.qZA(),e._uU(297,", la cui presenza \xe8 essenziale quando il tipo specificato \xe8 "),e.TgZ(298,"code",7),e._uU(299,"array"),e.qZA(),e._uU(300,". Ad esempio, volendo inserire una lista di campi testuali, si pu\xf2 usare il seguente codice: "),e.qZA(),e._UZ(301,"app-custom-pre",8),e.TgZ(302,"p"),e._uU(303," Come si pu\xf2 notare, l'oggetto "),e.TgZ(304,"code",7),e._uU(305,"items"),e.qZA(),e._uU(306," contiene una descrizione degli elementi dell'array: in questo caso, sono strighe, cio\xe8 campi input, con il titolo specificato nella propriet\xe0 "),e.TgZ(307,"code",7),e._uU(308,"title"),e.qZA(),e._uU(309,". Nel codice dello script, questo campo sar\xe0 un array di lunghezza variabile a seconda di quanti item verranno specificati dall'utilizzatore."),e._UZ(310,"br"),e._uU(311," Nel caso in cui si desiderasse generare un array che ripeta pi\xf9 campi differenti, \xe8 possibile sfruttare il tipo "),e.TgZ(312,"code",7),e._uU(313,"object"),e.qZA(),e._uU(314,": "),e.qZA(),e._UZ(315,"app-custom-pre",8),e.TgZ(316,"p"),e._uU(317," Questo JSON sar\xe0 disponibile nel codice dello script nel seguente formato, a seconda del numero di elementi specificati dall'utente: "),e.qZA(),e._UZ(318,"app-custom-pre",8),e.TgZ(319,"p")(320,"span",5),e._uU(321,"Multiselect: la propriet\xe0"),e.qZA(),e._uU(322," uniqueItems "),e.qZA(),e.TgZ(323,"p"),e._uU(324," Per creare un multiselect, occorre combinare il tipo array con la propriet\xe0 "),e.TgZ(325,"code",7),e._uU(326,"uniqueItems"),e.qZA(),e._uU(327," impostata a "),e.TgZ(328,"code",7),e._uU(329,"true"),e.qZA(),e._uU(330,": "),e.qZA(),e._UZ(331,"app-custom-pre",8),e.TgZ(332,"p"),e._uU(333," Nel codice dello script, questo campo sar\xe0 un array di lunghezza variabile a seconda di quanti elementi del select sono stati selezionati dall'utente. "),e.qZA(),e.TgZ(334,"p")(335,"span",5),e._uU(336,"Radio button: introduzione ai"),e.qZA(),e._uU(337," widget "),e.qZA(),e.TgZ(338,"p"),e._uU(339," Alcune funzionalit\xe0 pi\xf9 avanzate vengono gestite tramite widget. Al momento, l'unico widget disponibile \xe8 contenuto nell'oggetto "),e.TgZ(340,"code",7),e._uU(341,"formlyConfig"),e.qZA(),e._uU(342,". Per aggiungere un widget a un campo, si utilizza la propriet\xe0 "),e.TgZ(343,"code",7),e._uU(344,"widget"),e.qZA(),e._uU(345,". Ad esempio, per inserire un radio button \xe8 possibile usare il seguente codice: "),e.qZA(),e._UZ(346,"app-custom-pre",8),e.TgZ(347,"p"),e._uU(348," Nel codice dello script si avr\xe0 la propriet\xe0 "),e.TgZ(349,"code",7),e._uU(350,"radioField"),e.qZA(),e._uU(351," con un contenuto stringa. "),e.qZA(),e.TgZ(352,"p")(353,"span",5),e._uU(354,"Lista delle sezioni di un forum:"),e.qZA(),e._uU(355," type forum-sections "),e.qZA(),e.TgZ(356,"p"),e._uU(357," Per alcuni script \xe8 necessario avere uno o pi\xf9 campi array che permettano all'utilizzatore di effettuare una scelta tra le sezioni del forum selezionato. Per fare ci\xf2, \xe8 possibile usare il tipo "),e.TgZ(358,"code",7),e._uU(359,"forum-sections"),e.qZA(),e._uU(360,": "),e.qZA(),e._UZ(361,"app-custom-pre",8),e.TgZ(362,"p"),e._uU(363," Il campo generato sar\xe0 un select multiplo contenente le varie sezioni del forum. Se nessun forum risulta selezionato, il select sar\xe0 vuoto. Nel codice dello script, viene fornito un array numerico di id delle sezioni."),e._UZ(364,"br"),e._uU(365," Se si desidera generare un select singolo, \xe8 possibile sfruttare la propriet\xe0 "),e.TgZ(366,"code",7),e._uU(367,"widget"),e.qZA(),e._uU(368,": "),e.qZA(),e._UZ(369,"app-custom-pre",8),e.TgZ(370,"p")(371,"span",5),e._uU(372,"Lista dei gruppi di un forum:"),e.qZA(),e._uU(373," type forum-groups "),e.qZA(),e.TgZ(374,"p"),e._uU(375," Nel caso in cui si desideri permettere all'utente di scegliere tra i gruppi del forum selezionato, si pu\xf2 usare il tipo "),e.TgZ(376,"code",7),e._uU(377,"forum-groups"),e.qZA(),e._uU(378,": "),e.qZA(),e._UZ(379,"app-custom-pre",8),e.TgZ(380,"p"),e._uU(381," Il campo generato sar\xe0 un select multiplo contenente i vari gruppi del forum. Se nessun forum risulta selezionato, il select sar\xe0 vuoto. Di default vengono mostrati solo i gruppi personalizzati, ossia quei gruppi che possiedono un id, in modo tale da fornire al codice dello script un array numerico di id dei gruppi. Tuttavia, in alcune occasioni pu\xf2 risultare utile permettere di selezionare anche tra i gruppi di default, come "),e.TgZ(382,"em"),e._uU(383,"admin"),e.qZA(),e._uU(384," o "),e.TgZ(385,"em"),e._uU(386,"members"),e.qZA(),e._uU(387,". Tali gruppi, non possedendo un id proprio, saranno presenti nell'array generato come stringhe corrispondenti ai loro nomi, ossia "),e.TgZ(388,"em"),e._uU(389,"admin"),e.qZA(),e._uU(390," o "),e.TgZ(391,"em"),e._uU(392,"members"),e.qZA(),e._uU(393,". Per includere anche i gruppi di default tra le opzioni del select, occorre usare la propriet\xe0 "),e.TgZ(394,"code",7),e._uU(395,"widget"),e.qZA(),e._uU(396,": "),e.qZA(),e._UZ(397,"app-custom-pre",8),e.TgZ(398,"p",10),e._uU(399," Analogamente al campo "),e.TgZ(400,"code",7),e._uU(401,"forum-sections"),e.qZA(),e._uU(402,", se si desidera generare un select singolo, si pu\xf2 usare il "),e.TgZ(403,"code",7),e._uU(404,"widget"),e.qZA(),e._uU(405,". "),e.qZA()(),e.TgZ(406,"div",9)(407,"h6",5),e._uU(408,"Personalizzazione dei campi"),e.qZA(),e.TgZ(409,"p"),e._uU(410," Le istruzioni illustrate nel paragrafo precedente consentono di inserire i campi basilari per generare un form gi\xe0 adeguato a diverse esigenze. Nei casi in cui si desiderino delle impostazioni pi\xf9 avanzate, si pu\xf2 fare riferimento a quanto descritto di seguito, tenendo presente che ogni forma di validazione inserita, trattandosi di controlli frontend, non assicura in alcun modo l'esatta corrispondenza dei dati salvati con i parametri indicati. Risulta quindi essenziale predisporre eventuali ulteriori controlli nel codice dello script. "),e.qZA(),e.TgZ(411,"p",5),e._uU(412,"Valori e lunghezze minime e massime"),e.qZA(),e.TgZ(413,"p"),e._uU(414," Nei campi di tipo "),e.TgZ(415,"code",7),e._uU(416,"string"),e.qZA(),e._uU(417,", "),e.TgZ(418,"code",7),e._uU(419,"number"),e.qZA(),e._uU(420," o "),e.TgZ(421,"code",7),e._uU(422,"array"),e.qZA(),e._uU(423," \xe8 possibile specificare quale condizione affinch\xe9 il form risulti valido che il contenuto di tali campi sia almeno pari a o non pi\xf9 grande di un valore prestabilito. Per il tipo "),e.TgZ(424,"code",7),e._uU(425,"number"),e.qZA(),e._uU(426,", si utilizzano le propriet\xe0 "),e.TgZ(427,"code",7),e._uU(428,"minimum"),e.qZA(),e._uU(429," e "),e.TgZ(430,"code",7),e._uU(431,"maximum"),e.qZA(),e._uU(432,": "),e.qZA(),e._UZ(433,"app-custom-pre",8),e.TgZ(434,"p"),e._uU(435," Analogamente, per il tipo "),e.TgZ(436,"code",7),e._uU(437,"string"),e.qZA(),e._uU(438," si utilizzano le propriet\xe0 "),e.TgZ(439,"code",7),e._uU(440,"minLength"),e.qZA(),e._uU(441," e "),e.TgZ(442,"code",7),e._uU(443,"maxLength"),e.qZA(),e._uU(444,", le quali controllano la lunghezza in caratteri del testo inserito. Infine, nel caso di campo "),e.TgZ(445,"code",7),e._uU(446,"array"),e.qZA(),e._uU(447,", si possono sfruttare le propriet\xe0 "),e.TgZ(448,"code",7),e._uU(449,"minItems"),e.qZA(),e._uU(450," e "),e.TgZ(451,"code",7),e._uU(452,"maxItems"),e.qZA(),e._uU(453," per definire rispettivamente il numero minimo e massimo degli elementi inseribili. "),e.qZA(),e.TgZ(454,"p")(455,"span",5),e._uU(456,"Valore predefinito: propriet\xe0"),e.qZA(),e._uU(457," default "),e.qZA(),e.TgZ(458,"p"),e._uU(459," \xc8 possibile definire un valore predefinito di un campo usando la propriet\xe0 "),e.TgZ(460,"code",7),e._uU(461,"default"),e.qZA(),e._uU(462,": "),e.qZA(),e._UZ(463,"app-custom-pre",8),e.TgZ(464,"p")(465,"span",5),e._uU(466,"Campo richiesto: propriet\xe0"),e.qZA(),e._uU(467," required "),e.qZA(),e.TgZ(468,"p"),e._uU(469," Se un campo deve necessariamente essere compilato con un valore, \xe8 possibile utilizzare la propriet\xe0 "),e.TgZ(470,"code",7),e._uU(471,"required"),e.qZA(),e._uU(472,". Tale propriet\xe0 deve essere aggiunta a un campo di tipo "),e.TgZ(473,"code",7),e._uU(474,"object"),e.qZA(),e._uU(475," ed \xe8 un array di stringhe in cui il singolo elemento \xe8 la chiave attribuita al campo la cui compilazione \xe8 richiesta: "),e.qZA(),e._UZ(476,"app-custom-pre",8),e.TgZ(477,"p"),e._uU(478," I campi richiesti devono sempre avere un valore di default affinch\xe9 lo script possa essere installato prima di venire personalizzato per la prima volta! "),e.qZA(),e.TgZ(479,"p",5),e._uU(480,"Placeholder"),e.qZA(),e.TgZ(481,"p"),e._uU(482," Per inserire un placeholder \xe8 possibile fare riferimento alla propriet\xe0 "),e.TgZ(483,"code",7),e._uU(484,"placeholder"),e.qZA(),e._uU(485,": "),e.qZA(),e._UZ(486,"app-custom-pre",8),e.TgZ(487,"p"),e._uU(488," Nei select, \xe8 possibile differenziare il valore delle opzioni e ci\xf2 che viene mostrato all'utente tramite l'uso di "),e.TgZ(489,"code",7),e._uU(490,"oneOf"),e.qZA(),e._uU(491," al posto di "),e.TgZ(492,"code",7),e._uU(493,"enum"),e.qZA(),e._uU(494,": "),e.qZA(),e._UZ(495,"app-custom-pre",8),e.TgZ(496,"p"),e._uU(497," Nell'esempio, l'utilizzatore visualizzer\xe0 come opzioni i testi contenuti nelle propriet\xe0 "),e.TgZ(498,"code",7),e._uU(499,"title"),e.qZA(),e._uU(500," dell'array "),e.TgZ(501,"code",7),e._uU(502,"oneOf"),e.qZA(),e._uU(503,", mentre nel codice dello script saranno presenti i valori specificati nelle propriet\xe0 "),e.TgZ(504,"code",7),e._uU(505,"const"),e.qZA(),e._uU(506,", ossia dei numeri. La propriet\xe0 "),e.TgZ(507,"code",7),e._uU(508,"oneOf"),e.qZA(),e._uU(509," pu\xf2 essere usata in sostituzione di "),e.TgZ(510,"code",7),e._uU(511,"enum"),e.qZA(),e._uU(512," anche nei multiselect. "),e.qZA(),e.TgZ(513,"p",5),e._uU(514,"Pattern"),e.qZA(),e.TgZ(515,"p"),e._uU(516," \xc8 possibile validare il contenuto di un campo con una RegExp usando la propriet\xe0 "),e.TgZ(517,"code",7),e._uU(518,"pattern"),e.qZA(),e._uU(519,": "),e.qZA(),e._UZ(520,"app-custom-pre",8),e.TgZ(521,"p",5),e._uU(522,"Campo numerico con step predefiniti"),e.qZA(),e.TgZ(523,"p"),e._uU(524," Per i campi numerici, si pu\xf2 fare in modo che il valore inseribile sia un multiplo di un altro valore specificato. In questo caso, occorre riferirsi alla propriet\xe0 "),e.TgZ(525,"code",7),e._uU(526,"multipleOf"),e.qZA(),e._uU(527,": "),e.qZA(),e._UZ(528,"app-custom-pre",8),e.TgZ(529,"p"),e._uU(530," L'esempio precedente predispone un campo numerico il cui valore dovr\xe0 essere almeno pari a 10, non pi\xf9 grande di 100 e multiplo di 10, ossia i valori accettati saranno solo 10, 20, 30, 40, 50, 60, 70, 80, 90 e 100. "),e.qZA(),e.TgZ(531,"p",5),e._uU(532,"Campo nascosto"),e.qZA(),e.TgZ(533,"p"),e._uU(534," Per inserire un campo nascosto occorre usare il "),e.TgZ(535,"code",7),e._uU(536,"widget"),e.qZA(),e._uU(537,": "),e.qZA(),e._UZ(538,"app-custom-pre",8),e.TgZ(539,"p")(540,"span",5),e._uU(541,"Multischema con"),e.qZA(),e._uU(542," oneOf "),e.TgZ(543,"span",5),e._uU(544,"e"),e.qZA(),e._uU(545," anyOf "),e.qZA(),e.TgZ(546,"p"),e._uU(547," In qualche situazione pu\xf2 risultare utile generare dei form differenti dinamicamente, facendo scegliere all'utente qualche schema adottare. Ci\xf2 risulta possibile grazie a un secondo uso di "),e.TgZ(548,"code",7),e._uU(549,"oneOf"),e.qZA(),e._uU(550,", ovvero tramite la propriet\xe0 "),e.TgZ(551,"code",7),e._uU(552,"anyOf"),e.qZA()(),e._UZ(553,"app-custom-pre",8),e.TgZ(554,"p",10),e._uU(555," Nel caso in cui si utilizzi "),e.TgZ(556,"code",7),e._uU(557,"oneOf"),e.qZA(),e._uU(558,", la scelta a disposizione dell'utente sar\xe0 tra uno e un solo schema tra quelli predisposti, al contratio, con "),e.TgZ(559,"code",7),e._uU(560,"anyOf"),e.qZA(),e._uU(561," l'utilizzatore potr\xe0 selezionare anche tutti gli schemi proposti. "),e.qZA()()),2&t){const o=e.oxw();e.xp6(44),e.hij("","{","}"),e.xp6(56),e.Q6J("object",o.examples.webhook.manageScript),e.xp6(17),e.Q6J("object",o.examples.webhook.manageSettings),e.xp6(69),e.Q6J("object",e.VKq(29,we,e.DdM(28,ke))),e.xp6(24),e.Q6J("object",o.examples.stringField),e.xp6(15),e.Q6J("object",e.DdM(31,je)),e.xp6(7),e.Q6J("object",o.examples.numberField),e.xp6(9),e.Q6J("object",o.examples.checkboxField),e.xp6(15),e.Q6J("object",o.examples.textareaField),e.xp6(12),e.Q6J("object",o.examples.selectField),e.xp6(33),e.Q6J("object",o.examples.arrayField),e.xp6(14),e.Q6J("object",o.examples.arrayFieldWithObject),e.xp6(3),e.Q6J("object",e.VKq(39,Pe,e.kEZ(35,Qe,e.DdM(32,Ne),e.DdM(33,Je),e.DdM(34,Le)))),e.xp6(13),e.Q6J("object",o.examples.multiselectField),e.xp6(15),e.Q6J("object",o.examples.radioField),e.xp6(15),e.Q6J("object",o.examples.forumSectionsField),e.xp6(8),e.Q6J("object",o.examples.singleForumSectionsField),e.xp6(10),e.Q6J("object",o.examples.forumGroupsField),e.xp6(18),e.Q6J("object",o.examples.forumAllGroupsField),e.xp6(36),e.Q6J("object",o.customizationExamples.minMax),e.xp6(30),e.Q6J("object",o.customizationExamples.default),e.xp6(13),e.Q6J("object",o.customizationExamples.required),e.xp6(10),e.Q6J("object",o.customizationExamples.placeholder),e.xp6(9),e.Q6J("object",o.customizationExamples.oneOf),e.xp6(25),e.Q6J("object",o.customizationExamples.pattern),e.xp6(8),e.Q6J("object",o.customizationExamples.multipleOf),e.xp6(10),e.Q6J("object",o.customizationExamples.hidden),e.xp6(15),e.Q6J("object",o.customizationExamples.multischema)}}let He=(()=>{var t;class r{constructor(){this.initialized=!1,this.examples=Ie,this.customizationExamples=Oe}ngOnInit(){}open(){this.modalComponent.open()}}return(t=r).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-script-dev-settings-modal"]],viewQuery:function(i,n){if(1&i&&e.Gf(De,5),2&i){let a;e.iGM(a=e.CRH())&&(n.modalComponent=a.first)}},inputs:{initialized:"initialized"},decls:5,vars:2,consts:[["title","Pannello gestione script","size","xl"],["modal",""],["message","Caricamento",4,"ngIf","ngIfElse"],["content",""],["message","Caricamento"],[1,"fst-italic"],[1,"mb-1"],[1,"flat-inline-code"],[3,"object"],[1,"p-block"],[1,"mb-0"]],template:function(i,n){if(1&i&&(e.TgZ(0,"app-modal",0,1),e.YNc(2,Me,1,0,"app-loader",2),e.YNc(3,Re,562,41,"ng-template",null,3,e.W1O),e.qZA()),2&i){const a=e.MAs(4);e.xp6(2),e.Q6J("ngIf",!n.initialized)("ngIfElse",a)}},dependencies:[d.O5,Q.s,w.R,I.z],styles:[".p-block[_ngcontent-%COMP%]:not(:last-of-type){margin-bottom:2rem}.p-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1rem}app-custom-pre[_ngcontent-%COMP%]{display:block;margin:1rem auto}"]}),r})();function Ve(t,r){if(1&t){const o=e.EpF();e.TgZ(0,"app-script-dev-settings-form",7),e.NdJ("tipsEvent",function(){e.CHM(o);const n=e.oxw(),a=e.MAs(7);return e.KtG(n.openTipsModal(a))})("cancelEvent",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.redirect())})("saveEvent",function(n){e.CHM(o);const a=e.oxw();return e.KtG(a.onSave(n))}),e.qZA()}if(2&t){const o=e.oxw();e.Q6J("script",null==o.scriptWithStats?null:o.scriptWithStats.script)("scriptList",o.scriptList)}}function Ge(t,r){if(1&t){const o=e.EpF();e._UZ(0,"app-loader",8),e.TgZ(1,"app-script-form-utilities",9),e.NdJ("tipsEvent",function(){e.CHM(o);const n=e.oxw(),a=e.MAs(7);return e.KtG(n.openTipsModal(a))})("cancelEvent",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.redirect())}),e.qZA()}2&t&&(e.xp6(1),e.Q6J("hasForm",!1))}let P=(()=>{var t;class r{constructor(i,n,a,s,c){this.activatedRoute=i,this.router=n,this.scriptDevService=a,this.scriptListService=s,this.toastService=c,this.breadcrumbUrl=k.B2.SCRIPT_DEV_SETTINGS,this.breadcrumbTitle="",this.loading=!0,this.newScript=!1,this.tipsModalInitialized=!1,this.scriptList=[],this.toastMessage="Lo script <strong>{scriptName}</strong> \xe8 stato {action} correttamente!"}ngOnInit(){var i=this;return(0,u.Z)(function*(){i.scriptId=i.activatedRoute.snapshot.paramMap.get("scriptId")||void 0,i.newScript=i.activatedRoute.snapshot.data.newScript||!1,i.newScript||i.scriptId?(i.newScript?i.breadcrumbTitle="Nuovo script":(i.breadcrumbTitle="Modifica script",yield i.getScriptInfo()),i.scriptList=yield i.scriptListService.getAllScripts(),i.loading=!1):yield i.redirect()})()}getScriptInfo(){var i=this;return(0,u.Z)(function*(){const[n,a]=yield Promise.all([i.scriptListService.getScriptsByPermissions([g.Af.EDIT]),i.scriptDevService.getStats()]),s=n.list.find(m=>m.id===i.scriptId);if(!s)return void(yield i.redirect());const c=a.find(m=>m.scriptId===i.scriptId);i.scriptWithStats={script:s,stats:{users:(null==c?void 0:c.entities.filter(m=>m.targetType===g.D7.USER).map(m=>m.targetId))||[],forums:(null==c?void 0:c.entities.filter(m=>m.targetType===g.D7.FORUM).map(m=>m.targetId))||[]}}})()}redirect(){var i=this;return(0,u.Z)(function*(){yield i.router.navigate([k.B2.SCRIPT_DEV])})()}openTipsModal(i){this.tipsModalInitialized=!0,i.open()}onSave(i){var n=this;return(0,u.Z)(function*(){i?(n.toastService.show({content:n.toastMessage.replace("{scriptName}",i).replace("{action}",n.newScript?"creato":"aggiornato")}),(n.scriptListService.settingsOptions.redirectAfterSaving||n.newScript)&&(yield n.redirect())):n.toastService.advice(f.V.GENERIC)})()}}return(t=r).\u0275fac=function(i){return new(i||t)(e.Y36(p.gz),e.Y36(p.F0),e.Y36(v.N),e.Y36(b.o),e.Y36(C.k))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-script-dev-settings"]],decls:8,vars:7,consts:[[1,"d-block",3,"pageTitle","url"],[1,"wrapper"],["app-script-dev-settings-info","",1,"d-grid","pageinfo-container",3,"isNewScript","scriptWithStats","tipsButtonEvent"],[3,"script","scriptList","tipsEvent","cancelEvent","saveEvent",4,"ngIf","ngIfElse"],["loader",""],[3,"initialized"],["tipsModal",""],[3,"script","scriptList","tipsEvent","cancelEvent","saveEvent"],["message","Caricamento del form"],[3,"hasForm","tipsEvent","cancelEvent"]],template:function(i,n){if(1&i){const a=e.EpF();e._UZ(0,"app-breadcrumb",0),e.TgZ(1,"div",1)(2,"div",2),e.NdJ("tipsButtonEvent",function(){e.CHM(a);const c=e.MAs(7);return e.KtG(n.openTipsModal(c))}),e.qZA(),e.YNc(3,Ve,1,2,"app-script-dev-settings-form",3),e.YNc(4,Ge,2,1,"ng-template",null,4,e.W1O),e.qZA(),e._UZ(6,"app-script-dev-settings-modal",5,6)}if(2&i){const a=e.MAs(5);e.Q6J("pageTitle",n.breadcrumbTitle)("url",n.breadcrumbUrl),e.xp6(2),e.Q6J("isNewScript",n.newScript)("scriptWithStats",n.scriptWithStats),e.xp6(1),e.Q6J("ngIf",!n.loading)("ngIfElse",a),e.xp6(3),e.Q6J("initialized",n.tipsModalInitialized)}},dependencies:[R.L,d.O5,w.R,j.b,Ue,Ce,He],styles:[".pageinfo-container[_ngcontent-%COMP%]{margin-bottom:1rem;row-gap:1rem}@media (min-width: 960px){.pageinfo-container[_ngcontent-%COMP%]{margin-bottom:1.5rem;row-gap:1.5rem}}@media (min-width: 1200px){app-breadcrumb[_ngcontent-%COMP%], .wrapper[_ngcontent-%COMP%]{margin-right:75px}}@media (min-width: 1300px){.pageinfo-container[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);column-gap:1.5rem}}"]}),r})();var Be=l(8934),$e=l(7780),We=l(3038);const Ye=[{path:"",redirectTo:"add",pathMatch:"full"},{matcher:t=>1===t.length&&(0,M.j)(t[0].path)?{consumed:t,posParams:{scriptId:t[0]}}:null,component:P},{path:"add",component:P,data:{newScript:!0}}];let Ke=(()=>{var t;class r{}return(t=r).\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[x.w,d.ez,Z.I,y.b,z,A.u5,F.q,T.z,_.Gs,p.Bz.forChild(Ye),Be.a,$e.M,We.G]}),r})()},9960:(D,U,l)=>{l.d(U,{Bc:()=>d,Lc:()=>y,O9:()=>T,Wf:()=>e,ii:()=>Z});var x=l(3729);const d=/^https:\/\/[^?]+[^?\/]+\.js(\?.+)?$/,Z=/^https?:\/\/[^?]+[^?\/]+\.js(\?.+)?$/,y=/^https:\/\/[^?]+[^?\/]+\.css(\?.+)?$/,T=[{title:"[Open] Font Awesome 4.7.0",link:"https://ffb.forumfree.net:4999/nicoxys/libs/fontawesome-4.7.0.css"},{title:"[Open] Font Awesome 5.7.0",link:"https://ffb.forumfree.net:4999/nicoxys/libs/fontawesome-5.7.0.css"},{title:"[Open] Font Awesome 6.2.1",link:"https://img.forumfree.net/fontawesome/6.2.1/css/all.min.css"},{title:"[Open] Twitter API",link:"https://platform.twitter.com/widgets.js"},{title:"[Open] AngularJS 1.7.7",link:"https://ffb.forumfree.net:4999/nicoxys/libs/angularjs-1.7.7.js"},{title:"[Open] ReactJS (w/ dom) 16.8.2",link:"https://ffb.forumfree.net:4999/nicoxys/libs/reactjs-16.8.2.js"},{title:"[Open] Popper 2.5.2",link:"https://ffb.forumfree.net:4999/nicoxys/libs/popper-2.5.2.js"},{title:"[Open] Tippy 6.2.6",link:"https://ffb.forumfree.net:4999/nicoxys/libs/tippy-6.2.6.js"},{title:"[Open] Vue.js 2.6.6",link:"https://ffb.forumfree.net:4999/nicoxys/libs/vuejs-2.6.6.js"},{title:"[Open] Mustache 3.0.1",link:"https://ffb.forumfree.net:4999/nicoxys/libs/mustache-3.0.1.js"},{title:"[Open] Handlebars 4.7.3",link:"https://ffb.forumfree.net:4999/nicoxys/libs/handlebars-4.7.3.js"},{title:"[Open] Timeago",link:"https://ffb.forumfree.net:4999/nicoxys/libs/jquery.timeago.js"},{title:"[Open] RxJS 6.5.1",link:"https://ffb.forumfree.net:4999/nicoxys/libs/rxjs-6.5.1.js"},{title:"[Open] ChartJs 2.7.2",link:"https://ffb.forumfree.net:4999/nicoxys/libs/chartjs-2.7.2.js"},{title:"[Open] Apollo Client",link:"https://ffb.forumfree.net:4999/nicoxys/libs/apollo-client-2.6.10.js"},{title:"[Private - All] Crediti in fondo al forum",link:"https://ffb.forumfree.net:4999/nicoxys/private/credits.js"},{tab:x.tr.FFB,title:"[Private - FFBoard] HelloBox",link:"https://ffb.forumfree.net:4999/nicoxys/forum/hellobox.js"}],e=[{title:"Codice HTML che sar\xe0 mostrato nel tag HEAD",const:"html_head"},{title:"[Start] Codice HTML che sar\xe0 mostrato in CIMA a tutte le pagine",const:"html_top_start"},{title:"[End] Codice HTML che sar\xe0 mostrato in CIMA a tutte le pagine",const:"html_top_end"},{title:"[Start] Codice HTML che sar\xe0 mostrato in tutte le pagine sotto il logo del sito",const:"html_logo_start"},{title:"[End] Codice HTML che sar\xe0 mostrato in tutte le pagine sotto il logo del sito",const:"html_logo_end"},{title:"[Start] Codice HTML che sar\xe0 mostrato nella homepage del sito",const:"html_home_start"},{title:"[End] Codice HTML che sar\xe0 mostrato nella homepage del sito",const:"html_home_end"},{title:"Codice HTML che sar\xe0 mostrato sopra le pubblicit\xe0",const:"html_ads_start"},{title:"[Start] Codice HTML che sar\xe0 mostrato in FONDO a tutte le pagine",const:"html_bottom_start"},{title:"[End] Codice HTML che sar\xe0 mostrato in FONDO a tutte le pagine",const:"html_bottom_end"}]},4004:(D,U,l)=>{l.d(U,{Z:()=>_});const d={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let Z;const y=new Uint8Array(16);function T(){if(!Z&&(Z=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Z))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Z(y)}const e=[];for(let p=0;p<256;++p)e.push((p+256).toString(16).slice(1));const _=function F(p,u,f){if(d.randomUUID&&!u&&!p)return d.randomUUID();const v=(p=p||{}).random||(p.rng||T)();if(v[6]=15&v[6]|64,v[8]=63&v[8]|128,u){f=f||0;for(let b=0;b<16;++b)u[f+b]=v[b];return u}return function z(p,u=0){return e[p[u+0]]+e[p[u+1]]+e[p[u+2]]+e[p[u+3]]+"-"+e[p[u+4]]+e[p[u+5]]+"-"+e[p[u+6]]+e[p[u+7]]+"-"+e[p[u+8]]+e[p[u+9]]+"-"+e[p[u+10]]+e[p[u+11]]+e[p[u+12]]+e[p[u+13]]+e[p[u+14]]+e[p[u+15]]}(v)}}}]);