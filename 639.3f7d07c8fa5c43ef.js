"use strict";(self.webpackChunkpages=self.webpackChunkpages||[]).push([[639],{9485:(At,K,c)=>{c.d(K,{d:()=>bt});var W=c(5861),Z=c(4464),t=c(7165),R=c(8413),l=c(5879),E=c(6814),tt=c(9473),I=c(4020),G=c(1088),J=c(8247),N=c(3602);function st(p,v){1&p&&l.GkF(0)}function q(p,v){1&p&&l.GkF(0)}const rt=function(p,v,f){return{$implicit:p,sub:v,link:f}};function ot(p,v){if(1&p&&(l.TgZ(0,"li",11),l.YNc(1,q,1,0,"ng-container",6),l.qZA()),2&p){const f=v.$implicit;l.oxw(3);const m=l.MAs(6);l.xp6(1),l.Q6J("ngTemplateOutlet",m)("ngTemplateOutletContext",l.kEZ(2,rt,f.name,f.domain,f.link))}}function U(p,v){if(1&p&&(l.ynx(0),l.YNc(1,ot,2,6,"li",10),l.BQk()),2&p){const f=v.$implicit;l.xp6(1),l.Q6J("ngForOf",f)}}const z=function(p,v){return{$implicit:p,type:"forum",deleted:v}};function ut(p,v){if(1&p&&(l.TgZ(0,"fieldset",5),l.YNc(1,st,1,0,"ng-container",6),l.TgZ(2,"cdk-virtual-scroll-viewport",7)(3,"ul",8),l.YNc(4,U,2,1,"ng-container",9),l.ALo(5,"arrayChunk"),l.qZA()()()),2&p){const f=l.oxw(),m=l.MAs(4);l.xp6(1),l.Q6J("ngTemplateOutlet",m)("ngTemplateOutletContext",l.WLB(7,z,f.forums.length,f.forumsWithDeletedCount-f.forums.length)),l.xp6(1),l.Q6J("itemSize",78),l.xp6(2),l.Q6J("cdkVirtualForOf",l.xi3(5,4,f.forums,f.itemsPerRow))}}function ht(p,v){1&p&&l.GkF(0)}function mt(p,v){1&p&&l.GkF(0)}function k(p,v){if(1&p&&(l.TgZ(0,"li",11),l.YNc(1,mt,1,0,"ng-container",6),l.ALo(2,"titlecase"),l.qZA()),2&p){const f=v.$implicit;l.oxw(3);const m=l.MAs(6);l.xp6(1),l.Q6J("ngTemplateOutlet",m)("ngTemplateOutletContext",l.kEZ(4,rt,f.name,l.lcZ(2,2,f.site)+" id: "+f.id,f.link))}}function ft(p,v){if(1&p&&(l.ynx(0),l.YNc(1,k,3,8,"li",10),l.BQk()),2&p){const f=v.$implicit;l.xp6(1),l.Q6J("ngForOf",f)}}const gt=function(p){return{"mt-3":p}},_t=function(p,v,f){return{$implicit:p,type:v,deleted:f}};function vt(p,v){if(1&p&&(l.TgZ(0,"fieldset",12),l.YNc(1,ht,1,0,"ng-container",6),l.TgZ(2,"cdk-virtual-scroll-viewport",7)(3,"ul",8),l.YNc(4,ft,2,1,"ng-container",9),l.ALo(5,"arrayChunk"),l.qZA()()()),2&p){const f=l.oxw(),m=l.MAs(4);l.Q6J("ngClass",l.VKq(8,gt,f.forums.length>0)),l.xp6(1),l.Q6J("ngTemplateOutlet",m)("ngTemplateOutletContext",l.kEZ(10,_t,f.users.length,"utent"+(1===f.users.length?"e":"i"),f.usersWithDeletedCount-f.users.length)),l.xp6(1),l.Q6J("itemSize",78),l.xp6(2),l.Q6J("cdkVirtualForOf",l.xi3(5,5,f.users,f.itemsPerRow))}}function at(p,v){if(1&p&&(l.TgZ(0,"legend",13)(1,"div",14),l._UZ(2,"div",15)(3,"div",16),l.qZA()()),2&p){const f=v.$implicit,m=v.type,C=v.deleted;l.xp6(2),l.Q6J("innerText",f+" "+m),l.xp6(1),l.Q6J("innerText","("+C+" cancellat"+(1===C?"o":"i")+")")}}function Ct(p,v){if(1&p&&(l.TgZ(0,"a",17),l._UZ(1,"div",18)(2,"div",19),l.qZA()),2&p){const f=v.$implicit,m=v.sub;l.Q6J("href",v.link,l.LSH),l.xp6(1),l.Q6J("innerHTML",f,l.oJD),l.xp6(1),l.Q6J("innerHTML",m,l.oJD)}}const xt=function(p){return{"touch-device":p}},yt=function(p){return{height:p}};let St=(()=>{var p;class v{constructor(m){this.breakpointObserver=m,this.forums=[],this.users=[],this.forumsWithDeletedCount=0,this.usersWithDeletedCount=0,this.touchDevice=I.eX,this.itemsPerRow=1,this.wrapperStyleHeight="",this.breakpoints={W_992_I_1:"(max-width: 991.98px)",W_1200_I_2:"(min-width: 992px) and (max-width: 1199.98px)",W_MAX_I_4:"(min-width:1200px)"},this.itemsPerRowMap=new Map([[this.breakpoints.W_992_I_1,1],[this.breakpoints.W_1200_I_2,2],[this.breakpoints.W_MAX_I_4,4]])}ngOnInit(){this.breakpointObserverSubscription=this.breakpointObserver.observe(Object.values(this.breakpoints)).subscribe(m=>{for(const w of Object.keys(m.breakpoints))if(m.breakpoints[w]){var C;this.itemsPerRow=null!==(C=this.itemsPerRowMap.get(w))&&void 0!==C?C:1;const L=Math.ceil(this.forums.length/this.itemsPerRow),V=Math.ceil(this.users.length/this.itemsPerRow),B=L>0&&V>0,Pt=Math.max(0,78*L-16)+Math.max(0,78*V-16)+35*(B?2:1);this.wrapperStyleHeight=`calc(${Pt}px + ${2+(B?4:1.5)}rem)`}})}ngOnDestroy(){var m;null===(m=this.breakpointObserverSubscription)||void 0===m||m.unsubscribe()}}return(p=v).\u0275fac=function(m){return new(m||p)(l.Y36(G.Yg))},p.\u0275cmp=l.Xpm({type:p,selectors:[["app-details-list"]],inputs:{forums:"forums",users:"users",forumsWithDeletedCount:"forumsWithDeletedCount",usersWithDeletedCount:"usersWithDeletedCount"},decls:7,vars:8,consts:[["cdkVirtualScrollingElement","",1,"wrapper","overflow-auto","mh-100","p-3","w-100",3,"ngClass","ngStyle"],["class","border rounded p-3 pt-2",4,"ngIf"],["class","border rounded p-3 pt-2",3,"ngClass",4,"ngIf"],["legend",""],["listItem",""],[1,"border","rounded","p-3","pt-2"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"v-scroll",3,"itemSize"],[1,"list-unstyled","mb-0"],[4,"cdkVirtualFor","cdkVirtualForOf"],["class","min-w-0 list-item rounded",4,"ngFor","ngForOf"],[1,"min-w-0","list-item","rounded"],[1,"border","rounded","p-3","pt-2",3,"ngClass"],[1,"legend-reset","pb-1","px-2","mb-0","mx-auto"],[1,"d-flex","flex-row","flex-wrap","align-items-center","justify-content-center"],[1,"mx-1","fs-xl",3,"innerText"],[1,"mx-1","fs-reset","lh-1","fst-italic","deleted-items",3,"innerText"],["target","_blank",1,"text-center","d-block","bg-light","border","px-3","py-2","rounded","mw-100",3,"href"],[1,"text-uppercase","text-primary","text-truncate",3,"innerHTML"],[1,"text-muted","fs-xs","text-truncate",3,"innerHTML"]],template:function(m,C){1&m&&(l.TgZ(0,"div",0),l.YNc(1,ut,6,10,"fieldset",1),l.YNc(2,vt,6,14,"fieldset",2),l.qZA(),l.YNc(3,at,4,2,"ng-template",null,3,l.W1O),l.YNc(5,Ct,3,3,"ng-template",null,4,l.W1O)),2&m&&(l.Q6J("ngClass",l.VKq(4,xt,C.touchDevice))("ngStyle",l.VKq(6,yt,C.wrapperStyleHeight)),l.xp6(1),l.Q6J("ngIf",C.forums.length>0),l.xp6(1),l.Q6J("ngIf",C.users.length>0))},dependencies:[E.mk,E.sg,E.O5,E.tP,E.PC,J.xd,J.x0,J.N7,J.j8,N.K,E.rS],styles:["fieldset[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:grid;row-gap:16px}.v-scroll[_ngcontent-%COMP%]{margin-bottom:-16px!important}.v-scroll[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-bottom:16px!important}.wrapper[_ngcontent-%COMP%]:not(.touch-device)   .list-item[_ngcontent-%COMP%]{transition:box-shadow .2s;box-shadow:none}.wrapper[_ngcontent-%COMP%]:not(.touch-device)   .list-item[_ngcontent-%COMP%]:hover{box-shadow:0 .5rem 1rem #00000026}.wrapper[_ngcontent-%COMP%]:not(.touch-device)   .v-scroll[_ngcontent-%COMP%]{margin-left:-1rem!important;margin-right:-1rem!important}.wrapper[_ngcontent-%COMP%]:not(.touch-device)   .v-scroll[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:1rem!important;padding-right:1rem!important}legend[_ngcontent-%COMP%]{height:33px}legend[_ngcontent-%COMP%]   .deleted-items[_ngcontent-%COMP%]{padding-top:.175rem}.list-item[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{height:62px}@media (min-width: 576px){fieldset[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(250px,1fr));column-gap:16px}}"]}),v})();const Tt=["modal"];function Mt(p,v){1&p&&l._UZ(0,"app-loader",7)}function Ot(p,v){if(1&p&&(l.ynx(0),l._UZ(1,"app-details-list",8),l.BQk()),2&p){const f=l.oxw(3);l.xp6(1),l.Q6J("forums",f.forums)("users",f.users)("forumsWithDeletedCount",f.scriptWithStats.stats.forums.length)("usersWithDeletedCount",f.scriptWithStats.stats.users.length)}}function Dt(p,v){if(1&p&&l.YNc(0,Ot,2,4,"ng-container",2),2&p){const f=l.oxw(2);l.Q6J("ngIf",f.scriptWithStats)}}function It(p,v){if(1&p&&(l.ynx(0),l.YNc(1,Mt,1,0,"app-loader",5),l.YNc(2,Dt,1,1,"ng-template",null,6,l.W1O),l.BQk()),2&p){const f=l.MAs(3),m=l.oxw();l.xp6(1),l.Q6J("ngIf",m.loading)("ngIfElse",f)}}const Lt=function(){return["d-flex","p-0"]};let bt=(()=>{var p;class v{constructor(m){this.scriptDevService=m,this.opened=!1,this.modalTitle="",this.loading=!0,this.users=[],this.forums=[],this.forumsAndUsersCount=0}ngOnInit(){var m=this;return(0,W.Z)(function*(){yield m.setData(),m.loading=!1})()}ngOnChanges(m){var C=this;return(0,W.Z)(function*(){var w;m.scriptWithStats&&!m.scriptWithStats.firstChange&&(C.loading=!0,C.forums=[],C.users=[],C.forumsAndUsersCount=0,C.modalTitle=`Dettagli dello script <em>${(null===(w=C.scriptWithStats)||void 0===w?void 0:w.script.name)||""}</em>`,yield C.setData(),C.loading=!1)})()}open(){this.opened=!0,this.modalComponentRef.open()}onHidden(){this.opened=!1}setData(){var m=this;return(0,W.Z)(function*(){if(!m.scriptWithStats)return;m.forumsAndUsersCount=m.scriptWithStats.stats.forums.length+m.scriptWithStats.stats.users.length;const[C,w]=yield m.scriptDevService.getScriptStatsDetails(m.scriptWithStats.stats);m.forums=w.sort((L,V)=>L.domain.localeCompare(V.domain)).map(L=>({domain:L.domain,link:`https://${L.domain}`,name:L.domain.split(".")[0]})),m.users=C.sort((L,V)=>L.nickname.localeCompare(V.nickname)).map(L=>{const V=L.uid.substring(0,2),B=L.uid.substring(2);return{name:L.nickname,id:B,site:t.AW[V].split(".")[0],link:`${t.hD[V]}/?act=Profile&MID=${B}`}})})()}}return(p=v).\u0275fac=function(m){return new(m||p)(l.Y36(R.N))},p.\u0275cmp=l.Xpm({type:p,selectors:[["app-script-dev-stats-details"]],viewQuery:function(m,C){if(1&m&&l.Gf(Tt,5),2&m){let w;l.iGM(w=l.CRH())&&(C.modalComponentRef=w.first)}},inputs:{scriptWithStats:"scriptWithStats"},features:[l.TTD],decls:5,vars:5,consts:[["size","xl",3,"title","bodyClass","hidden"],["modal",""],[4,"ngIf"],["footer",""],[1,"me-auto",3,"innerHTML"],["message","Recupero dei dettagli","class","d-flex align-items-center justify-content-center w-100 p-3",4,"ngIf","ngIfElse"],["details",""],["message","Recupero dei dettagli",1,"d-flex","align-items-center","justify-content-center","w-100","p-3"],[1,"d-block","w-100",3,"forums","users","forumsWithDeletedCount","usersWithDeletedCount"]],template:function(m,C){1&m&&(l.TgZ(0,"app-modal",0,1),l.NdJ("hidden",function(){return C.onHidden()}),l.YNc(2,It,4,2,"ng-container",2),l.ynx(3,3),l._UZ(4,"div",4),l.BQk(),l.qZA()),2&m&&(l.Q6J("title",C.modalTitle)("bodyClass",l.DdM(4,Lt)),l.xp6(2),l.Q6J("ngIf",C.opened),l.xp6(2),l.Q6J("innerHTML",C.forumsAndUsersCount+" "+(1===C.forumsAndUsersCount?"installazione totale":"installazioni totali"),l.oJD))},dependencies:[E.O5,tt.R,Z.z,St]}),v})()},8934:(At,K,c)=>{c.d(K,{a:()=>tt});var W=c(3746),Z=c(6814),t=c(7905),R=c(4610),l=c(8247),E=c(5879);let tt=(()=>{var I;class G{}return(I=G).\u0275fac=function(N){return new(N||I)},I.\u0275mod=E.oAB({type:I}),I.\u0275inj=E.cJS({imports:[W.P,Z.ez,t.q,R.z,l.Cl]}),G})()},3639:(At,K,c)=>{c.r(K),c.d(K,{ScriptDevModule:()=>Re});var W=c(9090),Z=c(6814),t=c(5879),R=function(){return R=Object.assign||function(o){for(var n,s=1,i=arguments.length;s<i;s++)for(var e in n=arguments[s])Object.prototype.hasOwnProperty.call(n,e)&&(o[e]=n[e]);return o},R.apply(this,arguments)},l=function(){function o(n,s,i){var e=this;this.endVal=s,this.options=i,this.version="2.8.0",this.defaults={startVal:0,decimalPlaces:0,duration:2,useEasing:!0,useGrouping:!0,useIndianSeparators:!1,smartEasingThreshold:999,smartEasingAmount:333,separator:",",decimal:".",prefix:"",suffix:"",enableScrollSpy:!1,scrollSpyDelay:200,scrollSpyOnce:!1},this.finalEndVal=null,this.useEasing=!0,this.countDown=!1,this.error="",this.startVal=0,this.paused=!0,this.once=!1,this.count=function(r){e.startTime||(e.startTime=r);var a=r-e.startTime;e.remaining=e.duration-a,e.frameVal=e.useEasing?e.countDown?e.startVal-e.easingFn(a,0,e.startVal-e.endVal,e.duration):e.easingFn(a,e.startVal,e.endVal-e.startVal,e.duration):e.startVal+a/e.duration*(e.endVal-e.startVal),e.frameVal=(e.countDown?e.frameVal<e.endVal:e.frameVal>e.endVal)?e.endVal:e.frameVal,e.frameVal=Number(e.frameVal.toFixed(e.options.decimalPlaces)),e.printValue(e.frameVal),a<e.duration?e.rAF=requestAnimationFrame(e.count):null!==e.finalEndVal?e.update(e.finalEndVal):e.options.onCompleteCallback&&e.options.onCompleteCallback()},this.formatNumber=function(r){var a,u,h,g,_=r<0?"-":"";a=Math.abs(r).toFixed(e.options.decimalPlaces);var d=(a+="").split(".");if(u=d[0],h=d.length>1?e.options.decimal+d[1]:"",e.options.useGrouping){g="";for(var x=3,T=0,S=0,O=u.length;S<O;++S)e.options.useIndianSeparators&&4===S&&(x=2,T=1),0!==S&&T%x==0&&(g=e.options.separator+g),T++,g=u[O-S-1]+g;u=g}return e.options.numerals&&e.options.numerals.length&&(u=u.replace(/[0-9]/g,function(y){return e.options.numerals[+y]}),h=h.replace(/[0-9]/g,function(y){return e.options.numerals[+y]})),_+e.options.prefix+u+h+e.options.suffix},this.easeOutExpo=function(r,a,u,h){return u*(1-Math.pow(2,-10*r/h))*1024/1023+a},this.options=R(R({},this.defaults),i),this.formattingFn=this.options.formattingFn?this.options.formattingFn:this.formatNumber,this.easingFn=this.options.easingFn?this.options.easingFn:this.easeOutExpo,this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.endVal=this.validateValue(s),this.options.decimalPlaces=Math.max(this.options.decimalPlaces),this.resetDuration(),this.options.separator=String(this.options.separator),this.useEasing=this.options.useEasing,""===this.options.separator&&(this.options.useGrouping=!1),this.el="string"==typeof n?document.getElementById(n):n,this.el?this.printValue(this.startVal):this.error="[CountUp] target is null or undefined",typeof window<"u"&&this.options.enableScrollSpy&&(this.error?console.error(this.error,n):(window.onScrollFns=window.onScrollFns||[],window.onScrollFns.push(function(){return e.handleScroll(e)}),window.onscroll=function(){window.onScrollFns.forEach(function(r){return r()})},this.handleScroll(this)))}return o.prototype.handleScroll=function(n){if(n&&window&&!n.once){var s=window.innerHeight+window.scrollY,i=n.el.getBoundingClientRect(),e=i.top+window.pageYOffset,r=i.top+i.height+window.pageYOffset;r<s&&r>window.scrollY&&n.paused?(n.paused=!1,setTimeout(function(){return n.start()},n.options.scrollSpyDelay),n.options.scrollSpyOnce&&(n.once=!0)):(window.scrollY>r||e>s)&&!n.paused&&n.reset()}},o.prototype.determineDirectionAndSmartEasing=function(){var n=this.finalEndVal?this.finalEndVal:this.endVal;this.countDown=this.startVal>n,Math.abs(n-this.startVal)>this.options.smartEasingThreshold&&this.options.useEasing?(this.finalEndVal=n,this.endVal=n+(this.countDown?1:-1)*this.options.smartEasingAmount,this.duration=this.duration/2):(this.endVal=n,this.finalEndVal=null),this.useEasing=null===this.finalEndVal&&this.options.useEasing},o.prototype.start=function(n){this.error||(this.options.onStartCallback&&this.options.onStartCallback(),n&&(this.options.onCompleteCallback=n),this.duration>0?(this.determineDirectionAndSmartEasing(),this.paused=!1,this.rAF=requestAnimationFrame(this.count)):this.printValue(this.endVal))},o.prototype.pauseResume=function(){this.paused?(this.startTime=null,this.duration=this.remaining,this.startVal=this.frameVal,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count)):cancelAnimationFrame(this.rAF),this.paused=!this.paused},o.prototype.reset=function(){cancelAnimationFrame(this.rAF),this.paused=!0,this.resetDuration(),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.printValue(this.startVal)},o.prototype.update=function(n){cancelAnimationFrame(this.rAF),this.startTime=null,this.endVal=this.validateValue(n),this.endVal!==this.frameVal&&(this.startVal=this.frameVal,null==this.finalEndVal&&this.resetDuration(),this.finalEndVal=null,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count))},o.prototype.printValue=function(n){var s;if(this.el){var i=this.formattingFn(n);null!==(s=this.options.plugin)&&void 0!==s&&s.render?this.options.plugin.render(this.el,i):"INPUT"===this.el.tagName?this.el.value=i:"text"===this.el.tagName||"tspan"===this.el.tagName?this.el.textContent=i:this.el.innerHTML=i}},o.prototype.ensureNumber=function(n){return"number"==typeof n&&!isNaN(n)},o.prototype.validateValue=function(n){var s=Number(n);return this.ensureNumber(s)?s:(this.error="[CountUp] invalid start or end value: ".concat(n),null)},o.prototype.resetDuration=function(){this.startTime=null,this.duration=1e3*Number(this.options.duration),this.remaining=this.duration},o}();let E=(()=>{class o{constructor(s,i,e){this.el=s,this.zone=i,this.platformId=e,this.options={},this.reanimateOnClick=!0,this.complete=new t.vpe}onClick(){this.reanimateOnClick&&this.animate()}ngOnChanges(s){if(!(0,Z.NF)(this.platformId))return;const{options:i,endVal:e}=s;void 0!==(null==e?void 0:e.currentValue)?void 0!==this.countUp?this.zone.runOutsideAngular(()=>{this.countUp.update(this.endVal)}):this.initAndRun():void 0!==(null==i?void 0:i.currentValue)&&this.initAndRun()}animate(){this.zone.runOutsideAngular(()=>{this.countUp.reset(),this.countUp.start(()=>{this.zone.run(()=>{this.complete.emit()})})})}initAndRun(){this.zone.runOutsideAngular(()=>{this.countUp=new l(this.el.nativeElement,this.endVal,this.options),this.options.enableScrollSpy||this.animate()})}}return o.\u0275fac=function(s){return new(s||o)(t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(t.Lbi))},o.\u0275dir=t.lG2({type:o,selectors:[["","countUp",""]],hostBindings:function(s,i){1&s&&t.NdJ("click",function(){return i.onClick()})},inputs:{endVal:["countUp","endVal"],options:"options",reanimateOnClick:"reanimateOnClick"},outputs:{complete:"complete"},features:[t.TTD]}),o})(),tt=(()=>{class o{}return o.\u0275fac=function(s){return new(s||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[]]}),o})();var I=c(6223),G=c(7905),J=c(4610),N=c(3946),st=c(4618),q=c(8109),rt=c(9537),ot=c(1413),U=c(5861),z=c(1088),ut=c(1410),ht=c(8413),mt=c(9121),k=c(3729),ft=c(5245),gt=c(3285),_t=c(2438),vt=c(3620),at=c(7165);const Ct=["app-script-dev-info",""];function xt(o,n){if(1&o){const s=t.EpF();t.TgZ(0,"div",17),t.NdJ("chartInit",function(e){t.CHM(s);const r=t.oxw(2);return t.KtG(r.onChartInit(e))}),t.qZA()}if(2&o){const s=t.oxw(2);t.Q6J("options",s.chartOptions)("autoResize",!1)}}function yt(o,n){if(1&o&&(t.TgZ(0,"div",12)(1,"div",13),t._uU(2," settings "),t.qZA(),t.TgZ(3,"div",14),t._uU(4,"Migliori script per utilizzo"),t.qZA(),t.TgZ(5,"div",15),t.YNc(6,xt,1,2,"div",16),t.qZA()()),2&o){const s=t.oxw();t.xp6(6),t.Q6J("ngIf",s.showChart)}}function St(o,n){1&o&&(t.TgZ(0,"span"),t._uU(1,"Cliccando sul numero di installazioni, viene visualizzato un modal contenente i dettagli di tutti i siti e gli account che utilizzano lo script. Le tre icone finali consentono rispettivamente di cancellare la cache, aggiornare le impostazioni e rimuovere definitivamente lo script. "),t.qZA())}function Tt(o,n){if(1&o&&t._UZ(0,"option",22),2&o){const s=n.$implicit;t.Q6J("ngValue",s.scriptId)("innerText",s.name)}}function Mt(o,n){if(1&o){const s=t.EpF();t.TgZ(0,"div")(1,"small",18),t._uU(2," Oltre agli script creati, \xe8 possibile modificare uno script selezionandolo dal seguente elenco: "),t.qZA(),t.TgZ(3,"select",19),t.NdJ("ngModelChange",function(e){t.CHM(s);const r=t.oxw();return t.KtG(r.additionalScriptSelected=e)})("change",function(){t.CHM(s);const e=t.oxw();return t.KtG(e.goToSettings())}),t._UZ(4,"option",20),t.YNc(5,Tt,1,2,"option",21),t.qZA()()}if(2&o){const s=t.oxw();t.xp6(3),t.Q6J("ngModel",s.additionalScriptSelected),t.xp6(1),t.Q6J("ngValue",0),t.xp6(1),t.Q6J("ngForOf",s.additionalScriptsToManage)}}function Ot(o,n){if(1&o){const s=t.EpF();t.TgZ(0,"div",23),t.NdJ("click",function(){t.CHM(s);const e=t.oxw();return e.filterModel="",t.KtG(e.filterKeyup())}),t._uU(1," clear "),t.qZA()}}const Dt=function(o){return{"d-none d-sm-block":o}},It=function(o){return{"mb-0":o}},Lt=function(){return["settings/add"]};let bt=(()=>{var o;class n{constructor(i,e){this.router=i,this.ngZone=e,this.scriptWithStats=[],this.scriptPermissions={},this.scriptList=[],this.smallScreen=!0,this.loading=!0,this.filterEvent=new t.vpe,this.additionalScriptsToManage=[],this.additionalScriptSelected=0,this.filterModel="",this.showChart=!1,this.chartOptions={grid:{top:30,bottom:30,right:"2%",left:"5%"},xAxis:{type:"category",data:[],show:!1},yAxis:{type:"value",minInterval:50},tooltip:{show:!0,trigger:"axis",axisPointer:{type:"none"},borderWidth:1,borderColor:"var(--bs-border-color)",textStyle:{color:"inherit"}},series:{data:[],name:"Installazioni",type:"bar",label:{position:"inside",show:!0},color:"rgba(72, 100, 254, 0.85)",emphasis:{itemStyle:{color:"rgba(114,138,255,0.85)"}},itemStyle:{borderRadius:[7,7,0,0]}}},this.filterEmitted=""}ngOnInit(){var i=this;return(0,U.Z)(function*(){i.loading||(yield i.setData())})()}ngOnChanges(i){var e=this;return(0,U.Z)(function*(){i.loading&&!i.loading.firstChange&&!i.loading.currentValue&&(yield e.setData())})()}setData(){var i=this;return(0,U.Z)(function*(){if(i.additionalScriptsToManage=[],i.showChart=!1,i.scriptWithStats.length>0){let e=[];Object.values(i.scriptPermissions).forEach(r=>{if(r.manage&&i.scriptWithStats.findIndex(a=>a.script.scriptId===r.scriptId)<0){const a=i.scriptList.find(u=>u.scriptId===r.scriptId);a&&e.push(a)}}),i.additionalScriptsToManage=e.sort((r,a)=>r.name>a.name?1:a.name>r.name?-1:0)}i.createChartData(),i.showChart=!0,i.setResizeChartEvent()})()}createChartData(){const i=this.scriptWithStats.slice(0).sort((e,r)=>r.stats.entities.length-e.stats.entities.length).slice(0,10);this.chartOptions.series.data=i.map(e=>e.stats.entities.length),this.chartOptions.xAxis.data=i.map(e=>e.script.name)}onChartInit(i){this.echartsInstance=i}setResizeChartEvent(){this.ngZone.runOutsideAngular(()=>{this.resizeWindowEventSubscription=(0,_t.R)(window,"resize").pipe((0,vt.b)(200)).subscribe(()=>{this.echartsInstance&&!this.echartsInstance.isDisposed()&&this.echartsInstance.resize()})})}goToSettings(){var i=this;return(0,U.Z)(function*(){yield i.router.navigate([at.B2.SCRIPT_DEV_SETTINGS,i.additionalScriptSelected])})()}filterKeyup(){const i=this.filterModel.trim();i!==this.filterEmitted&&(this.filterEmitted=i,this.filterEvent.emit(this.filterEmitted))}ngOnDestroy(){var i;null===(i=this.resizeWindowEventSubscription)||void 0===i||i.unsubscribe()}}return(o=n).\u0275fac=function(i){return new(i||o)(t.Y36(q.F0),t.Y36(t.R0b))},o.\u0275cmp=t.Xpm({type:o,selectors:[["","app-script-dev-info",""]],inputs:{scriptWithStats:"scriptWithStats",scriptPermissions:"scriptPermissions",scriptList:"scriptList",smallScreen:"smallScreen",loading:"loading"},outputs:{filterEvent:"filterEvent"},features:[t.TTD],attrs:Ct,decls:21,vars:13,consts:[["class","flat-container px-3 pt-3 position-relative d-flex flex-column overflow-hidden",4,"ngIf"],[1,"flat-container","px-3","px-md-4","py-3","tips",3,"ngClass"],[1,"text-justify","d-none","d-sm-block",3,"ngClass"],[4,"ngIf"],[1,"d-flex","utilities"],[1,"input-group","position-relative"],[1,"input-group-text"],["for","custom-filter",1,"d-block","material-icons-outlined","text-muted","cursor-pointer"],["class","material-icons d-block icon-small text-danger position-absolute reset-custom-filter cursor-pointer",3,"click",4,"ngIf"],["type","text","placeholder","Filtra...","id","custom-filter",1,"form-control",3,"ngModel","ngModelChange","keyup"],[1,"d-block","new-script","btn","btn-primary","flex-shrink-0",3,"routerLink"],[1,"d-none","d-sm-inline"],[1,"flat-container","px-3","pt-3","position-relative","d-flex","flex-column","overflow-hidden"],[1,"material-icons","chart-icon","d-block","position-absolute"],[1,"mb-0","h5"],[1,"position-relative","flex-grow-1","chart-container"],["echarts","","class","d-block h-100",3,"options","autoResize","chartInit",4,"ngIf"],["echarts","",1,"d-block","h-100",3,"options","autoResize","chartInit"],[1,"d-block","mb-2","text-justify"],[1,"form-select","form-select-sm","mb-0",3,"ngModel","ngModelChange","change"],["selected","",3,"ngValue"],[3,"ngValue","innerText",4,"ngFor","ngForOf"],[3,"ngValue","innerText"],[1,"material-icons","d-block","icon-small","text-danger","position-absolute","reset-custom-filter","cursor-pointer",3,"click"]],template:function(i,e){1&i&&(t.YNc(0,yt,7,1,"div",0),t.TgZ(1,"div")(2,"div",1)(3,"p",2),t._uU(4," Tramite questo pannello \xe8 possibile gestire e visualizzare le statistiche dei "),t.TgZ(5,"em"),t._uU(6,"propri script"),t.qZA(),t._uU(7,". La tabella con l'elenco dei propri script fornisce le principali informazioni su ogni script inserito. "),t.YNc(8,St,2,0,"span",3),t.qZA(),t.YNc(9,Mt,6,3,"div",3),t.qZA(),t.TgZ(10,"div",4)(11,"div",5)(12,"div",6)(13,"label",7),t._uU(14,"filter_alt"),t.qZA()(),t.YNc(15,Ot,2,0,"div",8),t.TgZ(16,"input",9),t.NdJ("ngModelChange",function(a){return e.filterModel=a})("keyup",function(){return e.filterKeyup()}),t.qZA()(),t.TgZ(17,"a",10),t._uU(18," Nuovo "),t.TgZ(19,"span",11),t._uU(20,"script"),t.qZA()()()()),2&i&&(t.Q6J("ngIf",!e.smallScreen),t.xp6(2),t.Q6J("ngClass",t.VKq(8,Dt,0===e.additionalScriptsToManage.length)),t.xp6(1),t.Q6J("ngClass",t.VKq(10,It,0===e.additionalScriptsToManage.length)),t.xp6(5),t.Q6J("ngIf",0===e.additionalScriptsToManage.length),t.xp6(1),t.Q6J("ngIf",e.additionalScriptsToManage.length>0),t.xp6(6),t.Q6J("ngIf",e.filterModel.trim().length>0),t.xp6(1),t.Q6J("ngModel",e.filterModel),t.xp6(1),t.Q6J("routerLink",t.DdM(12,Lt)))},dependencies:[Z.mk,Z.sg,Z.O5,I.YN,I.Kr,I.Fj,I.EJ,I.JJ,I.On,st._w,q.rH],styles:["#custom-filter[_ngcontent-%COMP%]{padding-right:calc(.5rem + 26px)}.reset-custom-filter[_ngcontent-%COMP%]{top:calc(50% - 10px);right:5px;z-index:6}.chart-container[_ngcontent-%COMP%]{min-height:150px}.chart-icon[_ngcontent-%COMP%]{right:0;top:0;transform:translate(40%,-40%) rotate(46deg);font-size:8rem;opacity:.2;animation:_ngcontent-%COMP%_chart-icon-animation 1s 1}@keyframes _ngcontent-%COMP%_chart-icon-animation{0%{transform:translate(40%,-40%) rotate(46deg)}to{transform:translate(40%,-40%) rotate(406deg)}}.tips[_ngcontent-%COMP%]{margin-bottom:1rem}.utilities[_ngcontent-%COMP%]{margin:0 1rem}.utilities[_ngcontent-%COMP%]   .new-script[_ngcontent-%COMP%]{margin-left:1rem}.utilities[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%], .utilities[_ngcontent-%COMP%]   .new-script[_ngcontent-%COMP%]{box-shadow:0 .125rem .25rem #00000013}@media (min-width: 768px){.utilities[_ngcontent-%COMP%]{margin:0}}@media (min-width: 960px){.tips[_ngcontent-%COMP%]{margin-bottom:1.5rem}.utilities[_ngcontent-%COMP%]   .new-script[_ngcontent-%COMP%]{margin-left:1.5rem}}"]}),n})();var p=c(1378),v=c(4020),f=c(8055),m=c(6988),C=c(9485),w=c(5661),L=c(9473),V=c(8595);const B=["cacheModal"],Pt=["installationModal"],Nt=["deletionModal"],Ft=["app-script-dev-list",""];function Qt(o,n){1&o&&(t.TgZ(0,"li",18),t._UZ(1,"app-loader",19),t.qZA())}function Wt(o,n){1&o&&(t.TgZ(0,"li",22)(1,"div",23),t._uU(2," Nessuno script trovato! "),t.qZA()())}function zt(o,n){if(1&o&&t._UZ(0,"div",46),2&o){const s=n.$implicit;t.Q6J("ngClass",s?"text-success":"text-danger")("innerText",s?"assignment_turned_in":"highlight_off")}}function Bt(o,n){1&o&&t._UZ(0,"div",47),2&o&&t.Q6J("innerText","Forum")}const Yt=function(o){return{"mt-2":o}};function Ht(o,n){if(1&o&&t._UZ(0,"div",48),2&o){const s=t.oxw().$implicit,i=t.oxw(3);t.Q6J("ngClass",t.VKq(2,Yt,s.script.type===i.scriptType.ALL))("innerText","Utenti")}}function Kt(o,n){1&o&&t.GkF(0)}const Gt=function(o){return{"border-bottom":o}},qt=function(o){return{focus:o}},$t=function(o,n){return[o,n]},jt=function(o,n){return{"cursor-pointer":o,"text-reset":n}},Xt=function(o){return{"cache-pending":o}},te=function(o){return{placement:o}},ee=function(o,n,s){return{$implicit:o,f:n,scriptId:s}},ie=function(o){return{"del-pending":o}},ne=function(){return[10,10]},se=function(o,n){return{placement:o,offset:n}},Et=function(o){return["settings",o]};function re(o,n){if(1&o){const s=t.EpF();t.TgZ(0,"li",25),t._UZ(1,"div",26),t.TgZ(2,"div",27),t._UZ(3,"a",28)(4,"div",29),t.qZA(),t._UZ(5,"div",30),t.YNc(6,zt,1,2,"div",31),t.TgZ(7,"div",32),t.YNc(8,Bt,1,1,"div",33),t.YNc(9,Ht,1,4,"div",34),t.qZA(),t.TgZ(10,"a",35),t.NdJ("click",function(){const r=t.CHM(s).$implicit,a=t.oxw(3);return t.KtG(a.installationNumberClick(r))}),t.qZA(),t.TgZ(11,"div")(12,"div",36)(13,"a",37),t.NdJ("click",function(){const r=t.CHM(s).$implicit,a=t.oxw(3);return t.KtG(a.cacheIconClick(r))}),t._uU(14,"sync"),t.qZA(),t.YNc(15,Kt,1,0,"ng-container",38),t.TgZ(16,"a",39),t.NdJ("click",function(){const r=t.CHM(s).$implicit,a=t.oxw(3);return t.KtG(a.deleteScript(r))}),t._uU(17,"delete "),t.qZA()(),t.TgZ(18,"div",40)(19,"div",41),t._uU(20," more_vert "),t.qZA(),t.TgZ(21,"div",42)(22,"a",43),t.NdJ("click",function(){const r=t.CHM(s).$implicit,a=t.oxw(3);return t.KtG(a.installationNumberClick(r))}),t.TgZ(23,"div",44),t._uU(24," poll "),t.qZA(),t.TgZ(25,"div"),t._uU(26,"Installazioni"),t.qZA()(),t.TgZ(27,"a",43),t.NdJ("click",function(){const r=t.CHM(s).$implicit,a=t.oxw(3);return t.KtG(a.cacheIconClick(r))}),t.TgZ(28,"div",44),t._uU(29," sync "),t.qZA(),t.TgZ(30,"div"),t._uU(31,"Aggiorna cache"),t.qZA()(),t.TgZ(32,"a",45)(33,"div",44),t._uU(34," settings "),t.qZA(),t.TgZ(35,"div"),t._uU(36,"Impostazioni"),t.qZA()(),t.TgZ(37,"a",43),t.NdJ("click",function(){const r=t.CHM(s).$implicit,a=t.oxw(3);return t.KtG(a.deleteScript(r))}),t.TgZ(38,"div",44),t._uU(39," delete "),t.qZA(),t.TgZ(40,"div"),t._uU(41,"Cancella script"),t.qZA()()()()()()}if(2&o){const s=n.$implicit,i=n.first,e=n.last,r=t.oxw(3),a=t.MAs(23);t.Q6J("ngClass",t.VKq(23,Gt,!e)),t.xp6(1),t.Q6J("innerText",s.script.scriptId),t.xp6(2),t.Q6J("routerLink",s.script.type===r.scriptType.USER||s.script.type===r.scriptType.ALL?r.paths.SCRIPT_USER:r.paths.SCRIPT_FORUM)("queryParams",t.VKq(25,qt,s.script.scriptId))("innerText",s.script.name),t.xp6(1),t.Q6J("innerText",s.script.description||"Nessuna descrizione"),t.xp6(1),t.Q6J("ngClass",s.script.hidden?"badge-red":"badge-green")("innerText",s.script.hidden?"Privato":"Pubblico"),t.xp6(1),t.Q6J("ngForOf",t.WLB(27,$t,s.script.faqLink,s.script.preview)),t.xp6(2),t.Q6J("ngIf",s.script.type===r.scriptType.FORUM||s.script.type===r.scriptType.ALL),t.xp6(1),t.Q6J("ngIf",s.script.type===r.scriptType.USER||s.script.type===r.scriptType.ALL),t.xp6(1),t.Q6J("ngClass",t.WLB(30,jt,s.stats.entities.length>0,0===s.stats.entities.length))("innerText",s.stats.entities.length),t.xp6(3),t.Q6J("ngClass",t.VKq(33,Xt,r.cachePendingId===s.script.scriptId))("tippyProps",t.VKq(35,te,i?"bottom":"top"))("disableOnTouchDevice",!0),t.xp6(2),t.Q6J("ngTemplateOutlet",a)("ngTemplateOutletContext",t.kEZ(37,ee,!(s.script.hidden||s.script.description.length&&s.script.preview&&s.script.faqLink),i,s.script.scriptId)),t.xp6(1),t.Q6J("ngClass",t.VKq(41,ie,r.deletionPending))("tippyProps",t.WLB(44,se,i?"bottom-end":"top-end",t.DdM(43,ne)))("disableOnTouchDevice",!0)("disableInstance",r.deletionPending),t.xp6(16),t.Q6J("routerLink",t.VKq(47,Et,s.script.scriptId))}}function oe(o,n){if(1&o&&t.YNc(0,re,42,49,"li",24),2&o){const s=t.oxw(2);t.Q6J("ngForOf",s.scriptWithStats)}}function ae(o,n){if(1&o&&(t.YNc(0,Wt,3,0,"li",20),t.YNc(1,oe,1,1,"ng-template",null,21,t.W1O)),2&o){const s=t.MAs(2),i=t.oxw();t.Q6J("ngIf",0===i.scriptWithStats.length)("ngIfElse",s)}}const le=function(o){return{"edit-required text-danger":o}},ce=function(){return[42,10]},pe=function(o,n,s){return{placement:o,offset:n,theme:s}};function de(o,n){if(1&o&&(t.TgZ(0,"a",49)(1,"div",50),t._uU(2,"settings"),t.qZA()()),2&o){const s=n.$implicit,i=n.f,e=n.scriptId,r=t.oxw();t.Q6J("routerLink",t.VKq(5,Et,e))("ngClass",t.VKq(7,le,s))("appTippy",s?r.tippySettingsAlertMessage:r.tippySettingsMessage)("tippyProps",t.kEZ(10,pe,i?"bottom-end":"top-end",t.DdM(9,ce),s?"popover":""))("disableOnTouchDevice",!0)}}const ue=function(o){return{"touch-device":o}};let he=(()=>{var o;class n{constructor(i){this.toastService=i,this.scriptWithStats=[],this.loading=!0,this.deletionScriptEvent=new t.vpe,this.scriptType=k.AV,this.isTouch=v.eX,this.paths=at.B2,this.tippySettingsAlertMessage="La descrizione, l'anteprima e la guida sono essenziali per comprendere il corretto funzionamento dello script e per metterlo in evidenza agli utenti. Clicca sull'icona per modificare le impostazioni dello script e accertati di aver inserito questi elementi!",this.tippySettingsMessage="Modifica le impostazioni",this.sortOption="title",this.sortValue=1,this.currentCacheScript={id:"0",name:""},this.currentDeletionScript={id:"0",name:""},this.deletionPending=!1,this.compareFns={title:(e,r,a)=>a*e.script.name.localeCompare(r.script.name),installations:(e,r,a)=>a*(e.stats.entities.length>r.stats.entities.length?1:-1),status:(e,r,a)=>a*(e.script.hidden&&!r.script.hidden?1:!e.script.hidden&&r.script.hidden?-1:0),guide:(e,r,a)=>a*(e.script.faqLink&&!r.script.faqLink?-1:!e.script.faqLink&&r.script.faqLink?1:0),preview:(e,r,a)=>a*(e.script.preview&&!r.script.preview?-1:!e.script.preview&&r.script.preview?1:0),type:(e,r,a)=>a*([k.AV.FORUM,k.AV.USER].includes(e.script.type)&&![k.AV.FORUM,k.AV.USER].includes(r.script.type)?-1:![k.AV.FORUM,k.AV.USER].includes(e.script.type)&&[k.AV.FORUM,k.AV.USER].includes(r.script.type)?1:0)}}ngOnInit(){}setSortOption(i){this.sortOption===i?this.sortValue=-this.sortValue:(this.sortOption=i,this.sortValue="installations"===i?-1:1),this.sortList(i)}sortList(i){this.compareFns.hasOwnProperty(i)&&this.scriptWithStats.sort((e,r)=>this.compareFns[i](e,r,this.sortValue))}cacheIconClick(i){void 0===this.cachePendingId?(this.currentCacheScript={id:i.script.scriptId,name:i.script.name},this.cacheModalRef.open()):this.toastService.advice(p.V.REQUEST_PENDING)}installationNumberClick(i){0!==i.stats.entities.length&&(this.currentInstallationScript=i,this.installationModalRef.open())}setCachePendingId(i){this.cachePendingId=i}deleteScript(i){this.deletionPending?this.toastService.advice(p.V.REQUEST_PENDING):i.script.childIdList.length>0?this.toastService.show({content:`Questo script \xe8 richiesto da altri script (ID <strong>${i.script.childIdList.join(", ")}</strong>).<br>Prima di cancellarlo, elimina le dipendenze!`,level:p.m.WARNING}):(this.currentDeletionScript={id:i.script.scriptId,name:i.script.name},this.deletionModalRef.open())}}return(o=n).\u0275fac=function(i){return new(i||o)(t.Y36(w.k))},o.\u0275cmp=t.Xpm({type:o,selectors:[["","app-script-dev-list",""]],viewQuery:function(i,e){if(1&i&&(t.Gf(B,5),t.Gf(Pt,5),t.Gf(Nt,5)),2&i){let r;t.iGM(r=t.CRH())&&(e.cacheModalRef=r.first),t.iGM(r=t.CRH())&&(e.installationModalRef=r.first),t.iGM(r=t.CRH())&&(e.deletionModalRef=r.first)}},inputs:{scriptWithStats:"scriptWithStats",loading:"loading"},outputs:{deletionScriptEvent:"deletionScriptEvent"},attrs:Ft,decls:30,vars:16,consts:[[1,"list-unstyled","mb-0","position-relative",3,"ngClass"],[1,"header","bg-dark","text-light","text-uppercase","fw-bold","d-flex","d-md-grid","align-items-center","py-3"],[1,"d-none","d-xl-block"],[1,"title","w-100","sortable",3,"ngClass","click"],[1,"d-none","d-md-inline"],[1,"d-md-none"],[1,"d-none","d-md-block","sortable",3,"ngClass","click"],[1,"d-none","d-xxl-block","sortable",3,"ngClass","click"],[1,"d-none","d-xl-block","sortable",3,"ngClass","click"],["class","loader py-3",4,"ngIf","ngIfElse"],["content",""],["settingsIcon",""],[3,"scriptName","scriptId","cachePendingEvent"],["cacheModal",""],[3,"scriptWithStats"],["installationModal",""],[3,"scriptName","scriptId","deletionPendingEvent","deletionScriptEvent"],["deletionModal",""],[1,"loader","py-3"],["message","Recupero lista script"],["class","empty p-3",4,"ngIf","ngIfElse"],["list",""],[1,"empty","p-3"],[1,"alert","alert-primary","text-center","mb-0"],["class","item d-flex d-md-grid align-items-center position-relative",3,"ngClass",4,"ngFor","ngForOf"],[1,"item","d-flex","d-md-grid","align-items-center","position-relative",3,"ngClass"],[1,"d-none","d-xl-block","mx-auto",3,"innerText"],[1,"title","d-flex","flex-column","min-w-0","mw-100","me-auto","pe-md-0"],[1,"d-block","me-auto","fw-bold","text-truncate","mw-100",3,"routerLink","queryParams","innerText"],[1,"fs-sm","text-muted","text-truncate","mw-100",3,"innerText"],[1,"badge","flat-badge","mx-auto","d-none","d-md-flex",3,"ngClass","innerText"],["class","material-icons-outlined d-none d-xxl-block mx-auto",3,"ngClass","innerText",4,"ngFor","ngForOf"],[1,"mx-auto","d-none","d-md-block"],["class","badge flat-badge badge-blue",3,"innerText",4,"ngIf"],["class","badge flat-badge badge-indigo",3,"ngClass","innerText",4,"ngIf"],[1,"d-none","d-xl-block","mx-auto",3,"ngClass","innerText","click"],[1,"d-none","d-md-flex","align-items-center","justify-content-center","utilities"],["role","button","appTippy","Aggiorna la cache",1,"d-block","material-icons-outlined","me-2",3,"ngClass","tippyProps","disableOnTouchDevice","click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["role","button","appTippy","Cancella lo script",1,"d-block","material-icons-outlined","ms-2",3,"ngClass","tippyProps","disableOnTouchDevice","disableInstance","click"],["ngbDropdown","","placement","left auto","display","dynamic",1,"d-md-none","dropdown-no-caret","utility-dropdown"],["ngbDropdownToggle","",1,"d-block","material-icons","cursor-pointer"],["ngbDropdownMenu","",1,"dropdown-material-icons"],["role","button",1,"dropdown-item","d-flex","align-items-center",3,"click"],[1,"material-icons-outlined","d-block"],[1,"dropdown-item","d-flex","align-items-center",3,"routerLink"],[1,"material-icons-outlined","d-none","d-xxl-block","mx-auto",3,"ngClass","innerText"],[1,"badge","flat-badge","badge-blue",3,"innerText"],[1,"badge","flat-badge","badge-indigo",3,"ngClass","innerText"],[1,"d-block",3,"routerLink","ngClass","appTippy","tippyProps","disableOnTouchDevice"],[1,"d-block","material-icons-outlined","m-icon"]],template:function(i,e){if(1&i&&(t.TgZ(0,"ul",0)(1,"li",1)(2,"div",2),t._uU(3,"#"),t.qZA(),t.TgZ(4,"div",3),t.NdJ("click",function(){return e.setSortOption("title")}),t.TgZ(5,"span",4),t._uU(6,"Titolo"),t.qZA(),t.TgZ(7,"span",5),t._uU(8,"Lista script"),t.qZA()(),t.TgZ(9,"div",6),t.NdJ("click",function(){return e.setSortOption("status")}),t._uU(10," Status "),t.qZA(),t.TgZ(11,"div",7),t.NdJ("click",function(){return e.setSortOption("guide")}),t._uU(12," Guida "),t.qZA(),t.TgZ(13,"div",7),t.NdJ("click",function(){return e.setSortOption("preview")}),t._uU(14," Preview "),t.qZA(),t.TgZ(15,"div",6),t.NdJ("click",function(){return e.setSortOption("type")}),t._uU(16," Tipo "),t.qZA(),t.TgZ(17,"div",8),t.NdJ("click",function(){return e.setSortOption("installations")}),t._uU(18," Uso "),t.qZA()(),t.YNc(19,Qt,2,0,"li",9),t.YNc(20,ae,3,2,"ng-template",null,10,t.W1O),t.qZA(),t.YNc(22,de,3,14,"ng-template",null,11,t.W1O),t.TgZ(24,"app-script-dev-cache",12,13),t.NdJ("cachePendingEvent",function(a){return e.setCachePendingId(a)}),t.qZA(),t._UZ(26,"app-script-dev-stats-details",14,15),t.TgZ(28,"app-script-dev-deletion",16,17),t.NdJ("deletionPendingEvent",function(a){return e.deletionPending=void 0!==a})("deletionScriptEvent",function(){return e.deletionScriptEvent.emit(!0)}),t.qZA()),2&i){const r=t.MAs(21);t.Q6J("ngClass",t.VKq(14,ue,e.isTouch)),t.xp6(4),t.Q6J("ngClass","title"===e.sortOption?e.sortValue>0?"asc":"desc":""),t.xp6(5),t.Q6J("ngClass","status"===e.sortOption?e.sortValue>0?"asc":"desc":""),t.xp6(2),t.Q6J("ngClass","guide"===e.sortOption?e.sortValue>0?"asc":"desc":""),t.xp6(2),t.Q6J("ngClass","preview"===e.sortOption?e.sortValue>0?"asc":"desc":""),t.xp6(2),t.Q6J("ngClass","type"===e.sortOption?e.sortValue>0?"asc":"desc":""),t.xp6(2),t.Q6J("ngClass","installations"===e.sortOption?e.sortValue>0?"asc":"desc":""),t.xp6(2),t.Q6J("ngIf",e.loading)("ngIfElse",r),t.xp6(5),t.Q6J("scriptName",e.currentCacheScript.name)("scriptId",e.currentCacheScript.id),t.xp6(2),t.Q6J("scriptWithStats",e.currentInstallationScript),t.xp6(2),t.Q6J("scriptName",e.currentDeletionScript.name)("scriptId",e.currentDeletionScript.id)}},dependencies:[Z.mk,Z.sg,Z.O5,Z.tP,L.R,N.jt,N.iD,N.Vi,q.rH,f.s,m.F,C.d,V.$],styles:['ul[_ngcontent-%COMP%]:not(.touch-device)   li[_ngcontent-%COMP%]:not(.header):not(.loader):not(.empty){background-color:#fff}ul[_ngcontent-%COMP%]:not(.touch-device)   li[_ngcontent-%COMP%]:not(.header):not(.loader):not(.empty):hover{background-color:rgb(var(--bs-light-rgb))}ul[_ngcontent-%COMP%]:not(.touch-device)   .utilities[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(.edit-required):not(.cache-pending):not(.del-pending){opacity:.5;transition:opacity .2s}ul[_ngcontent-%COMP%]:not(.touch-device)   .utilities[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(.edit-required):not(.cache-pending):not(.del-pending):hover{opacity:1}.utilities[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(.edit-required){color:inherit}li[_ngcontent-%COMP%]:not(.loader):not(.empty){padding-left:.75rem;padding-right:.5rem}li[_ngcontent-%COMP%]:not(.loader):not(.empty):not(.header)   .title[_ngcontent-%COMP%]{padding-top:1.25rem;padding-bottom:1.25rem;padding-right:.5rem}.sortable[_ngcontent-%COMP%]{position:relative;cursor:pointer}.sortable[_ngcontent-%COMP%]:before, .sortable[_ngcontent-%COMP%]:after{transition:opacity .2s;position:absolute;right:0;width:0;height:0;content:"";opacity:.4;border-right:4px solid transparent;border-left:4px solid transparent}.sortable[_ngcontent-%COMP%]:before{bottom:4px;border-top:4px solid #fff}.sortable[_ngcontent-%COMP%]:after{top:4px;border-bottom:4px solid #fff}.sortable.asc[_ngcontent-%COMP%]:after{opacity:1}.sortable.desc[_ngcontent-%COMP%]:before{opacity:1}.sortable[_ngcontent-%COMP%]:not(.asc):not(.desc):hover:before, .sortable[_ngcontent-%COMP%]:not(.asc):not(.desc):hover:after{opacity:.6}@media (min-width: 576px){li[_ngcontent-%COMP%]:not(.loader){padding-left:1rem;padding-right:.75rem}}@media (min-width: 768px){li[_ngcontent-%COMP%]:not(.loader){grid-template-columns:3fr repeat(3,1fr);padding-left:4%}li[_ngcontent-%COMP%]:not(.loader).header > div[_ngcontent-%COMP%]:not(.title){text-align:center}}@media (min-width: 1200px){li[_ngcontent-%COMP%]:not(.loader){grid-template-columns:8% 40% repeat(4,13%);padding-left:0;padding-right:0}}@media (min-width: 1400px){li[_ngcontent-%COMP%]:not(.loader){grid-template-columns:5% 41% repeat(6,9%)}}.edit-required[_ngcontent-%COMP%]   .m-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rotation 2s infinite}.cache-pending[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fullRotation 1s linear infinite}.del-pending[_ngcontent-%COMP%], .del-pending[_ngcontent-%COMP%]:hover{opacity:.1!important;cursor:initial!important}@keyframes _ngcontent-%COMP%_rotation{50%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_fullRotation{0%{transform:rotate(0)}to{transform:rotate(-360deg)}}']}),n})();const me=["app-script-dev-stats",""];let fe=(()=>{var o;class n{constructor(){this.scriptCreated=0,this.totalInstall=0,this.userInstall=0,this.forumInstall=0,this.countOptions={separator:"."}}ngOnInit(){}}return(o=n).\u0275fac=function(i){return new(i||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["","app-script-dev-stats",""]],inputs:{scriptCreated:"scriptCreated",totalInstall:"totalInstall",userInstall:"userInstall",forumInstall:"forumInstall"},attrs:me,decls:32,vars:11,consts:[[1,"flat-container","d-flex","align-items-center"],[1,"fw-normal","lh-1","text-success",3,"countUp","reanimateOnClick"],[1,"text-muted","fs-xs","text-uppercase"],[1,"d-block","material-icons-outlined","text-success"],[1,"fw-normal","lh-1","text-primary",3,"countUp","options","reanimateOnClick"],[1,"d-block","material-icons","text-primary"],[1,"fw-normal","lh-1","text-indigo",3,"countUp","options","reanimateOnClick"],[1,"d-block","material-icons","text-indigo"],[1,"fw-normal","lh-1","text-danger",3,"countUp","options","reanimateOnClick"],[1,"d-block","material-icons-outlined","text-danger"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0)(1,"div")(2,"h2",1),t._uU(3," 0 "),t.qZA(),t.TgZ(4,"div",2),t._uU(5,"script creati"),t.qZA()(),t.TgZ(6,"div",3),t._uU(7," integration_instructions "),t.qZA()(),t.TgZ(8,"div",0)(9,"div")(10,"h2",4),t._uU(11," 0 "),t.qZA(),t.TgZ(12,"div",2),t._uU(13,"installazioni"),t.qZA()(),t.TgZ(14,"div",5),t._uU(15,"speed"),t.qZA()(),t.TgZ(16,"div",0)(17,"div")(18,"h2",6),t._uU(19," 0 "),t.qZA(),t.TgZ(20,"div",2),t._uU(21,"forum unici"),t.qZA()(),t.TgZ(22,"div",7),t._uU(23,"public"),t.qZA()(),t.TgZ(24,"div",0)(25,"div")(26,"h2",8),t._uU(27," 0 "),t.qZA(),t.TgZ(28,"div",2),t._uU(29,"utenti unici"),t.qZA()(),t.TgZ(30,"div",9),t._uU(31,"people_alt"),t.qZA()()),2&i&&(t.xp6(2),t.Q6J("countUp",e.scriptCreated)("reanimateOnClick",!1),t.xp6(8),t.Q6J("countUp",e.totalInstall)("options",e.countOptions)("reanimateOnClick",!1),t.xp6(8),t.Q6J("countUp",e.forumInstall)("options",e.countOptions)("reanimateOnClick",!1),t.xp6(8),t.Q6J("countUp",e.userInstall)("options",e.countOptions)("reanimateOnClick",!1))},dependencies:[E],styles:[".flat-container[_ngcontent-%COMP%]{padding:2rem}.flat-container[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{letter-spacing:.2em}.flat-container[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%], .flat-container[_ngcontent-%COMP%]   .material-icons-outlined[_ngcontent-%COMP%]{font-size:35px;margin-left:auto}"]}),n})(),ge=(()=>{var o;class n{constructor(i,e,r,a,u,h){this.globalsService=i,this.scriptDevService=e,this.scriptListService=r,this.breakpointObserver=a,this.scriptFilterService=u,this.viewportScroller=h,this.scriptWithStatsList=[],this.fullScriptWithStatsList=[],this.totalInstall=0,this.userInstall=[],this.forumInstall=[],this.lessThanMediumScreenSize=!1,this.scriptPermissions={},this.scriptFullList=[],this.loading=!0;const g=this.globalsService.credentials;if(!g)throw new Error("Missing credentials!");this.ffuid=g.user.ffuid,this.lessThanMediumScreenSize=this.breakpointObserver.isMatched([z.u3.XSmall,z.u3.Small])}ngOnInit(){var i=this;return(0,U.Z)(function*(){i.breakpointSubscription=i.breakpointObserver.observe([z.u3.XSmall,z.u3.Small]).subscribe(e=>{i.lessThanMediumScreenSize=e.matches}),yield i.setData()})()}setData(){var i=this;return(0,U.Z)(function*(){i.loading=!0;const[e,r]=yield Promise.all([i.scriptListService.getScriptsByAuthor(i.ffuid),i.scriptDevService.getStats()]);[i.scriptPermissions,i.scriptFullList]=yield Promise.all([i.scriptListService.getScriptPermissions(),i.scriptListService.getAllScripts()]);let a=[],u=0,h=[],g=[];e.forEach(_=>{let d=r.filter(S=>S.scriptId===_.scriptId)[0],x=[],T=[];d||(d={scriptId:_.scriptId,entities:[]}),u+=d.entities.length,d.entities.forEach(S=>{S.targetType===k.D7.USER?(T.push(S.targetId),h.includes(S.targetId)||h.push(S.targetId)):(x.push(S.targetId),g.includes(S.targetId)||g.push(S.targetId))}),a.push({script:_,stats:(0,ot.Z)((0,ot.Z)({},d),{forums:x,users:T})})}),i.scriptWithStatsList=i.fullScriptWithStatsList=a.sort((_,d)=>_.script.name>d.script.name?1:d.script.name>_.script.name?-1:0),i.totalInstall=u,i.userInstall=h,i.forumInstall=g,i.loading=!1})()}filterList(i){if(0===i.length)return void(this.scriptWithStatsList=this.fullScriptWithStatsList);let e=this.scriptFilterService.createKeywordsRegex(i);this.scriptWithStatsList=this.fullScriptWithStatsList.filter(r=>r.script.name.match(e)||r.script.description.match(e))}refresh(){var i=this;return(0,U.Z)(function*(){i.viewportScroller.scrollToPosition([0,0]),yield i.setData()})()}ngOnDestroy(){var i;null===(i=this.breakpointSubscription)||void 0===i||i.unsubscribe()}}return(o=n).\u0275fac=function(i){return new(i||o)(t.Y36(ut.d),t.Y36(ht.N),t.Y36(mt.o),t.Y36(z.Yg),t.Y36(ft.v),t.Y36(Z.EM))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-script-dev"]],decls:5,vars:11,consts:[["pageTitle","Sviluppo script"],["app-script-dev-stats","",1,"stats","d-grid",3,"scriptCreated","totalInstall","userInstall","forumInstall"],[1,"page-container"],["app-script-dev-info","",1,"info","d-grid",3,"scriptWithStats","scriptPermissions","scriptList","smallScreen","loading","filterEvent"],["app-script-dev-list","",1,"list","flat-container","overflow-hidden",3,"scriptWithStats","loading","deletionScriptEvent"]],template:function(i,e){1&i&&(t._UZ(0,"app-breadcrumb",0)(1,"div",1),t.TgZ(2,"div",2)(3,"div",3),t.NdJ("filterEvent",function(a){return e.filterList(a)}),t.qZA(),t.TgZ(4,"div",4),t.NdJ("deletionScriptEvent",function(){return e.refresh()}),t.qZA()()),2&i&&(t.xp6(1),t.Q6J("scriptCreated",e.fullScriptWithStatsList.length)("totalInstall",e.totalInstall)("userInstall",e.userInstall.length)("forumInstall",e.forumInstall.length),t.xp6(2),t.Q6J("scriptWithStats",e.fullScriptWithStatsList)("scriptPermissions",e.scriptPermissions)("scriptList",e.scriptFullList)("smallScreen",e.lessThanMediumScreenSize)("loading",e.loading),t.xp6(1),t.Q6J("scriptWithStats",e.scriptWithStatsList)("loading",e.loading))},dependencies:[gt.L,bt,he,fe],styles:[".page-container[_ngcontent-%COMP%], .list[_ngcontent-%COMP%]{margin-top:1rem}.stats[_ngcontent-%COMP%], .info[_ngcontent-%COMP%]{row-gap:1rem}@media (min-width: 768px){.stats[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);column-gap:1rem}}@media (min-width: 960px){.page-container[_ngcontent-%COMP%], .list[_ngcontent-%COMP%]{margin-top:1.5rem}.stats[_ngcontent-%COMP%], .info[_ngcontent-%COMP%]{column-gap:1.5rem;row-gap:1.5rem}}@media (min-width: 1400px){.stats[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}.info[_ngcontent-%COMP%]{grid-template-columns:3fr 2fr}}"]}),n})();var _e=c(232),ve=c(8934),Ce=c(3038),xe=c(7230),ye=c(7963),Se=c(591),Te=c(4027),Me=c(5230),kt=c(8783),P=c(4404),Oe=c(4311),De=c(7481),et=c(6695),$=c(4301),lt=c(3066),Zt=c(3825),Ie=c(1240);function Vt(o,n,s){var i=Ie.qW.createCanvas(),e=n.getWidth(),r=n.getHeight(),a=i.style;return a&&(a.position="absolute",a.left="0",a.top="0",a.width=e+"px",a.height=r+"px",i.setAttribute("data-zr-dom-id",o)),i.width=e*s,i.height=r*s,i}const wt=function(o){function n(s,i,e){var a,r=o.call(this)||this;r.motionBlur=!1,r.lastFrameAlpha=.7,r.dpr=1,r.virtual=!1,r.config={},r.incremental=!1,r.zlevel=0,r.maxRepaintRectCount=5,r.__dirty=!0,r.__firstTimePaint=!0,r.__used=!1,r.__drawIndex=0,r.__startIndex=0,r.__endIndex=0,r.__prevStartIndex=null,r.__prevEndIndex=null,e=e||kt.KL,"string"==typeof s?a=Vt(s,i,e):P.isObject(s)&&(s=(a=s).id),r.id=s,r.dom=a;var u=a.style;return u&&(P.disableUserSelect(a),a.onselectstart=function(){return!1},u.padding="0",u.margin="0",u.borderWidth="0"),r.painter=i,r.dpr=e,r}return(0,Oe.ZT)(n,o),n.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},n.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},n.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},n.prototype.setUnpainted=function(){this.__firstTimePaint=!0},n.prototype.createBackBuffer=function(){var s=this.dpr;this.domBack=Vt("back-"+this.id,this.painter,s),this.ctxBack=this.domBack.getContext("2d"),1!==s&&this.ctxBack.scale(s,s)},n.prototype.createRepaintRects=function(s,i,e,r){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var y,a=[],u=this.maxRepaintRectCount,h=!1,g=new lt.Z(0,0,0,0);function _(M){if(M.isFinite()&&!M.isZero())if(0===a.length)(b=new lt.Z(0,0,0,0)).copy(M),a.push(b);else{for(var F=!1,pt=1/0,it=0,Q=0;Q<a.length;++Q){var A=a[Q];if(A.intersect(M)){var j=new lt.Z(0,0,0,0);j.copy(A),j.union(M),a[Q]=j,F=!0;break}if(h){g.copy(M),g.union(A);var dt=g.width*g.height-M.width*M.height-A.width*A.height;dt<pt&&(pt=dt,it=Q)}}var b;h&&(a[it].union(M),F=!0),F||((b=new lt.Z(0,0,0,0)).copy(M),a.push(b)),h||(h=a.length>=u)}}for(var d=this.__startIndex;d<this.__endIndex;++d)if(x=s[d]){var T=x.shouldBePainted(e,r,!0,!0);(S=x.__isRendered&&(x.__dirty&Zt.YV||!T)?x.getPrevPaintRect():null)&&_(S);var O=T&&(x.__dirty&Zt.YV||!x.__isRendered)?x.getPaintRect():null;O&&_(O)}for(d=this.__prevStartIndex;d<this.__prevEndIndex;++d){var x,S;T=(x=i[d]).shouldBePainted(e,r,!0,!0),!x||T&&x.__zr||!x.__isRendered||(S=x.getPrevPaintRect())&&_(S)}do{for(y=!1,d=0;d<a.length;)if(a[d].isZero())a.splice(d,1);else{for(var D=d+1;D<a.length;)a[d].intersect(a[D])?(y=!0,a[d].union(a[D]),a.splice(D,1)):D++;d++}}while(y);return this._paintRects=a,a},n.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},n.prototype.resize=function(s,i){var e=this.dpr,r=this.dom,a=r.style,u=this.domBack;a&&(a.width=s+"px",a.height=i+"px"),r.width=s*e,r.height=i*e,u&&(u.width=s*e,u.height=i*e,1!==e&&this.ctxBack.scale(e,e))},n.prototype.clear=function(s,i,e){var r=this.dom,a=this.ctx,u=r.width,h=r.height;i=i||this.clearColor;var g=this.motionBlur&&!s,_=this.lastFrameAlpha,d=this.dpr,x=this;g&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(r,0,0,u/d,h/d));var T=this.domBack;function S(O,y,D,M){if(a.clearRect(O,y,D,M),i&&"transparent"!==i){var b=void 0;P.isGradientObject(i)?(b=(i.global||i.__width===D&&i.__height===M)&&i.__canvasGradient||(0,et.ZF)(a,i,{x:0,y:0,width:D,height:M}),i.__canvasGradient=b,i.__width=D,i.__height=M):P.isImagePatternObject(i)&&(i.scaleX=i.scaleX||d,i.scaleY=i.scaleY||d,b=(0,$.RZ)(a,i,{dirty:function(){x.setUnpainted(),x.__painter.refresh()}})),a.save(),a.fillStyle=b||i,a.fillRect(O,y,D,M),a.restore()}g&&(a.save(),a.globalAlpha=_,a.drawImage(T,O,y,D,M),a.restore())}!e||g?S(0,0,u,h):e.length&&P.each(e,function(O){S(O.x*d,O.y*d,O.width*d,O.height*d)})},n}(De.Z);var be=c(5962),Pe=c(8519),Y=314159;const ke=function(){function o(n,s,i,e){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var r=!n.nodeName||"CANVAS"===n.nodeName.toUpperCase();this._opts=i=P.extend({},i||{}),this.dpr=i.devicePixelRatio||kt.KL,this._singleCanvas=r,this.root=n,n.style&&(P.disableUserSelect(n),n.innerHTML=""),this.storage=s;var u=this._zlevelList;this._prevDisplayList=[];var h=this._layers;if(r){var _=n,d=_.width,x=_.height;null!=i.width&&(d=i.width),null!=i.height&&(x=i.height),this.dpr=i.devicePixelRatio||1,_.width=d*this.dpr,_.height=x*this.dpr,this._width=d,this._height=x;var T=new wt(_,this,this.dpr);T.__builtin__=!0,T.initContext(),h[Y]=T,T.zlevel=Y,u.push(Y),this._domRoot=n}else{this._width=(0,et.ap)(n,0,i),this._height=(0,et.ap)(n,1,i);var g=this._domRoot=function Ae(o,n){var s=document.createElement("div");return s.style.cssText=["position:relative","width:"+o+"px","height:"+n+"px","padding:0","margin:0","border-width:0"].join(";")+";",s}(this._width,this._height);n.appendChild(g)}}return o.prototype.getType=function(){return"canvas"},o.prototype.isSingleCanvas=function(){return this._singleCanvas},o.prototype.getViewportRoot=function(){return this._domRoot},o.prototype.getViewportRootOffset=function(){var n=this.getViewportRoot();if(n)return{offsetLeft:n.offsetLeft||0,offsetTop:n.offsetTop||0}},o.prototype.refresh=function(n){var s=this.storage.getDisplayList(!0),i=this._prevDisplayList,e=this._zlevelList;this._redrawId=Math.random(),this._paintList(s,i,n,this._redrawId);for(var r=0;r<e.length;r++){var u=this._layers[e[r]];!u.__builtin__&&u.refresh&&u.refresh(0===r?this._backgroundColor:null)}return this._opts.useDirtyRect&&(this._prevDisplayList=s.slice()),this},o.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},o.prototype._paintHoverList=function(n){var s=n.length,i=this._hoverlayer;if(i&&i.clear(),s){for(var r,e={inHover:!0,viewWidth:this._width,viewHeight:this._height},a=0;a<s;a++){var u=n[a];u.__inHover&&(i||(i=this._hoverlayer=this.getLayer(1e5)),r||(r=i.ctx).save(),(0,$.Dm)(r,u,e,a===s-1))}r&&r.restore()}},o.prototype.getHoverLayer=function(){return this.getLayer(1e5)},o.prototype.paintOne=function(n,s){(0,$.RV)(n,s)},o.prototype._paintList=function(n,s,i,e){if(this._redrawId===e){i=i||!1,this._updateLayerStatus(n);var r=this._doPaintList(n,s,i),a=r.finished,u=r.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),u&&this._paintHoverList(n),a)this.eachLayer(function(g){g.afterBrush&&g.afterBrush()});else{var h=this;(0,be.Z)(function(){h._paintList(n,s,i,e)})}}},o.prototype._compositeManually=function(){var n=this.getLayer(Y).ctx,s=this._domRoot.width,i=this._domRoot.height;n.clearRect(0,0,s,i),this.eachBuiltinLayer(function(e){e.virtual&&n.drawImage(e.dom,0,0,s,i)})},o.prototype._doPaintList=function(n,s,i){for(var e=this,r=[],a=this._opts.useDirtyRect,u=0;u<this._zlevelList.length;u++){var g=this._layers[this._zlevelList[u]];g.__builtin__&&g!==this._hoverlayer&&(g.__dirty||i)&&r.push(g)}for(var _=!0,d=!1,x=function(O){var y=r[O],D=y.ctx,M=a&&y.createRepaintRects(n,s,T._width,T._height),b=i?y.__startIndex:y.__drawIndex,F=!i&&y.incremental&&Date.now,pt=F&&Date.now(),it=y.zlevel===T._zlevelList[0]?T._backgroundColor:null;if(y.__startIndex===y.__endIndex)y.clear(!1,it,M);else if(b===y.__startIndex){var Q=n[b];(!Q.incremental||!Q.notClear||i)&&y.clear(!1,it,M)}-1===b&&(console.error("For some unknown reason. drawIndex is -1"),b=y.__startIndex);var A,j=function(dt){var Rt={inHover:!1,allClipped:!1,prevEl:null,viewWidth:e._width,viewHeight:e._height};for(A=b;A<y.__endIndex;A++){var Jt=n[A];if(Jt.__inHover&&(d=!0),e._doPaintEl(Jt,y,a,dt,Rt,A===y.__endIndex-1),F&&Date.now()-pt>15)break}Rt.prevElClipPaths&&D.restore()};if(M)if(0===M.length)A=y.__endIndex;else for(var X=T.dpr,nt=0;nt<M.length;++nt){var H=M[nt];D.save(),D.beginPath(),D.rect(H.x*X,H.y*X,H.width*X,H.height*X),D.clip(),j(H),D.restore()}else D.save(),j(),D.restore();y.__drawIndex=A,y.__drawIndex<y.__endIndex&&(_=!1)},T=this,S=0;S<r.length;S++)x(S);return Pe.Z.wxa&&P.each(this._layers,function(O){O&&O.ctx&&O.ctx.draw&&O.ctx.draw()}),{finished:_,needsRefreshHover:d}},o.prototype._doPaintEl=function(n,s,i,e,r,a){var u=s.ctx;if(i){var h=n.getPaintRect();(!e||h&&h.intersect(e))&&((0,$.Dm)(u,n,r,a),n.setPrevPaintRect(h))}else(0,$.Dm)(u,n,r,a)},o.prototype.getLayer=function(n,s){this._singleCanvas&&!this._needsManuallyCompositing&&(n=Y);var i=this._layers[n];return i||((i=new wt("zr_"+n,this,this.dpr)).zlevel=n,i.__builtin__=!0,this._layerConfig[n]?P.merge(i,this._layerConfig[n],!0):this._layerConfig[n-.01]&&P.merge(i,this._layerConfig[n-.01],!0),s&&(i.virtual=s),this.insertLayer(n,i),i.initContext()),i},o.prototype.insertLayer=function(n,s){var i=this._layers,e=this._zlevelList,r=e.length,a=this._domRoot,u=null,h=-1;if(!i[n]&&function we(o){return!(!o||!o.__builtin__&&("function"!=typeof o.resize||"function"!=typeof o.refresh))}(s)){if(r>0&&n>e[0]){for(h=0;h<r-1&&!(e[h]<n&&e[h+1]>n);h++);u=i[e[h]]}if(e.splice(h+1,0,n),i[n]=s,!s.virtual)if(u){var g=u.dom;g.nextSibling?a.insertBefore(s.dom,g.nextSibling):a.appendChild(s.dom)}else a.firstChild?a.insertBefore(s.dom,a.firstChild):a.appendChild(s.dom);s.__painter=this}},o.prototype.eachLayer=function(n,s){for(var i=this._zlevelList,e=0;e<i.length;e++){var r=i[e];n.call(s,this._layers[r],r)}},o.prototype.eachBuiltinLayer=function(n,s){for(var i=this._zlevelList,e=0;e<i.length;e++){var r=i[e],a=this._layers[r];a.__builtin__&&n.call(s,a,r)}},o.prototype.eachOtherLayer=function(n,s){for(var i=this._zlevelList,e=0;e<i.length;e++){var r=i[e],a=this._layers[r];a.__builtin__||n.call(s,a,r)}},o.prototype.getLayers=function(){return this._layers},o.prototype._updateLayerStatus=function(n){function s(d){r&&(r.__endIndex!==d&&(r.__dirty=!0),r.__endIndex=d)}if(this.eachBuiltinLayer(function(d,x){d.__dirty=d.__used=!1}),this._singleCanvas)for(var i=1;i<n.length;i++)if((e=n[i]).zlevel!==n[i-1].zlevel||e.incremental){this._needsManuallyCompositing=!0;break}var u,h,r=null,a=0;for(h=0;h<n.length;h++){var e,g=(e=n[h]).zlevel,_=void 0;u!==g&&(u=g,a=0),e.incremental?((_=this.getLayer(g+.001,this._needsManuallyCompositing)).incremental=!0,a=1):_=this.getLayer(g+(a>0?.01:0),this._needsManuallyCompositing),_.__builtin__||P.logError("ZLevel "+g+" has been used by unkown layer "+_.id),_!==r&&(_.__used=!0,_.__startIndex!==h&&(_.__dirty=!0),_.__startIndex=h,_.__drawIndex=_.incremental?-1:h,s(h),r=_),e.__dirty&Zt.YV&&!e.__inHover&&(_.__dirty=!0,_.incremental&&_.__drawIndex<0&&(_.__drawIndex=h))}s(h),this.eachBuiltinLayer(function(d,x){!d.__used&&d.getElementCount()>0&&(d.__dirty=!0,d.__startIndex=d.__endIndex=d.__drawIndex=0),d.__dirty&&d.__drawIndex<0&&(d.__drawIndex=d.__startIndex)})},o.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},o.prototype._clearLayer=function(n){n.clear()},o.prototype.setBackgroundColor=function(n){this._backgroundColor=n,P.each(this._layers,function(s){s.setUnpainted()})},o.prototype.configLayer=function(n,s){if(s){var i=this._layerConfig;i[n]?P.merge(i[n],s,!0):i[n]=s;for(var e=0;e<this._zlevelList.length;e++){var r=this._zlevelList[e];r!==n&&r!==n+.01||P.merge(this._layers[r],i[n],!0)}}},o.prototype.delLayer=function(n){var s=this._layers,i=this._zlevelList,e=s[n];e&&(e.dom.parentNode.removeChild(e.dom),delete s[n],i.splice(P.indexOf(i,n),1))},o.prototype.resize=function(n,s){if(this._domRoot.style){var i=this._domRoot;i.style.display="none";var e=this._opts,r=this.root;if(null!=n&&(e.width=n),null!=s&&(e.height=s),n=(0,et.ap)(r,0,e),s=(0,et.ap)(r,1,e),i.style.display="",this._width!==n||s!==this._height){for(var a in i.style.width=n+"px",i.style.height=s+"px",this._layers)this._layers.hasOwnProperty(a)&&this._layers[a].resize(n,s);this.refresh(!0)}this._width=n,this._height=s}else{if(null==n||null==s)return;this._width=n,this._height=s,this.getLayer(Y).resize(n,s)}return this},o.prototype.clearLayer=function(n){var s=this._layers[n];s&&s.clear()},o.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},o.prototype.getRenderedCanvas=function(n){if(this._singleCanvas&&!this._compositeManually)return this._layers[Y].dom;var s=new wt("image",this,(n=n||{}).pixelRatio||this.dpr);s.initContext(),s.clear(!1,n.backgroundColor||this._backgroundColor);var i=s.ctx;if(n.pixelRatio<=this.dpr){this.refresh();var e=s.dom.width,r=s.dom.height;this.eachLayer(function(d){d.__builtin__?i.drawImage(d.dom,0,0,e,r):d.renderToCanvas&&(i.save(),d.renderToCanvas(i),i.restore())})}else for(var a={inHover:!1,viewWidth:this._width,viewHeight:this._height},u=this.storage.getDisplayList(!0),h=0,g=u.length;h<g;h++)(0,$.Dm)(i,u[h],a,h===g-1);return s.dom},o.prototype.getWidth=function(){return this._width},o.prototype.getHeight=function(){return this._height},o}();xe.D([Te.N,Me.N,Se.N,function Ve(o){o.registerPainter("canvas",ke)}]);const Ue=[{path:"",component:ge},{path:"settings",loadChildren:()=>Promise.all([c.e(73),c.e(592),c.e(104)]).then(c.bind(c,7104)).then(o=>o.ScriptDevSettingsModule),data:{title:"Settings"}}];let Re=(()=>{var o;class n{}return(o=n).\u0275fac=function(i){return new(i||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[W.w,Z.ez,tt,I.u5,G.q,J.z,N.XC,st.Ns.forRoot({echarts:ye}),q.Bz.forChild(Ue),rt.U,_e.a,ve.a,Ce.G]}),n})()}}]);