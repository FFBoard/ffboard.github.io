"use strict";(self.webpackChunkpages=self.webpackChunkpages||[]).push([[403],{9978:(ee,F,p)=>{p.r(F),p.d(F,{ScriptDevSettingsModule:()=>Dt});var P=p(9090),f=p(6814),A=p(6687),y=p(4610),e=p(9212);let _=(()=>{var t;class r{}return(t=r).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[f.ez,y.z]}),r})();var S=p(6223),R=p(4853),M=p(578),v=p(8726),x=p(4190),u=p(5861),d=p(1378),h=p(8413),U=p(6245),g=p(3729),O=p(5661),L=p(7165),te=p(3285),ie=p(9473),k=p(1134),w=function(t){return t.FORM="form",t.SANDBOX="sandbox",t.SCHEMA="schema",t}(w||{}),J=p(8366),I=p(4020);const N={sandbox:{initData:"type InitData = {\n            token: string;\n            user: {\n                id: number;\n                nickname: string;\n                avatar: string;\n                roles: string[];\n                ffuid: string;\n                url: string;\n            };\n            forum?: {\n                id: number;\n                name: string;\n                preview: string;\n                cid: string;\n                subdomain: string;\n                domain: string;\n                hostname: string;\n                url: string;\n            };\n            script: {\n                id: string;\n                settings: { [p: string]: any; };\n            };\n        }".replace(/\n\s{8}/gi,"\n"),verifyRequest:"const response = await fetch('https://script.forumfree.it/i/jwt-verify',\n            {\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                },\n                method: 'POST',\n                body: JSON.stringify({ token: window.initData.token })\n            }\n        );\n        const data = await response.json();".replace(/\n\s{8}/gi,"\n"),verifyResponse:"type TokenVerifyResponse = {\n            valid: boolean;\n            payload: {\n                id: number;\n                nickname: string;\n                avatar: string;\n                host: 'script.forumfree.it' | 'script.forumcommunity.net' | 'script.blogfree.net';\n                scope: 'sandbox';\n                roles: string[];\n            };\n        }".replace(/\n\s{8}/gi,"\n"),modelChangeEvent:"type SandboxModelChangeEvent = {\n            eventType: 'SCRIPT';\n            eventContent: {\n                settings: { [p: string]: any; };\n                isFormValid: boolean;\n            };\n        }".replace(/\n\s{8}/gi,"\n"),modelChangeListener:"window.addEventListener('message', e => {\n            if (e.origin !== 'https://easy-innovation.github.io') {\n                return;\n            }\n            \n            // Do stuff...\n            console.log(e.data)\n        }, false);".replace(/\n\s{8}/gi,"\n")},webhook:{manageScript:{eventType:"EASY_MANAGE_SCRIPT",eventPayload:'{"scriptId":1,"targetId":"ff500","targetType":"FORUM","action":"INSTALL"}'},manageSettings:{eventType:"EASY_MANAGE_SETTINGS",eventPayload:'{"scriptId":1,"targetId":"ff500","targetType":"FORUM","settings":"{}"}'}},stringField:{type:"object",properties:{stringField:{type:"string",title:"Titolo del campo stringa:"}}},numberField:{type:"object",properties:{numberField:{type:"number",title:"Titolo del campo numerico:"}}},checkboxField:{type:"object",properties:{checkboxField:{type:"boolean",title:"Titolo del checkbox:"}}},textareaField:{type:"object",properties:{textareaField:{type:"textarea",title:"Titolo della textarea:"}}},selectField:{type:"object",properties:{selectField:{type:"string",title:"Titolo del select:",enum:["Opzione 1","Opzione 2","Opzione 3"]}}},arrayField:{type:"object",properties:{arrayField:{type:"array",title:"Titolo del campo array",items:{type:"string",title:"Titolo del singolo elemento della lista:"}}}},arrayFieldWithObject:{type:"object",properties:{arrayField:{type:"array",title:"Titolo del campo array",items:{type:"object",properties:{textareaField:{type:"textarea",title:"Titolo della textarea:"},numberField:{type:"number",title:"Titolo del campo numerico:"},checkboxField:{type:"boolean",title:"Titolo del checkbox:"}}}}}},multiselectField:{type:"object",properties:{arrayField:{type:"array",title:"Titolo del campo array:",uniqueItems:!0,items:{type:"string",enum:["Opzione 1","Opzione 2","Opzione 3"]}}}},radioField:{type:"object",properties:{radioField:{type:"string",title:"Titolo del campo radio:",enum:["Opzione 1","Opzione 2","Opzione 3"],widget:{formlyConfig:{type:"radio"}}}}},datepickerField:{type:"object",properties:{dateField:{type:"datepicker",title:"Calendario:"}}},datepickerRangeField:{type:"object",properties:{dateRangeField:{type:"datepicker-range",title:"Range di giorni:"}}},forumSectionsField:{type:"object",properties:{sections:{type:"forum-sections",title:"Sezioni del forum:"}}},singleForumSectionsField:{type:"object",properties:{sections:{type:"forum-sections",title:"Sezioni del forum:",widget:{formlyConfig:{props:{multiple:!1}}}}}},forumGroupsField:{type:"object",properties:{groups:{type:"forum-groups",title:"Gruppi del forum:"}}},forumAllGroupsField:{type:"object",properties:{groups:{type:"forum-groups",title:"Gruppi del forum:",widget:{formlyConfig:{props:{keepGroupsWithoutId:!0}}}}}},forumListWithSelectField:{type:"object",properties:{groups:{type:"forum-list",title:"Ricerca tra forum:",widget:{formlyConfig:{props:{selectDomain:!0}}}}}},forumUsersWithSelectField:{type:"object",properties:{groups:{type:"forum-users",title:"Ricerca tra utenti:",widget:{formlyConfig:{props:{selectDomain:!0}}}}}}},oe={minMax:{type:"object",properties:{numberField:{type:"number",title:"Titolo del campo numerico:",minimum:10,maximum:100}}},default:{type:"object",properties:{stringField:{type:"string",title:"Titolo del campo stringa:",default:"Valore di default"}}},required:{type:"object",required:["stringField"],properties:{stringField:{type:"string",title:"Titolo del campo stringa:"}}},placeholder:{type:"object",properties:{stringField:{type:"string",title:"Titolo del campo stringa:",widget:{formlyConfig:{props:{placeholder:"Il mio placeholder..."}}}}}},oneOf:{type:"object",properties:{selectField:{type:"number",title:"Titolo del select:",oneOf:[{title:"Placeholder dell'opzione 1",const:1},{title:"Placeholder dell'opzione 2",const:2},{title:"Placeholder dell'opzione 3",const:3}]}}},pattern:{type:"object",properties:{stringField:{type:"string",title:"Titolo del campo stringa:",widget:{formlyConfig:{props:{pattern:"/^(forumfree|forumcommunity|blogfree)$/i"}}}}}},multipleOf:{type:"object",properties:{numberField:{type:"number",title:"Titolo del campo numerico:",minimum:10,maximum:100,multipleOf:10}}},hidden:{type:"object",properties:{numberField:{type:"number",title:"Titolo del campo numerico:",minimum:10,maximum:100,multipleOf:10},hiddenField:{type:"string",default:"Hidden value",widget:{formlyConfig:{props:{type:"hidden"}}}}}},resetButton:{type:"object",properties:{arrayField:{type:"array",title:"Titolo del campo array:",uniqueItems:!0,default:[],items:{type:"string",enum:["Opzione 1","Opzione 2","Opzione 3"]},widget:{formlyConfig:{props:{resetButton:!0}}}}}},datepicker:{type:"object",properties:{dateRangeField:{type:"datepicker-range",title:"Titolo del campo:",widget:{formlyConfig:{props:{minDate:-7,maxDate:7,startDate:-1,endDate:1}}}}}},multischema:{type:"object",properties:{multiSchema:{type:"object",title:"Titolo del multischema",oneOf:[{title:"Primo schema",type:"object",properties:{uniqueField1:{type:"string",default:"schema1",widget:{formlyConfig:{props:{type:"hidden"}}}},field1:{type:"boolean",default:!0,title:"Checkbox abilitato di default"},field2:{type:"string",title:"Un campo stringa richiesto:",default:"Un contenuto..."}}},{title:"Secondo schema",type:"object",properties:{uniqueField2:{type:"string",default:"schema2",widget:{formlyConfig:{props:{type:"hidden"}}}},field1:{type:"number",title:"Input numerico:"},field2:{type:"number",title:"Titolo del select:",oneOf:[{title:"Placeholder dell'opzione 1",const:1},{title:"Placeholder dell'opzione 2",const:2},{title:"Placeholder dell'opzione 3",const:3}]}}},{title:"Terzo schema",type:"object",properties:{uniqueField3:{type:"string",default:"schema3",widget:{formlyConfig:{props:{type:"hidden"}}}},arrayField:{type:"array",title:"Titolo del campo array",items:{type:"object",properties:{textareaField:{type:"textarea",title:"Titolo della textarea:"},numberField:{type:"number",title:"Titolo del campo numerico:"},checkboxField:{type:"boolean",title:"Titolo del checkbox:"}}}}}}]}}}};var D=p(2457);let ne=(()=>{var t;class r{constructor(){this.examples=N,this.appName=I.DJ}}return(t=r).\u0275fac=function(o){return new(o||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-script-dev-settings-modal-form"]],decls:253,vars:5,consts:[[1,"fst-italic"],[1,"mb-3"],[1,"flat-inline-code"],[1,"mb-0"],[1,"mt-2"],[3,"object"]],template:function(o,i){1&o&&(e.TgZ(0,"h6",0),e._uU(1,"Campi disponibili"),e.qZA(),e.TgZ(2,"p",1),e._uU(3," Il form contiene differenti campi, organizzati in gruppi per consentire un'agevole navigazione nella pagina, che permettono allo sviluppatore di adattare al meglio lo script alle proprie esigenze. Per espandere un gruppo, \xe8 sufficiente "),e.TgZ(4,"strong"),e._uU(5,"cliccare sul titolo del gruppo stesso"),e.qZA(),e._uU(6,". Alcuni di questi campi sono "),e.TgZ(7,"strong"),e._uU(8,"obbligatori"),e.qZA(),e._uU(9,", altri "),e.TgZ(10,"strong"),e._uU(11,"facoltativi"),e.qZA(),e._uU(12,". Tra i primi vi sono:\n"),e.qZA(),e.TgZ(13,"ul",1)(14,"li")(15,"em"),e._uU(16,"nome"),e.qZA(),e._uU(17,": il nome con cui lo script viene riconosciuto dagli utenti; "),e.qZA(),e.TgZ(18,"li")(19,"em"),e._uU(20,"tipo"),e.qZA(),e._uU(21,": la tipologia dello script. Uno script per forum \xe8 installabile solo dopo aver selezionato un sito amministrato ed \xe8 eseguito per tutti gli account che visitano il sito. Uno script per l'account, al contrario, pu\xf2 essere installato da un qualunque utente e segue tale utente su ogni sito che visita. Inoltre, in quest'ultimo caso, il codice dello script viene eseguito anche nella pagina del profilo dell'utente. Se lo script \xe8 pensato tanto per i forum, quanto per gli account, \xe8 possibile specificare in questo campo il valore "),e.TgZ(22,"em"),e._uU(23,"entrambi"),e.qZA(),e._uU(24,"; "),e.qZA(),e.TgZ(25,"li")(26,"em"),e._uU(27,"tab"),e.qZA(),e._uU(28,": il fornitore che accoglie lo script. Gli script vengono suddivisi per fornitore in modo da essere facilmente individuabili dagli utenti e da indicare chiaramente a chi saranno indirizzate eventuali richieste di supporto. Il tab "),e.TgZ(29,"em"),e._uU(30,"Altri"),e.qZA(),e._uU(31," accoglie tutti gli script non riferiti a uno specifico fornitore; "),e.qZA(),e.TgZ(32,"li")(33,"em"),e._uU(34,"link del file javascript"),e.qZA(),e._uU(35,": il link al file contenente il codice pubblico dello script; "),e.qZA(),e.TgZ(36,"li")(37,"em"),e._uU(38,"posizione in cui verr\xe0 importato il file js"),e.qZA(),e._uU(39,": il punto della pagina HTML in cui verr\xe0 eseguito lo script. Sono disponibili i vari blocchi presenti anche nel classico pannello di amministrazione del forum o blog; "),e.qZA(),e.TgZ(40,"li")(41,"em"),e._uU(42,"schema JSON per le opzioni"),e.qZA(),e._uU(43,": il JSON contenente le opzioni dello script personalizzabili dall'utilizzatore tramite l'apposita pagina dopo aver effettuato l'installazione. Se lo script non necessita o non fornisce personalizzazioni, \xe8 possibile indicare in questo campo un oggetto vuoto "),e.TgZ(44,"code",2),e._uU(45),e.qZA(),e._uU(46,". Per una descrizione dettagliata dei vari campi inseribili, si rimanda a quanto specificato nel prosieguo. "),e.qZA()(),e.TgZ(47,"p",1),e._uU(48,"I campi facoltativi sono:"),e.qZA(),e.TgZ(49,"ul",3)(50,"li")(51,"em"),e._uU(52,"descrizione"),e.qZA(),e._uU(53,": una concisa spiegazione dello scopo e delle funzionalit\xe0 offerte dallo script. Una buona descrizione non solo \xe8 d'aiuto ai potenziali utilizzatori dello script, ma pu\xf2 anche diventare un'ottima pubblicit\xe0! "),e.qZA(),e.TgZ(54,"li")(55,"em"),e._uU(56,"link alla guida"),e.qZA(),e._uU(57,": l'url che riporta alla guida dello script. Una guida ben scritta risulta fondamentale per comprendere il funzionamento dello script, soprattutto in caso di elevata complessit\xe0 e personalizzazione! In questo campo sono accettati esclusivamente link a discussioni presenti sui circuiti ForumFree, ForumCommunity, BlogFree; "),e.qZA(),e.TgZ(58,"li")(59,"em"),e._uU(60,"link all'anteprima"),e.qZA(),e._uU(61,": l'url dell'immagine da utilizzare come anteprima nella lista degli script. Una buona anteprima riesce a cogliere le funzionalit\xe0 fondamentali dello script e a comunicarle con chiarezza e immediatezza. In questo campo sono accettati solo link a immagini in formato jpg, png, gif o webp; "),e.qZA(),e.TgZ(62,"li")(63,"em"),e._uU(64,"link del file javascript per la versione beta (caricato solo per il dev)"),e.qZA(),e._uU(65,": in questo campo \xe8 possibile inserire un link a un file javascript che verr\xe0 eseguito, in "),e.TgZ(66,"strong"),e._uU(67,"alternativa al codice pubblico"),e.qZA(),e._uU(68,", solo per il creatore dello script. Pu\xf2 essere utile per provare un primo rilascio dello script oppure in caso di modifiche sostanziali. Si consiglia di usare questo strumento con accuratezza, tenendo a mente che il servizio "),e.TgZ(69,"em"),e._uU(70,"Script"),e.qZA(),e._uU(71),e.qZA(),e.TgZ(72,"li")(73,"em"),e._uU(74,"gruppo compatibilit\xe0"),e.qZA(),e._uU(75,": tramite i tre checkbox \xe8 possibile specificare se lo script \xe8 compatibile con i layout messi a disposizione sui circuiti. Se uno script non \xe8 compatibile con un layout, \xe8 comunque installabile, ma non verr\xe0 eseguito sulle pagine che adottano tale layout; "),e.qZA(),e.TgZ(76,"li")(77,"em"),e._uU(78,"gruppo visibilit\xe0"),e.qZA(),e._uU(79,": abilitando l'apposita opzione "),e.TgZ(80,"strong"),e._uU(81,"Script nascosto"),e.qZA(),e._uU(82,", lo script potr\xe0 essere tenuto temporaneamente in fase di test oppure potr\xe0 essere riservato solo ad aluni siti o utenti. Gli script nascosti sono visualizzabili nella lista degli script installabili solo dai loro creatori ed eventualmente dai forum e utenti appositamente inseriti nei campi "),e.TgZ(83,"em"),e._uU(84,"Forum abilitati"),e.qZA(),e._uU(85," e "),e.TgZ(86,"em"),e._uU(87,"Utenti abilitati"),e.qZA(),e._uU(88," che appaiono quando si imposta uno script come privato. Tramite questi campi, \xe8 possibile indicare una lista di siti e di utenti che saranno autorizzati a vedere lo script: per avviare la ricerca, \xe8 sufficiente digitare almeno tre caratteri negli input "),e.TgZ(89,"em"),e._uU(90,"Cerca"),e.qZA(),e._uU(91," e, dalla lista di risultati che appare, selezionare il forum o l'utente desiderato. Di default viene proposta una ricerca nel circuito a cui appartiene l'account con cui si sta operando, tuttavia \xe8 possibile selezionare altri circuiti tramite l'apposito select presente accanto all'input di testo. Per rimuovere un sito o un utente, \xe8 necessario cliccare sull'icona rossa col simbolo "),e.TgZ(92,"em"),e._uU(93,"meno"),e.qZA(),e._uU(94," presente vicino ad ogni anteprima dei siti e ad ogni avatar degli utenti; "),e.qZA(),e.TgZ(95,"li")(96,"em"),e._uU(97,"librerie e framework da importare"),e.qZA(),e._uU(98,": eventuali librerie da cui dipende lo script e che verranno importate insieme ad esso. Le librerie selezionate in questo campo saranno importate una sola volta, anche se richieste da pi\xf9 script installati sul sito o sull'account utilizzatore; "),e.qZA(),e.TgZ(99,"li")(100,"em"),e._uU(101,"script richiesti per l'installazione"),e.qZA(),e._uU(102,": tramite questo select \xe8 possibile indicare uno o pi\xf9 script che sono richiesti affinch\xe9 lo script che si sta modificando possa essere installato. In particolare, questo campo pu\xf2 essere utile quando si sviluppano add-on o estensioni facoltative di un altro script gi\xe0 pubblicato; "),e.qZA(),e.TgZ(103,"li")(104,"em"),e._uU(105,"codice HTML che sar\xe0 mostrato nel tag HEAD (anche sul layout FFMobile)"),e.qZA(),e._uU(106,": in questo campo \xe8 possibile inserire del codice HTML da importare nell'HEAD delle pagine su cui viene eseguito lo script. Ci\xf2 risulta utile soprattutto per aggiungere degli stili agli elementi HTML eventualmente stampati dal codice javascript. In tal caso, per inserire correttamente il CSS, occorre racchiuderlo nell'apposito tag "),e.TgZ(107,"code",2),e._uU(108,"style"),e.qZA(),e._uU(109,"; "),e.qZA(),e.TgZ(110,"li")(111,"em"),e._uU(112,"sandbox legate allo script"),e.qZA(),e._uU(113,": in questo gruppo \xe8 possibile specificare una lista di risorse che verranno caricate in sandbox legate allo script. Una sandbox \xe8 un iframe con particolari limiti di sicurezza in modo che non influenzi la pagina su cui \xe8 ospitata. Queste sandbox posso essere usate per "),e.TgZ(114,"strong"),e._uU(115,"aggiungere contenuti unici"),e.qZA(),e._uU(116," ai vari script, sia nella pagina delle impostazioni che in pagine "),e.TgZ(117,"em"),e._uU(118,"ad hoc"),e.qZA(),e._uU(119),e.TgZ(120,"ul",4)(121,"li")(122,"em"),e._uU(123,"nome della sandbox"),e.qZA(),e._uU(124,": si tratta di un nome liberamente scelto da attribuire alla sandbox. Nel caso in cui tale sandbox sia impostata per essere aggiunta nella pagina delle impostazioni dello script, il nome risulta ininfluente. Nel caso invece in cui la sandbox venga inserita in una pagina dedicata, il nome viene usato per generare il pulsante viola nella card dello script e come titolo nella pagina dell'iframe; "),e.qZA(),e.TgZ(125,"li")(126,"em"),e._uU(127,"slug della sandbox"),e.qZA(),e._uU(128,": questo campo obbligatorio deve contenere una stringa che viene usata per generare l'url della sandbox nel caso in cui sia eseguita in una pagina dedicata. Il campo, precompilato all'atto della creazione, \xe8 liberamente modificabile in modo da poter inserire un url adatto e facilmente ricordabile. Occorre sottolineare che "),e.TgZ(129,"strong"),e._uU(130,"al cambiamento di questo campo, viene modificato anche l'url della sandbox"),e.qZA(),e._uU(131," e, pertanto, eventuali link gi\xe0 diffusi "),e.TgZ(132,"strong"),e._uU(133,"non saranno pi\xf9 funzionanti"),e.qZA(),e._uU(134,". Si consiglia quindi di sceglierne il contenuto una sola volta prima della pubblicazione della sandbox. Se invece quest'ultima viene eseguita nella pagina delle impostazioni dello script, lo slug risulta ininfluente; "),e.qZA(),e.TgZ(135,"li")(136,"em"),e._uU(137,"visualizza questa sandbox nella pagina delle impostazioni dello script"),e.qZA(),e._uU(138,": abilitando questa opzione, la sandbox non verr\xe0 eseguita in una pagina dedicata, bens\xec sopra le impostazioni dello script, ossia quelle definite tramite lo "),e.TgZ(139,"em"),e._uU(140,"schema JSON per le opzioni"),e.qZA(),e._uU(141,". Non verr\xe0 quindi aggiunto alcun pulsante nella lista script in quanto si potr\xe0 accedere alla sandbox tramite il classico pulsante "),e.TgZ(142,"em"),e._uU(143,"impostazioni"),e.qZA(),e._uU(144,"; "),e.qZA(),e.TgZ(145,"li")(146,"em"),e._uU(147,"Risorse js-css-html"),e.qZA(),e._uU(148,": si tratta di una lista di file javascript o css che verranno caricati nella sezione "),e.TgZ(149,"code",2),e._uU(150,"head"),e.qZA(),e._uU(151," della sandbox. \xc8 possibile quindi sfruttare i file javascript per aggiungere, rimuovere e modificare elementi del "),e.TgZ(152,"code",2),e._uU(153,"DOM"),e.qZA(),e._uU(154," della sandbox, creando cos\xec contenuti inediti per lo script. Nel caso in cui la sandbox venga inserita sopra le impostazioni dello script, diviene possibile inserire, ad esempio, dei form personalizzati. Nel caso in cui, invece, la sandbox viene impostata come pagina personalizzata, diventa realizzabile l'inserimento di veri e propri "),e.TgZ(155,"em"),e._uU(156,"tool"),e.qZA(),e._uU(157," aggiuntivi e di supporto allo script. In questa lista si possono inserire "),e.TgZ(158,"strong"),e._uU(159,"intere pagine in html"),e.qZA(),e._uU(160,": in queste situazioni, l'applicazione effettua una richiesta alla pagina inserita (\xe8 quindi essenziale che la pagina abbia "),e.TgZ(161,"strong"),e._uU(162,"gli adeguati CORS abilitati"),e.qZA(),e._uU(163,"), analizza la risposta e riporta le varie risorse nelle sezioni "),e.TgZ(164,"code",2),e._uU(165,"head"),e.qZA(),e._uU(166," e "),e.TgZ(167,"code",2),e._uU(168,"body"),e.qZA(),e._uU(169," della sandbox. Dato che il processo potrebbe essere oneroso dal punto di vista delle performance, si consiglia di inserire pagine piuttosto leggere e di limitarsi ad una sola pagina per sandbox. "),e.qZA()()(),e.TgZ(170,"li")(171,"em"),e._uU(172,"impostazioni webhook"),e.qZA(),e._uU(173,": in questo campo si pu\xf2 specificare un link a cui verr\xe0 inviata una richiesta "),e.TgZ(174,"em"),e._uU(175,"POST"),e.qZA(),e._uU(176," ogni volta che si verifica l'evento abilitato. I checkbox con gli eventi disponibili risultano visibili solo dopo aver specificato un valido link da chiamare. Le informazioni contenute nella richiesta, in formato "),e.TgZ(177,"em"),e._uU(178,"JSON"),e.qZA(),e._uU(179,", variano a seconda dell'evento. Sono tuttavia sempre presenti le propriet\xe0 "),e.TgZ(180,"code",2),e._uU(181,"eventType"),e.qZA(),e._uU(182," che descrive il tipo di evento ed "),e.TgZ(183,"code",2),e._uU(184,"eventPayload"),e.qZA(),e._uU(185," che contiene i dati relativi all'evento verificatosi."),e._UZ(186,"br"),e._uU(187,"Nel caso di installazione o disinstallazione, il tipo di evento \xe8 "),e.TgZ(188,"code",2),e._uU(189,"EASY_MANAGE_SCRIPT"),e.qZA(),e._uU(190,", mentre "),e.TgZ(191,"code",2),e._uU(192,"eventPayload"),e.qZA(),e._uU(193," contiene l'id dello script installato o disinstallato, il tipo di soggetto che ha compiuto l'azione, "),e.TgZ(194,"code",2),e._uU(195,"FORUM"),e.qZA(),e._uU(196," o "),e.TgZ(197,"code",2),e._uU(198,"USER"),e.qZA(),e._uU(199,", l'id del forum o dell'utente, nel formato "),e.TgZ(200,"em"),e._uU(201,"ffuid"),e.qZA(),e._uU(202,", e l'azione eseguita, "),e.TgZ(203,"code",2),e._uU(204,"INSTALL"),e.qZA(),e._uU(205," o "),e.TgZ(206,"code",2),e._uU(207,"UNINSTALL"),e.qZA(),e._uU(208,". "),e._UZ(209,"app-custom-pre",5),e._uU(210," Nel caso di salvataggio delle impostazioni, il tipo di evento \xe8 "),e.TgZ(211,"code",2),e._uU(212,"EASY_MANAGE_SETTINGS"),e.qZA(),e._uU(213,", mentre "),e.TgZ(214,"code",2),e._uU(215,"eventPayload"),e.qZA(),e._uU(216," contiene l'id dello script gestito, il tipo di soggetto che ha compiuto l'azione, "),e.TgZ(217,"code",2),e._uU(218,"FORUM"),e.qZA(),e._uU(219," o "),e.TgZ(220,"code",2),e._uU(221,"USER"),e.qZA(),e._uU(222,", l'id del forum o dell'utente, nel formato "),e.TgZ(223,"em"),e._uU(224,"ffuid"),e.qZA(),e._uU(225,", e le nuove impostazioni. "),e._UZ(226,"app-custom-pre",5),e._uU(227," La richiesta viene inviata quando l'azione \xe8 compiuta sia da un admin per il proprio forum (script per forum), sia da un profilo per il proprio account (userscript); "),e.qZA(),e.TgZ(228,"li")(229,"em"),e._uU(230,"permessi aggiuntivi sullo script"),e.qZA(),e._uU(231,": questi campi consentono al "),e.TgZ(232,"strong"),e._uU(233,"creatore"),e.qZA(),e._uU(234," dello script di delegare alcuni permessi ad "),e.TgZ(235,"strong"),e._uU(236,"altri sviluppatori"),e.qZA(),e._uU(237,". Dopo aver abilitato i permessi con l'apposito checkbox, compariranno due select, ciascuno dei quali legato a un permesso differente: "),e.TgZ(238,"ul",4)(239,"li")(240,"em"),e._uU(241,"sviluppatori abilitati a modificare lo script"),e.qZA(),e._uU(242,": si tratta degli sviluppatori che potranno modificare lo script dal pannello di gestione script. Questo permesso consente di delegare la modifica delle varie informazioni e impostazioni dello script (quali ad esempio nome, descrizione, schema JSON...) a un altro sviluppatore, ad "),e.TgZ(243,"strong"),e._uU(244,"eccezione dei permessi aggiuntivi"),e.qZA(),e._uU(245,", i quali rimangono di esclusiva competenza del creatore dello script; "),e.qZA(),e.TgZ(246,"li")(247,"em"),e._uU(248,"sviluppatori abilitati a modificare le impostazioni"),e.qZA(),e._uU(249,": tramite questa opzione, \xe8 possibile attribuire ad altri sviluppatori la possibilit\xe0 di fornire assistenza a quei siti che hanno installato lo script, mediante il pannello "),e.TgZ(250,"em"),e._uU(251,"impostazioni"),e.qZA(),e._uU(252," (se presente). "),e.qZA()()()()),2&o&&(e.xp6(45),e.hij("","{","}"),e.xp6(26),e.hij(" di ",i.appName," non \xe8 pensato per effettuare test di sviluppo, ma per rilasciare contenuti aggiuntivi solo quando pronti per essere usati dal pubblico; "),e.xp6(48),e.hij(". Tutti i codici saranno eseguiti in una sandbox creata da ",i.appName," con alcune risorse sempre disponibili, in modo da agevolare la creazione del contenuto aggiuntivo. I campi presenti nel form per l'aggiunta di sandbox sono: "),e.xp6(90),e.Q6J("object",i.examples.webhook.manageScript),e.xp6(17),e.Q6J("object",i.examples.webhook.manageSettings))},dependencies:[D.s],styles:[".p-block[_ngcontent-%COMP%]:not(:last-of-type){margin-bottom:2rem}.p-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1rem}li[_ngcontent-%COMP%]{text-align:justify;margin-bottom:.5rem}app-custom-pre[_ngcontent-%COMP%]{display:block;margin:1rem auto}"]}),r})(),ae=(()=>{var t;class r{constructor(){this.examples=N,this.appName=I.DJ}}return(t=r).\u0275fac=function(o){return new(o||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-script-dev-settings-modal-sandbox"]],decls:71,vars:7,consts:[[1,"fst-italic"],[1,"flat-inline-code"],[3,"content"],[1,"flat-inline-code",3,"innerText"],[1,"mb-0"]],template:function(o,i){1&o&&(e.TgZ(0,"h6",0),e._uU(1,"Sandbox legate allo script"),e.qZA(),e.TgZ(2,"p"),e._uU(3," Le sandbox legate allo script sono un utile strumento per aggiungere contenuti personalizzati ai propri script, quali pannelli di gestione o di statistica. Essendo eseguite in "),e.TgZ(4,"em"),e._uU(5,"iframe"),e.qZA(),e._uU(6," con l'attributo "),e.TgZ(7,"code",1),e._uU(8,"sandbox"),e.qZA(),e._uU(9,", viene lasciata completa libert\xe0 allo sviluppatore nel deciderne il contenuto e il funzionamento. Sia che vengano inserite nel pannello delle impostazioni script oppure nella pagina dedicata, le sandbox sono pensate per adattare in automatico la propria altezza a seconda degli elementi inseriti. Se si utilizza la pagina dedicata, questa opzione pu\xf2 essere disattivata direttamente dallo sviluppatore, il quale pu\xf2 usare nel proprio codice (preferibilmente all'inizio, in modo che venga eseguito subito) il parametro "),e.TgZ(10,"code",1),e._uU(11,"window.sandboxHeightMode"),e.qZA(),e._uU(12,", assegnandogli il valore "),e.TgZ(13,"code",1),e._uU(14,"scroll"),e.qZA(),e._uU(15,". Cos\xec facendo, la sandbox occuper\xe0 tutta l'altezza disponibile nella pagina e sar\xe0 la stessa sandbox (non l'intera pagina) ad avere un'eventuale scrollbar per mostrare l'ulteriore contenuto. Ci\xf2 pu\xf2 essere utile, ad esempio, se si vuole applicare una logica di "),e.TgZ(16,"em"),e._uU(17,"lazy load"),e.qZA(),e._uU(18," a tutto il documento. Come accennato nella descrizione del campo, all'interno della sandbox, nell'oggetto "),e.TgZ(19,"code",1),e._uU(20,"window.initData"),e.qZA(),e._uU(21," sono resi disponibili alcuni dati che possono essere utili allo sviluppatore per creare il proprio tool. L'oggetto possiede la seguente struttura:\n"),e.qZA(),e._UZ(22,"app-custom-pre",2),e.TgZ(23,"p"),e._uU(24," In particolare, la propriet\xe0 "),e.TgZ(25,"code",1),e._uU(26,"forum"),e.qZA(),e._uU(27),e.TgZ(28,"code",1),e._uU(29,"script"),e.qZA(),e._uU(30," contiene informazioni sullo script a cui la sandbox si riferisce: l'id e le impostazioni attuali. Il "),e.TgZ(31,"code",1),e._uU(32,"token"),e.qZA(),e._uU(33," \xe8 una stringa che pu\xf2 essere usata per validare l'utente corrente. Per fare ci\xf2, occorre inviare una richiesta "),e.TgZ(34,"code",1),e._uU(35,"POST"),e.qZA(),e._uU(36," di decodifica all'url "),e._UZ(37,"code",3),e._uU(38,":\n"),e.qZA(),e._UZ(39,"app-custom-pre",2),e.TgZ(40,"p"),e._uU(41," In questo modo, nella costante "),e.TgZ(42,"code",1),e._uU(43,"data"),e.qZA(),e._uU(44," si avranno a disposizione le seguenti informazioni sull'utente a cui appartiene il "),e.TgZ(45,"em"),e._uU(46,"token"),e.qZA(),e._uU(47,":\n"),e.qZA(),e._UZ(48,"app-custom-pre",2),e.TgZ(49,"p"),e._uU(50," Si pu\xf2 pertanto utilizzare la propriet\xe0 "),e.TgZ(51,"code",1),e._uU(52,"valid"),e.qZA(),e._uU(53," per verificare se il token inviato \xe8 corretto. In caso affermativo, gli altri dati possono essere sfruttati per effettuare le necessarie verifiche con quanto indicato in "),e.TgZ(54,"code",1),e._uU(55,"window.initData"),e.qZA(),e._uU(56,".\n"),e.qZA(),e.TgZ(57,"p"),e._uU(58," Da ultimo occorre segnalare che, se la sandbox \xe8 inserita nella pagina delle impostazioni, alla modifica di uno o pi\xf9 campi, viene inviato un evento "),e.TgZ(59,"code",1),e._uU(60,"message"),e.qZA(),e._uU(61," alla sandbox, in modo da notificarla del cambiamento. L'evento contiene i seguenti dati:\n"),e.qZA(),e._UZ(62,"app-custom-pre",2),e.TgZ(63,"p"),e._uU(64," Per rimanere in ascolto dell'evento, \xe8 possibile utilizzare un codice simile al seguente:\n"),e.qZA(),e._UZ(65,"app-custom-pre",2),e.TgZ(66,"p",4),e._uU(67," Una volta ricevuti i dati, \xe8 possibile aggiornare il contenuto della pagina a seconda dei "),e.TgZ(68,"code",1),e._uU(69,"settings"),e.qZA(),e._uU(70," attuali, bench\xe9 non ancora salvati. Il salvataggio infatti avviene solo quando viene premuto l'apposito pulsante nella pagina delle impostazioni script.\n"),e.qZA()),2&o&&(e.xp6(22),e.Q6J("content",i.examples.sandbox.initData),e.xp6(5),e.hij(" potrebbe non essere presente nel caso in cui lo script in oggetto sia uno script per account e l'utente non abbia selezionato alcun forum su ",i.appName,". La propriet\xe0 "),e.xp6(10),e.Q6J("innerText","https://script.forumfree.it/i/jwt-verify"),e.xp6(2),e.Q6J("content",i.examples.sandbox.verifyRequest),e.xp6(9),e.Q6J("content",i.examples.sandbox.verifyResponse),e.xp6(14),e.Q6J("content",i.examples.sandbox.modelChangeEvent),e.xp6(3),e.Q6J("content",i.examples.sandbox.modelChangeListener))},dependencies:[D.s],styles:[".p-block[_ngcontent-%COMP%]:not(:last-of-type){margin-bottom:2rem}.p-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1rem}li[_ngcontent-%COMP%]{text-align:justify;margin-bottom:.5rem}app-custom-pre[_ngcontent-%COMP%]{display:block;margin:1rem auto}"]}),r})();const m={jsonCreation:"ds-json-creation",stringField:"ds-string-field",numberField:"ds-number-field",checkboxField:"ds-checkbox-field",textareaField:"ds-textara-field",selectField:"ds-select-field",arrayField:"ds-array-field",multiselectField:"ds-multiselect-field",radioField:"ds-radio-field",datepickerField:"ds-datepicker-field",datepickerRangeField:"ds-datepicker-range-field",forumSectionsField:"ds-forum-sections-field",forumGroupsField:"ds-forum-groups-field",forumSearchField:"ds-forum-search-field",userSearchField:"ds-user-search-field",advancedOptions:"ds-advaced-options",minMaxOption:"ds-min-max-option",defaultOption:"ds-default-option",requiredOption:"ds-required-option",placeholderOption:"ds-placeholder-option",patternOption:"ds-pattern-option",stepOption:"ds-step-option",hiddenOption:"ds-hidden-option",resetOption:"ds-reset-option",dateOption:"ds-date-option",multischemaOption:"ds-multischema-option"},re=[[{title:"Creazione del JSON",ref:m.jsonCreation,children:[{title:"Input stringa",ref:m.stringField},{title:"Input numerico",ref:m.numberField},{title:"Checkbox",ref:m.checkboxField},{title:"Textarea",ref:m.textareaField},{title:"Select",ref:m.selectField},{title:"Array",ref:m.arrayField},{title:"Multiselect",ref:m.multiselectField},{title:"Radio",ref:m.radioField},{title:"Calendario",ref:m.datepickerField},{title:"Range di date",ref:m.datepickerRangeField},{title:"Sezioni del forum",ref:m.forumSectionsField},{title:"Gruppi del forum",ref:m.forumGroupsField},{title:"Ricerca forum",ref:m.forumSearchField},{title:"Ricerca utente",ref:m.userSearchField}]}],[{title:"Opzioni avanzate",ref:m.advancedOptions,children:[{title:"Minimo e massimo",ref:m.minMaxOption},{title:"Valore di default",ref:m.defaultOption},{title:"Campo richiesto",ref:m.requiredOption},{title:"Placeholder",ref:m.placeholderOption},{title:"Pattern",ref:m.patternOption},{title:"Step numerici",ref:m.stepOption},{title:"Campo nascosto",ref:m.hiddenOption},{title:"Reset nei select",ref:m.resetOption},{title:"Date",ref:m.dateOption},{title:"Multischema",ref:m.multischemaOption}]}]],se=["container"];function le(t,r){1&t&&e.GkF(0)}function pe(t,r){1&t&&e.GkF(0)}const j=t=>({$implicit:t});function ce(t,r){if(1&t&&(e.ynx(0),e.YNc(1,pe,1,0,"ng-container",16),e.BQk()),2&t){const n=e.oxw().$implicit;e.oxw(2);const o=e.MAs(1);e.xp6(),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(2,j,n.children))}}function ue(t,r){if(1&t&&(e.TgZ(0,"li",13),e.YNc(1,le,1,0,"ng-container",16)(2,ce,2,4,"ng-container",17),e.qZA()),2&t){const n=r.$implicit;e.oxw(2);const o=e.MAs(3);e.xp6(),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(3,j,n)),e.xp6(),e.Q6J("ngIf",n.children)}}function de(t,r){if(1&t&&(e.TgZ(0,"ul",14),e.YNc(1,ue,3,5,"li",15),e.qZA()),2&t){const n=r.$implicit;e.xp6(),e.Q6J("ngForOf",n)}}function me(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"a",18),e.NdJ("click",function(){const a=e.CHM(n).$implicit,s=e.oxw();return e.KtG(s.scrollElementIntoView(a.ref))}),e.qZA()}2&t&&e.Q6J("innerText",r.$implicit.title)}function ge(t,r){1&t&&e.GkF(0)}function _e(t,r){if(1&t&&(e.TgZ(0,"div",19),e.YNc(1,ge,1,0,"ng-container",16),e.qZA()),2&t){const n=r.$implicit;e.oxw();const o=e.MAs(1);e.xp6(),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(2,j,n))}}function fe(t,r){if(1&t&&(e.ynx(0),e._UZ(1,"code",20)(2,"span",21),e.BQk()),2&t){const n=r.$implicit,o=r.last;e.xp6(),e.Q6J("innerText",n),e.xp6(),e.Q6J("innerText",o?".":", ")}}const ve=()=>({}),Ze=t=>({type:"object",properties:t}),he=()=>({stringField:"contenuto specificato dall'utente"}),Ue=()=>({textareaField:"Contenuto della textarea dell'item 1",numberField:1,checkboxField:!0}),be=()=>({textareaField:"Contenuto della textarea dell'item 2",numberField:2,checkboxField:!1}),Te=()=>({textareaField:"Contenuto della textarea dell'item 3",numberField:3,checkboxField:!1}),Se=(t,r,n)=>[t,r,n],Ae=t=>({arrayField:t}),G=()=>({year:2024,month:1,day:1}),qe=t=>({dateField:t}),ye=()=>({year:2024,month:12,day:31}),xe=(t,r)=>({start:t,end:r}),Ee=t=>({dateRangeField:t});let ze=(()=>{var t;class r{constructor(){this.examples=N,this.customizationExamples=oe,this.availableFields=["object","string","number","boolean","textarea","array","datepicker","datepicker-range","forum-list","forum-users","forum-sections","forum-groups"],this.legend=re,this.legendIds=m}scrollElementIntoView(o){var i;null===(i=this.containerRef.nativeElement.querySelector("#".concat(o)))||void 0===i||i.scrollIntoView()}}return(t=r).\u0275fac=function(o){return new(o||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-script-dev-settings-modal-schema"]],viewQuery:function(o,i){if(1&o&&e.Gf(se,5),2&o){let a;e.iGM(a=e.CRH())&&(i.containerRef=a.first)}},decls:589,vars:86,consts:[["legendList",""],["legendItem",""],["container",""],[1,"p-block"],[1,"fst-italic"],[1,"d-flex","justify-content-center","my-3","flex-wrap"],["class","px-4",4,"ngFor","ngForOf"],[1,"fst-italic",3,"id"],[1,"flat-inline-code"],[4,"ngFor","ngForOf"],[3,"object"],[3,"id"],[1,"p-block",3,"id"],[1,"mb-0"],[1,"my-1","ps-4"],["class","mb-0",4,"ngFor","ngForOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngIf"],[1,"cursor-pointer",3,"innerText","click"],[1,"px-4"],[1,"flat-inline-code",3,"innerText"],[3,"innerText"]],template:function(o,i){1&o&&(e.YNc(0,de,2,1,"ng-template",null,0,e.W1O)(2,me,1,1,"ng-template",null,1,e.W1O),e.TgZ(4,"div",null,2)(6,"div",3)(7,"h6",4),e._uU(8,"Schema JSON delle opzioni"),e.qZA(),e.TgZ(9,"div",5),e.YNc(10,_e,2,4,"div",6),e.qZA(),e.TgZ(11,"p"),e._uU(12," Tramite lo schema JSON \xe8 possibile determinare quali campi saranno presenti nel form di modifica delle impostazioni dello script. \xc8 possibile inserire 5 elementi-base differenti, combinabili tra loro e personalizzabili tramite le opzioni descritte nei paragrafi seguenti: input, textarea, select, checkbox e radio. "),e.qZA(),e.TgZ(13,"p",7),e._uU(14,"Creazione dell'oggetto JSON"),e.qZA(),e.TgZ(15,"p"),e._uU(16," Il JSON delle opzioni \xe8 un oggetto che deve descrivere i campi HTML che verranno in seguito automaticamente creati. Per fare ci\xf2, \xe8 essenziale focalizzarsi sulla propriet\xe0 "),e.TgZ(17,"code",8),e._uU(18,"type"),e.qZA(),e._uU(19,", che indica il tipo di campo che sar\xe0 generato. Questa propriet\xe0 pu\xf2 assumere i valori: "),e.YNc(20,fe,3,2,"ng-container",9),e._UZ(21,"br"),e._uU(22," Il primo campo di ogni script deve obbligatoriamente essere di tipo "),e.TgZ(23,"code",8),e._uU(24,"object"),e.qZA(),e._uU(25,". Un campo di questo tipo pu\xf2 essere visto semplicemente come un raccoglitore di altri campi, i quali devono essere descritti nella propriet\xe0 denominata "),e.TgZ(26,"code",8),e._uU(27,"properties"),e.qZA(),e._uU(28,": "),e.qZA(),e._UZ(29,"app-custom-pre",10),e.TgZ(30,"p"),e._uU(31," Tale primo campo, che racchiude tutte le altre impostazioni, diviene accessibile nel codice dello script tramite la variabile "),e.TgZ(32,"code",8),e._uU(33,"scriptInfo.settings"),e.qZA(),e._uU(34,". Da un punto di vista grafico, un tipo "),e.TgZ(35,"code",8),e._uU(36,"object"),e.qZA(),e._uU(37," non viene visualizzato in alcun modo dall'utente, ma \xe8 presente come propriet\xe0 nel JSON costruito in automatico al salvataggio delle impostazioni da parte dell'utilizzatore. "),e.qZA(),e.TgZ(38,"p")(39,"span",4),e._uU(40,"Popolare l'oggetto"),e.qZA(),e._uU(41," properties"),e.qZA(),e.TgZ(42,"p"),e._uU(43," All'interno della propriet\xe0 "),e.TgZ(44,"code",8),e._uU(45,"properties"),e.qZA(),e._uU(46," occorre specificare i vari campi personalizzabili dall'utente. Il formato risulta piuttosto semplice: le chiavi dell'oggetto rappresentano i "),e.TgZ(47,"strong"),e._uU(48,"nomi univoci"),e.qZA(),e._uU(49," dei campi, cio\xe8 le chiavi con cui saranno accessibili quei campi nel codice dello script, mentre il contenuto di ciascuna chiave \xe8 un altro oggetto che descrive il campo da inserire. "),e.qZA(),e.TgZ(50,"p",11)(51,"span",4),e._uU(52,"Input di tipo stringa:"),e.qZA(),e._uU(53," type string "),e.qZA(),e.TgZ(54,"p"),e._uU(55," Per inserire un input di tipo stringa, \xe8 possibile usare il seguente codice: "),e.qZA(),e._UZ(56,"app-custom-pre",10),e.TgZ(57,"p"),e._uU(58," dove "),e.TgZ(59,"code",8),e._uU(60,"stringField"),e.qZA(),e._uU(61," \xe8 il nome univoco del campo, mentre l'oggetto che lo descrive contiene due informazioni: in primo luogo il tipo di campo, "),e.TgZ(62,"code",8),e._uU(63,"string"),e.qZA(),e._uU(64,", in secondo luogo, il titolo di tale campo, "),e.TgZ(65,"code",8),e._uU(66,"title"),e.qZA(),e._uU(67,". Nel form delle impostazioni, il titolo di un campo viene visualizzato come label sopra il campo stesso. Una volta che l'utilizzatore avr\xe0 personalizzato il campo e avr\xe0 salvato le impostazioni, nel codice dello script sar\xe0 disponibile un oggetto di questo tipo, contenuto nella variabile "),e.TgZ(68,"code",8),e._uU(69,"scriptInfo.settings"),e.qZA(),e._uU(70,": "),e.qZA(),e._UZ(71,"app-custom-pre",10),e.TgZ(72,"p",11)(73,"span",4),e._uU(74,"Input di tipo numerico:"),e.qZA(),e._uU(75," type number "),e.qZA(),e.TgZ(76,"p"),e._uU(77," Per creare un input di tipo numerico, \xe8 possibile usare il seguente codice: "),e.qZA(),e._UZ(78,"app-custom-pre",10),e.TgZ(79,"p"),e._uU(80," Nel codice dello script, un input di questo tipo avr\xe0 come contenuto un numero. "),e.qZA(),e.TgZ(81,"p",11)(82,"span",4),e._uU(83,"Checkbox:"),e.qZA(),e._uU(84," type boolean "),e.qZA(),e.TgZ(85,"p"),e._uU(86," Per aggiungere un checkbox, \xe8 possibile usare il seguente codice: "),e.qZA(),e._UZ(87,"app-custom-pre",10),e.TgZ(88,"p"),e._uU(89," Nel codice dello script, un checkbox assume valore "),e.TgZ(90,"code",8),e._uU(91,"true"),e.qZA(),e._uU(92,", se abilitato, o "),e.TgZ(93,"code",8),e._uU(94,"false"),e.qZA(),e._uU(95,", se non abilitato. "),e.qZA(),e.TgZ(96,"p",11)(97,"span",4),e._uU(98,"Area di testo:"),e.qZA(),e._uU(99," type textarea "),e.qZA(),e.TgZ(100,"p"),e._uU(101," Per generare una textarea, \xe8 possibile usare il seguente codice: "),e.qZA(),e._UZ(102,"app-custom-pre",10),e.TgZ(103,"p"),e._uU(104,"Nel codice dello script, tale textarea sar\xe0 una stringa."),e.qZA(),e.TgZ(105,"p",11)(106,"span",4),e._uU(107,"Select: propriet\xe0"),e.qZA(),e._uU(108," enum "),e.qZA(),e.TgZ(109,"p"),e._uU(110," Per inserire un select, occorre fare riferimento alla propriet\xe0 "),e.TgZ(111,"code",8),e._uU(112,"enum"),e.qZA(),e._uU(113,". Un select, infatti, non \xe8 altro che una lista, o enumerazione, dalla quale pu\xf2 essere scelto un solo elemento: "),e.qZA(),e._UZ(114,"app-custom-pre",10),e.TgZ(115,"p"),e._uU(116," La propriet\xe0 "),e.TgZ(117,"code",8),e._uU(118,"enum"),e.qZA(),e._uU(119," \xe8 un array contenente tutte le varie opzioni del select che sar\xe0 generato. Il "),e.TgZ(120,"code",8),e._uU(121,"type"),e.qZA(),e._uU(122," del campo deve necessariamente rispecchiare il tipo dei valori elencati nell'"),e.TgZ(123,"code",8),e._uU(124,"enum"),e.qZA(),e._uU(125,". Cos\xec, ad esempio, se si vuole inserire una scelta tra stringhe, allora il tipo deve essere "),e.TgZ(126,"code",8),e._uU(127,"string"),e.qZA(),e._uU(128,"; se invece la scelta ricade tra numeri, il tipo deve essere "),e.TgZ(129,"code",8),e._uU(130,"number"),e.qZA(),e._uU(131,". Nel codice dello script, si avr\xe0 a disposizione la sola opzione scelta, del tipo specificato. "),e.qZA(),e.TgZ(132,"p",11)(133,"span",4),e._uU(134,"Lista di campi:"),e.qZA(),e._uU(135," type array"),e.qZA(),e.TgZ(136,"p"),e._uU(137," Talvolta si desidera lasciare specificare all'utente il numero di elementi, tutti uguali tra loro, da inserire e, in seguito, raccogliere in un array tutti gli elementi aggiunti. Tramite il tipo di campo "),e.TgZ(138,"code",8),e._uU(139,"array"),e.qZA(),e._uU(140," \xe8 possibile permettere all'utilizzatore di aggiungere o rimuovere liberamente uno o pi\xf9 campi. Questi ultimi dovranno essere descritti nell'oggetto "),e.TgZ(141,"code",8),e._uU(142,"items"),e.qZA(),e._uU(143,", la cui presenza \xe8 essenziale quando il tipo specificato \xe8 "),e.TgZ(144,"code",8),e._uU(145,"array"),e.qZA(),e._uU(146,". Ad esempio, volendo inserire una lista di campi testuali, si pu\xf2 usare il seguente codice: "),e.qZA(),e._UZ(147,"app-custom-pre",10),e.TgZ(148,"p"),e._uU(149," Come si pu\xf2 notare, l'oggetto "),e.TgZ(150,"code",8),e._uU(151,"items"),e.qZA(),e._uU(152," contiene una descrizione degli elementi dell'array: in questo caso, sono strighe, cio\xe8 campi input, con il titolo specificato nella propriet\xe0 "),e.TgZ(153,"code",8),e._uU(154,"title"),e.qZA(),e._uU(155,". Nel codice dello script, questo campo sar\xe0 un array di lunghezza variabile a seconda di quanti item verranno specificati dall'utilizzatore."),e._UZ(156,"br"),e._uU(157," Nel caso in cui si desiderasse generare un array che ripeta pi\xf9 campi differenti, \xe8 possibile sfruttare il tipo "),e.TgZ(158,"code",8),e._uU(159,"object"),e.qZA(),e._uU(160,": "),e.qZA(),e._UZ(161,"app-custom-pre",10),e.TgZ(162,"p"),e._uU(163," Questo JSON sar\xe0 disponibile nel codice dello script nel seguente formato, a seconda del numero di elementi specificati dall'utente: "),e.qZA(),e._UZ(164,"app-custom-pre",10),e.TgZ(165,"p",11)(166,"span",4),e._uU(167,"Multiselect: la propriet\xe0"),e.qZA(),e._uU(168," uniqueItems "),e.qZA(),e.TgZ(169,"p"),e._uU(170," Per creare un multiselect, occorre combinare il tipo array con la propriet\xe0 "),e.TgZ(171,"code",8),e._uU(172,"uniqueItems"),e.qZA(),e._uU(173," impostata a "),e.TgZ(174,"code",8),e._uU(175,"true"),e.qZA(),e._uU(176,": "),e.qZA(),e._UZ(177,"app-custom-pre",10),e.TgZ(178,"p"),e._uU(179," Nel codice dello script, questo campo sar\xe0 un array di lunghezza variabile a seconda di quanti elementi del select sono stati selezionati dall'utente. "),e.qZA(),e.TgZ(180,"p",11)(181,"span",4),e._uU(182,"Radio button: introduzione ai"),e.qZA(),e._uU(183," widget "),e.qZA(),e.TgZ(184,"p"),e._uU(185," Alcune funzionalit\xe0 pi\xf9 avanzate vengono gestite tramite widget. Al momento, l'unico widget disponibile \xe8 contenuto nell'oggetto "),e.TgZ(186,"code",8),e._uU(187,"formlyConfig"),e.qZA(),e._uU(188,". Per aggiungere un widget a un campo, si utilizza la propriet\xe0 "),e.TgZ(189,"code",8),e._uU(190,"widget"),e.qZA(),e._uU(191,". Ad esempio, per inserire un radio button \xe8 possibile usare il seguente codice: "),e.qZA(),e._UZ(192,"app-custom-pre",10),e.TgZ(193,"p"),e._uU(194," Nel codice dello script si avr\xe0 la propriet\xe0 "),e.TgZ(195,"code",8),e._uU(196,"radioField"),e.qZA(),e._uU(197," con un contenuto stringa. "),e.qZA(),e.TgZ(198,"p",11)(199,"span",4),e._uU(200,"Calendario:"),e.qZA(),e._uU(201," type datepicker "),e.qZA(),e.TgZ(202,"p"),e._uU(203," Per generare un calendario da cui l'utente pu\xf2 selezionare un singolo giorno, \xe8 possibile usare il tipo "),e.TgZ(204,"code",8),e._uU(205,"datepicker"),e.qZA(),e._uU(206,": "),e.qZA(),e._UZ(207,"app-custom-pre",10),e.TgZ(208,"p"),e._uU(209," Il giorno selezionato sar\xe0 disponibile nel codice dello script con il seguente formato: "),e.qZA(),e._UZ(210,"app-custom-pre",10),e.TgZ(211,"p",11)(212,"span",4),e._uU(213,"Range di date:"),e.qZA(),e._uU(214," type datepicker-range "),e.qZA(),e.TgZ(215,"p"),e._uU(216," \xc8 possibile anche generare un calendario da cui l'utente pu\xf2 selezionare un range di giorni tramite il tipo "),e.TgZ(217,"code",8),e._uU(218,"datepicker-range"),e.qZA(),e._uU(219,": "),e.qZA(),e._UZ(220,"app-custom-pre",10),e.TgZ(221,"p"),e._uU(222," Il periodo selezionato sar\xe0 disponibile nel codice dello script con il seguente formato: "),e.qZA(),e._UZ(223,"app-custom-pre",10),e.TgZ(224,"p",11)(225,"span",4),e._uU(226,"Lista delle sezioni di un forum:"),e.qZA(),e._uU(227," type forum-sections "),e.qZA(),e.TgZ(228,"p"),e._uU(229," Per alcuni script \xe8 necessario avere uno o pi\xf9 campi array che permettano all'utilizzatore di effettuare una scelta tra le sezioni del forum selezionato. Per fare ci\xf2, \xe8 possibile usare il tipo "),e.TgZ(230,"code",8),e._uU(231,"forum-sections"),e.qZA(),e._uU(232,": "),e.qZA(),e._UZ(233,"app-custom-pre",10),e.TgZ(234,"p"),e._uU(235," Il campo generato sar\xe0 un select multiplo contenente le varie sezioni del forum. Se nessun forum risulta selezionato, il select sar\xe0 vuoto. Nel codice dello script, viene fornito un array numerico di id delle sezioni."),e._UZ(236,"br"),e._uU(237," Se si desidera generare un select singolo, \xe8 possibile sfruttare la propriet\xe0 "),e.TgZ(238,"code",8),e._uU(239,"widget"),e.qZA(),e._uU(240,": "),e.qZA(),e._UZ(241,"app-custom-pre",10),e.TgZ(242,"p",11)(243,"span",4),e._uU(244,"Lista dei gruppi di un forum:"),e.qZA(),e._uU(245," type forum-groups "),e.qZA(),e.TgZ(246,"p"),e._uU(247," Nel caso in cui si desideri permettere all'utente di scegliere tra i gruppi del forum selezionato, si pu\xf2 usare il tipo "),e.TgZ(248,"code",8),e._uU(249,"forum-groups"),e.qZA(),e._uU(250,": "),e.qZA(),e._UZ(251,"app-custom-pre",10),e.TgZ(252,"p"),e._uU(253," Il campo generato sar\xe0 un select multiplo contenente i vari gruppi del forum. Se nessun forum risulta selezionato, il select sar\xe0 vuoto. Di default vengono mostrati solo i gruppi personalizzati, ossia quei gruppi che possiedono un id, in modo tale da fornire al codice dello script un array numerico di id dei gruppi. Tuttavia, in alcune occasioni pu\xf2 risultare utile permettere di selezionare anche tra i gruppi di default, come "),e.TgZ(254,"em"),e._uU(255,"admin"),e.qZA(),e._uU(256," o "),e.TgZ(257,"em"),e._uU(258,"members"),e.qZA(),e._uU(259,". Tali gruppi, non possedendo un id proprio, saranno presenti nell'array generato come stringhe corrispondenti ai loro nomi, ossia "),e.TgZ(260,"em"),e._uU(261,"admin"),e.qZA(),e._uU(262," o "),e.TgZ(263,"em"),e._uU(264,"members"),e.qZA(),e._uU(265,". Per includere anche i gruppi di default tra le opzioni del select, occorre usare la propriet\xe0 "),e.TgZ(266,"code",8),e._uU(267,"widget"),e.qZA(),e._uU(268,": "),e.qZA(),e._UZ(269,"app-custom-pre",10),e.TgZ(270,"p"),e._uU(271," Analogamente al campo "),e.TgZ(272,"code",8),e._uU(273,"forum-sections"),e.qZA(),e._uU(274,", se si desidera generare un select singolo, si pu\xf2 usare il campo "),e.TgZ(275,"code",8),e._uU(276,"widget"),e.qZA(),e._uU(277,". "),e.qZA(),e.TgZ(278,"p",11)(279,"span",4),e._uU(280,"Lista di forum:"),e.qZA(),e._uU(281," type forum-list "),e.qZA(),e.TgZ(282,"p"),e._uU(283," Per alcuni script, specialmente se si tratta di script per utenti, pu\xf2 risultare utile inserire un campo che permetta all'utilizzatore di scegliere tra i vari forum o blog presenti sui circuiti, ad esempio per abilitare o disabilitare alcune funzioni su siti specifici. Per fare questo, al posto del classico campo stringa in cui dover incollare l'url del forum, \xe8 possibile sfruttare il tipo "),e.TgZ(284,"code",8),e._uU(285,"forum-list"),e.qZA(),e._uU(286,". Questo campo genera un "),e.TgZ(287,"em"),e._uU(288,"typeahead"),e.qZA(),e._uU(289," che consente, digitando "),e.TgZ(290,"strong"),e._uU(291,"almeno tre caratteri"),e.qZA(),e._uU(292,", di avviare una ricerca tra i siti esistenti sui circuiti. Di default, tale ricerca viene effettuata sul circuito a cui appartiene l'account con cui sta agendo l'utente, tuttavia si pu\xf2 mostrare, accanto all'input di ricerca, un select tramite cui selezionare il circuito in cui si vuole cercare: "),e.qZA(),e._UZ(293,"app-custom-pre",10),e.TgZ(294,"p"),e._uU(295," Il risultato di questo campo \xe8 un "),e.TgZ(296,"strong"),e._uU(297,"array di stringhe"),e.qZA(),e._uU(298,", dove ogni stringa corrisponde al "),e.TgZ(299,"em"),e._uU(300,"cid"),e.qZA(),e._uU(301," del sito inserito. Il "),e.TgZ(302,"em"),e._uU(303,"cid"),e.qZA(),e._uU(304," possiede il seguente schema: "),e.TgZ(305,"code",8),e._uU(306,"^(ff|fc|bf)\\d+$"),e.qZA(),e._uU(307,". I siti inseriti sono visualizzati in un'apposita lista sotto il campo input tramite la quale \xe8 anche possibile rimuoverli. "),e.qZA(),e.TgZ(308,"p",11)(309,"span",4),e._uU(310,"Lista di utenti:"),e.qZA(),e._uU(311," type forum-users "),e.qZA(),e.TgZ(312,"p"),e._uU(313," Analogamente a quanto avviene per il campo "),e.TgZ(314,"code",8),e._uU(315,"forum-list"),e.qZA(),e._uU(316,", si pu\xf2 generare un "),e.TgZ(317,"em"),e._uU(318,"typeahead"),e.qZA(),e._uU(319," che permetta la ricerca tra gli utenti esistenti su un determinato circuito tramite il tipo "),e.TgZ(320,"code",8),e._uU(321,"forum-users"),e.qZA(),e._uU(322,". Cos\xec come per la lista di forum, anche in questo caso \xe8 possibile mostrare un select con il quale scegliere il circuito su cui effettuare la ricerca: "),e.qZA(),e._UZ(323,"app-custom-pre",10),e.TgZ(324,"p"),e._uU(325," Il risultato di questo campo \xe8 un "),e.TgZ(326,"strong"),e._uU(327,"array di stringhe"),e.qZA(),e._uU(328,", dove ogni stringa corrisponde all'"),e.TgZ(329,"em"),e._uU(330,"ffuid"),e.qZA(),e._uU(331," dell'utente inserito. L'"),e.TgZ(332,"em"),e._uU(333,"ffuid"),e.qZA(),e._uU(334," possiede il seguente schema: "),e.TgZ(335,"code",8),e._uU(336,"^(ff|fc|bf)\\d+$"),e.qZA(),e._uU(337,". Gli utenti inseriti sono visualizzati in un'apposita lista sotto il campo input tramite la quale \xe8 anche possibile rimuoverli. "),e.qZA()(),e.TgZ(338,"div",12)(339,"h6",4),e._uU(340,"Personalizzazione dei campi"),e.qZA(),e.TgZ(341,"p"),e._uU(342," Le istruzioni illustrate nel paragrafo precedente consentono di inserire i campi basilari per generare un form gi\xe0 adeguato a diverse esigenze. Nei casi in cui si desiderino delle impostazioni pi\xf9 avanzate, si pu\xf2 fare riferimento a quanto descritto di seguito, tenendo presente che ogni forma di validazione inserita, trattandosi di controlli frontend, non assicura in alcun modo l'esatta corrispondenza dei dati salvati con i parametri indicati. Risulta quindi essenziale predisporre eventuali ulteriori controlli nel codice dello script. "),e.qZA(),e.TgZ(343,"p",7),e._uU(344,"Valori e lunghezze minime e massime"),e.qZA(),e.TgZ(345,"p"),e._uU(346," Nei campi di tipo "),e.TgZ(347,"code",8),e._uU(348,"string"),e.qZA(),e._uU(349,", "),e.TgZ(350,"code",8),e._uU(351,"number"),e.qZA(),e._uU(352," o "),e.TgZ(353,"code",8),e._uU(354,"array"),e.qZA(),e._uU(355," \xe8 possibile specificare quale condizione affinch\xe9 il form risulti valido che il contenuto di tali campi sia almeno pari a o non pi\xf9 grande di un valore prestabilito. Per il tipo "),e.TgZ(356,"code",8),e._uU(357,"number"),e.qZA(),e._uU(358,", si utilizzano le propriet\xe0 "),e.TgZ(359,"code",8),e._uU(360,"minimum"),e.qZA(),e._uU(361," e "),e.TgZ(362,"code",8),e._uU(363,"maximum"),e.qZA(),e._uU(364,": "),e.qZA(),e._UZ(365,"app-custom-pre",10),e.TgZ(366,"p"),e._uU(367," Analogamente, per il tipo "),e.TgZ(368,"code",8),e._uU(369,"string"),e.qZA(),e._uU(370," si utilizzano le propriet\xe0 "),e.TgZ(371,"code",8),e._uU(372,"minLength"),e.qZA(),e._uU(373," e "),e.TgZ(374,"code",8),e._uU(375,"maxLength"),e.qZA(),e._uU(376,", le quali controllano la lunghezza in caratteri del testo inserito. Infine, nel caso di campo "),e.TgZ(377,"code",8),e._uU(378,"array"),e.qZA(),e._uU(379,", si possono sfruttare le propriet\xe0 "),e.TgZ(380,"code",8),e._uU(381,"minItems"),e.qZA(),e._uU(382," e "),e.TgZ(383,"code",8),e._uU(384,"maxItems"),e.qZA(),e._uU(385," per definire rispettivamente il numero minimo e massimo degli elementi inseribili. "),e.qZA(),e.TgZ(386,"p")(387,"span",7),e._uU(388,"Valore predefinito: propriet\xe0"),e.qZA(),e._uU(389," default "),e.qZA(),e.TgZ(390,"p"),e._uU(391," \xc8 possibile stabilire un valore predefinito di un campo usando la propriet\xe0 "),e.TgZ(392,"code",8),e._uU(393,"default"),e.qZA(),e._uU(394,": "),e.qZA(),e._UZ(395,"app-custom-pre",10),e.TgZ(396,"p")(397,"span",7),e._uU(398,"Campo richiesto: propriet\xe0"),e.qZA(),e._uU(399," required "),e.qZA(),e.TgZ(400,"p"),e._uU(401," Se un campo deve necessariamente essere compilato con un valore, \xe8 possibile utilizzare la propriet\xe0 "),e.TgZ(402,"code",8),e._uU(403,"required"),e.qZA(),e._uU(404,". Tale propriet\xe0 deve essere aggiunta a un campo di tipo "),e.TgZ(405,"code",8),e._uU(406,"object"),e.qZA(),e._uU(407," ed \xe8 un array di stringhe in cui il singolo elemento \xe8 la chiave attribuita al campo la cui compilazione \xe8 richiesta: "),e.qZA(),e._UZ(408,"app-custom-pre",10),e.TgZ(409,"p"),e._uU(410," I campi richiesti devono sempre avere un valore di default affinch\xe9 lo script possa essere installato prima di venire personalizzato per la prima volta! "),e.qZA(),e.TgZ(411,"p",7),e._uU(412,"Placeholder"),e.qZA(),e.TgZ(413,"p"),e._uU(414," Per inserire un placeholder \xe8 possibile fare riferimento alla propriet\xe0 "),e.TgZ(415,"code",8),e._uU(416,"placeholder"),e.qZA(),e._uU(417,": "),e.qZA(),e._UZ(418,"app-custom-pre",10),e.TgZ(419,"p"),e._uU(420," Nei select, \xe8 possibile differenziare il valore delle opzioni e ci\xf2 che viene mostrato all'utente tramite l'uso di "),e.TgZ(421,"code",8),e._uU(422,"oneOf"),e.qZA(),e._uU(423," al posto di "),e.TgZ(424,"code",8),e._uU(425,"enum"),e.qZA(),e._uU(426,": "),e.qZA(),e._UZ(427,"app-custom-pre",10),e.TgZ(428,"p"),e._uU(429," Nell'esempio, l'utilizzatore visualizzer\xe0 come opzioni i testi contenuti nelle propriet\xe0 "),e.TgZ(430,"code",8),e._uU(431,"title"),e.qZA(),e._uU(432," dell'array "),e.TgZ(433,"code",8),e._uU(434,"oneOf"),e.qZA(),e._uU(435,", mentre nel codice dello script saranno presenti i valori specificati nelle propriet\xe0 "),e.TgZ(436,"code",8),e._uU(437,"const"),e.qZA(),e._uU(438,", ossia dei numeri. La propriet\xe0 "),e.TgZ(439,"code",8),e._uU(440,"oneOf"),e.qZA(),e._uU(441," pu\xf2 essere usata in sostituzione di "),e.TgZ(442,"code",8),e._uU(443,"enum"),e.qZA(),e._uU(444," anche nei multiselect. "),e.qZA(),e.TgZ(445,"p",7),e._uU(446,"Pattern"),e.qZA(),e.TgZ(447,"p"),e._uU(448," \xc8 possibile validare il contenuto di un campo con una RegExp usando la propriet\xe0 "),e.TgZ(449,"code",8),e._uU(450,"pattern"),e.qZA(),e._uU(451,": "),e.qZA(),e._UZ(452,"app-custom-pre",10),e.TgZ(453,"p",7),e._uU(454,"Campo numerico con step predefiniti"),e.qZA(),e.TgZ(455,"p"),e._uU(456," Per i campi numerici, si pu\xf2 fare in modo che il valore inseribile sia un multiplo di un altro valore specificato. In questo caso, occorre riferirsi alla propriet\xe0 "),e.TgZ(457,"code",8),e._uU(458,"multipleOf"),e.qZA(),e._uU(459,": "),e.qZA(),e._UZ(460,"app-custom-pre",10),e.TgZ(461,"p"),e._uU(462," L'esempio precedente predispone un campo numerico il cui valore dovr\xe0 essere almeno pari a 10, non pi\xf9 grande di 100 e multiplo di 10, ossia i valori accettati saranno solo 10, 20, 30, 40, 50, 60, 70, 80, 90 e 100. "),e.qZA(),e.TgZ(463,"p",7),e._uU(464,"Campo nascosto"),e.qZA(),e.TgZ(465,"p"),e._uU(466," Per inserire un campo nascosto occorre usare il "),e.TgZ(467,"code",8),e._uU(468,"widget"),e.qZA(),e._uU(469,": "),e.qZA(),e._UZ(470,"app-custom-pre",10),e.TgZ(471,"p",7),e._uU(472,"Reset nei select e multiselect"),e.qZA(),e.TgZ(473,"p"),e._uU(474," In alcuni casi, si desidera rendere disponibile un modo per "),e.TgZ(475,"strong"),e._uU(476,"annullare"),e.qZA(),e._uU(477," i valori selezionati di un "),e.TgZ(478,"em"),e._uU(479,"select"),e.qZA(),e._uU(480," o "),e.TgZ(481,"em"),e._uU(482,"multiselect"),e.qZA(),e._uU(483,". Per fare ci\xf2, \xe8 possibile usare la propriet\xe0 "),e.TgZ(484,"code",8),e._uU(485,"resetButton"),e.qZA(),e._uU(486,", impostandola a "),e.TgZ(487,"code",8),e._uU(488,"true"),e.qZA(),e._uU(489,": "),e.qZA(),e._UZ(490,"app-custom-pre",10),e.TgZ(491,"p"),e._uU(492," Al click sul pulsante, il contenuto del campo viene impostato al suo valore di default. \xc8 quindi essenziale, per evitare comportamenti indesiderati, "),e.TgZ(493,"strong"),e._uU(494,"specificare un valore di default!"),e.qZA()(),e.TgZ(495,"p",7),e._uU(496,"Giocare con le date"),e.qZA(),e.TgZ(497,"p"),e._uU(498," Con campi "),e.TgZ(499,"code",8),e._uU(500,"datepicker"),e.qZA(),e._uU(501," e "),e.TgZ(502,"code",8),e._uU(503,"datepicker-range"),e.qZA(),e._uU(504," \xe8 possibile immaginarsi moltissimi casi d'uso specifici, ciascuno dei quali richiederebbe delle validazioni apposite. Cercando di soddisfare la maggior parte delle necessit\xe0, sono state inserite quattro propriet\xe0: "),e.qZA(),e.TgZ(505,"ol")(506,"li")(507,"code",8),e._uU(508,"startDate"),e.qZA(),e._uU(509,": utilizzabile in entrambi i tipi di "),e.TgZ(510,"em"),e._uU(511,"datepicker"),e.qZA(),e._uU(512,", questa propriet\xe0 permette di impostare il valore di default o di inizio del range. A differenza della propriet\xe0 "),e.TgZ(513,"code",8),e._uU(514,"default"),e.qZA(),e._uU(515,", in questo caso \xe8 possibile specificare anche un "),e.TgZ(516,"strong"),e._uU(517,"valore numerico"),e.qZA(),e._uU(518," che indica il numero di giorni precedenti o successivi alla data odierna. In questo caso, quindi, il valore attribuito sar\xe0 "),e.TgZ(519,"strong"),e._uU(520,"dinamico"),e.qZA(),e._uU(521,", dipendente dalla data in cui viene visualizzato il form e corrispondente alle locuzioni "),e.TgZ(522,"em"),e._uU(523,"sette giorni fa, tra tre giorni da oggi..."),e.qZA()(),e.TgZ(524,"li")(525,"code",8),e._uU(526,"endDate"),e.qZA(),e._uU(527,": simile alla propriet\xe0 precedente, ma utilizzabile "),e.TgZ(528,"strong"),e._uU(529,"esclusivamente"),e.qZA(),e._uU(530," nel campo "),e.TgZ(531,"code",8),e._uU(532,"datepicker-range"),e.qZA(),e._uU(533," per impostare la data di fine del range di default; "),e.qZA(),e.TgZ(534,"li")(535,"code",8),e._uU(536,"minDate"),e.qZA(),e._uU(537,": utilizzabile in entrambi i tipi di "),e.TgZ(538,"em"),e._uU(539,"datepicker"),e.qZA(),e._uU(540,", questa propriet\xe0 permette di impostare il "),e.TgZ(541,"strong"),e._uU(542,"valore minimo"),e.qZA(),e._uU(543," selezionabile dal calendario. Come nelle propriet\xe0 precedenti, anche in questo caso \xe8 accettata tanto una data nel formato "),e.TgZ(544,"code",8),e._uU(545),e.qZA(),e._uU(546,", quanto un numero per indicare i giorni a partire da quello corrente; "),e.qZA(),e.TgZ(547,"li")(548,"code",8),e._uU(549,"maxDate"),e.qZA(),e._uU(550,": simile alla propriet\xe0 precedente, ma utilizzabile per indicare il "),e.TgZ(551,"strong"),e._uU(552,"valore massimo"),e.qZA(),e._uU(553," selezionabile. "),e.qZA()(),e.TgZ(554,"p"),e._uU(555," Esempio: campo con un range di date, valore minimo sette giorni fa, valore massimo sette giorni dopo oggi, "),e.TgZ(556,"em"),e._uU(557,"ieri-oggi-domani"),e.qZA(),e._uU(558," range selezionato di default: "),e.qZA(),e._UZ(559,"app-custom-pre",10),e.TgZ(560,"p",11)(561,"span",4),e._uU(562,"Multischema con"),e.qZA(),e._uU(563," oneOf "),e.TgZ(564,"span",4),e._uU(565,"e"),e.qZA(),e._uU(566," anyOf "),e.qZA(),e.TgZ(567,"p"),e._uU(568," In qualche situazione pu\xf2 risultare utile generare dei form differenti dinamicamente, facendo scegliere all'utente qualche schema adottare. Ci\xf2 risulta possibile grazie a un secondo uso di "),e.TgZ(569,"code",8),e._uU(570,"oneOf"),e.qZA(),e._uU(571,", ovvero tramite la propriet\xe0 "),e.TgZ(572,"code",8),e._uU(573,"anyOf"),e.qZA()(),e._UZ(574,"app-custom-pre",10),e.TgZ(575,"p",13),e._uU(576," Nel caso in cui si utilizzi "),e.TgZ(577,"code",8),e._uU(578,"oneOf"),e.qZA(),e._uU(579,", la scelta a disposizione dell'utente sar\xe0 tra uno e un solo schema tra quelli predisposti, al contratio, con "),e.TgZ(580,"code",8),e._uU(581,"anyOf"),e.qZA(),e._uU(582," l'utilizzatore potr\xe0 selezionare anche tutti gli schemi proposti. In questi casi, \xe8 "),e.TgZ(583,"strong"),e._uU(584,"fondamentale"),e.qZA(),e._uU(585," assegnare a ogni schema "),e.TgZ(586,"strong"),e._uU(587,"almeno un campo, anche nascosto, con una chiave unica"),e.qZA(),e._uU(588,", in modo da permetterne il riconoscimento! "),e.qZA()()()),2&o&&(e.xp6(10),e.Q6J("ngForOf",i.legend),e.xp6(3),e.Q6J("id",i.legendIds.jsonCreation),e.xp6(7),e.Q6J("ngForOf",i.availableFields),e.xp6(9),e.Q6J("object",e.VKq(64,Ze,e.DdM(63,ve))),e.xp6(21),e.Q6J("id",i.legendIds.stringField),e.xp6(6),e.Q6J("object",i.examples.stringField),e.xp6(15),e.Q6J("object",e.DdM(66,he)),e.xp6(),e.Q6J("id",i.legendIds.numberField),e.xp6(6),e.Q6J("object",i.examples.numberField),e.xp6(3),e.Q6J("id",i.legendIds.checkboxField),e.xp6(6),e.Q6J("object",i.examples.checkboxField),e.xp6(9),e.Q6J("id",i.legendIds.textareaField),e.xp6(6),e.Q6J("object",i.examples.textareaField),e.xp6(3),e.Q6J("id",i.legendIds.selectField),e.xp6(9),e.Q6J("object",i.examples.selectField),e.xp6(18),e.Q6J("id",i.legendIds.arrayField),e.xp6(15),e.Q6J("object",i.examples.arrayField),e.xp6(14),e.Q6J("object",i.examples.arrayFieldWithObject),e.xp6(3),e.Q6J("object",e.VKq(74,Ae,e.kEZ(70,Se,e.DdM(67,Ue),e.DdM(68,be),e.DdM(69,Te)))),e.xp6(),e.Q6J("id",i.legendIds.multiselectField),e.xp6(12),e.Q6J("object",i.examples.multiselectField),e.xp6(3),e.Q6J("id",i.legendIds.radioField),e.xp6(12),e.Q6J("object",i.examples.radioField),e.xp6(6),e.Q6J("id",i.legendIds.datepickerField),e.xp6(9),e.Q6J("object",i.examples.datepickerField),e.xp6(3),e.Q6J("object",e.VKq(77,qe,e.DdM(76,G))),e.xp6(),e.Q6J("id",i.legendIds.datepickerRangeField),e.xp6(9),e.Q6J("object",i.examples.datepickerRangeField),e.xp6(3),e.Q6J("object",e.VKq(84,Ee,e.WLB(81,xe,e.DdM(79,G),e.DdM(80,ye)))),e.xp6(),e.Q6J("id",i.legendIds.forumSectionsField),e.xp6(9),e.Q6J("object",i.examples.forumSectionsField),e.xp6(8),e.Q6J("object",i.examples.singleForumSectionsField),e.xp6(),e.Q6J("id",i.legendIds.forumGroupsField),e.xp6(9),e.Q6J("object",i.examples.forumGroupsField),e.xp6(18),e.Q6J("object",i.examples.forumAllGroupsField),e.xp6(9),e.Q6J("id",i.legendIds.forumSearchField),e.xp6(15),e.Q6J("object",i.examples.forumListWithSelectField),e.xp6(15),e.Q6J("id",i.legendIds.userSearchField),e.xp6(15),e.Q6J("object",i.examples.forumUsersWithSelectField),e.xp6(15),e.Q6J("id",i.legendIds.advancedOptions),e.xp6(5),e.Q6J("id",i.legendIds.minMaxOption),e.xp6(22),e.Q6J("object",i.customizationExamples.minMax),e.xp6(22),e.Q6J("id",i.legendIds.defaultOption),e.xp6(8),e.Q6J("object",i.customizationExamples.default),e.xp6(2),e.Q6J("id",i.legendIds.requiredOption),e.xp6(11),e.Q6J("object",i.customizationExamples.required),e.xp6(3),e.Q6J("id",i.legendIds.placeholderOption),e.xp6(7),e.Q6J("object",i.customizationExamples.placeholder),e.xp6(9),e.Q6J("object",i.customizationExamples.oneOf),e.xp6(18),e.Q6J("id",i.legendIds.patternOption),e.xp6(7),e.Q6J("object",i.customizationExamples.pattern),e.xp6(),e.Q6J("id",i.legendIds.stepOption),e.xp6(7),e.Q6J("object",i.customizationExamples.multipleOf),e.xp6(3),e.Q6J("id",i.legendIds.hiddenOption),e.xp6(7),e.Q6J("object",i.customizationExamples.hidden),e.xp6(),e.Q6J("id",i.legendIds.resetOption),e.xp6(19),e.Q6J("object",i.customizationExamples.resetButton),e.xp6(5),e.Q6J("id",i.legendIds.dateOption),e.xp6(50),e.AsE("","{"," year, month, day ","}",""),e.xp6(14),e.Q6J("object",i.customizationExamples.datepicker),e.xp6(),e.Q6J("id",i.legendIds.multischemaOption),e.xp6(14),e.Q6J("object",i.customizationExamples.multischema))},dependencies:[f.sg,f.O5,f.tP,D.s],styles:[".p-block[_ngcontent-%COMP%]:not(:last-of-type){margin-bottom:2rem}.p-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1rem}li[_ngcontent-%COMP%]{text-align:justify;margin-bottom:.5rem}app-custom-pre[_ngcontent-%COMP%]{display:block;margin:1rem auto}"]}),r})();const Ce=["modal"];function Fe(t,r){1&t&&e._UZ(0,"app-script-dev-settings-modal-form")}function Ie(t,r){1&t&&e._UZ(0,"app-script-dev-settings-modal-sandbox")}function De(t,r){1&t&&e._UZ(0,"app-script-dev-settings-modal-schema")}function Me(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"p"),e._uU(1," Questo pannello consente di creare un nuovo script o di modificarne uno esistente. Tramite i pulsante seguenti \xe8 possibile accedere alle sezioni della guida. La sezione "),e.TgZ(2,"em"),e._uU(3,"form"),e.qZA(),e._uU(4," contiene informazioni sui campi presenti nella pagina, la sezione "),e.TgZ(5,"em"),e._uU(6,"sandbox"),e.qZA(),e._uU(7," include una spiegazione sul funzionamento delle sandbox legate allo script e la sezione "),e.TgZ(8,"em"),e._uU(9,"schema"),e.qZA(),e._uU(10," fornisce indicazioni su come inserire uno "),e.TgZ(11,"em"),e._uU(12,"schema JSON"),e.qZA(),e._uU(13," adatto ad ogni esigenza! "),e.qZA(),e.TgZ(14,"div",3)(15,"button",4),e.NdJ("click",function(){e.CHM(n);const i=e.MAs(22),a=e.oxw();return e.KtG(i.select(a.navItems.FORM))}),e._uU(16,"Form"),e.qZA(),e.TgZ(17,"button",5),e.NdJ("click",function(){e.CHM(n);const i=e.MAs(22),a=e.oxw();return e.KtG(i.select(a.navItems.SANDBOX))}),e._uU(18,"Sandbox"),e.qZA(),e.TgZ(19,"button",4),e.NdJ("click",function(){e.CHM(n);const i=e.MAs(22),a=e.oxw();return e.KtG(i.select(a.navItems.SCHEMA))}),e._uU(20,"Schema"),e.qZA()(),e.TgZ(21,"ul",6,7),e.NdJ("activeIdChange",function(i){e.CHM(n);const a=e.oxw();return e.KtG(a.activeNavId=i)}),e.TgZ(23,"li",8),e.YNc(24,Fe,1,0,"ng-template",9),e.qZA(),e.TgZ(25,"li",8),e.YNc(26,Ie,1,0,"ng-template",9),e.qZA(),e.TgZ(27,"li",8),e.YNc(28,De,1,0,"ng-template",9),e.qZA()(),e._UZ(29,"div",10)}if(2&t){const n=e.MAs(22),o=e.oxw();e.xp6(15),e.Q6J("ngClass",o.activeNavId===o.navItems.FORM?"btn-primary":"btn-outline-primary"),e.xp6(2),e.Q6J("ngClass",o.activeNavId===o.navItems.SANDBOX?"btn-primary":"btn-outline-primary"),e.xp6(2),e.Q6J("ngClass",o.activeNavId===o.navItems.SCHEMA?"btn-primary":"btn-outline-primary"),e.xp6(2),e.Q6J("activeId",o.activeNavId),e.xp6(2),e.Q6J("ngbNavItem",o.navItems.FORM),e.xp6(2),e.Q6J("ngbNavItem",o.navItems.SANDBOX),e.xp6(2),e.Q6J("ngbNavItem",o.navItems.SCHEMA),e.xp6(2),e.Q6J("ngbNavOutlet",n)}}let Oe=(()=>{var t;class r{constructor(){this.navItems=w,this.activeNavId=w.FORM}open(){this.modalComponent.open()}}return(t=r).\u0275fac=function(o){return new(o||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-script-dev-settings-modal"]],viewQuery:function(o,i){if(1&o&&e.Gf(Ce,5),2&o){let a;e.iGM(a=e.CRH())&&(i.modalComponent=a.first)}},decls:3,vars:0,consts:[["title","Pannello gestione script","size","xl"],["modal",""],["appModalBody",""],[1,"my-4","d-flex","justify-content-center"],[1,"btn","btn-sm",3,"ngClass","click"],[1,"btn","btn-sm","mx-2",3,"ngClass","click"],["ngbNav","",1,"mb-0","list-unstyled","d-none",3,"activeId","activeIdChange"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavContent",""],[3,"ngbNavOutlet"]],template:function(o,i){1&o&&(e.TgZ(0,"app-modal",0,1),e.YNc(2,Me,30,8,"ng-template",2),e.qZA())},dependencies:[f.mk,k.z,J.J,v.uN,v.Pz,v.nv,v.Is,v.Dy,ne,ae,ze],styles:[".p-block[_ngcontent-%COMP%]:not(:last-of-type){margin-bottom:2rem}.p-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1rem}li[_ngcontent-%COMP%]{text-align:justify;margin-bottom:.5rem}app-custom-pre[_ngcontent-%COMP%]{display:block;margin:1rem auto}"]}),r})();var V=p(1274),Z=p(1413),q=p(1745),E=p(4601),T=p(857),H=p(4064),ke=p(4004);function B(t,r=!1){let n;try{n=new URL(t)}catch(o){return!1}return!r&&"http:"===n.protocol||"https:"===n.protocol}function $(t,r){return t.filter(n=>n!==r&&!I.HQ.includes(n))}function Pe(t){return t&&t.forums.length+t.users.length!==0?"WHITELIST["+[...t.forums,...t.users.map(n=>n.substring(0,2)+"u"+n.substring(2))].join(",").toUpperCase()+"]":""}var Le=p(1410),Ge=p(8372),z=function(t){return t[t.GENERIC=0]="GENERIC",t[t.BASE=1]="BASE",t[t.OPTIONS=2]="OPTIONS",t[t.ADVANCED=3]="ADVANCED",t}(z||{});const Y={array:[],boolean:!1,checkbox:!1,datepicker:void 0,"datepicker-range":void 0,"forum-groups":[],"forum-sections":[],"forum-users":[],"forum-list":[],integer:0,number:0};let Ve=(()=>{var t;class r{createModel(o){const i={};for(const s of o)if("string"==typeof s.key){if(void 0!==s.defaultValue){i[s.key]=s.defaultValue;continue}if("enum"===s.type){var a;i[s.key]=null!==(a=s.props)&&void 0!==a&&a.options&&Array.isArray(s.props.options)?s.props.options[0].value:"";continue}if("object"===s.type){i[s.key]=this.createModel(s.fieldGroup||[]);continue}i[s.key]=this.createDefaultValue("string"==typeof s.type?s.type:"string")}return i}createDefaultValue(o){return(0,q.o8)(Y,o)?Y[o]:""}}return(t=r).\u0275fac=function(o){return new(o||t)},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),r})();var He=p(336);let Be=(()=>{var t;class r{constructor(o,i){this.customFormModelService=o,this.formlyJsonschema=i}createDefaultSettings(o){const i=this.formlyJsonschema.toFieldConfig(o);return this.customFormModelService.createModel(i.fieldGroup||[])}}return(t=r).\u0275fac=function(o){return new(o||t)(e.LFG(Ve),e.LFG(He.c))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),r})();var Q=function(t){return t.ADD="ADD",t.REMOVE="REMOVE",t}(Q||{}),W=p(7429),K=p(5290);const $e=["modal"];function Ye(t,r){1&t&&(e.TgZ(0,"p",4),e._uU(1," Tramite questa funzione \xe8 possibile esportare il contenuto del form visualizzato nella pagina corrente in formato "),e.TgZ(2,"code",5),e._uU(3,"JSON"),e.qZA(),e._uU(4," in modo da poterlo salvare ed eventualmente importare in un secondo momento. Si consiglia di evitare di utilizzare questa azione come backup a lungo termine, in quanto eventuali modifiche strutturali al form renderebbero inefficace il file esportato. I backup vengono gi\xe0 automaticamente effettuati senza richiedere l'intervento dell'utente. "),e.qZA(),e.TgZ(5,"p"),e._uU(6," Le opzioni presenti sono: "),e.qZA(),e.TgZ(7,"ul",6)(8,"li")(9,"em"),e._uU(10,"Importa:"),e.qZA(),e._uU(11," questo pulsante consente di importare un file precedentemente esportato. Caricando il file, i "),e.TgZ(12,"strong"),e._uU(13,"campi presenti saranno sovrascritti"),e.qZA(),e._uU(14,";"),e.qZA(),e.TgZ(15,"li")(16,"em"),e._uU(17,"Esporta:"),e.qZA(),e._uU(18," tramite questo pulsante \xe8 possibile salvare in locale una copia del form su cui si sta operando;"),e.qZA(),e.TgZ(19,"li")(20,"em"),e._uU(21,"Chiudi:"),e.qZA(),e._uU(22," il pulsante chiude il modal senza effettuare alcuna operazione."),e.qZA()())}function We(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){e.CHM(n);const i=e.MAs(2);return e.KtG(i.click())}),e.TgZ(1,"input",8,9),e.NdJ("change",function(i){e.CHM(n);const a=e.oxw();return e.KtG(a.handleSelectionEvent(i))}),e.qZA(),e._uU(3," Importa "),e.qZA(),e.TgZ(4,"button",10),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.export())}),e._uU(5," Esporta "),e.qZA(),e.TgZ(6,"button",11),e.NdJ("click",function(){e.CHM(n),e.oxw();const i=e.MAs(1);return e.KtG(i.close("Close click"))}),e._uU(7," Chiudi "),e.qZA()}}let Ke=(()=>{var t;class r{constructor(o){this.toastService=o,this.modalTitle="",this.exportEvent=new e.vpe,this.importEvent=new e.vpe}open(){this.modalRef.open()}close(){this.modalRef.close()}export(){this.exportEvent.emit(),this.close()}handleSelectionEvent(o){const i=o.target;if(i.files&&i.files.length){const a=new FileReader;a.onload=s=>{var l;this.parseInputFile(null===(l=s.target)||void 0===l?void 0:l.result)},a.readAsText(i.files[0]),i.value=""}this.close()}parseInputFile(o){try{const i=JSON.parse(o);this.importEvent.emit(i)}catch(i){this.toastService.show({content:"Errore nella decodifica del file!",level:d.m.ERROR})}}}return(t=r).\u0275fac=function(o){return new(o||t)(e.Y36(O.k))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-form-exporter"]],viewQuery:function(o,i){if(1&o&&e.Gf($e,5),2&o){let a;e.iGM(a=e.CRH())&&(i.modalRef=a.first)}},inputs:{modalTitle:"modalTitle"},outputs:{exportEvent:"exportEvent",importEvent:"importEvent"},decls:4,vars:2,consts:[["size","md",3,"title","disableCloseButton"],["modal",""],["appModalBody",""],["appModalFooter",""],[1,"mb-3"],[1,"flat-inline-code"],[1,"mb-0"],["type","button",1,"btn","btn-indigo","me-2",3,"click"],["type","file",1,"d-none",3,"change"],["fileInput",""],["type","button",1,"btn","btn-primary","me-2",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(o,i){1&o&&(e.TgZ(0,"app-modal",0,1),e.YNc(2,Ye,23,0,"ng-template",2)(3,We,8,0,"ng-template",3),e.qZA()),2&o&&e.Q6J("title",i.modalTitle)("disableCloseButton",!0)},dependencies:[k.z,J.J,K.j]}),r})();var Xe=p(8316);const et=["modal"];function tt(t,r){1&t&&(e.TgZ(0,"div",8),e._uU(1,"Lo schema non ha alcun campo da mostrare!"),e.qZA())}function it(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"div",9),e.NdJ("validityChangeEvent",function(i){e.CHM(n);const a=e.oxw(3);return e.KtG(a.isFormValid=i)}),e.qZA()}if(2&t){const n=e.oxw(3);e.Q6J("schema",n.formSchema)("validateSchema",!0)("model",n.formModel)}}function ot(t,r){if(1&t&&(e.ynx(0),e.YNc(1,tt,2,0,"div",6)(2,it,1,3,"ng-template",null,7,e.W1O),e.BQk()),2&t){const n=e.MAs(3),o=e.oxw(2);e.xp6(),e.Q6J("ngIf",o.emptySchema)("ngIfElse",n)}}function nt(t,r){if(1&t&&(e.TgZ(0,"p",10),e._uU(1," Il form compilato genera un oggetto con le seguenti propriet\xe0: "),e.qZA(),e._UZ(2,"app-custom-pre",11),e.TgZ(3,"p"),e._uU(4," L'oggetto sar\xe0 disponibile nel codice dello script nella variabile "),e.TgZ(5,"code",12),e._uU(6,"scriptInfo.settings"),e.qZA(),e._uU(7,". "),e.qZA()),2&t){const n=e.oxw(2);e.xp6(2),e.Q6J("object",n.formModel)}}function at(t,r){if(1&t&&e.YNc(0,ot,4,2,"ng-container",4)(1,nt,8,1,"ng-template",null,5,e.W1O),2&t){const n=e.MAs(2),o=e.oxw();e.Q6J("ngIf",!o.showResult)("ngIfElse",n)}}function rt(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.showResult=!i.emptySchema&&!i.showResult&&i.isFormValid)}),e.qZA(),e.TgZ(1,"button",14),e.NdJ("click",function(){e.CHM(n),e.oxw();const i=e.MAs(1);return e.KtG(i.close())}),e._uU(2," Chiudi "),e.qZA()}if(2&t){const n=e.oxw();e.Q6J("disabled",n.emptySchema||!n.isFormValid)("innerText",n.showResult?"Torna al form":"Compila")}}let st=(()=>{var t;class r{constructor(){this.formSchemaString="{}",this.formSchema={},this.formModel={},this.emptySchema=!0,this.showResult=!1,this.isFormValid=!0}open(){this.modalComponent.open();try{this.formSchema=JSON.parse(this.formSchemaString)}catch(o){this.formSchema={}}this.emptySchema=0===Object.keys(this.formSchema).length||"object"!==this.formSchema.type||!(0,q.o8)(this.formSchema,"properties")}resetVars(){this.formSchema={},this.formModel={},this.isFormValid=!0,this.emptySchema=!0,this.showResult=!1}}return(t=r).\u0275fac=function(o){return new(o||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-script-dev-settings-schema-demo"]],viewQuery:function(o,i){if(1&o&&e.Gf(et,5),2&o){let a;e.iGM(a=e.CRH())&&(i.modalComponent=a.first)}},inputs:{formSchemaString:"formSchemaString"},decls:4,vars:1,consts:[["title","Demo JSON schema","size","xl",3,"disableCloseButton","hidden"],["modal",""],["appModalBody",""],["appModalFooter",""],[4,"ngIf","ngIfElse"],["formResult",""],["class","alert alert-primary mb-0",4,"ngIf","ngIfElse"],["demoForm",""],[1,"alert","alert-primary","mb-0"],["app-custom-form","",1,"demo-json-schema",3,"schema","validateSchema","model","validityChangeEvent"],[1,"mb-0"],[3,"object"],[1,"flat-inline-code"],["type","button",1,"btn","btn-primary",3,"disabled","innerText","click"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(o,i){1&o&&(e.TgZ(0,"app-modal",0,1),e.NdJ("hidden",function(){return i.resetVars()}),e.YNc(2,at,3,2,"ng-template",2)(3,rt,3,2,"ng-template",3),e.qZA()),2&o&&e.Q6J("disableCloseButton",!0)},dependencies:[f.O5,W.d,D.s,k.z,J.J,K.j],styles:[".demo-json-schema[_ngcontent-%COMP%]{margin-bottom:-1rem}"]}),r})();const lt=["jsonSchemaLabel"];function pt(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"div",17,18),e.NdJ("validityChangeEvent",function(i){e.CHM(n);const a=e.oxw().$implicit,s=e.oxw();return e.KtG(s.changeFormValidity(a,i))}),e.qZA()}if(2&t){const n=e.oxw().$implicit;e.Q6J("schema",n.schema)("model",n.model)("showFieldValidationOnInit",!0)}}function ct(t,r){if(1&t&&(e.TgZ(0,"div",12)(1,"h2",13),e._UZ(2,"button",14),e.qZA(),e.TgZ(3,"div",15)(4,"div",16),e.YNc(5,pt,2,3,"ng-template"),e.qZA()()()),2&t){const n=r.$implicit;e.xp6(2),e.Q6J("innerText",n.title)}}function ut(t,r){1&t&&(e.TgZ(0,"span",25),e._uU(1,"*"),e.qZA())}function dt(t,r){if(1&t&&(e.TgZ(0,"label",23),e._uU(1),e.YNc(2,ut,2,0,"span",24),e.qZA()),2&t){const n=e.oxw(),i=n.props;e.s9C("for",n.$implicit),e.xp6(),e.hij(" ",i.label," "),e.xp6(),e.Q6J("ngIf",i.required&&!0!==i.hideRequiredMarker)}}const mt=()=>({placement:"left"});function gt(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"div",19),e.YNc(1,dt,3,3,"label",20),e.TgZ(2,"div",21),e.NdJ("click",function(){e.CHM(n),e.oxw();const i=e.MAs(12);return e.KtG(i.open())}),e.TgZ(3,"span",22),e._uU(4,"play_circle"),e.qZA()()()}if(2&t){const n=r.props;e.xp6(),e.Q6J("ngIf",n.label&&!0!==n.hideLabel),e.xp6(),e.Q6J("tippyProps",e.DdM(3,mt))("disableOnTouchDevice",!0)}}const _t=(t,r,n,o)=>[t,r,n,o];let ft=(()=>{var t;class r{constructor(o,i,a,s,l,c){this.profileService=o,this.changeDetectorRef=i,this.toastService=a,this.scriptDevFormService=s,this.scriptDevService=l,this.globalsService=c,this.scriptList=[],this.tipsEvent=new e.vpe,this.cancelEvent=new e.vpe,this.saveEvent=new e.vpe,this.isNewScript=!1,this.constructAllForms=!1,this.pendingRequest=!1,this.additionalPermissions={edit:[],settings:[]},this.ffuid=this.globalsService.credentials.user.ffuid}ngOnInit(){var o;this.isNewScript=!this.script,this.isNewScript||(this.additionalPermissions.edit=$(this.script.permissions.edit,this.script.author.ffuid),this.additionalPermissions.settings=$(this.script.permissions.settings,this.script.author.ffuid));const i=!this.isNewScript&&(this.script.author.ffuid===this.ffuid||this.script.permissions.manage.includes(this.ffuid));this.genericInfoForm=(0,Z.Z)({title:"Informazioni generali",valid:!this.isNewScript,type:z.GENERIC},function we(t,r=[g.tr.OTHER]){return t&&r.unshift(t.publisher.id),{model:t?{name:t.name,description:t.description,docsLink:t.docs.link||"",preview:t.preview,type:t.type,publisher:t.publisher.id}:{},schema:{type:"object",required:["name","type","publisher"],properties:{name:{type:"string",title:"Nome:",description:"Scegli un nome facile da ricordare, che distingua lo script da tutti gli altri!"},description:{type:"string",title:"Descrizione:",description:"Una descrizione accattivante incentiva gli utenti ad installare lo script!",default:""},docsLink:{type:"string",title:"Link alla guida:",description:"Una guida completa \xe8 fondamentale per mostrare tutte le potenzialit\xe0 dello script!",default:"",widget:{formlyConfig:{validators:{pattern:{expression:n=>!n.value||/^https:\/\/(.+?)\.(forumfree\.it|forumcommunity\.net|blogfree\.net)\/\?t=(\d+)(#entry(\d+))?$/.test(n.value),message:(n,o)=>{var i;return'"'.concat(null===(i=o.formControl)||void 0===i?void 0:i.value,'" non \xe8 un valido link alla guida!')}}}}}},preview:{type:"string",title:"Link all'anteprima (jpg, png, gif o webp):",description:"Un'anteprima perfetta riesce a mostrare in pochi secondi il funzionamento dello script!",default:"",widget:{formlyConfig:{validators:{pattern:{expression:n=>!n.value||/^https:\/\/(.+?)\.(jpg|png|gif|webp)$/.test(n.value),message:(n,o)=>{var i;return'"'.concat(null===(i=o.formControl)||void 0===i?void 0:i.value,"\" non \xe8 un valido link all'anteprima!")}}}}}},type:{type:"string",title:"Tipo:",oneOf:[{title:"Script per forum",const:g.AV.FORUM},{title:"Script per utenti (profilo o userscript)",const:g.AV.USER},{title:"Script per entrambi",const:g.AV.ALL}],default:g.AV.FORUM},publisher:{type:"string",title:"Tab:",oneOf:[...new Set(r)].map(n=>({title:H.Oh[n].name,const:n})),default:r[0]}}}}}(this.script,null===(o=this.profileService.scriptDev)||void 0===o?void 0:o.tabs)),this.baseInfoForm=(0,Z.Z)({title:"Funzioni base",valid:!this.isNewScript,type:z.BASE},function Je(t){return{model:t?{sources:(0,Z.Z)({},t.sources),layouts:(0,Z.Z)({},t.layouts),privacy:{hidden:t.privacy.hidden,allowed:{forums:[...t.privacy.allowed.forums],users:[...t.privacy.allowed.users]}}}:{},schema:{type:"object",properties:{sources:{type:"object",title:"File javascript",required:["prod","position"],widget:{formlyConfig:{props:{fieldsetTemplate:!0}}},properties:{prod:{type:"string",title:"Link del file javascript (pubblico):",description:"Si tratta del codice che verr\xe0 caricato per la generalit\xe0 di utenti che useranno lo script.",widget:{formlyConfig:{validators:{pattern:{expression:r=>!r.value||T.u_.allowParams.test(r.value),message:(r,n)=>{var o;return'"'.concat(null===(o=n.formControl)||void 0===o?void 0:o.value,'" non \xe8 un file javascript valido!')}}}}}},beta:{type:["string","null"],title:"Link del file javascript per la versione beta (caricato solo per il dev):",description:"Si tratta del codice che verr\xe0 caricato, in alternativa a quello pubblico, solo per lo sviluppatore.",default:null,widget:{formlyConfig:{validators:{pattern:{expression:r=>!r.value||T.Kw.allowParams.test(r.value),message:(r,n)=>{var o;return'"'.concat(null===(o=n.formControl)||void 0===o?void 0:o.value,'" non \xe8 un file javascript valido!')}}}}}},position:{type:"string",title:"Posizione in cui verr\xe0 importato il file js:",oneOf:T.By,default:T.By[7].const}}},layouts:{type:"object",title:"Compatibilit\xe0",description:"Se uno script non \xe8 compatibile con un determinato layout, in automatico [i]non[/i] verr\xe0 eseguito sui forum che possiedono tale layout.",widget:{formlyConfig:{props:{fieldsetTemplate:!0}}},properties:{quirks:{type:"boolean",title:"Compatibile con il layout Quirks",default:!1},standard:{type:"boolean",title:"Compatibile con il layout Standard",default:!0},ffmobile:{type:"boolean",title:"Compatibile con il layout FFMobile",default:!0}}},privacy:{type:"object",title:"Visibilit\xe0",description:"Nascondi lo script dalla lista per tenerlo privato. Se lo desideri, puoi aggiungere una serie di forum e utenti che saranno abilitati a usarlo.",widget:{formlyConfig:{props:{fieldsetTemplate:!0}}},properties:{hidden:{type:"boolean",title:"Script nascosto (test o script privati)",default:!1,widget:{formlyConfig:{props:{formCheck:"switch"}}}},allowed:{type:"object",widget:{formlyConfig:{resetOnHide:!1,expressions:{hide:r=>{var n;return!(null!==(n=r.parent)&&void 0!==n&&n.model.hidden)}}}},properties:{forums:{type:"forum-list",title:"Forum abilitati",default:[],widget:{formlyConfig:{resetOnHide:!1,props:{selectDomain:!0}}}},users:{type:"forum-users",title:"Utenti abilitati",default:[],widget:{formlyConfig:{resetOnHide:!1,props:{selectDomain:!0}}}}}}}}}}}}(this.script)),this.optionsForm={title:"Opzioni e codici",valid:!0,type:z.OPTIONS,model:{},schema:{}},this.advancedForm=(0,Z.Z)({title:"Avanzate",valid:!0,type:z.ADVANCED},function je(t,r,n){const o=r?{enabled:r.edit.length>0||r.settings.length>0,types:{edit:[...r.edit],settings:[...r.settings]}}:void 0,i=Object.values(H.vs).filter(a=>a.active&&a.ffuid!==t&&!I.HQ.includes(a.ffuid)).sort((a,s)=>a.name.localeCompare(s.name)).map(a=>({title:a.name,const:a.ffuid}));return{model:n?(0,Z.Z)({webhook:JSON.parse(JSON.stringify(n.webhook)),sandboxes:JSON.parse(JSON.stringify(n.sandboxes))},o?{additionalPermissions:o}:{}):{},schema:{type:"object",properties:(0,Z.Z)({sandboxes:{type:"array",title:"Sandbox legate allo script (opzionali)",description:"Le sandbox posso essere usate per aggiungere contenuti specifici allo script nella pagina delle impostazioni oppure per creare delle vere e proprie pagine personalizzate!",uniqueItems:!0,default:[],items:{type:"object",required:["value","slug"],properties:{name:{type:["string","null"],title:"Nome della sandbox:",default:""},slug:{type:"string",title:"Slug della sandbox:",description:"Lo slug viene usato per generare il link alla sandbox, se non inserita nella pagina delle impostazioni dello script. Pertanto, se verr\xe0 cambiato, [b]cambier\xe0 anche il link![/b]",widget:{formlyConfig:{hooks:{onInit:a=>{const s=a.formControl;null!=s&&s.value||null==s||s.setValue((0,ke.Z)())}},validators:{pattern:{expression:a=>!a.value||/^[a-zA-Z0-9-]+$/.test(a.value),message:(a,s)=>{var l;return'"'.concat(null===(l=s.formControl)||void 0===l?void 0:l.value,'" non \xe8 uno slug valido!')}}}}}},inSettings:{type:"boolean",title:"Visualizza questa sandbox nella pagina delle impostazioni dello script",default:!1},value:{type:"array",title:"Risorse js-css-html",description:"\xc8 possibile inserire una lista di link a risorse js, css o ad intere pagine html. Se viene specificata una risorsa HTML, il suo contenuto sar\xe0 riportato nella sandbox.",uniqueItems:!0,items:{type:"string",title:"Link alla risorsa:",widget:{formlyConfig:{validators:{pattern:{expression:a=>!a.value||B(a.value),message:(a,s)=>{var l;return'"'.concat(null===(l=s.formControl)||void 0===l?void 0:l.value,'" non \xe8 un file valido!')}}}}}}}}}},webhook:{type:"object",title:"Impostazioni webhook (opzionali)",description:"Se lo desideri, puoi indicare un url che verr\xe0 chiamato (richiesta [i]POST[/i]) ogni volta che si verifica [i]l'evento abilitato[/i] dai checkbox seguenti (visibili dopo aver specificato il link al webhook), avente come payload le informazioni riguardanti l'evento (ad esempio nel caso di modifica delle impostazioni dello script verranno inviate le impostazioni dello script stesso).",widget:{formlyConfig:{props:{fieldsetTemplate:!0}}},properties:{source:{type:["string","null"],title:"Link al webhook:",default:null,widget:{formlyConfig:{validators:{pattern:{expression:a=>!a.value||B(a.value),message:(a,s)=>{var l;return'"'.concat(null===(l=s.formControl)||void 0===l?void 0:l.value,'" non \xe8 un link valido!')}}}}}},calls:{type:"object",widget:{formlyConfig:{expressions:{hide:a=>{var s,l;return!(null!==(s=a.parent)&&void 0!==s&&null!==(s=s.model)&&void 0!==s&&s.source&&null!==(l=a.parent)&&void 0!==l&&null!==(l=l.formControl)&&void 0!==l&&l.valid)}}}},properties:{onSettings:{type:"boolean",title:"Chiama il webhook quando vengono salvate le impostazioni",default:!1},onManage:{type:"boolean",title:"Chiama il webhook quando lo script viene installato o disinstallato",default:!1}}}}}},o?{additionalPermissions:{type:"object",title:"Permessi aggiuntivi sullo script",description:"\xc8 possibile attribuire ad [b]altri sviluppatori[/b] alcuni permessi legati allo script. Si tratta della possibilit\xe0 di modificare lo script (con l'esclusione della gestione dei permessi aggiuntivi) e di modificare le impostazioni per i forum che hanno lo script installato (utile nei casi di assistenza).",widget:{formlyConfig:{props:{fieldsetTemplate:!0}}},properties:{enabled:{type:"boolean",title:"Abilita i permessi aggiuntivi",default:!1,widget:{formlyConfig:{props:{formCheck:"switch"}}}},types:{type:"object",widget:{formlyConfig:{resetOnHide:!1,expressions:{hide:a=>{var s;return!(null!==(s=a.parent)&&void 0!==s&&s.model.enabled)}}}},properties:{edit:{type:"array",uniqueItems:!0,title:"Sviluppatori abilitati a modificare lo script:",default:[],items:{type:"string",oneOf:i},widget:{formlyConfig:{resetOnHide:!1,props:{resetButton:!0}}}},settings:{type:"array",uniqueItems:!0,title:"Sviluppatori abilitati a modificare le impostazioni:",default:[],items:{type:"string",oneOf:i},widget:{formlyConfig:{resetOnHide:!1,props:{resetButton:!0}}}}}}}}}:{})}}}(this.isNewScript?this.ffuid:this.script.author.ffuid,i?this.additionalPermissions:void 0,this.script))}ngAfterViewInit(){var o;this.optionsForm=(0,Z.Z)((0,Z.Z)({},this.optionsForm),function Ne(t,r=[],n=[g.tr.OTHER],o){var i,a;const s=null!==(i=null==t?void 0:t.packages.filter(c=>void 0===T.VA.find(b=>b.link===c)))&&void 0!==i?i:[],l=null!==(a=null==t?void 0:t.packages.filter(c=>-1===s.indexOf(c)))&&void 0!==a?a:[];return{model:t?{customPackages:[...s],sharedPackages:[...l],html:t.html,parentDeps:t.dependencies.parents.map(c=>c.id),settingsSchema:(0,E._W)(t.settings.schema||"{}")}:{},schema:{type:"object",required:["settingsSchema"],properties:{sharedPackages:{type:"array",uniqueItems:!0,title:"Librerie e framework da importare (shared):",default:[],items:{type:"string",oneOf:T.VA.map(c=>({title:c.title,const:c.link}))},widget:{formlyConfig:{props:{resetButton:!0}}}},customPackages:{type:"array",uniqueItems:!0,title:"Librerie e framework da importare (custom):",default:[],items:{type:"string"},widget:{formlyConfig:{props:{resetButton:!0},validators:{pattern:{expression:c=>!c.value||!Array.isArray(c.value)||c.value.every(b=>"".concat(b).split("|").every(C=>T.u_.disallowParams.test(C)||T.pr.disallowParams.test(C))),message:()=>"Questo campo contiene un elemento non valido!"}}}}},parentDeps:{type:"array",uniqueItems:!0,title:"Script richiesti per l'installazione:",default:[],items:{type:"string",oneOf:r.map(c=>({title:"[".concat(c.type===g.AV.FORUM?"Forum":c.type===g.AV.USER?"User":"All","] ").concat(c.name),const:c.id})).sort((c,b)=>c.title>b.title?1:b.title>c.title?-1:0)},widget:{formlyConfig:{props:{resetButton:!0}}}},settingsSchema:{type:"code-editor",title:"Schema JSON per le opzioni:",default:"{}",widget:{formlyConfig:{props:{editorOptions:{height:"300px"},customLabelTemplate:o}}}},html:{type:"code-editor",title:"Codice HTML che sar\xe0 mostrato nel tag HEAD (anche sul layout FFMobile):",description:"In questo campo \xe8 possibile inserire degli stili usando il tag <style>",default:"",widget:{formlyConfig:{props:{editorOptions:{height:"300px",language:"html"}}}}}}}}}(this.script,this.scriptList,null===(o=this.profileService.scriptDev)||void 0===o?void 0:o.tabs,this.jsonSchemaLabelTemplate)),this.changeDetectorRef.detectChanges()}get areAllFormsValid(){return this.genericInfoForm.valid&&this.baseInfoForm.valid&&this.optionsForm.valid&&this.advancedForm.valid}get allForms(){return[this.genericInfoForm,this.baseInfoForm,this.optionsForm,this.advancedForm]}exportFormModel(){var o;const i=Object.assign({},...this.allForms.map(s=>s.model));i.settingsSchema=(0,E.PX)(this.optionsForm.model.settingsSchema);const a=new Blob([JSON.stringify(i)],{type:"application/json"});(0,E.On)(a,"".concat(((null===(o=this.script)||void 0===o?void 0:o.name)||"new_script").replace(/\s+/g,"_"),"-").concat(Date.now(),".json"))}importFormModel(o){this.constructAllForms=!0,[this.genericInfoForm.model,this.baseInfoForm.model,this.optionsForm.model,this.advancedForm.model]=function Qe(t){var r;return[{name:t.name,description:t.description,preview:t.preview,type:t.type,docsLink:t.docsLink,publisher:t.publisher},{sources:t.sources,layouts:t.layouts,privacy:t.privacy},{sharedPackages:t.sharedPackages,customPackages:t.customPackages,parentDeps:t.parentDeps,settingsSchema:(0,E._W)(t.settingsSchema),html:t.html},(0,Z.Z)({sandboxes:t.sandboxes,webhook:t.webhook},null!==(r=t.additionalPermissions)&&void 0!==r&&r.enabled?{additionalPermissions:t.additionalPermissions}:{})]}(o),this.toastService.show({content:"Il form \xe8 stato aggiornato con i dati contenuti nel file!"})}changeFormValidity(o,i){o.valid=i,this.constructAllForms&&this.changeDetectorRef.detectChanges()}save(){var o=this;return(0,u.Z)(function*(){var i;if(!o.areAllFormsValid)return;if(o.pendingRequest)return void o.toastService.advice(d.V.REQUEST_PENDING);o.pendingRequest=!0;const a=Object.assign({},...o.allForms.map(C=>(0,Z.Z)((0,Z.Z)({},o.scriptDevFormService.createDefaultSettings(C.schema)),C.model)));a.settingsSchema=(0,E.PX)(o.optionsForm.model.settingsSchema);const s=JSON.parse(a.settingsSchema),l=function Re(t,r){return{type:t.type,name:Pe(t.privacy.allowed)+t.name,description:t.description,faqLink:t.docsLink,preview:t.preview,publisher:t.publisher,source:t.sources.prod,sourceBeta:t.sources.beta,position:t.sources.position,sandboxes:t.sandboxes,packages:[...t.sharedPackages,...t.customPackages],dependencies:t.parentDeps,settingsDefault:JSON.stringify(r),settingsSchema:t.settingsSchema,hidden:t.privacy.hidden,html:t.html,cpQuirks:t.layouts.quirks,cpStandard:t.layouts.standard,cpMobile:t.layouts.mobile,webhook:t.webhook.source,webhookCallOnSettings:t.webhook.calls.onSettings,webhookCallOnManage:t.webhook.calls.onManage}}(a,o.scriptDevFormService.createDefaultSettings(s)),c=yield o.scriptDevService.upsertScript(l,null===(i=o.script)||void 0===i?void 0:i.id),b=!a.additionalPermissions||(yield o.savePermissions(a.additionalPermissions.enabled,a.additionalPermissions.types));b&&a.additionalPermissions&&(o.additionalPermissions={edit:[...a.additionalPermissions.types.edit],settings:[...a.additionalPermissions.types.settings]}),o.saveEvent.emit(c&&b?a.name:void 0),o.pendingRequest=!1})()}savePermissions(o,i){var a=this;return(0,u.Z)(function*(){if(!a.script)return!0;const s=o?{edit:(0,q.tX)(a.additionalPermissions.edit,i.edit),settings:(0,q.tX)(a.additionalPermissions.settings,i.settings)}:a.additionalPermissions,l=o?{edit:(0,q.tX)(i.edit,a.additionalPermissions.edit),settings:(0,q.tX)(i.settings,a.additionalPermissions.settings)}:{edit:[],settings:[]};return yield a.scriptDevService.updateScriptPermissions([...s.edit.map(c=>a.createScriptPermissionInput(c,g.Af.EDIT,!1)),...s.settings.map(c=>a.createScriptPermissionInput(c,g.Af.SETTINGS,!1)),...l.edit.map(c=>a.createScriptPermissionInput(c,g.Af.EDIT,!0)),...l.settings.map(c=>a.createScriptPermissionInput(c,g.Af.SETTINGS,!0))])})()}createScriptPermissionInput(o,i,a){return{scriptId:this.script.id,targetId:o,action:a?Q.ADD:Q.REMOVE,level:i}}}return(t=r).\u0275fac=function(o){return new(o||t)(e.Y36(Ge.H),e.Y36(e.sBO),e.Y36(O.k),e.Y36(Be),e.Y36(h.N),e.Y36(Le.d))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-script-dev-settings-form"]],viewQuery:function(o,i){if(1&o&&e.Gf(lt,5),2&o){let a;e.iGM(a=e.CRH())&&(i.jsonSchemaLabelTemplate=a.first)}},inputs:{script:"script",scriptList:"scriptList"},outputs:{tipsEvent:"tipsEvent",cancelEvent:"cancelEvent",saveEvent:"saveEvent"},decls:16,vars:12,consts:[["ngbAccordion","",1,"flat-container","border-0",3,"closeOthers","destroyOnHide"],["ngbAccordionItem","",4,"ngFor","ngForOf"],["id","dev-form-btns",1,"list-unstyled","d-flex","justify-content-center","justify-content-md-end","lign-items-center","mb-0","mt-3"],[1,"me-2"],["type","button",1,"btn","btn-danger","d-flex","align-items-center",3,"click"],["type","button",1,"btn","btn-success","d-flex","align-items-center",3,"disabled","click"],["jsonSchemaLabel",""],[3,"formSchemaString"],["schemaDemo",""],["buttonsId","dev-form-btns",3,"isFormValid","canDownload","tipsEvent","cancelEvent","saveEvent","downloadEvent"],["modalTitle","Esportazione script",3,"exportEvent","importEvent"],["exporter",""],["ngbAccordionItem",""],["ngbAccordionHeader",""],["ngbAccordionButton","",1,"fs-lg","fv-small-caps",3,"innerText"],["ngbAccordionCollapse",""],["ngbAccordionBody",""],["app-custom-form","",1,"custom-form",3,"schema","model","showFieldValidationOnInit","validityChangeEvent"],["customForm",""],[1,"form-label","d-flex"],["class","d-block",3,"for",4,"ngIf"],["appTippy","Visualizza la demo",1,"ms-auto",3,"tippyProps","disableOnTouchDevice","click"],[1,"d-block","material-icons-outlined","text-success","cursor-pointer"],[1,"d-block",3,"for"],["aria-hidden","true",4,"ngIf"],["aria-hidden","true"]],template:function(o,i){if(1&o){const a=e.EpF();e.TgZ(0,"div",0),e.YNc(1,ct,6,1,"div",1),e.qZA(),e.TgZ(2,"ul",2)(3,"li",3)(4,"button",4),e.NdJ("click",function(){return i.cancelEvent.emit()}),e._uU(5,"Annulla"),e.qZA()(),e.TgZ(6,"li")(7,"button",5),e.NdJ("click",function(){return i.save()}),e._uU(8,"Salva"),e.qZA()()(),e.YNc(9,gt,5,4,"ng-template",null,6,e.W1O),e._UZ(11,"app-script-dev-settings-schema-demo",7,8),e.TgZ(13,"app-script-form-utilities",9),e.NdJ("tipsEvent",function(){return i.tipsEvent.emit()})("cancelEvent",function(){return i.cancelEvent.emit()})("saveEvent",function(){return i.save()})("downloadEvent",function(){e.CHM(a);const l=e.MAs(15);return e.KtG(l.open())}),e.qZA(),e.TgZ(14,"app-form-exporter",10,11),e.NdJ("exportEvent",function(){return i.exportFormModel()})("importEvent",function(l){return i.importFormModel(l)}),e.qZA()}2&o&&(e.Q6J("closeOthers",!0)("destroyOnHide",!i.constructAllForms),e.xp6(),e.Q6J("ngForOf",e.l5B(7,_t,i.genericInfoForm,i.baseInfoForm,i.optionsForm,i.advancedForm)),e.xp6(6),e.Q6J("disabled",!i.areAllFormsValid),e.xp6(4),e.Q6J("formSchemaString",i.optionsForm.model.settingsSchema||"{}"),e.xp6(2),e.Q6J("isFormValid",i.areAllFormsValid)("canDownload",!0))},dependencies:[f.sg,f.O5,W.d,Ke,v.fD,v.QQ,v.VE,v.I,v.fA,v.ud,V.b,Xe.$,st],styles:["ul[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{box-shadow:0 .125rem .25rem #00000013}.custom-form[_ngcontent-%COMP%]{margin-bottom:-.75rem}@media (max-width: 768px){.accordion-item[_ngcontent-%COMP%]{border-radius:0!important;border-width:1px 0!important}}"]}),r})();var vt=p(4143),Zt=p(9485);const ht=["app-script-dev-settings-info",""];function Ut(t,r){1&t&&(e.ynx(0),e.TgZ(1,"div",15),e._uU(2,"Creazione di un nuovo script!"),e.qZA(),e.TgZ(3,"div")(4,"small"),e._uU(5,"Lo script verr\xe0 aggiunto dopo aver salvato le impostazioni"),e.qZA()(),e.BQk())}function bt(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"a",23),e.NdJ("click",function(){e.CHM(n);const i=e.oxw(3),a=e.MAs(31);return i.installationClick(),e.KtG(a.open())}),e.qZA()}if(2&t){const n=e.oxw(3);e.Q6J("innerText",n.scriptWithStats.stats.users.length+n.scriptWithStats.stats.forums.length)}}function Tt(t,r){1&t&&(e.TgZ(0,"div",24),e._uU(1,"-"),e.qZA())}function St(t,r){if(1&t&&(e.ynx(0),e.TgZ(1,"div",17),e._UZ(2,"div",18)(3,"div",19),e.qZA(),e.TgZ(4,"div",20)(5,"div"),e._uU(6,"Installazioni:"),e.qZA(),e.YNc(7,bt,1,1,"a",21)(8,Tt,2,0,"ng-template",null,22,e.W1O),e.qZA(),e.BQk()),2&t){const n=e.MAs(9),o=e.oxw(2);e.xp6(2),e.Q6J("innerText","Script:"),e.xp6(),e.Q6J("innerText",o.scriptWithStats.script.name),e.xp6(4),e.Q6J("ngIf",o.scriptWithStats.stats.users.length>0||o.scriptWithStats.stats.forums.length>0)("ngIfElse",n)}}function At(t,r){1&t&&(e.TgZ(0,"div",25),e._UZ(1,"span",26),e.qZA(),e.TgZ(2,"div",25),e._UZ(3,"span",27),e.qZA())}function qt(t,r){if(1&t&&e.YNc(0,St,10,4,"ng-container",4)(1,At,4,0,"ng-template",null,16,e.W1O),2&t){const n=e.MAs(2),o=e.oxw();e.Q6J("ngIf",o.scriptWithStats)("ngIfElse",n)}}let yt=(()=>{var t;class r{constructor(o){this.scriptListService=o,this.isNewScript=!0,this.tipsButtonEvent=new e.vpe,this.initializeTipsModal=!1,this.readMore=vt.Z,this.redirectAfterSaving=!0}ngOnInit(){this.settingsOptions=this.scriptListService.settingsOptions,this.redirectAfterSaving=this.settingsOptions.redirectAfterSaving||this.isNewScript}installationClick(){this.selectedScript=this.scriptWithStats}saveSettingsOptions(){this.scriptListService.settingsOptions=(0,Z.Z)((0,Z.Z)({},this.settingsOptions),{},{redirectAfterSaving:this.redirectAfterSaving})}}return(t=r).\u0275fac=function(o){return new(o||t)(e.Y36(U.o))},t.\u0275cmp=e.Xpm({type:t,selectors:[["","app-script-dev-settings-info",""]],inputs:{isNewScript:"isNewScript",scriptWithStats:"scriptWithStats"},outputs:{tipsButtonEvent:"tipsButtonEvent"},attrs:ht,decls:59,vars:7,consts:[[1,"flat-container","px-3","px-md-4","py-3","target-info","min-w-0","d-flex","flex-column"],[1,"mb-2"],["role","button",1,"cursor-pointer","d-sm-none",3,"innerText","click"],[1,"my-auto"],[4,"ngIf","ngIfElse"],["edit",""],[1,"form-check","mb-0","mt-2"],["type","checkbox","id","redirect-back",1,"form-check-input",3,"ngModel","disabled","ngModelChange"],["for","redirect-back",1,"form-check-label"],[3,"scriptWithStats"],["installationModal",""],[1,"flat-container","px-3","px-md-4","py-3","tips","min-w-0","d-none","d-sm-block"],[1,"mb-2","h5"],[1,"mb-0"],["role","button",1,"cursor-pointer",3,"innerText","click"],[1,"text-uppercase"],["placeholders",""],[1,"script","d-flex"],[1,"text-nowrap",3,"innerText"],[1,"text-uppercase","text-truncate","mw-100","ms-1",3,"innerText"],[1,"installations","d-flex"],["role","button","class","d-block ms-1",3,"innerText","click",4,"ngIf","ngIfElse"],["noInstalled",""],["role","button",1,"d-block","ms-1",3,"innerText","click"],[1,"ms-1"],[1,"placeholder-glow"],[1,"placeholder","col-10","col-sm-8"],[1,"placeholder","col-8","col-sm-6"]],template:function(o,i){if(1&o&&(e.TgZ(0,"div",0)(1,"p",1),e._uU(2," Questo pannello consente di modificare le "),e.TgZ(3,"em"),e._uU(4,"impostazioni"),e.qZA(),e._uU(5," di uno script o di "),e.TgZ(6,"em"),e._uU(7,"crearne"),e.qZA(),e._uU(8," uno nuovo. Le varie opzioni presenti determineranno il comportamento dello script una volta "),e.TgZ(9,"em"),e._uU(10,"installato"),e.qZA(),e._uU(11," da un utente o sito. Dopo aver salvato le modifiche, queste diverranno "),e.TgZ(12,"em"),e._uU(13,"automaticamente"),e.qZA(),e._uU(14," effettive anche per coloro che hanno gi\xe0 aggiunto lo script. Per questo motivo, \xe8 importante "),e.TgZ(15,"em"),e._uU(16,"adattare il codice javascript"),e.qZA(),e._uU(17," affinch\xe9 risulti adeguato alle eventuali nuove impostazioni specificate. Data la loro importanza, solo gli "),e.TgZ(18,"em"),e._uU(19,"sviluppatori"),e.qZA(),e._uU(20," abilitati possono cambiare le variabili di uno script. "),e.TgZ(21,"a",2),e.NdJ("click",function(){return i.tipsButtonEvent.emit()}),e.qZA()(),e.TgZ(22,"div",3),e.YNc(23,Ut,6,0,"ng-container",4)(24,qt,3,2,"ng-template",null,5,e.W1O),e.qZA(),e.TgZ(26,"div",6)(27,"input",7),e.NdJ("ngModelChange",function(s){return i.redirectAfterSaving=s})("ngModelChange",function(){return i.saveSettingsOptions()}),e.qZA(),e.TgZ(28,"label",8),e._uU(29," Torna alla lista script dopo il salvataggio "),e.qZA()(),e._UZ(30,"app-script-dev-stats-details",9,10),e.qZA(),e.TgZ(32,"div",11)(33,"div",12),e._uU(34,"Tips and tricks"),e.qZA(),e.TgZ(35,"p",1),e._uU(36," Accedendo a questo pannello da "),e.TgZ(37,"em"),e._uU(38,"desktop"),e.qZA(),e._uU(39,", si possono usare le icone presenti sulla barra laterale destra per navigare velocemente nella pagina e salvare o annullare l'operazione corrente in un istante. Inoltre, diviene possibile utilizzare l'apposito "),e.TgZ(40,"em"),e._uU(41,"editor del codice"),e.qZA(),e._uU(42," per i campi "),e.TgZ(43,"em"),e._uU(44,"Schema JSON delle opzioni"),e.qZA(),e._uU(45," e "),e.TgZ(46,"em"),e._uU(47,"Codice HTML che sar\xe0 mostrato nel tag HEAD"),e.qZA(),e._uU(48,", in modo da essere agevolati nella scrittura del codice. Tramite l'opzione per mantenere lo script "),e.TgZ(49,"em"),e._uU(50,"nascosto nella lista"),e.qZA(),e._uU(51,", \xe8 possibile infine effettuare dei brevi test prima di renderlo accessibile a terzi."),e._UZ(52,"br"),e.qZA(),e.TgZ(53,"p",13),e._uU(54," Sfuttando il "),e.TgZ(55,"em"),e._uU(56,"JSON delle opzioni"),e.qZA(),e._uU(57," e la definizione dei campi personalizzabili, si possono creare script adatti ad ogni esigenza! "),e.TgZ(58,"a",14),e.NdJ("click",function(){return i.tipsButtonEvent.emit()}),e.qZA()()()),2&o){const a=e.MAs(25);e.xp6(21),e.Q6J("innerText",i.readMore),e.xp6(2),e.Q6J("ngIf",i.isNewScript)("ngIfElse",a),e.xp6(4),e.Q6J("ngModel",i.redirectAfterSaving)("disabled",i.isNewScript),e.xp6(3),e.Q6J("scriptWithStats",i.selectedScript),e.xp6(28),e.Q6J("innerText",i.readMore)}},dependencies:[f.O5,S.Wl,S.JJ,S.On,Zt.d],styles:["p[_ngcontent-%COMP%]{text-align:justify}"]}),r})();function xt(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"app-script-dev-settings-form",6),e.NdJ("tipsEvent",function(){e.CHM(n);const i=e.oxw(),a=e.MAs(7);return e.KtG(i.openTipsModal(a))})("cancelEvent",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.redirect())})("saveEvent",function(i){e.CHM(n);const a=e.oxw();return e.KtG(a.onSave(i))}),e.qZA()}if(2&t){const n=e.oxw();e.Q6J("script",null==n.scriptWithStats?null:n.scriptWithStats.script)("scriptList",n.scriptList)}}function Et(t,r){if(1&t){const n=e.EpF();e._UZ(0,"app-loader",7),e.TgZ(1,"app-script-form-utilities",8),e.NdJ("tipsEvent",function(){e.CHM(n);const i=e.oxw(),a=e.MAs(7);return e.KtG(i.openTipsModal(a))})("cancelEvent",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.redirect())}),e.qZA()}2&t&&(e.xp6(),e.Q6J("hasForm",!1))}let X=(()=>{var t;class r{constructor(o,i,a,s,l){this.activatedRoute=o,this.router=i,this.scriptDevService=a,this.scriptListService=s,this.toastService=l,this.breadcrumbUrl=L.B2.SCRIPT_DEV_SETTINGS,this.breadcrumbTitle="",this.loading=!0,this.newScript=!1,this.scriptList=[],this.toastMessage="Lo script <strong>{scriptName}</strong> \xe8 stato {action} correttamente!"}ngOnInit(){var o=this;return(0,u.Z)(function*(){o.scriptId=o.activatedRoute.snapshot.paramMap.get("scriptId")||void 0,o.newScript=o.activatedRoute.snapshot.data.newScript||!1,o.newScript||o.scriptId?(o.newScript?o.breadcrumbTitle="Nuovo script":(o.breadcrumbTitle="Modifica script",yield o.getScriptInfo()),o.scriptList=yield o.scriptListService.getAllScripts(),o.loading=!1):yield o.redirect()})()}getScriptInfo(){var o=this;return(0,u.Z)(function*(){const[i,a]=yield Promise.all([o.scriptListService.getScriptsByPermissions([g.Af.EDIT]),o.scriptDevService.getStats()]),s=i.list.find(c=>c.id===o.scriptId);if(!s)return void(yield o.redirect());const l=a.find(c=>c.scriptId===o.scriptId);o.scriptWithStats={script:s,stats:{users:(null==l?void 0:l.entities.filter(c=>c.targetType===g.D7.USER).map(c=>c.targetId))||[],forums:(null==l?void 0:l.entities.filter(c=>c.targetType===g.D7.FORUM).map(c=>c.targetId))||[]}}})()}redirect(){var o=this;return(0,u.Z)(function*(){yield o.router.navigate([L.B2.SCRIPT_DEV])})()}openTipsModal(o){o.open()}onSave(o){var i=this;return(0,u.Z)(function*(){o?(i.toastService.show({content:i.toastMessage.replace("{scriptName}",o).replace("{action}",i.newScript?"creato":"aggiornato")}),(i.scriptListService.settingsOptions.redirectAfterSaving||i.newScript)&&(yield i.redirect())):i.toastService.advice(d.V.GENERIC)})()}}return(t=r).\u0275fac=function(o){return new(o||t)(e.Y36(x.gz),e.Y36(x.F0),e.Y36(h.N),e.Y36(U.o),e.Y36(O.k))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-script-dev-settings"]],decls:8,vars:6,consts:[[1,"d-block",3,"pageTitle","url"],[1,"wrapper"],["app-script-dev-settings-info","",1,"d-grid","pageinfo-container",3,"isNewScript","scriptWithStats","tipsButtonEvent"],[3,"script","scriptList","tipsEvent","cancelEvent","saveEvent",4,"ngIf","ngIfElse"],["loader",""],["tipsModal",""],[3,"script","scriptList","tipsEvent","cancelEvent","saveEvent"],["message","Caricamento del form"],[3,"hasForm","tipsEvent","cancelEvent"]],template:function(o,i){if(1&o){const a=e.EpF();e._UZ(0,"app-breadcrumb",0),e.TgZ(1,"div",1)(2,"div",2),e.NdJ("tipsButtonEvent",function(){e.CHM(a);const l=e.MAs(7);return e.KtG(i.openTipsModal(l))}),e.qZA(),e.YNc(3,xt,1,2,"app-script-dev-settings-form",3)(4,Et,2,1,"ng-template",null,4,e.W1O),e.qZA(),e._UZ(6,"app-script-dev-settings-modal",null,5)}if(2&o){const a=e.MAs(5);e.Q6J("pageTitle",i.breadcrumbTitle)("url",i.breadcrumbUrl),e.xp6(2),e.Q6J("isNewScript",i.newScript)("scriptWithStats",i.scriptWithStats),e.xp6(),e.Q6J("ngIf",!i.loading)("ngIfElse",a)}},dependencies:[te.L,f.O5,ie.R,Oe,V.b,ft,yt],styles:[".pageinfo-container[_ngcontent-%COMP%]{margin-bottom:1rem;row-gap:1rem}@media (min-width: 960px){.pageinfo-container[_ngcontent-%COMP%]{margin-bottom:1.5rem;row-gap:1.5rem}}@media (min-width: 1200px){app-breadcrumb[_ngcontent-%COMP%], .wrapper[_ngcontent-%COMP%]{margin-right:75px}}@media (min-width: 1300px){.pageinfo-container[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);column-gap:1.5rem}}"]}),r})(),zt=(()=>{var t;class r{}return(t=r).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[f.ez,M.q,y.z,v.Oz]}),r})();var Ct=p(8934),Ft=p(7780);const It=[{path:"",redirectTo:"add",pathMatch:"full"},{matcher:t=>1===t.length&&(0,R.j)(t[0].path)?{consumed:t,posParams:{scriptId:t[0]}}:null,component:X},{path:"add",component:X,data:{newScript:!0}}];let Dt=(()=>{var t;class r{}return(t=r).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[P.w,f.ez,A.I,_,S.u5,M.q,y.z,v.Gs,x.Bz.forChild(It),zt,Ct.a,Ft.M]}),r})()},4004:(ee,F,p)=>{p.d(F,{Z:()=>x});const f={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let A;const y=new Uint8Array(16);function e(){if(!A&&(A=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!A))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return A(y)}const _=[];for(let u=0;u<256;++u)_.push((u+256).toString(16).slice(1));const x=function v(u,d,h){if(f.randomUUID&&!d&&!u)return f.randomUUID();const U=(u=u||{}).random||(u.rng||e)();if(U[6]=15&U[6]|64,U[8]=63&U[8]|128,d){h=h||0;for(let g=0;g<16;++g)d[h+g]=U[g];return d}return function S(u,d=0){return _[u[d+0]]+_[u[d+1]]+_[u[d+2]]+_[u[d+3]]+"-"+_[u[d+4]]+_[u[d+5]]+"-"+_[u[d+6]]+_[u[d+7]]+"-"+_[u[d+8]]+_[u[d+9]]+"-"+_[u[d+10]]+_[u[d+11]]+_[u[d+12]]+_[u[d+13]]+_[u[d+14]]+_[u[d+15]]}(U)}}}]);