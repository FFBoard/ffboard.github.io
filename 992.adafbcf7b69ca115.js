"use strict";(self.webpackChunkpages=self.webpackChunkpages||[]).push([[992],{9485:(At,H,c)=>{c.d(H,{d:()=>It});var z=c(5861),b=c(3888),t=c(4464),V=c(8413),l=c(5879),Z=c(6814),tt=c(9473),k=c(4020),K=c(1088),R=c(8247),et=c(3602);function G(p,g){1&p&&l.GkF(0)}function at(p,g){1&p&&l.GkF(0)}const $=function(p,g,f){return{$implicit:p,sub:g,link:f}};function gt(p,g){if(1&p&&(l.TgZ(0,"li",11),l.YNc(1,at,1,0,"ng-container",6),l.qZA()),2&p){const f=g.$implicit;l.oxw(3);const m=l.MAs(6);l.xp6(1),l.Q6J("ngTemplateOutlet",m)("ngTemplateOutletContext",l.kEZ(2,$,f.name,f.domain,f.link))}}function it(p,g){if(1&p&&(l.ynx(0),l.YNc(1,gt,2,6,"li",10),l.BQk()),2&p){const f=g.$implicit;l.xp6(1),l.Q6J("ngForOf",f)}}const vt=function(p,g){return{$implicit:p,type:"forum",deleted:g}};function _t(p,g){if(1&p&&(l.TgZ(0,"fieldset",5),l.YNc(1,G,1,0,"ng-container",6),l.TgZ(2,"cdk-virtual-scroll-viewport",7)(3,"ul",8),l.YNc(4,it,2,1,"ng-container",9),l.ALo(5,"arrayChunk"),l.qZA()()()),2&p){const f=l.oxw(),m=l.MAs(4);l.xp6(1),l.Q6J("ngTemplateOutlet",m)("ngTemplateOutletContext",l.WLB(7,vt,f.forums.length,f.forumsWithDeletedCount-f.forums.length)),l.xp6(1),l.Q6J("itemSize",78),l.xp6(2),l.Q6J("cdkVirtualForOf",l.xi3(5,4,f.forums,f.itemsPerRow))}}function E(p,g){1&p&&l.GkF(0)}function Ct(p,g){1&p&&l.GkF(0)}function F(p,g){if(1&p&&(l.TgZ(0,"li",11),l.YNc(1,Ct,1,0,"ng-container",6),l.ALo(2,"titlecase"),l.qZA()),2&p){const f=g.$implicit;l.oxw(3);const m=l.MAs(6);l.xp6(1),l.Q6J("ngTemplateOutlet",m)("ngTemplateOutletContext",l.kEZ(4,$,f.name,l.lcZ(2,2,f.site)+" id: "+f.id,f.link))}}function lt(p,g){if(1&p&&(l.ynx(0),l.YNc(1,F,3,8,"li",10),l.BQk()),2&p){const f=g.$implicit;l.xp6(1),l.Q6J("ngForOf",f)}}const xt=function(p){return{"mt-3":p}},ct=function(p,g,f){return{$implicit:p,type:g,deleted:f}};function pt(p,g){if(1&p&&(l.TgZ(0,"fieldset",12),l.YNc(1,E,1,0,"ng-container",6),l.TgZ(2,"cdk-virtual-scroll-viewport",7)(3,"ul",8),l.YNc(4,lt,2,1,"ng-container",9),l.ALo(5,"arrayChunk"),l.qZA()()()),2&p){const f=l.oxw(),m=l.MAs(4);l.Q6J("ngClass",l.VKq(8,xt,f.forums.length>0)),l.xp6(1),l.Q6J("ngTemplateOutlet",m)("ngTemplateOutletContext",l.kEZ(10,ct,f.users.length,"utent"+(1===f.users.length?"e":"i"),f.usersWithDeletedCount-f.users.length)),l.xp6(1),l.Q6J("itemSize",78),l.xp6(2),l.Q6J("cdkVirtualForOf",l.xi3(5,5,f.users,f.itemsPerRow))}}function yt(p,g){if(1&p&&(l.TgZ(0,"legend",13)(1,"div",14),l._UZ(2,"div",15)(3,"div",16),l.qZA()()),2&p){const f=g.$implicit,m=g.type,C=g.deleted;l.xp6(2),l.Q6J("innerText",f+" "+m),l.xp6(1),l.Q6J("innerText","("+C+" cancellat"+(1===C?"o":"i")+")")}}function St(p,g){if(1&p&&(l.TgZ(0,"a",17),l._UZ(1,"div",18)(2,"div",19),l.qZA()),2&p){const f=g.$implicit,m=g.sub;l.Q6J("href",g.link,l.LSH),l.xp6(1),l.Q6J("innerHTML",f,l.oJD),l.xp6(1),l.Q6J("innerHTML",m,l.oJD)}}const Tt=function(p){return{"touch-device":p}},Ot=function(p){return{height:p}};let Lt=(()=>{var p;class g{constructor(m){this.breakpointObserver=m,this.forums=[],this.users=[],this.forumsWithDeletedCount=0,this.usersWithDeletedCount=0,this.touchDevice=k.eX,this.itemsPerRow=1,this.wrapperStyleHeight="",this.breakpoints={W_992_I_1:"(max-width: 991.98px)",W_1200_I_2:"(min-width: 992px) and (max-width: 1199.98px)",W_MAX_I_4:"(min-width:1200px)"},this.itemsPerRowMap=new Map([[this.breakpoints.W_992_I_1,1],[this.breakpoints.W_1200_I_2,2],[this.breakpoints.W_MAX_I_4,4]])}ngOnInit(){this.breakpointObserverSubscription=this.breakpointObserver.observe(Object.values(this.breakpoints)).subscribe(m=>{for(const S of Object.keys(m.breakpoints))if(m.breakpoints[S]){var C;this.itemsPerRow=null!==(C=this.itemsPerRowMap.get(S))&&void 0!==C?C:1;const A=Math.ceil(this.forums.length/this.itemsPerRow),Q=Math.ceil(this.users.length/this.itemsPerRow),Y=A>0&&Q>0,bt=Math.max(0,78*A-16)+Math.max(0,78*Q-16)+35*(Y?2:1);this.wrapperStyleHeight=`calc(${bt}px + ${2+(Y?4:1.5)}rem)`}})}ngOnDestroy(){var m;null===(m=this.breakpointObserverSubscription)||void 0===m||m.unsubscribe()}}return(p=g).\u0275fac=function(m){return new(m||p)(l.Y36(K.Yg))},p.\u0275cmp=l.Xpm({type:p,selectors:[["app-details-list"]],inputs:{forums:"forums",users:"users",forumsWithDeletedCount:"forumsWithDeletedCount",usersWithDeletedCount:"usersWithDeletedCount"},decls:7,vars:8,consts:[["cdkVirtualScrollingElement","",1,"wrapper","overflow-auto","mh-100","p-3","w-100",3,"ngClass","ngStyle"],["class","border rounded p-3 pt-2",4,"ngIf"],["class","border rounded p-3 pt-2",3,"ngClass",4,"ngIf"],["legend",""],["listItem",""],[1,"border","rounded","p-3","pt-2"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"v-scroll",3,"itemSize"],[1,"list-unstyled","mb-0"],[4,"cdkVirtualFor","cdkVirtualForOf"],["class","min-w-0 list-item rounded",4,"ngFor","ngForOf"],[1,"min-w-0","list-item","rounded"],[1,"border","rounded","p-3","pt-2",3,"ngClass"],[1,"legend-reset","pb-1","px-2","mb-0","mx-auto"],[1,"d-flex","flex-row","flex-wrap","align-items-center","justify-content-center"],[1,"mx-1","fs-xl",3,"innerText"],[1,"mx-1","fs-reset","lh-1","fst-italic","deleted-items",3,"innerText"],["target","_blank",1,"text-center","d-block","bg-light","border","px-3","py-2","rounded","mw-100",3,"href"],[1,"text-uppercase","text-primary","text-truncate",3,"innerHTML"],[1,"text-muted","fs-xs","text-truncate",3,"innerHTML"]],template:function(m,C){1&m&&(l.TgZ(0,"div",0),l.YNc(1,_t,6,10,"fieldset",1),l.YNc(2,pt,6,14,"fieldset",2),l.qZA(),l.YNc(3,yt,4,2,"ng-template",null,3,l.W1O),l.YNc(5,St,3,3,"ng-template",null,4,l.W1O)),2&m&&(l.Q6J("ngClass",l.VKq(4,Tt,C.touchDevice))("ngStyle",l.VKq(6,Ot,C.wrapperStyleHeight)),l.xp6(1),l.Q6J("ngIf",C.forums.length>0),l.xp6(1),l.Q6J("ngIf",C.users.length>0))},dependencies:[Z.mk,Z.sg,Z.O5,Z.tP,Z.PC,R.xd,R.x0,R.N7,R.j8,et.K,Z.rS],styles:["fieldset[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:grid;row-gap:16px}.v-scroll[_ngcontent-%COMP%]{margin-bottom:-16px!important}.v-scroll[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-bottom:16px!important}.wrapper[_ngcontent-%COMP%]:not(.touch-device)   .list-item[_ngcontent-%COMP%]{transition:box-shadow .2s;box-shadow:none}.wrapper[_ngcontent-%COMP%]:not(.touch-device)   .list-item[_ngcontent-%COMP%]:hover{box-shadow:0 .5rem 1rem #00000026}.wrapper[_ngcontent-%COMP%]:not(.touch-device)   .v-scroll[_ngcontent-%COMP%]{margin-left:-1rem!important;margin-right:-1rem!important}.wrapper[_ngcontent-%COMP%]:not(.touch-device)   .v-scroll[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:1rem!important;padding-right:1rem!important}legend[_ngcontent-%COMP%]{height:33px}legend[_ngcontent-%COMP%]   .deleted-items[_ngcontent-%COMP%]{padding-top:.175rem}.list-item[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{height:62px}@media (min-width: 576px){fieldset[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(250px,1fr));column-gap:16px}}"]}),g})();const nt=["modal"];function U(p,g){1&p&&l._UZ(0,"app-loader",7)}function Dt(p,g){if(1&p&&(l.ynx(0),l._UZ(1,"app-details-list",8),l.BQk()),2&p){const f=l.oxw(3);l.xp6(1),l.Q6J("forums",f.forums)("users",f.users)("forumsWithDeletedCount",f.scriptWithStats.stats.forums.length)("usersWithDeletedCount",f.scriptWithStats.stats.users.length)}}function dt(p,g){if(1&p&&l.YNc(0,Dt,2,4,"ng-container",2),2&p){const f=l.oxw(2);l.Q6J("ngIf",f.scriptWithStats)}}function Mt(p,g){if(1&p&&(l.ynx(0),l.YNc(1,U,1,0,"app-loader",5),l.YNc(2,dt,1,1,"ng-template",null,6,l.W1O),l.BQk()),2&p){const f=l.MAs(3),m=l.oxw();l.xp6(1),l.Q6J("ngIf",m.loading)("ngIfElse",f)}}const Pt=function(){return["d-flex","p-0"]};let It=(()=>{var p;class g{constructor(m){this.scriptDevService=m,this.opened=!1,this.modalTitle="",this.loading=!0,this.users=[],this.forums=[],this.forumsAndUsersCount=0}ngOnChanges(m){var C=this;return(0,z.Z)(function*(){var S;m.scriptWithStats&&C.scriptWithStats&&(C.loading=!0,C.forums=[],C.users=[],C.forumsAndUsersCount=0,C.modalTitle=`Dettagli dello script <em>${(null===(S=C.scriptWithStats)||void 0===S?void 0:S.script.name)||""}</em>`,yield C.setData(),C.loading=!1)})()}open(){this.opened=!0,this.modalComponentRef.open()}onHidden(){this.opened=!1}setData(){var m=this;return(0,z.Z)(function*(){if(!m.scriptWithStats)return;m.forumsAndUsersCount=m.scriptWithStats.stats.forums.length+m.scriptWithStats.stats.users.length;const C=yield m.scriptDevService.getScriptStatsDetails(m.scriptWithStats);m.forums=C.forums.sort((S,A)=>S.domain.localeCompare(A.domain)).map(S=>({domain:S.domain,link:`https://${S.domain}`,name:S.domain.split(".")[0]})),m.users=C.users.sort((S,A)=>S.nickname.localeCompare(A.nickname)).map(S=>{var A;const Q=S.uid.substring(0,2),Y=S.uid.substring(2);return{name:S.nickname,id:Y,site:((null===(A=(0,b.u7)(Q))||void 0===A?void 0:A.split("."))||["forumfree"])[0],link:((0,b.A)(Q)||"")+`/?act=Profile&MID=${Y}`}})})()}}return(p=g).\u0275fac=function(m){return new(m||p)(l.Y36(V.N))},p.\u0275cmp=l.Xpm({type:p,selectors:[["app-script-dev-stats-details"]],viewQuery:function(m,C){if(1&m&&l.Gf(nt,5),2&m){let S;l.iGM(S=l.CRH())&&(C.modalComponentRef=S.first)}},inputs:{scriptWithStats:"scriptWithStats"},features:[l.TTD],decls:5,vars:5,consts:[["size","xl",3,"title","bodyClass","hidden"],["modal",""],[4,"ngIf"],["footer",""],[1,"me-auto",3,"innerHTML"],["message","Recupero dei dettagli","class","d-flex align-items-center justify-content-center w-100 p-3",4,"ngIf","ngIfElse"],["details",""],["message","Recupero dei dettagli",1,"d-flex","align-items-center","justify-content-center","w-100","p-3"],[1,"d-block","w-100",3,"forums","users","forumsWithDeletedCount","usersWithDeletedCount"]],template:function(m,C){1&m&&(l.TgZ(0,"app-modal",0,1),l.NdJ("hidden",function(){return C.onHidden()}),l.YNc(2,Mt,4,2,"ng-container",2),l.ynx(3,3),l._UZ(4,"div",4),l.BQk(),l.qZA()),2&m&&(l.Q6J("title",C.modalTitle)("bodyClass",l.DdM(4,Pt)),l.xp6(2),l.Q6J("ngIf",C.opened),l.xp6(2),l.Q6J("innerHTML",C.forumsAndUsersCount+" "+(1===C.forumsAndUsersCount?"installazione totale":"installazioni totali"),l.oJD))},dependencies:[Z.O5,tt.R,t.z,Lt]}),g})()},8934:(At,H,c)=>{c.d(H,{a:()=>tt});var z=c(3746),b=c(6814),t=c(7905),V=c(4610),l=c(8247),Z=c(5879);let tt=(()=>{var k;class K{}return(k=K).\u0275fac=function(et){return new(et||k)},k.\u0275mod=Z.oAB({type:k}),k.\u0275inj=Z.cJS({imports:[z.P,b.ez,t.q,V.z,l.Cl]}),K})()},3992:(At,H,c)=>{c.r(H),c.d(H,{ScriptDevModule:()=>Fe});var z=c(9090),b=c(6814),t=c(5879),V=function(){return V=Object.assign||function(r){for(var n,s=1,i=arguments.length;s<i;s++)for(var e in n=arguments[s])Object.prototype.hasOwnProperty.call(n,e)&&(r[e]=n[e]);return r},V.apply(this,arguments)},l=function(){function r(n,s,i){var e=this;this.endVal=s,this.options=i,this.version="2.8.0",this.defaults={startVal:0,decimalPlaces:0,duration:2,useEasing:!0,useGrouping:!0,useIndianSeparators:!1,smartEasingThreshold:999,smartEasingAmount:333,separator:",",decimal:".",prefix:"",suffix:"",enableScrollSpy:!1,scrollSpyDelay:200,scrollSpyOnce:!1},this.finalEndVal=null,this.useEasing=!0,this.countDown=!1,this.error="",this.startVal=0,this.paused=!0,this.once=!1,this.count=function(o){e.startTime||(e.startTime=o);var a=o-e.startTime;e.remaining=e.duration-a,e.frameVal=e.useEasing?e.countDown?e.startVal-e.easingFn(a,0,e.startVal-e.endVal,e.duration):e.easingFn(a,e.startVal,e.endVal-e.startVal,e.duration):e.startVal+a/e.duration*(e.endVal-e.startVal),e.frameVal=(e.countDown?e.frameVal<e.endVal:e.frameVal>e.endVal)?e.endVal:e.frameVal,e.frameVal=Number(e.frameVal.toFixed(e.options.decimalPlaces)),e.printValue(e.frameVal),a<e.duration?e.rAF=requestAnimationFrame(e.count):null!==e.finalEndVal?e.update(e.finalEndVal):e.options.onCompleteCallback&&e.options.onCompleteCallback()},this.formatNumber=function(o){var a,d,h,v,_=o<0?"-":"";a=Math.abs(o).toFixed(e.options.decimalPlaces);var u=(a+="").split(".");if(d=u[0],h=u.length>1?e.options.decimal+u[1]:"",e.options.useGrouping){v="";for(var y=3,O=0,M=0,L=d.length;M<L;++M)e.options.useIndianSeparators&&4===M&&(y=2,O=1),0!==M&&O%y==0&&(v=e.options.separator+v),O++,v=d[L-M-1]+v;d=v}return e.options.numerals&&e.options.numerals.length&&(d=d.replace(/[0-9]/g,function(x){return e.options.numerals[+x]}),h=h.replace(/[0-9]/g,function(x){return e.options.numerals[+x]})),_+e.options.prefix+d+h+e.options.suffix},this.easeOutExpo=function(o,a,d,h){return d*(1-Math.pow(2,-10*o/h))*1024/1023+a},this.options=V(V({},this.defaults),i),this.formattingFn=this.options.formattingFn?this.options.formattingFn:this.formatNumber,this.easingFn=this.options.easingFn?this.options.easingFn:this.easeOutExpo,this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.endVal=this.validateValue(s),this.options.decimalPlaces=Math.max(this.options.decimalPlaces),this.resetDuration(),this.options.separator=String(this.options.separator),this.useEasing=this.options.useEasing,""===this.options.separator&&(this.options.useGrouping=!1),this.el="string"==typeof n?document.getElementById(n):n,this.el?this.printValue(this.startVal):this.error="[CountUp] target is null or undefined",typeof window<"u"&&this.options.enableScrollSpy&&(this.error?console.error(this.error,n):(window.onScrollFns=window.onScrollFns||[],window.onScrollFns.push(function(){return e.handleScroll(e)}),window.onscroll=function(){window.onScrollFns.forEach(function(o){return o()})},this.handleScroll(this)))}return r.prototype.handleScroll=function(n){if(n&&window&&!n.once){var s=window.innerHeight+window.scrollY,i=n.el.getBoundingClientRect(),e=i.top+window.pageYOffset,o=i.top+i.height+window.pageYOffset;o<s&&o>window.scrollY&&n.paused?(n.paused=!1,setTimeout(function(){return n.start()},n.options.scrollSpyDelay),n.options.scrollSpyOnce&&(n.once=!0)):(window.scrollY>o||e>s)&&!n.paused&&n.reset()}},r.prototype.determineDirectionAndSmartEasing=function(){var n=this.finalEndVal?this.finalEndVal:this.endVal;this.countDown=this.startVal>n,Math.abs(n-this.startVal)>this.options.smartEasingThreshold&&this.options.useEasing?(this.finalEndVal=n,this.endVal=n+(this.countDown?1:-1)*this.options.smartEasingAmount,this.duration=this.duration/2):(this.endVal=n,this.finalEndVal=null),this.useEasing=null===this.finalEndVal&&this.options.useEasing},r.prototype.start=function(n){this.error||(this.options.onStartCallback&&this.options.onStartCallback(),n&&(this.options.onCompleteCallback=n),this.duration>0?(this.determineDirectionAndSmartEasing(),this.paused=!1,this.rAF=requestAnimationFrame(this.count)):this.printValue(this.endVal))},r.prototype.pauseResume=function(){this.paused?(this.startTime=null,this.duration=this.remaining,this.startVal=this.frameVal,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count)):cancelAnimationFrame(this.rAF),this.paused=!this.paused},r.prototype.reset=function(){cancelAnimationFrame(this.rAF),this.paused=!0,this.resetDuration(),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.printValue(this.startVal)},r.prototype.update=function(n){cancelAnimationFrame(this.rAF),this.startTime=null,this.endVal=this.validateValue(n),this.endVal!==this.frameVal&&(this.startVal=this.frameVal,null==this.finalEndVal&&this.resetDuration(),this.finalEndVal=null,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count))},r.prototype.printValue=function(n){var s;if(this.el){var i=this.formattingFn(n);null!==(s=this.options.plugin)&&void 0!==s&&s.render?this.options.plugin.render(this.el,i):"INPUT"===this.el.tagName?this.el.value=i:"text"===this.el.tagName||"tspan"===this.el.tagName?this.el.textContent=i:this.el.innerHTML=i}},r.prototype.ensureNumber=function(n){return"number"==typeof n&&!isNaN(n)},r.prototype.validateValue=function(n){var s=Number(n);return this.ensureNumber(s)?s:(this.error="[CountUp] invalid start or end value: ".concat(n),null)},r.prototype.resetDuration=function(){this.startTime=null,this.duration=1e3*Number(this.options.duration),this.remaining=this.duration},r}();let Z=(()=>{class r{constructor(s,i,e){this.el=s,this.zone=i,this.platformId=e,this.options={},this.reanimateOnClick=!0,this.complete=new t.vpe}onClick(){this.reanimateOnClick&&this.animate()}ngOnChanges(s){if(!(0,b.NF)(this.platformId))return;const{options:i,endVal:e}=s;void 0!==(null==e?void 0:e.currentValue)?void 0!==this.countUp?this.zone.runOutsideAngular(()=>{this.countUp.update(this.endVal)}):this.initAndRun():void 0!==(null==i?void 0:i.currentValue)&&this.initAndRun()}animate(){this.zone.runOutsideAngular(()=>{this.countUp.reset(),this.countUp.start(()=>{this.zone.run(()=>{this.complete.emit()})})})}initAndRun(){this.zone.runOutsideAngular(()=>{this.countUp=new l(this.el.nativeElement,this.endVal,this.options),this.options.enableScrollSpy||this.animate()})}}return r.\u0275fac=function(s){return new(s||r)(t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(t.Lbi))},r.\u0275dir=t.lG2({type:r,selectors:[["","countUp",""]],hostBindings:function(s,i){1&s&&t.NdJ("click",function(){return i.onClick()})},inputs:{endVal:["countUp","endVal"],options:"options",reanimateOnClick:"reanimateOnClick"},outputs:{complete:"complete"},features:[t.TTD]}),r})(),tt=(()=>{class r{}return r.\u0275fac=function(s){return new(s||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[]]}),r})();var k=c(6223),K=c(4101),R=c(7905),et=c(4610),G=c(8726),at=c(8635),$=c(2655),gt=c(9537),it=c(5861),vt=c(8413),_t=c(6245),E=c(3729),Ct=c(3285),F=c(1088),lt=c(3888),ct=c(8645),pt=c(9773),yt=c(4723);const St=["app-script-dev-info",""];function Tt(r,n){if(1&r){const s=t.EpF();t.TgZ(0,"div",7)(1,"div",8),t._uU(2," settings "),t.qZA(),t.TgZ(3,"div",9),t._uU(4,"Migliori script per utilizzo"),t.qZA(),t.TgZ(5,"div",10)(6,"div",11),t.NdJ("chartInit",function(e){t.CHM(s);const o=t.oxw();return t.KtG(o.eChartsService.addInstanceToResizeEvent(e,o.eChartsScope))}),t.qZA()()()}if(2&r){const s=t.oxw();t.xp6(6),t.Q6J("options",s.chartOptions)("autoResize",!1)}}const Ot=function(){return["settings/add"]};let Lt=(()=>{var r;class n{constructor(i,e){this.eChartsService=i,this.breakpointObserver=e,this.loading=!0,this.filterEvent=new t.vpe,this.chartOptions=null,this.smallScreen=!0,this.eChartsScope="script-dev",this.componentDestroyed=new ct.x,this.smallScreen=this.breakpointObserver.isMatched([F.u3.XSmall,F.u3.Small])}ngOnInit(){this.breakpointObserver.observe([F.u3.XSmall,F.u3.Small]).pipe((0,pt.R)(this.componentDestroyed)).subscribe(i=>{this.smallScreen=i.matches}),this.eChartsService.setResizeChartEvent(this.componentDestroyed,this.eChartsScope)}ngOnChanges(i){i.loading&&!this.loading&&this.setData()}setData(){const e=Object.values(this.scriptStats).sort((o,a)=>a.entities.length-o.entities.length).slice(0,10);this.chartOptions=function xt(r,n){return{grid:{top:30,bottom:30,right:"2%",left:"5%"},xAxis:{type:"category",data:n,show:!1},yAxis:{type:"value",minInterval:50},tooltip:{show:!0,trigger:"axis",axisPointer:{type:"none"},borderWidth:1,borderColor:"var(--bs-border-color)",textStyle:{color:"inherit"}},series:{data:r,name:"Installazioni",type:"bar",label:{position:"inside",show:!0},color:"rgba(72, 100, 254, 0.85)",emphasis:{itemStyle:{color:"rgba(114, 138, 255, 0.85)"}},itemStyle:{borderRadius:[7,7,0,0]}}}}(e.map(o=>o.entities.length),e.map(o=>{var a;return(null===(a=this.scriptList.find(d=>d.id===o.scriptId))||void 0===a?void 0:a.name)||""}))}ngOnDestroy(){this.componentDestroyed.next(),this.componentDestroyed.complete(),this.eChartsService.clearResizeInstances(this.eChartsScope)}}return(r=n).\u0275fac=function(i){return new(i||r)(t.Y36(lt.H8),t.Y36(F.Yg))},r.\u0275cmp=t.Xpm({type:r,selectors:[["","app-script-dev-info",""]],inputs:{scriptList:"scriptList",scriptStats:"scriptStats",loading:"loading"},outputs:{filterEvent:"filterEvent"},features:[t.TTD],attrs:St,decls:14,vars:5,consts:[["class","flat-container px-3 pt-3 position-relative d-flex flex-column overflow-hidden",4,"ngIf"],[1,"flat-container","px-3","px-md-4","py-3","tips","d-none","d-sm-block"],[1,"text-justify","d-none","d-sm-block","mb-0"],[1,"d-flex","utilities"],[1,"d-block","flex-grow-1","input-filter",3,"disabled","enterKeyOnly","textEvent"],[1,"d-block","new-script","btn","btn-primary","flex-shrink-0",3,"routerLink"],[1,"d-none","d-sm-inline"],[1,"flat-container","px-3","pt-3","position-relative","d-flex","flex-column","overflow-hidden"],[1,"material-icons","chart-icon","d-block","position-absolute"],[1,"mb-0","h5"],[1,"position-relative","flex-grow-1","chart-container"],["echarts","",1,"d-block","h-100",3,"options","autoResize","chartInit"]],template:function(i,e){1&i&&(t.YNc(0,Tt,7,2,"div",0),t.TgZ(1,"div")(2,"div",1)(3,"p",2),t._uU(4," Tramite questo pannello \xe8 possibile gestire e visualizzare le statistiche dei "),t.TgZ(5,"em"),t._uU(6,"propri script"),t.qZA(),t._uU(7,". La tabella con l'elenco dei propri script fornisce le principali informazioni su ogni script inserito. Cliccando sul numero di installazioni, viene visualizzato un modal contenente i dettagli di tutti i siti e gli account che utilizzano lo script. Le tre icone finali consentono rispettivamente di cancellare la cache, aggiornare le impostazioni e rimuovere definitivamente lo script. "),t.qZA()(),t.TgZ(8,"div",3)(9,"app-input-filter-text",4),t.NdJ("textEvent",function(a){return e.filterEvent.emit(a)}),t.qZA(),t.TgZ(10,"a",5),t._uU(11,"Nuovo "),t.TgZ(12,"span",6),t._uU(13,"script"),t.qZA()()()()),2&i&&(t.Q6J("ngIf",!e.smallScreen),t.xp6(9),t.Q6J("disabled",e.loading)("enterKeyOnly",!0),t.xp6(1),t.Q6J("routerLink",t.DdM(4,Ot)))},dependencies:[b.O5,yt.r,at._w,$.rH],styles:["#custom-filter[_ngcontent-%COMP%]{padding-right:calc(.5rem + 26px)}.reset-custom-filter[_ngcontent-%COMP%]{top:calc(50% - 10px);right:5px;z-index:6}.chart-container[_ngcontent-%COMP%]{min-height:150px}.chart-icon[_ngcontent-%COMP%]{right:0;top:0;transform:translate(40%,-40%) rotate(46deg);font-size:8rem;opacity:.2;animation:_ngcontent-%COMP%_chart-icon-animation 1s 1}@keyframes _ngcontent-%COMP%_chart-icon-animation{0%{transform:translate(40%,-40%) rotate(46deg)}to{transform:translate(40%,-40%) rotate(406deg)}}.tips[_ngcontent-%COMP%]{margin-bottom:1rem}.utilities[_ngcontent-%COMP%]{margin:0 1rem}.utilities[_ngcontent-%COMP%]   .new-script[_ngcontent-%COMP%]{margin-left:1rem}.utilities[_ngcontent-%COMP%]   .input-filter[_ngcontent-%COMP%], .utilities[_ngcontent-%COMP%]   .new-script[_ngcontent-%COMP%]{box-shadow:0 .125rem .25rem #00000013}@media (min-width: 768px){.utilities[_ngcontent-%COMP%]{margin:0}}@media (min-width: 960px){.tips[_ngcontent-%COMP%]{margin-bottom:1.5rem}.utilities[_ngcontent-%COMP%]   .new-script[_ngcontent-%COMP%]{margin-left:1.5rem}}"]}),n})();var nt=c(1378),U=c(8247),Dt=c(4020),dt=c(1410),Mt=c(8055),Pt=c(6988),It=c(9485),p=function(r){return r[r.TITLE=0]="TITLE",r[r.STATUS=1]="STATUS",r[r.DOCS=2]="DOCS",r[r.PREVIEW=3]="PREVIEW",r[r.TYPE=4]="TYPE",r[r.INSTALLATIONS=5]="INSTALLATIONS",r}(p||{}),g=c(4064);function f(r,n,s){switch(s){case p.TITLE:return r.sort((i,e)=>i.name.localeCompare(e.name));case p.INSTALLATIONS:{const i=Object.values(n).sort((o,a)=>a.entities.length-o.entities.length),e={};for(const[o,a]of i.entries())e[a.scriptId]=o+1;return r.sort((o,a)=>(e[o.id]||1e3)-(e[a.id]||1e3))}case p.DOCS:return r.sort((i,e)=>i.docs.link&&!e.docs.link?-1:!i.docs.link&&e.docs.link?1:0);case p.PREVIEW:return r.sort((i,e)=>i.preview&&!e.preview?-1:!i.preview&&e.preview?1:0);case p.STATUS:return r.sort((i,e)=>i.privacy.hidden&&!e.privacy.hidden?1:!i.privacy.hidden&&e.privacy.hidden?-1:0);case p.TYPE:return r.sort((i,e)=>i.type===E.AV.ALL?-1:e.type===E.AV.ALL?1:i.type===E.AV.FORUM?-1:e.type===E.AV.FORUM?1:0);default:return r}}var m=c(5661),C=c(7165),S=c(5245),A=c(9473),Q=c(8595);const Y=["cacheModal"],bt=["installationModal"],Jt=["deletionModal"],Ft=["app-script-dev-list",""];function Qt(r,n){1&r&&(t.TgZ(0,"li",18),t._UZ(1,"app-loader",19),t.qZA())}function Yt(r,n){1&r&&(t.TgZ(0,"li",21)(1,"div",22),t._uU(2," Nessuno script trovato! "),t.qZA()())}function Bt(r,n){if(1&r&&t.YNc(0,Yt,3,0,"li",20),2&r){const s=t.oxw();t.Q6J("ngIf",0===s.renderScriptList.length)}}function Wt(r,n){if(1&r&&t._UZ(0,"div",49),2&r){const s=n.$implicit;t.Q6J("ngClass",s?"text-success":"text-danger")("innerText",s?"assignment_turned_in":"highlight_off")}}function Ht(r,n){1&r&&t._UZ(0,"div",50),2&r&&t.Q6J("innerText","Forum")}const zt=function(r){return{"mt-2":r}};function Kt(r,n){if(1&r&&t._UZ(0,"div",51),2&r){const s=t.oxw().$implicit,i=t.oxw(2);t.Q6J("ngClass",t.VKq(2,zt,s.type===i.scriptType.ALL))("innerText","Utenti")}}function Gt(r,n){if(1&r){const s=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){t.CHM(s);const e=t.oxw().$implicit,o=t.oxw(2);return t.KtG(o.installationNumberClick(e))}),t.qZA()}if(2&r){const s=t.oxw().$implicit,i=t.oxw(2);t.Q6J("innerText",i.scriptStats[s.id].entities.length)}}function $t(r,n){1&r&&(t.TgZ(0,"div"),t._uU(1,"-"),t.qZA())}function jt(r,n){1&r&&t.GkF(0)}function Xt(r,n){if(1&r){const s=t.EpF();t.TgZ(0,"a",46),t.NdJ("click",function(){t.CHM(s);const e=t.oxw().$implicit,o=t.oxw(2);return t.KtG(o.installationNumberClick(e))}),t.TgZ(1,"div",47),t._uU(2,"poll"),t.qZA(),t.TgZ(3,"div"),t._uU(4,"Installazioni"),t.qZA()()}}const qt=function(r){return{"border-bottom":r}},te=function(r){return{focus:r}},ee=function(r,n){return[r,n]},ie=function(r){return{"cache-pending":r}},ne=function(r){return{placement:r}},se=function(r,n,s){return{$implicit:r,f:n,scriptId:s}},re=function(r){return{"del-pending":r}},oe=function(){return[10,10]},ae=function(r,n){return{placement:r,offset:n}},Et=function(r){return["settings",r]};function le(r,n){if(1&r){const s=t.EpF();t.TgZ(0,"li",25)(1,"div",26),t._UZ(2,"a",27)(3,"div",28),t.qZA(),t._UZ(4,"div",29),t.YNc(5,Wt,1,2,"div",30),t.TgZ(6,"div",31),t.YNc(7,Ht,1,1,"div",32),t.YNc(8,Kt,1,4,"div",33),t.qZA(),t.TgZ(9,"div",34),t.YNc(10,Gt,1,1,"a",35),t.YNc(11,$t,2,0,"ng-template",null,36,t.W1O),t.qZA(),t.TgZ(13,"div")(14,"div",37)(15,"a",38),t.NdJ("click",function(){const o=t.CHM(s).$implicit,a=t.oxw(2);return t.KtG(a.cacheIconClick(o))}),t._uU(16,"sync"),t.qZA(),t.YNc(17,jt,1,0,"ng-container",39),t.TgZ(18,"a",40),t.NdJ("click",function(){const o=t.CHM(s).$implicit,a=t.oxw(2);return t.KtG(a.deleteScript(o))}),t._uU(19,"delete"),t.qZA()(),t.TgZ(20,"div",41,42),t.NdJ("openChange",function(){t.CHM(s);const e=t.MAs(21),o=t.oxw(2);return t.KtG(o.saveOpenedDropdown(e))}),t.TgZ(22,"div",43),t._uU(23,"more_vert"),t.qZA(),t.TgZ(24,"div",44),t.YNc(25,Xt,5,0,"a",45),t.TgZ(26,"a",46),t.NdJ("click",function(){const o=t.CHM(s).$implicit,a=t.oxw(2);return t.KtG(a.cacheIconClick(o))}),t.TgZ(27,"div",47),t._uU(28,"sync"),t.qZA(),t.TgZ(29,"div"),t._uU(30,"Aggiorna cache"),t.qZA()(),t.TgZ(31,"a",48)(32,"div",47),t._uU(33,"settings"),t.qZA(),t.TgZ(34,"div"),t._uU(35,"Impostazioni"),t.qZA()(),t.TgZ(36,"a",46),t.NdJ("click",function(){const o=t.CHM(s).$implicit,a=t.oxw(2);return t.KtG(a.deleteScript(o))}),t.TgZ(37,"div",47),t._uU(38,"delete"),t.qZA(),t.TgZ(39,"div"),t._uU(40,"Cancella script"),t.qZA()()()()()()}if(2&r){const s=n.$implicit,i=n.first,e=n.last,o=t.MAs(12),a=t.oxw(2),d=t.MAs(22);t.Q6J("ngClass",t.VKq(23,qt,!e)),t.xp6(2),t.Q6J("routerLink",s.type===a.scriptType.USER||s.type===a.scriptType.ALL?a.paths.SCRIPT_USER:a.paths.SCRIPT_FORUM)("queryParams",t.VKq(25,te,s.id))("innerHTML",(s.author.ffuid===a.ffuid?"":"["+s.author.name+"] ")+s.name,t.oJD),t.xp6(1),t.Q6J("innerText",s.description||"Nessuna descrizione"),t.xp6(1),t.Q6J("ngClass",s.privacy.hidden?"badge-red":"badge-green")("innerText",s.privacy.hidden?"Privato":"Pubblico"),t.xp6(1),t.Q6J("ngForOf",t.WLB(27,ee,s.docs.link,s.preview)),t.xp6(2),t.Q6J("ngIf",s.type===a.scriptType.FORUM||s.type===a.scriptType.ALL),t.xp6(1),t.Q6J("ngIf",s.type===a.scriptType.USER||s.type===a.scriptType.ALL),t.xp6(2),t.Q6J("ngIf",a.scriptStats[s.id]&&a.scriptStats[s.id].entities.length)("ngIfElse",o),t.xp6(5),t.Q6J("ngClass",t.VKq(30,ie,a.cachePendingId===s.id))("tippyProps",t.VKq(32,ne,i?"bottom":"top"))("disableOnTouchDevice",!0),t.xp6(2),t.Q6J("ngTemplateOutlet",d)("ngTemplateOutletContext",t.kEZ(34,se,!(s.privacy.hidden||s.description.length&&s.preview&&s.docs.link),i,s.id)),t.xp6(1),t.Q6J("ngClass",t.VKq(38,re,a.deletionPending))("tippyProps",t.WLB(41,ae,i?"bottom-end":"top-end",t.DdM(40,oe)))("disableOnTouchDevice",!0)("disableInstance",a.deletionPending),t.xp6(7),t.Q6J("ngIf",a.scriptStats[s.id]),t.xp6(6),t.Q6J("routerLink",t.VKq(44,Et,s.id))}}const ce=function(r){return{"touch-device":r}};function pe(r,n){if(1&r&&(t.ynx(0),t.TgZ(1,"cdk-virtual-scroll-viewport",23)(2,"ul",0),t.YNc(3,le,41,46,"li",24),t.qZA()(),t.BQk()),2&r){const s=t.oxw();t.xp6(1),t.Q6J("itemSize",88),t.xp6(1),t.Q6J("ngClass",t.VKq(3,ce,s.isTouch)),t.xp6(1),t.Q6J("cdkVirtualForOf",s.renderScriptList)}}const de=function(r){return{"edit-required text-danger":r}},ue=function(){return[42,10]},he=function(r,n,s){return{placement:r,offset:n,theme:s}};function fe(r,n){if(1&r&&(t.TgZ(0,"a",53)(1,"div",54),t._uU(2,"settings"),t.qZA()()),2&r){const s=n.$implicit,i=n.f,e=n.scriptId,o=t.oxw();t.Q6J("routerLink",t.VKq(5,Et,e))("ngClass",t.VKq(7,de,s))("appTippy",s?o.tippySettingsAlertMessage:o.tippySettingsMessage)("tippyProps",t.kEZ(10,he,i?"bottom-end":"top-end",t.DdM(9,ue),s?"popover":""))("disableOnTouchDevice",!0)}}let me=(()=>{var r;class n{constructor(i,e,o){var a;this.toastService=i,this.scriptFiltersService=e,this.globalsService=o,this.loading=!0,this.deletionScriptEvent=new t.vpe,this.renderScriptList=[],this.sortOptionKeys=p,this.sortOption=p.TITLE,this.scriptType=E.AV,this.isTouch=Dt.eX,this.sortValue=1,this.currentCacheScript={name:""},this.currentDeletionScript={name:""},this.deletionPending=!1,this.paths=C.B2,this.tippySettingsAlertMessage="La descrizione, l'anteprima e la guida sono essenziali per comprendere il corretto funzionamento dello script e per metterlo in evidenza agli utenti. Clicca sull'icona per modificare le impostazioni dello script e accertati di aver inserito questi elementi!",this.tippySettingsMessage="Modifica le impostazioni",this.tabs=g.Oh,this.cdkScrolledIndexChange=new ct.x,this.ffuid=null===(a=this.globalsService.credentials)||void 0===a?void 0:a.user.ffuid}ngOnChanges(i){if(i.filter){if(!this.filter)return void(i.filter.previousValue&&(this.renderScriptList=this.scriptList));const e=this.scriptFiltersService.createKeywordsRegex(this.filter);this.renderScriptList=this.scriptList.filter(o=>o.name.match(e)||o.description.match(e))}i.loading&&!this.loading&&(this.renderScriptList=this.scriptList,this.renderScriptList=f(this.renderScriptList,this.scriptStats,this.sortOption))}saveOpenedDropdown(i){i.isOpen()&&(this.openedDropdown=i,this.virtualScrollRef&&this.virtualScrollRef.scrolledIndexChange.pipe((0,pt.R)(this.cdkScrolledIndexChange)).subscribe(()=>{var e;null===(e=this.openedDropdown)||void 0===e||e.close(),this.cdkScrolledIndexChange.next()}))}setSortOption(i){this.sortOption===i?(this.sortValue=-this.sortValue,this.renderScriptList=[...this.renderScriptList.reverse()]):(this.sortValue=i===p.INSTALLATIONS?-1:1,this.sortOption=i,this.renderScriptList=[...f(this.renderScriptList,this.scriptStats,i)])}cacheIconClick(i){void 0===this.cachePendingId?(this.currentCacheScript={id:i.id,name:i.name},this.cacheModalRef.open()):this.toastService.advice(nt.V.REQUEST_PENDING)}installationNumberClick(i){(0,lt.o8)(this.scriptStats,i.id)&&(this.currentInstallationScript={script:i,stats:{forums:this.scriptStats[i.id].entities.filter(e=>e.targetType===E.D7.FORUM).map(e=>e.targetId),users:this.scriptStats[i.id].entities.filter(e=>e.targetType===E.D7.USER).map(e=>e.targetId)}},this.installationModalRef.open())}deleteScript(i){this.deletionPending?this.toastService.advice(nt.V.REQUEST_PENDING):i.dependencies.children.length>0?this.toastService.show({content:`Questo script \xe8 richiesto da altri script (<strong>${i.dependencies.children.map(e=>e.name).join(", ")}</strong>).<br>Prima di cancellarlo, elimina le dipendenze!`,level:nt.m.WARNING}):(this.currentDeletionScript={id:i.id,name:i.name},this.deletionModalRef.open())}}return(r=n).\u0275fac=function(i){return new(i||r)(t.Y36(m.k),t.Y36(S.v),t.Y36(dt.d))},r.\u0275cmp=t.Xpm({type:r,selectors:[["","app-script-dev-list",""]],viewQuery:function(i,e){if(1&i&&(t.Gf(Y,5),t.Gf(bt,5),t.Gf(Jt,5),t.Gf(U.N7,5)),2&i){let o;t.iGM(o=t.CRH())&&(e.cacheModalRef=o.first),t.iGM(o=t.CRH())&&(e.installationModalRef=o.first),t.iGM(o=t.CRH())&&(e.deletionModalRef=o.first),t.iGM(o=t.CRH())&&(e.virtualScrollRef=o.first)}},inputs:{scriptList:"scriptList",scriptStats:"scriptStats",filter:"filter",loading:"loading"},outputs:{deletionScriptEvent:"deletionScriptEvent"},features:[t.TTD],attrs:Ft,decls:29,vars:17,consts:[[1,"list-unstyled","mb-0","position-relative",3,"ngClass"],[1,"header","bg-dark","text-light","text-uppercase","fw-bold","d-flex","d-md-grid","align-items-center","py-3"],[1,"title","w-100","sortable",3,"click"],[1,"d-none","d-md-inline"],[1,"d-md-none"],[1,"d-none","d-md-block","sortable",3,"click"],[1,"d-none","d-xxl-block","sortable",3,"click"],[1,"d-none","d-xl-block","sortable",3,"click"],["class","loader py-3",4,"ngIf","ngIfElse"],["emptyContent",""],[4,"ngIf"],["settingsIcon",""],[3,"scriptName","scriptId","cachePendingEvent"],["cacheModal",""],[3,"scriptWithStats"],["installationModal",""],[3,"scriptName","scriptId","deletionPendingEvent","deletionScriptEvent"],["deletionModal",""],[1,"loader","py-3"],["message","Recupero lista script"],["class","empty p-3",4,"ngIf"],[1,"empty","p-3"],[1,"alert","alert-primary","text-center","mb-0"],["scrollWindow","",1,"mw-100",3,"itemSize"],["class","item d-flex d-md-grid align-items-center position-relative",3,"ngClass",4,"cdkVirtualFor","cdkVirtualForOf"],[1,"item","d-flex","d-md-grid","align-items-center","position-relative",3,"ngClass"],[1,"title","d-flex","flex-column","min-w-0","mw-100","me-auto","pe-2","pe-md-0"],[1,"d-block","me-auto","fw-bold","text-truncate","mw-100",3,"routerLink","queryParams","innerHTML"],[1,"fs-sm","text-muted","text-truncate","mw-100",3,"innerText"],[1,"badge","flat-badge","mx-auto","d-none","d-md-flex",3,"ngClass","innerText"],["class","material-icons-outlined d-none d-xxl-block mx-auto",3,"ngClass","innerText",4,"ngFor","ngForOf"],[1,"mx-auto","d-none","d-md-block"],["class","badge flat-badge badge-blue",3,"innerText",4,"ngIf"],["class","badge flat-badge badge-indigo",3,"ngClass","innerText",4,"ngIf"],[1,"d-none","d-xl-block","mx-auto"],["class","d-block cursor-pointer",3,"innerText","click",4,"ngIf","ngIfElse"],["noInstallations",""],[1,"d-none","d-md-flex","align-items-center","justify-content-center","utilities"],["role","button","appTippy","Aggiorna la cache",1,"d-block","material-icons-outlined","me-2",3,"ngClass","tippyProps","disableOnTouchDevice","click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["role","button","appTippy","Cancella lo script",1,"d-block","material-icons-outlined","ms-2",3,"ngClass","tippyProps","disableOnTouchDevice","disableInstance","click"],["ngbDropdown","","placement","left auto","display","dynamic","container","body",1,"d-md-none","dropdown-no-caret","utility-dropdown",3,"openChange"],["dropdown","ngbDropdown"],["ngbDropdownToggle","",1,"d-block","material-icons","cursor-pointer"],["ngbDropdownMenu","",1,"dropdown-material-icons"],["role","button","class","dropdown-item d-flex align-items-center",3,"click",4,"ngIf"],["role","button",1,"dropdown-item","d-flex","align-items-center",3,"click"],[1,"material-icons-outlined","d-block"],[1,"dropdown-item","d-flex","align-items-center",3,"routerLink"],[1,"material-icons-outlined","d-none","d-xxl-block","mx-auto",3,"ngClass","innerText"],[1,"badge","flat-badge","badge-blue",3,"innerText"],[1,"badge","flat-badge","badge-indigo",3,"ngClass","innerText"],[1,"d-block","cursor-pointer",3,"innerText","click"],[1,"d-block",3,"routerLink","ngClass","appTippy","tippyProps","disableOnTouchDevice"],[1,"d-block","material-icons-outlined","m-icon"]],template:function(i,e){if(1&i&&(t.TgZ(0,"ul",0)(1,"li",1)(2,"div",2),t.NdJ("click",function(){return e.setSortOption(e.sortOptionKeys.TITLE)}),t.TgZ(3,"span",3),t._uU(4,"Titolo"),t.qZA(),t.TgZ(5,"span",4),t._uU(6,"Lista script"),t.qZA()(),t.TgZ(7,"div",5),t.NdJ("click",function(){return e.setSortOption(e.sortOptionKeys.STATUS)}),t._uU(8,"Status"),t.qZA(),t.TgZ(9,"div",6),t.NdJ("click",function(){return e.setSortOption(e.sortOptionKeys.DOCS)}),t._uU(10,"Guida"),t.qZA(),t.TgZ(11,"div",6),t.NdJ("click",function(){return e.setSortOption(e.sortOptionKeys.PREVIEW)}),t._uU(12,"Preview"),t.qZA(),t.TgZ(13,"div",5),t.NdJ("click",function(){return e.setSortOption(e.sortOptionKeys.TYPE)}),t._uU(14,"Tipo"),t.qZA(),t.TgZ(15,"div",7),t.NdJ("click",function(){return e.setSortOption(e.sortOptionKeys.INSTALLATIONS)}),t._uU(16,"Uso"),t.qZA()(),t.YNc(17,Qt,2,0,"li",8),t.YNc(18,Bt,1,1,"ng-template",null,9,t.W1O),t.qZA(),t.YNc(20,pe,4,5,"ng-container",10),t.YNc(21,fe,3,14,"ng-template",null,11,t.W1O),t.TgZ(23,"app-script-dev-cache",12,13),t.NdJ("cachePendingEvent",function(a){return e.cachePendingId=a}),t.qZA(),t._UZ(25,"app-script-dev-stats-details",14,15),t.TgZ(27,"app-script-dev-deletion",16,17),t.NdJ("deletionPendingEvent",function(a){return e.deletionPending=void 0!==a})("deletionScriptEvent",function(){return e.deletionScriptEvent.emit(!0)}),t.qZA()),2&i){const o=t.MAs(19);t.ekj("touch-device",e.isTouch),t.Q6J("ngClass",e.sortValue>0?"asc":"desc"),t.xp6(2),t.uIk("data-sorted",e.sortOption===e.sortOptionKeys.TITLE),t.xp6(5),t.uIk("data-sorted",e.sortOption===e.sortOptionKeys.STATUS),t.xp6(2),t.uIk("data-sorted",e.sortOption===e.sortOptionKeys.DOCS),t.xp6(2),t.uIk("data-sorted",e.sortOption===e.sortOptionKeys.PREVIEW),t.xp6(2),t.uIk("data-sorted",e.sortOption===e.sortOptionKeys.TYPE),t.xp6(2),t.uIk("data-sorted",e.sortOption===e.sortOptionKeys.INSTALLATIONS),t.xp6(2),t.Q6J("ngIf",e.loading)("ngIfElse",o),t.xp6(3),t.Q6J("ngIf",!e.loading&&e.renderScriptList.length>0),t.xp6(3),t.Q6J("scriptName",e.currentCacheScript.name)("scriptId",e.currentCacheScript.id),t.xp6(2),t.Q6J("scriptWithStats",e.currentInstallationScript),t.xp6(2),t.Q6J("scriptName",e.currentDeletionScript.name)("scriptId",e.currentDeletionScript.id)}},dependencies:[b.mk,b.sg,b.O5,b.tP,A.R,G.jt,G.iD,G.Vi,$.rH,Mt.s,Pt.F,It.d,U.xd,U.x0,U.N7,U.LO,Q.$],styles:['ul[_ngcontent-%COMP%]:not(.touch-device)   li[_ngcontent-%COMP%]:not(.header):not(.loader):not(.empty){background-color:#fff}ul[_ngcontent-%COMP%]:not(.touch-device)   li[_ngcontent-%COMP%]:not(.header):not(.loader):not(.empty):hover{background-color:rgb(var(--bs-light-rgb))}ul[_ngcontent-%COMP%]:not(.touch-device)   .utilities[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(.edit-required):not(.cache-pending):not(.del-pending){opacity:.5;transition:opacity .2s}ul[_ngcontent-%COMP%]:not(.touch-device)   .utilities[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(.edit-required):not(.cache-pending):not(.del-pending):hover{opacity:1}.utilities[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(.edit-required){color:inherit}li[_ngcontent-%COMP%]:not(.loader):not(.empty){padding-left:.75rem;padding-right:.5rem}li[_ngcontent-%COMP%]:not(.loader):not(.empty):not(.header){height:88px}li[_ngcontent-%COMP%]:not(.loader):not(.empty).header{padding-right:1rem}.sortable[_ngcontent-%COMP%]{position:relative;cursor:pointer}.sortable[_ngcontent-%COMP%]:before, .sortable[_ngcontent-%COMP%]:after{transition:opacity .2s;position:absolute;right:0;width:0;height:0;content:"";opacity:.4;border-right:4px solid transparent;border-left:4px solid transparent}.sortable[_ngcontent-%COMP%]:before{bottom:4px;border-top:4px solid #fff}.sortable[_ngcontent-%COMP%]:after{top:4px;border-bottom:4px solid #fff}.asc[_ngcontent-%COMP%]   .sortable[data-sorted=true][_ngcontent-%COMP%]:after{opacity:1}.desc[_ngcontent-%COMP%]   .sortable[data-sorted=true][_ngcontent-%COMP%]:before{opacity:1}.sortable[_ngcontent-%COMP%]:not([data-sorted=true]):hover:before, .sortable[_ngcontent-%COMP%]:not([data-sorted=true]):hover:after{opacity:.6}@media (min-width: 576px){li[_ngcontent-%COMP%]:not(.loader){padding-left:1rem;padding-right:.75rem}}@media (min-width: 768px){li[_ngcontent-%COMP%]:not(.loader){grid-template-columns:3fr repeat(3,1fr);padding-left:4%}li[_ngcontent-%COMP%]:not(.loader).header > div[_ngcontent-%COMP%]:not(.title){text-align:center}li[_ngcontent-%COMP%]:not(.loader):not(.empty){padding-left:1.5rem;padding-right:.5rem!important}}@media (min-width: 1200px){li[_ngcontent-%COMP%]:not(.loader){grid-template-columns:40% repeat(4,15%);padding-left:0;padding-right:0}}@media (min-width: 1400px){li[_ngcontent-%COMP%]:not(.loader){grid-template-columns:40% repeat(6,10%)}}.edit-required[_ngcontent-%COMP%]   .m-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rotation 2s infinite}.cache-pending[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fullRotation 1s linear infinite}.del-pending[_ngcontent-%COMP%], .del-pending[_ngcontent-%COMP%]:hover{opacity:.1!important;cursor:initial!important}@keyframes _ngcontent-%COMP%_rotation{50%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_fullRotation{0%{transform:rotate(0)}to{transform:rotate(-360deg)}}']}),n})();var ge=c(4601);const ve=["app-script-dev-stats",""];let _e=(()=>{var r;class n{constructor(i){this.globalsService=i,this.scriptCreated=0,this.totalInstall=0,this.userInstall=0,this.forumInstall=0,this.countOptions={separator:"."}}ngOnChanges(i){if(i.scriptList&&this.scriptList.length){var e;const o=(null===(e=this.globalsService.credentials)||void 0===e?void 0:e.user.ffuid)||"";this.scriptCreated=this.scriptList.filter(a=>a.author.ffuid===o).length}if(i.scriptStats&&!(0,ge.nK)(this.scriptStats)){this.totalInstall=0;const o=[],a=[];for(const d of Object.values(this.scriptStats)){this.totalInstall+=d.entities.length;for(const h of d.entities)h.targetType===E.D7.USER&&-1===o.indexOf(h.targetId)?o.push(h.targetId):-1===a.indexOf(h.targetId)&&a.push(h.targetId)}this.userInstall=o.length,this.forumInstall=a.length}}}return(r=n).\u0275fac=function(i){return new(i||r)(t.Y36(dt.d))},r.\u0275cmp=t.Xpm({type:r,selectors:[["","app-script-dev-stats",""]],inputs:{scriptList:"scriptList",scriptStats:"scriptStats"},features:[t.TTD],attrs:ve,decls:32,vars:11,consts:[[1,"flat-container","d-flex","align-items-center"],[1,"fw-normal","lh-1","text-success",3,"countUp","reanimateOnClick"],[1,"text-muted","fs-xs","text-uppercase"],[1,"d-block","material-icons-outlined","text-success"],[1,"fw-normal","lh-1","text-primary",3,"countUp","options","reanimateOnClick"],[1,"d-block","material-icons","text-primary"],[1,"fw-normal","lh-1","text-indigo",3,"countUp","options","reanimateOnClick"],[1,"d-block","material-icons","text-indigo"],[1,"fw-normal","lh-1","text-danger",3,"countUp","options","reanimateOnClick"],[1,"d-block","material-icons-outlined","text-danger"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0)(1,"div")(2,"h2",1),t._uU(3," 0 "),t.qZA(),t.TgZ(4,"div",2),t._uU(5,"script creati"),t.qZA()(),t.TgZ(6,"div",3),t._uU(7," integration_instructions "),t.qZA()(),t.TgZ(8,"div",0)(9,"div")(10,"h2",4),t._uU(11," 0 "),t.qZA(),t.TgZ(12,"div",2),t._uU(13,"installazioni"),t.qZA()(),t.TgZ(14,"div",5),t._uU(15,"speed"),t.qZA()(),t.TgZ(16,"div",0)(17,"div")(18,"h2",6),t._uU(19," 0 "),t.qZA(),t.TgZ(20,"div",2),t._uU(21,"forum unici"),t.qZA()(),t.TgZ(22,"div",7),t._uU(23,"public"),t.qZA()(),t.TgZ(24,"div",0)(25,"div")(26,"h2",8),t._uU(27," 0 "),t.qZA(),t.TgZ(28,"div",2),t._uU(29,"utenti unici"),t.qZA()(),t.TgZ(30,"div",9),t._uU(31,"people_alt"),t.qZA()()),2&i&&(t.xp6(2),t.Q6J("countUp",e.scriptCreated)("reanimateOnClick",!1),t.xp6(8),t.Q6J("countUp",e.totalInstall)("options",e.countOptions)("reanimateOnClick",!1),t.xp6(8),t.Q6J("countUp",e.forumInstall)("options",e.countOptions)("reanimateOnClick",!1),t.xp6(8),t.Q6J("countUp",e.userInstall)("options",e.countOptions)("reanimateOnClick",!1))},dependencies:[Z],styles:[".flat-container[_ngcontent-%COMP%]{padding:2rem}.flat-container[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{letter-spacing:.2em}.flat-container[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%], .flat-container[_ngcontent-%COMP%]   .material-icons-outlined[_ngcontent-%COMP%]{font-size:35px;margin-left:auto}"]}),n})(),Ce=(()=>{var r;class n{constructor(i,e,o){this.scriptDevService=i,this.scriptListService=e,this.viewportScroller=o,this.scriptList=[],this.scriptStats={},this.loading=!0}ngOnInit(){var i=this;return(0,it.Z)(function*(){yield i.setData()})()}setData(){var i=this;return(0,it.Z)(function*(){i.loading=!0;const[e,o]=yield Promise.all([i.scriptListService.getScriptsByPermissions([E.Af.EDIT]),i.scriptDevService.getStats()]);i.scriptList=e.list,i.scriptStats=o.reduce((a,d)=>(a[d.scriptId]=d,a),{}),i.loading=!1})()}refresh(){var i=this;return(0,it.Z)(function*(){i.viewportScroller.scrollToPosition([0,0]),yield i.setData()})()}}return(r=n).\u0275fac=function(i){return new(i||r)(t.Y36(vt.N),t.Y36(_t.o),t.Y36(b.EM))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-script-dev"]],decls:5,vars:9,consts:[["pageTitle","Sviluppo script"],["app-script-dev-stats","",1,"stats","d-grid",3,"scriptList","scriptStats"],[1,"page-container"],["app-script-dev-info","",1,"info","d-grid",3,"scriptList","scriptStats","loading","filterEvent"],["app-script-dev-list","",1,"list","flat-container","overflow-hidden",3,"scriptList","scriptStats","loading","filter","deletionScriptEvent"]],template:function(i,e){1&i&&(t._UZ(0,"app-breadcrumb",0)(1,"div",1),t.TgZ(2,"div",2)(3,"div",3),t.NdJ("filterEvent",function(a){return e.filter=a}),t.qZA(),t.TgZ(4,"div",4),t.NdJ("deletionScriptEvent",function(){return e.refresh()}),t.qZA()()),2&i&&(t.xp6(1),t.Q6J("scriptList",e.scriptList)("scriptStats",e.scriptStats),t.xp6(2),t.Q6J("scriptList",e.scriptList)("scriptStats",e.scriptStats)("loading",e.loading),t.xp6(1),t.Q6J("scriptList",e.scriptList)("scriptStats",e.scriptStats)("loading",e.loading)("filter",e.filter))},dependencies:[Ct.L,Lt,me,_e],styles:[".page-container[_ngcontent-%COMP%], .list[_ngcontent-%COMP%]{margin-top:1rem}.stats[_ngcontent-%COMP%], .info[_ngcontent-%COMP%]{row-gap:1rem}@media (min-width: 768px){.stats[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);column-gap:1rem}}@media (min-width: 960px){.page-container[_ngcontent-%COMP%], .list[_ngcontent-%COMP%]{margin-top:1.5rem}.stats[_ngcontent-%COMP%], .info[_ngcontent-%COMP%]{column-gap:1.5rem;row-gap:1.5rem}}@media (min-width: 1400px){.stats[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}.info[_ngcontent-%COMP%]{grid-template-columns:3fr 2fr}}"]}),n})();var xe=c(232),ye=c(8934),Se=c(3038),Te=c(7230),Oe=c(7963),Le=c(591),De=c(4027),Me=c(5230),kt=c(8783),I=c(4404),Pe=c(4311),Ie=c(7481),st=c(6695),j=c(4301),ut=c(3066),wt=c(3825),be=c(1240);function Vt(r,n,s){var i=be.qW.createCanvas(),e=n.getWidth(),o=n.getHeight(),a=i.style;return a&&(a.position="absolute",a.left="0",a.top="0",a.width=e+"px",a.height=o+"px",i.setAttribute("data-zr-dom-id",r)),i.width=e*s,i.height=o*s,i}const Zt=function(r){function n(s,i,e){var a,o=r.call(this)||this;o.motionBlur=!1,o.lastFrameAlpha=.7,o.dpr=1,o.virtual=!1,o.config={},o.incremental=!1,o.zlevel=0,o.maxRepaintRectCount=5,o.__dirty=!0,o.__firstTimePaint=!0,o.__used=!1,o.__drawIndex=0,o.__startIndex=0,o.__endIndex=0,o.__prevStartIndex=null,o.__prevEndIndex=null,e=e||kt.KL,"string"==typeof s?a=Vt(s,i,e):I.isObject(s)&&(s=(a=s).id),o.id=s,o.dom=a;var d=a.style;return d&&(I.disableUserSelect(a),a.onselectstart=function(){return!1},d.padding="0",d.margin="0",d.borderWidth="0"),o.painter=i,o.dpr=e,o}return(0,Pe.ZT)(n,r),n.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},n.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},n.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},n.prototype.setUnpainted=function(){this.__firstTimePaint=!0},n.prototype.createBackBuffer=function(){var s=this.dpr;this.domBack=Vt("back-"+this.id,this.painter,s),this.ctxBack=this.domBack.getContext("2d"),1!==s&&this.ctxBack.scale(s,s)},n.prototype.createRepaintRects=function(s,i,e,o){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var x,a=[],d=this.maxRepaintRectCount,h=!1,v=new ut.Z(0,0,0,0);function _(T){if(T.isFinite()&&!T.isZero())if(0===a.length)(P=new ut.Z(0,0,0,0)).copy(T),a.push(P);else{for(var N=!1,ft=1/0,rt=0,J=0;J<a.length;++J){var w=a[J];if(w.intersect(T)){var X=new ut.Z(0,0,0,0);X.copy(w),X.union(T),a[J]=X,N=!0;break}if(h){v.copy(T),v.union(w);var mt=v.width*v.height-T.width*T.height-w.width*w.height;mt<ft&&(ft=mt,rt=J)}}var P;h&&(a[rt].union(T),N=!0),N||((P=new ut.Z(0,0,0,0)).copy(T),a.push(P)),h||(h=a.length>=d)}}for(var u=this.__startIndex;u<this.__endIndex;++u)if(y=s[u]){var O=y.shouldBePainted(e,o,!0,!0);(M=y.__isRendered&&(y.__dirty&wt.YV||!O)?y.getPrevPaintRect():null)&&_(M);var L=O&&(y.__dirty&wt.YV||!y.__isRendered)?y.getPaintRect():null;L&&_(L)}for(u=this.__prevStartIndex;u<this.__prevEndIndex;++u){var y,M;O=(y=i[u]).shouldBePainted(e,o,!0,!0),!y||O&&y.__zr||!y.__isRendered||(M=y.getPrevPaintRect())&&_(M)}do{for(x=!1,u=0;u<a.length;)if(a[u].isZero())a.splice(u,1);else{for(var D=u+1;D<a.length;)a[u].intersect(a[D])?(x=!0,a[u].union(a[D]),a.splice(D,1)):D++;u++}}while(x);return this._paintRects=a,a},n.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},n.prototype.resize=function(s,i){var e=this.dpr,o=this.dom,a=o.style,d=this.domBack;a&&(a.width=s+"px",a.height=i+"px"),o.width=s*e,o.height=i*e,d&&(d.width=s*e,d.height=i*e,1!==e&&this.ctxBack.scale(e,e))},n.prototype.clear=function(s,i,e){var o=this.dom,a=this.ctx,d=o.width,h=o.height;i=i||this.clearColor;var v=this.motionBlur&&!s,_=this.lastFrameAlpha,u=this.dpr,y=this;v&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(o,0,0,d/u,h/u));var O=this.domBack;function M(L,x,D,T){if(a.clearRect(L,x,D,T),i&&"transparent"!==i){var P=void 0;I.isGradientObject(i)?(P=(i.global||i.__width===D&&i.__height===T)&&i.__canvasGradient||(0,st.ZF)(a,i,{x:0,y:0,width:D,height:T}),i.__canvasGradient=P,i.__width=D,i.__height=T):I.isImagePatternObject(i)&&(i.scaleX=i.scaleX||u,i.scaleY=i.scaleY||u,P=(0,j.RZ)(a,i,{dirty:function(){y.setUnpainted(),y.__painter.refresh()}})),a.save(),a.fillStyle=P||i,a.fillRect(L,x,D,T),a.restore()}v&&(a.save(),a.globalAlpha=_,a.drawImage(O,L,x,D,T),a.restore())}!e||v?M(0,0,d,h):e.length&&I.each(e,function(L){M(L.x*u,L.y*u,L.width*u,L.height*u)})},n}(Ie.Z);var Ze=c(5962),Ae=c(8519),B=314159;const Ue=function(){function r(n,s,i,e){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var o=!n.nodeName||"CANVAS"===n.nodeName.toUpperCase();this._opts=i=I.extend({},i||{}),this.dpr=i.devicePixelRatio||kt.KL,this._singleCanvas=o,this.root=n,n.style&&(I.disableUserSelect(n),n.innerHTML=""),this.storage=s;var d=this._zlevelList;this._prevDisplayList=[];var h=this._layers;if(o){var _=n,u=_.width,y=_.height;null!=i.width&&(u=i.width),null!=i.height&&(y=i.height),this.dpr=i.devicePixelRatio||1,_.width=u*this.dpr,_.height=y*this.dpr,this._width=u,this._height=y;var O=new Zt(_,this,this.dpr);O.__builtin__=!0,O.initContext(),h[B]=O,O.zlevel=B,d.push(B),this._domRoot=n}else{this._width=(0,st.ap)(n,0,i),this._height=(0,st.ap)(n,1,i);var v=this._domRoot=function Ve(r,n){var s=document.createElement("div");return s.style.cssText=["position:relative","width:"+r+"px","height:"+n+"px","padding:0","margin:0","border-width:0"].join(";")+";",s}(this._width,this._height);n.appendChild(v)}}return r.prototype.getType=function(){return"canvas"},r.prototype.isSingleCanvas=function(){return this._singleCanvas},r.prototype.getViewportRoot=function(){return this._domRoot},r.prototype.getViewportRootOffset=function(){var n=this.getViewportRoot();if(n)return{offsetLeft:n.offsetLeft||0,offsetTop:n.offsetTop||0}},r.prototype.refresh=function(n){var s=this.storage.getDisplayList(!0),i=this._prevDisplayList,e=this._zlevelList;this._redrawId=Math.random(),this._paintList(s,i,n,this._redrawId);for(var o=0;o<e.length;o++){var d=this._layers[e[o]];!d.__builtin__&&d.refresh&&d.refresh(0===o?this._backgroundColor:null)}return this._opts.useDirtyRect&&(this._prevDisplayList=s.slice()),this},r.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},r.prototype._paintHoverList=function(n){var s=n.length,i=this._hoverlayer;if(i&&i.clear(),s){for(var o,e={inHover:!0,viewWidth:this._width,viewHeight:this._height},a=0;a<s;a++){var d=n[a];d.__inHover&&(i||(i=this._hoverlayer=this.getLayer(1e5)),o||(o=i.ctx).save(),(0,j.Dm)(o,d,e,a===s-1))}o&&o.restore()}},r.prototype.getHoverLayer=function(){return this.getLayer(1e5)},r.prototype.paintOne=function(n,s){(0,j.RV)(n,s)},r.prototype._paintList=function(n,s,i,e){if(this._redrawId===e){i=i||!1,this._updateLayerStatus(n);var o=this._doPaintList(n,s,i),a=o.finished,d=o.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),d&&this._paintHoverList(n),a)this.eachLayer(function(v){v.afterBrush&&v.afterBrush()});else{var h=this;(0,Ze.Z)(function(){h._paintList(n,s,i,e)})}}},r.prototype._compositeManually=function(){var n=this.getLayer(B).ctx,s=this._domRoot.width,i=this._domRoot.height;n.clearRect(0,0,s,i),this.eachBuiltinLayer(function(e){e.virtual&&n.drawImage(e.dom,0,0,s,i)})},r.prototype._doPaintList=function(n,s,i){for(var e=this,o=[],a=this._opts.useDirtyRect,d=0;d<this._zlevelList.length;d++){var v=this._layers[this._zlevelList[d]];v.__builtin__&&v!==this._hoverlayer&&(v.__dirty||i)&&o.push(v)}for(var _=!0,u=!1,y=function(L){var x=o[L],D=x.ctx,T=a&&x.createRepaintRects(n,s,O._width,O._height),P=i?x.__startIndex:x.__drawIndex,N=!i&&x.incremental&&Date.now,ft=N&&Date.now(),rt=x.zlevel===O._zlevelList[0]?O._backgroundColor:null;if(x.__startIndex===x.__endIndex)x.clear(!1,rt,T);else if(P===x.__startIndex){var J=n[P];(!J.incremental||!J.notClear||i)&&x.clear(!1,rt,T)}-1===P&&(console.error("For some unknown reason. drawIndex is -1"),P=x.__startIndex);var w,X=function(mt){var Ut={inHover:!1,allClipped:!1,prevEl:null,viewWidth:e._width,viewHeight:e._height};for(w=P;w<x.__endIndex;w++){var Nt=n[w];if(Nt.__inHover&&(u=!0),e._doPaintEl(Nt,x,a,mt,Ut,w===x.__endIndex-1),N&&Date.now()-ft>15)break}Ut.prevElClipPaths&&D.restore()};if(T)if(0===T.length)w=x.__endIndex;else for(var q=O.dpr,ot=0;ot<T.length;++ot){var W=T[ot];D.save(),D.beginPath(),D.rect(W.x*q,W.y*q,W.width*q,W.height*q),D.clip(),X(W),D.restore()}else D.save(),X(),D.restore();x.__drawIndex=w,x.__drawIndex<x.__endIndex&&(_=!1)},O=this,M=0;M<o.length;M++)y(M);return Ae.Z.wxa&&I.each(this._layers,function(L){L&&L.ctx&&L.ctx.draw&&L.ctx.draw()}),{finished:_,needsRefreshHover:u}},r.prototype._doPaintEl=function(n,s,i,e,o,a){var d=s.ctx;if(i){var h=n.getPaintRect();(!e||h&&h.intersect(e))&&((0,j.Dm)(d,n,o,a),n.setPrevPaintRect(h))}else(0,j.Dm)(d,n,o,a)},r.prototype.getLayer=function(n,s){this._singleCanvas&&!this._needsManuallyCompositing&&(n=B);var i=this._layers[n];return i||((i=new Zt("zr_"+n,this,this.dpr)).zlevel=n,i.__builtin__=!0,this._layerConfig[n]?I.merge(i,this._layerConfig[n],!0):this._layerConfig[n-.01]&&I.merge(i,this._layerConfig[n-.01],!0),s&&(i.virtual=s),this.insertLayer(n,i),i.initContext()),i},r.prototype.insertLayer=function(n,s){var i=this._layers,e=this._zlevelList,o=e.length,a=this._domRoot,d=null,h=-1;if(!i[n]&&function ke(r){return!(!r||!r.__builtin__&&("function"!=typeof r.resize||"function"!=typeof r.refresh))}(s)){if(o>0&&n>e[0]){for(h=0;h<o-1&&!(e[h]<n&&e[h+1]>n);h++);d=i[e[h]]}if(e.splice(h+1,0,n),i[n]=s,!s.virtual)if(d){var v=d.dom;v.nextSibling?a.insertBefore(s.dom,v.nextSibling):a.appendChild(s.dom)}else a.firstChild?a.insertBefore(s.dom,a.firstChild):a.appendChild(s.dom);s.__painter=this}},r.prototype.eachLayer=function(n,s){for(var i=this._zlevelList,e=0;e<i.length;e++){var o=i[e];n.call(s,this._layers[o],o)}},r.prototype.eachBuiltinLayer=function(n,s){for(var i=this._zlevelList,e=0;e<i.length;e++){var o=i[e],a=this._layers[o];a.__builtin__&&n.call(s,a,o)}},r.prototype.eachOtherLayer=function(n,s){for(var i=this._zlevelList,e=0;e<i.length;e++){var o=i[e],a=this._layers[o];a.__builtin__||n.call(s,a,o)}},r.prototype.getLayers=function(){return this._layers},r.prototype._updateLayerStatus=function(n){function s(u){o&&(o.__endIndex!==u&&(o.__dirty=!0),o.__endIndex=u)}if(this.eachBuiltinLayer(function(u,y){u.__dirty=u.__used=!1}),this._singleCanvas)for(var i=1;i<n.length;i++)if((e=n[i]).zlevel!==n[i-1].zlevel||e.incremental){this._needsManuallyCompositing=!0;break}var d,h,o=null,a=0;for(h=0;h<n.length;h++){var e,v=(e=n[h]).zlevel,_=void 0;d!==v&&(d=v,a=0),e.incremental?((_=this.getLayer(v+.001,this._needsManuallyCompositing)).incremental=!0,a=1):_=this.getLayer(v+(a>0?.01:0),this._needsManuallyCompositing),_.__builtin__||I.logError("ZLevel "+v+" has been used by unkown layer "+_.id),_!==o&&(_.__used=!0,_.__startIndex!==h&&(_.__dirty=!0),_.__startIndex=h,_.__drawIndex=_.incremental?-1:h,s(h),o=_),e.__dirty&wt.YV&&!e.__inHover&&(_.__dirty=!0,_.incremental&&_.__drawIndex<0&&(_.__drawIndex=h))}s(h),this.eachBuiltinLayer(function(u,y){!u.__used&&u.getElementCount()>0&&(u.__dirty=!0,u.__startIndex=u.__endIndex=u.__drawIndex=0),u.__dirty&&u.__drawIndex<0&&(u.__drawIndex=u.__startIndex)})},r.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},r.prototype._clearLayer=function(n){n.clear()},r.prototype.setBackgroundColor=function(n){this._backgroundColor=n,I.each(this._layers,function(s){s.setUnpainted()})},r.prototype.configLayer=function(n,s){if(s){var i=this._layerConfig;i[n]?I.merge(i[n],s,!0):i[n]=s;for(var e=0;e<this._zlevelList.length;e++){var o=this._zlevelList[e];o!==n&&o!==n+.01||I.merge(this._layers[o],i[n],!0)}}},r.prototype.delLayer=function(n){var s=this._layers,i=this._zlevelList,e=s[n];e&&(e.dom.parentNode.removeChild(e.dom),delete s[n],i.splice(I.indexOf(i,n),1))},r.prototype.resize=function(n,s){if(this._domRoot.style){var i=this._domRoot;i.style.display="none";var e=this._opts,o=this.root;if(null!=n&&(e.width=n),null!=s&&(e.height=s),n=(0,st.ap)(o,0,e),s=(0,st.ap)(o,1,e),i.style.display="",this._width!==n||s!==this._height){for(var a in i.style.width=n+"px",i.style.height=s+"px",this._layers)this._layers.hasOwnProperty(a)&&this._layers[a].resize(n,s);this.refresh(!0)}this._width=n,this._height=s}else{if(null==n||null==s)return;this._width=n,this._height=s,this.getLayer(B).resize(n,s)}return this},r.prototype.clearLayer=function(n){var s=this._layers[n];s&&s.clear()},r.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},r.prototype.getRenderedCanvas=function(n){if(this._singleCanvas&&!this._compositeManually)return this._layers[B].dom;var s=new Zt("image",this,(n=n||{}).pixelRatio||this.dpr);s.initContext(),s.clear(!1,n.backgroundColor||this._backgroundColor);var i=s.ctx;if(n.pixelRatio<=this.dpr){this.refresh();var e=s.dom.width,o=s.dom.height;this.eachLayer(function(u){u.__builtin__?i.drawImage(u.dom,0,0,e,o):u.renderToCanvas&&(i.save(),u.renderToCanvas(i),i.restore())})}else for(var a={inHover:!1,viewWidth:this._width,viewHeight:this._height},d=this.storage.getDisplayList(!0),h=0,v=d.length;h<v;h++)(0,j.Dm)(i,d[h],a,h===v-1);return s.dom},r.prototype.getWidth=function(){return this._width},r.prototype.getHeight=function(){return this._height},r}();Te.D([De.N,Me.N,Le.N,function Ne(r){r.registerPainter("canvas",Ue)}]);const Je=[{path:"",component:Ce},{path:"settings",loadChildren:()=>Promise.all([c.e(887),c.e(344),c.e(592),c.e(978)]).then(c.bind(c,9978)).then(r=>r.ScriptDevSettingsModule),data:{title:"Settings"}}];let Fe=(()=>{var r;class n{}return(r=n).\u0275fac=function(i){return new(i||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[z.w,b.ez,tt,k.u5,K.O,R.q,et.z,G.XC,at.Ns.forRoot({echarts:Oe}),$.Bz.forChild(Je),gt.U,xe.a,ye.a,U.Cl,Se.G]}),n})()}}]);