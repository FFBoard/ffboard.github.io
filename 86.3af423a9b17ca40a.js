"use strict";(self.webpackChunkpages=self.webpackChunkpages||[]).push([[86],{3285:(Fa,Bt,_)=>{_.d(Bt,{L:()=>me});var N=_(7165),Z=_(5879);let Ft=(()=>{var E;class K{constructor(){this.dependences={[N.B2.LOGIN]:null,[N.B2.HOME]:null,[N.B2.SETTINGS]:N.B2.HOME,[N.B2.SCRIPT]:N.B2.HOME,[N.B2.SCRIPT_FORUM]:N.B2.SCRIPT,[N.B2.SCRIPT_USER]:N.B2.SCRIPT,[N.B2.SCRIPT_SETTINGS]:[N.B2.SCRIPT_USER,N.B2.SCRIPT_FORUM],[N.B2.SCRIPT_SANDBOX]:[N.B2.SCRIPT_USER,N.B2.SCRIPT_FORUM],[N.B2.SCRIPT_DEV]:N.B2.SCRIPT,[N.B2.SCRIPT_DEV_SETTINGS]:N.B2.SCRIPT_DEV,[N.B2.UPLOAD]:N.B2.HOME,[N.B2.ADMIN]:N.B2.HOME,[N.B2.STATS]:N.B2.HOME,[N.B2.STATS_UPLOAD]:N.B2.STATS},this.names={[N.B2.LOGIN]:"Login",[N.B2.HOME]:"Home",[N.B2.SETTINGS]:"Notifiche",[N.B2.SCRIPT]:"Script",[N.B2.SCRIPT_FORUM]:"Forum",[N.B2.SCRIPT_USER]:"Utenti",[N.B2.SCRIPT_SETTINGS]:"Impostazioni",[N.B2.SCRIPT_SANDBOX]:"Altro",[N.B2.SCRIPT_DEV]:"Sviluppo",[N.B2.SCRIPT_DEV_SETTINGS]:"Impostazioni",[N.B2.UPLOAD]:"Upload",[N.B2.ADMIN]:"Amministrazione",[N.B2.STATS]:"Statistiche",[N.B2.STATS_UPLOAD]:"Upload"}}createPathList(tt,ct=[]){const Be=(yt,te)=>{yt.unshift({name:this.names[te]||"",path:te})},ye=yt=>this.dependences.hasOwnProperty(yt)?this.dependences[yt]instanceof Array?this.dependences[yt].includes(ct[0])?ct.shift():this.dependences[yt][0]:this.dependences[yt]:null;let Se=[{name:this.names[tt]||"",path:""}],mt=ye(tt);for(;mt;)Be(Se,mt),mt=ye(mt);return Se}}return(E=K).\u0275fac=function(tt){return new(tt||E)},E.\u0275prov=Z.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),K})();var z=_(2655),st=_(6814);function nt(E,K){if(1&E&&Z._UZ(0,"a",8),2&E){const G=Z.oxw().$implicit;Z.Q6J("routerLink",G.path)("innerText",G.name)}}function ut(E,K){if(1&E&&Z._UZ(0,"span",9),2&E){const G=Z.oxw().$implicit;Z.Q6J("innerText",G.name)}}const wt=function(E){return{active:E}};function s(E,K){if(1&E&&(Z.TgZ(0,"li",5),Z.YNc(1,nt,1,2,"a",6),Z.YNc(2,ut,1,1,"ng-template",null,7,Z.W1O),Z.qZA()),2&E){const G=K.last,tt=Z.MAs(3);Z.Q6J("ngClass",Z.VKq(4,wt,G)),Z.uIk("aria-current",G?"page":null),Z.xp6(1),Z.Q6J("ngIf",!G)("ngIfElse",tt)}}const Ee=function(E){return{"hide-nav":E}},ge=function(E){return{"d-none d-md-block":E}};let me=(()=>{var E;class K{constructor(tt,ct){this.breadcrumbService=tt,this.router=ct,this.pageTitle="",this.url="",this.nodes=[],this.hideNavOnSmallScreen=!1,this.breadcrumbs=[]}ngOnInit(){this.url||(this.url=this.router.url),this.breadcrumbs=this.breadcrumbService.createPathList(this.url,this.nodes)}}return(E=K).\u0275fac=function(tt){return new(tt||E)(Z.Y36(Ft),Z.Y36(z.F0))},E.\u0275cmp=Z.Xpm({type:E,selectors:[["app-breadcrumb"]],inputs:{pageTitle:"pageTitle",url:"url",nodes:"nodes",hideNavOnSmallScreen:"hideNavOnSmallScreen"},decls:5,vars:8,consts:[[1,"container-fluid","px-md-1","d-flex","flex-column","flex-md-row","align-items-md-center",3,"ngClass"],[1,"h3","fw-light","mb-0","lh-1","fv-small-caps","pb-1",3,"innerText"],["aria-label","breadcrumb",1,"ms-md-auto","mt-1","flex-shrink-0",3,"ngClass"],[1,"breadcrumb","mb-0","justify-content-md-end"],["class","breadcrumb-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"breadcrumb-item",3,"ngClass"],[3,"routerLink","innerText",4,"ngIf","ngIfElse"],["lastItem",""],[3,"routerLink","innerText"],[3,"innerText"]],template:function(tt,ct){1&tt&&(Z.TgZ(0,"div",0),Z._UZ(1,"h2",1),Z.TgZ(2,"nav",2)(3,"ol",3),Z.YNc(4,s,4,6,"li",4),Z.qZA()()()),2&tt&&(Z.Q6J("ngClass",Z.VKq(4,Ee,ct.hideNavOnSmallScreen)),Z.xp6(1),Z.Q6J("innerText",ct.pageTitle),Z.xp6(1),Z.Q6J("ngClass",Z.VKq(6,ge,ct.hideNavOnSmallScreen)),Z.xp6(2),Z.Q6J("ngForOf",ct.breadcrumbs))},dependencies:[st.mk,st.sg,st.O5,z.rH],styles:[".container-fluid[_ngcontent-%COMP%]:not(.hide-nav){margin-bottom:.75rem}.container-fluid.hide-nav[_ngcontent-%COMP%]{margin-bottom:.5rem}@media (min-width: 768px){.container-fluid.hide-nav[_ngcontent-%COMP%]{margin-bottom:.75rem}}@media (min-width: 960px){.container-fluid[_ngcontent-%COMP%]{margin-top:.5rem}}"]}),K})()},9090:(Fa,Bt,_)=>{_.d(Bt,{w:()=>z});var N=_(6814),Z=_(2655),Ft=_(5879);let z=(()=>{var st;class nt{}return(st=nt).\u0275fac=function(wt){return new(wt||st)},st.\u0275mod=Ft.oAB({type:st}),st.\u0275inj=Ft.cJS({imports:[N.ez,Z.Bz]}),nt})()},1086:(Fa,Bt,_)=>{_.r(Bt),_.d(Bt,{UploadModule:()=>ic});var N=_(9090),Z=_(6814),Ft=_(5748),z=_(7905),st=_(4041),nt=_(6223),ut=_(8726),wt=_(8635),s=_(5879);let Ee=(()=>{var e;class a{}return(e=a).\u0275fac=function(n){return new(n||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[Z.ez]}),a})();var ge=_(2655),me=_(3038);let E=(()=>{var e;class a{}return(e=a).\u0275fac=function(n){return new(n||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[Z.ez,me.G]}),a})();var K=_(5861),G=_(3912),tt=_(4020),ct=_(8645),Be=_(5571),ye=_(5362);let Se=(()=>{var e;class a{constructor(n){this.graphqlService=n,this.dayCache={}}getAvailableDateRange(){var n=this;return(0,K.Z)(function*(){return(yield n.graphqlService.query({query:Be.It})).data.uploadHistoryAvailableDateRange})()}getRangeData(n){var r=this;return(0,K.Z)(function*(){let i=[];const o=n.filter(l=>!r.dayCache.hasOwnProperty(l)||(i.push(r.dayCache[l]),!1));if(o.length>0){const l=yield r.sendDataRequest(o);for(const[u,c]of Object.values(l).entries())r.dayCache[o[u]]={date:new Date(o[u]),periodActiveUsers:c.periodActiveUsers,periodTopTotalFileCount:JSON.parse(c.periodTopTotalFileCount),periodTopTotalSize:JSON.parse(c.periodTopTotalSize),storageUsed:JSON.parse(c.storageUsed),toDateActiveUsers:c.toDateActiveUsers,toDateTopTotalFileCount:JSON.parse(c.toDateTopTotalFileCount),toDateTopTotalSize:JSON.parse(c.toDateTopTotalSize)},i.push(r.dayCache[o[u]])}return i})()}sendDataRequest(n){var r=this;return(0,K.Z)(function*(){const i=ye.IO(n.map((o,l)=>({operation:{name:"uploadHistory",alias:`uploadHistory${l}`},variables:{[`date${l}`]:{name:"date",type:"String!",value:o}},fields:["storageUsed","periodActiveUsers","periodTopTotalSize","periodTopTotalFileCount","toDateActiveUsers","toDateTopTotalSize","toDateTopTotalFileCount"]})));return(yield r.graphqlService.query({query:i.query,variables:i.variables})).data})()}}return(e=a).\u0275fac=function(n){return new(n||e)(s.LFG(G.Jk))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),a})();const mt="upload-stats";var yt=_(3285),te=_(9473),Wr=_(7429);function jr(e,a){if(1&e){const t=s.EpF();s.ynx(0),s.TgZ(1,"div",1),s._uU(2,"Statistiche giornaliere"),s.qZA(),s.TgZ(3,"div",2)(4,"div",3,4),s.NdJ("modelChangeEvent",function(r){s.CHM(t);const i=s.MAs(5),o=s.oxw();return s.KtG(i.form.valid&&o.modelChange(r))}),s.qZA()(),s.BQk()}if(2&e){const t=s.oxw();s.xp6(4),s.Q6J("schema",t.formlySchema)("model",t.formlyModel)("enableModelChangeEvent",!0)}}let Xr=(()=>{var e;class a{constructor(){this.modelChangeEvent=new s.vpe,this.formlyModel={}}ngOnInit(){this.formlySchema={type:"object",properties:{range:{type:"datepicker-range",title:"Periodo da visualizzare:",widget:{formlyConfig:{props:{minDate:this.availableRange.start,maxDate:this.availableRange.end,startDate:-7,endDate:-1,maxLength:30}}}},useRangeAsGlobal:{type:"boolean",title:"Usa la data di fine periodo per le statistiche globali",default:!1}}}}modelChange(n){this.modelChangeEvent.emit(n)}}return(e=a).\u0275fac=function(n){return new(n||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-upload-datepicker"]],inputs:{availableRange:"availableRange"},outputs:{modelChangeEvent:"modelChangeEvent"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"fv-small-caps","mb-2"],[1,"flat-container","px-3","pt-3","pb-0"],["app-custom-form","",3,"schema","model","enableModelChangeEvent","modelChangeEvent"],["customForm",""]],template:function(n,r){1&n&&s.YNc(0,jr,6,3,"ng-container",0),2&n&&s.Q6J("ngIf",r.formlySchema)},dependencies:[Z.O5,Wr.d],styles:["[_nghost-%COMP%]{display:block;margin:1rem 0}@media (min-width: 960px){[_nghost-%COMP%]{display:block;margin:1.5rem 0}}"]}),a})();var Te=_(1088),ee=_(8863);function Kr(e,a){if(1&e&&s._UZ(0,"div",4),2&e){const t=s.oxw(2);s.Q6J("innerText",t.statTitle)("ngClass",t.hideTitleOnSmallScreen?"d-none d-sm-block":void 0)}}function $r(e,a){if(1&e&&(s.TgZ(0,"div",2),s.YNc(1,Kr,1,2,"div",3),s.Hsn(2,1),s.qZA()),2&e){const t=s.oxw();s.xp6(1),s.Q6J("ngIf",t.statTitle)}}const qr=["*",[["","title",""]]],ti=["*","[title]"];let Fe=(()=>{var e;class a{constructor(){this.statTitle="",this.hasTitle=!0,this.hideTitleOnSmallScreen=!1}}return(e=a).\u0275fac=function(n){return new(n||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-stat-container"]],inputs:{statTitle:"statTitle",hasTitle:"hasTitle",hideTitleOnSmallScreen:"hideTitleOnSmallScreen"},ngContentSelectors:ti,decls:3,vars:1,consts:[[1,"d-flex","flex-column","flat-container","px-3","pb-3","h-100"],["class","d-flex mb-1 ps-md-1 justify-content-center align-items-center",4,"ngIf"],[1,"d-flex","mb-1","ps-md-1","justify-content-center","align-items-center"],["class","fv-small-caps fs-xl fw-500 text-nowrap",3,"innerText","ngClass",4,"ngIf"],[1,"fv-small-caps","fs-xl","fw-500","text-nowrap",3,"innerText","ngClass"]],template:function(n,r){1&n&&(s.F$t(qr),s.TgZ(0,"div",0),s.YNc(1,$r,3,1,"div",1),s.Hsn(2),s.qZA()),2&n&&(s.xp6(1),s.Q6J("ngIf",r.hasTitle))},dependencies:[Z.mk,Z.O5],styles:["[_nghost-%COMP%]{display:block;height:100%}.flat-container[_ngcontent-%COMP%]{padding-top:.75rem}"]}),a})();const ei=[[["","header",""]],[["","statValue",""]]],ai=["[header]","[statValue]"];let Va=(()=>{var e;class a{constructor(){this.value="",this.description="",this.color="default",this.colorClasses={green:"text-success",blue:"text-primary",indigo:"text-indigo",red:"text-danger",default:"text-reset"}}}return(e=a).\u0275fac=function(n){return new(n||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-stat-summary-container"]],inputs:{value:"value",description:"description",color:"color"},ngContentSelectors:ai,decls:6,vars:3,consts:[[1,"flat-container","p-3","d-flex","flex-column","justify-content-center","align-items-center","h-100","position-relative"],[1,"h2","fw-normal","lh-1","text-center","d-flex","align-items-center",3,"ngClass"],[1,"desc","text-muted","fs-xs","text-uppercase","text-center",3,"innerText"]],template:function(n,r){1&n&&(s.F$t(ei),s.TgZ(0,"div",0),s.Hsn(1),s.TgZ(2,"div",1),s._uU(3),s.Hsn(4,1),s.qZA(),s._UZ(5,"div",2),s.qZA()),2&n&&(s.xp6(2),s.Q6J("ngClass",r.colorClasses[r.color]),s.xp6(1),s.hij(" ",r.value," "),s.xp6(2),s.Q6J("innerText",r.description))},dependencies:[Z.mk],styles:["[_nghost-%COMP%]{display:block;height:100%}.desc[_ngcontent-%COMP%]{letter-spacing:.2em}"]}),a})();var ni=_(1990),Ve=_(9010),Ge=_(2641);let Je=(()=>{var e;class a{transform(n){return(0,Ge.o)(n)}}return(e=a).\u0275fac=function(n){return new(n||e)},e.\u0275pipe=s.Yjl({name:"localeString",type:e,pure:!0}),a})();function ri(e,a){1&e&&s.GkF(0)}function ii(e,a){1&e&&s.GkF(0)}function oi(e,a){1&e&&s.GkF(0)}function si(e,a){1&e&&(s.ynx(0),s.TgZ(1,"th",8),s._uU(2,"Unit\xe0"),s.qZA(),s.TgZ(3,"th",8),s._uU(4,"%"),s.qZA(),s.BQk())}function li(e,a){1&e&&s.GkF(0)}function ui(e,a){1&e&&s.GkF(0)}function ci(e,a){1&e&&s.GkF(0)}function pi(e,a){if(1&e&&(s.TgZ(0,"tr"),s._UZ(1,"td",9)(2,"td",9),s.ALo(3,"formatBytes"),s._UZ(4,"td",9)(5,"td",9),s.ALo(6,"localeString"),s._UZ(7,"td",9)(8,"td",9),s.ALo(9,"formatBytes"),s._UZ(10,"td",9),s.ALo(11,"formatBytes"),s._UZ(12,"td",9),s.qZA()),2&e){const t=a.$implicit;s.xp6(1),s.Q6J("innerText",t.ext),s.xp6(1),s.Q6J("innerText",s.lcZ(3,8,t.size.abs)),s.xp6(2),s.Q6J("innerText",t.size.perc),s.xp6(1),s.Q6J("innerText",s.lcZ(6,10,t.count.abs)),s.xp6(2),s.Q6J("innerText",t.count.perc),s.xp6(1),s.Q6J("innerText",s.lcZ(9,12,t.avgSize.abs)),s.xp6(2),s.Q6J("innerText",s.lcZ(11,14,t.avgSize.max)),s.xp6(2),s.Q6J("innerText",t.avgSize.perc)}}function fi(e,a){1&e&&s.GkF(0)}function vi(e,a){1&e&&(s.O4$(),s.TgZ(0,"svg",13),s._UZ(1,"path",14)(2,"path",15)(3,"path",16),s.qZA())}function hi(e,a){1&e&&(s.O4$(),s.TgZ(0,"svg",13),s._UZ(1,"path",14)(2,"path",15)(3,"path",17),s.qZA())}function di(e,a){if(1&e&&(s.ynx(0),s.YNc(1,fi,1,0,"ng-container",10),s.YNc(2,vi,4,0,"svg",11),s.YNc(3,hi,4,0,"ng-template",null,12,s.W1O),s.BQk()),2&e){const t=s.MAs(4),n=s.oxw(2);s.xp6(1),s.Q6J("ngIf",n.tableSortCriteria.asc),s.xp6(1),s.Q6J("ngIf",n.tableSortCriteria.asc)("ngIfElse",t)}}function gi(e,a){if(1&e&&s.YNc(0,di,5,3,"ng-container",10),2&e){const t=a.$implicit,n=s.oxw();s.Q6J("ngIf",t===n.tableSortCriteria.type)}}const mi=function(){return{$implicit:"ext"}},yi=function(){return{$implicit:"size-abs"}},Si=function(){return{$implicit:"count-abs"}},Ti=function(){return[]},bi=function(){return{$implicit:"avgSize-abs"}},xi=function(){return{$implicit:"avgSize-max"}},Ci=function(){return{$implicit:"avgSize-perc"}};let Ga=(()=>{var e;class a{constructor(){this.storageData=[],this.totalSize=1,this.totalFileCount=1,this.tableContent=[],this.tableSortCriteria={type:"",asc:!1}}ngOnChanges(n){n.storageData&&(this.tableSortCriteria={type:"",asc:!1},this.setTableContent(),this.sortTableContent(this.tableContent,"size-abs"))}setTableContent(){this.tableContent=this.storageData.map(n=>{var r;const i=n.count?n.size/n.count:0,o=(null===(r=ni.O8.find(l=>l.ext.includes(n.ext)))||void 0===r?void 0:r.maxSize)||0;return{ext:n.ext,size:{abs:n.size,perc:this.totalSize?(0,z.rp)(n.size/this.totalSize):0},count:{abs:n.count,perc:this.totalFileCount?(0,z.rp)(n.count/this.totalFileCount):0},avgSize:{abs:i,max:o,perc:o&&i?(0,z.rp)(i/o):0}}})}sortTableContent(n,r){if(this.tableSortCriteria.type===r)return this.tableSortCriteria.asc=!this.tableSortCriteria.asc,void n.reverse();this.tableSortCriteria.type=r;const i=r.split("-"),o=i.slice(1);let l=!1,u=n[0][i[0]];for(const c of o)u=u[c];l=!isNaN(Number(u)),this.tableSortCriteria.asc=!l,n.sort((c,p)=>{let f=c[i[0]],h=p[i[0]];for(const v of o)f=f[v],h=h[v];return l?h-f:f.localeCompare(h)})}}return(e=a).\u0275fac=function(n){return new(n||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-upload-stat-file-table"]],inputs:{storageData:"storageData",totalSize:"totalSize",totalFileCount:"totalFileCount"},features:[s.TTD],decls:35,vars:21,consts:[[1,"table","table-striped","table-bordered","text-center","mb-0"],["scope","col","rowspan","2",1,"align-middle","cursor-pointer",3,"click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["scope","col","colspan","2",1,"cursor-pointer",3,"click"],["scope","col","colspan","3",1,"cursor-pointer",3,"click"],[4,"ngFor","ngForOf"],["scope","col",1,"cursor-pointer",3,"click"],["sortIcon",""],["scope","col"],[3,"innerText"],[4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","fill","currentColor","viewBox","0 0 16 16","class","ms-2",4,"ngIf","ngIfElse"],["desc",""],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","fill","currentColor","viewBox","0 0 16 16",1,"ms-2"],["d","M12.438 1.668V7H11.39V2.684h-.051l-1.211.859v-.969l1.262-.906h1.046z"],["fill-rule","evenodd","d","M11.36 14.098c-1.137 0-1.708-.657-1.762-1.278h1.004c.058.223.343.45.773.45.824 0 1.164-.829 1.133-1.856h-.059c-.148.39-.57.742-1.261.742-.91 0-1.72-.613-1.72-1.758 0-1.148.848-1.835 1.973-1.835 1.09 0 2.063.636 2.063 2.687 0 1.867-.723 2.848-2.145 2.848zm.062-2.735c.504 0 .933-.336.933-.972 0-.633-.398-1.008-.94-1.008-.52 0-.927.375-.927 1 0 .64.418.98.934.98z"],["d","M4.5 2.5a.5.5 0 0 0-1 0v9.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L4.5 12.293V2.5z"],["d","M4.5 13.5a.5.5 0 0 1-1 0V3.707L2.354 4.854a.5.5 0 1 1-.708-.708l2-1.999.007-.007a.498.498 0 0 1 .7.006l2 2a.5.5 0 1 1-.707.708L4.5 3.707V13.5z"]],template:function(n,r){if(1&n&&(s.TgZ(0,"table",0)(1,"thead")(2,"tr")(3,"th",1),s.NdJ("click",function(){return r.sortTableContent(r.tableContent,"ext")}),s.TgZ(4,"span"),s._uU(5,"Tipo"),s.qZA(),s.YNc(6,ri,1,0,"ng-container",2),s.qZA(),s.TgZ(7,"th",3),s.NdJ("click",function(){return r.sortTableContent(r.tableContent,"size-abs")}),s.TgZ(8,"span"),s._uU(9,"Spazio"),s.qZA(),s.YNc(10,ii,1,0,"ng-container",2),s.qZA(),s.TgZ(11,"th",3),s.NdJ("click",function(){return r.sortTableContent(r.tableContent,"count-abs")}),s.TgZ(12,"span"),s._uU(13,"Numero"),s.qZA(),s.YNc(14,oi,1,0,"ng-container",2),s.qZA(),s.TgZ(15,"th",4),s.NdJ("click",function(){return r.sortTableContent(r.tableContent,"avgSize-abs")}),s._uU(16,"Peso medio"),s.qZA()(),s.TgZ(17,"tr"),s.YNc(18,si,5,0,"ng-container",5),s.TgZ(19,"th",6),s.NdJ("click",function(){return r.sortTableContent(r.tableContent,"avgSize-abs")}),s.TgZ(20,"span"),s._uU(21,"Unit\xe0"),s.qZA(),s.YNc(22,li,1,0,"ng-container",2),s.qZA(),s.TgZ(23,"th",6),s.NdJ("click",function(){return r.sortTableContent(r.tableContent,"avgSize-max")}),s.TgZ(24,"span"),s._uU(25,"Max"),s.qZA(),s.YNc(26,ui,1,0,"ng-container",2),s.qZA(),s.TgZ(27,"th",6),s.NdJ("click",function(){return r.sortTableContent(r.tableContent,"avgSize-perc")}),s.TgZ(28,"span"),s._uU(29,"%"),s.qZA(),s.YNc(30,ci,1,0,"ng-container",2),s.qZA()()(),s.TgZ(31,"tbody"),s.YNc(32,pi,13,16,"tr",5),s.qZA()(),s.YNc(33,gi,1,1,"ng-template",null,7,s.W1O)),2&n){const i=s.MAs(34);s.xp6(6),s.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",s.DdM(14,mi)),s.xp6(4),s.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",s.DdM(15,yi)),s.xp6(4),s.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",s.DdM(16,Si)),s.xp6(4),s.Q6J("ngForOf",s.DdM(17,Ti).constructor(2)),s.xp6(4),s.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",s.DdM(18,bi)),s.xp6(4),s.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",s.DdM(19,xi)),s.xp6(4),s.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",s.DdM(20,Ci)),s.xp6(2),s.Q6J("ngForOf",r.tableContent)}},dependencies:[Z.sg,Z.O5,Z.tP,Ve.b,Je],styles:["td[_ngcontent-%COMP%]{white-space:nowrap}@media (min-width: 768px){.table[_ngcontent-%COMP%]{table-layout:fixed}}"]}),a})();var _i=_(8418),Ai=_(7827),Di=_(7357);function Oi(e,a){if(1&e&&(s.TgZ(0,"div",8),s._UZ(1,"img",9),s.ALo(2,"uploadsreplace"),s.qZA()),2&e){const t=s.oxw();s.xp6(1),s.s9C("alt",t.subject.title),s.Q6J("lazyLoad",s.lcZ(2,4,t.subject.image))("offset",100)("errorImage","/assets/default_avatar.png")}}function Mi(e,a){if(1&e&&s._UZ(0,"div",10),2&e){const t=s.oxw();s.Q6J("innerHTML",t.subject.titleSuffix,s.oJD)}}function Pi(e,a){if(1&e&&s._UZ(0,"div",11),2&e){const t=s.oxw();s.Q6J("innerHTML",t.subject.desc,s.oJD)}}const Ii=function(e,a){return{"border-bottom":e,"ps-1":a}};let wi=(()=>{var e;class a{constructor(){this.isLast=!1,this.titleClickEvent=new s.vpe}}return(e=a).\u0275fac=function(n){return new(n||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-stat-table-entity"]],inputs:{subject:"subject",value:"value",isLast:"isLast"},outputs:{titleClickEvent:"titleClickEvent"},decls:8,vars:11,consts:[["class","image rounded-circle me-3 border flex-shrink-0",4,"ngIf"],[1,"d-flex","flex-grow-1","align-items-center","py-3","min-w-0",3,"ngClass"],[1,"me-auto","pe-3","d-flex","flex-column","flex-grow-1","align-items-start","min-w-0"],[1,"d-flex","min-w-0","mw-100","fw-bold","align-items-center","cursor-pointer",3,"click"],[1,"text-truncate","mw-100","pe-none",3,"innerHTML"],["class","ms-1 pe-none",3,"innerHTML",4,"ngIf"],["class","text-muted fs-xs",3,"innerHTML",4,"ngIf"],[1,"pe-1","flex-shrink-0",3,"innerHTML"],[1,"image","rounded-circle","me-3","border","flex-shrink-0"],["src","data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D",1,"rounded-circle","image-cover",3,"lazyLoad","offset","errorImage","alt"],[1,"ms-1","pe-none",3,"innerHTML"],[1,"text-muted","fs-xs",3,"innerHTML"]],template:function(n,r){1&n&&(s.YNc(0,Oi,3,6,"div",0),s.TgZ(1,"div",1)(2,"div",2)(3,"a",3),s.NdJ("click",function(o){return r.titleClickEvent.emit(o)}),s._UZ(4,"div",4),s.YNc(5,Mi,1,1,"div",5),s.qZA(),s.YNc(6,Pi,1,1,"div",6),s.qZA(),s._UZ(7,"div",7),s.qZA()),2&n&&(s.Q6J("ngIf",r.subject.image),s.xp6(1),s.Q6J("ngClass",s.WLB(8,Ii,!r.isLast,!r.subject.image)),s.xp6(2),s.uIk("href",r.subject.link||void 0,s.LSH)("target",r.subject.link?"_blank":void 0),s.xp6(1),s.Q6J("innerHTML",r.subject.title,s.oJD),s.xp6(1),s.Q6J("ngIf",r.subject.titleSuffix),s.xp6(1),s.Q6J("ngIf",r.subject.desc),s.xp6(1),s.Q6J("innerHTML",r.value,s.oJD))},dependencies:[Z.mk,Z.O5,Ai.z1,Di.g],styles:["[_nghost-%COMP%]{display:flex;align-items:center}.image[_ngcontent-%COMP%]{width:50px;height:50px}"]}),a})();function Zi(e,a){if(1&e&&(s.TgZ(0,"li"),s._UZ(1,"app-stat-table-entity",3),s.qZA()),2&e){const t=a.$implicit,n=a.last;s.xp6(1),s.Q6J("subject",t.subject)("value",t.value)("isLast",n)}}function Li(e,a){if(1&e&&(s.TgZ(0,"ul",1),s.YNc(1,Zi,2,3,"li",2),s.qZA()),2&e){const t=s.oxw();s.xp6(1),s.Q6J("ngForOf",t.data)}}let Ni=(()=>{var e;class a{constructor(){this.data=[]}}return(e=a).\u0275fac=function(n){return new(n||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-stat-table"]],inputs:{data:"data"},decls:1,vars:1,consts:[["class","list-unstyled mb-0",4,"ngIf"],[1,"list-unstyled","mb-0"],[4,"ngFor","ngForOf"],[3,"subject","value","isLast"]],template:function(n,r){1&n&&s.YNc(0,Li,2,1,"ul",0),2&n&&s.Q6J("ngIf",r.data.length>0)},dependencies:[Z.sg,Z.O5,wi],encapsulation:2}),a})();var Ja=_(8595);function Ui(e,a){if(1&e&&(s.TgZ(0,"option",16),s._uU(1),s.qZA()),2&e){const t=a.$implicit,n=s.oxw(3);s.Q6J("value",t)("selected",n.daySelectValue===t),s.xp6(1),s.Oqu(t)}}function ki(e,a){if(1&e){const t=s.EpF();s.TgZ(0,"select",14),s.NdJ("ngModelChange",function(r){s.CHM(t);const i=s.oxw(2);return s.KtG(i.daySelectValue=r)})("ngModelChange",function(){s.CHM(t);const r=s.oxw(2);return s.KtG(r.setData(r.daySelectValue,r.activeTab))}),s.YNc(1,Ui,2,3,"option",15),s.qZA()}if(2&e){const t=s.oxw(2);s.Q6J("ngModel",t.daySelectValue),s.xp6(1),s.Q6J("ngForOf",t.days)}}function zi(e,a){1&e&&s.GkF(0)}function Ri(e,a){if(1&e&&s.YNc(0,zi,1,0,"ng-container",17),2&e){s.oxw(2);const t=s.MAs(2);s.Q6J("ngTemplateOutlet",t)}}function Ei(e,a){1&e&&s.GkF(0)}function Bi(e,a){if(1&e&&s.YNc(0,Ei,1,0,"ng-container",17),2&e){s.oxw(2);const t=s.MAs(2);s.Q6J("ngTemplateOutlet",t)}}function Fi(e,a){if(1&e){const t=s.EpF();s.TgZ(0,"app-stat-container",2),s.ynx(1,3),s.TgZ(2,"div",4),s.YNc(3,ki,2,2,"select",5),s.TgZ(4,"div",6),s.NdJ("click",function(){s.CHM(t);const r=s.MAs(12);return s.KtG(r.select("file"))}),s.TgZ(5,"div",7),s._uU(6,"insert_drive_file"),s.qZA()(),s.TgZ(7,"div",8),s.NdJ("click",function(){s.CHM(t);const r=s.MAs(12);return s.KtG(r.select("size"))}),s.TgZ(8,"div",7),s._uU(9,"storage"),s.qZA()()(),s.BQk(),s.ynx(10),s.TgZ(11,"ul",9,10),s.NdJ("activeIdChange",function(r){s.CHM(t);const i=s.oxw();return s.KtG(i.activeTab=r)})("hidden",function(r){s.CHM(t);const i=s.oxw();return s.KtG(i.onHidden(r))}),s.TgZ(13,"li",11),s.YNc(14,Ri,1,1,"ng-template",12),s.qZA(),s.TgZ(15,"li",11),s.YNc(16,Bi,1,1,"ng-template",12),s.qZA()(),s._UZ(17,"div",13),s.BQk(),s.qZA()}if(2&e){const t=s.MAs(12),n=s.oxw();s.Q6J("statTitle","Top utenti - "+("file"===n.activeTab?"File":"Spazio"))("hideTitleOnSmallScreen",n.days.length>1),s.xp6(3),s.Q6J("ngIf",n.days.length>1),s.xp6(1),s.Q6J("ngClass","file"===n.activeTab?"blue":"outline-blue")("disableOnTouchDevice",!0),s.xp6(3),s.Q6J("ngClass","size"===n.activeTab?"blue":"outline-blue")("disableOnTouchDevice",!0),s.xp6(4),s.Q6J("activeId",n.activeTab)("destroyOnHide",!1),s.xp6(2),s.Q6J("ngbNavItem","file"),s.xp6(2),s.Q6J("ngbNavItem","size"),s.xp6(2),s.Q6J("ngbNavOutlet",t)}}const Vi=function(e){return{"pe-2":e}};function Gi(e,a){if(1&e&&s._UZ(0,"app-stat-table",20),2&e){const t=s.oxw(2);s.Q6J("ngClass",s.VKq(2,Vi,!t.touchDevice))("data",t.listContent[t.activeDay][t.activeContent])}}function Ji(e,a){1&e&&s._UZ(0,"app-loader",21)}function Hi(e,a){if(1&e&&(s.YNc(0,Gi,1,4,"app-stat-table",18),s.YNc(1,Ji,1,0,"ng-template",null,19,s.W1O)),2&e){const t=s.MAs(2),n=s.oxw();s.Q6J("ngIf",!n.loading)("ngIfElse",t)}}let Ha=(()=>{var e;class a{constructor(n){this.userService=n,this.touchDevice=tt.eX,this.activeTab="file",this.activeDay="",this.activeContent="file",this.daySelectValue="",this.days=[],this.loading=!0,this.listContent={}}ngOnChanges(n){var r=this;return(0,K.Z)(function*(){var i;n.data&&null!==(i=r.data)&&void 0!==i&&i.length&&(r.days=r.data.map(o=>o.day),r.daySelectValue=r.days[0],yield r.setData(r.days[0],"file"))})()}setData(n,r){var i=this;return(0,K.Z)(function*(){if(!i.data)return;const o=i.data.find(l=>l.day===n);if(o&&(i.activeDay=n,i.activeTab=r,i.activeContent=r,!i.listContent.hasOwnProperty(n))){i.loading=!0;const l=yield i.userService.getDetailsFromUids([...Object.keys(o.size),...Object.keys(o.file)]);i.listContent[n]={size:Object.entries(o.size).reduce((u,c)=>{const p=l.find(f=>f.uid===c[0]);return p&&u.push({value:(0,ee.t)(c[1]),subject:i.createTableSubject(p)}),u},[]),file:Object.entries(o.file).reduce((u,c)=>{const p=l.find(f=>f.uid===c[0]);return p&&u.push({value:(0,Ge.o)(c[1]),subject:i.createTableSubject(p)}),u},[])},i.loading=!1}})()}createTableSubject(n){const r=n.uid.substring(2),i=n.uid.substring(0,2);return{title:n.nickname,image:n.avatar,desc:`ID: ${r}`,link:`${(0,G.A)(i)}/?act=Profile&MID=${r}`}}onHidden(n){this.activeContent="file"===n?"size":"file"}}return(e=a).\u0275fac=function(n){return new(n||e)(s.Y36(_i.K))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-upload-stat-top-users"]],inputs:{data:"data"},features:[s.TTD],decls:3,vars:1,consts:[[3,"statTitle","hideTitleOnSmallScreen",4,"ngIf"],["navContent",""],[3,"statTitle","hideTitleOnSmallScreen"],["title",""],[1,"ms-auto","d-flex"],["class","form-select form-select-sm me-2",3,"ngModel","ngModelChange",4,"ngIf"],["appTippy","Top per numero di file",1,"flat-icon","me-2","cursor-pointer",3,"ngClass","disableOnTouchDevice","click"],[1,"material-icons-outlined"],["appTippy","Top per spazio occupato",1,"flat-icon","cursor-pointer",3,"ngClass","disableOnTouchDevice","click"],["ngbNav","",3,"activeId","destroyOnHide","activeIdChange","hidden"],["topUsersNav","ngbNav"],[3,"ngbNavItem"],["ngbNavContent",""],[1,"mt-2",3,"ngbNavOutlet"],[1,"form-select","form-select-sm","me-2",3,"ngModel","ngModelChange"],[3,"value","selected",4,"ngFor","ngForOf"],[3,"value","selected"],[4,"ngTemplateOutlet"],["class","d-block list",3,"ngClass","data",4,"ngIf","ngIfElse"],["loader",""],[1,"d-block","list",3,"ngClass","data"],["message","Recupero utenti",1,"d-block","mt-3"]],template:function(n,r){1&n&&(s.YNc(0,Fi,18,12,"app-stat-container",0),s.YNc(1,Hi,3,2,"ng-template",null,1,s.W1O)),2&n&&s.Q6J("ngIf",r.data)},dependencies:[Z.mk,Z.sg,Z.O5,Z.tP,nt.YN,nt.Kr,nt.EJ,nt.JJ,nt.On,te.R,ut.uN,ut.Pz,ut.nv,ut.Is,ut.Dy,Fe,Ni,Ja.$],styles:["[_nghost-%COMP%]{display:block;height:100%}.list[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto}"]}),a})();const Qi=function(e){return{"pe-2":e}};let Yi=(()=>{var e;class a{constructor(n,r,i,o){this.dateAdapterService=n,this.dateFormatterService=r,this.breakpointObserver=i,this.eChartsService=o,this.chartLoading=!0,this.data=[],this.touchDevice=tt.eX,this.loadingOptions=(0,z.MO)(),this.totalSize=0,this.totalFileCount=0,this.totalUsers=0,this.totalSizeChartOptions=null,this.lineChartOptions=null,this.lineChartTitle="",this.lineChartType="size",this.lineChartDetails="splitted",this.usersChartOptions=null,this.topUsersPerDay=[],this.storageUsedInPeriod=[],this.xAxisLabels=[],this.storageSeries={total:[{name:"Spazio giornaliero",data:[]}],splitted:[]},this.fileCountSeries={total:[{name:"File giornalieri",data:[]}],splitted:[]},this.avgFileSizeSeries={total:[{name:"Peso medio",data:[]}],splitted:[]},this.usersSeries={name:"Utenti giornalieri",data:[]},this.smallDevice=!0,this.smallDevice=this.breakpointObserver.isMatched([Te.u3.XSmall])}ngOnChanges(n){n.data&&n.data.currentValue.length&&(this.setLabelsAndTopUsers(),this.setLineChartsData(),this.setLineChartsOptions(),this.setTotalSizeChartOptions())}setLabelsAndTopUsers(){const n=[];this.xAxisLabels=this.data.slice(1).map(r=>{const i=this.dateFormatterService.formatShort(this.dateAdapterService.fromModel(r.date));return n.unshift({day:i,size:r.periodTopTotalSize,file:r.periodTopTotalFileCount}),i}),this.topUsersPerDay=n}setLineChartsData(){this.totalUsers=0,this.usersSeries.data=[],this.storageSeries.total[0].data=[],this.fileCountSeries.total[0].data=[],this.avgFileSizeSeries.total[0].data=[];let n={},r={},i={},o={};for(const[c,p]of this.data.slice(1).entries()){this.usersSeries.data.push(p.periodActiveUsers),this.totalUsers+=p.periodActiveUsers,this.storageSeries.total[0].data.push(0),this.fileCountSeries.total[0].data.push(0),this.avgFileSizeSeries.total[0].data.push(0);for(const[f,h]of Object.entries(p.storageUsed)){var l,u;if(!isNaN(Number(f)))continue;o.hasOwnProperty(f)||(o[f]={ext:f,count:0,size:0}),n.hasOwnProperty(f)||(n[f]={name:f,data:[],total:0});const v=h.size-((null===(l=this.data[c].storageUsed[f])||void 0===l?void 0:l.size)||0);n[f].data.push(Math.round(v/1048576)),n[f].total+=v,o[f].size+=v,this.storageSeries.total[0].data[c]+=Math.round(v/1048576),r.hasOwnProperty(f)||(r[f]={name:f,data:[],total:0});const d=h.count-((null===(u=this.data[c].storageUsed[f])||void 0===u?void 0:u.count)||0);r[f].data.push(d),r[f].total+=d,o[f].count+=d,this.fileCountSeries.total[0].data[c]+=d,i.hasOwnProperty(f)||(i[f]={name:f,data:[],total:0});const g=d?Math.round(100*v/d/1048576)/100:0;i[f].data.push(g),i[f].total+=g}this.avgFileSizeSeries.total[0].data[c]=this.storageSeries.total[0].data[c]/this.fileCountSeries.total[0].data[c]}this.storageSeries.splitted=Object.values(n).filter(c=>!c.data.every(p=>0===p)).sort((c,p)=>p.total-c.total),this.fileCountSeries.splitted=Object.values(r).filter(c=>!c.data.every(p=>0===p)).sort((c,p)=>p.total-c.total),this.avgFileSizeSeries.splitted=Object.values(i).filter(c=>!c.data.every(p=>0===p)).sort((c,p)=>p.total-c.total),this.storageUsedInPeriod=Object.values(o)}setLineChartsOptions(){this.lineChartOptions=this.getLineChartOption(),this.usersChartOptions=(0,z._k)([this.xAxisLabels],[this.usersSeries])}setTotalSizeChartOptions(){this.totalSize=(0,z.HN)(this.storageUsedInPeriod,"size"),this.totalFileCount=(0,z.HN)(this.storageUsedInPeriod,"count");const n=this.storageUsedInPeriod.sort((r,i)=>i.size-r.size).slice(0,4).map(r=>({name:r.ext,value:r.size}));n.push({name:"altre",value:this.totalSize-(0,z.HN)(n,"value")}),this.totalSizeChartOptions=(0,z.TF)(n,"Spazio occupato",(0,ee.t)(this.totalSize),ee.t,this.smallDevice)}getLineChartOption(){let n;switch(this.lineChartType){case"size":n=this.storageSeries,this.lineChartTitle="Spazio giornaliero (MB)";break;case"file":n=this.fileCountSeries,this.lineChartTitle="File giornalieri";break;default:n=this.avgFileSizeSeries,this.lineChartTitle="Peso medio (MB)"}return(0,z._k)([this.xAxisLabels],n[this.lineChartDetails])}addChartToResizeEvent(n){this.eChartsService.addInstanceToResizeEvent(n,mt)}}return(e=a).\u0275fac=function(n){return new(n||e)(s.Y36(G.z3),s.Y36(G.KN),s.Y36(Te.Yg),s.Y36(G.H8))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-upload-daily-stats"]],inputs:{chartLoading:"chartLoading",data:"data"},features:[s.TTD],decls:46,vars:38,consts:[[1,"grid","charts-container","list-unstyled","mb-0"],[1,"g-col-3","g-col-xl-10","g-col-xxxl-4","g-row-xxxl-3"],["statTitle","Spazio occupato nel periodo"],["echarts","",1,"d-block",3,"options","autoResize","loading","loadingOpts","chartInit"],[1,"g-col-3","g-col-xl-7","g-col-xxxl-4","g-row-xl-3"],["statTitle","Utenti giornalieri"],["title",""],[1,"ms-auto","fs-sm"],[1,"g-col-3","g-col-md-1","g-col-xl-3","g-col-xxxl-2"],["description","File caricati","color","green",3,"value"],["description","Spazio occupato","color","blue",3,"value"],["description","Peso medio","color","red",3,"value"],[1,"g-col-3","g-col-xl-10","g-col-xxl-6","g-col-xxxl-7"],[3,"statTitle","hideTitleOnSmallScreen"],[1,"ms-auto","d-flex"],[1,"form-select","form-select-sm","me-2",3,"ngModel","ngModelChange"],["value","size",3,"selected"],["value","file"],["value","avg"],[1,"form-select","form-select-sm",3,"ngModel","ngModelChange"],["value","splitted",3,"selected"],["value","total"],["echarts","",1,"d-block","mt-3",3,"options","autoResize","loading","loadingOpts","chartInit"],[1,"g-col-3","g-col-xl-10","g-col-xxl-4","g-col-xxxl-3"],[3,"data"],[1,"g-col-3","g-col-xl-10"],[3,"hasTitle"],[1,"pt-1","overflow-auto","table-container",3,"ngClass"],[3,"storageData","totalSize","totalFileCount"]],template:function(n,r){1&n&&(s.TgZ(0,"ul",0)(1,"li",1)(2,"app-stat-container",2),s.ynx(3),s.TgZ(4,"div",3),s.NdJ("chartInit",function(o){return r.addChartToResizeEvent(o)}),s.qZA(),s.BQk(),s.qZA()(),s.TgZ(5,"li",4)(6,"app-stat-container",5),s.ynx(7,6),s.TgZ(8,"div",7),s._uU(9),s.ALo(10,"localeString"),s.qZA(),s.BQk(),s.ynx(11),s.TgZ(12,"div",3),s.NdJ("chartInit",function(o){return r.addChartToResizeEvent(o)}),s.qZA(),s.BQk(),s.qZA()(),s.TgZ(13,"li",8),s._UZ(14,"app-stat-summary-container",9),s.ALo(15,"localeString"),s.qZA(),s.TgZ(16,"li",8),s._UZ(17,"app-stat-summary-container",10),s.ALo(18,"formatBytes"),s.qZA(),s.TgZ(19,"li",8),s._UZ(20,"app-stat-summary-container",11),s.ALo(21,"formatBytes"),s.qZA(),s.TgZ(22,"li",12)(23,"app-stat-container",13),s.ynx(24,6),s.TgZ(25,"div",14)(26,"select",15),s.NdJ("ngModelChange",function(o){return r.lineChartType=o})("ngModelChange",function(){return r.lineChartOptions=r.getLineChartOption()}),s.TgZ(27,"option",16),s._uU(28,"Spazio (MB)"),s.qZA(),s.TgZ(29,"option",17),s._uU(30,"File"),s.qZA(),s.TgZ(31,"option",18),s._uU(32,"Peso medio (MB)"),s.qZA()(),s.TgZ(33,"select",19),s.NdJ("ngModelChange",function(o){return r.lineChartDetails=o})("ngModelChange",function(){return r.lineChartOptions=r.getLineChartOption()}),s.TgZ(34,"option",20),s._uU(35,"Singolo"),s.qZA(),s.TgZ(36,"option",21),s._uU(37,"Totale"),s.qZA()()(),s.BQk(),s.ynx(38),s.TgZ(39,"div",22),s.NdJ("chartInit",function(o){return r.addChartToResizeEvent(o)}),s.qZA(),s.BQk(),s.qZA()(),s.TgZ(40,"li",23),s._UZ(41,"app-upload-stat-top-users",24),s.qZA(),s.TgZ(42,"li",25)(43,"app-stat-container",26)(44,"div",27),s._UZ(45,"app-upload-stat-file-table",28),s.qZA()()()()),2&n&&(s.xp6(4),s.Q6J("options",r.totalSizeChartOptions)("autoResize",!1)("loading",r.chartLoading)("loadingOpts",r.loadingOptions),s.xp6(5),s.hij("Totale: ",s.lcZ(10,28,r.totalUsers),""),s.xp6(3),s.Q6J("options",r.usersChartOptions)("autoResize",!1)("loading",r.chartLoading)("loadingOpts",r.loadingOptions),s.xp6(2),s.Q6J("value",s.lcZ(15,30,r.totalFileCount)),s.xp6(3),s.Q6J("value",s.lcZ(18,32,r.totalSize)),s.xp6(3),s.Q6J("value",s.lcZ(21,34,r.totalSize/r.totalFileCount)),s.xp6(3),s.Q6J("statTitle",r.lineChartTitle)("hideTitleOnSmallScreen",!0),s.xp6(3),s.Q6J("ngModel",r.lineChartType),s.xp6(1),s.Q6J("selected",!0),s.xp6(6),s.Q6J("ngModel",r.lineChartDetails),s.xp6(1),s.Q6J("selected",!0),s.xp6(5),s.Q6J("options",r.lineChartOptions)("autoResize",!1)("loading",r.chartLoading)("loadingOpts",r.loadingOptions),s.xp6(2),s.Q6J("data",r.topUsersPerDay),s.xp6(2),s.Q6J("hasTitle",!1),s.xp6(1),s.Q6J("ngClass",s.VKq(36,Qi,!r.touchDevice)),s.xp6(1),s.Q6J("storageData",r.storageUsedInPeriod)("totalSize",r.totalSize)("totalFileCount",r.totalFileCount))},dependencies:[Z.mk,nt.YN,nt.Kr,nt.EJ,nt.JJ,nt.On,wt._w,Fe,Va,Ga,Ha,Ve.b,Je],styles:[".charts-container[_ngcontent-%COMP%]{--bs-columns: 3}.charts-container[_ngcontent-%COMP%]   [echarts][_ngcontent-%COMP%]{height:300px}.charts-container[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{min-width:0}.table-container[_ngcontent-%COMP%]{height:300px}@media (min-width: 1200px){.charts-container[_ngcontent-%COMP%]{--bs-columns: 10}}"]}),a})();var Qa=_(1413);function ji(e,a){if(1&e&&(s._UZ(0,"div",1),s.ALo(1,"date")),2&e){const t=s.oxw();s.Q6J("ngClass",t.trend.value<0?"alert-danger":"alert-success")("innerText",(t.trend.value>0?"+"+t.trend.value:t.trend.value)+"%")("appTippy","Rispetto al "+s.xi3(1,3,t.trend.date,"dd/MM/YY"))}}let Xi=(()=>{var e;class a{}return(e=a).\u0275fac=function(n){return new(n||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-stat-trend"]],inputs:{trend:"trend"},decls:1,vars:1,consts:[["class","position-absolute alert border-0 px-1 py-0 trend fs-xs cursor-pointer",3,"ngClass","innerText","appTippy",4,"ngIf"],[1,"position-absolute","alert","border-0","px-1","py-0","trend","fs-xs","cursor-pointer",3,"ngClass","innerText","appTippy"]],template:function(n,r){1&n&&s.YNc(0,ji,2,6,"div",0),2&n&&s.Q6J("ngIf",r.trend)},dependencies:[Z.mk,Z.O5,Ja.$,Z.uU],styles:[".trend[_ngcontent-%COMP%]{top:.5rem;right:.5rem}"]}),a})();const Ki=function(e){return{"pe-2":e}};let $i=(()=>{var e;class a{constructor(n,r,i,o){this.eChartsService=n,this.breakpointObserver=r,this.dateAdapterService=i,this.dateFormatterService=o,this.chartLoading=!0,this.touchDevice=tt.eX,this.smallDevice=!0,this.loadingOptions=(0,z.MO)(),this.totalSizeChartOptions=null,this.totalFileCountChartOptions=null,this.totalFileCount=0,this.totalSize=0,this.filesPerUser=0,this.sizePerUser=0,this.storageUsedAsArray={current:[],trend:[]},this.smallDevice=this.breakpointObserver.isMatched([Te.u3.XSmall])}ngOnInit(){}ngOnChanges(n){var r=this;return(0,K.Z)(function*(){n.data&&r.data&&(r.setStorageUsedAsArray(),r.setTotalSizeChart(),r.setTotalFileCountChart(),r.setSummaries(),r.setTopUsers())})()}setStorageUsedAsArray(){this.storageUsedAsArray.current=Object.entries(this.data.storageUsed).filter(n=>isNaN(Number(n[0]))).map(n=>({ext:n[0],count:n[1].count,size:n[1].size})),this.storageUsedAsArray.trend=Object.entries(this.trendData.storageUsed).filter(n=>isNaN(Number(n[0]))).map(n=>({ext:n[0],count:n[1].count,size:n[1].size}))}setSummaries(){this.filesPerUser=Math.round(this.totalFileCount/this.data.toDateActiveUsers);const n=Math.round((0,z.HN)(this.storageUsedAsArray.trend,"count")/this.trendData.toDateActiveUsers);this.filesPerUserTrend={value:(0,z.rp)((this.filesPerUser-n)/n),date:this.trendData.date},this.sizePerUser=this.totalSize/this.data.toDateActiveUsers;const r=Math.round((0,z.HN)(this.storageUsedAsArray.trend,"size")/this.trendData.toDateActiveUsers);this.sizePerUserTrend={value:(0,z.rp)((this.sizePerUser-r)/r),date:this.trendData.date}}setTotalSizeChart(){this.totalSize=(0,z.HN)(this.storageUsedAsArray.current,"size");const n=this.storageUsedAsArray.current.sort((r,i)=>i.size-r.size).slice(0,4).map(r=>({name:r.ext,value:r.size}));n.push({name:"altre",value:this.totalSize-(0,z.HN)(n,"value")}),this.totalSizeChartOptions=(0,z.TF)(n,"Spazio occupato",(0,ee.t)(this.totalSize),ee.t,this.smallDevice)}setTotalFileCountChart(){this.totalFileCount=(0,z.HN)(this.storageUsedAsArray.current,"count");const n=this.storageUsedAsArray.current.sort((r,i)=>r.count-i.count).slice(-4);n.unshift({ext:"altre",count:this.totalFileCount-(0,z.HN)(n,"count"),size:0}),this.totalFileCountChartOptions=function Wi(e,a,t){return{toolbox:(0,z.tZ)(),tooltip:(0,Qa.Z)((0,Qa.Z)({},z.dB),{},{trigger:"axis",axisPointer:{type:"shadow"},textStyle:{color:"inherit"},valueFormatter:n=>(0,Ge.o)(n)}),legend:{show:!1},grid:{left:"3%",right:"4%",bottom:"3%",top:30,containLabel:!0},xAxis:{type:"value",boundaryGap:[0,.01],axisLabel:{show:!1}},yAxis:{type:"category",data:e,axisTick:{show:!1},axisLabel:{margin:15}},series:[{name:"Numero di file",type:"bar",data:t,itemStyle:{borderRadius:[0,5,5,0]},label:{position:"inside",show:!0,formatter:n=>Math.round(100*n.value/a*100)/100+"%"}}]}}(n.map(r=>r.ext),this.totalFileCount,n.map(r=>r.count))}setTopUsers(){const n=this.dateFormatterService.formatShort(this.dateAdapterService.fromModel(this.data.date));this.topUsersData=[{size:this.data.toDateTopTotalSize,file:this.data.toDateTopTotalFileCount,day:n}]}addChartToResizeEvent(n){this.eChartsService.addInstanceToResizeEvent(n,mt)}}return(e=a).\u0275fac=function(n){return new(n||e)(s.Y36(G.H8),s.Y36(Te.Yg),s.Y36(G.z3),s.Y36(G.KN))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-upload-total-stats"]],inputs:{chartLoading:"chartLoading",data:"data",trendData:"trendData"},features:[s.TTD],decls:31,vars:28,consts:[[1,"grid","charts-container","list-unstyled","mb-0"],[1,"g-col-3","g-col-md-1","g-col-xl-3","g-col-xxxl-2"],["description","Utenti totali","color","green",3,"value"],[1,"g-col-3","g-col-md-1","g-col-xl-3","g-col-xxxl-2","g-row-start-xl-2"],["description","File per utente","color","blue",3,"value"],["header",""],[3,"trend"],[1,"g-col-3","g-col-md-1","g-col-xl-3","g-col-xxxl-2","g-row-start-xl-3"],["description","Spazio per utente","color","indigo",3,"value"],[1,"g-col-3","g-col-xl-7","g-col-xxxl-4","g-row-3"],["statTitle","Spazio occupato"],["echarts","",1,"d-block",3,"options","autoResize","loading","loadingOpts","chartInit"],[1,"g-col-3","g-col-xl-10","g-col-xxl-6","g-col-xxxl-4","g-row-xxxl-3"],["statTitle","File caricati"],["title",""],[1,"ms-auto","fs-sm"],[1,"g-col-3","g-col-xl-10","g-col-xxl-4","g-col-xxxl-3"],[3,"data"],[1,"g-col-3","g-col-xl-10","g-col-xxxl-7"],[3,"hasTitle"],[1,"pt-1","overflow-auto","table-container",3,"ngClass"],[3,"storageData","totalSize","totalFileCount"]],template:function(n,r){1&n&&(s.TgZ(0,"ul",0)(1,"li",1),s._UZ(2,"app-stat-summary-container",2),s.ALo(3,"localeString"),s.qZA(),s.TgZ(4,"li",3)(5,"app-stat-summary-container",4),s.ynx(6,5),s._UZ(7,"app-stat-trend",6),s.BQk(),s.qZA()(),s.TgZ(8,"li",7)(9,"app-stat-summary-container",8),s.ALo(10,"formatBytes"),s.ynx(11,5),s._UZ(12,"app-stat-trend",6),s.BQk(),s.qZA()(),s.TgZ(13,"li",9)(14,"app-stat-container",10),s.ynx(15),s.TgZ(16,"div",11),s.NdJ("chartInit",function(o){return r.addChartToResizeEvent(o)}),s.qZA(),s.BQk(),s.qZA()(),s.TgZ(17,"li",12)(18,"app-stat-container",13),s.ynx(19,14),s.TgZ(20,"div",15),s._uU(21),s.ALo(22,"localeString"),s.qZA(),s.BQk(),s.ynx(23),s.TgZ(24,"div",11),s.NdJ("chartInit",function(o){return r.addChartToResizeEvent(o)}),s.qZA(),s.BQk(),s.qZA()(),s.TgZ(25,"li",16),s._UZ(26,"app-upload-stat-top-users",17),s.qZA(),s.TgZ(27,"li",18)(28,"app-stat-container",19)(29,"div",20),s._UZ(30,"app-upload-stat-file-table",21),s.qZA()()()()),2&n&&(s.xp6(2),s.Q6J("value",s.lcZ(3,20,r.data.toDateActiveUsers)),s.xp6(3),s.Q6J("value",r.filesPerUser),s.xp6(2),s.Q6J("trend",r.filesPerUserTrend),s.xp6(2),s.Q6J("value",s.lcZ(10,22,r.sizePerUser)),s.xp6(3),s.Q6J("trend",r.sizePerUserTrend),s.xp6(4),s.Q6J("options",r.totalSizeChartOptions)("autoResize",!1)("loading",r.chartLoading)("loadingOpts",r.loadingOptions),s.xp6(5),s.hij("Totale: ",s.lcZ(22,24,r.totalFileCount),""),s.xp6(3),s.Q6J("options",r.totalFileCountChartOptions)("autoResize",!1)("loading",r.chartLoading)("loadingOpts",r.loadingOptions),s.xp6(2),s.Q6J("data",r.topUsersData),s.xp6(2),s.Q6J("hasTitle",!1),s.xp6(1),s.Q6J("ngClass",s.VKq(26,Ki,!r.touchDevice)),s.xp6(1),s.Q6J("storageData",r.storageUsedAsArray.current)("totalSize",r.totalSize)("totalFileCount",r.totalFileCount))},dependencies:[Z.mk,wt._w,Fe,Va,Xi,Ga,Ha,Ve.b,Je],styles:[".table-container[_ngcontent-%COMP%]{min-height:100%}",".charts-container[_ngcontent-%COMP%]{--bs-columns: 3}.charts-container[_ngcontent-%COMP%]   [echarts][_ngcontent-%COMP%]{height:300px}.charts-container[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{min-width:0}.table-container[_ngcontent-%COMP%]{height:300px}@media (min-width: 1200px){.charts-container[_ngcontent-%COMP%]{--bs-columns: 10}}"]}),a})();const qi=function(e){return{"touch-device":e}};function to(e,a){if(1&e){const t=s.EpF();s.ynx(0),s.TgZ(1,"div",3),s._UZ(2,"app-upload-total-stats",4),s.TgZ(3,"app-upload-datepicker",5),s.NdJ("modelChangeEvent",function(r){s.CHM(t);const i=s.oxw();return s.KtG(i.rangeChangeEvent(r))}),s.qZA(),s._UZ(4,"app-upload-daily-stats",6),s.qZA(),s.BQk()}if(2&e){const t=s.oxw();s.xp6(1),s.Q6J("ngClass",s.VKq(7,qi,t.touchDevice)),s.xp6(1),s.Q6J("data",t.globalStatsData.current)("trendData",t.globalStatsData.trend)("chartLoading",t.loading),s.xp6(1),s.Q6J("availableRange",t.availableRange),s.xp6(1),s.Q6J("data",t.data)("chartLoading",t.loading)}}function eo(e,a){1&e&&s._UZ(0,"app-loader",7)}let ao=(()=>{var e;class a{constructor(n,r,i,o){this.uploadStatsService=n,this.dateAdapterService=r,this.ngbCalendar=i,this.eChartsService=o,this.touchDevice=tt.eX,this.loading=!0,this.componentDestroyed=new ct.x,this.eChartsService.setResizeChartEvent(this.componentDestroyed,mt)}ngOnInit(){var n=this;return(0,K.Z)(function*(){const r=yield n.uploadStatsService.getAvailableDateRange();n.availableRange={start:n.dateAdapterService.fromModel(new Date(r.start)),end:n.dateAdapterService.fromModel(new Date(r.end))};const i=n.ngbCalendar.getToday(),o=n.dateAdapterService.toModel(n.ngbCalendar.getPrev(i,"d",365)).toISOString(),l=yield n.getData([...n.rangeToStringArray(i,8),o]);n.todayData=l[l.length-1],n.oneYearFromTodayData=l[0],n.globalStatsData={current:n.todayData,trend:n.oneYearFromTodayData,useRange:!1},n.data=l.slice(1),n.loading=!1})()}rangeToStringArray(n,r){return[...Array(r+1)].map((i,o)=>{const l=this.ngbCalendar.getPrev(n,"d",o);return l.before(this.availableRange.start)||l.after(this.availableRange.end)?null:this.dateAdapterService.toModel(l).toISOString()}).filter(i=>null!==i)}getData(n){var r=this;return(0,K.Z)(function*(){return(yield r.uploadStatsService.getRangeData(n)).sort((o,l)=>o.date.getTime()-l.date.getTime())})()}rangeChangeEvent(n){var r=this;return(0,K.Z)(function*(){if(!n.range.start||!n.range.end)return;const i=r.dateAdapterService.toModel(n.range.start),o=r.dateAdapterService.toModel(n.range.end),l=i.getTime(),u=o.getTime();if(!r.data||l!==r.data[1].date.getTime()||u!==r.data[r.data.length-1].date.getTime()){r.loading=!0;const c=Math.round((u-l)/864e5);r.data=yield r.getData(r.rangeToStringArray(n.range.end,c+1)),r.loading=!1}if(n.useRangeAsGlobal!==r.globalStatsData.useRange||r.globalStatsData.useRange)if(r.globalStatsData.useRange=n.useRangeAsGlobal,r.globalStatsData.useRange){r.globalStatsData.current=r.data[r.data.length-1];const c=r.ngbCalendar.getPrev(n.range.end,"d",364);r.globalStatsData.trend=(yield r.getData([r.dateAdapterService.toModel(c.after(r.availableRange.start)?c:r.availableRange.start).toISOString()]))[0]}else r.globalStatsData.current=r.todayData,r.globalStatsData.trend=r.oneYearFromTodayData})()}ngOnDestroy(){this.componentDestroyed.next(),this.componentDestroyed.complete(),this.eChartsService.clearResizeInstances(mt)}}return(e=a).\u0275fac=function(n){return new(n||e)(s.Y36(Se),s.Y36(G.z3),s.Y36(ut.vL),s.Y36(G.H8))},e.\u0275cmp=s.Xpm({type:e,selectors:[["ng-component"]],decls:4,vars:2,consts:[["pageTitle","Statistiche Upload"],[4,"ngIf","ngIfElse"],["loader",""],[1,"overflow-hidden","page-container",3,"ngClass"],[3,"data","trendData","chartLoading"],[3,"availableRange","modelChangeEvent"],[3,"data","chartLoading"],["message","Recupero dei dati",1,"d-block","mt-5"]],template:function(n,r){if(1&n&&(s._UZ(0,"app-breadcrumb",0),s.YNc(1,to,5,9,"ng-container",1),s.YNc(2,eo,1,0,"ng-template",null,2,s.W1O)),2&n){const i=s.MAs(3);s.xp6(1),s.Q6J("ngIf",r.data)("ngIfElse",i)}},dependencies:[yt.L,Z.mk,Z.O5,te.R,Xr,Yi,$i],styles:[".page-container[_ngcontent-%COMP%]{margin-bottom:-10px;padding-bottom:10px}@media (min-width: 960px){.page-container[_ngcontent-%COMP%]:not(.touch-device){margin:-10px;padding:10px}}"]}),a})();var ae=_(7230),no=_(7963),ro=_(591),io=_(1101),Y=_(2862),ot=_(7436),m=_(4404),be=2*Math.PI,Ya=Math.PI/180;function Wa(e,a){return ot.ME(e.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()})}function ja(e,a){var t=Wa(e,a),n=e.get("center"),r=e.get("radius");m.isArray(r)||(r=[0,r]);var p,f,i=(0,Y.GM)(t.width,a.getWidth()),o=(0,Y.GM)(t.height,a.getHeight()),l=Math.min(i,o),u=(0,Y.GM)(r[0],l/2),c=(0,Y.GM)(r[1],l/2),h=e.coordinateSystem;if(h){var v=h.dataToPoint(n);p=v[0]||0,f=v[1]||0}else m.isArray(n)||(n=[n,n]),p=(0,Y.GM)(n[0],i)+t.x,f=(0,Y.GM)(n[1],o)+t.y;return{cx:p,cy:f,r0:u,r:c}}function oo(e,a,t){a.eachSeriesByType(e,function(n){var r=n.getData(),i=r.mapDimension("value"),o=Wa(n,t),l=ja(n,t),u=l.cx,c=l.cy,p=l.r,f=l.r0,h=-n.get("startAngle")*Ya,v=n.get("minAngle")*Ya,d=0;r.each(i,function(O){!isNaN(O)&&d++});var g=r.getSum(i),y=Math.PI/(g||d)*2,S=n.get("clockwise"),T=n.get("roseType"),b=n.get("stillShowZeroSum"),x=r.getDataExtent(i);x[0]=0;var A=be,C=0,D=h,M=S?1:-1;if(r.setLayout({viewRect:o,r:p}),r.each(i,function(O,L){var I;if(isNaN(O))r.setItemLayout(L,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:S,cx:u,cy:c,r0:f,r:T?NaN:p});else{(I="area"!==T?0===g&&b?y:O*y:be/d)<v?(I=v,A-=v):C+=O;var w=D+M*I;r.setItemLayout(L,{angle:I,startAngle:D,endAngle:w,clockwise:S,cx:u,cy:c,r0:f,r:T?(0,Y.NU)(O,x,[f,p]):p}),D=w}}),A<be&&d)if(A<=.001){var P=be/d;r.each(i,function(O,L){if(!isNaN(O)){var I=r.getItemLayout(L);I.angle=P,I.startAngle=h+M*L*P,I.endAngle=h+M*(L+1)*P}})}else y=A/C,D=h,r.each(i,function(O,L){if(!isNaN(O)){var I=r.getItemLayout(L),w=I.angle===v?v:O*y;I.startAngle=D,I.endAngle=D+M*w,D+=M*w}})})}var R=_(8299),St=_(2054),at=_(5271),Xa=_(2459),Ka=_(117),W=_(6499),xe=_(2752),$a=_(7881),Ce=_(8673),lo=_(1508),uo=Math.PI/180;function qa(e,a,t,n,r,i,o,l,u,c){if(!(e.length<2)){for(var h=e.length,v=0;v<h;v++)"outer"===e[v].position&&"labelLine"===e[v].labelAlignTo&&(e[v].linePoints[1][0]+=e[v].label.x-c,e[v].label.x=c);(0,lo.GI)(e,u,u+o)&&function f(g){for(var y={list:[],maxY:0},S={list:[],maxY:0},T=0;T<g.length;T++)if("none"===g[T].labelAlignTo){var b=g[T],x=b.label.y>t?S:y,A=Math.abs(b.label.y-t);if(A>=x.maxY){var C=b.label.x-a-b.len2*r,D=n+b.len,M=Math.abs(C)<D?Math.sqrt(A*A/(1-C*C/D/D)):D;x.rB=M,x.maxY=A}x.list.push(b)}p(y),p(S)}(e)}function p(g){for(var y=g.rB,S=y*y,T=0;T<g.list.length;T++){var b=g.list[T],x=Math.abs(b.label.y-t),A=n+b.len,C=A*A,D=Math.sqrt((1-Math.abs(x*x/S))*C),M=a+(D+b.len2)*r;tn(b,b.targetTextWidth-(M-b.label.x)*r,!0),b.label.x=M}}}function tn(e,a,t){if(void 0===t&&(t=!1),null==e.labelStyleWidth){var n=e.label,r=n.style,i=e.rect,o=r.backgroundColor,l=r.padding,u=l?l[1]+l[3]:0,c=r.overflow,p=i.width+(o?0:u);if(a<p||t){var f=i.height;if(c&&c.match("break")){n.setStyle("backgroundColor",null),n.setStyle("width",a-u);var h=n.getBoundingRect();n.setStyle("width",Math.ceil(h.width)),n.setStyle("backgroundColor",o)}else{var v=a-u;n.setStyle("width",a<p?v:t?v>e.unconstrainedWidth?null:v:null)}var g=n.getBoundingRect();i.width=g.width,i.height=g.height+((n.style.margin||0)+2.1),i.y-=(i.height-f)/2}}}function He(e){return"center"===e.position}var dt=_(4258),_e=_(2377),fo=function(e){function a(t,n,r){var i=e.call(this)||this;i.z2=2;var o=new St.ZP;return i.setTextContent(o),i.updateData(t,n,r,!0),i}return(0,R.ZT)(a,e),a.prototype.updateData=function(t,n,r,i){var o=this,l=t.hostModel,u=t.getItemModel(n),c=u.getModel("emphasis"),p=t.getItemLayout(n),f=(0,m.extend)((0,_e.T)(u.getModel("itemStyle"),p,!0),p);if(isNaN(f.startAngle))o.setShape(f);else{if(i){o.setShape(f);var h=l.getShallow("animationType");l.ecModel.ssr?(at.KZ(o,{scaleX:0,scaleY:0},l,{dataIndex:n,isFrom:!0}),o.originX=f.cx,o.originY=f.cy):"scale"===h?(o.shape.r=p.r0,at.KZ(o,{shape:{r:p.r}},l,n)):null!=r?(o.setShape({startAngle:r,endAngle:r}),at.KZ(o,{shape:{startAngle:p.startAngle,endAngle:p.endAngle}},l,n)):(o.shape.endAngle=p.startAngle,at.D(o,{shape:{endAngle:p.endAngle}},l,n))}else(0,at.Zi)(o),at.D(o,{shape:f},l,n);o.useStyle(t.getItemVisual(n,"style")),(0,W.WO)(o,u);var v=(p.startAngle+p.endAngle)/2,d=l.get("selectedOffset"),g=Math.cos(v)*d,y=Math.sin(v)*d,S=u.getShallow("cursor");S&&o.attr("cursor",S),this._updateLabel(l,t,n),o.ensureState("emphasis").shape=(0,m.extend)({r:p.r+(c.get("scale")&&c.get("scaleSize")||0)},(0,_e.T)(c.getModel("itemStyle"),p)),(0,m.extend)(o.ensureState("select"),{x:g,y,shape:(0,_e.T)(u.getModel(["select","itemStyle"]),p)}),(0,m.extend)(o.ensureState("blur"),{shape:(0,_e.T)(u.getModel(["blur","itemStyle"]),p)});var T=o.getTextGuideLine(),b=o.getTextContent();T&&(0,m.extend)(T.ensureState("select"),{x:g,y}),(0,m.extend)(b.ensureState("select"),{x:g,y}),(0,W.k5)(this,c.get("focus"),c.get("blurScope"),c.get("disabled"))}},a.prototype._updateLabel=function(t,n,r){var i=this,o=n.getItemModel(r),l=o.getModel("labelLine"),u=n.getItemVisual(r,"style"),c=u&&u.fill,p=u&&u.opacity;(0,dt.ni)(i,(0,dt.k3)(o),{labelFetcher:n.hostModel,labelDataIndex:r,inheritColor:c,defaultOpacity:p,defaultText:t.getFormattedLabel(r,"normal")||n.getName(r)});var f=i.getTextContent();i.setTextConfig({position:null,rotation:null}),f.attr({z2:10});var h=t.get(["label","position"]);if("outside"!==h&&"outer"!==h)i.removeTextGuideLine();else{var v=this.getTextGuideLine();v||(v=new Xa.Z,this.setTextGuideLine(v)),(0,Ce.Iu)(this,(0,Ce.$x)(o),{stroke:c,opacity:(0,m.retrieve3)(l.get(["lineStyle","opacity"]),p,1)})}},a}(Ka.C);const ho=function(e){function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.ignoreLabelLineUpdate=!0,t}return(0,R.ZT)(a,e),a.prototype.render=function(t,n,r,i){var c,o=t.getData(),l=this._data,u=this.group;if(!l&&o.count()>0){for(var p=o.getItemLayout(0),f=1;isNaN(p&&p.startAngle)&&f<o.count();++f)p=o.getItemLayout(f);p&&(c=p.startAngle)}if(this._emptyCircleSector&&u.remove(this._emptyCircleSector),0===o.count()&&t.get("showEmptyCircle")){var h=new Ka.C({shape:ja(t,r)});h.useStyle(t.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=h,u.add(h)}o.diff(l).add(function(v){var d=new fo(o,v,c);o.setItemGraphicEl(v,d),u.add(d)}).update(function(v,d){var g=l.getItemGraphicEl(d);g.updateData(o,v,c),g.off("click"),u.add(g),o.setItemGraphicEl(v,g)}).remove(function(v){var d=l.getItemGraphicEl(v);at.XD(d,t,v)}).execute(),function po(e){var n,r,a=e.getData(),t=[],i=!1,o=(e.get("minShowLabelAngle")||0)*uo,l=a.getLayout("viewRect"),u=a.getLayout("r"),c=l.width,p=l.x,f=l.y,h=l.height;function v(C){C.ignore=!0}a.each(function(C){var D=a.getItemGraphicEl(C),M=D.shape,P=D.getTextContent(),O=D.getTextGuideLine(),L=a.getItemModel(C),I=L.getModel("label"),w=I.get("position")||L.get(["emphasis","label","position"]),k=I.get("distanceToLabelLine"),J=I.get("alignTo"),F=(0,Y.GM)(I.get("edgeDistance"),c),q=I.get("bleedMargin"),V=L.getModel("labelLine"),B=V.get("length");B=(0,Y.GM)(B,c);var rt=V.get("length2");if(rt=(0,Y.GM)(rt,c),Math.abs(M.endAngle-M.startAngle)<o)return(0,m.each)(P.states,v),P.ignore=!0,void(O&&((0,m.each)(O.states,v),O.ignore=!0));if(function d(C){if(!C.ignore)return!0;for(var D in C.states)if(!1===C.states[D].ignore)return!0;return!1}(P)){var j,lt,X,Ot,it=(M.startAngle+M.endAngle)/2,H=Math.cos(it),Q=Math.sin(it);n=M.cx,r=M.cy;var ft="inside"===w||"inner"===w;if("center"===w)j=M.cx,lt=M.cy,Ot="center";else{var Mt=(ft?(M.r+M.r0)/2*H:M.r*H)+n,Xt=(ft?(M.r+M.r0)/2*Q:M.r*Q)+r;if(j=Mt+3*H,lt=Xt+3*Q,!ft){var Et=Mt+H*(B+u-M.r),ze=Xt+Q*(B+u-M.r),Kt=Et+(H<0?-1:1)*rt;j="edge"===J?H<0?p+F:p+c-F:Kt+(H<0?-k:k),lt=ze,X=[[Mt,Xt],[Et,ze],[Kt,ze]]}Ot=ft?"center":"edge"===J?H>0?"right":"left":H>0?"left":"right"}var Pt=Math.PI,vt=0,Ct=I.get("rotate");if((0,m.isNumber)(Ct))vt=Ct*(Pt/180);else if("center"===w)vt=0;else if("radial"===Ct||!0===Ct)vt=H<0?-it+Pt:-it;else if("tangential"===Ct&&"outside"!==w&&"outer"!==w){var ht=Math.atan2(H,Q);ht<0&&(ht=2*Pt+ht),Q>0&&(ht=Pt+ht),vt=ht-Pt}if(i=!!vt,P.x=j,P.y=lt,P.rotation=vt,P.setStyle({verticalAlign:"middle"}),ft){P.setStyle({align:Ot});var Ba=P.states.select;Ba&&(Ba.x+=P.x,Ba.y+=P.y)}else{var It=P.getBoundingRect().clone();It.applyTransform(P.getComputedTransform());var Yr=(P.style.margin||0)+2.1;It.y-=Yr/2,It.height+=Yr,t.push({label:P,labelLine:O,position:w,len:B,len2:rt,minTurnAngle:V.get("minTurnAngle"),maxSurfaceAngle:V.get("maxSurfaceAngle"),surfaceNormal:new $a.Z(H,Q),linePoints:X,textAlign:Ot,labelDistance:k,labelAlignTo:J,edgeDistance:F,bleedMargin:q,rect:It,unconstrainedWidth:It.width,labelStyleWidth:P.style.width})}D.setTextConfig({inside:ft})}}),!i&&e.get("avoidLabelOverlap")&&function co(e,a,t,n,r,i,o,l){for(var u=[],c=[],p=Number.MAX_VALUE,f=-Number.MAX_VALUE,h=0;h<e.length;h++){var v=e[h].label;He(e[h])||(v.x<a?(p=Math.min(p,v.x),u.push(e[h])):(f=Math.max(f,v.x),c.push(e[h])))}for(h=0;h<e.length;h++)if(!He(d=e[h])&&d.linePoints){if(null!=d.labelStyleWidth)continue;v=d.label;var y,g=d.linePoints;d.targetTextWidth=y="edge"===d.labelAlignTo?v.x<a?g[2][0]-d.labelDistance-o-d.edgeDistance:o+r-d.edgeDistance-g[2][0]-d.labelDistance:"labelLine"===d.labelAlignTo?v.x<a?p-o-d.bleedMargin:o+r-f-d.bleedMargin:v.x<a?v.x-o-d.bleedMargin:o+r-v.x-d.bleedMargin,tn(d,y)}for(qa(c,a,t,n,1,0,i,0,l,f),qa(u,a,t,n,-1,0,i,0,l,p),h=0;h<e.length;h++){var d;if(!He(d=e[h])&&d.linePoints){var T=(v=d.label).style.padding,A=d.rect.width+(v.style.backgroundColor?0:T?T[1]+T[3]:0),C=(g=d.linePoints)[1][0]-g[2][0];"edge"===d.labelAlignTo?g[2][0]=v.x<a?o+d.edgeDistance+A+d.labelDistance:o+r-d.edgeDistance-A-d.labelDistance:(g[2][0]=v.x<a?v.x+d.labelDistance:v.x-d.labelDistance,g[1][0]=g[2][0]+C),g[1][1]=g[2][1]=v.y}}}(t,n,r,u,c,h,p,f);for(var g=0;g<t.length;g++){var y=t[g],S=y.label,T=y.labelLine,b=isNaN(S.x)||isNaN(S.y);if(S){S.setStyle({align:y.textAlign}),b&&((0,m.each)(S.states,v),S.ignore=!0);var x=S.states.select;x&&(x.x+=S.x,x.y+=S.y)}if(T){var A=y.linePoints;b||!A?((0,m.each)(T.states,v),T.ignore=!0):((0,Ce.qK)(A,y.minTurnAngle),(0,Ce._A)(A,y.surfaceNormal,y.maxSurfaceAngle),T.setShape({points:A}),S.__hostTarget.textGuideLineConfig={anchor:new $a.Z(A[0][0],A[0][1])})}}}(t),"expansion"!==t.get("animationTypeUpdate")&&(this._data=o)},a.prototype.dispose=function(){},a.prototype.containPoint=function(t,n){var i=n.getData().getItemLayout(0);if(i){var o=t[0]-i.cx,l=t[1]-i.cy,u=Math.sqrt(o*o+l*l);return u<=i.r&&u>=i.r0}},a.type="pie",a}(xe.Z);var go=_(2596),en=_(6735),et=_(6496),yo=_(9475);const To=function(){function e(a,t){this._getDataWithEncodedVisual=a,this._getRawData=t}return e.prototype.getAllNames=function(){var a=this._getRawData();return a.mapArray(a.getName)},e.prototype.containName=function(a){return this._getRawData().indexOfName(a)>=0},e.prototype.indexOfName=function(a){return this._getDataWithEncodedVisual().indexOfName(a)},e.prototype.getItemVisual=function(a,t){return this._getDataWithEncodedVisual().getItemVisual(a,t)},e}();var an=_(9740),bo=et.Yf();const Co=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return(0,R.ZT)(a,e),a.prototype.init=function(t){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new To(m.bind(this.getData,this),m.bind(this.getRawData,this)),this._defaultLabelLine(t)},a.prototype.mergeOption=function(){e.prototype.mergeOption.apply(this,arguments)},a.prototype.getInitialData=function(){return function mo(e,a,t){a=(0,m.isArray)(a)&&{coordDimensions:a}||(0,m.extend)({encodeDefine:e.getEncode()},a);var n=e.getSource(),r=(0,go.Z)(n,a).dimensions,i=new en.Z(r,e);return i.initData(n,t),i}(this,{coordDimensions:["value"],encodeDefaulter:m.curry(yo.Ss,this)})},a.prototype.getDataParams=function(t){var n=this.getData(),r=bo(n),i=r.seats;if(!i){var o=[];n.each(n.mapDimension("value"),function(u){o.push(u)}),i=r.seats=(0,Y.HD)(o,n.hostModel.get("percentPrecision"))}var l=e.prototype.getDataParams.call(this,t);return l.percent=i[t]||0,l.$vars.push("percent"),l},a.prototype._defaultLabelLine=function(t){et.Cc(t,"labelLine",["show"]);var n=t.labelLine,r=t.emphasis.labelLine;n.show=n.show&&t.label.show,r.show=r.show&&t.emphasis.label.show},a.type="series.pie",a.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},a}(an.Z);var Do=_(5982),Vt=_(4869),Tt=_(4271);const Mo=function(e){function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=a.type,t.hasSymbolVisual=!0,t}return(0,R.ZT)(a,e),a.prototype.getInitialData=function(t){return(0,Do.Z)(null,this,{useEncodeDefaulter:!0})},a.prototype.getLegendIcon=function(t){var n=new Tt.Z,r=(0,Vt.th)("line",0,t.itemHeight/2,t.itemWidth,0,t.lineStyle.stroke,!1);n.add(r),r.setStyle(t.lineStyle);var i=this.getData().getVisual("symbol"),o=this.getData().getVisual("symbolRotate"),l="none"===i?"circle":i,u=.8*t.itemHeight,c=(0,Vt.th)(l,(t.itemWidth-u)/2,(t.itemHeight-u)/2,u,u,t.itemStyle.fill);return n.add(c),c.setStyle(t.itemStyle),c.rotation=("inherit"===t.iconRotate?o:t.iconRotate||0)*Math.PI/180,c.setOrigin([t.itemWidth/2,t.itemHeight/2]),l.indexOf("empty")>-1&&(c.style.stroke=c.style.fill,c.style.fill="#fff",c.style.lineWidth=2),n},a.type="series.line",a.dependencies=["grid","polar"],a.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},a}(an.Z);var bt=_(4361),ne=_(9133),Qe=_(23),Ye=_(1959);function Io(e,a){this.parent.drift(e,a)}const We=function(e){function a(t,n,r,i){var o=e.call(this)||this;return o.updateData(t,n,r,i),o}return(0,R.ZT)(a,e),a.prototype._createSymbol=function(t,n,r,i,o){this.removeAll();var l=(0,Vt.th)(t,-1,-1,2,2,null,o);l.attr({z2:100,culling:!0,scaleX:i[0]/2,scaleY:i[1]/2}),l.drift=Io,this._symbolType=t,this.add(l)},a.prototype.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(null,t)},a.prototype.getSymbolType=function(){return this._symbolType},a.prototype.getSymbolPath=function(){return this.childAt(0)},a.prototype.highlight=function(){(0,W.fD)(this.childAt(0))},a.prototype.downplay=function(){(0,W.Mh)(this.childAt(0))},a.prototype.setZ=function(t,n){var r=this.childAt(0);r.zlevel=t,r.z=n},a.prototype.setDraggable=function(t,n){var r=this.childAt(0);r.draggable=t,r.cursor=!n&&t?"move":r.cursor},a.prototype.updateData=function(t,n,r,i){this.silent=!1;var o=t.getItemVisual(n,"symbol")||"circle",l=t.hostModel,u=a.getSymbolSize(t,n),c=o!==this._symbolType,p=i&&i.disableAnimation;if(c){var f=t.getItemVisual(n,"symbolKeepAspect");this._createSymbol(o,t,n,u,f)}else{(h=this.childAt(0)).silent=!1;var v={scaleX:u[0]/2,scaleY:u[1]/2};p?h.attr(v):at.D(h,v,l,n),(0,at.Zi)(h)}if(this._updateCommon(t,n,u,r,i),c){var h=this.childAt(0);p||(v={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:h.style.opacity}},h.scaleX=h.scaleY=0,h.style.opacity=0,at.KZ(h,v,l,n))}p&&this.childAt(0).stopAnimation("leave")},a.prototype._updateCommon=function(t,n,r,i,o){var c,p,f,h,v,d,g,y,S,l=this.childAt(0),u=t.hostModel;if(i&&(c=i.emphasisItemStyle,p=i.blurItemStyle,f=i.selectItemStyle,h=i.focus,v=i.blurScope,g=i.labelStatesModels,y=i.hoverScale,S=i.cursorStyle,d=i.emphasisDisabled),!i||t.hasItemOption){var T=i&&i.itemModel?i.itemModel:t.getItemModel(n),b=T.getModel("emphasis");c=b.getModel("itemStyle").getItemStyle(),f=T.getModel(["select","itemStyle"]).getItemStyle(),p=T.getModel(["blur","itemStyle"]).getItemStyle(),h=b.get("focus"),v=b.get("blurScope"),d=b.get("disabled"),g=(0,dt.k3)(T),y=b.getShallow("scale"),S=T.getShallow("cursor")}var x=t.getItemVisual(n,"symbolRotate");l.attr("rotation",(x||0)*Math.PI/180||0);var A=(0,Vt.Cq)(t.getItemVisual(n,"symbolOffset"),r);A&&(l.x=A[0],l.y=A[1]),S&&l.attr("cursor",S);var C=t.getItemVisual(n,"style"),D=C.fill;if(l instanceof Ye.ZP){var M=l.style;l.useStyle((0,m.extend)({image:M.image,x:M.x,y:M.y,width:M.width,height:M.height},C))}else l.useStyle(l.__isEmptyBrush?(0,m.extend)({},C):C),l.style.decal=null,l.setColor(D,o&&o.symbolInnerColor),l.style.strokeNoScale=!0;var P=t.getItemVisual(n,"liftZ"),O=this._z2;null!=P?null==O&&(this._z2=l.z2,l.z2+=P):null!=O&&(l.z2=O,this._z2=null);var L=o&&o.useNameLabel;(0,dt.ni)(l,g,{labelFetcher:u,labelDataIndex:n,defaultText:function I(J){return L?t.getName(J):(0,Qe.H)(t,J)},inheritColor:D,defaultOpacity:C.opacity}),this._sizeX=r[0]/2,this._sizeY=r[1]/2;var w=l.ensureState("emphasis");w.style=c,l.ensureState("select").style=f,l.ensureState("blur").style=p;var k=null==y||!0===y?Math.max(1.1,3/this._sizeY):isFinite(y)&&y>0?+y:1;w.scaleX=this._sizeX*k,w.scaleY=this._sizeY*k,this.setSymbolScale(1),(0,W.k5)(this,h,v,d)},a.prototype.setSymbolScale=function(t){this.scaleX=this.scaleY=t},a.prototype.fadeOut=function(t,n,r){var i=this.childAt(0),o=(0,ne.A)(this).dataIndex,l=r&&r.animation;if(this.silent=i.silent=!0,r&&r.fadeLabel){var u=i.getTextContent();u&&at.bX(u,{style:{opacity:0}},n,{dataIndex:o,removeOpt:l,cb:function(){i.removeTextContent()}})}else i.removeTextContent();at.bX(i,{style:{opacity:0},scaleX:0,scaleY:0},n,{dataIndex:o,cb:t,removeOpt:l})},a.getSymbolSize=function(t,n){return(0,Vt.zp)(t.getItemVisual(n,"symbolSize"))},a}(Tt.Z);function je(e,a,t,n){return a&&!isNaN(a[0])&&!isNaN(a[1])&&!(n.isIgnore&&n.isIgnore(t))&&!(n.clipShape&&!n.clipShape.contain(a[0],a[1]))&&"none"!==e.getItemVisual(t,"symbol")}function nn(e){return null!=e&&!(0,m.isObject)(e)&&(e={isIgnore:e}),e||{}}function rn(e){var a=e.hostModel,t=a.getModel("emphasis");return{emphasisItemStyle:t.getModel("itemStyle").getItemStyle(),blurItemStyle:a.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:a.getModel(["select","itemStyle"]).getItemStyle(),focus:t.get("focus"),blurScope:t.get("blurScope"),emphasisDisabled:t.get("disabled"),hoverScale:t.get("scale"),labelStatesModels:(0,dt.k3)(a),cursorStyle:a.get("cursor")}}const on=function(){function e(a){this.group=new Tt.Z,this._SymbolCtor=a||We}return e.prototype.updateData=function(a,t){this._progressiveEls=null,t=nn(t);var n=this.group,r=a.hostModel,i=this._data,o=this._SymbolCtor,l=t.disableAnimation,u=rn(a),c={disableAnimation:l},p=t.getSymbolPoint||function(f){return a.getItemLayout(f)};i||n.removeAll(),a.diff(i).add(function(f){var h=p(f);if(je(a,h,f,t)){var v=new o(a,f,u,c);v.setPosition(h),a.setItemGraphicEl(f,v),n.add(v)}}).update(function(f,h){var v=i.getItemGraphicEl(h),d=p(f);if(je(a,d,f,t)){var g=a.getItemVisual(f,"symbol")||"circle",y=v&&v.getSymbolType&&v.getSymbolType();if(!v||y&&y!==g)n.remove(v),(v=new o(a,f,u,c)).setPosition(d);else{v.updateData(a,f,u,c);var S={x:d[0],y:d[1]};l?v.attr(S):at.D(v,S,r)}n.add(v),a.setItemGraphicEl(f,v)}else n.remove(v)}).remove(function(f){var h=i.getItemGraphicEl(f);h&&h.fadeOut(function(){n.remove(h)},r)}).execute(),this._getSymbolPoint=p,this._data=a},e.prototype.updateLayout=function(){var a=this,t=this._data;t&&t.eachItemGraphicEl(function(n,r){var i=a._getSymbolPoint(r);n.setPosition(i),n.markRedraw()})},e.prototype.incrementalPrepareUpdate=function(a){this._seriesScope=rn(a),this._data=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(a,t,n){function r(u){u.isGroup||(u.incremental=!0,u.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[],n=nn(n);for(var i=a.start;i<a.end;i++){var o=t.getItemLayout(i);if(je(t,o,i,n)){var l=new this._SymbolCtor(t,i,this._seriesScope);l.traverse(r),l.setPosition(o),this.group.add(l),t.setItemGraphicEl(i,l),this._progressiveEls.push(l)}}},e.prototype.eachRendered=function(a){bt.traverseElements(this._progressiveEls||this.group,a)},e.prototype.remove=function(a){var t=this.group,n=this._data;n&&a?n.eachItemGraphicEl(function(r){r.fadeOut(function(){t.remove(r)},n.hostModel)}):t.removeAll()},e}();var re=_(6018);function sn(e,a,t){var n=e.getBaseAxis(),r=e.getOtherAxis(n),i=function Zo(e,a){var t=0,n=e.scale.getExtent();return"start"===a?t=n[0]:"end"===a?t=n[1]:(0,m.isNumber)(a)&&!isNaN(a)?t=a:n[0]>0?t=n[0]:n[1]<0&&(t=n[1]),t}(r,t),o=n.dim,l=r.dim,u=a.mapDimension(l),c=a.mapDimension(o),p="x"===l||"radius"===l?1:0,f=(0,m.map)(e.dimensions,function(d){return a.mapDimension(d)}),h=!1,v=a.getCalculationInfo("stackResultDimension");return(0,re.M)(a,f[0])&&(h=!0,f[0]=v),(0,re.M)(a,f[1])&&(h=!0,f[1]=v),{dataDimsForPoint:f,valueStart:i,valueAxisDim:l,baseAxisDim:o,stacked:!!h,valueDim:u,baseDim:c,baseDataOffset:p,stackedOverDimension:a.getCalculationInfo("stackedOverDimension")}}function ln(e,a,t,n){var r=NaN;e.stacked&&(r=t.get(t.getCalculationInfo("stackedOverDimension"),n)),isNaN(r)&&(r=e.valueStart);var i=e.baseDataOffset,o=[];return o[i]=t.get(e.baseDim,n),o[1-i]=r,a.dataToPoint(o)}var Gt=_(3138),Uo=_(2920),ie=_(5302),un=_(857),Ae=_(3645),_t=Math.min,At=Math.max;function Zt(e,a){return isNaN(e)||isNaN(a)}function Xe(e,a,t,n,r,i,o,l,u){for(var c,p,f,h,v,d,g=t,y=0;y<n;y++){var S=a[2*g],T=a[2*g+1];if(g>=r||g<0)break;if(Zt(S,T)){if(u){g+=i;continue}break}if(g===t)e[i>0?"moveTo":"lineTo"](S,T),f=S,h=T;else{var b=S-c,x=T-p;if(b*b+x*x<.5){g+=i;continue}if(o>0){for(var A=g+i,C=a[2*A],D=a[2*A+1];C===S&&D===T&&y<n;)y++,C=a[2*(A+=i)],D=a[2*A+1],b=(S=a[2*(g+=i)])-c,x=(T=a[2*g+1])-p;var M=y+1;if(u)for(;Zt(C,D)&&M<n;)M++,C=a[2*(A+=i)],D=a[2*A+1];var P=.5,O=0,L=0,I=void 0,w=void 0;if(M>=n||Zt(C,D))v=S,d=T;else{O=C-c,L=D-p;var k=S-c,J=C-S,F=T-p,q=D-T,V=void 0,B=void 0;if("x"===l){var rt=O>0?1:-1;v=S-rt*(V=Math.abs(k))*o,d=T,I=S+rt*(B=Math.abs(J))*o,w=T}else if("y"===l){var it=L>0?1:-1;v=S,d=T-it*(V=Math.abs(F))*o,I=S,w=T+it*(B=Math.abs(q))*o}else V=Math.sqrt(k*k+F*F),v=S-O*o*(1-(P=(B=Math.sqrt(J*J+q*q))/(B+V))),d=T-L*o*(1-P),w=T+L*o*P,I=_t(I=S+O*o*P,At(C,S)),w=_t(w,At(D,T)),I=At(I,_t(C,S)),d=T-(L=(w=At(w,_t(D,T)))-T)*V/B,v=_t(v=S-(O=I-S)*V/B,At(c,S)),d=_t(d,At(p,T)),I=S+(O=S-(v=At(v,_t(c,S))))*B/V,w=T+(L=T-(d=At(d,_t(p,T))))*B/V}e.bezierCurveTo(f,h,v,d,S,T),f=I,h=w}else e.lineTo(S,T)}c=S,p=T,g+=i}return y}var cn=function e(){this.smooth=0,this.smoothConstraint=!0},ko=function(e){function a(t){var n=e.call(this,t)||this;return n.type="ec-polyline",n}return(0,R.ZT)(a,e),a.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},a.prototype.getDefaultShape=function(){return new cn},a.prototype.buildPath=function(t,n){var r=n.points,i=0,o=r.length/2;if(n.connectNulls){for(;o>0&&Zt(r[2*o-2],r[2*o-1]);o--);for(;i<o&&Zt(r[2*i],r[2*i+1]);i++);}for(;i<o;)i+=Xe(t,r,i,o,o,1,n.smooth,n.smoothMonotone,n.connectNulls)+1},a.prototype.getPointOn=function(t,n){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var l,u,i=this.path.data,o=un.Z.CMD,c="x"===n,p=[],f=0;f<i.length;){var v=void 0,d=void 0,g=void 0,y=void 0,S=void 0,T=void 0,b=void 0;switch(i[f++]){case o.M:l=i[f++],u=i[f++];break;case o.L:if(v=i[f++],d=i[f++],(b=c?(t-l)/(v-l):(t-u)/(d-u))<=1&&b>=0){var x=c?(d-u)*b+u:(v-l)*b+l;return c?[t,x]:[x,t]}l=v,u=d;break;case o.C:v=i[f++],d=i[f++],g=i[f++],y=i[f++],S=i[f++],T=i[f++];var A=c?(0,Ae.kD)(l,v,g,S,t,p):(0,Ae.kD)(u,d,y,T,t,p);if(A>0)for(var C=0;C<A;C++){var D=p[C];if(D<=1&&D>=0)return x=c?(0,Ae.af)(u,d,y,T,D):(0,Ae.af)(l,v,g,S,D),c?[t,x]:[x,t]}l=S,u=T}}},a}(ie.ZP),zo=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return(0,R.ZT)(a,e),a}(cn),Ro=function(e){function a(t){var n=e.call(this,t)||this;return n.type="ec-polygon",n}return(0,R.ZT)(a,e),a.prototype.getDefaultShape=function(){return new zo},a.prototype.buildPath=function(t,n){var r=n.points,i=n.stackedOnPoints,o=0,l=r.length/2,u=n.smoothMonotone;if(n.connectNulls){for(;l>0&&Zt(r[2*l-2],r[2*l-1]);l--);for(;o<l&&Zt(r[2*o],r[2*o+1]);o++);}for(;o<l;){var c=Xe(t,r,o,l,l,1,n.smooth,u,n.connectNulls);Xe(t,i,o+c-1,c,l,-1,n.stackedOnSmooth,u,n.connectNulls),o+=c+1,t.closePath()}},a}(ie.ZP),pn=_(2277),Eo=_(2118),Ke=_(8597),$e=_(2);function fn(e,a){if(e.length===a.length){for(var t=0;t<e.length;t++)if(e[t]!==a[t])return;return!0}}function vn(e){for(var a=1/0,t=1/0,n=-1/0,r=-1/0,i=0;i<e.length;){var o=e[i++],l=e[i++];isNaN(o)||(a=Math.min(o,a),n=Math.max(o,n)),isNaN(l)||(t=Math.min(l,t),r=Math.max(l,r))}return[[a,t],[n,r]]}function hn(e,a){var t=vn(e),n=t[0],r=t[1],i=vn(a),o=i[0],l=i[1];return Math.max(Math.abs(n[0]-o[0]),Math.abs(n[1]-o[1]),Math.abs(r[0]-l[0]),Math.abs(r[1]-l[1]))}function dn(e){return m.isNumber(e)?e:e?.5:0}function Dt(e,a,t,n){var r=a.getBaseAxis(),i="x"===r.dim||"radius"===r.dim?0:1,o=[],l=0,u=[],c=[],p=[],f=[];if(n){for(l=0;l<e.length;l+=2)!isNaN(e[l])&&!isNaN(e[l+1])&&f.push(e[l],e[l+1]);e=f}for(l=0;l<e.length-2;l+=2)switch(p[0]=e[l+2],p[1]=e[l+3],c[0]=e[l],c[1]=e[l+1],o.push(c[0],c[1]),t){case"end":u[i]=p[i],u[1-i]=c[1-i],o.push(u[0],u[1]);break;case"middle":var v=[];u[i]=v[i]=(c[i]+p[i])/2,u[1-i]=c[1-i],v[1-i]=p[1-i],o.push(u[0],u[1]),o.push(v[0],v[1]);break;default:u[i]=c[i],u[1-i]=p[1-i],o.push(u[0],u[1])}return o.push(e[l++],e[l++]),o}function Ho(e,a){return isNaN(e)||isNaN(a)}function gn(e,a){return[e[2*a],e[2*a+1]]}function mn(e){if(e.get(["endLabel","show"]))return!0;for(var a=0;a<W.L1.length;a++)if(e.get([W.L1[a],"endLabel","show"]))return!0;return!1}function qe(e,a,t,n){if((0,Eo.H)(a,"cartesian2d")){var r=n.getModel("endLabel"),i=r.get("valueAnimation"),o=n.getData(),l={lastFrameIndex:0},u=mn(n)?function(v,d){e._endLabelOnDuring(v,d,o,l,i,r,a)}:null,c=a.getBaseAxis().isHorizontal(),p=(0,pn.ID)(a,t,n,function(){var v=e._endLabel;v&&t&&null!=l.originalX&&v.attr({x:l.originalX,y:l.originalY})},u);if(!n.get("clip",!0)){var f=p.shape,h=Math.max(f.width,f.height);c?(f.y-=h,f.height+=2*h):(f.x-=h,f.width+=2*h)}return u&&u(1,p),p}return(0,pn.X0)(a,t,n)}const Xo=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return(0,R.ZT)(a,e),a.prototype.init=function(){var t=new Tt.Z,n=new on;this.group.add(n.group),this._symbolDraw=n,this._lineGroup=t},a.prototype.render=function(t,n,r){var i=this,o=t.coordinateSystem,l=this.group,u=t.getData(),c=t.getModel("lineStyle"),p=t.getModel("areaStyle"),f=u.getLayout("points")||[],h="polar"===o.type,v=this._coordSys,d=this._symbolDraw,g=this._polyline,y=this._polygon,S=this._lineGroup,T=!n.ssr&&t.isAnimationEnabled(),b=!p.isEmpty(),x=p.get("origin"),A=sn(o,u,x),C=b&&function Bo(e,a,t){if(!t.valueDim)return[];for(var n=a.count(),r=(0,Gt.o)(2*n),i=0;i<n;i++){var o=ln(t,e,a,i);r[2*i]=o[0],r[2*i+1]=o[1]}return r}(o,u,A),D=t.get("showSymbol"),M=t.get("connectNulls"),P=D&&!h&&function Go(e,a,t){var n=e.get("showAllSymbol"),r="auto"===n;if(!n||r){var i=t.getAxesByScale("ordinal")[0];if(i&&(!r||!function Jo(e,a){var t=e.getExtent(),n=Math.abs(t[1]-t[0])/e.scale.count();isNaN(n)&&(n=0);for(var r=a.count(),i=Math.max(1,Math.round(r/5)),o=0;o<r;o+=i)if(1.5*We.getSymbolSize(a,o)[e.isHorizontal()?1:0]>n)return!1;return!0}(i,a))){var o=a.mapDimension(i.dim),l={};return m.each(i.getViewLabels(),function(u){var c=i.scale.getRawOrdinalNumber(u.tickValue);l[c]=1}),function(u){return!l.hasOwnProperty(a.get(o,u))}}}}(t,u,o),O=this._data;O&&O.eachItemGraphicEl(function(X,Ot){X.__temp&&(l.remove(X),O.setItemGraphicEl(Ot,null))}),D||d.remove(),l.add(S);var I,L=!h&&t.get("step");o&&o.getArea&&t.get("clip",!0)&&(null!=(I=o.getArea()).width?(I.x-=.1,I.y-=.1,I.width+=.2,I.height+=.2):I.r0&&(I.r0-=.5,I.r+=.5)),this._clipShapeForSymbol=I;var w=function Vo(e,a,t){var n=e.getVisual("visualMeta");if(n&&n.length&&e.count()&&"cartesian2d"===a.type){for(var r,i,o=n.length-1;o>=0;o--){var l=e.getDimensionInfo(n[o].dimension);if("x"===(r=l&&l.coordDim)||"y"===r){i=n[o];break}}if(i){var u=a.getAxis(r),c=m.map(i.stops,function(b){return{coord:u.toGlobalCoord(u.dataToCoord(b.value)),color:b.color}}),p=c.length,f=i.outerColors.slice();p&&c[0].coord>c[p-1].coord&&(c.reverse(),f.reverse());var h=function Fo(e,a){var r,i,t=[],n=e.length;function o(p,f,h){var v=p.coord;return{coord:h,color:(0,$e.lerp)((h-v)/(f.coord-v),[p.color,f.color])}}for(var l=0;l<n;l++){var u=e[l],c=u.coord;if(c<0)r=u;else{if(c>a){i?t.push(o(i,u,a)):r&&t.push(o(r,u,0),o(r,u,a));break}r&&(t.push(o(r,u,0)),r=null),t.push(u),i=u}}return t}(c,"x"===r?t.getWidth():t.getHeight()),v=h.length;if(!v&&p)return c[0].coord<0?f[1]?f[1]:c[p-1].color:f[0]?f[0]:c[0].color;var g=h[0].coord-10,y=h[v-1].coord+10,S=y-g;if(S<.001)return"transparent";m.each(h,function(b){b.offset=(b.coord-g)/S}),h.push({offset:v?h[v-1].offset:.5,color:f[1]||"transparent"}),h.unshift({offset:v?h[0].offset:.5,color:f[0]||"transparent"});var T=new Uo.Z(0,0,0,0,h,!0);return T[r]=g,T[r+"2"]=y,T}}}(u,o,r)||u.getVisual("style")[u.getVisual("drawType")];if(g&&v.type===o.type&&L===this._step){b&&!y?y=this._newPolygon(f,C):y&&!b&&(S.remove(y),y=this._polygon=null),h||this._initOrUpdateEndLabel(t,o,(0,Ke.Lz)(w));var k=S.getClipPath();if(k){var J=qe(this,o,!1,t);at.KZ(k,{shape:J.shape},t)}else S.setClipPath(qe(this,o,!0,t));D&&d.updateData(u,{isIgnore:P,clipShape:I,disableAnimation:!0,getSymbolPoint:function(X){return[f[2*X],f[2*X+1]]}}),(!fn(this._stackedOnPoints,C)||!fn(this._points,f))&&(T?this._doUpdateAnimation(u,C,o,r,L,x,M):(L&&(f=Dt(f,o,L,M),C&&(C=Dt(C,o,L,M))),g.setShape({points:f}),y&&y.setShape({points:f,stackedOnPoints:C})))}else D&&d.updateData(u,{isIgnore:P,clipShape:I,disableAnimation:!0,getSymbolPoint:function(X){return[f[2*X],f[2*X+1]]}}),T&&this._initSymbolLabelAnimation(u,o,I),L&&(f=Dt(f,o,L,M),C&&(C=Dt(C,o,L,M))),g=this._newPolyline(f),b?y=this._newPolygon(f,C):y&&(S.remove(y),y=this._polygon=null),h||this._initOrUpdateEndLabel(t,o,(0,Ke.Lz)(w)),S.setClipPath(qe(this,o,!0,t));var F=t.getModel("emphasis"),q=F.get("focus"),V=F.get("blurScope"),B=F.get("disabled");g.useStyle(m.defaults(c.getLineStyle(),{fill:"none",stroke:w,lineJoin:"bevel"})),(0,W.WO)(g,t,"lineStyle"),g.style.lineWidth>0&&"bolder"===t.get(["emphasis","lineStyle","width"])&&(g.getState("emphasis").style.lineWidth=+g.style.lineWidth+1),(0,ne.A)(g).seriesIndex=t.seriesIndex,(0,W.k5)(g,q,V,B);var it=dn(t.get("smooth")),H=t.get("smoothMonotone");if(g.setShape({smooth:it,smoothMonotone:H,connectNulls:M}),y){var Q=u.getCalculationInfo("stackedOnSeries"),j=0;y.useStyle(m.defaults(p.getAreaStyle(),{fill:w,opacity:.7,lineJoin:"bevel",decal:u.getVisual("style").decal})),Q&&(j=dn(Q.get("smooth"))),y.setShape({smooth:it,stackedOnSmooth:j,smoothMonotone:H,connectNulls:M}),(0,W.WO)(y,t,"areaStyle"),(0,ne.A)(y).seriesIndex=t.seriesIndex,(0,W.k5)(y,q,V,B)}var lt=function(X){i._changePolyState(X)};u.eachItemGraphicEl(function(X){X&&(X.onHoverStateChange=lt)}),this._polyline.onHoverStateChange=lt,this._data=u,this._coordSys=o,this._stackedOnPoints=C,this._points=f,this._step=L,this._valueOrigin=x,t.get("triggerLineEvent")&&(this.packEventData(t,g),y&&this.packEventData(t,y))},a.prototype.packEventData=function(t,n){(0,ne.A)(n).eventData={componentType:"series",componentSubType:"line",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"line"}},a.prototype.highlight=function(t,n,r,i){var o=t.getData(),l=et.gO(o,i);if(this._changePolyState("emphasis"),!(l instanceof Array)&&null!=l&&l>=0){var u=o.getLayout("points"),c=o.getItemGraphicEl(l);if(!c){var p=u[2*l],f=u[2*l+1];if(isNaN(p)||isNaN(f)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(p,f))return;var h=t.get("zlevel")||0,v=t.get("z")||0;(c=new We(o,l)).x=p,c.y=f,c.setZ(h,v);var d=c.getSymbolPath().getTextContent();d&&(d.zlevel=h,d.z=v,d.z2=this._polyline.z2+1),c.__temp=!0,o.setItemGraphicEl(l,c),c.stopSymbolAnimation(!0),this.group.add(c)}c.highlight()}else xe.Z.prototype.highlight.call(this,t,n,r,i)},a.prototype.downplay=function(t,n,r,i){var o=t.getData(),l=et.gO(o,i);if(this._changePolyState("normal"),null!=l&&l>=0){var u=o.getItemGraphicEl(l);u&&(u.__temp?(o.setItemGraphicEl(l,null),this.group.remove(u)):u.downplay())}else xe.Z.prototype.downplay.call(this,t,n,r,i)},a.prototype._changePolyState=function(t){var n=this._polygon;(0,W.Gl)(this._polyline,t),n&&(0,W.Gl)(n,t)},a.prototype._newPolyline=function(t){var n=this._polyline;return n&&this._lineGroup.remove(n),n=new ko({shape:{points:t},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(n),this._polyline=n,n},a.prototype._newPolygon=function(t,n){var r=this._polygon;return r&&this._lineGroup.remove(r),r=new Ro({shape:{points:t,stackedOnPoints:n},segmentIgnoreThreshold:2}),this._lineGroup.add(r),this._polygon=r,r},a.prototype._initSymbolLabelAnimation=function(t,n,r){var i,o,l=n.getBaseAxis(),u=l.inverse;"cartesian2d"===n.type?(i=l.isHorizontal(),o=!1):"polar"===n.type&&(i="angle"===l.dim,o=!0);var c=t.hostModel,p=c.get("animationDuration");m.isFunction(p)&&(p=p(null));var f=c.get("animationDelay")||0,h=m.isFunction(f)?f(null):f;t.eachItemGraphicEl(function(v,d){var g=v;if(g){var S=void 0,T=void 0,b=void 0;if(r)if(o){var x=r,A=n.pointToCoord([v.x,v.y]);i?(S=x.startAngle,T=x.endAngle,b=-A[1]/180*Math.PI):(S=x.r0,T=x.r,b=A[0])}else i?(S=r.x,T=r.x+r.width,b=v.x):(S=r.y+r.height,T=r.y,b=v.y);var D=T===S?0:(b-S)/(T-S);u&&(D=1-D);var M=m.isFunction(f)?f(d):p*D+h,P=g.getSymbolPath(),O=P.getTextContent();g.attr({scaleX:0,scaleY:0}),g.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:M}),O&&O.animateFrom({style:{opacity:0}},{duration:300,delay:M}),P.disableLabelAnimation=!0}})},a.prototype._initOrUpdateEndLabel=function(t,n,r){var i=t.getModel("endLabel");if(mn(t)){var o=t.getData(),l=this._polyline,u=o.getLayout("points");if(!u)return l.removeTextContent(),void(this._endLabel=null);var c=this._endLabel;c||((c=this._endLabel=new St.ZP({z2:200})).ignoreClip=!0,l.setTextContent(this._endLabel),l.disableLabelAnimation=!0);var p=function Qo(e){for(var a=e.length/2;a>0&&Ho(e[2*a-2],e[2*a-1]);a--);return a-1}(u);p>=0&&((0,dt.ni)(l,(0,dt.k3)(t,"endLabel"),{inheritColor:r,labelFetcher:t,labelDataIndex:p,defaultText:function(f,h,v){return null!=v?(0,Qe.O)(o,v):(0,Qe.H)(o,f)},enableTextSetter:!0},function Wo(e,a){var t=a.getBaseAxis(),n=t.isHorizontal(),r=t.inverse,i=n?r?"right":"left":"center",o=n?"middle":r?"top":"bottom";return{normal:{align:e.get("align")||i,verticalAlign:e.get("verticalAlign")||o}}}(i,n)),l.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},a.prototype._endLabelOnDuring=function(t,n,r,i,o,l,u){var c=this._endLabel,p=this._polyline;if(c){t<1&&null==i.originalX&&(i.originalX=c.x,i.originalY=c.y);var f=r.getLayout("points"),h=r.hostModel,v=h.get("connectNulls"),d=l.get("precision"),g=l.get("distance")||0,y=u.getBaseAxis(),S=y.isHorizontal(),T=y.inverse,b=n.shape,x=T?S?b.x:b.y+b.height:S?b.x+b.width:b.y,A=(S?g:0)*(T?-1:1),C=(S?0:-g)*(T?-1:1),D=S?"x":"y",M=function Yo(e,a,t){for(var i,o,n=e.length/2,r="x"===t?0:1,l=0,u=-1,c=0;c<n;c++)if(o=e[2*c+r],!isNaN(o)&&!isNaN(e[2*c+1-r])){if(0===c){i=o;continue}if(i<=a&&o>=a||i>=a&&o<=a){u=c;break}l=c,i=o}return{range:[l,u],t:(a-i)/(o-i)}}(f,x,D),P=M.range,O=P[1]-P[0],L=void 0;if(O>=1){if(O>1&&!v){var I=gn(f,P[0]);c.attr({x:I[0]+A,y:I[1]+C}),o&&(L=h.getRawValue(P[0]))}else{(I=p.getPointOn(x,D))&&c.attr({x:I[0]+A,y:I[1]+C});var w=h.getRawValue(P[0]),k=h.getRawValue(P[1]);o&&(L=et.pk(r,d,w,k,M.t))}i.lastFrameIndex=P[0]}else{var J=1===t||i.lastFrameIndex>0?P[0]:0;I=gn(f,J),o&&(L=h.getRawValue(J)),c.attr({x:I[0]+A,y:I[1]+C})}if(o){var F=(0,dt.qA)(c);"function"==typeof F.setLabelText&&F.setLabelText(L)}}},a.prototype._doUpdateAnimation=function(t,n,r,i,o,l,u){var c=this._polyline,p=this._polygon,f=t.hostModel,h=function No(e,a,t,n,r,i,o,l){for(var u=function Lo(e,a){var t=[];return a.diff(e).add(function(n){t.push({cmd:"+",idx:n})}).update(function(n,r){t.push({cmd:"=",idx:r,idx1:n})}).remove(function(n){t.push({cmd:"-",idx:n})}).execute(),t}(e,a),c=[],p=[],f=[],h=[],v=[],d=[],g=[],y=sn(r,a,o),S=e.getLayout("points")||[],T=a.getLayout("points")||[],b=0;b<u.length;b++){var x=u[b],A=!0,C=void 0,D=void 0;switch(x.cmd){case"=":var M=S[C=2*x.idx],P=S[C+1],O=T[D=2*x.idx1],L=T[D+1];(isNaN(M)||isNaN(P))&&(M=O,P=L),c.push(M,P),p.push(O,L),f.push(t[C],t[C+1]),h.push(n[D],n[D+1]),g.push(a.getRawIndex(x.idx1));break;case"+":var I=x.idx,w=y.dataDimsForPoint,k=r.dataToPoint([a.get(w[0],I),a.get(w[1],I)]);D=2*I,c.push(k[0],k[1]),p.push(T[D],T[D+1]);var J=ln(y,r,a,I);f.push(J[0],J[1]),h.push(n[D],n[D+1]),g.push(a.getRawIndex(I));break;case"-":A=!1}A&&(v.push(x),d.push(d.length))}d.sort(function(lt,X){return g[lt]-g[X]});var F=c.length,q=(0,Gt.o)(F),V=(0,Gt.o)(F),B=(0,Gt.o)(F),rt=(0,Gt.o)(F),it=[];for(b=0;b<d.length;b++){var H=d[b],Q=2*b,j=2*H;q[Q]=c[j],q[Q+1]=c[j+1],V[Q]=p[j],V[Q+1]=p[j+1],B[Q]=f[j],B[Q+1]=f[j+1],rt[Q]=h[j],rt[Q+1]=h[j+1],it[b]=v[H]}return{current:q,next:V,stackedOnCurrent:B,stackedOnNext:rt,status:it}}(this._data,t,this._stackedOnPoints,n,this._coordSys,0,this._valueOrigin),v=h.current,d=h.stackedOnCurrent,g=h.next,y=h.stackedOnNext;if(o&&(v=Dt(h.current,r,o,u),d=Dt(h.stackedOnCurrent,r,o,u),g=Dt(h.next,r,o,u),y=Dt(h.stackedOnNext,r,o,u)),hn(v,g)>3e3||p&&hn(d,y)>3e3)return c.stopAnimation(),c.setShape({points:g}),void(p&&(p.stopAnimation(),p.setShape({points:g,stackedOnPoints:y})));c.shape.__points=h.current,c.shape.points=v;var S={shape:{points:g}};h.current!==v&&(S.shape.__points=h.next),c.stopAnimation(),at.D(c,S,f),p&&(p.setShape({points:v,stackedOnPoints:d}),p.stopAnimation(),at.D(p,{shape:{stackedOnPoints:y}},f),c.shape.points!==p.shape.points&&(p.shape.points=c.shape.points));for(var T=[],b=h.status,x=0;x<b.length;x++)if("="===b[x].cmd){var C=t.getItemGraphicEl(b[x].idx1);C&&T.push({el:C,ptIdx:x})}c.animators&&c.animators.length&&c.animators[0].during(function(){p&&p.dirtyShape();for(var D=c.shape.__points,M=0;M<T.length;M++){var P=T[M].el,O=2*T[M].ptIdx;P.x=D[O],P.y=D[O+1],P.markRedraw()}})},a.prototype.remove=function(t){var n=this.group,r=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),r&&r.eachItemGraphicEl(function(i,o){i.__temp&&(n.remove(i),r.setItemGraphicEl(o,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},a.type="line",a}(xe.Z);var Ko=_(3649),qo=_(3436),es=_(4027),yn=_(2590),oe=_(562);const ta=function(e){function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=a.type,t.layoutMode={type:"box",ignoreSize:!0},t}return(0,R.ZT)(a,e),a.prototype.init=function(t,n,r){this.mergeDefaultAndTheme(t,r),t.selected=t.selected||{},this._updateSelector(t)},a.prototype.mergeOption=function(t,n){e.prototype.mergeOption.call(this,t,n),this._updateSelector(t)},a.prototype._updateSelector=function(t){var n=t.selector,r=this.ecModel;!0===n&&(n=t.selector=["all","inverse"]),m.isArray(n)&&m.each(n,function(i,o){m.isString(i)&&(i={type:i}),n[o]=m.merge(i,function(e,a){return"all"===a?{type:"all",title:e.getLocaleModel().get(["legend","selector","all"])}:"inverse"===a?{type:"inverse",title:e.getLocaleModel().get(["legend","selector","inverse"])}:void 0}(r,i.type))})},a.prototype.optionUpdated=function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&"single"===this.get("selectedMode")){for(var n=!1,r=0;r<t.length;r++){var i=t[r].get("name");if(this.isSelected(i)){this.select(i),n=!0;break}}!n&&this.select(t[0].get("name"))}},a.prototype._updateData=function(t){var n=[],r=[];t.eachRawSeries(function(u){var p;if(r.push(u.name),u.legendVisualProvider){var h=u.legendVisualProvider.getAllNames();t.isSeriesFiltered(u)||(r=r.concat(h)),h.length?n=n.concat(h):p=!0}else p=!0;p&&(0,et.yu)(u)&&n.push(u.name)}),this._availableNames=r;var i=this.get("data")||n,o=m.createHashMap(),l=m.map(i,function(u){return(m.isString(u)||m.isNumber(u))&&(u={name:u}),o.get(u.name)?null:(o.set(u.name,!0),new yn.Z(u,this,this.ecModel))},this);this._data=m.filter(l,function(u){return!!u})},a.prototype.getData=function(){return this._data},a.prototype.select=function(t){var n=this.option.selected;"single"===this.get("selectedMode")&&m.each(this._data,function(o){n[o.get("name")]=!1}),n[t]=!0},a.prototype.unSelect=function(t){"single"!==this.get("selectedMode")&&(this.option.selected[t]=!1)},a.prototype.toggleSelected=function(t){var n=this.option.selected;n.hasOwnProperty(t)||(n[t]=!0),this[n[t]?"unSelect":"select"](t)},a.prototype.allSelect=function(){var n=this.option.selected;m.each(this._data,function(r){n[r.get("name",!0)]=!0})},a.prototype.inverseSelect=function(){var n=this.option.selected;m.each(this._data,function(r){var i=r.get("name",!0);n.hasOwnProperty(i)||(n[i]=!0),n[i]=!n[i]})},a.prototype.isSelected=function(t){var n=this.option.selected;return!(n.hasOwnProperty(t)&&!n[t])&&m.indexOf(this._availableNames,t)>=0},a.prototype.getOrient=function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},a.type="legend.plain",a.dependencies=["series"],a.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},a}(oe.Z);var se=_(2501);function Sn(e,a){var t=Ke.MY(a.get("padding")),n=a.getItemStyle(["color","opacity"]);return n.fill=a.get("backgroundColor"),new se.Z({shape:{x:e.x-t[3],y:e.y-t[0],width:e.width+t[1]+t[3],height:e.height+t[0]+t[2],r:a.get("borderRadius")},style:n,silent:!0,z2:-1})}var le=_(907),is=_(9128),Jt=m.curry,ea=m.each,De=Tt.Z;function Tn(e,a,t,n){na(e,a,t,n),t.dispatchAction({type:"legendToggleSelect",name:null!=e?e:a}),aa(e,a,t,n)}function bn(e){for(var t,a=e.getZr().storage.getDisplayList(),n=0,r=a.length;n<r&&!(t=a[n].states.emphasis);)n++;return t&&t.hoverLayer}function aa(e,a,t,n){bn(t)||t.dispatchAction({type:"highlight",seriesName:e,name:a,excludeSeriesId:n})}function na(e,a,t,n){bn(t)||t.dispatchAction({type:"downplay",seriesName:e,name:a,excludeSeriesId:n})}const xn=function(e){function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=a.type,t.newlineDisabled=!1,t}return(0,R.ZT)(a,e),a.prototype.init=function(){this.group.add(this._contentGroup=new De),this.group.add(this._selectorGroup=new De),this._isFirstRender=!0},a.prototype.getContentGroup=function(){return this._contentGroup},a.prototype.getSelectorGroup=function(){return this._selectorGroup},a.prototype.render=function(t,n,r){var i=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),t.get("show",!0)){var o=t.get("align"),l=t.get("orient");(!o||"auto"===o)&&(o="right"===t.get("left")&&"vertical"===l?"right":"left");var u=t.get("selector",!0),c=t.get("selectorPosition",!0);u&&(!c||"auto"===c)&&(c="horizontal"===l?"end":"start"),this.renderInner(o,t,n,r,u,l,c);var p=t.getBoxLayoutParams(),f={width:r.getWidth(),height:r.getHeight()},h=t.get("padding"),v=ot.ME(p,f,h),d=this.layoutInner(t,o,v,i,u,c),g=ot.ME(m.defaults({width:d.width,height:d.height},p),f,h);this.group.x=g.x-d.x,this.group.y=g.y-d.y,this.group.markRedraw(),this.group.add(this._backgroundEl=Sn(d,t))}},a.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},a.prototype.renderInner=function(t,n,r,i,o,l,u){var c=this.getContentGroup(),p=m.createHashMap(),f=n.get("selectedMode"),h=[];r.eachRawSeries(function(v){!v.get("legendHoverLink")&&h.push(v.id)}),ea(n.getData(),function(v,d){var g=v.get("name");if(!this.newlineDisabled&&(""===g||"\n"===g)){var y=new De;return y.newline=!0,void c.add(y)}var S=r.getSeriesByName(g)[0];if(!p.get(g))if(S){var T=S.getData(),b=T.getVisual("legendLineStyle")||{},x=T.getVisual("legendIcon"),A=T.getVisual("style");this._createItem(S,g,d,v,n,t,b,A,x,f,i).on("click",Jt(Tn,g,null,i,h)).on("mouseover",Jt(aa,S.name,null,i,h)).on("mouseout",Jt(na,S.name,null,i,h)),p.set(g,!0)}else r.eachRawSeries(function(D){if(!p.get(g)&&D.legendVisualProvider){var M=D.legendVisualProvider;if(!M.containName(g))return;var P=M.indexOfName(g),O=M.getItemVisual(P,"style"),L=M.getItemVisual(P,"legendIcon"),I=(0,$e.parse)(O.fill);I&&0===I[3]&&(I[3]=.2,O=m.extend(m.extend({},O),{fill:(0,$e.stringify)(I,"rgba")})),this._createItem(D,g,d,v,n,t,{},O,L,f,i).on("click",Jt(Tn,null,g,i,h)).on("mouseover",Jt(aa,null,g,i,h)).on("mouseout",Jt(na,null,g,i,h)),p.set(g,!0)}},this)},this),o&&this._createSelector(o,n,i,l,u)},a.prototype._createSelector=function(t,n,r,i,o){var l=this.getSelectorGroup();ea(t,function(c){var p=c.type,f=new St.ZP({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){r.dispatchAction({type:"all"===p?"legendAllSelect":"legendInverseSelect"})}});l.add(f);var h=n.getModel("selectorLabel"),v=n.getModel(["emphasis","selectorLabel"]);(0,dt.ni)(f,{normal:h,emphasis:v},{defaultText:c.title}),(0,W.vF)(f)})},a.prototype._createItem=function(t,n,r,i,o,l,u,c,p,f,h){var v=t.visualDrawType,d=o.get("itemWidth"),g=o.get("itemHeight"),y=o.isSelected(n),S=i.get("symbolRotate"),T=i.get("symbolKeepAspect"),b=i.get("icon"),x=function ss(e,a,t,n,r,i,o){function l(y,S){"auto"===y.lineWidth&&(y.lineWidth=S.lineWidth>0?2:0),ea(y,function(T,b){"inherit"===y[b]&&(y[b]=S[b])})}var u=a.getModel("itemStyle"),c=u.getItemStyle(),p=0===e.lastIndexOf("empty",0)?"fill":"stroke",f=u.getShallow("decal");c.decal=f&&"inherit"!==f?(0,is.I)(f,o):n.decal,"inherit"===c.fill&&(c.fill=n[r]),"inherit"===c.stroke&&(c.stroke=n[p]),"inherit"===c.opacity&&(c.opacity=("fill"===r?n:t).opacity),l(c,n);var h=a.getModel("lineStyle"),v=h.getLineStyle();if(l(v,t),"auto"===c.fill&&(c.fill=n.fill),"auto"===c.stroke&&(c.stroke=n.fill),"auto"===v.stroke&&(v.stroke=n.fill),!i){var d=a.get("inactiveBorderWidth");c.lineWidth="auto"===d?n.lineWidth>0&&c[p]?2:0:c.lineWidth,c.fill=a.get("inactiveColor"),c.stroke=a.get("inactiveBorderColor"),v.stroke=h.get("inactiveColor"),v.lineWidth=h.get("inactiveWidth")}return{itemStyle:c,lineStyle:v}}(p=b||p||"roundRect",i,u,c,v,y,h),A=new De,C=i.getModel("textStyle");if(!m.isFunction(t.getLegendIcon)||b&&"inherit"!==b){var D="inherit"===b&&t.getData().getVisual("symbol")?"inherit"===S?t.getData().getVisual("symbolRotate"):S:0;A.add(function ls(e){var a=e.icon||"roundRect",t=(0,Vt.th)(a,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill,e.symbolKeepAspect);return t.setStyle(e.itemStyle),t.rotation=(e.iconRotate||0)*Math.PI/180,t.setOrigin([e.itemWidth/2,e.itemHeight/2]),a.indexOf("empty")>-1&&(t.style.stroke=t.style.fill,t.style.fill="#fff",t.style.lineWidth=2),t}({itemWidth:d,itemHeight:g,icon:p,iconRotate:D,itemStyle:x.itemStyle,lineStyle:x.lineStyle,symbolKeepAspect:T}))}else A.add(t.getLegendIcon({itemWidth:d,itemHeight:g,icon:p,iconRotate:S,itemStyle:x.itemStyle,lineStyle:x.lineStyle,symbolKeepAspect:T}));var M="left"===l?d+5:-5,P=l,O=o.get("formatter"),L=n;m.isString(O)&&O?L=O.replace("{name}",null!=n?n:""):m.isFunction(O)&&(L=O(n));var I=y?C.getTextColor():i.get("inactiveColor");A.add(new St.ZP({style:(0,dt.Lr)(C,{text:L,x:M,y:g/2,fill:I,align:P,verticalAlign:"middle"},{inheritColor:I})}));var w=new se.Z({shape:A.getBoundingRect(),invisible:!0}),k=i.getModel("tooltip");return k.get("show")&&bt.setTooltipConfig({el:w,componentModel:o,itemName:n,itemTooltipOption:k.option}),A.add(w),A.eachChild(function(J){J.silent=!0}),w.silent=!f,this.getContentGroup().add(A),(0,W.vF)(A),A.__legendDataIndex=r,A},a.prototype.layoutInner=function(t,n,r,i,o,l){var u=this.getContentGroup(),c=this.getSelectorGroup();ot.BZ(t.get("orient"),u,t.get("itemGap"),r.width,r.height);var p=u.getBoundingRect(),f=[-p.x,-p.y];if(c.markRedraw(),u.markRedraw(),o){ot.BZ("horizontal",c,t.get("selectorItemGap",!0));var h=c.getBoundingRect(),v=[-h.x,-h.y],d=t.get("selectorButtonGap",!0),g=t.getOrient().index,y=0===g?"width":"height",S=0===g?"height":"width",T=0===g?"y":"x";"end"===l?v[g]+=p[y]+d:f[g]+=h[y]+d,v[1-g]+=p[S]/2-h[S]/2,c.x=v[0],c.y=v[1],u.x=f[0],u.y=f[1];var b={x:0,y:0};return b[y]=p[y]+d+h[y],b[S]=Math.max(p[S],h[S]),b[T]=Math.min(0,h[T]+v[1-g]),b}return u.x=f[0],u.y=f[1],this.group.getBoundingRect()},a.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},a.type="legend.plain",a}(le.Z);function us(e){var a=e.findComponents({mainType:"legend"});a&&a.length&&e.filterSeries(function(t){for(var n=0;n<a.length;n++)if(!a[n].isSelected(t.name))return!1;return!0})}function ue(e,a,t){var i,n={},r="toggleSelected"===e;return t.eachComponent("legend",function(o){r&&null!=i?o[i?"select":"unSelect"](a.name):"allSelect"===e||"inverseSelect"===e?o[e]():(o[e](a.name),i=o.isSelected(a.name));var l=o.getData();(0,m.each)(l,function(u){var c=u.get("name");if("\n"!==c&&""!==c){var p=o.isSelected(c);n[c]=n.hasOwnProperty(c)?n[c]&&p:p}})}),"allSelect"===e||"inverseSelect"===e?{selected:n}:{name:a.name,selected:n}}function Cn(e){e.registerComponentModel(ta),e.registerComponentView(xn),e.registerProcessor(e.PRIORITY.PROCESSOR.SERIES_FILTER,us),e.registerSubTypeDefaulter("legend",function(){return"plain"}),function cs(e){e.registerAction("legendToggleSelect","legendselectchanged",(0,m.curry)(ue,"toggleSelected")),e.registerAction("legendAllSelect","legendselectall",(0,m.curry)(ue,"allSelect")),e.registerAction("legendInverseSelect","legendinverseselect",(0,m.curry)(ue,"inverseSelect")),e.registerAction("legendSelect","legendselected",(0,m.curry)(ue,"select")),e.registerAction("legendUnSelect","legendunselected",(0,m.curry)(ue,"unSelect"))}(e)}var _n=_(7692);function An(e,a,t){var r=[1,1];r[e.getOrient().index]=0,(0,ot.dt)(a,t,{type:"box",ignoreSize:!!r})}const fs=function(e){function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=a.type,t}return(0,R.ZT)(a,e),a.prototype.setScrollDataIndex=function(t){this.option.scrollDataIndex=t},a.prototype.init=function(t,n,r){var i=(0,ot.tE)(t);e.prototype.init.call(this,t,n,r),An(this,t,i)},a.prototype.mergeOption=function(t,n){e.prototype.mergeOption.call(this,t,n),An(this,this.option,t)},a.type="legend.scroll",a.defaultOption=(0,_n.ZL)(ta.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),a}(ta);var Dn=Tt.Z,ra=["width","height"],ia=["x","y"];const hs=function(e){function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=a.type,t.newlineDisabled=!0,t._currentIndex=0,t}return(0,R.ZT)(a,e),a.prototype.init=function(){e.prototype.init.call(this),this.group.add(this._containerGroup=new Dn),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new Dn)},a.prototype.resetInner=function(){e.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},a.prototype.renderInner=function(t,n,r,i,o,l,u){var c=this;e.prototype.renderInner.call(this,t,n,r,i,o,l,u);var p=this._controllerGroup,f=n.get("pageIconSize",!0),h=m.isArray(f)?f:[f,f];d("pagePrev",0);var v=n.getModel("pageTextStyle");function d(g,y){var S=g+"DataIndex",T=bt.createIcon(n.get("pageIcons",!0)[n.getOrient().name][y],{onclick:m.bind(c._pageGo,c,S,n,i)},{x:-h[0]/2,y:-h[1]/2,width:h[0],height:h[1]});T.name=g,p.add(T)}p.add(new St.ZP({name:"pageText",style:{text:"xx/xx",fill:v.getTextColor(),font:v.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),d("pageNext",1)},a.prototype.layoutInner=function(t,n,r,i,o,l){var u=this.getSelectorGroup(),c=t.getOrient().index,p=ra[c],f=ia[c],h=ra[1-c],v=ia[1-c];o&&ot.BZ("horizontal",u,t.get("selectorItemGap",!0));var d=t.get("selectorButtonGap",!0),g=u.getBoundingRect(),y=[-g.x,-g.y],S=m.clone(r);o&&(S[p]=r[p]-g[p]-d);var T=this._layoutContentAndController(t,i,S,c,p,h,v,f);if(o){if("end"===l)y[c]+=T[p]+d;else{var b=g[p]+d;y[c]-=b,T[f]-=b}T[p]+=g[p]+d,y[1-c]+=T[v]+T[h]/2-g[h]/2,T[h]=Math.max(T[h],g[h]),T[v]=Math.min(T[v],g[v]+y[1-c]),u.x=y[0],u.y=y[1],u.markRedraw()}return T},a.prototype._layoutContentAndController=function(t,n,r,i,o,l,u,c){var p=this.getContentGroup(),f=this._containerGroup,h=this._controllerGroup;ot.BZ(t.get("orient"),p,t.get("itemGap"),i?r.width:null,i?null:r.height),ot.BZ("horizontal",h,t.get("pageButtonItemGap",!0));var v=p.getBoundingRect(),d=h.getBoundingRect(),g=this._showController=v[o]>r[o],y=[-v.x,-v.y];n||(y[i]=p[c]);var S=[0,0],T=[-d.x,-d.y],b=m.retrieve2(t.get("pageButtonGap",!0),t.get("itemGap",!0));g&&("end"===t.get("pageButtonPosition",!0)?T[i]+=r[o]-d[o]:S[i]+=d[o]+b),T[1-i]+=v[l]/2-d[l]/2,p.setPosition(y),f.setPosition(S),h.setPosition(T);var A={x:0,y:0};if(A[o]=g?r[o]:v[o],A[l]=Math.max(v[l],d[l]),A[u]=Math.min(0,d[u]+T[1-i]),f.__rectSize=r[o],g){var C={x:0,y:0};C[o]=Math.max(r[o]-d[o]-b,0),C[l]=A[l],f.setClipPath(new se.Z({shape:C})),f.__rectSize=C[o]}else h.eachChild(function(M){M.attr({invisible:!0,silent:!0})});var D=this._getPageInfo(t);return null!=D.pageIndex&&at.D(p,{x:D.contentPosition[0],y:D.contentPosition[1]},g?t:null),this._updatePageInfoView(t,D),A},a.prototype._pageGo=function(t,n,r){var i=this._getPageInfo(n)[t];null!=i&&r.dispatchAction({type:"legendScroll",scrollDataIndex:i,legendId:n.id})},a.prototype._updatePageInfoView=function(t,n){var r=this._controllerGroup;m.each(["pagePrev","pageNext"],function(p){var h=null!=n[p+"DataIndex"],v=r.childOfName(p);v&&(v.setStyle("fill",t.get(h?"pageIconColor":"pageIconInactiveColor",!0)),v.cursor=h?"pointer":"default")});var i=r.childOfName("pageText"),o=t.get("pageFormatter"),l=n.pageIndex,u=null!=l?l+1:0,c=n.pageCount;i&&o&&i.setStyle("text",m.isString(o)?o.replace("{current}",null==u?"":u+"").replace("{total}",null==c?"":c+""):o({current:u,total:c}))},a.prototype._getPageInfo=function(t){var n=t.get("scrollDataIndex",!0),r=this.getContentGroup(),i=this._containerGroup.__rectSize,o=t.getOrient().index,l=ra[o],u=ia[o],c=this._findTargetItemIndex(n),p=r.children(),f=p[c],h=p.length,v=h?1:0,d={contentPosition:[r.x,r.y],pageCount:v,pageIndex:v-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!f)return d;var g=x(f);d.contentPosition[o]=-g.s;for(var y=c+1,S=g,T=g,b=null;y<=h;++y)(!(b=x(p[y]))&&T.e>S.s+i||b&&!A(b,S.s))&&(S=T.i>S.i?T:b)&&(null==d.pageNextDataIndex&&(d.pageNextDataIndex=S.i),++d.pageCount),T=b;for(y=c-1,S=g,T=g,b=null;y>=-1;--y)(!(b=x(p[y]))||!A(T,b.s))&&S.i<T.i&&(T=S,null==d.pagePrevDataIndex&&(d.pagePrevDataIndex=S.i),++d.pageCount,++d.pageIndex),S=b;return d;function x(C){if(C){var D=C.getBoundingRect(),M=D[u]+C[u];return{s:M,e:M+D[l],i:C.__legendDataIndex}}}function A(C,D){return C.e>=D&&C.s<=D+i}},a.prototype._findTargetItemIndex=function(t){return this._showController?(this.getContentGroup().eachChild(function(o,l){var u=o.__legendDataIndex;null==i&&null!=u&&(i=l),u===t&&(n=l)}),null!=n?n:i):0;var n,i},a.type="legend.scroll",a}(xn);function gs(e){(0,ae.D)(Cn),e.registerComponentModel(fs),e.registerComponentView(hs),function ds(e){e.registerAction("legendScroll","legendscroll",function(a,t){var n=a.scrollDataIndex;null!=n&&t.eachComponent({mainType:"legend",subType:"scroll",query:a},function(r){r.setScrollDataIndex(n)})})}(e)}var On=_(8519),Ss=_(5699),Mn=_(5735);function Oe(e){(0,et.Cc)(e,"label",["show"])}var Me=(0,et.Yf)(),Pn=function(e){function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=a.type,t.createdBySelf=!1,t}return(0,R.ZT)(a,e),a.prototype.init=function(t,n,r){this.mergeDefaultAndTheme(t,r),this._mergeOption(t,r,!1,!0)},a.prototype.isAnimationEnabled=function(){if(On.Z.node)return!1;var t=this.__hostSeries;return this.getShallow("animation")&&t&&t.isAnimationEnabled()},a.prototype.mergeOption=function(t,n){this._mergeOption(t,n,!1,!1)},a.prototype._mergeOption=function(t,n,r,i){var o=this.mainType;r||n.eachSeries(function(l){var u=l.get(this.mainType,!0),c=Me(l)[o];u&&u.data?(c?c._mergeOption(u,n,!0):(i&&Oe(u),m.each(u.data,function(p){p instanceof Array?(Oe(p[0]),Oe(p[1])):Oe(p)}),c=this.createMarkerModelFromSeries(u,this,n),m.extend(c,{mainType:this.mainType,seriesIndex:l.seriesIndex,name:l.name,createdBySelf:!0}),c.__hostSeries=l),Me(l)[o]=c):Me(l)[o]=null},this)},a.prototype.formatTooltip=function(t,n,r){var i=this.getData(),o=this.getRawValue(t),l=i.getName(t);return(0,Mn.TX)("section",{header:this.name,blocks:[(0,Mn.TX)("nameValue",{name:l,value:o,noName:!l,noValue:null==o})]})},a.prototype.getData=function(){return this._data},a.prototype.setData=function(t){this._data=t},a.getMarkerModelFromSeries=function(t,n){return Me(t)[n]},a.type="marker",a.dependencies=["series","grid","polar","geo"],a}(oe.Z);m.mixin(Pn,Ss.X.prototype);const Pe=Pn,bs=function(e){function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=a.type,t}return(0,R.ZT)(a,e),a.prototype.createMarkerModelFromSeries=function(t,n,r){return new a(t,n,r)},a.type="markPoint",a.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},a}(Pe);var In=_(8186);function Ie(e,a,t,n,r,i){var o=[],u=(0,re.M)(a,n)?a.getCalculationInfo("stackResultDimension"):n,c=wn(a,u,e),p=a.indicesOfNearest(u,c)[0];o[r]=a.get(t,p),o[i]=a.get(u,p);var f=a.get(n,p),h=Y.p8(a.get(n,p));return(h=Math.min(h,20))>=0&&(o[i]=+o[i].toFixed(h)),[o,f]}var sa={min:(0,m.curry)(Ie,"min"),max:(0,m.curry)(Ie,"max"),average:(0,m.curry)(Ie,"average"),median:(0,m.curry)(Ie,"median")};function Cs(e,a){if(a){var t=e.getData(),n=e.coordinateSystem,r=n&&n.dimensions;if(!function xs(e){return!isNaN(parseFloat(e.x))&&!isNaN(parseFloat(e.y))}(a)&&!(0,m.isArray)(a.coord)&&(0,m.isArray)(r)){var i=function _s(e,a,t,n){var r={};return null!=e.valueIndex||null!=e.valueDim?(r.valueDataDim=null!=e.valueIndex?a.getDimension(e.valueIndex):e.valueDim,r.valueAxis=t.getAxis(function As(e,a){var t=e.getData().getDimensionInfo(a);return t&&t.coordDim}(n,r.valueDataDim)),r.baseAxis=t.getOtherAxis(r.valueAxis),r.baseDataDim=a.mapDimension(r.baseAxis.dim)):(r.baseAxis=n.getBaseAxis(),r.valueAxis=t.getOtherAxis(r.baseAxis),r.baseDataDim=a.mapDimension(r.baseAxis.dim),r.valueDataDim=a.mapDimension(r.valueAxis.dim)),r}(a,t,n,e);if((a=(0,m.clone)(a)).type&&sa[a.type]&&i.baseAxis&&i.valueAxis){var o=(0,m.indexOf)(r,i.baseAxis.dim),l=(0,m.indexOf)(r,i.valueAxis.dim),u=sa[a.type](t,i.baseDataDim,i.valueDataDim,o,l);a.coord=u[0],a.value=u[1]}else a.coord=[null!=a.xAxis?a.xAxis:a.radiusAxis,null!=a.yAxis?a.yAxis:a.angleAxis]}if(null!=a.coord&&(0,m.isArray)(r))for(var c=a.coord,p=0;p<2;p++)sa[c[p]]&&(c[p]=wn(t,t.mapDimension(r[p]),c[p]));else a.coord=[];return a}}function Ds(e,a){return!(e&&e.containData&&a.coord&&!function oa(e){return!(isNaN(parseFloat(e.x))&&isNaN(parseFloat(e.y)))}(a))||e.containData(a.coord)}function wn(e,a,t){if("average"===t){var n=0,r=0;return e.each(a,function(i,o){isNaN(i)||(n+=i,r++)}),n/r}return"median"===t?e.getMedian(a):e.getDataExtent(a)["max"===t?1:0]}var la=(0,et.Yf)();const Ps=function(e){function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=a.type,t}return(0,R.ZT)(a,e),a.prototype.init=function(){this.markerGroupMap=(0,m.createHashMap)()},a.prototype.render=function(t,n,r){var i=this,o=this.markerGroupMap;o.each(function(l){la(l).keep=!1}),n.eachSeries(function(l){var u=Pe.getMarkerModelFromSeries(l,i.type);u&&i.renderSeries(l,u,n,r)}),o.each(function(l){!la(l).keep&&i.group.remove(l.group)})},a.prototype.markKeep=function(t){la(t).keep=!0},a.prototype.toggleBlurSeries=function(t,n){var r=this;(0,m.each)(t,function(i){var o=Pe.getMarkerModelFromSeries(i,r.type);o&&o.getData().eachItemGraphicEl(function(u){u&&(n?(0,W.SX)(u):(0,W.VP)(u))})})},a.type="marker",a}(le.Z);var Is=_(7248);function Zn(e,a,t){var n=a.coordinateSystem;e.each(function(r){var o,i=e.getItemModel(r),l=Y.GM(i.get("x"),t.getWidth()),u=Y.GM(i.get("y"),t.getHeight());if(isNaN(l)||isNaN(u)){if(a.getMarkerPosition)o=a.getMarkerPosition(e.getValues(e.dimensions,r));else if(n){var c=e.get(n.dimensions[0],r),p=e.get(n.dimensions[1],r);o=n.dataToPoint([c,p])}}else o=[l,u];isNaN(l)||(o[0]=l),isNaN(u)||(o[1]=u),e.setItemLayout(r,o)})}const Ls=function(e){function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=a.type,t}return(0,R.ZT)(a,e),a.prototype.updateTransform=function(t,n,r){n.eachSeries(function(i){var o=Pe.getMarkerModelFromSeries(i,"markPoint");o&&(Zn(o.getData(),i,r),this.markerGroupMap.get(i.id).updateLayout())},this)},a.prototype.renderSeries=function(t,n,r,i){var o=t.coordinateSystem,l=t.id,u=t.getData(),c=this.markerGroupMap,p=c.get(l)||c.set(l,new on),f=function Zs(e,a,t){var n;n=e?(0,m.map)(e&&e.dimensions,function(l){var u=a.getData().getDimensionInfo(a.getData().mapDimension(l))||{};return(0,m.extend)((0,m.extend)({},u),{name:l,ordinalMeta:null})}):[{name:"value",type:"float"}];var r=new en.Z(n,t),i=(0,m.map)(t.get("data"),(0,m.curry)(Cs,a));e&&(i=(0,m.filter)(i,(0,m.curry)(Ds,e)));var o=function Os(e,a){return e?function(t,n,r,i){return(0,In.yQ)(i<2?t.coord&&t.coord[i]:t.value,a[i])}:function(t,n,r,i){return(0,In.yQ)(t.value,a[i])}}(!!e,n);return r.initData(i,null,o),r}(o,t,n);n.setData(f),Zn(n.getData(),t,i),f.each(function(h){var v=f.getItemModel(h),d=v.getShallow("symbol"),g=v.getShallow("symbolSize"),y=v.getShallow("symbolRotate"),S=v.getShallow("symbolOffset"),T=v.getShallow("symbolKeepAspect");if((0,m.isFunction)(d)||(0,m.isFunction)(g)||(0,m.isFunction)(y)||(0,m.isFunction)(S)){var b=n.getRawValue(h),x=n.getDataParams(h);(0,m.isFunction)(d)&&(d=d(b,x)),(0,m.isFunction)(g)&&(g=g(b,x)),(0,m.isFunction)(y)&&(y=y(b,x)),(0,m.isFunction)(S)&&(S=S(b,x))}var A=v.getModel("itemStyle").getItemStyle(),C=(0,Is.UL)(u,"color");A.fill||(A.fill=C),f.setItemVisual(h,{symbol:d,symbolSize:g,symbolRotate:y,symbolOffset:S,symbolKeepAspect:T,style:A})}),p.updateData(f),this.group.add(p.group),f.eachItemGraphicEl(function(h){h.traverse(function(v){(0,ne.A)(v).dataModel=n})}),this.markKeep(p),p.group.silent=n.get("silent")||t.get("silent")},a.type="markPoint",a}(Ps);var Us=_(5230),ks=_(2956),ua=_(528),zs=function(e){function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="dataset",t}return(0,R.ZT)(a,e),a.prototype.init=function(t,n,r){e.prototype.init.call(this,t,n,r),this._sourceManager=new ua.U(this),(0,ua.t)(this)},a.prototype.mergeOption=function(t,n){e.prototype.mergeOption.call(this,t,n),(0,ua.t)(this)},a.prototype.optionUpdated=function(){this._sourceManager.dirty()},a.prototype.getSourceManager=function(){return this._sourceManager},a.type="dataset",a.defaultOption={seriesLayoutBy:ks.fY},a}(oe.Z),Rs=function(e){function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="dataset",t}return(0,R.ZT)(a,e),a.type="dataset",a}(le.Z),Ln=["x","y","radius","angle","single"],Bs=["cartesian2d","polar","singleAxis"];function Lt(e){return e+"Axis"}var ca=function(){function e(){this.indexList=[],this.indexMap=[]}return e.prototype.add=function(a){this.indexMap[a]||(this.indexList.push(a),this.indexMap[a]=!0)},e}();function Nn(e){var a={};return(0,m.each)(["start","end","startValue","endValue","throttle"],function(t){e.hasOwnProperty(t)&&(a[t]=e[t])}),a}const Hs=function(e){function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=a.type,t}return(0,R.ZT)(a,e),a.type="dataZoom.select",a}(function(e){function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=a.type,t._autoThrottle=!0,t._noTarget=!0,t._rangePropMode=["percent","percent"],t}return(0,R.ZT)(a,e),a.prototype.init=function(t,n,r){var i=Nn(t);this.settledOption=i,this.mergeDefaultAndTheme(t,r),this._doInit(i)},a.prototype.mergeOption=function(t){var n=Nn(t);(0,m.merge)(this.option,t,!0),(0,m.merge)(this.settledOption,n,!0),this._doInit(n)},a.prototype._doInit=function(t){var n=this.option;this._setDefaultThrottle(t),this._updateRangeUse(t);var r=this.settledOption;(0,m.each)([["start","startValue"],["end","endValue"]],function(i,o){"value"===this._rangePropMode[o]&&(n[i[0]]=r[i[0]]=null)},this),this._resetTarget()},a.prototype._resetTarget=function(){var t=this.get("orient",!0),n=this._targetAxisInfoMap=(0,m.createHashMap)();this._fillSpecifiedTargetAxis(n)?this._orient=t||this._makeAutoOrientByTargetAxis():(this._orient=t||"horizontal",this._fillAutoTargetAxisByOrient(n,this._orient)),this._noTarget=!0,n.each(function(i){i.indexList.length&&(this._noTarget=!1)},this)},a.prototype._fillSpecifiedTargetAxis=function(t){var n=!1;return(0,m.each)(Ln,function(r){var i=this.getReferringComponents(Lt(r),et.iP);if(i.specified){n=!0;var o=new ca;(0,m.each)(i.models,function(l){o.add(l.componentIndex)}),t.set(r,o)}},this),n},a.prototype._fillAutoTargetAxisByOrient=function(t,n){var r=this.ecModel,i=!0;if(i){var o="vertical"===n?"y":"x";u(r.findComponents({mainType:o+"Axis"}),o)}function u(c,p){var f=c[0];if(f){var h=new ca;if(h.add(f.componentIndex),t.set(p,h),i=!1,"x"===p||"y"===p){var v=f.getReferringComponents("grid",et.C6).models[0];v&&(0,m.each)(c,function(d){f.componentIndex!==d.componentIndex&&v===d.getReferringComponents("grid",et.C6).models[0]&&h.add(d.componentIndex)})}}}i&&u(r.findComponents({mainType:"singleAxis",filter:function(p){return p.get("orient",!0)===n}}),"single"),i&&(0,m.each)(Ln,function(c){if(i){var p=r.findComponents({mainType:Lt(c),filter:function(h){return"category"===h.get("type",!0)}});if(p[0]){var f=new ca;f.add(p[0].componentIndex),t.set(c,f),i=!1}}},this)},a.prototype._makeAutoOrientByTargetAxis=function(){var t;return this.eachTargetAxis(function(n){!t&&(t=n)},this),"y"===t?"vertical":"horizontal"},a.prototype._setDefaultThrottle=function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var n=this.ecModel.option;this.option.throttle=n.animation&&n.animationDurationUpdate>0?100:20}},a.prototype._updateRangeUse=function(t){var n=this._rangePropMode,r=this.get("rangeMode");(0,m.each)([["start","startValue"],["end","endValue"]],function(i,o){var l=null!=t[i[0]],u=null!=t[i[1]];l&&!u?n[o]="percent":!l&&u?n[o]="value":r?n[o]=r[o]:l&&(n[o]="percent")})},a.prototype.noTarget=function(){return this._noTarget},a.prototype.getFirstTargetAxisModel=function(){var t;return this.eachTargetAxis(function(n,r){null==t&&(t=this.ecModel.getComponent(Lt(n),r))},this),t},a.prototype.eachTargetAxis=function(t,n){this._targetAxisInfoMap.each(function(r,i){(0,m.each)(r.indexList,function(o){t.call(n,i,o)})})},a.prototype.getAxisProxy=function(t,n){var r=this.getAxisModel(t,n);if(r)return r.__dzAxisProxy},a.prototype.getAxisModel=function(t,n){var r=this._targetAxisInfoMap.get(t);if(r&&r.indexMap[n])return this.ecModel.getComponent(Lt(t),n)},a.prototype.setRawRange=function(t){var n=this.option,r=this.settledOption;(0,m.each)([["start","startValue"],["end","endValue"]],function(i){(null!=t[i[0]]||null!=t[i[1]])&&(n[i[0]]=r[i[0]]=t[i[0]],n[i[1]]=r[i[1]]=t[i[1]])},this),this._updateRangeUse(t)},a.prototype.setCalculatedRange=function(t){var n=this.option;(0,m.each)(["start","startValue","end","endValue"],function(r){n[r]=t[r]})},a.prototype.getPercentRange=function(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},a.prototype.getValueRange=function(t,n){if(null!=t||null!=n)return this.getAxisProxy(t,n).getDataValueWindow();var r=this.findRepresentativeAxisProxy();return r?r.getDataValueWindow():void 0},a.prototype.findRepresentativeAxisProxy=function(t){if(t)return t.__dzAxisProxy;for(var n,r=this._targetAxisInfoMap.keys(),i=0;i<r.length;i++)for(var o=r[i],l=this._targetAxisInfoMap.get(o),u=0;u<l.indexList.length;u++){var c=this.getAxisProxy(o,l.indexList[u]);if(c.hostedBy(this))return c;n||(n=c)}return n},a.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},a.prototype.getOrient=function(){return this._orient},a.type="dataZoom",a.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],a.defaultOption={z:4,filterMode:"filter",start:0,end:100},a}(oe.Z)),Ws=function(e){function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=a.type,t}return(0,R.ZT)(a,e),a.type="dataZoom.select",a}(function(e){function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=a.type,t}return(0,R.ZT)(a,e),a.prototype.render=function(t,n,r,i){this.dataZoomModel=t,this.ecModel=n,this.api=r},a.type="dataZoom",a}(le.Z));function Un(e,a,t,n,r,i){e=e||0;var o=t[1]-t[0];if(null!=r&&(r=Ht(r,[0,o])),null!=i&&(i=Math.max(i,null!=r?r:0)),"all"===n){var l=Math.abs(a[1]-a[0]);l=Ht(l,[0,o]),r=i=Ht(l,[r,i]),n=0}a[0]=Ht(a[0],t),a[1]=Ht(a[1],t);var u=pa(a,n);a[n]+=e;var f,c=r||0,p=t.slice();return u.sign<0?p[0]+=c:p[1]-=c,a[n]=Ht(a[n],p),f=pa(a,n),null!=r&&(f.sign!==u.sign||f.span<r)&&(a[1-n]=a[n]+u.sign*r),f=pa(a,n),null!=i&&f.span>i&&(a[1-n]=a[n]+f.sign*i),a}function pa(e,a){var t=e[a]-e[1-a];return{span:Math.abs(t),sign:t>0?-1:t<0?1:a?-1:1}}function Ht(e,a){return Math.min(null!=a[1]?a[1]:1/0,Math.max(null!=a[0]?a[0]:-1/0,e))}var js=_(4940),Xs=_(612),Qt=m.each,kn=Y.dt;const qs=function(){function e(a,t,n,r){this._dimName=a,this._axisIndex=t,this.ecModel=r,this._dataZoomModel=n}return e.prototype.hostedBy=function(a){return this._dataZoomModel===a},e.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},e.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},e.prototype.getTargetSeriesModels=function(){var a=[];return this.ecModel.eachSeries(function(t){if(function Fs(e){var a=e.get("coordinateSystem");return(0,m.indexOf)(Bs,a)>=0}(t)){var n=Lt(this._dimName),r=t.getReferringComponents(n,et.C6).models[0];r&&this._axisIndex===r.componentIndex&&a.push(t)}},this),a},e.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},e.prototype.getMinMaxSpan=function(){return m.clone(this._minMaxSpan)},e.prototype.calculateDataWindow=function(a){var c,t=this._dataExtent,r=this.getAxisModel().axis.scale,i=this._dataZoomModel.getRangePropMode(),o=[0,100],l=[],u=[];Qt(["start","end"],function(h,v){var d=a[h],g=a[h+"Value"];"percent"===i[v]?(null==d&&(d=o[v]),g=r.parse(Y.NU(d,o,t))):(c=!0,g=null==g?t[v]:r.parse(g),d=Y.NU(g,t,o)),u[v]=null==g||isNaN(g)?t[v]:g,l[v]=null==d||isNaN(d)?o[v]:d}),kn(u),kn(l);var p=this._minMaxSpan;function f(h,v,d,g,y){var S=y?"Span":"ValueSpan";Un(0,h,d,"all",p["min"+S],p["max"+S]);for(var T=0;T<2;T++)v[T]=Y.NU(h[T],d,g,!0),y&&(v[T]=r.parse(v[T]))}return c?f(u,l,t,o,!1):f(l,u,o,t,!0),{valueWindow:u,percentWindow:l}},e.prototype.reset=function(a){if(a===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=function $s(e,a,t){var n=[1/0,-1/0];Qt(t,function(o){(0,js.AH)(n,o.getData(),a)});var r=e.getAxisModel(),i=(0,Xs.Qw)(r.axis.scale,r,n).calculate();return[i.min,i.max]}(this,this._dimName,t),this._updateMinMaxSpan();var n=this.calculateDataWindow(a.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,this._setAxisModel()}},e.prototype.filterData=function(a,t){if(a===this._dataZoomModel){var n=this._dimName,r=this.getTargetSeriesModels(),i=a.get("filterMode"),o=this._valueWindow;"none"!==i&&Qt(r,function(u){var c=u.getData(),p=c.mapDimensionsAll(n);if(p.length){if("weakFilter"===i){var f=c.getStore(),h=m.map(p,function(v){return c.getDimensionIndex(v)},c);c.filterSelf(function(v){for(var d,g,y,S=0;S<p.length;S++){var T=f.get(h[S],v),b=!isNaN(T),x=T<o[0],A=T>o[1];if(b&&!x&&!A)return!0;b&&(y=!0),x&&(d=!0),A&&(g=!0)}return y&&d&&g})}else Qt(p,function(v){if("empty"===i)u.setData(c=c.map(v,function(g){return function l(u){return u>=o[0]&&u<=o[1]}(g)?g:NaN}));else{var d={};d[v]=o,c.selectRange(d)}});Qt(p,function(v){c.setApproximateExtent(o,v)})}})}},e.prototype._updateMinMaxSpan=function(){var a=this._minMaxSpan={},t=this._dataZoomModel,n=this._dataExtent;Qt(["min","max"],function(r){var i=t.get(r+"Span"),o=t.get(r+"ValueSpan");null!=o&&(o=this.getAxisModel().axis.scale.parse(o)),null!=o?i=Y.NU(n[0]+o,n,[0,100],!0):null!=i&&(o=Y.NU(i,[0,100],n,!0)-n[0]),a[r+"Span"]=i,a[r+"ValueSpan"]=o},this)},e.prototype._setAxisModel=function(){var a=this.getAxisModel(),t=this._percentWindow,n=this._valueWindow;if(t){var r=Y.M9(n,[0,500]);r=Math.min(r,20);var i=a.axis.scale.rawExtentInfo;0!==t[0]&&i.setDeterminedMinMax("min",+n[0].toFixed(r)),100!==t[1]&&i.setDeterminedMinMax("max",+n[1].toFixed(r)),i.freeze()}},e}(),el={getTargetSeries:function(e){function a(r){e.eachComponent("dataZoom",function(i){i.eachTargetAxis(function(o,l){var u=e.getComponent(Lt(o),l);r(o,l,u,i)})})}a(function(r,i,o,l){o.__dzAxisProxy=null});var t=[];a(function(r,i,o,l){o.__dzAxisProxy||(o.__dzAxisProxy=new qs(r,i,l,e),t.push(o.__dzAxisProxy))});var n=(0,m.createHashMap)();return(0,m.each)(t,function(r){(0,m.each)(r.getTargetSeriesModels(),function(i){n.set(i.uid,i)})}),n},overallReset:function(e,a){e.eachComponent("dataZoom",function(t){t.eachTargetAxis(function(n,r){t.getAxisProxy(n,r).reset(t)}),t.eachTargetAxis(function(n,r){t.getAxisProxy(n,r).filterData(t,a)})}),e.eachComponent("dataZoom",function(t){var n=t.findRepresentativeAxisProxy();if(n){var r=n.getDataPercentWindow(),i=n.getDataValueWindow();t.setCalculatedRange({start:r[0],end:r[1],startValue:i[0],endValue:i[1]})}})}};var zn=!1;function nl(e){zn||(zn=!0,e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,el),function al(e){e.registerAction("dataZoom",function(a,t){var n=function Vs(e,a){var i,t=(0,m.createHashMap)(),n=[],r=(0,m.createHashMap)();e.eachComponent({mainType:"dataZoom",query:a},function(p){r.get(p.uid)||l(p)});do{i=!1,e.eachComponent("dataZoom",o)}while(i);function o(p){!r.get(p.uid)&&function u(p){var f=!1;return p.eachTargetAxis(function(h,v){var d=t.get(h);d&&d[v]&&(f=!0)}),f}(p)&&(l(p),i=!0)}function l(p){r.set(p.uid,!0),n.push(p),function c(p){p.eachTargetAxis(function(f,h){(t.get(f)||t.set(f,[]))[h]=!0})}(p)}return n}(t,a);(0,m.each)(n,function(r){r.setRawRange({start:a.start,end:a.end,startValue:a.startValue,endValue:a.endValue})})})}(e),e.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function rl(e){e.registerComponentModel(Hs),e.registerComponentView(Ws),nl(e)}var pt=function e(){},Rn={};function ce(e,a){Rn[e]=a}function En(e){return Rn[e]}const ol=function(e){function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=a.type,t}return(0,R.ZT)(a,e),a.prototype.optionUpdated=function(){e.prototype.optionUpdated.apply(this,arguments);var t=this.ecModel;m.each(this.option.feature,function(n,r){var i=En(r);i&&(i.getDefaultOption&&(i.defaultOption=i.getDefaultOption(t)),m.merge(n,i.defaultOption))})},a.type="toolbox",a.layoutMode={type:"box",ignoreSize:!0},a.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},a}(oe.Z);var Bn=_(4981),Fn=_(8173);const ul=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return(0,R.ZT)(a,e),a.prototype.render=function(t,n,r,i){var o=this.group;if(o.removeAll(),t.get("show")){var l=+t.get("itemSize"),u="vertical"===t.get("orient"),c=t.get("feature")||{},p=this._features||(this._features={}),f=[];m.each(c,function(d,g){f.push(g)}),new Fn.Z(this._featureNames||[],f).add(h).update(h).remove(m.curry(h,null)).execute(),this._featureNames=f,function rs(e,a,t){var n=a.getBoxLayoutParams(),r=a.get("padding"),i={width:t.getWidth(),height:t.getHeight()},o=(0,ot.ME)(n,i,r);(0,ot.BZ)(a.get("orient"),e,a.get("itemGap"),o.width,o.height),(0,ot.p$)(e,n,i,r)}(o,t,r),o.add(Sn(o.getBoundingRect(),t)),u||o.eachChild(function(d){var g=d.__title,y=d.ensureState("emphasis"),S=y.textConfig||(y.textConfig={}),T=d.getTextContent(),b=T&&T.ensureState("emphasis");if(b&&!m.isFunction(b)&&g){var x=b.style||(b.style={}),A=Bn.lP(g,St.ZP.makeFont(x)),C=d.x+o.x,M=!1;d.y+o.y+l+A.height>r.getHeight()&&(S.position="top",M=!0);var P=M?-5-A.height:l+10;C+A.width/2>r.getWidth()?(S.position=["100%",P],x.align="right"):C-A.width/2<0&&(S.position=[0,P],x.align="left")}})}function h(d,g){var x,y=f[d],S=f[g],T=c[y],b=new yn.Z(T,t,t.ecModel);if(i&&null!=i.newTitle&&i.featureName===y&&(T.title=i.newTitle),y&&!S){if(function ll(e){return 0===e.indexOf("my")}(y))x={onclick:b.option.onclick,featureName:y};else{var A=En(y);if(!A)return;x=new A}p[y]=x}else if(!(x=p[S]))return;x.uid=(0,_n.Kr)("toolbox-feature"),x.model=b,x.ecModel=n,x.api=r;var C=x instanceof pt;y||!S?!b.get("show")||C&&x.unusable?C&&x.remove&&x.remove(n,r):(function v(d,g,y){var A,C,S=d.getModel("iconStyle"),T=d.getModel(["emphasis","iconStyle"]),b=g instanceof pt&&g.getIcons?g.getIcons():d.get("icon"),x=d.get("title")||{};m.isString(b)?(A={})[y]=b:A=b,m.isString(x)?(C={})[y]=x:C=x;var D=d.iconPaths={};m.each(A,function(M,P){var O=bt.createIcon(M,{},{x:-l/2,y:-l/2,width:l,height:l});O.setStyle(S.getItemStyle()),O.ensureState("emphasis").style=T.getItemStyle();var I=new St.ZP({style:{text:C[P],align:T.get("textAlign"),borderRadius:T.get("textBorderRadius"),padding:T.get("textPadding"),fill:null},ignore:!0});O.setTextContent(I),bt.setTooltipConfig({el:O,componentModel:t,itemName:P,formatterParamsExtra:{title:C[P]}}),O.__title=C[P],O.on("mouseover",function(){var w=T.getItemStyle(),k=u?null==t.get("right")&&"right"!==t.get("left")?"right":"left":null==t.get("bottom")&&"bottom"!==t.get("top")?"bottom":"top";I.setStyle({fill:T.get("textFill")||w.fill||w.stroke||"#000",backgroundColor:T.get("textBackgroundColor")}),O.setTextConfig({position:T.get("textPosition")||k}),I.ignore=!t.get("showTitle"),r.enterEmphasis(this)}).on("mouseout",function(){"emphasis"!==d.get(["iconStatus",P])&&r.leaveEmphasis(this),I.hide()}),("emphasis"===d.get(["iconStatus",P])?W.fD:W.Mh)(O),o.add(O),O.on("click",m.bind(g.onclick,g,n,r,P)),D[P]=O})}(b,x,y),b.setIconStatus=function(D,M){var P=this.option,O=this.iconPaths;P.iconStatus=P.iconStatus||{},P.iconStatus[D]=M,O[D]&&("emphasis"===M?W.fD:W.Mh)(O[D])},x instanceof pt&&x.render&&x.render(b,n,r,i)):C&&x.dispose&&x.dispose(n,r)}},a.prototype.updateView=function(t,n,r,i){m.each(this._features,function(o){o instanceof pt&&o.updateView&&o.updateView(o.model,n,r,i)})},a.prototype.remove=function(t,n){m.each(this._features,function(r){r instanceof pt&&r.remove&&r.remove(t,n)}),this.group.removeAll()},a.prototype.dispose=function(t,n){m.each(this._features,function(r){r instanceof pt&&r.dispose&&r.dispose(t,n)})},a.type="toolbox",a}(le.Z),pl=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return(0,R.ZT)(a,e),a.prototype.onclick=function(t,n){var r=this.model,i=r.get("name")||t.get("title.0.text")||"echarts",o="svg"===n.getZr().painter.getType(),l=o?"svg":r.get("type",!0)||"png",u=n.getConnectedDataURL({type:l,backgroundColor:r.get("backgroundColor",!0)||t.get("backgroundColor")||"#fff",connectedBackgroundColor:r.get("connectedBackgroundColor"),excludeComponents:r.get("excludeComponents"),pixelRatio:r.get("pixelRatio")}),c=On.Z.browser;if((0,m.isFunction)(MouseEvent)&&(c.newEdge||!c.ie&&!c.edge)){var p=document.createElement("a");p.download=i+"."+l,p.target="_blank",p.href=u;var f=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});p.dispatchEvent(f)}else if(window.navigator.msSaveOrOpenBlob||o){var h=u.split(","),v=h[0].indexOf("base64")>-1,d=o?decodeURIComponent(h[1]):h[1];v&&(d=window.atob(d));var g=i+"."+l;if(window.navigator.msSaveOrOpenBlob){for(var y=d.length,S=new Uint8Array(y);y--;)S[y]=d.charCodeAt(y);var T=new Blob([S]);window.navigator.msSaveOrOpenBlob(T,g)}else{var b=document.createElement("iframe");document.body.appendChild(b);var x=b.contentWindow,A=x.document;A.open("image/svg+xml","replace"),A.write(d),A.close(),x.focus(),A.execCommand("SaveAs",!0,g),document.body.removeChild(b)}}else{var C=r.get("lang"),D='<body style="margin:0;"><img src="'+u+'" style="max-width:100%;" title="'+(C&&C[0]||"")+'" /></body>',M=window.open();M.document.write(D),M.document.title=i}},a.getDefaultOption=function(t){return{show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:t.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:t.getLocaleModel().get(["toolbox","saveAsImage","lang"])}},a}(pt);var we=_(2235),Vn="__ec_magicType_stack__",fl=[["line","bar"],["stack"]],vl=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return(0,R.ZT)(a,e),a.prototype.getIcons=function(){var t=this.model,n=t.get("icon"),r={};return m.each(t.get("type"),function(i){n[i]&&(r[i]=n[i])}),r},a.getDefaultOption=function(t){return{show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:t.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}}},a.prototype.onclick=function(t,n,r){var i=this.model,o=i.get(["seriesIndex",r]);if(Gn[r]){var l={series:[]};m.each(fl,function(f){m.indexOf(f,r)>=0&&m.each(f,function(h){i.setIconStatus(h,"normal")})}),i.setIconStatus(r,"emphasis"),t.eachComponent({mainType:"series",query:null==o?null:{seriesIndex:o}},function(f){var d=Gn[r](f.subType,f.id,f,i);d&&(m.defaults(d,f.option),l.series.push(d));var g=f.coordinateSystem;if(g&&"cartesian2d"===g.type&&("line"===r||"bar"===r)){var y=g.getAxesByScale("ordinal")[0];if(y){var T=y.dim+"Axis",x=f.getReferringComponents(T,et.C6).models[0].componentIndex;l[T]=l[T]||[];for(var A=0;A<=x;A++)l[T][x]=l[T][x]||{};l[T][x].boundaryGap="bar"===r}}});var c,p=r;"stack"===r&&(c=m.merge({stack:i.option.title.tiled,tiled:i.option.title.stack},i.option.title),"emphasis"!==i.get(["iconStatus",r])&&(p="tiled")),n.dispatchAction({type:"changeMagicType",currentType:p,newOption:l,newTitle:c,featureName:"magicType"})}},a}(pt),Gn={line:function(e,a,t,n){if("bar"===e)return m.merge({id:a,type:"line",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},n.get(["option","line"])||{},!0)},bar:function(e,a,t,n){if("line"===e)return m.merge({id:a,type:"bar",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},n.get(["option","bar"])||{},!0)},stack:function(e,a,t,n){var r=t.get("stack")===Vn;if("line"===e||"bar"===e)return n.setIconStatus("stack",r?"normal":"emphasis"),m.merge({id:a,stack:r?"":Vn},n.get(["option","stack"])||{},!0)}};we.zl({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(e,a){a.mergeOption(e.newOption)});const hl=vl;var Jn=_(4491),Ze=new Array(60).join("-");function gl(e){var a=[];return m.each(e,function(t,n){var r=t.categoryAxis,o=t.valueAxis.dim,l=[" "].concat(m.map(t.series,function(v){return v.name})),u=[r.model.getCategories()];m.each(t.series,function(v){var d=v.getRawData();u.push(v.getRawData().mapArray(d.mapDimension(o),function(g){return g}))});for(var c=[l.join("\t")],p=0;p<u[0].length;p++){for(var f=[],h=0;h<u.length;h++)f.push(u[h][p]);c.push(f.join("\t"))}a.push(c.join("\n"))}),a.join("\n\n"+Ze+"\n\n")}function ml(e){return m.map(e,function(a){var t=a.getRawData(),n=[a.name],r=[];return t.each(t.dimensions,function(){for(var i=arguments.length,l=t.getName(arguments[i-1]),u=0;u<i-1;u++)r[u]=arguments[u];n.push((l?l+"\t":"")+r.join("\t"))}),n.join("\n")}).join("\n\n"+Ze+"\n\n")}function Le(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var fa=new RegExp("[\t]+","g");var Cl=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return(0,R.ZT)(a,e),a.prototype.onclick=function(t,n){setTimeout(function(){n.dispatchAction({type:"hideTip"})});var r=n.getDom(),i=this.model;this._dom&&r.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",o.style.backgroundColor=i.get("backgroundColor")||"#fff";var l=document.createElement("h4"),u=i.get("lang")||[];l.innerHTML=u[0]||i.get("title"),l.style.cssText="margin:10px 20px",l.style.color=i.get("textColor");var c=document.createElement("div"),p=document.createElement("textarea");c.style.cssText="overflow:auto";var f=i.get("optionToContent"),h=i.get("contentToOption"),v=function yl(e){var a=function dl(e){var a={},t=[],n=[];return e.eachRawSeries(function(r){var i=r.coordinateSystem;if(!i||"cartesian2d"!==i.type&&"polar"!==i.type)t.push(r);else{var o=i.getBaseAxis();if("category"===o.type){var l=o.dim+"_"+o.index;a[l]||(a[l]={categoryAxis:o,valueAxis:i.getOtherAxis(o),series:[]},n.push({axisDim:o.dim,axisIndex:o.index})),a[l].series.push(r)}else t.push(r)}}),{seriesGroupByCategoryAxis:a,other:t,meta:n}}(e);return{value:m.filter([gl(a.seriesGroupByCategoryAxis),ml(a.other)],function(t){return!!t.replace(/[\n\t\s]/g,"")}).join("\n\n"+Ze+"\n\n"),meta:a.meta}}(t);if(m.isFunction(f)){var d=f(n.getOption());m.isString(d)?c.innerHTML=d:m.isDom(d)&&c.appendChild(d)}else{p.readOnly=i.get("readOnly");var g=p.style;g.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",g.color=i.get("textColor"),g.borderColor=i.get("textareaBorderColor"),g.backgroundColor=i.get("textareaColor"),p.value=v.value,c.appendChild(p)}var y=v.meta,S=document.createElement("div");S.style.cssText="position:absolute;bottom:5px;left:0;right:0";var T="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",b=document.createElement("div"),x=document.createElement("div");T+=";background-color:"+i.get("buttonColor"),T+=";color:"+i.get("buttonTextColor");var A=this;function C(){r.removeChild(o),A._dom=null}(0,Jn.Oo)(b,"click",C),(0,Jn.Oo)(x,"click",function(){if(null==h&&null!=f||null!=h&&null==f)C();else{var D;try{D=m.isFunction(h)?h(c,n.getOption()):function xl(e,a){var t=e.split(new RegExp("\n*"+Ze+"\n*","g")),n={series:[]};return m.each(t,function(r,i){if(function Sl(e){if(e.slice(0,e.indexOf("\n")).indexOf("\t")>=0)return!0}(r)){var o=function Tl(e){for(var a=e.split(/\n+/g),t=Le(a.shift()).split(fa),n=[],r=m.map(t,function(u){return{name:u,data:[]}}),i=0;i<a.length;i++){var o=Le(a[i]).split(fa);n.push(o.shift());for(var l=0;l<o.length;l++)r[l]&&(r[l].data[i]=o[l])}return{series:r,categories:n}}(r),l=a[i],u=l.axisDim+"Axis";l&&(n[u]=n[u]||[],n[u][l.axisIndex]={data:o.categories},n.series=n.series.concat(o.series))}else o=function bl(e){for(var a=e.split(/\n+/g),t=Le(a.shift()),n=[],r=0;r<a.length;r++){var i=Le(a[r]);if(i){var o=i.split(fa),l="",u=void 0,c=!1;isNaN(o[0])?(c=!0,l=o[0],o=o.slice(1),n[r]={name:l,value:[]},u=n[r].value):u=n[r]=[];for(var p=0;p<o.length;p++)u.push(+o[p]);1===u.length&&(c?n[r].value=u[0]:n[r]=u[0])}}return{name:t,data:n}}(r),n.series.push(o)}),n}(p.value,y)}catch(M){throw C(),new Error("Data view format error "+M)}D&&n.dispatchAction({type:"changeDataView",newOption:D}),C()}}),b.innerHTML=u[1],x.innerHTML=u[2],x.style.cssText=b.style.cssText=T,!i.get("readOnly")&&S.appendChild(x),S.appendChild(b),o.appendChild(l),o.appendChild(c),o.appendChild(S),c.style.height=r.clientHeight-80+"px",r.appendChild(o),this._dom=o},a.prototype.remove=function(t,n){this._dom&&n.getDom().removeChild(this._dom)},a.prototype.dispose=function(t,n){this.remove(t,n)},a.getDefaultOption=function(t){return{show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:t.getLocaleModel().get(["toolbox","dataView","title"]),lang:t.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"}},a}(pt);function _l(e,a){return m.map(e,function(t,n){var r=a&&a[n];if(m.isObject(r)&&!m.isArray(r)){m.isObject(t)&&!m.isArray(t)||(t={value:t});var o=null!=r.name&&null==t.name;return t=m.defaults(t,r),o&&delete t.name,t}return t})}we.zl({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(e,a){var t=[];m.each(e.newOption.series,function(n){var r=a.getSeriesByName(n.name)[0];if(r){var i=r.get("data");t.push({name:n.name,data:_l(n.data,i)})}else t.push(m.extend({type:"scatter"},n))}),a.mergeOption(m.defaults({series:t},e.newOption))});const Al=Cl;var Hn=m.each,Qn=(0,et.Yf)();function va(e){var a=Qn(e);return a.snapshots||(a.snapshots=[{}]),a.snapshots}var Il=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return(0,R.ZT)(a,e),a.prototype.onclick=function(t,n){(function Ml(e){Qn(e).snapshots=null})(t),n.dispatchAction({type:"restore",from:this.uid})},a.getDefaultOption=function(t){return{show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:t.getLocaleModel().get(["toolbox","restore","title"])}},a}(pt);we.zl({type:"restore",event:"restore",update:"prepareAndUpdate"},function(e,a){a.resetOption("recreate")});const wl=Il;var Zl=_(7481),Ll=_(9213),Yn="\0_ec_interaction_mutex";function ha(e){return e[Yn]||(e[Yn]={})}we.zl({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},m.noop);var Nt=!0,pe=Math.min,Wt=Math.max,kl=Math.pow,zl=1e4,Rl=6,El=6,Wn="globalPan",Bl={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},Fl={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},jn={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},Vl=0,Gl=function(e){function a(t){var n=e.call(this)||this;return n._track=[],n._covers=[],n._handlers={},n._zr=t,n.group=new Tt.Z,n._uid="brushController_"+Vl++,(0,m.each)(Xl,function(r,i){this._handlers[i]=(0,m.bind)(r,this)},n),n}return(0,R.ZT)(a,e),a.prototype.enableBrush=function(t){return this._brushType&&this._doDisableBrush(),t.brushType&&this._doEnableBrush(t),this},a.prototype._doEnableBrush=function(t){var n=this._zr;this._enableGlobalPan||function Nl(e,a,t){ha(e)[a]=t}(n,Wn,this._uid),(0,m.each)(this._handlers,function(r,i){n.on(i,r)}),this._brushType=t.brushType,this._brushOption=(0,m.merge)((0,m.clone)(jn),t,!0)},a.prototype._doDisableBrush=function(){var t=this._zr;(function Ul(e,a,t){var n=ha(e);n[a]===t&&(n[a]=null)})(t,Wn,this._uid),(0,m.each)(this._handlers,function(n,r){t.off(r,n)}),this._brushType=this._brushOption=null},a.prototype.setPanels=function(t){if(t&&t.length){var n=this._panels={};(0,m.each)(t,function(r){n[r.panelId]=(0,m.clone)(r)})}else this._panels=null;return this},a.prototype.mount=function(t){this._enableGlobalPan=(t=t||{}).enableGlobalPan;var n=this.group;return this._zr.add(n),n.attr({x:t.x||0,y:t.y||0,rotation:t.rotation||0,scaleX:t.scaleX||1,scaleY:t.scaleY||1}),this._transform=n.getLocalTransform(),this},a.prototype.updateCovers=function(t){t=(0,m.map)(t,function(h){return(0,m.merge)((0,m.clone)(jn),h,!0)});var r=this._covers,i=this._covers=[],o=this,l=this._creatingCover;return new Fn.Z(r,t,function c(h,v){return u(h.__brushOption,v)},u).add(p).update(p).remove(function f(h){r[h]!==l&&o.group.remove(r[h])}).execute(),this;function u(h,v){return(null!=h.id?h.id:"\0-brush-index-"+v)+"-"+h.brushType}function p(h,v){var d=t[h];if(null!=v&&r[v]===l)i[h]=r[v];else{var g=i[h]=null!=v?(r[v].__brushOption=d,r[v]):Kn(o,Xn(o,d));da(o,g)}}},a.prototype.unmount=function(){return this.enableBrush(!1),ya(this),this._zr.remove(this.group),this},a.prototype.dispose=function(){this.unmount(),this.off()},a}(Zl.Z);function Xn(e,a){var t=Ne[a.brushType].createCover(e,a);return t.__brushOption=a,qn(t,a),e.group.add(t),t}function Kn(e,a){var t=ga(a);return t.endCreating&&(t.endCreating(e,a),qn(a,a.__brushOption)),a}function $n(e,a){var t=a.__brushOption;ga(a).updateCoverShape(e,a,t.range,t)}function qn(e,a){var t=a.z;null==t&&(t=zl),e.traverse(function(n){n.z=t,n.z2=t})}function da(e,a){ga(a).updateCommon(e,a),$n(e,a)}function ga(e){return Ne[e.__brushOption.brushType]}function ma(e,a,t){var n=e._panels;if(!n)return Nt;var r,i=e._transform;return(0,m.each)(n,function(o){o.isTargetByCursor(a,t,i)&&(r=o)}),r}function tr(e,a){var t=e._panels;if(!t)return Nt;var n=a.__brushOption.panelId;return null!=n?t[n]:Nt}function ya(e){var a=e._covers,t=a.length;return(0,m.each)(a,function(n){e.group.remove(n)},e),a.length=0,!!t}function Ut(e,a){var t=(0,m.map)(e._covers,function(n){var r=n.__brushOption,i=(0,m.clone)(r.range);return{brushType:r.brushType,panelId:r.panelId,range:i}});e.trigger("brush",{areas:t,isEnd:!!a.isEnd,removeOnClick:!!a.removeOnClick})}function er(e){var a=e.length-1;return a<0&&(a=0),[e[0],e[a]]}function ar(e,a,t,n){var r=new Tt.Z;return r.add(new se.Z({name:"main",style:Ta(t),silent:!0,draggable:!0,cursor:"move",drift:(0,m.curry)(ir,e,a,r,["n","s","w","e"]),ondragend:(0,m.curry)(Ut,a,{isEnd:!0})})),(0,m.each)(n,function(i){r.add(new se.Z({name:i.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:(0,m.curry)(ir,e,a,r,i),ondragend:(0,m.curry)(Ut,a,{isEnd:!0})}))}),r}function nr(e,a,t,n){var r=n.brushStyle.lineWidth||0,i=Wt(r,El),o=t[0][0],l=t[1][0],u=o-r/2,c=l-r/2,p=t[0][1],f=t[1][1],h=p-i+r/2,v=f-i+r/2,d=p-o,g=f-l,y=d+r,S=g+r;xt(e,a,"main",o,l,d,g),n.transformable&&(xt(e,a,"w",u,c,i,S),xt(e,a,"e",h,c,i,S),xt(e,a,"n",u,c,y,i),xt(e,a,"s",u,v,y,i),xt(e,a,"nw",u,c,i,i),xt(e,a,"ne",h,c,i,i),xt(e,a,"sw",u,v,i,i),xt(e,a,"se",h,v,i,i))}function Sa(e,a){var t=a.__brushOption,n=t.transformable,r=a.childAt(0);r.useStyle(Ta(t)),r.attr({silent:!n,cursor:n?"move":"default"}),(0,m.each)([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(i){var o=a.childOfName(i.join("")),l=1===i.length?ba(e,i[0]):function Ql(e,a){var t=[ba(e,a[0]),ba(e,a[1])];return("e"===t[0]||"w"===t[0])&&t.reverse(),t.join("")}(e,i);o&&o.attr({silent:!n,invisible:!n,cursor:n?Fl[l]+"-resize":null})})}function xt(e,a,t,n,r,i,o){var l=a.childOfName(t);l&&l.setShape(function Wl(e){var a=pe(e[0][0],e[1][0]),t=pe(e[0][1],e[1][1]);return{x:a,y:t,width:Wt(e[0][0],e[1][0])-a,height:Wt(e[0][1],e[1][1])-t}}(xa(e,a,[[n,r],[n+i,r+o]])))}function Ta(e){return(0,m.defaults)({strokeNoScale:!0},e.brushStyle)}function rr(e,a,t,n){var r=[pe(e,t),pe(a,n)],i=[Wt(e,t),Wt(a,n)];return[[r[0],i[0]],[r[1],i[1]]]}function ba(e,a){var r=bt.transformDirection({w:"left",e:"right",n:"top",s:"bottom"}[a],function Hl(e){return bt.getTransform(e.group)}(e));return{left:"w",right:"e",top:"n",bottom:"s"}[r]}function ir(e,a,t,n,r,i){var o=t.__brushOption,l=e.toRectRange(o.range),u=or(a,r,i);(0,m.each)(n,function(c){var p=Bl[c];l[p[0]][p[1]]+=u[p[0]]}),o.range=e.fromRectRange(rr(l[0][0],l[1][0],l[0][1],l[1][1])),da(a,t),Ut(a,{isEnd:!1})}function Yl(e,a,t,n){var r=a.__brushOption.range,i=or(e,t,n);(0,m.each)(r,function(o){o[0]+=i[0],o[1]+=i[1]}),da(e,a),Ut(e,{isEnd:!1})}function or(e,a,t){var n=e.group,r=n.transformCoordToLocal(a,t),i=n.transformCoordToLocal(0,0);return[r[0]-i[0],r[1]-i[1]]}function xa(e,a,t){var n=tr(e,a);return n&&n!==Nt?n.clipPath(t,e._transform):(0,m.clone)(t)}function Ca(e){var a=e.event;a.preventDefault&&a.preventDefault()}function _a(e,a,t){return e.childOfName("main").contain(a,t)}function sr(e,a,t,n){var l,r=e._creatingCover,i=e._creatingPanel,o=e._brushOption;if(e._track.push(t.slice()),function Jl(e){var a=e._track;if(!a.length)return!1;var t=a[a.length-1],n=a[0],r=t[0]-n[0],i=t[1]-n[1];return kl(r*r+i*i,.5)>Rl}(e)||r){if(i&&!r){"single"===o.brushMode&&ya(e);var u=(0,m.clone)(o);u.brushType=lr(u.brushType,i),u.panelId=i===Nt?null:i.panelId,r=e._creatingCover=Xn(e,u),e._covers.push(r)}if(r){var c=Ne[lr(e._brushType,i)];r.__brushOption.range=c.getCreatingRange(xa(e,r,e._track)),n&&(Kn(e,r),c.updateCommon(e,r)),$n(e,r),l={isEnd:n}}}else n&&"single"===o.brushMode&&o.removeOnClick&&ma(e,a,t)&&ya(e)&&(l={isEnd:n,removeOnClick:!0});return l}function lr(e,a){return"auto"===e?a.defaultBrushType:e}var Xl={mousedown:function(e){if(this._dragging)ur(this,e);else if(!e.target||!e.target.draggable){Ca(e);var a=this.group.transformCoordToLocal(e.offsetX,e.offsetY);this._creatingCover=null,(this._creatingPanel=ma(this,e,a))&&(this._dragging=!0,this._track=[a.slice()])}},mousemove:function(e){var n=this.group.transformCoordToLocal(e.offsetX,e.offsetY);if(function jl(e,a,t){if(e._brushType&&!function Kl(e,a,t){var n=e._zr;return a<0||a>n.getWidth()||t<0||t>n.getHeight()}(e,a.offsetX,a.offsetY)){var n=e._zr,r=e._covers,i=ma(e,a,t);if(!e._dragging)for(var o=0;o<r.length;o++){var l=r[o].__brushOption;if(i&&(i===Nt||l.panelId===i.panelId)&&Ne[l.brushType].contain(r[o],t[0],t[1]))return}i&&n.setCursorStyle("crosshair")}}(this,e,n),this._dragging){Ca(e);var r=sr(this,e,n,!1);r&&Ut(this,r)}},mouseup:function(e){ur(this,e)}};function ur(e,a){if(e._dragging){Ca(a);var r=e.group.transformCoordToLocal(a.offsetX,a.offsetY),i=sr(e,a,r,!0);e._dragging=!1,e._track=[],e._creatingCover=null,i&&Ut(e,i)}}var Ne={lineX:cr(0),lineY:cr(1),rect:{createCover:function(e,a){function t(n){return n}return ar({toRectRange:t,fromRectRange:t},e,a,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(e){var a=er(e);return rr(a[1][0],a[1][1],a[0][0],a[0][1])},updateCoverShape:function(e,a,t,n){nr(e,a,t,n)},updateCommon:Sa,contain:_a},polygon:{createCover:function(e,a){var t=new Tt.Z;return t.add(new Xa.Z({name:"main",style:Ta(a),silent:!0})),t},getCreatingRange:function(e){return e},endCreating:function(e,a){a.remove(a.childAt(0)),a.add(new Ll.Z({name:"main",draggable:!0,drift:(0,m.curry)(Yl,e,a),ondragend:(0,m.curry)(Ut,e,{isEnd:!0})}))},updateCoverShape:function(e,a,t,n){a.childAt(0).setShape({points:xa(e,a,t)})},updateCommon:Sa,contain:_a}};function cr(e){return{createCover:function(a,t){return ar({toRectRange:function(n){var r=[n,[0,100]];return e&&r.reverse(),r},fromRectRange:function(n){return n[e]}},a,t,[[["w"],["e"]],[["n"],["s"]]][e])},getCreatingRange:function(a){var t=er(a);return[pe(t[0][e],t[1][e]),Wt(t[0][e],t[1][e])]},updateCoverShape:function(a,t,n,r){var i,o=tr(a,t);if(o!==Nt&&o.getLinearBrushOtherExtent)i=o.getLinearBrushOtherExtent(e);else{var l=a._zr;i=[0,[l.getWidth(),l.getHeight()][1-e]]}var u=[n,i];e&&u.reverse(),nr(a,t,u,r)},updateCommon:Sa,contain:_a}}const $l=Gl;var ql=_(3066),tu={axisPointer:1,tooltip:1,brush:1};function au(e){return e=Aa(e),function(a){return bt.clipPointsByRect(a,e)}}function nu(e,a){return e=Aa(e),function(t){var n=null!=a?a:t,i=n?e.x:e.y;return[i,i+((n?e.width:e.height)||0)]}}function ru(e,a,t){var n=Aa(e);return function(r,i){return n.contain(i[0],i[1])&&!function eu(e,a,t){var n=a.getComponentByElement(e.topTarget),r=n&&n.coordinateSystem;return n&&n!==t&&!tu.hasOwnProperty(n.mainType)&&r&&r.model!==t}(r,a,t)}}function Aa(e){return ql.Z.create(e)}var iu=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],ou=function(){function e(a,t,n){var r=this;this._targetInfoList=[];var i=pr(t,a);(0,m.each)(su,function(o,l){(!n||!n.include||(0,m.indexOf)(n.include,l)>=0)&&o(i,r._targetInfoList)})}return e.prototype.setOutputRanges=function(a,t){return this.matchOutputRanges(a,t,function(n,r,i){if((n.coordRanges||(n.coordRanges=[])).push(r),!n.coordRange){n.coordRange=r;var o=Oa[n.brushType](0,i,r);n.__rangeOffset={offset:dr[n.brushType](o.values,n.range,[1,1]),xyMinMax:o.xyMinMax}}}),a},e.prototype.matchOutputRanges=function(a,t,n){(0,m.each)(a,function(r){var i=this.findTargetInfo(r,t);i&&!0!==i&&(0,m.each)(i.coordSyses,function(o){var l=Oa[r.brushType](1,o,r.range,!0);n(r,l.values,o,t)})},this)},e.prototype.setInputRanges=function(a,t){(0,m.each)(a,function(n){var r=this.findTargetInfo(n,t);if(n.range=n.range||[],r&&!0!==r){n.panelId=r.panelId;var i=Oa[n.brushType](0,r.coordSys,n.coordRange),o=n.__rangeOffset;n.range=o?dr[n.brushType](i.values,o.offset,function lu(e,a){var t=mr(e),n=mr(a),r=[t[0]/n[0],t[1]/n[1]];return isNaN(r[0])&&(r[0]=1),isNaN(r[1])&&(r[1]=1),r}(i.xyMinMax,o.xyMinMax)):i.values}},this)},e.prototype.makePanelOpts=function(a,t){return(0,m.map)(this._targetInfoList,function(n){var r=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:t?t(n):null,clipPath:au(r),isTargetByCursor:ru(r,a,n.coordSysModel),getLinearBrushOtherExtent:nu(r)}})},e.prototype.controlSeries=function(a,t,n){var r=this.findTargetInfo(a,n);return!0===r||r&&(0,m.indexOf)(r.coordSyses,t.coordinateSystem)>=0},e.prototype.findTargetInfo=function(a,t){for(var n=this._targetInfoList,r=pr(t,a),i=0;i<n.length;i++){var o=n[i],l=a.panelId;if(l){if(o.panelId===l)return o}else for(var u=0;u<fr.length;u++)if(fr[u](r,o))return o}return!0},e}();function Da(e){return e[0]>e[1]&&e.reverse(),e}function pr(e,a){return(0,et.pm)(e,a,{includeMainTypes:iu})}var su={grid:function(e,a){var t=e.xAxisModels,n=e.yAxisModels,r=e.gridModels,i=(0,m.createHashMap)(),o={},l={};!t&&!n&&!r||((0,m.each)(t,function(u){var c=u.axis.grid.model;i.set(c.id,c),o[c.id]=!0}),(0,m.each)(n,function(u){var c=u.axis.grid.model;i.set(c.id,c),l[c.id]=!0}),(0,m.each)(r,function(u){i.set(u.id,u),o[u.id]=!0,l[u.id]=!0}),i.each(function(u){var p=[];(0,m.each)(u.coordinateSystem.getCartesians(),function(f,h){((0,m.indexOf)(t,f.getAxis("x").model)>=0||(0,m.indexOf)(n,f.getAxis("y").model)>=0)&&p.push(f)}),a.push({panelId:"grid--"+u.id,gridModel:u,coordSysModel:u,coordSys:p[0],coordSyses:p,getPanelRect:vr.grid,xAxisDeclared:o[u.id],yAxisDeclared:l[u.id]})}))},geo:function(e,a){(0,m.each)(e.geoModels,function(t){var n=t.coordinateSystem;a.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:n,coordSyses:[n],getPanelRect:vr.geo})})}},fr=[function(e,a){var t=e.xAxisModel,n=e.yAxisModel,r=e.gridModel;return!r&&t&&(r=t.axis.grid.model),!r&&n&&(r=n.axis.grid.model),r&&r===a.gridModel},function(e,a){var t=e.geoModel;return t&&t===a.geoModel}],vr={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var e=this.coordSys,a=e.getBoundingRect().clone();return a.applyTransform(bt.getTransform(e)),a}},Oa={lineX:(0,m.curry)(hr,0),lineY:(0,m.curry)(hr,1),rect:function(e,a,t,n){var r=e?a.pointToData([t[0][0],t[1][0]],n):a.dataToPoint([t[0][0],t[1][0]],n),i=e?a.pointToData([t[0][1],t[1][1]],n):a.dataToPoint([t[0][1],t[1][1]],n),o=[Da([r[0],i[0]]),Da([r[1],i[1]])];return{values:o,xyMinMax:o}},polygon:function(e,a,t,n){var r=[[1/0,-1/0],[1/0,-1/0]];return{values:(0,m.map)(t,function(o){var l=e?a.pointToData(o,n):a.dataToPoint(o,n);return r[0][0]=Math.min(r[0][0],l[0]),r[1][0]=Math.min(r[1][0],l[1]),r[0][1]=Math.max(r[0][1],l[0]),r[1][1]=Math.max(r[1][1],l[1]),l}),xyMinMax:r}}};function hr(e,a,t,n){var r=t.getAxis(["x","y"][e]),i=Da((0,m.map)([0,1],function(l){return a?r.coordToData(r.toLocalCoord(n[l]),!0):r.toGlobalCoord(r.dataToCoord(n[l]))})),o=[];return o[e]=i,o[1-e]=[NaN,NaN],{values:i,xyMinMax:o}}var dr={lineX:(0,m.curry)(gr,0),lineY:(0,m.curry)(gr,1),rect:function(e,a,t){return[[e[0][0]-t[0]*a[0][0],e[0][1]-t[0]*a[0][1]],[e[1][0]-t[1]*a[1][0],e[1][1]-t[1]*a[1][1]]]},polygon:function(e,a,t){return(0,m.map)(e,function(n,r){return[n[0]-t[0]*a[r][0],n[1]-t[1]*a[r][1]]})}};function gr(e,a,t,n){return[a[0]-n[e]*t[0],a[1]-n[e]*t[1]]}function mr(e){return e?[e[0][1]-e[0][0],e[1][1]-e[1][0]]:[NaN,NaN]}const yr=ou;var uu=_(6374),Ma=m.each,cu=(0,et.g0)("toolbox-dataZoom_"),pu=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return(0,R.ZT)(a,e),a.prototype.render=function(t,n,r,i){this._brushController||(this._brushController=new $l(r.getZr()),this._brushController.on("brush",m.bind(this._onBrush,this)).mount()),function hu(e,a,t,n,r){var i=t._isZoomActive;n&&"takeGlobalCursor"===n.type&&(i="dataZoomSelect"===n.key&&n.dataZoomSelectActive),t._isZoomActive=i,e.setIconStatus("zoom",i?"emphasis":"normal");var l=new yr(Pa(e),a,{include:["grid"]}).makePanelOpts(r,function(u){return u.xAxisDeclared&&!u.yAxisDeclared?"lineX":!u.xAxisDeclared&&u.yAxisDeclared?"lineY":"rect"});t._brushController.setPanels(l).enableBrush(!(!i||!l.length)&&{brushType:"auto",brushStyle:e.getModel("brushStyle").getItemStyle()})}(t,n,this,i,r),function vu(e,a){e.setIconStatus("back",function Pl(e){return va(e).length}(a)>1?"emphasis":"normal")}(t,n)},a.prototype.onclick=function(t,n,r){fu[r].call(this)},a.prototype.remove=function(t,n){this._brushController&&this._brushController.unmount()},a.prototype.dispose=function(t,n){this._brushController&&this._brushController.dispose()},a.prototype._onBrush=function(t){var n=t.areas;if(t.isEnd&&n.length){var r={},i=this.ecModel;this._brushController.updateCovers([]),new yr(Pa(this.model),i,{include:["grid"]}).matchOutputRanges(n,i,function(c,p,f){if("cartesian2d"===f.type){var h=c.brushType;"rect"===h?(l("x",f,p[0]),l("y",f,p[1])):l({lineX:"x",lineY:"y"}[h],f,p)}}),function Dl(e,a){var t=va(e);Hn(a,function(n,r){for(var i=t.length-1;i>=0&&!t[i][r];i--);if(i<0){var l=e.queryComponents({mainType:"dataZoom",subType:"select",id:r})[0];if(l){var u=l.getPercentRange();t[0][r]={dataZoomId:r,start:u[0],end:u[1]}}}}),t.push(a)}(i,r),this._dispatchZoomAction(r)}function l(c,p,f){var h=p.getAxis(c),v=h.model,d=function u(c,p,f){var h;return f.eachComponent({mainType:"dataZoom",subType:"select"},function(v){v.getAxisModel(c,p.componentIndex)&&(h=v)}),h}(c,v,i),g=d.findRepresentativeAxisProxy(v).getMinMaxSpan();(null!=g.minValueSpan||null!=g.maxValueSpan)&&(f=Un(0,f.slice(),h.scale.getExtent(),0,g.minValueSpan,g.maxValueSpan)),d&&(r[d.id]={dataZoomId:d.id,startValue:f[0],endValue:f[1]})}},a.prototype._dispatchZoomAction=function(t){var n=[];Ma(t,function(r,i){n.push(m.clone(r))}),n.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:n})},a.getDefaultOption=function(t){return{show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:t.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}}},a}(pt),fu={zoom:function(){this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!this._isZoomActive})},back:function(){this._dispatchZoomAction(function Ol(e){var a=va(e),t=a[a.length-1];a.length>1&&a.pop();var n={};return Hn(t,function(r,i){for(var o=a.length-1;o>=0;o--)if(r=a[o][i]){n[i]=r;break}}),n}(this.ecModel))}};function Pa(e){var a={xAxisIndex:e.get("xAxisIndex",!0),yAxisIndex:e.get("yAxisIndex",!0),xAxisId:e.get("xAxisId",!0),yAxisId:e.get("yAxisId",!0)};return null==a.xAxisIndex&&null==a.xAxisId&&(a.xAxisIndex="all"),null==a.yAxisIndex&&null==a.yAxisId&&(a.yAxisIndex="all"),a}(0,uu.f)("dataZoom",function(e){var a=e.getComponent("toolbox",0),t=["feature","dataZoom"];if(a&&null!=a.get(t)){var n=a.getModel(t),r=[],i=Pa(n),o=(0,et.pm)(e,i);return Ma(o.xAxisModels,function(u){return l(u,"xAxis","xAxisIndex")}),Ma(o.yAxisModels,function(u){return l(u,"yAxis","yAxisIndex")}),r}function l(u,c,p){var f=u.componentIndex,h={type:"select",$fromToolbox:!0,filterMode:n.get("filterMode",!0)||"filter",id:cu+c+f};h[p]=f,r.push(h)}});const du=pu;var U=_(2315),mu=_(6094),Ia=Math.sin,wa=Math.cos,Sr=Math.PI,kt=2*Math.PI,yu=180/Sr;const Tr=function(){function e(){}return e.prototype.reset=function(a){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,a||4)},e.prototype.moveTo=function(a,t){this._add("M",a,t)},e.prototype.lineTo=function(a,t){this._add("L",a,t)},e.prototype.bezierCurveTo=function(a,t,n,r,i,o){this._add("C",a,t,n,r,i,o)},e.prototype.quadraticCurveTo=function(a,t,n,r){this._add("Q",a,t,n,r)},e.prototype.arc=function(a,t,n,r,i,o){this.ellipse(a,t,n,n,0,r,i,o)},e.prototype.ellipse=function(a,t,n,r,i,o,l,u){var d,c=l-o,p=!u,f=Math.abs(c),h=(0,U.zT)(f-kt)||(p?c>=kt:-c>=kt),v=c>0?c%kt:c%kt+kt;d=!!h||!(0,U.zT)(f)&&v>=Sr==!!p;var g=a+n*wa(o),y=t+r*Ia(o);this._start&&this._add("M",g,y);var S=Math.round(i*yu);if(h){var T=1/this._p,b=(p?1:-1)*(kt-T);this._add("A",n,r,S,1,+p,a+n*wa(o+b),t+r*Ia(o+b)),T>.01&&this._add("A",n,r,S,0,+p,g,y)}else{var x=a+n*wa(l),A=t+r*Ia(l);this._add("A",n,r,S,+d,+p,x,A)}},e.prototype.rect=function(a,t,n,r){this._add("M",a,t),this._add("l",n,0),this._add("l",0,r),this._add("l",-n,0),this._add("Z")},e.prototype.closePath=function(){this._d.length>0&&this._add("Z")},e.prototype._add=function(a,t,n,r,i,o,l,u,c){for(var p=[],f=this._p,h=1;h<arguments.length;h++){var v=arguments[h];if(isNaN(v))return void(this._invalid=!0);p.push(Math.round(v*f)/f)}this._d.push(a+p.join(" ")),this._start="Z"===a},e.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},e.prototype.getStr=function(){return this._str},e}();var Tu=_(720),fe="none",bu=Math.round,Za=["lineCap","miterLimit","lineJoin"],_u=(0,m.map)(Za,function(e){return"stroke-"+e.toLowerCase()});var Du=_(9626),br="http://www.w3.org/2000/svg",xr="http://www.w3.org/1999/xlink",Ou="http://www.w3.org/2000/xmlns/",Mu="http://www.w3.org/XML/1998/namespace";function Cr(e){return document.createElementNS(br,e)}function $(e,a,t,n,r){return{tag:e,attrs:t||{},children:n,text:r,key:a}}function La(e,a){var t=(a=a||{}).newline?"\n":"";return function n(r){var i=r.children,o=r.tag,u=r.text;return function Pu(e,a){var t=[];if(a)for(var n in a){var r=a[n],i=n;!1!==r&&(!0!==r&&null!=r&&(i+='="'+r+'"'),t.push(i))}return"<"+e+" "+t.join(" ")+">"}(o,r.attrs)+("style"!==o?(0,Du.F1)(u):u||"")+(i?""+t+(0,m.map)(i,function(c){return n(c)}).join(t)+t:"")+function Iu(e){return"</"+e+">"}(o)}(e)}function Na(e){return{zrId:e,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssClassIdx:0,cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function _r(e,a,t,n){return $("svg","root",{width:e,height:a,xmlns:br,"xmlns:xlink":xr,version:"1.1",baseProfile:"full",viewBox:!!n&&"0 0 "+e+" "+a},t)}var Zu=_(2823),Lu=_(2353),Nu=_(50),Uu=_(1861),Ar={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},zt="transform-origin";function ku(e,a,t){var n=(0,m.extend)({},e.shape);(0,m.extend)(n,a),e.buildPath(t,n);var r=new Tr;return r.reset((0,U.Gk)(e)),t.rebuildPath(r,1),r.generateStr(),r.getStr()}function zu(e,a){var t=a.originX,n=a.originY;(t||n)&&(e[zt]=t+"px "+n+"px")}var Ru={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function Dr(e,a){var t=a.zrId+"-ani-"+a.cssAnimIdx++;return a.cssAnims[t]=e,t}function Or(e){return(0,m.isString)(e)?Ar[e]?"cubic-bezier("+Ar[e]+")":(0,Uu.H)(e)?e:"":""}function Ue(e,a,t,n){var r=e.animators,i=r.length,o=[];if(e instanceof Nu.Z){var l=function Eu(e,a,t){var i,o,r={};if((0,m.each)(e.shape.paths,function(u){var c=Na(t.zrId);c.animation=!0,Ue(u,{},c,!0);var p=c.cssAnims,f=c.cssNodes,h=(0,m.keys)(p),v=h.length;if(v){var d=p[o=h[v-1]];for(var g in d){var y=d[g];r[g]=r[g]||{d:""},r[g].d+=y.d||""}for(var S in f){var T=f[S].animation;T.indexOf(o)>=0&&(i=T)}}}),i){a.d=!1;var l=Dr(r,t);return i.replace(o,l)}}(e,a,t);if(l)o.push(l);else if(!i)return}else if(!i)return;for(var u={},c=0;c<i;c++){var p=r[c],f=[p.getMaxTime()/1e3+"s"],h=Or(p.getClip().easing),v=p.getDelay();f.push(h||"linear"),v&&f.push(v/1e3+"s"),p.getLoop()&&f.push("infinite");var d=f.join(" ");u[d]=u[d]||[d,[]],u[d][1].push(p)}function g(T){var b=T[1],x=b.length,A={},C={},D={},M="animation-timing-function";function P(ft,Mt,Xt){for(var Et=ft.getTracks(),ze=ft.getMaxTime(),Kt=0;Kt<Et.length;Kt++){var $t=Et[Kt];if($t.needsAnimate()){var Pt=$t.keyframes,vt=$t.propName;if(Xt&&(vt=Xt(vt)),vt)for(var Ct=0;Ct<Pt.length;Ct++){var qt=Pt[Ct],ht=Math.round(qt.time/ze*100)+"%",Re=Or(qt.easing),It=qt.rawValue;((0,m.isString)(It)||(0,m.isNumber)(It))&&(Mt[ht]=Mt[ht]||{},Mt[ht][vt]=qt.rawValue,Re&&(Mt[ht][M]=Re))}}}}for(var O=0;O<x;O++)(I=(L=b[O]).targetName)?"shape"===I&&P(L,C):!n&&P(L,A);for(var w in A){var k={};(0,Lu.kY)(k,e),(0,m.extend)(k,A[w]);var J=(0,U.gA)(k),F=A[w][M];D[w]=J?{transform:J}:{},zu(D[w],k),F&&(D[w][M]=F)}var q,V=!0;for(var w in C){D[w]=D[w]||{};var B=!q;F=C[w][M],B&&(q=new un.Z);var rt=q.len();q.reset(),D[w].d=ku(e,C[w],q);var it=q.len();if(!B&&rt!==it){V=!1;break}F&&(D[w][M]=F)}if(!V)for(var w in D)delete D[w].d;if(!n)for(O=0;O<x;O++){var L,I;"style"===(I=(L=b[O]).targetName)&&P(L,D,function(Et){return Ru[Et]})}var j,H=(0,m.keys)(D),Q=!0;for(O=1;O<H.length;O++){var lt=H[O-1];if(D[lt][zt]!==D[H[O]][zt]){Q=!1;break}j=D[lt][zt]}if(Q&&j){for(var w in D)D[w][zt]&&delete D[w][zt];a[zt]=j}if((0,m.filter)(H,function(ft){return(0,m.keys)(D[ft]).length>0}).length)return Dr(D,t)+" "+T[0]+" both"}for(var y in u)(l=g(u[y]))&&o.push(l);if(o.length){var S=t.zrId+"-cls-"+t.cssClassIdx++;t.cssNodes["."+S]={animation:o.join(",")},a.class=S}}var Mr=_(1240),ve=Math.round;function Pr(e){return e&&(0,m.isString)(e.src)}function Ir(e){return e&&(0,m.isFunction)(e.toDataURL)}function Ua(e,a,t,n){(function Au(e,a,t,n){var r=null==a.opacity?1:a.opacity;if(t instanceof Ye.ZP)e("opacity",r);else{if(function xu(e){var a=e.fill;return null!=a&&a!==fe}(a)){var i=(0,U.ut)(a.fill);e("fill",i.color);var o=null!=a.fillOpacity?a.fillOpacity*i.opacity*r:i.opacity*r;(n||o<1)&&e("fill-opacity",o)}else e("fill",fe);if(function Cu(e){var a=e.stroke;return null!=a&&a!==fe}(a)){var l=(0,U.ut)(a.stroke);e("stroke",l.color);var u=a.strokeNoScale?t.getLineScale():1,c=u?(a.lineWidth||0)/u:0,p=null!=a.strokeOpacity?a.strokeOpacity*l.opacity*r:l.opacity*r,f=a.strokeFirst;if((n||1!==c)&&e("stroke-width",c),(n||f)&&e("paint-order",f?"stroke":"fill"),(n||p<1)&&e("stroke-opacity",p),a.lineDash){var h=(0,Tu.a)(t),v=h[0],d=h[1];v&&(d=bu(d||0),e("stroke-dasharray",v.join(",")),(d||n)&&e("stroke-dashoffset",d))}else n&&e("stroke-dasharray",fe);for(var g=0;g<Za.length;g++){var y=Za[g];if(n||a[y]!==ie.$t[y]){var S=a[y]||ie.$t[y];S&&e(_u[g],S)}}}else n&&e("stroke",fe)}})(function(r,i){var o="fill"===r||"stroke"===r;o&&(0,U.H3)(i)?kr(a,e,r,n):o&&(0,U.R)(i)?zr(t,e,r,n):e[r]=i},a,t,!1),function Qu(e,a,t){var n=e.style;if((0,U.i2)(n)){var r=(0,U.n1)(e),i=t.shadowCache,o=i[r];if(!o){var l=e.getGlobalScale(),u=l[0],c=l[1];if(!u||!c)return;var p=n.shadowOffsetX||0,f=n.shadowOffsetY||0,h=n.shadowBlur,v=(0,U.ut)(n.shadowColor),d=v.opacity,g=v.color,T=h/2/u+" "+h/2/c;o=t.zrId+"-s"+t.shadowIdx++,t.defs[o]=$("filter",o,{id:o,x:"-100%",y:"-100%",width:"300%",height:"300%"},[$("feDropShadow","",{dx:p/u,dy:f/c,stdDeviation:T,"flood-color":g,"flood-opacity":d})]),i[r]=o}a.filter=(0,U.m1)(o)}}(t,e,n)}function wr(e){return(0,U.zT)(e[0]-1)&&(0,U.zT)(e[1])&&(0,U.zT)(e[2])&&(0,U.zT)(e[3]-1)}function ka(e,a,t){if(a&&(!function Bu(e){return(0,U.zT)(e[4])&&(0,U.zT)(e[5])}(a)||!wr(a))){var n=t?10:1e4;e.transform=wr(a)?"translate("+ve(a[4]*n)/n+" "+ve(a[5]*n)/n+")":(0,U.qV)(a)}}function Zr(e,a,t){for(var n=e.points,r=[],i=0;i<n.length;i++)r.push(ve(n[i][0]*t)/t),r.push(ve(n[i][1]*t)/t);a.points=r.join(" ")}function Lr(e){return!e.smooth}var Vu={circle:[function Fu(e){var a=(0,m.map)(e,function(t){return"string"==typeof t?[t,t]:t});return function(t,n,r){for(var i=0;i<a.length;i++){var o=a[i],l=t[o[0]];null!=l&&(n[o[1]]=ve(l*r)/r)}}}(["cx","cy","r"])],polyline:[Zr,Lr],polygon:[Zr,Lr]};function Nr(e,a){var t=e.style,n=e.shape,r=Vu[e.type],i={},o=a.animation,l="path",u=e.style.strokePercent,c=a.compress&&(0,U.Gk)(e)||4;if(!r||a.willUpdate||r[1]&&!r[1](n)||o&&function Gu(e){for(var a=e.animators,t=0;t<a.length;t++)if("shape"===a[t].targetName)return!0;return!1}(e)||u<1){var f=!e.path||e.shapeChanged();e.path||e.createPathProxy();var h=e.path;f&&(h.beginPath(),e.buildPath(h,e.shape),e.pathUpdated());var v=h.getVersion(),d=e,g=d.__svgPathBuilder;(d.__svgPathVersion!==v||!g||u!==d.__svgPathStrokePercent)&&(g||(g=d.__svgPathBuilder=new Tr),g.reset(c),h.rebuildPath(g,u),g.generateStr(),d.__svgPathVersion=v,d.__svgPathStrokePercent=u),i.d=g.getStr()}else{l=e.type;var p=Math.pow(10,c);r[0](n,i,p)}return ka(i,e.transform),Ua(i,t,e,a),a.animation&&Ue(e,i,a),$(l,e.id+"",i)}function Ur(e,a){return e instanceof ie.ZP?Nr(e,a):e instanceof Ye.ZP?function Ju(e,a){var t=e.style,n=t.image;if(n&&!(0,m.isString)(n)&&(Pr(n)?n=n.src:Ir(n)&&(n=n.toDataURL())),n){var r=t.x||0,i=t.y||0,u={href:n,width:t.width,height:t.height};return r&&(u.x=r),i&&(u.y=i),ka(u,e.transform),Ua(u,t,e,a),a.animation&&Ue(e,u,a),$("image",e.id+"",u)}}(e,a):e instanceof mu.Z?function Hu(e,a){var t=e.style,n=t.text;if(null!=n&&(n+=""),n&&!isNaN(t.x)&&!isNaN(t.y)){var r=t.font||Mr.Uo,i=t.x||0,o=(0,U.mU)(t.y||0,(0,Bn.Dp)(r),t.textBaseline),u={"dominant-baseline":"central","text-anchor":U.jY[t.textAlign]||t.textAlign};if((0,St.Y1)(t)){var c="",p=t.fontStyle,f=(0,St.VG)(t.fontSize);if(!parseFloat(f))return;var v=t.fontWeight;c+="font-size:"+f+";font-family:"+(t.fontFamily||Mr.rk)+";",p&&"normal"!==p&&(c+="font-style:"+p+";"),v&&"normal"!==v&&(c+="font-weight:"+v+";"),u.style=c}else u.style="font: "+r;return n.match(/\s/)&&(u["xml:space"]="preserve"),i&&(u.x=i),o&&(u.y=o),ka(u,e.transform),Ua(u,t,e,a),a.animation&&Ue(e,u,a),$("text",e.id+"",u,void 0,n)}}(e,a):void 0}function kr(e,a,t,n){var i,r=e[t],o={gradientUnits:r.global?"userSpaceOnUse":"objectBoundingBox"};if((0,U.I1)(r))i="linearGradient",o.x1=r.x,o.y1=r.y,o.x2=r.x2,o.y2=r.y2;else{if(!(0,U.gO)(r))return;i="radialGradient",o.cx=(0,m.retrieve2)(r.x,.5),o.cy=(0,m.retrieve2)(r.y,.5),o.r=(0,m.retrieve2)(r.r,.5)}for(var l=r.colorStops,u=[],c=0,p=l.length;c<p;++c){var f=100*(0,U.Pn)(l[c].offset)+"%",v=(0,U.ut)(l[c].color),g=v.opacity,y={offset:f};y["stop-color"]=v.color,g<1&&(y["stop-opacity"]=g),u.push($("stop",c+"",y))}var T=La($(i,"",o,u)),b=n.gradientCache,x=b[T];x||(x=n.zrId+"-g"+n.gradientIdx++,b[T]=x,o.id=x,n.defs[x]=$(i,x,o,u)),a[t]=(0,U.m1)(x)}function zr(e,a,t,n){var f,r=e.style[t],i=e.getBoundingRect(),o={},l=r.repeat,u="no-repeat"===l,c="repeat-x"===l,p="repeat-y"===l;if((0,U.Cv)(r)){var h=r.imageWidth,v=r.imageHeight,d=void 0,g=r.image;if((0,m.isString)(g)?d=g:Pr(g)?d=g.src:Ir(g)&&(d=g.toDataURL()),typeof Image>"u"){var y="Image width/height must been given explictly in svg-ssr renderer.";(0,m.assert)(h,y),(0,m.assert)(v,y)}else if(null==h||null==v){var S=function(O,L){if(O){var I=O.elm,w=h||L.width,k=v||L.height;"pattern"===O.tag&&(c?(k=1,w/=i.width):p&&(w=1,k/=i.height)),O.attrs.width=w,O.attrs.height=k,I&&(I.setAttribute("width",w),I.setAttribute("height",k))}},T=(0,Zu.Gq)(d,null,e,function(O){u||S(C,O),S(f,O)});T&&T.width&&T.height&&(h=h||T.width,v=v||T.height)}f=$("image","img",{href:d,width:h,height:v}),o.width=h,o.height=v}else r.svgElement&&(f=(0,m.clone)(r.svgElement),o.width=r.svgWidth,o.height=r.svgHeight);if(f){var b,x;u?b=x=1:c?(x=1,b=o.width/i.width):p?(b=1,x=o.height/i.height):o.patternUnits="userSpaceOnUse",null!=b&&!isNaN(b)&&(o.width=b),null!=x&&!isNaN(x)&&(o.height=x);var A=(0,U.gA)(r);A&&(o.patternTransform=A);var C=$("pattern","",o,[f]),D=La(C),M=n.patternCache,P=M[D];P||(P=n.zrId+"-p"+n.patternIdx++,M[D]=P,o.id=P,C=n.defs[P]=$("pattern",P,o,[f])),a[t]=(0,U.m1)(P)}}function Yu(e,a,t){var n=t.clipPathCache,r=t.defs,i=n[e.id];if(!i){var o={id:i=t.zrId+"-c"+t.clipPathIdx++};n[e.id]=i,r[i]=$("clipPath",i,o,[Nr(e,t)])}a["clip-path"]=(0,U.m1)(i)}function Rr(e){return document.createTextNode(e)}function Rt(e,a,t){e.insertBefore(a,t)}function Er(e,a){e.removeChild(a)}function Br(e,a){e.appendChild(a)}function Fr(e){return e.parentNode}function Vr(e){return e.nextSibling}function za(e,a){e.textContent=a}var Gr=58,Wu=120,ju=$("","");function Ra(e){return void 0===e}function gt(e){return void 0!==e}function Xu(e,a,t){for(var n={},r=a;r<=t;++r){var i=e[r].key;void 0!==i&&(n[i]=r)}return n}function he(e,a){return e.tag===a.tag&&e.key===a.key}function de(e){var a,t=e.children,n=e.tag;if(gt(n)){var r=e.elm=Cr(n);if(Ea(ju,e),(0,m.isArray)(t))for(a=0;a<t.length;++a){var i=t[a];null!=i&&Br(r,de(i))}else gt(e.text)&&!(0,m.isObject)(e.text)&&Br(r,Rr(e.text))}else e.elm=Rr(e.text);return e.elm}function Jr(e,a,t,n,r){for(;n<=r;++n){var i=t[n];null!=i&&Rt(e,de(i),a)}}function ke(e,a,t,n){for(;t<=n;++t){var r=a[t];null!=r&&(gt(r.tag)?Er(Fr(r.elm),r.elm):Er(e,r.elm))}}function Ea(e,a){var t,n=a.elm,r=e&&e.attrs||{},i=a.attrs||{};if(r!==i){for(t in i){var o=i[t];r[t]!==o&&(!0===o?n.setAttribute(t,""):!1===o?n.removeAttribute(t):t.charCodeAt(0)!==Wu?n.setAttribute(t,o):"xmlns:xlink"===t||"xmlns"===t?n.setAttributeNS(Ou,t,o):t.charCodeAt(3)===Gr?n.setAttributeNS(Mu,t,o):t.charCodeAt(5)===Gr?n.setAttributeNS(xr,t,o):n.setAttribute(t,o))}for(t in r)t in i||n.removeAttribute(t)}}function jt(e,a){var t=a.elm=e.elm,n=e.children,r=a.children;e!==a&&(Ea(e,a),Ra(a.text)?gt(n)&&gt(r)?n!==r&&function Ku(e,a,t){for(var f,h,v,n=0,r=0,i=a.length-1,o=a[0],l=a[i],u=t.length-1,c=t[0],p=t[u];n<=i&&r<=u;)null==o?o=a[++n]:null==l?l=a[--i]:null==c?c=t[++r]:null==p?p=t[--u]:he(o,c)?(jt(o,c),o=a[++n],c=t[++r]):he(l,p)?(jt(l,p),l=a[--i],p=t[--u]):he(o,p)?(jt(o,p),Rt(e,o.elm,Vr(l.elm)),o=a[++n],p=t[--u]):he(l,c)?(jt(l,c),Rt(e,l.elm,o.elm),l=a[--i],c=t[++r]):(Ra(f)&&(f=Xu(a,n,i)),Ra(h=f[c.key])||(v=a[h]).tag!==c.tag?Rt(e,de(c),o.elm):(jt(v,c),a[h]=void 0,Rt(e,v.elm,o.elm)),c=t[++r]);(n<=i||r<=u)&&(n>i?Jr(e,null==t[u+1]?null:t[u+1].elm,t,r,u):ke(e,a,n,i))}(t,n,r):gt(r)?(gt(e.text)&&za(t,""),Jr(t,null,r,0,r.length-1)):gt(n)?ke(t,n,0,n.length-1):gt(e.text)&&za(t,""):e.text!==a.text&&(gt(n)&&ke(t,n,0,n.length-1),za(t,a.text)))}var Hr=_(6695),qu=0;const ac=function(){function e(a,t,n){if(this.type="svg",this.refreshHover=function(){},this.configLayer=function(){},this.storage=t,this._opts=n=(0,m.extend)({},n),this.root=a,this._id="zr"+qu++,this._oldVNode=_r(n.width,n.height),a&&!n.ssr){var r=this._viewport=document.createElement("div");r.style.cssText="position:relative;overflow:hidden";var i=this._svgDom=this._oldVNode.elm=Cr("svg");Ea(null,this._oldVNode),r.appendChild(i),a.appendChild(r)}this.resize(n.width,n.height)}return e.prototype.getType=function(){return this.type},e.prototype.getViewportRoot=function(){return this._viewport},e.prototype.getViewportRootOffset=function(){var a=this.getViewportRoot();if(a)return{offsetLeft:a.offsetLeft||0,offsetTop:a.offsetTop||0}},e.prototype.getSvgDom=function(){return this._svgDom},e.prototype.refresh=function(){if(this.root){var a=this.renderToVNode({willUpdate:!0});a.attrs.style="position:absolute;left:0;top:0;user-select:none",function $u(e,a){if(he(e,a))jt(e,a);else{var t=e.elm,n=Fr(t);de(a),null!==n&&(Rt(n,a.elm,Vr(t)),ke(n,[e],0,0))}}(this._oldVNode,a),this._oldVNode=a}},e.prototype.renderOneToVNode=function(a){return Ur(a,Na(this._id))},e.prototype.renderToVNode=function(a){a=a||{};var t=this.storage.getDisplayList(!0),n=this._width,r=this._height,i=Na(this._id);i.animation=a.animation,i.willUpdate=a.willUpdate,i.compress=a.compress;var o=[],l=this._bgVNode=function ec(e,a,t,n){var r;if(t&&"none"!==t)if(r=$("rect","bg",{width:e,height:a,x:"0",y:"0",id:"0"}),(0,U.H3)(t))kr({fill:t},r.attrs,"fill",n);else if((0,U.R)(t))zr({style:{fill:t},dirty:m.noop,getBoundingRect:function(){return{width:e,height:a}}},r.attrs,"fill",n);else{var i=(0,U.ut)(t),l=i.opacity;r.attrs.fill=i.color,l<1&&(r.attrs["fill-opacity"]=l)}return r}(n,r,this._backgroundColor,i);l&&o.push(l);var u=a.compress?null:this._mainVNode=$("g","main",{},[]);this._paintList(t,i,u?u.children:o),u&&o.push(u);var c=(0,m.map)((0,m.keys)(i.defs),function(h){return i.defs[h]});if(c.length&&o.push($("defs","defs",{},c)),a.animation){var p=function wu(e,a,t){var n=(t=t||{}).newline?"\n":"",r=" {"+n,i=n+"}",o=(0,m.map)((0,m.keys)(e),function(u){return u+r+(0,m.map)((0,m.keys)(e[u]),function(c){return c+":"+e[u][c]+";"}).join(n)+i}).join(n),l=(0,m.map)((0,m.keys)(a),function(u){return"@keyframes "+u+r+(0,m.map)((0,m.keys)(a[u]),function(c){return c+r+(0,m.map)((0,m.keys)(a[u][c]),function(p){var f=a[u][c][p];return"d"===p&&(f='path("'+f+'")'),p+":"+f+";"}).join(n)+i}).join(n)+i}).join(n);return o||l?["<![CDATA[",o,l,"]]>"].join(n):""}(i.cssNodes,i.cssAnims,{newline:!0});if(p){var f=$("style","stl",{},[],p);o.push(f)}}return _r(n,r,o,a.useViewBox)},e.prototype.renderToString=function(a){return La(this.renderToVNode({animation:(0,m.retrieve2)((a=a||{}).cssAnimation,!0),willUpdate:!1,compress:!0,useViewBox:(0,m.retrieve2)(a.useViewBox,!0)}),{newline:!0})},e.prototype.setBackgroundColor=function(a){this._backgroundColor=a},e.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},e.prototype._paintList=function(a,t,n){for(var l,u,r=a.length,i=[],o=0,c=0,p=0;p<r;p++){var f=a[p];if(!f.invisible){var h=f.__clipPaths,v=h&&h.length||0,d=u&&u.length||0,g=void 0;for(g=Math.max(v-1,d-1);g>=0&&(!h||!u||h[g]!==u[g]);g--);for(var y=d-1;y>g;y--)l=i[--o-1];for(var S=g+1;S<v;S++){var T={};Yu(h[S],T,t);var b=$("g","clip-g-"+c++,T,[]);(l?l.children:n).push(b),i[o++]=b,l=b}u=h;var x=Ur(f,t);x&&(l?l.children:n).push(x)}}},e.prototype.resize=function(a,t){var n=this._opts,r=this.root,i=this._viewport;if(null!=a&&(n.width=a),null!=t&&(n.height=t),r&&i&&(i.style.display="none",a=(0,Hr.ap)(r,0,n),t=(0,Hr.ap)(r,1,n),i.style.display=""),this._width!==a||this._height!==t){if(this._width=a,this._height=t,i){var o=i.style;o.width=a+"px",o.height=t+"px"}if((0,U.R)(this._backgroundColor))this.refresh();else{var l=this._svgDom;l&&(l.setAttribute("width",a),l.setAttribute("height",t));var u=this._bgVNode&&this._bgVNode.elm;u&&(u.setAttribute("width",a),u.setAttribute("height",t))}}},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},e.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},e.prototype.toDataURL=function(a){var t=this.renderToString(),n="data:image/svg+xml;";return a?(t=(0,U.oF)(t))&&n+"base64,"+t:n+"charset=UTF-8,"+encodeURIComponent(t)},e}();ae.D([ro.N,function Ao(e){e.registerChartView(ho),e.registerSeriesModel(Co),(0,io.y)("pie",e.registerAction),e.registerLayout((0,m.curry)(oo,"pie")),e.registerProcessor(function so(e){return{seriesType:e,reset:function(a,t){var n=t.findComponents({mainType:"legend"});if(n&&n.length){var r=a.getData();r.filterSelf(function(i){for(var o=r.getName(i),l=0;l<n.length;l++)if(!n[l].isSelected(o))return!1;return!0})}}}}("pie")),e.registerProcessor(function _o(e){return{seriesType:e,reset:function(a,t){var n=a.getData();n.filterSelf(function(r){var i=n.mapDimension("value"),o=n.get(i,r);return!((0,m.isNumber)(o)&&!isNaN(o)&&o<0)})}}}("pie"))},function ts(e){e.registerChartView(Xo),e.registerSeriesModel(Mo),e.registerLayout(function $o(e,a){return{seriesType:e,plan:(0,Ko.Z)(),reset:function(t){var n=t.getData(),r=t.coordinateSystem,o=a||t.pipelineContext.large;if(r){var l=(0,m.map)(r.dimensions,function(v){return n.mapDimension(v)}).slice(0,2),u=l.length,c=n.getCalculationInfo("stackResultDimension");(0,re.M)(n,l[0])&&(l[0]=c),(0,re.M)(n,l[1])&&(l[1]=c);var p=n.getStore(),f=n.getDimensionIndex(l[0]),h=n.getDimensionIndex(l[1]);return u&&{progress:function(v,d){for(var y=o&&(0,Gt.o)((v.end-v.start)*u),S=[],T=[],b=v.start,x=0;b<v.end;b++){var A=void 0;if(1===u){var C=p.get(f,b);A=r.dataToPoint(C,null,T)}else S[0]=p.get(f,b),S[1]=p.get(h,b),A=r.dataToPoint(S,null,T);o?(y[x++]=A[0],y[x++]=A[1]):d.setItemLayout(b,A.slice())}o&&d.setLayout("points",y)}}}}}}("line",!0)),e.registerVisual({seriesType:"line",reset:function(a){var t=a.getData(),n=a.getModel("lineStyle").getLineStyle();n&&!n.stroke&&(n.stroke=t.getVisual("style").fill),t.setVisual("legendLineStyle",n)}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,(0,qo.Z)("line"))},es.N,function ms(e){(0,ae.D)(Cn),(0,ae.D)(gs)},function Ns(e){e.registerComponentModel(bs),e.registerComponentView(Ls),e.registerPreprocessor(function(a){(function ys(e,a){if(!e)return!1;for(var t=(0,m.isArray)(e)?e:[e],n=0;n<t.length;n++)if(t[n]&&t[n][a])return!0;return!1})(a.series,"markPoint")&&(a.markPoint=a.markPoint||{})})},Us.N,function Es(e){e.registerComponentModel(zs),e.registerComponentView(Rs)},function gu(e){e.registerComponentModel(ol),e.registerComponentView(ul),ce("saveAsImage",pl),ce("magicType",hl),ce("dataView",Al),ce("dataZoom",du),ce("restore",wl),(0,ae.D)(rl)},function nc(e){e.registerPainter("svg",ac)}]);const rc=[{path:"",component:ao}];let ic=(()=>{var e;class a{}return(e=a).\u0275fac=function(n){return new(n||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[N.w,Z.ez,Ft.I,st.C,nt.u5,z.q,ut.Oz,wt.Ns.forRoot({echarts:no}),Ee,ge.Bz.forChild(rc),z.qp,z.Gw,z.h2,E,me.G,ge.Bz]}),a})()}}]);