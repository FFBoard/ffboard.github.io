"use strict";(self.webpackChunkpages=self.webpackChunkpages||[]).push([[884],{7429:(_e,oe,h)=>{h.d(oe,{d:()=>fe});var v=h(5879),N=h(6223),F=h(5661),e=h(336);let A=(()=>{class L{constructor(){this.allowedProps={$ref:{validator:this.isString},anyOf:{validator:this.validateAnyOf},default:{validator:this.isNestedOfPrimitives},definitions:null,description:null,enum:{validator:this.validateEnum},items:{child:"allProps"},maximum:null,maxItems:null,maxLength:null,minimum:null,minItems:null,minLength:null,multipleOf:null,oneOf:{validator:this.validateOneOf},properties:null,required:{validator:this.validateRequired},title:null,type:{validator:this.isNestedOfPrimitives},uniqueItems:null,widget:{child:{formlyConfig:{child:{props:{child:{placeholder:{validator:this.isString},multiple:{validator:this.isBoolean},pattern:{validator:this.isString},type:{validator:function(x){return"hidden"===x}},minLength:{validator:this.isNumber},maxLength:{validator:this.isNumber},rows:{validator:this.isNumber},keepGroupsWithoutId:{validator:this.isBoolean},fieldsetTemplate:{validator:this.isBoolean},startDate:null,endDate:null,minDate:{child:{year:null,month:null,day:null}},maxDate:{child:{year:null,month:null,day:null}}}},type:{validator:function(x){return"radio"===x}}}}}}},this.fieldListKeys=["properties","definitions"]}validateSchema(x){this.isObject(x)&&((!x.hasOwnProperty("type")||!x.hasOwnProperty("properties")||"object"!==x.type)&&(x.type="object",x.properties={}),this.validate(x))}validate(x,k){k||(k=this.allowedProps);for(const[M,q]of Object.entries(x)){var H,le;if(k.hasOwnProperty(M)){if(null!==(H=k[M])&&void 0!==H&&H.hasOwnProperty("validator"))k[M].validator.call(this,q)||delete x[M];else if(this.fieldListKeys.includes(M))for(const m of Object.keys(x[M]))this.validate(x[M][m]);else if(!this.isPrimitive(q)){if(null===(le=k[M])||void 0===le||!le.hasOwnProperty("child")||!this.isObject(q)){delete x[M];continue}this.validate(x[M],"allProps"===k[M].child?this.allowedProps:k[M].child)}}else delete x[M]}}isObject(x){return null!=x&&"object"==typeof x&&!Array.isArray(x)}isPrimitive(x){return this.isString(x)||this.isNumber(x)||this.isBoolean(x)||null==x}isString(x){return"string"==typeof x}isBoolean(x){return"boolean"==typeof x}isNumber(x){return"number"==typeof x}validateRequired(x){if(!Array.isArray(x))return!1;for(const k of x)if(!this.isString(k))return!1;return!0}validateEnum(x){if(!Array.isArray(x))return!1;for(const k of x)if(!this.isString(k)&&!this.isNumber(k))return!1;return!0}validateOneOf(x){var k;if(Array.isArray(x)&&null!==(k=x[0])&&void 0!==k&&k.hasOwnProperty("const")){for(const H of x){if(!this.isObject(H))return!1;this.validate(H,{const:null,title:null})}return!0}return this.validateAnyOf(x)}validateAnyOf(x){if(!Array.isArray(x))return!1;for(const k of x){if(!this.isObject(k))return!1;this.validate(k)}return!0}isNestedOfPrimitives(x){if(this.isPrimitive(x))return!0;if(Array.isArray(x)||this.isObject(x)){for(const k of Object.values(x))if(!this.isNestedOfPrimitives(k))return!1;return!0}return!1}}return L.\u0275fac=function(x){return new(x||L)},L.\u0275prov=v.Yz7({token:L,factory:L.\u0275fac,providedIn:"root"}),L})();var I=h(5545);const _=["app-custom-form",""],y=[[["","buttons",""]]],me=["[buttons]"];let fe=(()=>{class L{constructor(x,k,H){this.formlyJsonschema=x,this.customFormSchemaService=k,this.toastService=H,this.model={},this.validateSchema=!1,this.enableModelChangeEvent=!1,this.defaultModel={},this.cancelEvent=new v.vpe,this.submitEvent=new v.vpe,this.validityChangeEvent=new v.vpe,this.modelChangeEvent=new v.vpe,this.form=new N.nJ({}),this.fields=[],this.options={},this.valid=!1,this.isFormCurrentlyValid=!0}ngOnInit(){this.createFields()}ngOnChanges(x){x.schema&&!x.schema.firstChange&&this.createFields()}createFields(){this.customFormSchemaService.isObject(this.schema)||(this.schema={}),this.validateSchema&&this.customFormSchemaService.validateSchema(this.schema),this.fields=[this.formlyJsonschema.toFieldConfig(this.schema)]}showFieldValidation(){this.cycleFields(this.fields)}showFieldValidationWithMessage(){this.showFieldValidation(),this.toastService.show({content:"Tutti i campi sono stati <strong>validati</strong>: quelli con errore sono evidenziati da un <strong>bordo rosso</strong>!"})}cycleFields(x){x.forEach(k=>{this.forceValidation(k),k.fieldGroup&&this.cycleFields(k.fieldGroup)})}forceValidation(x){x.validation||(x.validation={}),x.validation.show=!0}reset(){this.options.resetModel&&this.options.resetModel(this.defaultModel)}cancel(){this.cancelEvent.emit()}submit(){this.form.valid&&(this.log(),this.submitEvent.emit(this.model))}onModelChange(x){this.valid=this.form.valid,this.enableModelChangeEvent&&this.modelChangeEvent.emit(x||{}),this.form.valid!==this.isFormCurrentlyValid&&this.validityChangeEvent.emit(this.isFormCurrentlyValid=this.form.valid)}log(){}}return L.\u0275fac=function(x){return new(x||L)(v.Y36(e.c),v.Y36(A),v.Y36(F.k))},L.\u0275cmp=v.Xpm({type:L,selectors:[["","app-custom-form",""]],inputs:{schema:"schema",model:"model",validateSchema:"validateSchema",enableModelChangeEvent:"enableModelChangeEvent",defaultModel:"defaultModel"},outputs:{cancelEvent:"cancelEvent",submitEvent:"submitEvent",validityChangeEvent:"validityChangeEvent",modelChangeEvent:"modelChangeEvent"},features:[v.TTD],attrs:_,ngContentSelectors:me,decls:3,vars:5,consts:[[3,"formGroup","ngSubmit"],[3,"model","fields","form","options","modelChange"]],template:function(x,k){1&x&&(v.F$t(y),v.TgZ(0,"form",0),v.NdJ("ngSubmit",function(){return k.submit()}),v.TgZ(1,"formly-form",1),v.NdJ("modelChange",function(le){return k.onModelChange(le)}),v.qZA(),v.Hsn(2),v.qZA()),2&x&&(v.Q6J("formGroup",k.form),v.xp6(1),v.Q6J("model",k.model)("fields",k.fields)("form",k.form)("options",k.options))},dependencies:[I.T7,N._Y,N.JL,N.sg]}),L})()},7863:(_e,oe,h)=>{h.d(oe,{I:()=>Bn});var v=h(6814),N=h(8345),F=h(3946),e=h(5879),A=h(9515);let I=(()=>{class o extends F.wf{constructor(t){super(),this.translateService=t}getWeekdayLabel(t){return this.translateService.instant("COMPONENTS.CUSTOM_FORM.DATEPICKER.WEEKDAYS")[t-1]}getWeekLabel(){return this.translateService.instant("COMPONENTS.CUSTOM_FORM.DATEPICKER.WEEK_LABEL")}getMonthShortName(t){return this.translateService.instant("COMPONENTS.CUSTOM_FORM.DATEPICKER.MONTHS.SHORT")[t-1]}getMonthFullName(t){return this.translateService.instant("COMPONENTS.CUSTOM_FORM.DATEPICKER.MONTHS.FULL")[t-1]}getDayAriaLabel(t){return`${t.day}-${t.month}-${t.year}`}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(A.sK))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var _=h(5545),y=h(6223);let me=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[{provide:F.wf,useExisting:I},{provide:F.NG,useExisting:N.z}],imports:[v.ez,_.X0.forChild(),y.u5,F.M,y.UX]}),o})();function fe(o,l){1&o&&(e.TgZ(0,"span",9),e._uU(1,"*"),e.qZA())}function L(o,l){if(1&o&&(e.TgZ(0,"label",7),e._uU(1),e.YNc(2,fe,2,0,"span",8),e.qZA()),2&o){const t=e.oxw(2);e.uIk("for",t.id),e.xp6(1),e.hij(" ",t.props.label," "),e.xp6(1),e.Q6J("ngIf",t.props.required&&!0!==t.props.hideRequiredMarker)}}function K(o,l){if(1&o&&e.YNc(0,L,3,3,"label",6),2&o){const t=e.oxw();e.Q6J("ngIf",t.props.label&&!0!==t.props.hideLabel)}}function x(o,l){if(1&o&&(e.ynx(0),e.GkF(1,10),e.BQk()),2&o){e.oxw();const t=e.MAs(1);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function k(o,l){}function H(o,l){if(1&o&&(e.ynx(0),e.GkF(1,10),e.BQk()),2&o){e.oxw();const t=e.MAs(1);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function le(o,l){if(1&o&&(e.TgZ(0,"div",11),e._UZ(1,"formly-validation-message",12),e.qZA()),2&o){const t=e.oxw();e.Udp("display","block"),e.xp6(1),e.Q6J("field",t.field)}}function M(o,l){if(1&o&&(e.TgZ(0,"small",13),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.props.description)}}const q=["fieldTypeTemplate"];let m=(()=>{class o extends _.n2{}return o.\u0275fac=function(){let l;return function(s){return(l||(l=e.n5z(o)))(s||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-wrapper-form-field"]],features:[e.qOj],decls:9,vars:8,consts:[["labelTemplate",""],[1,"mb-3"],[4,"ngIf"],["fieldComponent",""],["class","invalid-feedback",3,"display",4,"ngIf"],["class","form-text text-muted",4,"ngIf"],["class","form-label",4,"ngIf"],[1,"form-label"],["aria-hidden","true",4,"ngIf"],["aria-hidden","true"],[3,"ngTemplateOutlet"],[1,"invalid-feedback"],[3,"field"],[1,"form-text","text-muted"]],template:function(t,s){1&t&&(e.YNc(0,K,1,1,"ng-template",null,0,e.W1O),e.TgZ(2,"div",1),e.YNc(3,x,2,1,"ng-container",2),e.YNc(4,k,0,0,"ng-template",null,3,e.W1O),e.YNc(6,H,2,1,"ng-container",2),e.YNc(7,le,2,3,"div",4),e.YNc(8,M,2,1,"small",5),e.qZA()),2&t&&(e.xp6(2),e.ekj("form-floating","floating"===s.props.labelPosition)("has-error",s.showError),e.xp6(1),e.Q6J("ngIf","floating"!==s.props.labelPosition),e.xp6(3),e.Q6J("ngIf","floating"===s.props.labelPosition),e.xp6(1),e.Q6J("ngIf",s.showError),e.xp6(1),e.Q6J("ngIf",s.props.description))},dependencies:[_.M2,v.O5,v.tP],encapsulation:2}),o})(),O=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[v.ez,y.UX,_.X0.forChild({wrappers:[{name:"form-field",component:m}]})]]}),o})(),w=(()=>{class o extends _.fS{constructor(t){super(),this.hostContainerRef=t}set content(t){t&&this.hostContainerRef&&this.hostContainerRef.createEmbeddedView(t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.s_b,8))},o.\u0275dir=e.lG2({type:o,viewQuery:function(t,s){if(1&t&&e.Gf(q,7),2&t){let u;e.iGM(u=e.CRH())&&(s.content=u.first)}},features:[e.qOj]}),o})();function S(o,l){if(1&o&&e._UZ(0,"input",3),2&o){const t=e.oxw(2);e.ekj("is-invalid",t.showError),e.Q6J("type",t.type)("formControl",t.formControl)("formlyAttributes",t.field)}}function C(o,l){if(1&o&&e._UZ(0,"input",4),2&o){const t=e.oxw(2);e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("formlyAttributes",t.field)}}function P(o,l){if(1&o&&(e.YNc(0,S,1,5,"input",1),e.YNc(1,C,1,4,"ng-template",null,2,e.W1O)),2&o){const t=e.MAs(2),s=e.oxw();e.Q6J("ngIf","number"!==s.type)("ngIfElse",t)}}let g=(()=>{class o extends w{get type(){return this.props.type||"text"}}return o.\u0275fac=function(){let l;return function(s){return(l||(l=e.n5z(o)))(s||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-input"]],features:[e.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],["class","form-control",3,"type","formControl","formlyAttributes","is-invalid",4,"ngIf","ngIfElse"],["numberTmp",""],[1,"form-control",3,"type","formControl","formlyAttributes"],["type","number",1,"form-control",3,"formControl","formlyAttributes"]],template:function(t,s){1&t&&e.YNc(0,P,3,2,"ng-template",null,0,e.W1O)},dependencies:[v.O5,y.Fj,y.JJ,y.oH,_.JD,y.wV],encapsulation:2,changeDetection:0}),o})(),T=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[v.ez,y.UX,O,_.X0.forChild({types:[{name:"input",component:g,wrappers:["form-field"]},{name:"string",extends:"input"},{name:"number",extends:"input",defaultOptions:{props:{type:"number"}}},{name:"integer",extends:"input",defaultOptions:{props:{type:"number"}}}]})]]}),o})();function R(o,l){if(1&o&&(e.TgZ(0,"textarea",1),e._uU(1,"      "),e.qZA()),2&o){const t=e.oxw();e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("cols",t.props.cols)("rows",t.props.rows)("formlyAttributes",t.field)}}let D=(()=>{class o extends w{constructor(){super(...arguments),this.defaultOptions={props:{cols:1,rows:1}}}}return o.\u0275fac=function(){let l;return function(s){return(l||(l=e.n5z(o)))(s||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-textarea"]],features:[e.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],[1,"form-control",3,"formControl","cols","rows","formlyAttributes"]],template:function(t,s){1&t&&e.YNc(0,R,2,6,"ng-template",null,0,e.W1O)},dependencies:[y.Fj,y.JJ,y.oH,_.JD],encapsulation:2,changeDetection:0}),o})(),W=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[v.ez,y.UX,O,_.X0.forChild({types:[{name:"textarea",component:D,wrappers:["form-field"]}]})]]}),o})();var Z=h(5592),V=h(5619),B=h(7398),U=h(2181),ce=h(9397);let $=(()=>{class o{transform(t,s){return t instanceof Z.y?this.dispose():t=this.observableOf(t,s),t.pipe((0,B.U)(u=>this.transformOptions(u,s)))}ngOnDestroy(){this.dispose()}transformOptions(t,s){const u=this.transformSelectProps(s),b=[],J={};return null==t||t.forEach(ee=>{const te=this.transformOption(ee,u);if(te.group){const se=J[te.label];void 0===se?J[te.label]=b.push(te)-1:te.group.forEach(tt=>b[se].group.push(tt))}else b.push(te)}),b}transformOption(t,s){const u=s.groupProp(t);return Array.isArray(u)?{label:s.labelProp(t),group:u.map(b=>this.transformOption(b,s))}:(t={label:s.labelProp(t),value:s.valueProp(t),disabled:!!s.disabledProp(t)},u?{label:u,group:[t]}:t)}transformSelectProps(t){const s=(null==t?void 0:t.props)||(null==t?void 0:t.templateOptions)||{},u=b=>"function"==typeof b?b:J=>J[b];return{groupProp:u(s.groupProp||"group"),labelProp:u(s.labelProp||"label"),valueProp:u(s.valueProp||"value"),disabledProp:u(s.disabledProp||"disabled")}}dispose(){this._options&&(this._options.complete(),this._options=null),this._subscription&&(this._subscription.unsubscribe(),this._subscription=null)}observableOf(t,s){return this.dispose(),s&&s.options&&s.options.fieldChanges&&(this._subscription=s.options.fieldChanges.pipe((0,U.h)(({property:u,type:b,field:J})=>"expressionChanges"===b&&(0===u.indexOf("templateOptions.options")||0===u.indexOf("props.options"))&&J===s&&Array.isArray(J.props.options)&&!!this._options),(0,ce.b)(()=>this._options.next(s.props.options))).subscribe()),this._options=new V.X(t),this._options.asObservable()}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275pipe=e.Yjl({name:"formlySelectOptions",type:o,pure:!0}),o})(),ne=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({}),o})();function re(o,l){if(1&o&&(e.TgZ(0,"div",2),e._UZ(1,"input",3),e.TgZ(2,"label",4),e._uU(3),e.qZA()()),2&o){const t=l.$implicit,s=l.index,u=e.oxw(2);e.ekj("form-check-inline","inline"===u.props.formCheck),e.xp6(1),e.ekj("is-invalid",u.showError),e.Q6J("id",u.id+"_"+s)("name",u.field.name||u.id)("value",t.value)("formControl",t.disabled?u.disabledControl:u.formControl)("formlyAttributes",u.field),e.uIk("value",t.value),e.xp6(1),e.Q6J("for",u.id+"_"+s),e.xp6(1),e.hij(" ",t.label," ")}}function ye(o,l){if(1&o&&(e.YNc(0,re,4,12,"div",1),e.ALo(1,"async"),e.ALo(2,"formlySelectOptions")),2&o){const t=e.oxw();e.Q6J("ngForOf",e.lcZ(1,1,e.xi3(2,3,t.props.options,t.field)))}}let Je=(()=>{class o extends w{constructor(){super(...arguments),this.defaultOptions={props:{formCheck:"default"}}}get disabledControl(){return new y.NI({value:this.formControl.value,disabled:!0})}}return o.\u0275fac=function(){let l;return function(s){return(l||(l=e.n5z(o)))(s||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-radio"]],features:[e.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],["class","form-check",3,"form-check-inline",4,"ngFor","ngForOf"],[1,"form-check"],["type","radio",1,"form-check-input",3,"id","name","value","formControl","formlyAttributes"],[1,"form-check-label",3,"for"]],template:function(t,s){1&t&&e.YNc(0,ye,3,6,"ng-template",null,0,e.W1O)},dependencies:[v.sg,y._,y.Fj,y.JJ,y.oH,_.JD,v.Ov,$],encapsulation:2,changeDetection:0}),o})(),Oe=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[v.ez,y.UX,O,ne,_.X0.forChild({types:[{name:"radio",component:Je,wrappers:["form-field"]}]})]]}),o})();function Re(o,l){1&o&&(e.TgZ(0,"span",6),e._uU(1,"*"),e.qZA())}function ie(o,l){if(1&o&&(e.TgZ(0,"label",4),e._uU(1),e.YNc(2,Re,2,0,"span",5),e.qZA()),2&o){const t=e.oxw(2);e.Q6J("for",t.id),e.xp6(1),e.hij(" ",t.props.label," "),e.xp6(1),e.Q6J("ngIf",t.props.required&&!0!==t.props.hideRequiredMarker)}}const Le=function(o,l){return{"form-check-inline":o,"form-switch":l}};function z(o,l){if(1&o&&(e.TgZ(0,"div",1),e._UZ(1,"input",2),e.YNc(2,ie,3,3,"label",3),e.qZA()),2&o){const t=e.oxw();e.Q6J("ngClass",e.WLB(9,Le,"inline"===t.props.formCheck||"inline-switch"===t.props.formCheck,"switch"===t.props.formCheck||"inline-switch"===t.props.formCheck)),e.xp6(1),e.ekj("is-invalid",t.showError)("position-static","nolabel"===t.props.formCheck),e.Q6J("indeterminate",t.props.indeterminate&&null==t.formControl.value)("formControl",t.formControl)("formlyAttributes",t.field),e.xp6(1),e.Q6J("ngIf","nolabel"!==t.props.formCheck)}}let Y=(()=>{class o extends w{constructor(){super(...arguments),this.defaultOptions={props:{indeterminate:!0,hideLabel:!0,formCheck:"default"}}}}return o.\u0275fac=function(){let l;return function(s){return(l||(l=e.n5z(o)))(s||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-checkbox"]],features:[e.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],[1,"form-check",3,"ngClass"],["type","checkbox",1,"form-check-input",3,"indeterminate","formControl","formlyAttributes"],["class","form-check-label",3,"for",4,"ngIf"],[1,"form-check-label",3,"for"],["aria-hidden","true",4,"ngIf"],["aria-hidden","true"]],template:function(t,s){1&t&&e.YNc(0,z,3,12,"ng-template",null,0,e.W1O)},dependencies:[v.mk,y.Wl,y.JJ,y.oH,_.JD,v.O5],encapsulation:2,changeDetection:0}),o})(),Te=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[v.ez,y.UX,O,_.X0.forChild({types:[{name:"checkbox",component:Y,wrappers:["form-field"]},{name:"boolean",extends:"checkbox"}]})]]}),o})();var j=h(1413);const ke=function(o,l){return{"form-check-inline":o,"form-switch":l}};function Ie(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",2)(1,"input",3),e.NdJ("change",function(u){const J=e.CHM(t).$implicit,ee=e.oxw(2);return e.KtG(ee.onChange(J.value,u.target.checked))}),e.qZA(),e.TgZ(2,"label",4),e._uU(3),e.qZA()()}if(2&o){const t=l.$implicit,s=l.index,u=e.oxw(2);e.Q6J("ngClass",e.WLB(8,ke,"inline"===u.props.formCheck||"inline-switch"===u.props.formCheck,"switch"===u.props.formCheck||"inline-switch"===u.props.formCheck)),e.xp6(1),e.Q6J("id",u.id+"_"+s)("value",t.value)("checked",u.isChecked(t))("formlyAttributes",u.field)("disabled",u.formControl.disabled||t.disabled),e.xp6(1),e.Q6J("for",u.id+"_"+s),e.xp6(1),e.hij(" ",t.label," ")}}function ue(o,l){if(1&o&&(e.YNc(0,Ie,4,11,"div",1),e.ALo(1,"async"),e.ALo(2,"formlySelectOptions")),2&o){const t=e.oxw();e.Q6J("ngForOf",e.lcZ(1,1,e.xi3(2,3,t.props.options,t.field)))}}let pe=(()=>{class o extends w{constructor(){super(...arguments),this.defaultOptions={props:{formCheck:"default"}}}onChange(t,s){this.formControl.markAsDirty(),this.formControl.patchValue("array"===this.props.type?s?[...this.formControl.value||[],t]:[...this.formControl.value||[]].filter(u=>u!==t):(0,j.Z)((0,j.Z)({},this.formControl.value),{},{[t]:s})),this.formControl.markAsTouched()}isChecked(t){const s=this.formControl.value;return s&&("array"===this.props.type?-1!==s.indexOf(t.value):s[t.value])}}return o.\u0275fac=function(){let l;return function(s){return(l||(l=e.n5z(o)))(s||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-multicheckbox"]],features:[e.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],["class","form-check",3,"ngClass",4,"ngFor","ngForOf"],[1,"form-check",3,"ngClass"],["type","checkbox",1,"form-check-input",3,"id","value","checked","formlyAttributes","disabled","change"],[1,"form-check-label",3,"for"]],template:function(t,s){1&t&&e.YNc(0,ue,3,6,"ng-template",null,0,e.W1O)},dependencies:[v.sg,v.mk,_.JD,v.Ov,$],encapsulation:2,changeDetection:0}),o})(),ve=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[v.ez,y.UX,O,ne,_.X0.forChild({types:[{name:"multicheckbox",component:pe,wrappers:["form-field"]}]})]]}),o})();var Fe=h(8180);function Pe(o,l){if(1&o&&(e.TgZ(0,"option",8),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("ngValue",t.value)("disabled",t.disabled),e.xp6(1),e.hij(" ",t.label," ")}}function Me(o,l){if(1&o&&(e.TgZ(0,"option",8),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("ngValue",t.value)("disabled",t.disabled),e.xp6(1),e.hij(" ",t.label," ")}}function he(o,l){if(1&o&&(e.TgZ(0,"optgroup",9),e.YNc(1,Me,2,3,"option",10),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("label",t.label),e.xp6(1),e.Q6J("ngForOf",t.group)}}function Se(o,l){if(1&o&&(e.ynx(0),e.YNc(1,Pe,2,3,"option",6),e.YNc(2,he,2,2,"ng-template",null,7,e.W1O),e.BQk()),2&o){const t=l.$implicit,s=e.MAs(3);e.xp6(1),e.Q6J("ngIf",!t.group)("ngIfElse",s)}}function Ue(o,l){if(1&o&&(e.ynx(0),e.YNc(1,Se,4,2,"ng-container",5),e.BQk()),2&o){const t=l.ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}function Ee(o,l){if(1&o&&(e.TgZ(0,"select",3),e.YNc(1,Ue,2,1,"ng-container",4),e.ALo(2,"async"),e.ALo(3,"formlySelectOptions"),e.qZA()),2&o){const t=e.oxw(2);e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("compareWith",t.props.compareWith)("formlyAttributes",t.field),e.xp6(1),e.Q6J("ngIf",e.lcZ(2,6,e.xi3(3,8,t.props.options,t.field)))}}function De(o,l){if(1&o&&(e.TgZ(0,"option",13),e._uU(1),e.qZA()),2&o){const t=e.oxw(3);e.Q6J("ngValue",void 0),e.xp6(1),e.Oqu(t.props.placeholder)}}function Qe(o,l){if(1&o&&(e.TgZ(0,"option",8),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("ngValue",t.value)("disabled",t.disabled),e.xp6(1),e.hij(" ",t.label," ")}}function je(o,l){if(1&o&&(e.TgZ(0,"option",8),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("ngValue",t.value)("disabled",t.disabled),e.xp6(1),e.hij(" ",t.label," ")}}function ge(o,l){if(1&o&&(e.TgZ(0,"optgroup",9),e.YNc(1,je,2,3,"option",10),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("label",t.label),e.xp6(1),e.Q6J("ngForOf",t.group)}}function Ne(o,l){if(1&o&&(e.ynx(0),e.YNc(1,Qe,2,3,"option",6),e.YNc(2,ge,2,2,"ng-template",null,7,e.W1O),e.BQk()),2&o){const t=l.$implicit,s=e.MAs(3);e.xp6(1),e.Q6J("ngIf",!t.group)("ngIfElse",s)}}function Ve(o,l){if(1&o&&(e.ynx(0),e.YNc(1,Ne,4,2,"ng-container",5),e.BQk()),2&o){const t=l.ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}function Be(o,l){if(1&o&&(e.TgZ(0,"select",11),e.YNc(1,De,2,2,"option",12),e.YNc(2,Ve,2,1,"ng-container",4),e.ALo(3,"async"),e.ALo(4,"formlySelectOptions"),e.qZA()),2&o){const t=e.oxw(2);e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("compareWith",t.props.compareWith)("formlyAttributes",t.field),e.xp6(1),e.Q6J("ngIf",t.props.placeholder),e.xp6(1),e.Q6J("ngIf",e.lcZ(3,7,e.xi3(4,9,t.props.options,t.field)))}}function Ye(o,l){if(1&o&&(e.YNc(0,Ee,4,11,"select",1),e.YNc(1,Be,5,12,"ng-template",null,2,e.W1O)),2&o){const t=e.MAs(2),s=e.oxw();e.Q6J("ngIf",s.props.multiple)("ngIfElse",t)}}let Ge=(()=>{class o extends w{constructor(t,s){super(s),this.ngZone=t,this.defaultOptions={props:{compareWith:(u,b)=>u===b}}}set selectAccessor(t){if(!t)return;const s=t.writeValue.bind(t);null===t._getOptionId(t.value)&&s(t.value),t.writeValue=u=>{const b=t._idCounter;s(u),null===u&&this.ngZone.onStable.asObservable().pipe((0,Fe.q)(1)).subscribe(()=>{b!==t._idCounter&&null===t._getOptionId(u)&&-1!==t._elementRef.nativeElement.selectedIndex&&s(u)})}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.R0b),e.Y36(e.s_b))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-select"]],viewQuery:function(t,s){if(1&t&&e.Gf(y.EJ,5),2&t){let u;e.iGM(u=e.CRH())&&(s.selectAccessor=u.first)}},features:[e.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],["class","form-select","multiple","",3,"formControl","compareWith","is-invalid","formlyAttributes",4,"ngIf","ngIfElse"],["singleSelect",""],["multiple","",1,"form-select",3,"formControl","compareWith","formlyAttributes"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngValue","disabled",4,"ngIf","ngIfElse"],["optgroup",""],[3,"ngValue","disabled"],[3,"label"],[3,"ngValue","disabled",4,"ngFor","ngForOf"],[1,"form-select",3,"formControl","compareWith","formlyAttributes"],[3,"ngValue",4,"ngIf"],[3,"ngValue"]],template:function(t,s){1&t&&e.YNc(0,Ye,3,2,"ng-template",null,0,e.W1O)},dependencies:[v.O5,y.K7,y.JJ,y.oH,_.JD,v.sg,y.YN,y.Kr,y.EJ,v.Ov,$],encapsulation:2,changeDetection:0}),o})(),He=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[v.ez,y.UX,O,ne,_.X0.forChild({types:[{name:"select",component:Ge,wrappers:["form-field"]},{name:"enum",extends:"select"}]})]]}),o})();const We=["fieldTypeTemplate"];function qe(o,l){if(1&o&&e._UZ(0,"i",7),2&o){const t=e.oxw(3);e.Q6J("ngClass",t.props.addonLeft.class)}}function $e(o,l){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Oqu(t.props.addonLeft.text)}}function Ke(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",4),e.NdJ("click",function(u){e.CHM(t);const b=e.oxw(2);return e.KtG(b.addonLeftClick(u))}),e.YNc(1,qe,1,1,"i",5),e.YNc(2,$e,2,1,"span",6),e.qZA()}if(2&o){const t=e.oxw(2);e.ekj("input-group-btn",t.props.addonLeft.onClick),e.xp6(1),e.Q6J("ngIf",t.props.addonLeft.class),e.xp6(1),e.Q6J("ngIf",t.props.addonLeft.text)}}function ze(o,l){if(1&o&&e._UZ(0,"i",7),2&o){const t=e.oxw(3);e.Q6J("ngClass",t.props.addonRight.class)}}function Ze(o,l){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Oqu(t.props.addonRight.text)}}function Xe(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",4),e.NdJ("click",function(u){e.CHM(t);const b=e.oxw(2);return e.KtG(b.addonRightClick(u))}),e.YNc(1,ze,1,1,"i",5),e.YNc(2,Ze,2,1,"span",6),e.qZA()}if(2&o){const t=e.oxw(2);e.ekj("input-group-btn",t.props.addonRight.onClick),e.xp6(1),e.Q6J("ngIf",t.props.addonRight.class),e.xp6(1),e.Q6J("ngIf",t.props.addonRight.text)}}function c(o,l){if(1&o&&(e.TgZ(0,"div",1),e.YNc(1,Ke,3,4,"div",2),e.GkF(2,null,3),e.YNc(4,Xe,3,4,"div",2),e.qZA()),2&o){const t=e.oxw();e.ekj("has-validation",t.showError),e.xp6(1),e.Q6J("ngIf",t.props.addonLeft),e.xp6(3),e.Q6J("ngIf",t.props.addonRight)}}let i=(()=>{class o extends _.n2{constructor(t){super(),this.hostContainerRef=t}set content(t){t&&this.hostContainerRef&&this.hostContainerRef.createEmbeddedView(t)}addonRightClick(t){var s,u;null===(s=(u=this.props.addonRight).onClick)||void 0===s||s.call(u,this.field,t)}addonLeftClick(t){var s,u;null===(s=(u=this.props.addonLeft).onClick)||void 0===s||s.call(u,this.field,t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.s_b))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-wrapper-addons"]],viewQuery:function(t,s){if(1&t&&e.Gf(We,7),2&t){let u;e.iGM(u=e.CRH())&&(s.content=u.first)}},features:[e.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],[1,"input-group"],["class","input-group-text",3,"input-group-btn","click",4,"ngIf"],["fieldComponent",""],[1,"input-group-text",3,"click"],[3,"ngClass",4,"ngIf"],[4,"ngIf"],[3,"ngClass"]],template:function(t,s){1&t&&e.YNc(0,c,5,4,"ng-template",null,0,e.W1O)},dependencies:[v.O5,v.mk],styles:["formly-wrapper-form-field .input-group-btn{cursor:pointer}\n"],encapsulation:2}),o})();function n(o){!o.props||o.wrappers&&-1!==o.wrappers.indexOf("addons")||(o.props.addonLeft||o.props.addonRight)&&(o.wrappers=[...o.wrappers||[],"addons"])}let r=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[v.ez,y.UX,_.X0.forChild({wrappers:[{name:"addons",component:i}],extensions:[{name:"addons",extension:{postPopulate:n}}]})]]}),o})(),a=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[O,T,W,Oe,Te,ve,He,r]]}),o})();var p=h(4295),d=h(7535),f=h(91);const E=["language","theme"],G=["editor"];let de=(()=>{class o{constructor(t,s){this.ngZone=t,this.monacoPathConfig=s,this.isMonacoLoaded$=new V.X(!1),this._monacoPath="assets/monaco-editor/min/vs",window.monacoEditorAlreadyInitialized?t.run(()=>this.isMonacoLoaded$.next(!0)):(window.monacoEditorAlreadyInitialized=!0,this.monacoPathConfig&&(this.monacoPath=this.monacoPathConfig),this.loadMonaco())}set monacoPath(t){t&&(this._monacoPath=t)}loadMonaco(){const t=()=>{let J=this._monacoPath;window.amdRequire=window.require;const ee=!!this.nodeRequire,te=J.includes("http");ee&&(window.require=this.nodeRequire,te||(J=window.require("path").resolve(window.__dirname,this._monacoPath))),window.amdRequire.config({paths:{vs:J}}),window.amdRequire(["vs/editor/editor.main"],()=>{this.ngZone.run(()=>this.isMonacoLoaded$.next(!0))},se=>console.error("Error loading monaco-editor: ",se))};if(window.amdRequire)return t();window.require&&(this.addElectronFixScripts(),this.nodeRequire=window.require);const b=document.createElement("script");b.type="text/javascript",b.src=`${this._monacoPath}/loader.js`,b.addEventListener("load",t),document.body.appendChild(b)}addElectronFixScripts(){const t=document.createElement("script"),s=document.createTextNode("self.module = undefined;"),u=document.createTextNode("self.process.browser = true;");t.appendChild(s),t.appendChild(u),document.body.appendChild(t)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(e.R0b),e.LFG("MONACO_PATH",8))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),xe=(()=>{class o{constructor(t){this.monacoLoader=t,this.init=new e.vpe,this.onTouched=()=>{},this.onErrorStatusChange=()=>{},this.propagateChange=()=>{}}get model(){return this.editor&&this.editor.getModel()}get modelMarkers(){return this.model&&monaco.editor.getModelMarkers({resource:this.model.uri})}ngOnInit(){this.monacoLoader.isMonacoLoaded$.pipe((0,U.h)(t=>t),(0,Fe.q)(1)).subscribe(()=>{this.initEditor()})}ngOnChanges(t){if(this.editor&&t.options&&!t.options.firstChange){const s=t.options.currentValue,{language:u,theme:b}=s,J=(0,f.Z)(s,E),{language:ee,theme:te}=t.options.previousValue;ee!==u&&monaco.editor.setModelLanguage(this.editor.getModel(),this.options&&this.options.language?this.options.language:"text"),te!==b&&monaco.editor.setTheme(b),this.editor.updateOptions(J)}if(this.editor&&t.uri){const s=t.uri.currentValue,u=t.uri.previousValue;if(u&&!s||!u&&s||s&&u&&s.path!==u.path){const b=this.editor.getValue();let J;this.modelUriInstance&&this.modelUriInstance.dispose(),s&&(J=monaco.editor.getModels().find(ee=>ee.uri.path===s.path)),this.modelUriInstance=J||monaco.editor.createModel(b,this.options.language||"text",this.uri),this.editor.setModel(this.modelUriInstance)}}}writeValue(t){this.value=t,this.editor&&t?this.editor.setValue(t):this.editor&&this.editor.setValue("")}registerOnChange(t){this.propagateChange=t}registerOnTouched(t){this.onTouched=t}validate(){return this.parsedError?{monaco:{value:this.parsedError.split("|")}}:null}registerOnValidatorChange(t){this.onErrorStatusChange=t}initEditor(){const t={value:[this.value].join("\n"),language:"text",automaticLayout:!0,scrollBeyondLastLine:!1,theme:"vc"};this.editor=monaco.editor.create(this.editorContent.nativeElement,this.options?(0,j.Z)((0,j.Z)({},t),this.options):t),this.registerEditorListeners(),this.init.emit(this.editor)}registerEditorListeners(){this.editor.onDidChangeModelContent(()=>{this.propagateChange(this.editor.getValue())}),this.editor.onDidChangeModelDecorations(()=>{const t=this.modelMarkers.map(({message:u})=>u).join("|");this.parsedError!==t&&(this.parsedError=t,this.onErrorStatusChange())}),this.editor.onDidBlurEditorText(()=>{this.onTouched()})}ngOnDestroy(){this.editor&&this.editor.dispose()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(de))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ngx-monaco-editor"]],viewQuery:function(t,s){if(1&t&&e.Gf(G,7),2&t){let u;e.iGM(u=e.CRH())&&(s.editorContent=u.first)}},inputs:{options:"options",uri:"uri"},outputs:{init:"init"},features:[e._Bn([{provide:y.JU,useExisting:(0,e.Gpc)(()=>o),multi:!0},{provide:y.Cf,useExisting:(0,e.Gpc)(()=>o),multi:!0}]),e.TTD],decls:4,vars:0,consts:[["fxFlex","",1,"editor-container"],["container",""],[1,"monaco-editor"],["editor",""]],template:function(t,s){1&t&&(e.TgZ(0,"div",0,1),e._UZ(2,"div",2,3),e.qZA())},styles:[".monaco-editor[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0}.editor-container[_ngcontent-%COMP%]{overflow:hidden;position:relative;display:table;width:100%;height:100%;min-width:0}"],changeDetection:0}),o})(),mt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[]]}),o})();var ft=h(6593);let be=(()=>{class o{constructor(t){this.domSanitizer=t,this.validBBCodes=[{regstring:"\\[b](.+?)\\[/b]",replacement:"<strong>$1</strong>"},{regstring:"\\[i](.+?)\\[/i]",replacement:"<em>$1</em>"},{regstring:"\\[u](.+?)\\[/u]",replacement:"<u>$1</u>"},{regstring:"\\[ul](.+?)\\[/ul]",replacement:"<ul>$1</ul>"},{regstring:"\\[ol](.+?)\\[/ol]",replacement:"<ol>$1</ol>"},{regstring:"\\[li](.+?)\\[/li]",replacement:"<li>$1</li>"},{regstring:"\\[br]",replacement:"<br>"}];for(const s of this.validBBCodes)s.regexp=new RegExp(s.regstring,"gim")}parseBBCode(t){t=t.replace(/</gi,"&lt;").replace(/>/gi,"&gt;"),t=this.domSanitizer.sanitize(e.q3G.HTML,t)||"";for(const s of this.validBBCodes)t=t.replace(s.regexp,s.replacement);return t}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(ft.H7))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function ht(o,l){1&o&&e.GkF(0)}const gt=function(o,l){return{$implicit:o,props:l}};function _t(o,l){if(1&o&&(e.ynx(0),e.YNc(1,ht,1,0,"ng-container",8),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngTemplateOutlet",t.customLabelTemplate)("ngTemplateOutletContext",e.WLB(2,gt,t.id,t.props))}}function yt(o,l){1&o&&(e.TgZ(0,"span",12),e._uU(1," *"),e.qZA())}function vt(o,l){if(1&o&&(e.TgZ(0,"div")(1,"label",9),e._UZ(2,"span",10),e.YNc(3,yt,2,0,"span",11),e.qZA()()),2&o){const t=e.oxw(3);e.xp6(1),e.uIk("for",t.id),e.xp6(1),e.Q6J("innerHTML",t.parsedLabel,e.oJD),e.xp6(1),e.Q6J("ngIf",t.props.required&&!0!==t.props.hideRequiredMarker)}}function Ft(o,l){if(1&o&&e.YNc(0,vt,4,3,"div",2),2&o){const t=e.oxw(2);e.Q6J("ngIf",t.props.label&&!0!==t.props.hideLabel)}}function xt(o,l){if(1&o&&(e.YNc(0,_t,2,5,"ng-container",6),e.YNc(1,Ft,1,1,"ng-template",null,7,e.W1O)),2&o){const t=e.MAs(2),s=e.oxw();e.Q6J("ngIf",s.hasCustomLabelTemplate)("ngIfElse",t)}}function bt(o,l){if(1&o&&(e.ynx(0),e.GkF(1,13),e.BQk()),2&o){e.oxw();const t=e.MAs(1);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function Ct(o,l){}function Ot(o,l){if(1&o&&(e.ynx(0),e.GkF(1,13),e.BQk()),2&o){e.oxw();const t=e.MAs(1);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function Tt(o,l){if(1&o&&(e.TgZ(0,"div",14),e._UZ(1,"formly-validation-message",15),e.qZA()),2&o){const t=e.oxw();e.Udp("display","block"),e.xp6(1),e.Q6J("field",t.field)}}function Mt(o,l){if(1&o&&e._UZ(0,"div",16),2&o){const t=e.oxw();e.Q6J("innerHTML",t.parsedDescription,e.oJD)}}let Et=(()=>{class o extends _.n2{constructor(t){super(),this.customFormUtilsService=t,this.hasCustomLabelTemplate=!1,this.parsedDescription="",this.parsedLabel=""}ngOnInit(){this.hasCustomLabelTemplate=!(!this.props.customLabelTemplate||!this.props.customLabelTemplate.elementRef),this.parsedDescription=this.props.description?this.customFormUtilsService.parseBBCode(this.props.description):"",this.parsedLabel=!this.hasCustomLabelTemplate&&this.props.label?this.customFormUtilsService.parseBBCode(this.props.label):""}get customLabelTemplate(){return this.props.customLabelTemplate}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(be))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-custom-wrapper-form-field"]],features:[e.qOj],decls:9,vars:8,consts:[["labelTemplate",""],[1,"mb-3"],[4,"ngIf"],["fieldComponent",""],["class","invalid-feedback",3,"display",4,"ngIf"],["class","form-text text-muted",3,"innerHTML",4,"ngIf"],[4,"ngIf","ngIfElse"],["stringLabel",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"form-label"],[3,"innerHTML"],["aria-hidden","true",4,"ngIf"],["aria-hidden","true"],[3,"ngTemplateOutlet"],[1,"invalid-feedback"],[3,"field"],[1,"form-text","text-muted",3,"innerHTML"]],template:function(t,s){1&t&&(e.YNc(0,xt,3,2,"ng-template",null,0,e.W1O),e.TgZ(2,"div",1),e.YNc(3,bt,2,1,"ng-container",2),e.YNc(4,Ct,0,0,"ng-template",null,3,e.W1O),e.YNc(6,Ot,2,1,"ng-container",2),e.YNc(7,Tt,2,3,"div",4),e.YNc(8,Mt,1,1,"div",5),e.qZA()),2&t&&(e.xp6(2),e.ekj("form-floating","floating"===s.props.labelPosition)("has-error",s.showError),e.xp6(1),e.Q6J("ngIf","floating"!==s.props.labelPosition),e.xp6(3),e.Q6J("ngIf","floating"===s.props.labelPosition),e.xp6(1),e.Q6J("ngIf",s.showError),e.xp6(1),e.Q6J("ngIf",s.parsedDescription))},dependencies:[v.O5,v.tP,_.M2],encapsulation:2}),o})();var ot=h(8595);function Dt(o,l){1&o&&e.GkF(0)}function At(o,l){if(1&o&&(e.ynx(0),e._UZ(1,"div",13),e.TgZ(2,"div",14),e._uU(3," ("),e.YNc(4,Dt,1,0,"ng-container",15),e._uU(5,") "),e.qZA(),e.BQk()),2&o){const t=e.oxw(),s=e.MAs(15);e.xp6(1),e.Q6J("innerHTML",t.parsedTitle,e.oJD),e.xp6(3),e.Q6J("ngTemplateOutlet",s)}}function wt(o,l){1&o&&e.GkF(0)}function kt(o,l){if(1&o&&(e.TgZ(0,"div",16),e._uU(1," Lista di "),e.YNc(2,wt,1,0,"ng-container",15),e.qZA()),2&o){e.oxw();const t=e.MAs(15);e.xp6(2),e.Q6J("ngTemplateOutlet",t)}}function It(o,l){if(1&o&&e._UZ(0,"div",17),2&o){const t=e.oxw();e.Q6J("innerHTML",t.parsedDescription,e.oJD)}}const Pt=function(o){return{"mt-3":o}};function St(o,l){if(1&o&&(e.TgZ(0,"div",18),e._UZ(1,"formly-validation-message",19),e.qZA()),2&o){const t=e.oxw();e.Q6J("ngClass",e.VKq(2,Pt,t.parsedDescription.length)),e.xp6(1),e.Q6J("field",t.field)}}function Zt(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"li")(1,"div",30),e.NdJ("click",function(){e.CHM(t);const u=e.oxw().index,b=e.oxw(2);return e.KtG(b.move(u,u-1))}),e._uU(2," arrow_circle_up "),e.qZA()()}2&o&&(e.xp6(1),e.Q6J("disableOnTouchDevice",!0))}const nt=function(o){return{"ms-1":o}};function Jt(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"li",31)(1,"div",32),e.NdJ("click",function(){e.CHM(t);const u=e.oxw().index,b=e.oxw(2);return e.KtG(b.move(u,u+1))}),e._uU(2," arrow_circle_down "),e.qZA()()}if(2&o){const t=e.oxw().first;e.Q6J("ngClass",e.VKq(2,nt,!t)),e.xp6(1),e.Q6J("disableOnTouchDevice",!0)}}function Rt(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"li",31)(1,"div",33),e.NdJ("click",function(){e.CHM(t);const u=e.oxw().index,b=e.oxw(2);return e.KtG(b.remove(u))}),e._uU(2," highlight_off "),e.qZA()()}if(2&o){const t=e.oxw();e.Q6J("ngClass",e.VKq(2,nt,!(t.first&&t.last))),e.xp6(1),e.Q6J("disableOnTouchDevice",!0)}}const Lt=function(o){return{"mb-3":o}},rt=function(o){return{"has-error":o}};function Ut(o,l){if(1&o&&(e.TgZ(0,"li",22)(1,"fieldset",23)(2,"legend",24)(3,"div",25)(4,"div",26),e._uU(5),e.qZA(),e.TgZ(6,"ul",27),e.YNc(7,Zt,3,1,"li",28),e.YNc(8,Jt,3,4,"li",29),e.YNc(9,Rt,3,4,"li",29),e.qZA()()(),e._UZ(10,"formly-field",19),e.qZA()()),2&o){const t=l.$implicit,s=l.index,u=l.first,b=l.last;e.Q6J("ngClass",e.VKq(7,Lt,!b)),e.xp6(1),e.Q6J("ngClass",e.VKq(9,rt,null==t.formControl?null:t.formControl.invalid)),e.xp6(4),e.hij("#",s+1,""),e.xp6(2),e.Q6J("ngIf",!u),e.xp6(1),e.Q6J("ngIf",!b),e.xp6(1),e.Q6J("ngIf",t.props&&!1!==t.props.removable),e.xp6(1),e.Q6J("field",t)}}function Qt(o,l){if(1&o&&(e.TgZ(0,"ul",20),e.YNc(1,Ut,11,11,"li",21),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.field.fieldGroup)}}const jt=function(o){return{"d-none d-md-inline":o}};function Nt(o,l){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA(),e.TgZ(2,"span",31),e._uU(3),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.field.fieldGroup?t.field.fieldGroup.length:0),e.xp6(1),e.Q6J("ngClass",e.VKq(3,jt,t.props.label)),e.xp6(1),e.hij(" element",t.field.fieldGroup&&1===t.field.fieldGroup.length?"o":"i","")}}const Vt=function(){return[10,10]},Bt=function(o){return{placement:"top-end",offset:o}};let Yt=(()=>{class o extends _.hv{constructor(t){super(),this.customFormUtilsService=t,this.parsedTitle="",this.parsedDescription=""}ngOnInit(){this.parsedDescription=this.props.description?this.customFormUtilsService.parseBBCode(this.props.description):"",this.parsedTitle=this.props.label?this.customFormUtilsService.parseBBCode(this.props.label):""}get maxLengthExceeded(){return this.props.maxItems&&this.model&&this.model.length>=this.props.maxItems}move(t,s){const u=this.model[t];this.remove(t),this.add(s,u)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(be))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-array"]],features:[e.qOj],decls:16,vars:14,consts:[[1,"rounded","px-3","pb-3","pt-2","mb-3","formly-fieldset",3,"ngClass"],[1,"legend-reset","pb-1","px-2","mb-0","mw-100"],[1,"d-flex","align-items-center","mw-100"],[4,"ngIf","ngIfElse"],["nolabel",""],["class","mb-2 text-justify",3,"innerHTML",4,"ngIf"],["class","alert alert-danger formly-field-array-error text-center","role","alert",3,"ngClass",4,"ngIf"],["class","list-unstyled mb-3",4,"ngIf"],[1,"d-flex","flex-row-reverse"],["appTippy","Hai aggiunto il numero massimo di elementi!",3,"disableInstance","tippyProps"],["type","button",1,"btn","btn-primary","d-flex","align-items-center",3,"disabled","click"],[1,"material-icons"],["itemscount",""],[1,"fs-xl","text-truncate","mw-100",3,"innerHTML"],[1,"ms-2","fs-reset","lh-1","fst-italic","list-counter","text-nowrap"],[4,"ngTemplateOutlet"],[1,"fs-xl","text-truncate","mw-10"],[1,"mb-2","text-justify",3,"innerHTML"],["role","alert",1,"alert","alert-danger","formly-field-array-error","text-center",3,"ngClass"],[3,"field"],[1,"list-unstyled","mb-3"],["class","item",3,"ngClass",4,"ngFor","ngForOf"],[1,"item",3,"ngClass"],[1,"rounded","formly-fieldset","dashed","show-success","px-3",3,"ngClass"],[1,"legend-reset","ms-auto","mb-0","px-2"],[1,"d-flex","align-items-center"],[1,"fs-xl","ms-1"],[1,"ms-2","mb-0","item-icons","list-unstyled","d-flex","align-items-center"],[4,"ngIf"],[3,"ngClass",4,"ngIf"],["appTippy","Sposta in alto",1,"d-block","material-icons","cursor-pointer",3,"disableOnTouchDevice","click"],[3,"ngClass"],["appTippy","Sposta in basso",1,"d-block","material-icons","cursor-pointer",3,"disableOnTouchDevice","click"],["appTippy","Rimuovi",1,"d-block","material-icons","cursor-pointer","text-danger",3,"disableOnTouchDevice","click"]],template:function(t,s){if(1&t&&(e.TgZ(0,"fieldset",0)(1,"legend",1)(2,"div",2),e.YNc(3,At,6,2,"ng-container",3),e.YNc(4,kt,3,1,"ng-template",null,4,e.W1O),e.qZA()(),e.YNc(6,It,1,1,"div",5),e.YNc(7,St,2,4,"div",6),e.YNc(8,Qt,2,1,"ul",7),e.TgZ(9,"div",8)(10,"div",9)(11,"button",10),e.NdJ("click",function(){return!s.maxLengthExceeded&&s.add()}),e.TgZ(12,"span",11),e._uU(13,"add"),e.qZA()()()(),e.YNc(14,Nt,4,5,"ng-template",null,12,e.W1O),e.qZA()),2&t){const u=e.MAs(5);e.Q6J("ngClass",e.VKq(9,rt,s.formControl.invalid)),e.xp6(3),e.Q6J("ngIf",s.parsedTitle)("ngIfElse",u),e.xp6(3),e.Q6J("ngIf",s.parsedDescription),e.xp6(1),e.Q6J("ngIf",s.showError&&s.formControl.errors),e.xp6(1),e.Q6J("ngIf",s.field.fieldGroup&&s.field.fieldGroup.length),e.xp6(2),e.Q6J("disableInstance",!s.maxLengthExceeded)("tippyProps",e.VKq(12,Bt,e.DdM(11,Vt))),e.xp6(1),e.Q6J("disabled",s.maxLengthExceeded)}},dependencies:[v.mk,v.sg,v.O5,v.tP,_.cw,_.M2,ot.$],styles:["legend[_ngcontent-%COMP%]   .list-counter[_ngcontent-%COMP%]{padding-top:.175rem}legend[_ngcontent-%COMP%]   .item-icons[_ngcontent-%COMP%]{padding-top:.1rem}"]}),o})();function Gt(o,l){if(1&o&&e._UZ(0,"label",4),2&o){const t=e.oxw();e.Q6J("for",t.id)("innerHTML",t.parsedTitle,e.oJD)}}function Ht(o,l){1&o&&(e.TgZ(0,"span",5),e._uU(1," *"),e.qZA())}const Wt=function(o,l){return{"form-check-inline":o,"form-switch":l}};let qt=(()=>{class o extends w{constructor(t){super(),this.customFormUtilsService=t,this.defaultOptions={props:{indeterminate:!0,hideLabel:!0,formCheck:"default"}},this.parsedTitle=""}ngOnInit(){this.props.label&&"nolabel"!==this.props.formCheck&&(this.parsedTitle=this.customFormUtilsService.parseBBCode(this.props.label))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(be))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-custom-checkbox"]],features:[e.qOj],decls:4,vars:13,consts:[[1,"form-check",3,"ngClass"],["type","checkbox",1,"form-check-input",3,"indeterminate","formControl","formlyAttributes"],["class","form-check-label",3,"for","innerHTML",4,"ngIf"],["aria-hidden","true",4,"ngIf"],[1,"form-check-label",3,"for","innerHTML"],["aria-hidden","true"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"input",1),e.YNc(2,Gt,1,2,"label",2),e.YNc(3,Ht,2,0,"span",3),e.qZA()),2&t&&(e.Q6J("ngClass",e.WLB(10,Wt,"inline"===s.props.formCheck||"inline-switch"===s.props.formCheck,"switch"===s.props.formCheck||"inline-switch"===s.props.formCheck)),e.xp6(1),e.ekj("is-invalid",s.showError)("position-static","nolabel"===s.props.formCheck),e.Q6J("indeterminate",s.props.indeterminate&&null==s.formControl.value)("formControl",s.formControl)("formlyAttributes",s.field),e.xp6(1),e.Q6J("ngIf",s.parsedTitle),e.xp6(1),e.Q6J("ngIf",s.props.required&&!0!==s.props.hideRequiredMarker))},dependencies:[v.mk,v.O5,_.JD,y.Wl,y.JJ,y.oH],encapsulation:2,changeDetection:0}),o})();var $t=h(4020);function Kt(o,l){if(1&o&&(e.ynx(0),e.TgZ(1,"textarea",2),e._uU(2,"            "),e.qZA(),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("cols",1)("rows",10)("formlyAttributes",t.field)}}function zt(o,l){1&o&&(e.ynx(0),e.TgZ(1,"p",4),e._UZ(2,"span",5),e.qZA(),e.BQk())}function Xt(o,l){if(1&o&&e._UZ(0,"ngx-monaco-editor",6),2&o){const t=e.oxw(2);e.Udp("height",t.editorHeight),e.Q6J("options",t.editorOptions)("formControl",t.formControl)}}function eo(o,l){if(1&o&&(e.YNc(0,zt,3,0,"ng-container",0),e.YNc(1,Xt,1,4,"ng-template",null,3,e.W1O)),2&o){const t=e.MAs(2),s=e.oxw();e.Q6J("ngIf",s.loading)("ngIfElse",t)}}let to=(()=>{class o extends _.fS{constructor(){super(...arguments),this.touchDevice=$t.eX,this.editorOptions={theme:"vs-dark",language:"json"},this.loading=!0,this.editorHeight="350px"}ngOnInit(){this.touchDevice||(this.field.props.editorOptions&&(this.field.props.editorOptions.height&&(this.editorHeight=this.field.props.editorOptions.height,delete this.field.props.editorOptions.height),this.editorOptions=(0,j.Z)((0,j.Z)({},this.editorOptions),this.field.props.editorOptions)),this.loading=!1)}}return o.\u0275fac=function(){let l;return function(s){return(l||(l=e.n5z(o)))(s||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-code-editor-type"]],features:[e.qOj],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["notTouchDevice",""],[1,"form-control",3,"formControl","cols","rows","formlyAttributes"],["codeEditor",""],[1,"placeholder-glow"],[1,"placeholder","col-12","placeholder-lg"],[1,"d-block","formly-code-editor",3,"options","formControl"]],template:function(t,s){if(1&t&&(e.YNc(0,Kt,3,6,"ng-container",0),e.YNc(1,eo,3,2,"ng-template",null,1,e.W1O)),2&t){const u=e.MAs(2);e.Q6J("ngIf",s.touchDevice)("ngIfElse",u)}},dependencies:[v.O5,_.JD,y.Fj,y.JJ,xe,y.oH],encapsulation:2}),o})();function we(o,l){if(!isNaN(Number(l)))return o.getNext(o.getToday(),"d",Number(l))}function it(o,l,t){var s;const u=o.isValid(l)?l:we(o,l)||void 0;return{min:u,max:(t=o.isValid(t)?t:we(o,t)||void 0)&&(!u||null!==(s=F.qj.from(t))&&void 0!==s&&s.after(u))?t:void 0}}const oo=function(){return["bottom-end","top-end","auto"]};let no=(()=>{class o extends _.fS{constructor(t,s){super(),this.translateService=t,this.ngbCalendar=s,this.placeholder=this.translateService.instant("COMPONENTS.CUSTOM_FORM.DATEPICKER.DATE_FORMAT.PLACEHOLDER")}ngOnInit(){const t=this.field.props.startDate;!this.field.formControl.value&&typeof t<"u"&&this.field.formControl.setValue(we(this.ngbCalendar,t));const s=it(this.ngbCalendar,this.field.props.minDate,this.field.props.maxDate);this.field.props.minDate=s.min,this.field.props.maxDate=s.max}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(A.sK),e.Y36(F.vL))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-datepicker"]],features:[e.qOj],decls:7,vars:10,consts:[[1,"input-group"],["ngbDatepicker","",1,"form-control",3,"placeholder","formControl","formlyAttributes","minDate","maxDate","positionTarget","placement"],["d","ngbDatepicker"],["type","button",1,"btn","btn-outline-secondary","d-flex","align-items-center",3,"click"],["dpButton",""],[1,"material-icons-outlined","d-block"]],template:function(t,s){if(1&t){const u=e.EpF();e.TgZ(0,"div",0),e._UZ(1,"input",1,2),e.TgZ(3,"button",3,4),e.NdJ("click",function(){e.CHM(u);const J=e.MAs(2);return e.KtG(J.toggle())}),e.TgZ(5,"span",5),e._uU(6," calendar_month "),e.qZA()()()}if(2&t){const u=e.MAs(4);e.xp6(1),e.ekj("is-invalid",s.showError),e.Q6J("placeholder",s.placeholder)("formControl",s.formControl)("formlyAttributes",s.field)("minDate",s.field.props.minDate)("maxDate",s.field.props.maxDate)("positionTarget",u)("placement",e.DdM(9,oo))}},dependencies:[_.JD,y.Fj,y.JJ,F.J4,y.oH],encapsulation:2,changeDetection:0}),o})();var st=h(1088),lt=h(8645),at=h(9773),ro=h(2438),ct=h(3620),io=h(298);const so=["dpFromDate"],lo=["dpToDate"],ao=function(o,l){return{focused:o,"text-muted outside":l}};function co(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"span",16),e.NdJ("mouseenter",function(){const b=e.CHM(t).$implicit,J=e.oxw();return e.KtG(J.hoveredDate=b)})("mouseleave",function(){e.CHM(t);const u=e.oxw();return e.KtG(u.hoveredDate=null)}),e._uU(1),e.qZA()}if(2&o){const t=l.$implicit,s=l.focused,u=l.disabled,b=e.oxw();e.ekj("range",b.isRange(t))("faded",b.isHovered(t)||b.isInside(t)),e.Q6J("ngClass",e.WLB(6,ao,s,u)),e.xp6(1),e.hij(" ",t.day," ")}}const po=function(){return["bottom-end","top-end","auto"]};let uo=(()=>{class o extends _.fS{constructor(t,s,u,b,J,ee){super(),this.ngbCalendar=t,this.formatter=s,this.translateService=u,this.breakpointObserver=b,this.changeDetectorRef=J,this.datepickerAdapterService=ee,this.hoveredDate=null,this.fromDate=null,this.toDate=null,this.placeholder="",this.numberOfCalendar=1,this.componentDestroyed=new lt.x,this.placeholder=this.translateService.instant("COMPONENTS.CUSTOM_FORM.DATEPICKER.DATE_FORMAT.PLACEHOLDER")}ngOnInit(){this.field.validation=(0,j.Z)((0,j.Z)({},this.field.validation||{}),{},{show:!0}),this.breakpointObserver.observe([st.u3.XSmall]).pipe((0,at.R)(this.componentDestroyed)).subscribe(t=>{const s=t.matches?1:2;this.numberOfCalendar!==s&&(this.numberOfCalendar=s,this.changeDetectorRef.detectChanges())}),this.initialize()}initialize(){const t=it(this.ngbCalendar,this.field.props.minDate,this.field.props.maxDate);if(this.field.props.minDate=t.min,this.field.props.maxDate=t.max,this.maxRangeLength=this.field.props.maxLength&&this.field.props.maxLength>1?this.field.props.maxLength:void 0,this.field.formControl.value){const s=this.field.formControl.value;this.fromDate=s.start,this.toDate=s.end}else{const s=this.ngbCalendar.getPrev(this.ngbCalendar.getToday(),"d",6),u=this.ngbCalendar.getToday();this.fromDate=F.qj.from(we(this.ngbCalendar,this.field.props.startDate))||s;const b=F.qj.from(we(this.ngbCalendar,this.field.props.endDate));this.toDate=b&&b.after(this.fromDate)?b:u.after(this.fromDate)?u:this.ngbCalendar.getNext(this.fromDate,"d",6),this.updateFieldModel()}}ngAfterViewInit(){this.setInputEvent(this.fromDateInputRef.nativeElement,t=>{this.fromDate=t,this.updateFieldModel()}),this.setInputEvent(this.toDateInputRef.nativeElement,t=>{this.toDate=t,this.updateFieldModel()})}validateInput(t){const s=this.formatter.parse(t);return s&&this.ngbCalendar.isValid(F.qj.from(s))?F.qj.from(s):null}setInputEvent(t,s){(0,ro.R)(t,"input").pipe((0,at.R)(this.componentDestroyed),(0,ct.b)(1e3)).subscribe(()=>{if(!t.value)return void s(null);const u=this.validateInput(t.value);u?s(u):this.setFormControlError({invalid:t.value})})}onDateSelection(t,s=!1){!this.fromDate&&!this.toDate||s&&(!this.toDate||t.before(this.toDate))?this.fromDate=t:this.fromDate&&!this.toDate&&t&&t.after(this.fromDate)?this.toDate=t:(this.toDate=null,this.fromDate=t),this.updateFieldModel()}updateFieldModel(){this.field.formControl.setValue({start:this.fromDate,end:this.toDate}),this.checkFieldErrors()}checkFieldErrors(){var t,s;this.fromDate&&!this.toDate||this.toDate&&!this.fromDate?this.setFormControlError({range:!0}):!this.props.required||this.fromDate||this.toDate?this.field.props.minDate&&null!==(t=F.qj.from(this.field.props.minDate))&&void 0!==t&&t.after(this.fromDate)?this.setFormControlError({minDate:{minDate:this.field.props.minDate}}):this.field.props.maxDate&&null!==(s=F.qj.from(this.field.props.maxDate))&&void 0!==s&&s.before(this.toDate)?this.setFormControlError({maxDate:{maxDate:this.field.props.maxDate}}):this.setFormControlError(null):this.formControl.setErrors({required:!0}),this.fromDate&&this.toDate&&(this.toDate.before(this.fromDate)?this.setFormControlError({order:!0}):this.maxRangeLength&&this.datepickerAdapterService.toModel(this.toDate).getTime()-this.datepickerAdapterService.toModel(this.fromDate).getTime()>24*this.maxRangeLength*60*60*1e3&&this.setFormControlError({rangeLength:this.maxRangeLength}))}setFormControlError(t){this.formControl.setErrors(t?{ngbDate:t}:null)}isHovered(t){return this.fromDate&&!this.toDate&&this.hoveredDate&&t.after(this.fromDate)&&t.before(this.hoveredDate)}isInside(t){return this.toDate&&t.after(this.fromDate)&&t.before(this.toDate)}isRange(t){return t.equals(this.fromDate)||this.toDate&&t.equals(this.toDate)||this.isInside(t)||this.isHovered(t)}ngOnDestroy(){this.componentDestroyed.next(),this.componentDestroyed.complete()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(F.vL),e.Y36(N.z),e.Y36(A.sK),e.Y36(st.Yg),e.Y36(e.sBO),e.Y36(io.B))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-datepicker-range"]],viewQuery:function(t,s){if(1&t&&(e.Gf(so,5),e.Gf(lo,5)),2&t){let u;e.iGM(u=e.CRH())&&(s.fromDateInputRef=u.first),e.iGM(u=e.CRH())&&(s.toDateInputRef=u.first)}},features:[e.qOj],decls:23,vars:17,consts:[[1,"d-sm-flex"],[1,"flex-grow-1","me-sm-3"],[1,"dp-hidden","position-absolute"],[1,"input-group"],["name","datepicker","ngbDatepicker","","outsideDays","hidden","tabindex","-1",1,"form-control",3,"autoClose","displayMonths","dayTemplate","startDate","minDate","maxDate","positionTarget","placement","dateSelect"],["datepicker","ngbDatepicker"],["t",""],[1,"input-group-text"],["name","dpFromDate",1,"form-control",3,"placeholder","value"],["dpFromDate",""],["type","button",1,"btn","btn-outline-secondary","d-flex","align-items-center",3,"click"],["dpButton",""],[1,"material-icons-outlined","d-block"],[1,"flex-grow-1","mt-3","mt-sm-0"],["name","dpToDate",1,"form-control",3,"placeholder","value"],["dpToDate",""],[1,"custom-day",3,"ngClass","mouseenter","mouseleave"]],template:function(t,s){if(1&t){const u=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4,5),e.NdJ("dateSelect",function(J){return s.onDateSelection(J)}),e.qZA(),e.YNc(6,co,2,9,"ng-template",null,6,e.W1O),e.qZA()(),e.TgZ(8,"div",3)(9,"span",7),e._uU(10,"Dal:"),e.qZA(),e._UZ(11,"input",8,9),e.TgZ(13,"button",10,11),e.NdJ("click",function(){e.CHM(u);const J=e.MAs(5);return e.KtG(J.toggle())}),e.TgZ(15,"span",12),e._uU(16," calendar_month "),e.qZA()()()(),e.TgZ(17,"div",13)(18,"div",3)(19,"span",7),e._uU(20,"Al:"),e.qZA(),e._UZ(21,"input",14,15),e.qZA()()()}if(2&t){const u=e.MAs(7),b=e.MAs(14);e.xp6(4),e.Q6J("autoClose","outside")("displayMonths",s.numberOfCalendar)("dayTemplate",u)("startDate",s.fromDate)("minDate",s.field.props.minDate)("maxDate",s.field.props.maxDate)("positionTarget",b)("placement",e.DdM(16,po)),e.xp6(7),e.ekj("is-invalid",s.showError),e.Q6J("placeholder",s.placeholder)("value",s.formatter.format(s.fromDate)),e.xp6(10),e.ekj("is-invalid",s.showError),e.Q6J("placeholder",s.placeholder)("value",s.formatter.format(s.toDate))}},dependencies:[v.mk,F.J4],styles:[".dp-hidden[_ngcontent-%COMP%]{width:0;margin:0;border:none;padding:0}.custom-day[_ngcontent-%COMP%]{text-align:center;padding:.185rem .25rem;display:inline-block;height:2rem;width:2rem}.custom-day.outside[_ngcontent-%COMP%]{opacity:.5}.custom-day[_ngcontent-%COMP%]:not(.text-muted).range:not(.faded), .custom-day[_ngcontent-%COMP%]:not(.text-muted):not(.faded):hover{background-color:#4864fe!important;color:#fff;border-radius:.25rem;border:0!important}.custom-day[_ngcontent-%COMP%]:not(.text-muted).faded{background-color:#dae0ff}.custom-day[_ngcontent-%COMP%]:not(.text-muted):not(.range).focused{background-color:var(--ei-gray-100);border-radius:.25rem;border:1px solid #dee2e6}"],changeDetection:0}),o})();var Ce=h(5861),pt=h(8784);function mo(o,l){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",4),e.NdJ("click",function(){e.CHM(t);const u=e.oxw();return e.KtG(u.formControl.setValue(void 0))}),e._uU(2," highlight_off "),e.qZA(),e.BQk()}}function fo(o,l){1&o&&(e.ynx(0),e.TgZ(1,"p",5),e._UZ(2,"span",6),e.qZA(),e.BQk())}function ho(o,l){if(1&o&&e._UZ(0,"option",10),2&o){const t=l.$implicit;e.Q6J("ngValue",t.id||t.name)("innerText",t.name)}}function go(o,l){if(1&o&&(e.ynx(0),e.TgZ(1,"select",8),e.YNc(2,ho,1,2,"option",9),e.qZA(),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("formlyAttributes",t.field),e.xp6(1),e.Q6J("ngForOf",t.groupsList)}}function _o(o,l){if(1&o&&e._UZ(0,"option",10),2&o){const t=l.$implicit;e.Q6J("ngValue",t.id||t.name)("innerText",t.name)}}function yo(o,l){if(1&o&&(e.TgZ(0,"select",11),e.YNc(1,_o,1,2,"option",9),e.qZA()),2&o){const t=e.oxw(2);e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("formlyAttributes",t.field),e.xp6(1),e.Q6J("ngForOf",t.groupsList)}}function vo(o,l){if(1&o&&(e.YNc(0,go,3,5,"ng-container",2),e.YNc(1,yo,2,5,"ng-template",null,7,e.W1O)),2&o){const t=e.MAs(2),s=e.oxw();e.Q6J("ngIf",s.field.props.multiple)("ngIfElse",t)}}const Fo=function(o){return{"no-label":o}};let xo=(()=>{class o extends _.fS{constructor(t){super(),this.forumService=t,this.loading=!0,this.groupsList=[]}ngOnInit(){var t=this;return(0,Ce.Z)(function*(){t.field.defaultValue=void 0,t.field.props.hasOwnProperty("multiple")||(t.field.props.multiple=!0),t.groupsList=(yield t.forumService.getGroups()).sort((s,u)=>s.name.localeCompare(u.name)),t.field.props.keepGroupsWithoutId||(t.groupsList=t.groupsList.filter(s=>s.id>0)),t.loading=!1,t.field.formControl.updateValueAndValidity()})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(pt._))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-forum-groups"]],features:[e.qOj],decls:5,vars:6,consts:[[1,"position-relative","wrapper",3,"ngClass"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["formSelect",""],[1,"reset-icon","position-absolute","cursor-pointer","d-block","material-icons","text-danger",3,"click"],[1,"placeholder-glow"],[1,"placeholder","col-12","placeholder-lg"],["single",""],["multiple","",1,"form-select",3,"formControl","formlyAttributes"],[3,"ngValue","innerText",4,"ngFor","ngForOf"],[3,"ngValue","innerText"],[1,"form-select",3,"formControl","formlyAttributes"]],template:function(t,s){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,mo,3,0,"ng-container",1),e.YNc(2,fo,3,0,"ng-container",2),e.YNc(3,vo,3,2,"ng-template",null,3,e.W1O),e.qZA()),2&t){const u=e.MAs(4);e.Q6J("ngClass",e.VKq(4,Fo,!s.props.label)),e.xp6(1),e.Q6J("ngIf",!s.props.label||void 0!==s.formControl.value),e.xp6(1),e.Q6J("ngIf",s.loading)("ngIfElse",u)}},dependencies:[v.mk,v.sg,v.O5,_.JD,y.YN,y.Kr,y.EJ,y.K7,y.JJ,y.oH],styles:[".reset-icon[_ngcontent-%COMP%]{right:0}.wrapper[_ngcontent-%COMP%]:not(.no-label)   .reset-icon[_ngcontent-%COMP%]{top:calc(-24px - .45rem)}.no-label[_ngcontent-%COMP%]{padding-top:calc(24px + .45rem)}.no-label[_ngcontent-%COMP%]   .reset-icon[_ngcontent-%COMP%]{top:0}"]}),o})();function bo(o,l){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",4),e.NdJ("click",function(){e.CHM(t);const u=e.oxw();return e.KtG(u.formControl.setValue(void 0))}),e._uU(2," highlight_off "),e.qZA(),e.BQk()}}function Co(o,l){1&o&&(e.ynx(0),e.TgZ(1,"p",5),e._UZ(2,"span",6),e.qZA(),e.BQk())}function Oo(o,l){if(1&o&&(e.ynx(0),e._UZ(1,"option",10),e.BQk()),2&o){const t=l.$implicit;e.xp6(1),e.Q6J("ngValue",t.id)("innerHTML"," - "+t.name,e.oJD)}}function To(o,l){if(1&o&&(e.ynx(0),e.YNc(1,Oo,2,2,"ng-container",9),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.subsections)}}function Mo(o,l){if(1&o&&(e.ynx(0),e._UZ(1,"option",10),e.YNc(2,To,2,1,"ng-container",1),e.BQk()),2&o){const t=l.$implicit;e.xp6(1),e.Q6J("ngValue",t.id)("innerHTML",t.name,e.oJD),e.xp6(1),e.Q6J("ngIf",t.subsections&&t.subsections.length)}}function Eo(o,l){if(1&o&&(e.ynx(0),e._UZ(1,"option",10),e.BQk()),2&o){const t=l.$implicit;e.xp6(1),e.Q6J("ngValue",t)("innerHTML"," -- Sezione ristretta -- #"+t,e.oJD)}}function Do(o,l){if(1&o&&(e.ynx(0),e.YNc(1,Eo,2,2,"ng-container",9),e.BQk()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.restrictedOrDeletedSections)}}function Ao(o,l){if(1&o&&(e.ynx(0),e.TgZ(1,"select",8),e.YNc(2,Mo,3,3,"ng-container",9),e.YNc(3,Do,2,1,"ng-container",1),e.qZA(),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("formlyAttributes",t.field),e.xp6(1),e.Q6J("ngForOf",t.sectionsList),e.xp6(1),e.Q6J("ngIf",t.restrictedOrDeletedSections.length>0)}}function wo(o,l){if(1&o&&(e.ynx(0),e._UZ(1,"option",10),e.BQk()),2&o){const t=l.$implicit;e.xp6(1),e.Q6J("ngValue",t.id)("innerHTML"," - "+t.name,e.oJD)}}function ko(o,l){if(1&o&&(e.ynx(0),e.YNc(1,wo,2,2,"ng-container",9),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.subsections)}}function Io(o,l){if(1&o&&(e.ynx(0),e._UZ(1,"option",10),e.YNc(2,ko,2,1,"ng-container",1),e.BQk()),2&o){const t=l.$implicit;e.xp6(1),e.Q6J("ngValue",t.id)("innerHTML",t.name,e.oJD),e.xp6(1),e.Q6J("ngIf",t.subsections&&t.subsections.length)}}function Po(o,l){if(1&o&&(e.ynx(0),e._UZ(1,"option",10),e.BQk()),2&o){const t=l.$implicit;e.xp6(1),e.Q6J("ngValue",t)("innerHTML"," -- Sezione ristretta -- #"+t,e.oJD)}}function So(o,l){if(1&o&&(e.ynx(0),e.YNc(1,Po,2,2,"ng-container",9),e.BQk()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.restrictedOrDeletedSections)}}function Zo(o,l){if(1&o&&(e.TgZ(0,"select",11),e.YNc(1,Io,3,3,"ng-container",9),e.YNc(2,So,2,1,"ng-container",1),e.qZA()),2&o){const t=e.oxw(2);e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("formlyAttributes",t.field),e.xp6(1),e.Q6J("ngForOf",t.sectionsList),e.xp6(1),e.Q6J("ngIf",t.restrictedOrDeletedSections.length>0)}}function Jo(o,l){if(1&o&&(e.YNc(0,Ao,4,6,"ng-container",2),e.YNc(1,Zo,3,6,"ng-template",null,7,e.W1O)),2&o){const t=e.MAs(2),s=e.oxw();e.Q6J("ngIf",s.field.props.multiple)("ngIfElse",t)}}const Ro=function(o){return{"no-label":o}};let Lo=(()=>{class o extends _.fS{constructor(t){super(),this.forumService=t,this.loading=!0,this.sectionsList=[],this.restrictedOrDeletedSections=[]}ngOnInit(){var t=this;return(0,Ce.Z)(function*(){t.field.defaultValue=void 0,t.field.props.hasOwnProperty("multiple")||(t.field.props.multiple=!0),t.restrictedOrDeletedSections=Array.isArray(t.field.formControl.value)?[...t.field.formControl.value]:[];const s=yield t.forumService.getSections();t.sectionsList=s.map(u=>{const b=t.restrictedOrDeletedSections.indexOf(u.id);return b>-1&&t.restrictedOrDeletedSections.splice(b,1),(0,j.Z)((0,j.Z)({},u),{subsections:t.flattenSubsections(u)})}),t.loading=!1,t.field.formControl.updateValueAndValidity()})()}flattenSubsections(t){let s=[],u=-1;if(t.subsections&&t.subsections.length)for(const b of t.subsections)u=this.restrictedOrDeletedSections.indexOf(b.id),u>-1&&this.restrictedOrDeletedSections.splice(u,1),s.push(b),b.subsections&&(s=[...s,...this.flattenSubsections(b)]);return s}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(pt._))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-forum-sections"]],features:[e.qOj],decls:5,vars:6,consts:[[1,"position-relative","wrapper",3,"ngClass"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["formSelect",""],[1,"reset-icon","position-absolute","cursor-pointer","d-block","material-icons","text-danger",3,"click"],[1,"placeholder-glow"],[1,"placeholder","col-12","placeholder-lg"],["single",""],["multiple","",1,"form-select",3,"formControl","formlyAttributes"],[4,"ngFor","ngForOf"],[3,"ngValue","innerHTML"],[1,"form-select",3,"formControl","formlyAttributes"]],template:function(t,s){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,bo,3,0,"ng-container",1),e.YNc(2,Co,3,0,"ng-container",2),e.YNc(3,Jo,3,2,"ng-template",null,3,e.W1O),e.qZA()),2&t){const u=e.MAs(4);e.Q6J("ngClass",e.VKq(4,Ro,!s.props.label)),e.xp6(1),e.Q6J("ngIf",!s.props.label||void 0!==s.formControl.value),e.xp6(1),e.Q6J("ngIf",s.loading)("ngIfElse",u)}},dependencies:[v.mk,v.sg,v.O5,_.JD,y.YN,y.Kr,y.EJ,y.K7,y.JJ,y.oH],styles:[".reset-icon[_ngcontent-%COMP%]{right:0}.wrapper[_ngcontent-%COMP%]:not(.no-label)   .reset-icon[_ngcontent-%COMP%]{top:calc(-24px - .45rem)}.no-label[_ngcontent-%COMP%]{padding-top:calc(24px + .45rem)}.no-label[_ngcontent-%COMP%]   .reset-icon[_ngcontent-%COMP%]{top:0}"]}),o})();var Uo=h(3997),Qo=h(3019),jo=h(4664),No=h(2096);let dt=(()=>{class o{transform(t){let s=document.createElement("TEXTAREA");return s.innerHTML=t,s.value}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275pipe=e.Yjl({name:"decodeHtmlEntitites",type:o,pure:!0}),o})();var Vo=h(1410),Bo=h(7165),Yo=h(5661),Go=h(8418),Ho=h(4291),Wo=h(4929),qo=h(7291);function $o(o,l){1&o&&(e.TgZ(0,"span",8),e._uU(1,"*"),e.qZA())}function Ko(o,l){if(1&o&&(e.TgZ(0,"legend",5)(1,"label",6),e._uU(2),e.YNc(3,$o,2,0,"span",7),e.qZA()()),2&o){const t=e.oxw();e.xp6(1),e.s9C("for",t.id),e.xp6(1),e.hij(" ",t.props.label," "),e.xp6(1),e.Q6J("ngIf",t.props.required)}}function zo(o,l){1&o&&e.GkF(0)}function Xo(o,l){if(1&o&&e._UZ(0,"div",9),2&o){const t=e.oxw();e.Q6J("innerHTML",t.parsedDescription,e.oJD)}}function en(o,l){1&o&&(e.TgZ(0,"div",16)(1,"span",17),e._uU(2,"Loading..."),e.qZA()())}function tn(o,l){if(1&o&&(e.TgZ(0,"div",18),e._UZ(1,"formly-validation-message",19),e.qZA()),2&o){const t=e.oxw(2);e.Udp("display","block"),e.xp6(1),e.Q6J("field",t.field)}}function on(o,l){1&o&&e._UZ(0,"app-loader",20)}function nn(o,l){1&o&&e._UZ(0,"div",25),2&o&&e.Q6J("innerText","Nessun utente inserito!")}function rn(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"li")(1,"a",28)(2,"div",29),e.NdJ("click",function(u){const J=e.CHM(t).$implicit,ee=e.oxw(4);return e.KtG(ee.removeUser(J,u))}),e.TgZ(3,"div",30),e._uU(4," remove "),e.qZA()(),e._UZ(5,"img",31),e.ALo(6,"uploadsreplace"),e.qZA(),e._UZ(7,"a",32),e.qZA()}if(2&o){const t=l.$implicit,s=e.oxw(4);e.Gre("d-flex flex-column align-items-center user-",s.circuit,""),e.xp6(1),e.Q6J("href",s.baseUrl+t.uid.substring(2),e.LSH),e.xp6(1),e.Q6J("disableOnTouchDevice",!0),e.xp6(3),e.s9C("alt",t.nickname+"'s avatar"),e.Q6J("src",e.lcZ(6,9,t.avatar),e.LSH),e.xp6(2),e.Q6J("innerHTML",t.nickname,e.oJD)("href",s.baseUrl+t.uid.substring(2),e.LSH)}}function sn(o,l){if(1&o&&(e.TgZ(0,"ul",26),e.YNc(1,rn,8,11,"li",27),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.selectedUsers)}}const ln=function(o){return{"empty-list":o}};function an(o,l){if(1&o&&(e.TgZ(0,"fieldset",21)(1,"legend",22),e._uU(2," Lista utenti "),e.qZA(),e.YNc(3,nn,1,1,"div",23),e.YNc(4,sn,2,1,"ng-template",null,24,e.W1O),e.qZA()),2&o){const t=e.MAs(5),s=e.oxw(2);e.Q6J("ngClass",e.VKq(3,ln,0===s.selectedUsers.length)),e.xp6(3),e.Q6J("ngIf",0===s.selectedUsers.length)("ngIfElse",t)}}function cn(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",10)(1,"input",11),e.NdJ("ngModelChange",function(u){e.CHM(t);const b=e.oxw();return e.KtG(b.inputValue=u)})("selectItem",function(u){e.CHM(t);const b=e.oxw();return e.KtG(b.selectUser(u))})("focus",function(u){e.CHM(t);const b=e.oxw();return e.KtG(b.focus.next(u.target.value))}),e.qZA(),e.YNc(2,en,3,0,"div",12),e.qZA(),e.YNc(3,tn,2,3,"div",13),e.YNc(4,on,1,0,"app-loader",14),e.YNc(5,an,6,5,"ng-template",null,15,e.W1O)}if(2&o){const t=e.MAs(6),s=e.oxw();e.xp6(1),e.ekj("is-invalid",s.showError),e.Q6J("ngModel",s.inputValue)("formlyAttributes",s.field)("ngbTypeahead",s.search)("editable",!1)("inputFormatter",s.inputFormatter)("resultFormatter",s.outputFormatter),e.xp6(1),e.Q6J("ngIf",s.searching),e.xp6(1),e.Q6J("ngIf",s.showError),e.xp6(1),e.Q6J("ngIf",s.loading)("ngIfElse",t)}}let pn=(()=>{class o extends _.fS{constructor(t,s,u,b,J,ee){var te;if(super(),this.userService=t,this.globalsService=s,this.changeDetectorRef=u,this.toastService=b,this.customFormUtilsService=J,this.decodeHtmlEntitiesPipe=ee,this.inputValue="",this.selectedUsers=[],this.loading=!0,this.searching=!1,this.focus=new lt.x,this.parsedDescription="",this.formlyFieldValues=[],this.lastSearchedValueWithoutResult="",this.outputFormatter=se=>se?se.nickname.indexOf("&")>-1?this.decodeHtmlEntitiesPipe.transform(se.nickname):se.nickname:"",this.search=se=>{const tt=se.pipe((0,ct.b)(1e3),(0,Uo.x)());return(0,Qo.T)(tt,this.focus).pipe((0,ce.b)(()=>this.setSearching(!0)),(0,jo.w)(ut=>ut.length<3?(0,No.of)([]):this.getUsers(ut)),(0,ce.b)(()=>this.setSearching(!1)))},this.circuit=(null===(te=this.globalsService.credentials)||void 0===te?void 0:te.site.short)||"",!this.circuit)throw new Error("Missing credentials!");this.baseUrl=Bo.hD[this.circuit]+"/?act=Profile&MID="}ngOnInit(){var t=this;return(0,Ce.Z)(function*(){t.parsedDescription=t.props.description?t.customFormUtilsService.parseBBCode(t.props.description):"",t.formlyFieldValues=Array.isArray(t.formControl.value)?t.formControl.value:Array.isArray(t.field.defaultValue)?t.field.defaultValue:[],yield t.getSelectedUsersFromApi(),t.loading=!1,t.formControl.updateValueAndValidity(),t.formControl.registerOnChange(()=>{t.formControlChangeCallback()})})()}inputFormatter(t){return t.nickname}getUsers(t){var s=this;return(0,Ce.Z)(function*(){if(s.lastSearchedValueWithoutResult&&0===t.indexOf(s.lastSearchedValueWithoutResult))return[];const u=yield s.userService.searchUserByName(t);return 0===u.length&&(s.lastSearchedValueWithoutResult=t),u})()}setSearching(t){this.searching=t,this.changeDetectorRef.detectChanges()}selectUser(t){const s=t.item,u=Number(s.uid.substring(2));if(this.formlyFieldValues.includes(u))return this.toastService.show({content:`L'utente <strong>${s.nickname}</strong> \xe8 gi\xe0 stato aggiunto alla lista!`}),void(this.inputValue="");this.formlyFieldValues.push(u),this.selectedUsers.push(s),t.preventDefault(),this.inputValue="",this.formControl.setValue([...this.formlyFieldValues])}removeUser(t,s){s.preventDefault(),s.stopPropagation();const u=Number(t.uid.substring(2));this.formlyFieldValues=this.formlyFieldValues.filter(b=>b!==u),this.selectedUsers=this.selectedUsers.filter(b=>b.uid!==t.uid),this.formControl.setValue([...this.formlyFieldValues])}formControlChangeCallback(){var t=this;return(0,Ce.Z)(function*(){if(!Array.isArray(t.formControl.value))return;let s=!1;if(t.formControl.value.length!==t.formlyFieldValues.length)s=!0;else for(const u of t.formControl.value)if(!t.formlyFieldValues.includes(u)){s=!0;break}s&&(t.formlyFieldValues=t.formControl.value,t.loading=!0,t.changeDetectorRef.detectChanges(),yield t.getSelectedUsersFromApi(),t.loading=!1,t.changeDetectorRef.detectChanges())})()}getSelectedUsersFromApi(){var t=this;return(0,Ce.Z)(function*(){t.selectedUsers=0!==t.formlyFieldValues.length?(yield t.userService.getDetailsFromUids(t.formlyFieldValues.map(s=>t.circuit+s))).sort((s,u)=>s.nickname>u.nickname?1:u.nickname>s.nickname?-1:0):[]})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Go.K),e.Y36(Vo.d),e.Y36(e.sBO),e.Y36(Yo.k),e.Y36(be),e.Y36(dt))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-forum-users"]],features:[e._Bn([dt]),e.qOj],decls:6,vars:5,consts:[[1,"mb-3","rounded","px-3","pt-2","pb-3","formly-fieldset"],["class","legend-reset fs-reset mb-0 px-2 mw-100 lh-1 py-1",4,"ngIf"],[4,"ngTemplateOutlet"],["class","form-text text-muted",3,"innerHTML",4,"ngIf"],["fieldContet",""],[1,"legend-reset","fs-reset","mb-0","px-2","mw-100","lh-1","py-1"],[1,"form-label","mb-0","mw-100","text-truncate",3,"for"],["aria-hidden","true",4,"ngIf"],["aria-hidden","true"],[1,"form-text","text-muted",3,"innerHTML"],[1,"position-relative"],["type","text","container","body",1,"form-control",3,"ngModel","formlyAttributes","ngbTypeahead","editable","inputFormatter","resultFormatter","ngModelChange","selectItem","focus"],["class","spinner-border spinner-border-sm text-primary position-absolute","role","status",4,"ngIf"],["class","invalid-feedback",3,"display",4,"ngIf"],["message","Recupero utenti","class","d-block mt-3",4,"ngIf","ngIfElse"],["userList",""],["role","status",1,"spinner-border","spinner-border-sm","text-primary","position-absolute"],[1,"visually-hidden"],[1,"invalid-feedback"],[3,"field"],["message","Recupero utenti",1,"d-block","mt-3"],[1,"formly-user-list-container","rounded","px-3","pt-2","mb-3","mt-2",3,"ngClass"],[1,"legend-reset","fs-reset","mb-0","px-2","pb-1"],["class","alert alert-primary text-center mb-0 fw-bold",3,"innerText",4,"ngIf","ngIfElse"],["noEmpty",""],[1,"alert","alert-primary","text-center","mb-0","fw-bold",3,"innerText"],[1,"formly-user-list","list-unstyled","mb-0","d-grid","px-2"],[3,"class",4,"ngFor","ngForOf"],["target","_blank",1,"avatar-container","rounded-circle","d-block","position-relative",3,"href"],["appTippy","Rimuovi",1,"remove-user","alert","alert-danger","position-absolute","cursor-pointer","mb-0","py-0","px-1",3,"disableOnTouchDevice","click"],[1,"material-icons","d-block","fs-reset"],["appImage","",1,"d-block","image-cover","rounded-circle",3,"src","alt"],["target","_blank",1,"d-block","fw-bold","mt-1","nickname","text-truncate","mw-100",3,"innerHTML","href"]],template:function(t,s){if(1&t&&(e.TgZ(0,"fieldset",0),e.YNc(1,Ko,4,3,"legend",1),e.YNc(2,zo,1,0,"ng-container",2),e.YNc(3,Xo,1,1,"div",3),e.qZA(),e.YNc(4,cn,7,12,"ng-template",null,4,e.W1O)),2&t){const u=e.MAs(5);e.ekj("has-error",s.formControl.invalid),e.xp6(1),e.Q6J("ngIf",s.props.label),e.xp6(1),e.Q6J("ngTemplateOutlet",u),e.xp6(1),e.Q6J("ngIf",s.parsedDescription)}},dependencies:[v.mk,v.sg,v.O5,v.tP,_.JD,_.M2,y.Fj,y.JJ,y.On,Ho.t,Wo.R,F.dR,ot.$,qo.g],styles:[".spinner-border[_ngcontent-%COMP%]{top:calc(50% - 8px);right:10px}fieldset.formly-user-list-container[_ngcontent-%COMP%]{border:1px dashed var(--ei-gray-500)}fieldset.formly-user-list-container[_ngcontent-%COMP%]:not(.empty-list){padding-bottom:.75rem}fieldset.formly-user-list-container.empty-list[_ngcontent-%COMP%]{padding-bottom:1rem}.formly-user-list[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(60px,1fr));gap:1rem}.formly-user-list[_ngcontent-%COMP%]   .remove-user[_ngcontent-%COMP%]{top:0;left:-8px}.formly-user-list[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{width:60px;height:60px;border:2px solid}.formly-user-list[_ngcontent-%COMP%]   .user-ff[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{border-color:#58a72e}.formly-user-list[_ngcontent-%COMP%]   .user-ff[_ngcontent-%COMP%]   .nickname[_ngcontent-%COMP%]{color:#58a72e!important}.formly-user-list[_ngcontent-%COMP%]   .user-fc[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{border-color:#0082cd}.formly-user-list[_ngcontent-%COMP%]   .user-fc[_ngcontent-%COMP%]   .nickname[_ngcontent-%COMP%]{color:#0082cd!important}.formly-user-list[_ngcontent-%COMP%]   .user-bf[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{border-color:#e67f22}.formly-user-list[_ngcontent-%COMP%]   .user-bf[_ngcontent-%COMP%]   .nickname[_ngcontent-%COMP%]{color:#e67f22!important}@media (min-width: 960px){.formly-user-list[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(75px,1fr));gap:1.5rem}.formly-user-list[_ngcontent-%COMP%]   .remove-user[_ngcontent-%COMP%]{top:4px}.formly-user-list[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{width:75px;height:75px}}"]}),o})(),dn=(()=>{class o extends _.fS{constructor(){super(...arguments),this.defaultOptions={props:{label:""}}}}return o.\u0275fac=function(){let l;return function(s){return(l||(l=e.n5z(o)))(s||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-label"]],features:[e.qOj],decls:2,vars:1,template:function(t,s){1&t&&(e.TgZ(0,"h5"),e._uU(1),e.qZA()),2&t&&(e.xp6(1),e.Oqu(s.props.label))},encapsulation:2,changeDetection:0}),o})();function un(o,l){if(1&o&&(e.TgZ(0,"legend"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.props.label)}}function mn(o,l){if(1&o&&e._UZ(0,"p",5),2&o){const t=e.oxw();e.Q6J("innerHTML",t.parsedDescription,e.oJD)}}function fn(o,l){if(1&o&&(e.TgZ(0,"div",6),e._UZ(1,"formly-validation-message",7),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("field",t.field)}}function hn(o,l){1&o&&e._UZ(0,"formly-field",7),2&o&&e.Q6J("field",l.$implicit)}let gn=(()=>{class o extends _.fS{constructor(t){super(),this.customForumUtilsService=t,this.parsedDescription=""}ngOnInit(){this.props.description&&(this.parsedDescription=this.customForumUtilsService.parseBBCode(this.props.description))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(be))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-multi-schema"]],features:[e.qOj],decls:5,vars:4,consts:[[1,"pt-3","px-3","rounded","border","mt-2"],[4,"ngIf"],[3,"innerHTML",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],[3,"field",4,"ngFor","ngForOf"],[3,"innerHTML"],["role","alert",1,"alert","alert-danger"],[3,"field"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e.YNc(1,un,2,1,"legend",1),e.YNc(2,mn,1,1,"p",2),e.YNc(3,fn,2,1,"div",3),e.YNc(4,hn,1,1,"formly-field",4),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",s.props.label),e.xp6(1),e.Q6J("ngIf",s.parsedDescription),e.xp6(1),e.Q6J("ngIf",s.showError&&s.formControl.errors),e.xp6(1),e.Q6J("ngForOf",s.field.fieldGroup))},dependencies:[v.sg,v.O5,_.cw,_.M2],encapsulation:2}),o})();function _n(o,l){if(1&o&&(e.TgZ(0,"legend",6),e._UZ(1,"div",7),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("innerHTML",t.parsedTitle,e.oJD)}}function yn(o,l){1&o&&e.GkF(0)}const vn=function(o){return{"has-error":o}};function Fn(o,l){if(1&o&&(e.TgZ(0,"fieldset",3),e.YNc(1,_n,2,1,"legend",4),e.YNc(2,yn,1,0,"ng-container",5),e.qZA()),2&o){const t=e.oxw(),s=e.MAs(4);e.Q6J("ngClass",e.VKq(3,vn,t.formControl.invalid)),e.xp6(1),e.Q6J("ngIf",t.parsedTitle),e.xp6(1),e.Q6J("ngTemplateOutlet",s)}}function xn(o,l){if(1&o&&e._UZ(0,"div",10),2&o){const t=e.oxw(2);e.Q6J("innerHTML",t.parsedTitle,e.oJD)}}function bn(o,l){1&o&&e.GkF(0)}function Cn(o,l){if(1&o&&(e.TgZ(0,"div",8),e.YNc(1,xn,1,1,"div",9),e.YNc(2,bn,1,0,"ng-container",5),e.qZA()),2&o){const t=e.oxw(),s=e.MAs(4);e.xp6(1),e.Q6J("ngIf",t.parsedTitle),e.xp6(1),e.Q6J("ngTemplateOutlet",s)}}function On(o,l){if(1&o&&e._UZ(0,"p",14),2&o){const t=e.oxw(2);e.Q6J("innerHTML",t.parsedDescription,e.oJD)}}function Tn(o,l){if(1&o&&(e.TgZ(0,"div",15),e._UZ(1,"formly-validation-message",16),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("field",t.field)}}function Mn(o,l){1&o&&e._UZ(0,"formly-field",16),2&o&&e.Q6J("field",l.$implicit)}function En(o,l){if(1&o&&(e.YNc(0,On,1,1,"p",11),e.YNc(1,Tn,2,1,"div",12),e.YNc(2,Mn,1,1,"formly-field",13)),2&o){const t=e.oxw();e.Q6J("ngIf",t.parsedDescription),e.xp6(1),e.Q6J("ngIf",t.showError&&t.formControl.errors),e.xp6(1),e.Q6J("ngForOf",t.field.fieldGroup)}}let Dn=(()=>{class o extends _.fS{constructor(t){super(),this.customFormUtilsService=t,this.parsedTitle="",this.parsedDescription=""}ngOnInit(){this.parsedDescription=this.props.description?this.customFormUtilsService.parseBBCode(this.props.description):"",this.parsedTitle=this.props.label?this.customFormUtilsService.parseBBCode(this.props.label):""}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(be))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-object"]],features:[e.qOj],decls:5,vars:2,consts:[["class","px-3 mb-3 pt-1 rounded formly-fieldset",3,"ngClass",4,"ngIf","ngIfElse"],["noFieldset",""],["objectFieldContent",""],[1,"px-3","mb-3","pt-1","rounded","formly-fieldset",3,"ngClass"],["class","legend-reset fs-xl px-2 mb-0 pb-1 mw-100 d-flex align-items-center",4,"ngIf"],[4,"ngTemplateOutlet"],[1,"legend-reset","fs-xl","px-2","mb-0","pb-1","mw-100","d-flex","align-items-center"],[1,"mw-100","text-truncate",3,"innerHTML"],[1,"mb-3"],["class","h4",3,"innerHTML",4,"ngIf"],[1,"h4",3,"innerHTML"],["class","text-justify mt-2",3,"innerHTML",4,"ngIf"],["class","alert alert-danger formly-field-object-error text-center","role","alert",4,"ngIf"],[3,"field",4,"ngFor","ngForOf"],[1,"text-justify","mt-2",3,"innerHTML"],["role","alert",1,"alert","alert-danger","formly-field-object-error","text-center"],[3,"field"]],template:function(t,s){if(1&t&&(e.YNc(0,Fn,3,5,"fieldset",0),e.YNc(1,Cn,3,2,"ng-template",null,1,e.W1O),e.YNc(3,En,3,3,"ng-template",null,2,e.W1O)),2&t){const u=e.MAs(2);e.Q6J("ngIf",s.props.fieldsetTemplate)("ngIfElse",u)}},dependencies:[v.mk,v.sg,v.O5,v.tP,_.cw,_.M2],encapsulation:2}),o})(),An=(()=>{class o extends _.fS{constructor(){super(...arguments),this.defaultOptions={props:{cols:1,rows:10}}}}return o.\u0275fac=function(){let l;return function(s){return(l||(l=e.n5z(o)))(s||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-textarea"]],features:[e.qOj],decls:2,vars:6,consts:[[1,"form-control",3,"formControl","cols","rows","formlyAttributes"]],template:function(t,s){1&t&&(e.TgZ(0,"textarea",0),e._uU(1,"        "),e.qZA()),2&t&&(e.ekj("is-invalid",s.showError),e.Q6J("formControl",s.formControl)("cols",s.props.cols)("rows",s.props.rows)("formlyAttributes",s.field))},dependencies:[_.JD,y.Fj,y.JJ,y.oH],encapsulation:2,changeDetection:0}),o})();function In(o,l){return`Questo campo deve avere almeno ${l.props.minLength} caratteri`}function Pn(o,l){return`Questo campo pu\xf2 avere al massimo ${l.props.maxLength} caratteri`}function Sn(o,l){return`Questo campo deve avere un valore minimo di ${l.props.min}`}function Zn(o,l){return`Questo campo pu\xf2 avere un valore massimo di ${l.props.max}`}function Jn(){return"Il campo non rispetta lo schema richiesto"}function Rn(o,l){return`Questo campo deve avere almeno ${l.props.minItems} element${1===l.props.minItems?"o":"i"}!`}function Ln(o,l){return`Questo campo pu\xf2 avere al massimo ${l.props.maxItems} element${1===l.props.maxItems?"o":"i"}!`}function Un(o,l){return`Questo campo deve essere un multiplo di ${l.props.step}`}function jn(){const o=(0,e.f3M)(e.lqb);return{extras:{renderFormlyFieldElement:!1},wrappers:[{name:"form-field",component:Et}],validationMessages:[{name:"required",message:"Compila questo campo!"},{name:"minLength",message:In},{name:"maxLength",message:Pn},{name:"min",message:Sn},{name:"max",message:Zn},{name:"minItems",message:Rn},{name:"maxItems",message:Ln},{name:"multipleOf",message:Un},{name:"pattern",message:Jn},{name:"uniqueItems",message:"Non possono esserci elementi uguali fra loro!"},{name:"ngbDate",message:l=>(0,e.r_H)(o,()=>function Qn(o){const l=(0,e.f3M)(N.z);return o.invalid?`La data "${o.invalid}" non rispetta il formato richiesto o non \xe8 valida!`:o.minDate?`La data deve essere successiva o uguale al ${l.format(o.minDate.minDate)}!`:o.maxDate?`La data deve essere precedente o uguale al ${l.format(o.maxDate.maxDate)}!`:o.range?"Devono essere specificate sia la data di inizio che la data di fine del periodo!":o.order?"La data di inzio non pu\xf2 essere successiva alla data di fine!":o.rangeLength?`Il periodo non pu\xf2 essere maggiore di ${o.rangeLength} giorni!`:"La data inserita non \xe8 valida!"}(l))}],types:[{name:"array",component:Yt},{name:"code-editor",component:to,wrappers:["form-field"]},{name:"object",component:Dn},{name:"textarea",component:An},{name:"forum-groups",component:xo,wrappers:["form-field"]},{name:"forum-sections",component:Lo,wrappers:["form-field"]},{name:"label",component:dn},{name:"forum-users",component:pn},{name:"multischema",component:gn},{name:"boolean",component:qt,wrappers:["form-field"]},{name:"datepicker",component:no,wrappers:["form-field"]},{name:"datepicker-range",component:uo,wrappers:["form-field"]}]}}var Nn=h(3038),Vn=h(5778);let Bn=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[{provide:_.l7,multi:!0,useFactory:jn}],imports:[v.ez,me,a,_.X0.forRoot(),y.u5,p.$,d.q,mt,F.ZS,y.UX,Nn.G,Vn.g]}),o})()},298:(_e,oe,h)=>{h.d(oe,{B:()=>F});var v=h(3946),N=h(5879);let F=(()=>{class e{constructor(){}fromModel(I){return v.qj.from({year:I.getUTCFullYear(),month:I.getUTCMonth()+1,day:I.getUTCDate()})}toModel(I){const _=new Date(Date.UTC(I.year,I.month-1,I.day));return _.setUTCFullYear(I.year),_}}return e.\u0275fac=function(I){return new(I||e)},e.\u0275prov=N.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},8345:(_e,oe,h)=>{h.d(oe,{z:()=>e});var v=h(3946),N=h(5879),F=h(9515);let e=(()=>{class A extends v.NG{constructor(_){super(),this.translateService=_,this.DELIMITER="/"}parse(_){if(_){const y=_.split(this.DELIMITER);return{day:parseInt(y[0],10),month:parseInt(y[1],10),year:parseInt(y[2],10)}}return null}format(_,y="FULL"){return _?this.translateService.instant(`COMPONENTS.CUSTOM_FORM.DATEPICKER.DATE_FORMAT.REPLACER.${y}`,{day:_.day<10?`0${_.day}`:_.day,month:_.month<10?`0${_.month}`:_.month,year:_.year}):""}formatShort(_){return this.format(_,"SHORT")}}return A.\u0275fac=function(_){return new(_||A)(N.LFG(F.sK))},A.\u0275prov=N.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})()},336:(_e,oe,h)=>{h.d(oe,{c:()=>le});var v=h(9376),N=h(91),F=h(1413),e=h(5879),A=h(6223),I=h(5545),_=h(9397);const y=["key"],me=["allOf"];function L(M){return""===M||null==M}function K(M){return null!=M&&"object"==typeof M&&!Array.isArray(M)}function x(M){return Number.isInteger?Number.isInteger(M):"number"==typeof M&&Math.floor(M)===M}function k(M){return"object"==typeof M&&(M.hasOwnProperty("const")||M.enum&&1===M.enum.length)}function H(M){if(!M.fieldGroup)return(0,I._S)(M)&&void 0!==(0,I.Hl)(M)?1:0;const q=M.fieldGroup.reduce((m,O)=>H(O)+m,0);if(0===q&&(0,I._S)(M)){const m=(0,I.Hl)(M);if(null===m||void 0!==m&&(M.fieldArray&&Array.isArray(m)||!M.fieldArray&&K(m)))return 1}return q}let le=(()=>{class M{toFieldConfig(m,O){return this._toFieldConfig(m,(0,F.Z)({schema:m},O||{}))}_toFieldConfig(m,O){var w;let{key:S}=O,C=(0,N.Z)(O,y);m=this.resolveSchema(m,C);const P=this.guessSchemaType(m);let g={type:P[0],defaultValue:m.default,props:{label:m.title,readonly:m.readOnly,description:m.description}};switch(null!=S&&(g.key=S),!C.ignoreDefault&&(m.readOnly||C.readOnly)&&(g.props.disabled=!0,C=(0,F.Z)((0,F.Z)({},C),{},{readOnly:!0})),C.resetOnHide&&(g.resetOnHide=!0),S&&C.strict&&this.addValidator(g,"type",(T,R)=>{const D=(0,I.Hl)(R);if(null!=D)switch(g.type){case"string":return"string"==typeof D;case"integer":return x(D);case"number":return"number"==typeof D;case"object":return K(D);case"array":return Array.isArray(D)}return!0}),!1===C.shareFormControl&&(g.shareFormControl=!1),C.ignoreDefault&&delete g.defaultValue,this.addValidator(g,"type",{schemaType:P,expression:({value:T})=>{if(void 0===T||null===T&&-1!==P.indexOf("null"))return!0;switch(P[0]){case"null":return null===typeof T;case"string":return"string"==typeof T;case"integer":return x(T);case"number":return"number"==typeof T;case"object":return K(T);case"array":return Array.isArray(T)}return!0}}),g.type){case"number":case"integer":g.parsers=[T=>L(T)?void 0:Number(T)],m.hasOwnProperty("minimum")&&(g.props.min=m.minimum),m.hasOwnProperty("maximum")&&(g.props.max=m.maximum),m.hasOwnProperty("exclusiveMinimum")&&(g.props.exclusiveMinimum=m.exclusiveMinimum,this.addValidator(g,"exclusiveMinimum",({value:T})=>L(T)||T>m.exclusiveMinimum)),m.hasOwnProperty("exclusiveMaximum")&&(g.props.exclusiveMaximum=m.exclusiveMaximum,this.addValidator(g,"exclusiveMaximum",({value:T})=>L(T)||T<m.exclusiveMaximum)),m.hasOwnProperty("multipleOf")&&(g.props.step=m.multipleOf,this.addValidator(g,"multipleOf",({value:T})=>{if(L(T)||"number"!=typeof T||0===T||m.multipleOf<=0)return!0;const R=Math.pow(10,function fe(M){if(!isFinite(M))return 0;let q=1,m=0;for(;Math.round(M*q)/q!==M;)q*=10,m++;return m}(m.multipleOf));return Math.round(T*R)%Math.round(m.multipleOf*R)==0}));break;case"string":g.parsers=[T=>(-1!==P.indexOf("null")?T=L(T)?null:T:g.props.required||(T=""===T?void 0:T),T)],["minLength","maxLength","pattern"].forEach(T=>{m.hasOwnProperty(T)&&(g.props[T]=m[T])});break;case"object":{g.fieldGroup||(g.fieldGroup=[]);const{propDeps:T,schemaDeps:R}=this.resolveDependencies(m);Object.keys(m.properties||{}).forEach(D=>{const W=Array.isArray(m.required)&&-1!==m.required.indexOf(D),Z=this._toFieldConfig(m.properties[D],(0,F.Z)((0,F.Z)({},C),{},{key:D,isOptional:C.isOptional||!W}));if(g.fieldGroup.push(Z),(W||T[D])&&(Z.expressions=(0,F.Z)((0,F.Z)({},Z.expressions||{}),{},{"props.required":V=>{let B=V.parent;const U=V.fieldGroup&&null!=V.key?B.model:V.model;for(;null==B.key&&B.parent;)B=B.parent;return!!(U||B&&B.props&&B.props.required)&&(!(!Array.isArray(m.required)||-1===m.required.indexOf(D))||T[D]&&V.model&&T[D].some($=>!L(V.model[$])))}})),R[D]){const V=U=>U.hasOwnProperty("const")?U.const:U.enum[0],B=R[D].oneOf;B&&B.every(U=>U.properties&&U.properties[D]&&k(U.properties[D]))?B.forEach(U=>{const ce=U.properties,{[D]:$}=ce,ne=(0,N.Z)(ce,[D].map(v.Z));g.fieldGroup.push((0,F.Z)((0,F.Z)({},this._toFieldConfig((0,F.Z)((0,F.Z)({},U),{},{properties:ne}),(0,F.Z)((0,F.Z)({},C),{},{resetOnHide:!0}))),{},{expressions:{hide:re=>!re.model||V($)!==re.model[D]}}))}):g.fieldGroup.push((0,F.Z)((0,F.Z)({},this._toFieldConfig(R[D],C)),{},{expressions:{hide:U=>!U.model||L(U.model[D])}}))}}),m.oneOf&&g.fieldGroup.push(this.resolveMultiSchema("oneOf",m.oneOf,(0,F.Z)((0,F.Z)({},C),{},{shareFormControl:!1}))),m.anyOf&&g.fieldGroup.push(this.resolveMultiSchema("anyOf",m.anyOf,C));break}case"array":m.hasOwnProperty("minItems")&&(g.props.minItems=m.minItems,this.addValidator(g,"minItems",(T,R)=>{const D=(0,I.Hl)(R);return L(D)||D.length>=m.minItems}),!C.isOptional&&m.minItems>0&&void 0===g.defaultValue&&(g.defaultValue=Array.from(new Array(m.minItems)))),m.hasOwnProperty("maxItems")&&(g.props.maxItems=m.maxItems,this.addValidator(g,"maxItems",(T,R)=>{const D=(0,I.Hl)(R);return L(D)||D.length<=m.maxItems})),m.hasOwnProperty("uniqueItems")&&(g.props.uniqueItems=m.uniqueItems,this.addValidator(g,"uniqueItems",(T,R)=>{const D=(0,I.Hl)(R);return!(!L(D)&&m.uniqueItems)||Array.from(new Set(D.map(Z=>JSON.stringify(Z)))).length===D.length})),m.items&&!Array.isArray(m.items)&&(m.items=this.resolveSchema(m.items,C)),this.isEnum(m)||(g.fieldArray=T=>{if(!Array.isArray(m.items)){const Z=m.items?this._toFieldConfig(m.items,C):{};return Z.props&&(Z.props.required=!0),Z}const R=T.fieldGroup?T.fieldGroup.length:0,D=m.items[R]?m.items[R]:m.additionalItems,W=D?this._toFieldConfig(D,C):{};return W.props&&(W.props.required=!0),m.items[R]&&(W.props.removable=!1),W})}return m.hasOwnProperty("const")&&(g.props.const=m.const,this.addValidator(g,"const",({value:T})=>T===m.const),g.type||(g.defaultValue=m.const)),this.isEnum(m)&&(g.props.multiple="array"===g.type,g.type="enum",g.props.options=this.toEnumOptions(m)),m.oneOf&&!g.type&&(delete g.key,g.fieldGroup=[this.resolveMultiSchema("oneOf",m.oneOf,(0,F.Z)((0,F.Z)({},C),{},{key:S,shareFormControl:!1}))]),m.oneOf&&!g.type&&(delete g.key,g.fieldGroup=[this.resolveMultiSchema("oneOf",m.oneOf,(0,F.Z)((0,F.Z)({},C),{},{key:S,shareFormControl:!1}))]),null!==(w=m.widget)&&void 0!==w&&w.formlyConfig&&(g=this.mergeFields(g,m.widget.formlyConfig)),g.templateOptions=g.props,C.map?C.map(g,m):g}resolveSchema(m,O){return m&&m.$ref&&(m=this.resolveDefinition(m,O)),m&&m.allOf&&(m=this.resolveAllOf(m,O)),m}resolveAllOf(m,O){let{allOf:w}=m,S=(0,N.Z)(m,me);if(!w.length)throw Error(`allOf array can not be empty ${w}.`);return w.reduce((C,P)=>(P=this.resolveSchema(P,O),C.required&&P.required&&(C.required=[...C.required,...P.required]),P.uniqueItems&&(C.uniqueItems=P.uniqueItems),["maxLength","maximum","exclusiveMaximum","maxItems","maxProperties"].forEach(g=>{!L(C[g])&&!L(P[g])&&(C[g]=C[g]<P[g]?C[g]:P[g])}),["minLength","minimum","exclusiveMinimum","minItems","minProperties"].forEach(g=>{!L(C[g])&&!L(P[g])&&(C[g]=C[g]>P[g]?C[g]:P[g])}),(0,I.Du)(C,P)),S)}resolveMultiSchema(m,O,w){return{type:"multischema",fieldGroup:[{type:"enum",defaultValue:-1,props:{multiple:"anyOf"===m,options:O.map((S,C)=>({label:S.title,value:C,disabled:S.readOnly}))},hooks:{onInit:S=>S.formControl.valueChanges.pipe((0,_.b)(()=>S.options.detectChanges(S.parent)))}},{fieldGroup:O.map((S,C)=>(0,F.Z)((0,F.Z)({},this._toFieldConfig(S,(0,F.Z)((0,F.Z)({},w),{},{resetOnHide:!0}))),{},{expressions:{hide:(P,g)=>{const T=P.parent.parent.fieldGroup[0].formControl;if(-1===T.value||g){let R=P.parent.fieldGroup.map((D,W)=>[D,W,this.isFieldValid(D,W,O,w)]).sort(([D,,W],[Z,,V])=>{if(W!==V)return V?1:-1;const B=H(D),U=H(Z);return B===U&&D.props.disabled===Z.props.disabled?0:U>B?1:-1}).map(([,D])=>D);if("anyOf"===m){const D=R.filter(W=>H(P.parent.fieldGroup[W]));R=D.length>0?D:[R[0]||0]}R=R.length>0?R:[0],T.setValue("anyOf"===m?R:R[0])}return Array.isArray(T.value)?-1===T.value.indexOf(C):T.value!==C}}}))}]}}resolveDefinition(m,O){const[w,S]=m.$ref.split("#/");if(w)throw Error(`Remote schemas for ${m.$ref} not supported yet.`);const C=S?S.split("/").reduce((P,g)=>null!=P&&P.hasOwnProperty(g)?P[g]:null,O.schema):null;if(!C)throw Error(`Cannot find a definition for ${m.$ref}.`);return C.$ref?this.resolveDefinition(C,O):(0,F.Z)((0,F.Z)({},C),["title","description","default","widget"].reduce((P,g)=>(m.hasOwnProperty(g)&&(P[g]=m[g]),P),{}))}resolveDependencies(m){const O={},w={};return Object.keys(m.dependencies||{}).forEach(S=>{const C=m.dependencies[S];Array.isArray(C)?C.forEach(P=>{O[P]?O[P].push(S):O[P]=[S]}):w[S]=C}),{propDeps:O,schemaDeps:w}}guessSchemaType(m){const O=null==m?void 0:m.type;return!O&&null!=m&&m.properties?["object"]:Array.isArray(O)?1===O.length?O:2===O.length&&-1!==O.indexOf("null")?O.sort(w=>"null"==w?1:-1):O:O?[O]:[]}addValidator(m,O,w){m.validators=m.validators||{},m.validators[O]=w}isEnum(m){return!!m.enum||m.anyOf&&m.anyOf.every(k)||m.oneOf&&m.oneOf.every(k)||m.uniqueItems&&m.items&&!Array.isArray(m.items)&&this.isEnum(m.items)}toEnumOptions(m){if(m.enum)return m.enum.map(w=>({value:w,label:w}));const O=w=>{const S=w.hasOwnProperty("const")?w.const:w.enum[0],C={value:S,label:w.title||S};return w.readOnly&&(C.disabled=!0),C};return m.anyOf?m.anyOf.map(O):m.oneOf?m.oneOf.map(O):this.toEnumOptions(m.items)}isFieldValid(m,O,w,S){m._schemasFields||(Object.defineProperty(m,"_schemasFields",{enumerable:!1,writable:!0,configurable:!0}),m._schemasFields={});let C=m._schemasFields[O];const P=m.model?(0,I.kg)(m.model):m.fieldArray?[]:{};return C?(C.model=P,m.options.build(C)):C=m._schemasFields[O]=m.options.build({form:Array.isArray(P)?new A.Oe([]):new A.cw({}),fieldGroup:[this._toFieldConfig(w[O],(0,F.Z)((0,F.Z)({},S),{},{resetOnHide:!0,ignoreDefault:!0,map:null,strict:!0}))],model:P,options:{}}),C.form.valid}mergeFields(m,O){for(let w in O){const S="templateOptions"===w?"props":w;K(m[S])&&K(O[w])?m[S]=this.mergeFields(m[S],O[w]):null!=O[w]&&(m[S]=O[w])}return m}}return M.\u0275fac=function(m){return new(m||M)},M.\u0275prov=e.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"}),M})()},5545:(_e,oe,h)=>{h.d(oe,{Du:()=>ne,Hl:()=>$,JD:()=>je,M2:()=>Ve,T7:()=>Qe,X0:()=>Xe,_S:()=>Z,cw:()=>De,fS:()=>ge,hv:()=>Be,kg:()=>z,l7:()=>ue,n2:()=>Ye});var v=h(9376),N=h(91),F=h(1413),e=h(5879),A=h(6223),I=h(2664),_=h(3019),y=h(2096),me=h(5592),fe=h(8645),L=h(3997),K=h(7921),x=h(3620),k=h(2181),H=h(4664),le=h(8180),M=h(9397),q=h(7398),m=h(6814),O=h(6593);const w=["expression"],S=["errorPath"],C=["container"];function P(c,i){}function g(c,i){1&c&&e._UZ(0,"formly-field",1),2&c&&e.Q6J("field",i.$implicit)}const T=["*"],R=["fieldComponent"];function W(c,i,n){if(i.id)return i.id;let r=i.type;return!r&&i.template&&(r="template"),r instanceof e.DyG&&(r=r.prototype.constructor.name),[c,r,i.key,n].join("_")}function Z(c){return!re(c.key)&&""!==c.key}function V(c){var i;if(!Z(c))return[];if((null===(i=c._keyPath)||void 0===i?void 0:i.key)!==c.key){let n=[];if("string"==typeof c.key){const r=-1===c.key.indexOf("[")?c.key:c.key.replace(/\[(\w+)\]/g,".$1");n=-1!==r.indexOf(".")?r.split("."):[r]}else n=Array.isArray(c.key)?c.key.slice(0):[`${c.key}`];Y(c,"_keyPath",{key:c.key,path:n})}return c._keyPath.path.slice(0)}const B=["required","pattern","minLength","maxLength","min","max"];function U(c,i){let n=V(c);if(0===n.length)return;let r=c;for(;r.parent;)r=r.parent,n=[...V(r),...n];if(void 0===i&&c.resetOnHide){const a=n.pop();delete n.reduce((d,f)=>d[f]||{},r.model)[a]}else!function ce(c,i,n){for(let r=0;r<i.length-1;r++){const a=i[r];(!c[a]||!ie(c[a]))&&(c[a]=/^\d+$/.test(i[r+1])?[]:{}),c=c[a]}c[i[i.length-1]]=z(n)}(r.model,n,i)}function $(c){let i=c.parent?c.parent.model:c.model;for(const n of V(c)){if(!i)return i;i=i[n]}return i}function ne(c,...i){return i.forEach(n=>{for(const r in n)re(c[r])||Je(c[r])?c[r]=z(n[r]):Re(c[r],n[r])&&ne(c[r],n[r])}),c}function re(c){return null==c}function ye(c){return void 0===c}function Je(c){return""===c}function Oe(c){return"function"==typeof c}function Re(c,i){return ie(c)&&ie(i)&&Object.getPrototypeOf(c)===Object.getPrototypeOf(i)&&!(Array.isArray(c)||Array.isArray(i))}function ie(c){return null!=c&&"object"==typeof c}function z(c){if(!ie(c)||(0,I.b)(c)||c instanceof e.Rgc||c.changingThisBreaksApplicationSecurity||-1!==["RegExp","FileList","File","Blob"].indexOf(c.constructor.name))return c;if(c instanceof Set)return new Set(c);if(c instanceof Map)return new Map(c);if(c._isAMomentObject&&Oe(c.clone))return c.clone();if(c instanceof A.TO)return null;if(c instanceof Date)return new Date(c.getTime());if(Array.isArray(c))return c.slice(0).map(r=>z(r));const i=Object.getPrototypeOf(c);let n=Object.create(i);return n=Object.setPrototypeOf(n,i),Object.keys(c).reduce((r,a)=>{const p=Object.getOwnPropertyDescriptor(c,a);return p.get?Object.defineProperty(r,a,p):r[a]=z(c[a]),r},n)}function Y(c,i,n){Object.defineProperty(c,i,{enumerable:!1,writable:!0,configurable:!0}),c[i]=n}function Te(c,i,n){let r=[];const a=()=>{r.forEach(d=>d()),r=[]},p=j(c,i,({firstChange:d,currentValue:f})=>{!d&&n(),a(),ie(f)&&"Object"===f.constructor.name&&Object.keys(f).forEach(E=>{r.push(Te(c,[...i,E],n))})});return()=>{p.unsubscribe(),a()}}function j(c,i,n){c._observers||Y(c,"_observers",{});let r=c;for(let f=0;f<i.length-1;f++)(!r[i[f]]||!ie(r[i[f]]))&&(r[i[f]]=/^\d+$/.test(i[f+1])?[]:{}),r=r[i[f]];const a=i[i.length-1],p=i.join(".");c._observers[p]||(c._observers[p]={value:r[a],onChange:[]});const d=c._observers[p];if(r[a]!==d.value&&(d.value=r[a]),-1===d.onChange.indexOf(n)&&(d.onChange.push(n),n({currentValue:d.value,firstChange:!0}),d.onChange.length>=1&&ie(r))){const{enumerable:f}=Object.getOwnPropertyDescriptor(r,a)||{enumerable:!0};Object.defineProperty(r,a,{enumerable:f,configurable:!0,get:()=>d.value,set:E=>{if(E!==d.value){const G=d.value;d.value=E,d.onChange.forEach(Q=>Q({previousValue:G,currentValue:E,firstChange:!1}))}}})}return{setValue(f){if(f===d.value)return;const E=d.value;d.value=f,d.onChange.forEach(G=>{G!==n&&G({previousValue:E,currentValue:f,firstChange:!1})})},unsubscribe(){d.onChange=d.onChange.filter(f=>f!==n),0===d.onChange.length&&delete c._observers[p]}}}function ke(c,i){if(i=Array.isArray(i)?i.join("."):i,c.fieldGroup)for(let n=0,r=c.fieldGroup.length;n<r;n++){const a=c.fieldGroup[n],p=Array.isArray(a.key)?a.key.join("."):a.key;if(p===i)return a;if(a.fieldGroup&&(re(p)||0===i.indexOf(`${p}.`))){const d=ke(a,re(p)?i:i.slice(p.length+1));if(d)return d}}}function Ie(c){var i;null===(i=c._componentRefs)||void 0===i||i.forEach(n=>{n instanceof e.UuU?n.injector.get(e.sBO).markForCheck():n.markForCheck()})}const ue=new e.OlP("FORMLY_CONFIG");let pe=(()=>{class c{constructor(){this.types={},this.validators={},this.wrappers={},this.messages={},this.extras={checkExpressionOn:"modelChange",lazyRender:!0,resetFieldOnHide:!0,renderFormlyFieldElement:!0,showError(n){var r,a,p,d;return(null===(r=n.formControl)||void 0===r?void 0:r.invalid)&&((null===(a=n.formControl)||void 0===a?void 0:a.touched)||(null===(p=n.options.parentForm)||void 0===p?void 0:p.submitted)||!(null===(d=n.field.validation)||void 0===d||!d.show))}},this.extensions={},this.presets={},this.extensionsByPriority={}}addConfig(n){n.types&&n.types.forEach(r=>this.setType(r)),n.validators&&n.validators.forEach(r=>this.setValidator(r)),n.wrappers&&n.wrappers.forEach(r=>this.setWrapper(r)),n.validationMessages&&n.validationMessages.forEach(r=>this.addValidatorMessage(r.name,r.message)),n.extensions&&this.setSortedExtensions(n.extensions),n.extras&&(this.extras=(0,F.Z)((0,F.Z)({},this.extras),n.extras)),n.presets&&(this.presets=(0,F.Z)((0,F.Z)({},this.presets),n.presets.reduce((r,a)=>(0,F.Z)((0,F.Z)({},r),{},{[a.name]:a.config}),{})))}setType(n){Array.isArray(n)?n.forEach(r=>this.setType(r)):(this.types[n.name]||(this.types[n.name]={name:n.name}),["component","extends","defaultOptions","wrappers"].forEach(r=>{n.hasOwnProperty(r)&&(this.types[n.name][r]=n[r])}))}getType(n,r=!1){if(n instanceof e.DyG)return{component:n,name:n.prototype.constructor.name};if(!this.types[n]){if(r)throw new Error(`[Formly Error] The type "${n}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return null}return this.mergeExtendedType(n),this.types[n]}getMergedField(n={}){var r;const a=this.getType(n.type);if(!a)return;a.defaultOptions&&ne(n,a.defaultOptions);const p=a.extends&&this.getType(a.extends).defaultOptions;p&&ne(n,p),null!=n&&n.optionsTypes&&n.optionsTypes.forEach(f=>{const E=this.getType(f).defaultOptions;E&&ne(n,E)});const d=this.resolveFieldTypeRef(n);null!=d&&null!==(r=d.instance)&&void 0!==r&&r.defaultOptions&&ne(n,d.instance.defaultOptions),!n.wrappers&&a.wrappers&&(n.wrappers=[...a.wrappers])}resolveFieldTypeRef(n={}){const r=this.getType(n.type);if(!r)return null;if(!r.component||r._componentRef)return r._componentRef;const{_viewContainerRef:a,_injector:p}=n.options;if(!a||!p)return null;const d=a.createComponent(r.component,{injector:p});Y(r,"_componentRef",d);try{d.destroy()}catch(f){console.error(`An error occurred while destroying the Formly component type "${n.type}"`,f)}return r._componentRef}setWrapper(n){this.wrappers[n.name]=n,n.types&&n.types.forEach(r=>{this.setTypeWrapper(r,n.name)})}getWrapper(n){if(n instanceof e.DyG)return{component:n,name:n.prototype.constructor.name};if(!this.wrappers[n])throw new Error(`[Formly Error] The wrapper "${n}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return this.wrappers[n]}setTypeWrapper(n,r){this.types[n]||(this.types[n]={}),this.types[n].wrappers||(this.types[n].wrappers=[]),-1===this.types[n].wrappers.indexOf(r)&&this.types[n].wrappers.push(r)}setValidator(n){this.validators[n.name]=n}getValidator(n){if(!this.validators[n])throw new Error(`[Formly Error] The validator "${n}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return this.validators[n]}addValidatorMessage(n,r){this.messages[n]=r}getValidatorMessage(n){return this.messages[n]}setSortedExtensions(n){n.forEach(r=>{var a;const p=null!==(a=r.priority)&&void 0!==a?a:1;this.extensionsByPriority[p]=(0,F.Z)((0,F.Z)({},this.extensionsByPriority[p]),{},{[r.name]:r.extension})}),this.extensions=Object.keys(this.extensionsByPriority).map(Number).sort((r,a)=>r-a).reduce((r,a)=>(0,F.Z)((0,F.Z)({},r),this.extensionsByPriority[a]),{})}mergeExtendedType(n){if(!this.types[n].extends)return;const r=this.getType(this.types[n].extends);this.types[n].component||(this.types[n].component=r.component),this.types[n].wrappers||(this.types[n].wrappers=r.wrappers)}}return c.\u0275fac=function(n){return new(n||c)},c.\u0275prov=e.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),ve=(()=>{class c{constructor(n,r,a,p){this.config=n,this.injector=r,this.viewContainerRef=a,this.parentForm=p}buildForm(n,r=[],a,p){this.build({fieldGroup:r,model:a,form:n,options:p})}build(n){if(!this.config.extensions.core)throw new Error("NgxFormly: missing `forRoot()` call. use `forRoot()` when registering the `FormlyModule`.");n.parent?this._build(n):(this._setOptions(n),function D(c,i){const n=c._updateTreeValidity.bind(c);c._updateTreeValidity=()=>{},i(),c._updateTreeValidity=n}(n.form,()=>{var r,a;this._build(n);const p=n.options;null===(r=p.checkExpressions)||void 0===r||r.call(p,n,!0),null===(a=p.detectChanges)||void 0===a||a.call(p,n)}))}_build(n){var r;if(!n)return;const a=Object.values(this.config.extensions);a.forEach(p=>{var d;return null===(d=p.prePopulate)||void 0===d?void 0:d.call(p,n)}),a.forEach(p=>{var d;return null===(d=p.onPopulate)||void 0===d?void 0:d.call(p,n)}),null===(r=n.fieldGroup)||void 0===r||r.forEach(p=>this._build(p)),a.forEach(p=>{var d;return null===(d=p.postPopulate)||void 0===d?void 0:d.call(p,n)})}_setOptions(n){n.form=n.form||new A.cw({}),n.model=n.model||{},n.options=n.options||{};const r=n.options;r._viewContainerRef||Y(r,"_viewContainerRef",this.viewContainerRef),r._injector||Y(r,"_injector",this.injector),r.build||(r._buildForm=()=>{console.warn("Formly: 'options._buildForm' is deprecated since v6.0, use 'options.build' instead."),this.build(n)},r.build=(a=n)=>(this.build(a),a)),!r.parentForm&&this.parentForm&&(Y(r,"parentForm",this.parentForm),j(r,["parentForm","submitted"],({firstChange:a})=>{a||(r.checkExpressions(n),r.detectChanges(n))}))}}return c.\u0275fac=function(n){return new(n||c)(e.LFG(pe),e.LFG(e.zs3),e.LFG(e.s_b,8),e.LFG(A.sg,8))},c.\u0275prov=e.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();function Fe(c,i=!1){const n=c.formControl,r=n._fields?n._fields.indexOf(c):-1;-1!==r&&n._fields.splice(r,1);const a=n.parent;if(!a)return;const p={emitEvent:i};if(a instanceof A.Oe){const d=a.controls.findIndex(f=>f===n);-1!==d&&a.removeAt(d,p)}else if(a instanceof A.cw){const d=V(c),f=d[d.length-1];a.get([f])===n&&a.removeControl(f,p)}n.setParent(null)}function Pe(c){var i;return c.formControl?c.formControl:!1===c.shareFormControl?null:null===(i=c.form)||void 0===i?void 0:i.get(V(c))}function Me(c,i,n=!1){if((i=i||c.formControl)._fields||Y(i,"_fields",[]),-1===i._fields.indexOf(c)&&i._fields.push(c),!c.formControl&&i){Y(c,"formControl",i),i.setValidators(null),i.setAsyncValidators(null),c.props.disabled=!!c.props.disabled;const f=j(c,["props","disabled"],({firstChange:E,currentValue:G})=>{E||(G?c.formControl.disable():c.formControl.enable())});i instanceof A.NI&&i.registerOnDisabledChange(f.setValue)}if(!c.form||!Z(c))return;let r=c.form;const a=V(c),p=$(c);(!re(i.value)||!re(p))&&i.value!==p&&i instanceof A.NI&&i.patchValue(p);for(let f=0;f<a.length-1;f++){const E=a[f];r.get([E])||r.setControl(E,new A.cw({}),{emitEvent:n}),r=r.get([E])}const d=a[a.length-1];!c._hide&&r.get([d])!==i&&r.setControl(d,i,{emitEvent:n})}function he(c,i=!1){const n=c.status,r=c.value;c.updateValueAndValidity({emitEvent:!1,onlySelf:i}),n!==c.status&&c.statusChanges.emit(c.status),r!==c.value&&c.valueChanges.emit(c.value)}function Se(c){null==c||delete c._fields,c.setValidators(null),c.setAsyncValidators(null),(c instanceof A.cw||c instanceof A.Oe)&&Object.values(c.controls).forEach(i=>Se(i))}let Ue=(()=>{class c{constructor(n){this.ref=n}ngOnChanges(){this.name=this.name||"formly-group"}}return c.\u0275fac=function(n){return new(n||c)(e.Y36(e.Rgc))},c.\u0275dir=e.lG2({type:c,selectors:[["","formlyTemplate",""]],inputs:{name:["formlyTemplate","name"]},features:[e.TTD]}),c})(),Ee=(()=>{class c{}return c.\u0275fac=function(n){return new(n||c)},c.\u0275prov=e.Yz7({token:c,factory:c.\u0275fac}),c})(),De=(()=>{class c{constructor(n,r,a,p,d){this.config=n,this.renderer=r,this._elementRef=a,this.hostContainerRef=p,this.form=d,this.hostObservers=[],this.componentRefs=[],this.hooksObservers=[],this.detectFieldBuild=!1,this.valueChangesUnsubscribe=()=>{}}get containerRef(){return this.config.extras.renderFormlyFieldElement?this.viewContainerRef:this.hostContainerRef}get elementRef(){var n;return this.config.extras.renderFormlyFieldElement?this._elementRef:(null===(n=this.componentRefs)||void 0===n?void 0:n[0])instanceof e.UuU?this.componentRefs[0].location:null}ngAfterContentInit(){this.triggerHook("afterContentInit")}ngAfterViewInit(){this.triggerHook("afterViewInit")}ngDoCheck(){this.detectFieldBuild&&this.field&&this.field.options&&this.render()}ngOnInit(){this.triggerHook("onInit")}ngOnChanges(n){this.triggerHook("onChanges",n)}ngOnDestroy(){this.resetRefs(this.field),this.hostObservers.forEach(n=>n.unsubscribe()),this.hooksObservers.forEach(n=>n()),this.valueChangesUnsubscribe(),this.triggerHook("onDestroy")}renderField(n,r,a=[]){var p,d;if(this.containerRef===n&&(this.resetRefs(this.field),this.containerRef.clear(),a=null===(d=this.field)||void 0===d?void 0:d.wrappers),(null===(p=a)||void 0===p?void 0:p.length)>0){const[E,...G]=a,{component:Q}=this.config.getWrapper(E),X=n.createComponent(Q);this.attachComponentRef(X,r),j(X.instance,["fieldComponent"],({currentValue:ae,previousValue:de,firstChange:Ae})=>{if(ae){if(de&&de._lContainer===ae._lContainer)return;const xe=de?de.detach():null;xe&&!xe.destroyed?ae.insert(xe):this.renderField(ae,r,G),!Ae&&X.changeDetectorRef.detectChanges()}})}else if(null!=r&&r.type){var f;const E=null===(f=this.form)||void 0===f||null===(f=f.templates)||void 0===f?void 0:f.find(Q=>Q.name===r.type);let G;if(E)G=n.createEmbeddedView(E.ref,{$implicit:r});else{const{component:Q}=this.config.getType(r.type,!0);G=n.createComponent(Q)}this.attachComponentRef(G,r)}}triggerHook(n,r){var a;if(("onInit"===n||"onChanges"===n&&r.field&&!r.field.firstChange)&&(this.valueChangesUnsubscribe=this.fieldChanges(this.field)),null!==(a=this.field)&&void 0!==a&&null!==(a=a.hooks)&&void 0!==a&&a[n]&&(!r||r.field)){const p=this.field.hooks[n](this.field);if((0,I.b)(p)&&-1!==["onInit","afterContentInit","afterViewInit"].indexOf(n)){const d=p.subscribe();this.hooksObservers.push(()=>d.unsubscribe())}}"onChanges"===n&&r.field&&(this.resetRefs(r.field.previousValue),this.render())}attachComponentRef(n,r){this.componentRefs.push(n),r._componentRefs.push(n),n instanceof e.UuU&&Object.assign(n.instance,{field:r})}render(){if(this.field){if(!this.field.options)return void(this.detectFieldBuild=!0);this.detectFieldBuild=!1,this.hostObservers.forEach(n=>n.unsubscribe()),this.hostObservers=[j(this.field,["hide"],({firstChange:n,currentValue:r})=>{const a=this.containerRef;!1===this.config.extras.lazyRender?(n&&this.renderField(a,this.field),(!n||n&&r)&&this.elementRef&&this.renderer.setStyle(this.elementRef.nativeElement,"display",r?"none":"")):r?(a.clear(),this.field.className&&this.renderer.removeAttribute(this.elementRef.nativeElement,"class")):(this.renderField(a,this.field),this.field.className&&this.renderer.setAttribute(this.elementRef.nativeElement,"class",this.field.className)),!n&&this.field.options.detectChanges(this.field)}),j(this.field,["className"],({firstChange:n,currentValue:r})=>{(!n||n&&r)&&(!this.config.extras.lazyRender||!0!==this.field.hide)&&this.elementRef&&this.renderer.setAttribute(this.elementRef.nativeElement,"class",r)}),...["touched","pristine","status"].map(n=>j(this.field,["formControl",n],({firstChange:r})=>!r&&Ie(this.field)))]}}resetRefs(n){n&&(n._localFields?n._localFields=[]:Y(this.field,"_localFields",[]),n._componentRefs?n._componentRefs=n._componentRefs.filter(r=>-1===this.componentRefs.indexOf(r)):Y(this.field,"_componentRefs",[])),this.componentRefs=[]}fieldChanges(n){if(this.valueChangesUnsubscribe(),!n)return()=>{};const r=[Te(n,["props"],()=>n.options.detectChanges(n))];n.options&&r.push(Te(n.options,["formState"],()=>n.options.detectChanges(n)));for(const p of Object.keys(n._expressions||{})){const d=j(n,["_expressions",p],({currentValue:f,previousValue:E})=>{null!=E&&E.subscription&&(E.subscription.unsubscribe(),E.subscription=null),(0,I.b)(f.value$)&&(f.subscription=f.value$.subscribe())});r.push(()=>{var f;null!==(f=n._expressions[p])&&void 0!==f&&f.subscription&&n._expressions[p].subscription.unsubscribe(),d.unsubscribe()})}for(const p of[["focus"],["template"],["fieldGroupClassName"],["validation","show"]]){const d=j(n,p,({firstChange:f})=>!f&&n.options.detectChanges(n));r.push(()=>d.unsubscribe())}if(n.formControl&&!n.fieldGroup){const p=n.formControl;let d=p.valueChanges.pipe((0,L.x)((Q,X)=>!(Q!==X||Array.isArray(Q)||ie(Q))));p.value!==$(n)&&(d=d.pipe((0,K.O)(p.value)));const{updateOn:f,debounce:E}=n.modelOptions;(!f||"change"===f)&&(null==E?void 0:E.default)>0&&(d=p.valueChanges.pipe((0,x.b)(E.default)));const G=d.subscribe(Q=>{var X,ae;(null===(X=p._fields)||void 0===X?void 0:X.length)>1&&p instanceof A.NI&&p.patchValue(Q,{emitEvent:!1,onlySelf:!0}),null===(ae=n.parsers)||void 0===ae||ae.forEach(de=>Q=de(Q)),Q===n.formControl.value?(Z(n)&&U(n,Q),n.options.fieldChanges.next({value:Q,field:n,type:"valueChanges"})):n.formControl.setValue(Q)});r.push(()=>G.unsubscribe())}let a=[];return j(n,["_localFields"],({currentValue:p})=>{a.forEach(d=>d()),a=(p||[]).map(d=>this.fieldChanges(d))}),()=>{r.forEach(p=>p()),a.forEach(p=>p())}}}return c.\u0275fac=function(n){return new(n||c)(e.Y36(pe),e.Y36(e.Qsj),e.Y36(e.SBq),e.Y36(e.s_b),e.Y36(Ee,8))},c.\u0275cmp=e.Xpm({type:c,selectors:[["formly-field"]],viewQuery:function(n,r){if(1&n&&e.Gf(C,7,e.s_b),2&n){let a;e.iGM(a=e.CRH())&&(r.viewContainerRef=a.first)}},inputs:{field:"field"},features:[e.TTD],decls:2,vars:0,consts:[["container",""]],template:function(n,r){1&n&&e.YNc(0,P,0,0,"ng-template",null,0,e.W1O)},styles:["[_nghost-%COMP%]:empty{display:none}"]}),c})(),Qe=(()=>{class c{constructor(n,r,a,p){this.builder=n,this.config=r,this.ngZone=a,this.fieldTemplates=p,this.modelChange=new e.vpe,this.field={type:"formly-group"},this._modelChangeValue={},this.valueChangesUnsubscribe=()=>{}}set form(n){this.field.form=n}get form(){return this.field.form}set model(n){this.config.extras.immutable&&this._modelChangeValue===n||this.setField({model:n})}get model(){return this.field.model}set fields(n){this.setField({fieldGroup:n})}get fields(){return this.field.fieldGroup}set options(n){this.setField({options:n})}get options(){return this.field.options}set templates(n){this.fieldTemplates.templates=n}ngDoCheck(){"changeDetectionCheck"===this.config.extras.checkExpressionOn&&this.checkExpressionChange()}ngOnChanges(n){n.fields&&this.form&&Se(this.form),(n.fields||n.form||n.model&&this._modelChangeValue!==n.model.currentValue)&&(this.valueChangesUnsubscribe(),this.builder.build(this.field),this.valueChangesUnsubscribe=this.valueChanges())}ngOnDestroy(){this.valueChangesUnsubscribe()}checkExpressionChange(){var n,r;null===(n=(r=this.field.options).checkExpressions)||void 0===n||n.call(r,this.field)}valueChanges(){this.valueChangesUnsubscribe();const n=this.field.options.fieldChanges.pipe((0,k.h)(({field:r,type:a})=>Z(r)&&"valueChanges"===a),(0,H.w)(()=>this.ngZone.onStable.asObservable().pipe((0,le.q)(1)))).subscribe(()=>this.ngZone.runGuarded(()=>{this.checkExpressionChange(),this.modelChange.emit(this._modelChangeValue=z(this.model))}));return()=>n.unsubscribe()}setField(n){this.config.extras.immutable?this.field=(0,F.Z)((0,F.Z)({},this.field),z(n)):Object.keys(n).forEach(r=>this.field[r]=n[r])}}return c.\u0275fac=function(n){return new(n||c)(e.Y36(ve),e.Y36(pe),e.Y36(e.R0b),e.Y36(Ee))},c.\u0275cmp=e.Xpm({type:c,selectors:[["formly-form"]],contentQueries:function(n,r,a){if(1&n&&e.Suo(a,Ue,4),2&n){let p;e.iGM(p=e.CRH())&&(r.templates=p)}},inputs:{form:"form",model:"model",fields:"fields",options:"options"},outputs:{modelChange:"modelChange"},features:[e._Bn([ve,Ee]),e.TTD],decls:1,vars:1,consts:[[3,"field"]],template:function(n,r){1&n&&e._UZ(0,"formly-field",0),2&n&&e.Q6J("field",r.field)},dependencies:[De],encapsulation:2,changeDetection:0}),c})(),je=(()=>{class c{constructor(n,r,a){this.renderer=n,this.elementRef=r,this.uiAttributesCache={},this.uiEvents={listeners:[],events:["click","keyup","keydown","keypress","focus","blur","change"],callback:(p,d)=>{switch(p){case"focus":return this.onFocus(d);case"blur":return this.onBlur(d);case"change":return this.onChange(d);default:return this.props[p](this.field,d)}}},this.document=a}get props(){return this.field.props||{}}get fieldAttrElements(){var n;return(null===(n=this.field)||void 0===n?void 0:n._elementRefs)||[]}ngOnChanges(n){var r;n.field&&(this.field.name&&this.setAttribute("name",this.field.name),this.uiEvents.listeners.forEach(a=>a()),this.uiEvents.events.forEach(a=>{var p;(null!==(p=this.props)&&void 0!==p&&p[a]||-1!==["focus","blur","change"].indexOf(a))&&this.uiEvents.listeners.push(this.renderer.listen(this.elementRef.nativeElement,a,d=>this.uiEvents.callback(a,d)))}),null!==(r=this.props)&&void 0!==r&&r.attributes&&j(this.field,["props","attributes"],({currentValue:a,previousValue:p})=>{p&&Object.keys(p).forEach(d=>this.removeAttribute(d)),a&&Object.keys(a).forEach(d=>{null!=a[d]&&this.setAttribute(d,a[d])})}),this.detachElementRef(n.field.previousValue),this.attachElementRef(n.field.currentValue),1===this.fieldAttrElements.length&&(!this.id&&this.field.id&&this.setAttribute("id",this.field.id),this.focusObserver=j(this.field,["focus"],({currentValue:a})=>{this.toggleFocus(a)}))),n.id&&this.setAttribute("id",this.id)}ngDoCheck(){if(!this.uiAttributes){const n=this.elementRef.nativeElement;this.uiAttributes=[...B,"tabindex","placeholder","readonly","disabled","step"].filter(r=>!n.hasAttribute||!n.hasAttribute(r))}this.uiAttributes.forEach(n=>{const r=this.props[n];this.uiAttributesCache[n]!==r&&(!this.props.attributes||!this.props.attributes.hasOwnProperty(n.toLowerCase()))&&(this.uiAttributesCache[n]=r,r||0===r?this.setAttribute(n,!0===r?n:`${r}`):this.removeAttribute(n))})}ngOnDestroy(){var n;this.uiEvents.listeners.forEach(r=>r()),this.detachElementRef(this.field),null===(n=this.focusObserver)||void 0===n||n.unsubscribe()}toggleFocus(n){const r=this.fieldAttrElements?this.fieldAttrElements[0]:null;if(!r||!r.nativeElement.focus)return;const a=!!this.document.activeElement&&this.fieldAttrElements.some(({nativeElement:p})=>this.document.activeElement===p||p.contains(this.document.activeElement));n&&!a?Promise.resolve().then(()=>r.nativeElement.focus()):!n&&a&&Promise.resolve().then(()=>r.nativeElement.blur())}onFocus(n){var r,a,p;null===(r=this.focusObserver)||void 0===r||r.setValue(!0),null===(a=(p=this.props).focus)||void 0===a||a.call(p,this.field,n)}onBlur(n){var r,a,p;null===(r=this.focusObserver)||void 0===r||r.setValue(!1),null===(a=(p=this.props).blur)||void 0===a||a.call(p,this.field,n)}onHostChange(n){n instanceof Event||this.onChange(n)}onChange(n){var r,a,p;null===(r=(a=this.props).change)||void 0===r||r.call(a,this.field,n),null===(p=this.field.formControl)||void 0===p||p.markAsDirty()}attachElementRef(n){var r;n&&(-1===(null===(r=n._elementRefs)||void 0===r?void 0:r.indexOf(this.elementRef))?n._elementRefs.push(this.elementRef):Y(n,"_elementRefs",[this.elementRef]))}detachElementRef(n){const r=null!=n&&n._elementRefs?this.fieldAttrElements.indexOf(this.elementRef):-1;-1!==r&&n._elementRefs.splice(r,1)}setAttribute(n,r){this.renderer.setAttribute(this.elementRef.nativeElement,n,r)}removeAttribute(n){this.renderer.removeAttribute(this.elementRef.nativeElement,n)}}return c.\u0275fac=function(n){return new(n||c)(e.Y36(e.Qsj),e.Y36(e.SBq),e.Y36(m.K0))},c.\u0275dir=e.lG2({type:c,selectors:[["","formlyAttributes",""]],hostBindings:function(n,r){1&n&&e.NdJ("change",function(p){return r.onHostChange(p)})},inputs:{field:["formlyAttributes","field"],id:"id"},features:[e.TTD]}),c})(),ge=(()=>{class c{constructor(){this.field={}}set controls(n){this.field._localFields=n.map(a=>a.control._fields||[]).flat().filter(a=>a.formControl!==this.field.formControl)}get model(){return this.field.model}get form(){return this.field.form}get options(){return this.field.options}get key(){return this.field.key}get formControl(){return this.field.formControl}get props(){return this.field.props||{}}get to(){return this.props}get showError(){return this.options.showError(this)}get id(){return this.field.id}get formState(){var n;return(null===(n=this.options)||void 0===n?void 0:n.formState)||{}}}return c.\u0275fac=function(n){return new(n||c)},c.\u0275dir=e.lG2({type:c,viewQuery:function(n,r){if(1&n&&e.Gf(A.a5,5),2&n){let a;e.iGM(a=e.CRH())&&(r.controls=a)}},inputs:{field:"field"}}),c})(),Ne=(()=>{class c extends ge{}return c.\u0275fac=function(){let i;return function(r){return(i||(i=e.n5z(c)))(r||c)}}(),c.\u0275cmp=e.Xpm({type:c,selectors:[["formly-group"]],hostVars:2,hostBindings:function(n,r){2&n&&e.Tol(r.field.fieldGroupClassName||"")},features:[e.qOj],ngContentSelectors:T,decls:2,vars:1,consts:[[3,"field",4,"ngFor","ngForOf"],[3,"field"]],template:function(n,r){1&n&&(e.F$t(),e.YNc(0,g,1,1,"formly-field",0),e.Hsn(1)),2&n&&e.Q6J("ngForOf",r.field.fieldGroup)},dependencies:[De,m.sg],encapsulation:2,changeDetection:0}),c})(),Ve=(()=>{class c{constructor(n){this.config=n}ngOnChanges(){const n=B.map(r=>`templateOptions.${r}`);this.errorMessage$=(0,_.T)(this.field.formControl.statusChanges,this.field.options?this.field.options.fieldChanges.pipe((0,k.h)(({field:r,type:a,property:p})=>r===this.field&&"expressionChanges"===a&&(-1!==p.indexOf("validation")||-1!==n.indexOf(p)))):(0,y.of)(null)).pipe((0,K.O)(null),(0,H.w)(()=>(0,I.b)(this.errorMessage)?this.errorMessage:(0,y.of)(this.errorMessage)))}get errorMessage(){const n=this.field.formControl;for(const d in n.errors)if(n.errors.hasOwnProperty(d)){var r,a,p;let f=this.config.getValidatorMessage(d);if(ie(n.errors[d])){if(n.errors[d].errorPath)return;n.errors[d].message&&(f=n.errors[d].message)}return null!==(r=this.field.validation)&&void 0!==r&&null!==(r=r.messages)&&void 0!==r&&r[d]&&(f=this.field.validation.messages[d]),null!==(a=this.field.validators)&&void 0!==a&&null!==(a=a[d])&&void 0!==a&&a.message&&(f=this.field.validators[d].message),null!==(p=this.field.asyncValidators)&&void 0!==p&&null!==(p=p[d])&&void 0!==p&&p.message&&(f=this.field.asyncValidators[d].message),"function"==typeof f?f(n.errors[d],this.field):f}}}return c.\u0275fac=function(n){return new(n||c)(e.Y36(pe))},c.\u0275cmp=e.Xpm({type:c,selectors:[["formly-validation-message"]],inputs:{field:"field"},features:[e.TTD],decls:2,vars:3,template:function(n,r){1&n&&(e._uU(0),e.ALo(1,"async")),2&n&&e.Oqu(e.lcZ(1,1,r.errorMessage$))},dependencies:[m.Ov],encapsulation:2,changeDetection:0}),c})(),Be=(()=>{class c extends ge{onPopulate(n){Z(n)&&Me(n,Pe(n)||new A.Oe([],{updateOn:n.modelOptions.updateOn})),n.fieldGroup=n.fieldGroup||[];const r=Array.isArray(n.model)?n.model.length:0;if(n.fieldGroup.length>r)for(let a=n.fieldGroup.length-1;a>=r;--a)Fe(n.fieldGroup[a],!0),n.fieldGroup.splice(a,1);for(let a=n.fieldGroup.length;a<r;a++){const p=(0,F.Z)((0,F.Z)({},z("function"==typeof n.fieldArray?n.fieldArray(n):n.fieldArray)),{},{key:`${a}`});n.fieldGroup.push(p)}}add(n,r,{markAsDirty:a}={markAsDirty:!0}){n=null==n?this.field.fieldGroup.length:n,this.model||U(this.field,[]),this.model.splice(n,0,r?z(r):void 0),this._build(),a&&this.formControl.markAsDirty()}remove(n,{markAsDirty:r}={markAsDirty:!0}){this.model.splice(n,1);const a=this.field.fieldGroup[n];this.field.fieldGroup.splice(n,1),this.field.fieldGroup.forEach((p,d)=>p.key=`${d}`),Fe(a,!0),this._build(),r&&this.formControl.markAsDirty()}_build(){var n;(null!==(n=this.field.formControl._fields)&&void 0!==n?n:[this.field]).forEach(a=>this.options.build(a)),this.options.fieldChanges.next({field:this.field,value:$(this.field),type:"valueChanges"})}}return c.\u0275fac=function(){let i;return function(r){return(i||(i=e.n5z(c)))(r||c)}}(),c.\u0275dir=e.lG2({type:c,features:[e.qOj]}),c})(),Ye=(()=>{class c extends ge{set _staticContent(n){this.fieldComponent=n}}return c.\u0275fac=function(){let i;return function(r){return(i||(i=e.n5z(c)))(r||c)}}(),c.\u0275dir=e.lG2({type:c,viewQuery:function(n,r){if(1&n&&(e.Gf(R,5,e.s_b),e.Gf(R,7,e.s_b)),2&n){let a;e.iGM(a=e.CRH())&&(r.fieldComponent=a.first),e.iGM(a=e.CRH())&&(r._staticContent=a.first)}},features:[e.qOj]}),c})(),Ge=(()=>{class c extends ge{constructor(n){super(),this.sanitizer=n,this.innerHtml={}}get template(){return this.field&&this.field.template!==this.innerHtml.template&&(this.innerHtml={template:this.field.template,content:this.props.safeHtml?this.sanitizer.bypassSecurityTrustHtml(this.field.template):this.field.template}),this.innerHtml.content}}return c.\u0275fac=function(n){return new(n||c)(e.Y36(O.H7))},c.\u0275cmp=e.Xpm({type:c,selectors:[["formly-template"]],features:[e.qOj],decls:1,vars:1,consts:[[3,"innerHtml"]],template:function(n,r){1&n&&e._UZ(0,"div",0),2&n&&e.Q6J("innerHtml",r.template,e.oJD)},encapsulation:2,changeDetection:0}),c})();class qe{onPopulate(i){if(i._expressions)return;Y(i,"_expressions",{}),j(i,["hide"],({currentValue:r,firstChange:a})=>{Y(i,"_hide",!!r),(!a||a&&!0===r)&&(i.props.hidden=r,i.options._hiddenFieldsForCheck.push(i))}),i.hideExpression&&j(i,["hideExpression"],({currentValue:r})=>{i._expressions.hide=this.parseExpressions(i,"hide","boolean"==typeof r?()=>r:r)});const n=(r,a)=>{"string"==typeof a||Oe(a)?i._expressions[r]=this.parseExpressions(i,r,a):a instanceof me.y&&(i._expressions[r]={value$:a.pipe((0,M.b)(p=>{this.evalExpr(i,r,p),i.options.detectChanges(i)}))})};i.expressions=i.expressions||{};for(const r of Object.keys(i.expressions))j(i,["expressions",r],({currentValue:a})=>{n(r,Oe(a)?(...p)=>a(i,p[3]):a)});i.expressionProperties=i.expressionProperties||{};for(const r of Object.keys(i.expressionProperties))j(i,["expressionProperties",r],({currentValue:a})=>n(r,a))}postPopulate(i){if(!i.parent&&!i.options.checkExpressions){let n=!1;i.options.checkExpressions=(r,a)=>{if(n)return;n=!0;const p=this.checkExpressions(r,a),d=i.options;d._hiddenFieldsForCheck.sort(f=>f.hide?-1:1).forEach(f=>this.changeHideState(f,f.hide,!a)),d._hiddenFieldsForCheck=[],p&&(this.checkExpressions(i),i.options&&i.options.detectChanges&&i.options.detectChanges(i)),n=!1},i.options._checkField=(r,a)=>{console.warn("Formly: 'options._checkField' is deprecated since v6.0, use 'options.checkExpressions' instead."),i.options.checkExpressions(r,a)}}}parseExpressions(i,n,r){let a,p;if(i.parent&&["hide","props.disabled"].includes(n)){const d=f=>"hide"===n?f.hide:f.props.disabled;a=()=>{let f=i.parent;for(;f.parent&&!d(f);)f=f.parent;return d(f)}}return"string"==typeof(r=r||(()=>!1))&&(r=function He(c,i){try{return Function(...i,`return ${c};`)}catch(n){console.error(n)}}(r,["model","formState","field"])),{callback:d=>{try{const f=function We(c,i,n){return"function"==typeof c?c.apply(i,n):!!c}(a?(...E)=>a(i)||r(...E):r,{field:i},[i.model,i.options.formState,i,d]);return!(!d&&(p===f||ie(f)&&!(0,I.b)(f)&&JSON.stringify(f)===JSON.stringify(p))||(p=f,this.evalExpr(i,n,f),0))}catch(f){throw f.message=`[Formly Error] [Expression "${n}"] ${f.message}`,f}}}}checkExpressions(i,n=!1){var r;if(!i)return!1;let a=!1;if(i._expressions)for(const f of Object.keys(i._expressions)){var p,d;null!==(p=(d=i._expressions[f]).callback)&&void 0!==p&&p.call(d,n)&&(a=!0)}return null===(r=i.fieldGroup)||void 0===r||r.forEach(f=>this.checkExpressions(f,n)&&(a=!0)),a}changeDisabledState(i,n){i.fieldGroup&&i.fieldGroup.filter(r=>!r._expressions.hasOwnProperty("props.disabled")).forEach(r=>this.changeDisabledState(r,n)),Z(i)&&i.props.disabled!==n&&(i.props.disabled=n)}changeHideState(i,n,r){if(i.fieldGroup&&i.fieldGroup.filter(f=>!f._expressions.hide).forEach(f=>this.changeHideState(f,n,r)),i.formControl&&Z(i)){var a;Y(i,"_hide",!(!n&&!i.hide));const f=i.formControl;if((null===(a=f._fields)||void 0===a?void 0:a.length)>1&&he(f),!0!==n||f._fields&&!f._fields.every(E=>!!E._hide)){if(!1===n){var p,d;i.resetOnHide&&!ye(i.defaultValue)&&ye($(i))&&U(i,i.defaultValue),Me(i,void 0,!0),i.resetOnHide&&i.fieldArray&&(null===(p=i.fieldGroup)||void 0===p?void 0:p.length)!==(null===(d=i.model)||void 0===d?void 0:d.length)&&i.options.build(i)}}else Fe(i,!0),r&&i.resetOnHide&&(U(i,void 0),i.formControl.reset({value:void 0,disabled:i.formControl.disabled}),i.options.fieldChanges.next({value:void 0,field:i,type:"valueChanges"}),i.fieldGroup&&i.formControl instanceof A.Oe&&(i.fieldGroup.length=0))}i.options.fieldChanges&&i.options.fieldChanges.next({field:i,type:"hidden",value:n})}evalExpr(i,n,r){if(0===n.indexOf("model.")){const a=n.replace(/^model\./,""),p=i.fieldGroup?i:i.parent;let d=(null==i?void 0:i.key)===a?i.formControl:i.form.get(a);!d&&i.get(a)&&(d=i.get(a).formControl),U({key:a,parent:p,model:i.model},r),d&&(!re(d.value)||!re(r))&&d.value!==r&&d.patchValue(r)}else{try{let a=i;const p=this._evalExpressionPath(i,n),d=p.length-1;for(let f=0;f<d;f++)a=a[p[f]];a[p[d]]=r}catch(a){throw a.message=`[Formly Error] [Expression "${n}"] ${a.message}`,a}["templateOptions.disabled","props.disabled"].includes(n)&&Z(i)&&this.changeDisabledState(i,r)}this.emitExpressionChanges(i,n,r)}emitExpressionChanges(i,n,r){i.options.fieldChanges&&i.options.fieldChanges.next({field:i,type:"expressionChanges",property:n,value:r})}_evalExpressionPath(i,n){if(i._expressions[n]&&i._expressions[n].paths)return i._expressions[n].paths;let r=[];return-1===n.indexOf("[")?r=n.split("."):n.split(/[[\]]{1,2}/).filter(a=>a).forEach(a=>{const p=a.match(/['|"](.*?)['|"]/);p?r.push(p[1]):r.push(...a.split(".").filter(d=>d))}),i._expressions[n]&&(i._expressions[n].paths=r),r}}class $e{constructor(i){this.config=i}onPopulate(i){this.initFieldValidation(i,"validators"),this.initFieldValidation(i,"asyncValidators")}initFieldValidation(i,n){const r=[];if("validators"===n&&!(i.hasOwnProperty("fieldGroup")&&!Z(i))&&r.push(this.getPredefinedFieldValidation(i)),i[n])for(const a of Object.keys(i[n]))"validation"===a?r.push(...i[n].validation.map(p=>this.wrapNgValidatorFn(i,p))):r.push(this.wrapNgValidatorFn(i,i[n][a],a));Y(i,"_"+n,r)}getPredefinedFieldValidation(i){let n=[];return B.forEach(r=>j(i,["props",r],({currentValue:a,firstChange:p})=>{n=n.filter(d=>d!==r),null!=a&&!1!==a&&n.push(r),!p&&i.formControl&&he(i.formControl)})),r=>0===n.length?null:A.kI.compose(n.map(a=>()=>{var p,d;const f=i.props[a];switch(a){case"required":return A.kI.required(r);case"pattern":return A.kI.pattern(f)(r);case"minLength":const E=A.kI.minLength(f)(r),G=this.config.getValidatorMessage("minlength")||null!==(p=i.validation)&&void 0!==p&&null!==(p=p.messages)&&void 0!==p&&p.minlength?"minlength":"minLength";return E?{[G]:E.minlength}:null;case"maxLength":const Q=A.kI.maxLength(f)(r),X=this.config.getValidatorMessage("maxlength")||null!==(d=i.validation)&&void 0!==d&&null!==(d=d.messages)&&void 0!==d&&d.maxlength?"maxlength":"maxLength";return Q?{[X]:Q.maxlength}:null;case"min":return A.kI.min(f)(r);case"max":return A.kI.max(f)(r);default:return null}}))(r)}wrapNgValidatorFn(i,n,r){let a;if("string"==typeof n&&(a=z(this.config.getValidator(n))),"object"==typeof n&&n.name&&(a=z(this.config.getValidator(n.name)),n.options&&(a.options=n.options)),"object"==typeof n&&n.expression){const{expression:p}=n,d=(0,N.Z)(n,w);a={name:r,validation:p,options:Object.keys(d).length>0?d:null}}return"function"==typeof n&&(a={name:r,validation:n}),p=>{const d=a.validation(p,i,a.options);return function Le(c){return!!c&&"function"==typeof c.then}(d)?d.then(f=>this.handleAsyncResult(i,r?!!f:f,a)):(0,I.b)(d)?d.pipe((0,q.U)(f=>this.handleAsyncResult(i,r?!!f:f,a))):this.handleResult(i,r?!!d:d,a)}}handleAsyncResult(i,n,r){return i.options.detectChanges(i),this.handleResult(i,n,r)}handleResult(i,n,{name:r,options:a}){var p,d;"boolean"==typeof n&&(n=n?null:{[r]:a||!0});const f=i.formControl;return null==f||null===(p=f._childrenErrors)||void 0===p||null===(d=p[r])||void 0===d||d.call(p),ie(n)&&Object.keys(n).forEach(E=>{const G=n[E].errorPath?n[E].errorPath:null==a?void 0:a.errorPath,Q=G?i.formControl.get(G):null;if(Q){const de=(0,N.Z)(n[E],S);Q.setErrors((0,F.Z)((0,F.Z)({},Q.errors||{}),{},{[E]:de})),!f._childrenErrors&&Y(f,"_childrenErrors",{}),f._childrenErrors[E]=()=>{const Ae=Q.errors||{},{[E]:xe}=Ae,et=(0,N.Z)(Ae,[E].map(v.Z));Q.setErrors(0===Object.keys(et).length?null:et)}}}),n}}class Ke{prePopulate(i){this.root||(this.root=i),i.parent&&Object.defineProperty(i,"form",{get:()=>i.parent.formControl,configurable:!0})}onPopulate(i){i.hasOwnProperty("fieldGroup")&&!Z(i)?Y(i,"formControl",i.form):this.addFormControl(i)}postPopulate(i){if(this.root===i&&(this.root=null,this.setValidators(i)&&i.parent)){let r=i.parent;for(;r;)(Z(r)||!r.parent)&&he(r.formControl,!0),r=r.parent}}addFormControl(i){let n=Pe(i);if(!i.fieldArray){if(!n){const r={updateOn:i.modelOptions.updateOn};if(i.fieldGroup)n=new A.cw({},r);else{const a=Z(i)?$(i):i.defaultValue;n=new A.NI({value:a,disabled:!!i.props.disabled},(0,F.Z)((0,F.Z)({},r),{},{initialValueIsDefault:!0}))}}Me(i,n)}}setValidators(i,n=!1){var r,a;!1===n&&Z(i)&&null!==(r=i.props)&&void 0!==r&&r.disabled&&(n=!0);let p=!1;if(null===(a=i.fieldGroup)||void 0===a||a.forEach(d=>d&&this.setValidators(d,n)&&(p=!0)),Z(i)||!i.parent||!Z(i)&&!i.fieldGroup){const{formControl:d}=i;if(d&&(Z(i)&&d instanceof A.NI&&(n&&d.enabled&&(d.disable({emitEvent:!1,onlySelf:!0}),p=!0),!n&&d.disabled&&(d.enable({emitEvent:!1,onlySelf:!0}),p=!0)),(null===d.validator||null===d.asyncValidator)&&(d.setValidators(()=>{const f=A.kI.compose(this.mergeValidators(i,"_validators"));return f?f(d):null}),d.setAsyncValidators(()=>{const f=A.kI.composeAsync(this.mergeValidators(i,"_asyncValidators"));return f?f(d):(0,y.of)(null)}),p=!0),p)){he(d,!0);let f=d.parent;for(let E=1;E<V(i).length;E++)f&&(he(f,!0),f=f.parent)}}return p}mergeValidators(i,n){var r;const a=[],p=i.formControl;return(null==p||null===(r=p._fields)||void 0===r?void 0:r.length)>1?p._fields.filter(d=>!d._hide).forEach(d=>a.push(...d[n])):i[n]&&a.push(...i[n]),i.fieldGroup&&i.fieldGroup.filter(d=>(null==d?void 0:d.fieldGroup)&&!Z(d)).forEach(d=>a.push(...this.mergeValidators(d,n))),a}}class ze{constructor(i){this.config=i,this.formId=0}prePopulate(i){var n,r;const a=i.parent;this.initRootOptions(i),this.initFieldProps(i),a&&(Object.defineProperty(i,"options",{get:()=>a.options,configurable:!0}),Object.defineProperty(i,"model",{get:()=>Z(i)&&i.fieldGroup?$(i):a.model,configurable:!0})),Object.defineProperty(i,"get",{value:p=>ke(i,p),configurable:!0}),null===(n=(r=this.getFieldComponentInstance(i)).prePopulate)||void 0===n||n.call(r,i)}onPopulate(i){var n,r;this.initFieldOptions(i),null===(n=(r=this.getFieldComponentInstance(i)).onPopulate)||void 0===n||n.call(r,i),i.fieldGroup&&i.fieldGroup.forEach((a,p)=>{a&&(Object.defineProperty(a,"parent",{get:()=>i,configurable:!0}),Object.defineProperty(a,"index",{get:()=>p,configurable:!0})),this.formId++})}postPopulate(i){var n,r;null===(n=(r=this.getFieldComponentInstance(i)).postPopulate)||void 0===n||n.call(r,i)}initFieldProps(i){var n;null!==(n=i.props)&&void 0!==n||(i.props=i.templateOptions),Object.defineProperty(i,"templateOptions",{get:()=>i.props,set:r=>i.props=r,configurable:!0})}initRootOptions(i){if(i.parent)return;const n=i.options;i.options.formState=i.options.formState||{},n.showError||(n.showError=this.config.extras.showError),n.fieldChanges||Y(n,"fieldChanges",new fe.x),n._hiddenFieldsForCheck||(n._hiddenFieldsForCheck=[]),n._markForCheck=r=>{console.warn("Formly: 'options._markForCheck' is deprecated since v6.0, use 'options.detectChanges' instead."),n.detectChanges(r)},n.detectChanges=r=>{var a;r._componentRefs&&(r.options.checkExpressions(r),Ie(r)),null===(a=r.fieldGroup)||void 0===a||a.forEach(p=>p&&n.detectChanges(p))},n.resetModel=r=>{var a;r=z(null!==(a=r)&&void 0!==a?a:n._initialModel),i.model&&(Object.keys(i.model).forEach(p=>delete i.model[p]),Object.assign(i.model,r||{})),n.build(i),i.form.reset(i.model),n.parentForm&&n.parentForm.control===i.formControl&&(n.parentForm.submitted=!1)},n.updateInitialValue=r=>n._initialModel=z(null!=r?r:i.model),i.options.updateInitialValue()}initFieldOptions(i){var n,r;if(ne(i,{id:W(`formly_${this.formId}`,i,i.index),hooks:{},modelOptions:{},validation:{messages:{}},props:i.type&&Z(i)?{label:"",placeholder:"",disabled:!1}:{}}),this.config.extras.resetFieldOnHide&&!1!==i.resetOnHide&&(i.resetOnHide=!0),"formly-template"!==i.type&&(i.template||null!==(n=i.expressions)&&void 0!==n&&n.template||null!==(r=i.expressionProperties)&&void 0!==r&&r.template)&&(i.type="formly-template"),!i.type&&i.fieldGroup&&(i.type="formly-group"),i.type&&this.config.getMergedField(i),Z(i)&&!ye(i.defaultValue)&&ye($(i))){const a=d=>{var f;return d.hide||(null===(f=d.expressions)||void 0===f?void 0:f.hide)||d.hideExpression};let p=!i.resetOnHide||!a(i);if(!a(i)&&i.resetOnHide){let d=i.parent;for(;d&&!a(d);)d=d.parent;p=!d||!a(d)}p&&U(i,i.defaultValue)}i.wrappers=i.wrappers||[]}getFieldComponentInstance(i){const n=()=>{var r,a,p;let d=this.config.resolveFieldTypeRef(i);const f=null===(r=i._componentRefs)||void 0===r?void 0:r.slice(-1)[0];return f instanceof e.UuU&&(null==f?void 0:f.componentType)===(null===(a=d)||void 0===a?void 0:a.componentType)&&(d=f),null===(p=d)||void 0===p?void 0:p.instance};return i._proxyInstance||Y(i,"_proxyInstance",new Proxy({},{get:(r,a)=>{var p;return null===(p=n())||void 0===p?void 0:p[a]},set:(r,a,p)=>n()[a]=p})),i._proxyInstance}}function Ze(c){return{types:[{name:"formly-group",component:Ne},{name:"formly-template",component:Ge}],extensions:[{name:"core",extension:new ze(c),priority:-250},{name:"field-validation",extension:new $e(c),priority:-200},{name:"field-form",extension:new Ke,priority:-150},{name:"field-expression",extension:new qe,priority:-100}]}}let Xe=(()=>{class c{constructor(n,r=[]){r&&r.forEach(a=>n.addConfig(a))}static forRoot(n={}){return{ngModule:c,providers:[{provide:ue,multi:!0,useFactory:Ze,deps:[pe]},{provide:ue,useValue:n,multi:!0},pe,ve]}}static forChild(n={}){return{ngModule:c,providers:[{provide:ue,multi:!0,useFactory:Ze,deps:[pe]},{provide:ue,useValue:n,multi:!0},ve]}}}return c.\u0275fac=function(n){return new(n||c)(e.LFG(pe),e.LFG(ue,8))},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[[m.ez]]}),c})()},91:(_e,oe,h)=>{function N(F,e){if(null==F)return{};var I,_,A=function v(F,e){if(null==F)return{};var _,y,A={},I=Object.keys(F);for(y=0;y<I.length;y++)!(e.indexOf(_=I[y])>=0)&&(A[_]=F[_]);return A}(F,e);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(F);for(_=0;_<y.length;_++)!(e.indexOf(I=y[_])>=0)&&Object.prototype.propertyIsEnumerable.call(F,I)&&(A[I]=F[I])}return A}h.d(oe,{Z:()=>N})}}]);