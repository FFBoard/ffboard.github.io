(self.webpackChunkpages=self.webpackChunkpages||[]).push([[288],{5739:wt=>{var nt=-1,j=1,et=0;function N(f,A,g,O,x){if(f===A)return f?[[et,f]]:[];if(null!=g){var T=function Gt(f,A,g){var O="number"==typeof g?{index:g,length:0}:g.oldRange,x="number"==typeof g?null:g.newRange,T=f.length,C=A.length;if(0===O.length&&(null===x||0===x.length)){var q=O.index,H=f.slice(0,q),L=f.slice(q),st=x?x.index:null,J=q+C-T;if(!(null!==st&&st!==J||J<0||J>C)){var at=A.slice(0,J);if((it=A.slice(J))===L){var Z=Math.min(q,J);if((_t=H.slice(0,Z))===(Tt=at.slice(0,Z)))return kt(_t,H.slice(Z),at.slice(Z),L)}}if(null===st||st===q){var ft=q,it=(at=A.slice(0,ft),A.slice(ft));if(at===H){var mt=Math.min(T-ft,C-ft);if((bt=L.slice(L.length-mt))===(yt=it.slice(it.length-mt)))return kt(H,L.slice(0,L.length-mt),it.slice(0,it.length-mt),bt)}}}if(O.length>0&&x&&0===x.length){var _t=f.slice(0,O.index),bt=f.slice(O.index+O.length);if(!(C<(Z=_t.length)+(mt=bt.length))){var Tt=A.slice(0,Z),yt=A.slice(C-mt);if(_t===Tt&&bt===yt)return kt(_t,f.slice(Z,T-mt),A.slice(Z,C-mt),bt)}}return null}(f,A,g);if(T)return T}var C=D(f,A),q=f.substring(0,C);C=F(f=f.substring(C),A=A.substring(C));var H=f.substring(f.length-C),L=function gt(f,A){var g;if(!f)return[[j,A]];if(!A)return[[nt,f]];var O=f.length>A.length?f:A,x=f.length>A.length?A:f,T=O.indexOf(x);if(-1!==T)return g=[[j,O.substring(0,T)],[et,x],[j,O.substring(T+x.length)]],f.length>A.length&&(g[0][0]=g[2][0]=nt),g;if(1===x.length)return[[nt,f],[j,A]];var C=function w(f,A){var g=f.length>A.length?f:A,O=f.length>A.length?A:f;if(g.length<4||2*O.length<g.length)return null;function x(it,Z,_t){for(var ft,mt,bt,yt,Tt=it.substring(_t,_t+Math.floor(it.length/4)),lt=-1,pt="";-1!==(lt=Z.indexOf(Tt,lt+1));){var Lt=D(it.substring(_t),Z.substring(lt)),xt=F(it.substring(0,_t),Z.substring(0,lt));pt.length<xt+Lt&&(pt=Z.substring(lt-xt,lt)+Z.substring(lt,lt+Lt),ft=it.substring(0,_t-xt),mt=it.substring(_t+Lt),bt=Z.substring(0,lt-xt),yt=Z.substring(lt+Lt))}return 2*pt.length>=it.length?[ft,mt,bt,yt,pt]:null}var q,H,L,st,J,T=x(g,O,Math.ceil(g.length/4)),C=x(g,O,Math.ceil(g.length/2));return T||C?(q=C?T&&T[4].length>C[4].length?T:C:T,f.length>A.length?(H=q[0],L=q[1],st=q[2],J=q[3]):(st=q[0],J=q[1],H=q[2],L=q[3]),[H,L,st,J,q[4]]):null}(f,A);if(C){var H=C[1],st=C[3],J=C[4],at=N(C[0],C[2]),it=N(H,st);return at.concat([[et,J]],it)}return function Y(f,A){for(var g=f.length,O=A.length,x=Math.ceil((g+O)/2),T=x,C=2*x,q=new Array(C),H=new Array(C),L=0;L<C;L++)q[L]=-1,H[L]=-1;q[T+1]=0,H[T+1]=0;for(var st=g-O,J=st%2!=0,at=0,it=0,Z=0,_t=0,Tt=0;Tt<x;Tt++){for(var lt=-Tt+at;lt<=Tt-it;lt+=2){for(var pt=T+lt,mt=(ft=lt===-Tt||lt!==Tt&&q[pt-1]<q[pt+1]?q[pt+1]:q[pt-1]+1)-lt;ft<g&&mt<O&&f.charAt(ft)===A.charAt(mt);)ft++,mt++;if(q[pt]=ft,ft>g)it+=2;else if(mt>O)at+=2;else if(J&&(bt=T+st-lt)>=0&&bt<C&&-1!==H[bt]&&ft>=(yt=g-H[bt]))return W(f,A,ft,mt)}for(var Lt=-Tt+Z;Lt<=Tt-_t;Lt+=2){for(var yt,bt=T+Lt,xt=(yt=Lt===-Tt||Lt!==Tt&&H[bt-1]<H[bt+1]?H[bt+1]:H[bt-1]+1)-Lt;yt<g&&xt<O&&f.charAt(g-yt-1)===A.charAt(O-xt-1);)yt++,xt++;if(H[bt]=yt,yt>g)_t+=2;else if(xt>O)Z+=2;else if(!J){var ft;if((pt=T+st-Lt)>=0&&pt<C&&-1!==q[pt])if(mt=T+(ft=q[pt])-pt,ft>=(yt=g-yt))return W(f,A,ft,mt)}}}return[[nt,f],[j,A]]}(f,A)}(f=f.substring(0,f.length-C),A=A.substring(0,A.length-C));return q&&L.unshift([et,q]),H&&L.push([et,H]),B(L,x),O&&function $(f){for(var A=!1,g=[],O=0,x=null,T=0,C=0,q=0,H=0,L=0;T<f.length;)f[T][0]==et?(g[O++]=T,C=H,q=L,H=0,L=0,x=f[T][1]):(f[T][0]==j?H+=f[T][1].length:L+=f[T][1].length,x&&x.length<=Math.max(C,q)&&x.length<=Math.max(H,L)&&(f.splice(g[O-1],0,[nt,x]),f[g[O-1]+1][0]=j,O--,T=--O>0?g[O-1]:-1,C=0,q=0,H=0,L=0,x=null,A=!0)),T++;for(A&&B(f),function V(f){function A(it,Z){if(!it||!Z)return 6;var _t=it.charAt(it.length-1),Tt=Z.charAt(0),lt=_t.match(p),pt=Tt.match(p),ft=lt&&_t.match(m),mt=pt&&Tt.match(m),bt=ft&&_t.match(_),yt=mt&&Tt.match(_),Lt=bt&&it.match(E),xt=yt&&Z.match(G);return Lt||xt?5:bt||yt?4:lt&&!ft&&mt?3:ft||mt?2:lt||pt?1:0}for(var g=1;g<f.length-1;){if(f[g-1][0]==et&&f[g+1][0]==et){var O=f[g-1][1],x=f[g][1],T=f[g+1][1],C=F(O,x);if(C){var q=x.substring(x.length-C);O=O.substring(0,O.length-C),x=q+x.substring(0,x.length-C),T=q+T}for(var H=O,L=x,st=T,J=A(O,x)+A(x,T);x.charAt(0)===T.charAt(0);){O+=x.charAt(0),x=x.substring(1)+T.charAt(0),T=T.substring(1);var at=A(O,x)+A(x,T);at>=J&&(J=at,H=O,L=x,st=T)}f[g-1][1]!=H&&(H?f[g-1][1]=H:(f.splice(g-1,1),g--),f[g][1]=L,st?f[g+1][1]=st:(f.splice(g+1,1),g--))}g++}}(f),T=1;T<f.length;){if(f[T-1][0]==nt&&f[T][0]==j){var st=f[T-1][1],J=f[T][1],at=K(st,J),it=K(J,st);at>=it?(at>=st.length/2||at>=J.length/2)&&(f.splice(T,0,[et,J.substring(0,at)]),f[T-1][1]=st.substring(0,st.length-at),f[T+1][1]=J.substring(at),T++):(it>=st.length/2||it>=J.length/2)&&(f.splice(T,0,[et,st.substring(0,it)]),f[T-1][0]=j,f[T-1][1]=J.substring(0,J.length-it),f[T+1][0]=nt,f[T+1][1]=st.substring(it),T++),T++}T++}}(L),L}function W(f,A,g,O){var x=f.substring(0,g),T=A.substring(0,O),C=f.substring(g),q=A.substring(O),H=N(x,T),L=N(C,q);return H.concat(L)}function D(f,A){if(!f||!A||f.charAt(0)!==A.charAt(0))return 0;for(var g=0,O=Math.min(f.length,A.length),x=O,T=0;g<x;)f.substring(T,x)==A.substring(T,x)?T=g=x:O=x,x=Math.floor((O-g)/2+g);return ot(f.charCodeAt(x-1))&&x--,x}function K(f,A){var g=f.length,O=A.length;if(0==g||0==O)return 0;g>O?f=f.substring(g-O):g<O&&(A=A.substring(0,g));var x=Math.min(g,O);if(f==A)return x;for(var T=0,C=1;;){var q=f.substring(x-C),H=A.indexOf(q);if(-1==H)return T;C+=H,(0==H||f.substring(x-C)==A.substring(0,C))&&(T=C,C++)}}function F(f,A){if(!f||!A||f.slice(-1)!==A.slice(-1))return 0;for(var g=0,O=Math.min(f.length,A.length),x=O,T=0;g<x;)f.substring(f.length-x,f.length-T)==A.substring(A.length-x,A.length-T)?T=g=x:O=x,x=Math.floor((O-g)/2+g);return Q(f.charCodeAt(f.length-x))&&x--,x}var p=/[^a-zA-Z0-9]/,m=/\s/,_=/[\r\n]/,E=/\n\r?\n$/,G=/^\r?\n\r?\n/;function B(f,A){f.push([et,""]);for(var q,g=0,O=0,x=0,T="",C="";g<f.length;)if(g<f.length-1&&!f[g][1])f.splice(g,1);else switch(f[g][0]){case j:x++,C+=f[g][1],g++;break;case nt:O++,T+=f[g][1],g++;break;case et:var H=g-x-O-1;if(A){if(H>=0&&vt(f[H][1])){var L=f[H][1].slice(-1);if(f[H][1]=f[H][1].slice(0,-1),T=L+T,C=L+C,!f[H][1]){f.splice(H,1),g--;var st=H-1;f[st]&&f[st][0]===j&&(x++,C=f[st][1]+C,st--),f[st]&&f[st][0]===nt&&(O++,T=f[st][1]+T,st--),H=st}}rt(f[g][1])&&(L=f[g][1].charAt(0),f[g][1]=f[g][1].slice(1),T+=L,C+=L)}if(g<f.length-1&&!f[g][1]){f.splice(g,1);break}if(T.length>0||C.length>0){T.length>0&&C.length>0&&(0!==(q=D(C,T))&&(H>=0?f[H][1]+=C.substring(0,q):(f.splice(0,0,[et,C.substring(0,q)]),g++),C=C.substring(q),T=T.substring(q)),0!==(q=F(C,T))&&(f[g][1]=C.substring(C.length-q)+f[g][1],C=C.substring(0,C.length-q),T=T.substring(0,T.length-q)));var J=x+O;0===T.length&&0===C.length?(f.splice(g-J,J),g-=J):0===T.length?(f.splice(g-J,J,[j,C]),g=g-J+1):0===C.length?(f.splice(g-J,J,[nt,T]),g=g-J+1):(f.splice(g-J,J,[nt,T],[j,C]),g=g-J+2)}0!==g&&f[g-1][0]===et?(f[g-1][1]+=f[g][1],f.splice(g,1)):g++,x=0,O=0,T="",C=""}""===f[f.length-1][1]&&f.pop();var at=!1;for(g=1;g<f.length-1;)f[g-1][0]===et&&f[g+1][0]===et&&(f[g][1].substring(f[g][1].length-f[g-1][1].length)===f[g-1][1]?(f[g][1]=f[g-1][1]+f[g][1].substring(0,f[g][1].length-f[g-1][1].length),f[g+1][1]=f[g-1][1]+f[g+1][1],f.splice(g-1,1),at=!0):f[g][1].substring(0,f[g+1][1].length)==f[g+1][1]&&(f[g-1][1]+=f[g+1][1],f[g][1]=f[g][1].substring(f[g+1][1].length)+f[g+1][1],f.splice(g+1,1),at=!0)),g++;at&&B(f,A)}function ot(f){return f>=55296&&f<=56319}function Q(f){return f>=56320&&f<=57343}function rt(f){return Q(f.charCodeAt(0))}function vt(f){return ot(f.charCodeAt(f.length-1))}function kt(f,A,g,O){return vt(f)||rt(O)?null:function Ct(f){for(var A=[],g=0;g<f.length;g++)f[g][1].length>0&&A.push(f[g]);return A}([[et,f],[nt,A],[j,g],[et,O]])}function Ht(f,A,g,O){return N(f,A,g,O,!0)}Ht.INSERT=j,Ht.DELETE=nt,Ht.EQUAL=et,wt.exports=Ht},5646:(wt,nt,j)=>{wt=j.nmd(wt);var N="__lodash_hash_undefined__",gt=9007199254740991,Y="[object Arguments]",D="[object Boolean]",K="[object Date]",w="[object Function]",$="[object GeneratorFunction]",p="[object Map]",m="[object Number]",_="[object Object]",E="[object Promise]",G="[object RegExp]",V="[object Set]",B="[object String]",ot="[object Symbol]",Q="[object WeakMap]",rt="[object ArrayBuffer]",vt="[object DataView]",Ct="[object Float32Array]",kt="[object Float64Array]",Gt="[object Int8Array]",Ht="[object Int16Array]",f="[object Int32Array]",A="[object Uint8Array]",g="[object Uint8ClampedArray]",O="[object Uint16Array]",x="[object Uint32Array]",C=/\w*$/,q=/^\[object .+?Constructor\]$/,H=/^(?:0|[1-9]\d*)$/,L={};L[Y]=L["[object Array]"]=L[rt]=L[vt]=L[D]=L[K]=L[Ct]=L[kt]=L[Gt]=L[Ht]=L[f]=L[p]=L[m]=L[_]=L[G]=L[V]=L[B]=L[ot]=L[A]=L[g]=L[O]=L[x]=!0,L["[object Error]"]=L[w]=L[Q]=!1;var st="object"==typeof global&&global&&global.Object===Object&&global,J="object"==typeof self&&self&&self.Object===Object&&self,at=st||J||Function("return this")(),it=nt&&!nt.nodeType&&nt,Z=it&&wt&&!wt.nodeType&&wt,_t=Z&&Z.exports===it;function Tt(l,c){return l.set(c[0],c[1]),l}function lt(l,c){return l.add(c),l}function mt(l,c,h,b){var tt=-1,I=l?l.length:0;for(b&&I&&(h=l[++tt]);++tt<I;)h=c(h,l[tt],tt,l);return h}function Lt(l){var c=!1;if(null!=l&&"function"!=typeof l.toString)try{c=!!(l+"")}catch(h){}return c}function xt(l){var c=-1,h=Array(l.size);return l.forEach(function(b,tt){h[++c]=[tt,b]}),h}function ln(l,c){return function(h){return l(c(h))}}function Vt(l){var c=-1,h=Array(l.size);return l.forEach(function(b){h[++c]=b}),h}var l,ns=Array.prototype,ss=Function.prototype,De=Object.prototype,on=at["__core-js_shared__"],In=(l=/[^.]+$/.exec(on&&on.keys&&on.keys.IE_PROTO||""))?"Symbol(src)_1."+l:"",je=ss.toString,te=De.hasOwnProperty,ve=De.toString,kn=RegExp("^"+je.call(te).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Se=_t?at.Buffer:void 0,Pe=at.Symbol,an=at.Uint8Array,zt=ln(Object.getPrototypeOf,Object),Rn=Object.create,ee=De.propertyIsEnumerable,rs=ns.splice,cn=Object.getOwnPropertySymbols,Ue=Se?Se.isBuffer:void 0,Bn=ln(Object.keys,Object),Fe=Yt(at,"DataView"),Ce=Yt(at,"Map"),Wt=Yt(at,"Promise"),He=Yt(at,"Set"),un=Yt(at,"WeakMap"),Le=Yt(Object,"create"),hn=qt(Fe),Oe=qt(Ce),Xt=qt(Wt),fn=qt(He),ue=qt(un),_e=Pe?Pe.prototype:void 0,Ee=_e?_e.valueOf:void 0;function he(l){var c=-1,h=l?l.length:0;for(this.clear();++c<h;){var b=l[c];this.set(b[0],b[1])}}function Rt(l){var c=-1,h=l?l.length:0;for(this.clear();++c<h;){var b=l[c];this.set(b[0],b[1])}}function Mt(l){var c=-1,h=l?l.length:0;for(this.clear();++c<h;){var b=l[c];this.set(b[0],b[1])}}function jt(l){this.__data__=new Rt(l)}function jn(l,c,h){var b=l[c];(!te.call(l,c)||!We(b,h)||void 0===h&&!(c in l))&&(l[c]=h)}function Ke(l,c){for(var h=l.length;h--;)if(We(l[h][0],c))return h;return-1}function gn(l,c,h,b,tt,I,ct){var ut;if(b&&(ut=I?b(l,tt,I,ct):b(l)),void 0!==ut)return ut;if(!ie(l))return l;var St=Ye(l);if(St){if(ut=function Un(l){var c=l.length,h=l.constructor(c);return c&&"string"==typeof l[0]&&te.call(l,"index")&&(h.index=l.index,h.input=l.input),h}(l),!c)return function mn(l,c){var h=-1,b=l.length;for(c||(c=Array(b));++h<b;)c[h]=l[h];return c}(l,ut)}else{var dt=se(l),Dt=dt==w||dt==$;if(vn(l))return function $e(l,c){if(c)return l.slice();var h=new l.constructor(l.length);return l.copy(h),h}(l,c);if(dt==_||dt==Y||Dt&&!I){if(Lt(l))return I?l:{};if(ut=function re(l){return"function"!=typeof l.constructor||zn(l)?{}:function _s(l){return ie(l)?Rn(l):{}}(zt(l))}(Dt?{}:l),!c)return function yn(l,c){return bn(l,de(l),c)}(l,function ne(l,c){return l&&bn(c,Tn(c),l)}(ut,l))}else{if(!L[dt])return I?l:{};ut=function Fn(l,c,h,b){var tt=l.constructor;switch(c){case rt:return pn(l);case D:case K:return new tt(+l);case vt:return function qe(l,c){var h=c?pn(l.buffer):l.buffer;return new l.constructor(h,l.byteOffset,l.byteLength)}(l,b);case Ct:case kt:case Gt:case Ht:case f:case A:case g:case O:case x:return function Ns(l,c){var h=c?pn(l.buffer):l.buffer;return new l.constructor(h,l.byteOffset,l.length)}(l,b);case p:return function fe(l,c,h){return mt(c?h(xt(l),!0):xt(l),Tt,new l.constructor)}(l,b,h);case m:case B:return new tt(l);case G:return function Ne(l){var c=new l.constructor(l.source,C.exec(l));return c.lastIndex=l.lastIndex,c}(l);case V:return function As(l,c,h){return mt(c?h(Vt(l),!0):Vt(l),lt,new l.constructor)}(l,b,h);case ot:return function Ge(l){return Ee?Object(Ee.call(l)):{}}(l)}}(l,dt,gn,c)}}ct||(ct=new jt);var Pt=ct.get(l);if(Pt)return Pt;if(ct.set(l,ut),!St)var Ot=h?function ws(l){return function Es(l,c,h){var b=c(l);return Ye(l)?b:function ft(l,c){for(var h=-1,b=c.length,tt=l.length;++h<b;)l[tt+h]=c[h];return l}(b,h(l))}(l,Tn,de)}(l):Tn(l);return function pt(l,c){for(var h=-1,b=l?l.length:0;++h<b&&!1!==c(l[h],h,l););}(Ot||l,function(It,Bt){Ot&&(It=l[Bt=It]),jn(ut,Bt,gn(It,c,h,b,Bt,l,ct))}),ut}function pn(l){var c=new l.constructor(l.byteLength);return new an(c).set(new an(l)),c}function bn(l,c,h,b){h||(h={});for(var tt=-1,I=c.length;++tt<I;){var ct=c[tt],ut=b?b(h[ct],l[ct],ct,h,l):void 0;jn(h,ct,void 0===ut?l[ct]:ut)}return h}function Ve(l,c){var h=l.__data__;return function xs(l){var c=typeof l;return"string"==c||"number"==c||"symbol"==c||"boolean"==c?"__proto__"!==l:null===l}(c)?h["string"==typeof c?"string":"hash"]:h.map}function Yt(l,c){var h=function yt(l,c){return null==l?void 0:l[c]}(l,c);return function Ae(l){return!(!ie(l)||function Zn(l){return!!In&&In in l}(l))&&(_n(l)||Lt(l)?kn:q).test(qt(l))}(h)?h:void 0}he.prototype.clear=function is(){this.__data__=Le?Le(null):{}},he.prototype.delete=function ls(l){return this.has(l)&&delete this.__data__[l]},he.prototype.get=function os(l){var c=this.__data__;if(Le){var h=c[l];return h===N?void 0:h}return te.call(c,l)?c[l]:void 0},he.prototype.has=function Mn(l){var c=this.__data__;return Le?void 0!==c[l]:te.call(c,l)},he.prototype.set=function dn(l,c){return this.__data__[l]=Le&&void 0===c?N:c,this},Rt.prototype.clear=function as(){this.__data__=[]},Rt.prototype.delete=function cs(l){var c=this.__data__,h=Ke(c,l);return!(h<0||(h==c.length-1?c.pop():rs.call(c,h,1),0))},Rt.prototype.get=function us(l){var c=this.__data__,h=Ke(c,l);return h<0?void 0:c[h][1]},Rt.prototype.has=function hs(l){return Ke(this.__data__,l)>-1},Rt.prototype.set=function fs(l,c){var h=this.__data__,b=Ke(h,l);return b<0?h.push([l,c]):h[b][1]=c,this},Mt.prototype.clear=function ds(){this.__data__={hash:new he,map:new(Ce||Rt),string:new he}},Mt.prototype.delete=function gs(l){return Ve(this,l).delete(l)},Mt.prototype.get=function ps(l){return Ve(this,l).get(l)},Mt.prototype.has=function Te(l){return Ve(this,l).has(l)},Mt.prototype.set=function Dn(l,c){return Ve(this,l).set(l,c),this},jt.prototype.clear=function ms(){this.__data__=new Rt},jt.prototype.delete=function bs(l){return this.__data__.delete(l)},jt.prototype.get=function ys(l){return this.__data__.get(l)},jt.prototype.has=function vs(l){return this.__data__.has(l)},jt.prototype.set=function Ze(l,c){var h=this.__data__;if(h instanceof Rt){var b=h.__data__;if(!Ce||b.length<199)return b.push([l,c]),this;h=this.__data__=new Mt(b)}return h.set(l,c),this};var de=cn?ln(cn,Object):function An(){return[]},se=function Ts(l){return ve.call(l)};function Hn(l,c){return!!(c=null==c?gt:c)&&("number"==typeof l||H.test(l))&&l>-1&&l%1==0&&l<c}function zn(l){var c=l&&l.constructor;return l===("function"==typeof c&&c.prototype||De)}function qt(l){if(null!=l){try{return je.call(l)}catch(c){}try{return l+""}catch(c){}}return""}function We(l,c){return l===c||l!=l&&c!=c}(Fe&&se(new Fe(new ArrayBuffer(1)))!=vt||Ce&&se(new Ce)!=p||Wt&&se(Wt.resolve())!=E||He&&se(new He)!=V||un&&se(new un)!=Q)&&(se=function(l){var c=ve.call(l),h=c==_?l.constructor:void 0,b=h?qt(h):void 0;if(b)switch(b){case hn:return vt;case Oe:return p;case Xt:return E;case fn:return V;case ue:return Q}return c});var Ye=Array.isArray;function Qe(l){return null!=l&&function Gn(l){return"number"==typeof l&&l>-1&&l%1==0&&l<=gt}(l.length)&&!_n(l)}var vn=Ue||function Ss(){return!1};function _n(l){var c=ie(l)?ve.call(l):"";return c==w||c==$}function ie(l){var c=typeof l;return!!l&&("object"==c||"function"==c)}function Tn(l){return Qe(l)?function ze(l,c){var h=Ye(l)||function Xe(l){return function $n(l){return function En(l){return!!l&&"object"==typeof l}(l)&&Qe(l)}(l)&&te.call(l,"callee")&&(!ee.call(l,"callee")||ve.call(l)==Y)}(l)?function bt(l,c){for(var h=-1,b=Array(l);++h<l;)b[h]=c(h);return b}(l.length,String):[],b=h.length,tt=!!b;for(var I in l)(c||te.call(l,I))&&(!tt||"length"!=I&&!Hn(I,b))&&h.push(I);return h}(l):function Pn(l){if(!zn(l))return Bn(l);var c=[];for(var h in Object(l))te.call(l,h)&&"constructor"!=h&&c.push(h);return c}(l)}wt.exports=function Kn(l){return gn(l,!0,!0)}},2650:(wt,nt,j)=>{wt=j.nmd(wt);var N="__lodash_hash_undefined__",gt=1,Y=2,W=9007199254740991,D="[object Arguments]",K="[object Array]",F="[object AsyncFunction]",w="[object Boolean]",$="[object Date]",p="[object Error]",m="[object Function]",_="[object GeneratorFunction]",E="[object Map]",G="[object Number]",V="[object Null]",B="[object Object]",ot="[object Promise]",Q="[object Proxy]",rt="[object RegExp]",vt="[object Set]",Ct="[object String]",Gt="[object Undefined]",Ht="[object WeakMap]",f="[object ArrayBuffer]",A="[object DataView]",at=/^\[object .+?Constructor\]$/,it=/^(?:0|[1-9]\d*)$/,Z={};Z["[object Float32Array]"]=Z["[object Float64Array]"]=Z["[object Int8Array]"]=Z["[object Int16Array]"]=Z["[object Int32Array]"]=Z["[object Uint8Array]"]=Z["[object Uint8ClampedArray]"]=Z["[object Uint16Array]"]=Z["[object Uint32Array]"]=!0,Z[D]=Z[K]=Z[f]=Z[w]=Z[A]=Z[$]=Z[p]=Z[m]=Z[E]=Z[G]=Z[B]=Z[rt]=Z[vt]=Z[Ct]=Z[Ht]=!1;var _t="object"==typeof global&&global&&global.Object===Object&&global,Tt="object"==typeof self&&self&&self.Object===Object&&self,lt=_t||Tt||Function("return this")(),pt=nt&&!nt.nodeType&&nt,ft=pt&&wt&&!wt.nodeType&&wt,mt=ft&&ft.exports===pt,bt=mt&&_t.process,yt=function(){try{return bt&&bt.binding&&bt.binding("util")}catch(l){}}(),Lt=yt&&yt.isTypedArray;function Vt(l,c){for(var h=-1,b=null==l?0:l.length;++h<b;)if(c(l[h],h,l))return!0;return!1}function De(l,c){return l.has(c)}function In(l){var c=-1,h=Array(l.size);return l.forEach(function(b,tt){h[++c]=[tt,b]}),h}function te(l){var c=-1,h=Array(l.size);return l.forEach(function(b){h[++c]=b}),h}var l,ve=Array.prototype,Se=Object.prototype,Pe=lt["__core-js_shared__"],an=Function.prototype.toString,zt=Se.hasOwnProperty,Rn=(l=/[^.]+$/.exec(Pe&&Pe.keys&&Pe.keys.IE_PROTO||""))?"Symbol(src)_1."+l:"",ee=Se.toString,rs=RegExp("^"+an.call(zt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),cn=mt?lt.Buffer:void 0,Ue=lt.Symbol,Bn=lt.Uint8Array,Fe=Se.propertyIsEnumerable,Ce=ve.splice,Wt=Ue?Ue.toStringTag:void 0,He=Object.getOwnPropertySymbols,un=cn?cn.isBuffer:void 0,Le=function je(l,c){return function(h){return l(c(h))}}(Object.keys,Object),hn=de(lt,"DataView"),Oe=de(lt,"Map"),Xt=de(lt,"Promise"),fn=de(lt,"Set"),ue=de(lt,"WeakMap"),_e=de(Object,"create"),Ee=qt(hn),he=qt(Oe),is=qt(Xt),ls=qt(fn),os=qt(ue),Mn=Ue?Ue.prototype:void 0,dn=Mn?Mn.valueOf:void 0;function Rt(l){var c=-1,h=null==l?0:l.length;for(this.clear();++c<h;){var b=l[c];this.set(b[0],b[1])}}function Mt(l){var c=-1,h=null==l?0:l.length;for(this.clear();++c<h;){var b=l[c];this.set(b[0],b[1])}}function jt(l){var c=-1,h=null==l?0:l.length;for(this.clear();++c<h;){var b=l[c];this.set(b[0],b[1])}}function ze(l){var c=-1,h=null==l?0:l.length;for(this.__data__=new jt;++c<h;)this.add(l[c])}function ne(l){var c=this.__data__=new Mt(l);this.size=c.size}function $e(l,c){for(var h=l.length;h--;)if(Kn(l[h][0],c))return h;return-1}function qe(l){return null==l?void 0===l?Gt:V:Wt&&Wt in Object(l)?function se(l){var c=zt.call(l,Wt),h=l[Wt];try{l[Wt]=void 0;var b=!0}catch(I){}var tt=ee.call(l);return b&&(c?l[Wt]=h:delete l[Wt]),tt}(l):function zn(l){return ee.call(l)}(l)}function fe(l){return ie(l)&&qe(l)==D}function Ne(l,c,h,b,tt){return l===c||(null==l||null==c||!ie(l)&&!ie(c)?l!=l&&c!=c:function As(l,c,h,b,tt,I){var ct=Xe(l),ut=Xe(c),St=ct?K:re(l),dt=ut?K:re(c),Dt=(St=St==D?B:St)==B,Pt=(dt=dt==D?B:dt)==B,Ot=St==dt;if(Ot&&Qe(l)){if(!Qe(c))return!1;ct=!0,Dt=!1}if(Ot&&!Dt)return I||(I=new ne),ct||En(l)?bn(l,c,h,b,tt,I):function yn(l,c,h,b,tt,I,ct){switch(h){case A:if(l.byteLength!=c.byteLength||l.byteOffset!=c.byteOffset)return!1;l=l.buffer,c=c.buffer;case f:return!(l.byteLength!=c.byteLength||!I(new Bn(l),new Bn(c)));case w:case $:case G:return Kn(+l,+c);case p:return l.name==c.name&&l.message==c.message;case rt:case Ct:return l==c+"";case E:var ut=In;case vt:if(ut||(ut=te),l.size!=c.size&&!(b&gt))return!1;var dt=ct.get(l);if(dt)return dt==c;b|=Y,ct.set(l,c);var Dt=bn(ut(l),ut(c),b,tt,I,ct);return ct.delete(l),Dt;case"[object Symbol]":if(dn)return dn.call(l)==dn.call(c)}return!1}(l,c,St,h,b,tt,I);if(!(h&gt)){var It=Dt&&zt.call(l,"__wrapped__"),Bt=Pt&&zt.call(c,"__wrapped__");if(It||Bt){var Ut=It?l.value():l,ge=Bt?c.value():c;return I||(I=new ne),tt(Ut,ge,h,b,I)}}return!!Ot&&(I||(I=new ne),function ws(l,c,h,b,tt,I){var ct=h&gt,ut=Ve(l),St=ut.length;if(St!=Ve(c).length&&!ct)return!1;for(var Pt=St;Pt--;){var Ot=ut[Pt];if(!(ct?Ot in c:zt.call(c,Ot)))return!1}var It=I.get(l);if(It&&I.get(c))return It==c;var Bt=!0;I.set(l,c),I.set(c,l);for(var Ut=ct;++Pt<St;){var ge=l[Ot=ut[Pt]],Ie=c[Ot];if(b)var Cs=ct?b(Ie,ge,Ot,c,l,I):b(ge,Ie,Ot,l,c,I);if(!(void 0===Cs?ge===Ie||tt(ge,Ie,h,b,I):Cs)){Bt=!1;break}Ut||(Ut="constructor"==Ot)}if(Bt&&!Ut){var Vn=l.constructor,ke=c.constructor;Vn!=ke&&"constructor"in l&&"constructor"in c&&!("function"==typeof Vn&&Vn instanceof Vn&&"function"==typeof ke&&ke instanceof ke)&&(Bt=!1)}return I.delete(l),I.delete(c),Bt}(l,c,h,b,tt,I))}(l,c,h,b,Ne,tt))}function bn(l,c,h,b,tt,I){var ct=h&gt,ut=l.length,St=c.length;if(ut!=St&&!(ct&&St>ut))return!1;var dt=I.get(l);if(dt&&I.get(c))return dt==c;var Dt=-1,Pt=!0,Ot=h&Y?new ze:void 0;for(I.set(l,c),I.set(c,l);++Dt<ut;){var It=l[Dt],Bt=c[Dt];if(b)var Ut=ct?b(Bt,It,Dt,c,l,I):b(It,Bt,Dt,l,c,I);if(void 0!==Ut){if(Ut)continue;Pt=!1;break}if(Ot){if(!Vt(c,function(ge,Ie){if(!De(Ot,Ie)&&(It===ge||tt(It,ge,h,b,I)))return Ot.push(Ie)})){Pt=!1;break}}else if(It!==Bt&&!tt(It,Bt,h,b,I)){Pt=!1;break}}return I.delete(l),I.delete(c),Pt}function Ve(l){return function pn(l,c,h){var b=c(l);return Xe(l)?b:function ln(l,c){for(var h=-1,b=c.length,tt=l.length;++h<b;)l[tt+h]=c[h];return l}(b,h(l))}(l,Tn,Un)}function Yt(l,c){var h=l.__data__;return function Hn(l){var c=typeof l;return"string"==c||"number"==c||"symbol"==c||"boolean"==c?"__proto__"!==l:null===l}(c)?h["string"==typeof c?"string":"hash"]:h.map}function de(l,c){var h=function on(l,c){return null==l?void 0:l[c]}(l,c);return function Ge(l){return!(!Gn(l)||function xs(l){return!!Rn&&Rn in l}(l))&&(vn(l)?rs:at).test(qt(l))}(h)?h:void 0}Rt.prototype.clear=function as(){this.__data__=_e?_e(null):{},this.size=0},Rt.prototype.delete=function cs(l){var c=this.has(l)&&delete this.__data__[l];return this.size-=c?1:0,c},Rt.prototype.get=function us(l){var c=this.__data__;if(_e){var h=c[l];return h===N?void 0:h}return zt.call(c,l)?c[l]:void 0},Rt.prototype.has=function hs(l){var c=this.__data__;return _e?void 0!==c[l]:zt.call(c,l)},Rt.prototype.set=function fs(l,c){var h=this.__data__;return this.size+=this.has(l)?0:1,h[l]=_e&&void 0===c?N:c,this},Mt.prototype.clear=function ds(){this.__data__=[],this.size=0},Mt.prototype.delete=function gs(l){var c=this.__data__,h=$e(c,l);return!(h<0||(h==c.length-1?c.pop():Ce.call(c,h,1),--this.size,0))},Mt.prototype.get=function ps(l){var c=this.__data__,h=$e(c,l);return h<0?void 0:c[h][1]},Mt.prototype.has=function Te(l){return $e(this.__data__,l)>-1},Mt.prototype.set=function Dn(l,c){var h=this.__data__,b=$e(h,l);return b<0?(++this.size,h.push([l,c])):h[b][1]=c,this},jt.prototype.clear=function ms(){this.size=0,this.__data__={hash:new Rt,map:new(Oe||Mt),string:new Rt}},jt.prototype.delete=function bs(l){var c=Yt(this,l).delete(l);return this.size-=c?1:0,c},jt.prototype.get=function ys(l){return Yt(this,l).get(l)},jt.prototype.has=function vs(l){return Yt(this,l).has(l)},jt.prototype.set=function Ze(l,c){var h=Yt(this,l),b=h.size;return h.set(l,c),this.size+=h.size==b?0:1,this},ze.prototype.add=ze.prototype.push=function jn(l){return this.__data__.set(l,N),this},ze.prototype.has=function Ke(l){return this.__data__.has(l)},ne.prototype.clear=function gn(){this.__data__=new Mt,this.size=0},ne.prototype.delete=function _s(l){var c=this.__data__,h=c.delete(l);return this.size=c.size,h},ne.prototype.get=function Es(l){return this.__data__.get(l)},ne.prototype.has=function Ts(l){return this.__data__.has(l)},ne.prototype.set=function Ae(l,c){var h=this.__data__;if(h instanceof Mt){var b=h.__data__;if(!Oe||b.length<199)return b.push([l,c]),this.size=++h.size,this;h=this.__data__=new jt(b)}return h.set(l,c),this.size=h.size,this};var Un=He?function(l){return null==l?[]:(l=Object(l),function xt(l,c){for(var h=-1,b=null==l?0:l.length,tt=0,I=[];++h<b;){var ct=l[h];c(ct,h,l)&&(I[tt++]=ct)}return I}(He(l),function(c){return Fe.call(l,c)}))}:function An(){return[]},re=qe;function Fn(l,c){return!!(c=null==c?W:c)&&("number"==typeof l||it.test(l))&&l>-1&&l%1==0&&l<c}function qt(l){if(null!=l){try{return an.call(l)}catch(c){}try{return l+""}catch(c){}}return""}function Kn(l,c){return l===c||l!=l&&c!=c}(hn&&re(new hn(new ArrayBuffer(1)))!=A||Oe&&re(new Oe)!=E||Xt&&re(Xt.resolve())!=ot||fn&&re(new fn)!=vt||ue&&re(new ue)!=Ht)&&(re=function(l){var c=qe(l),h=c==B?l.constructor:void 0,b=h?qt(h):"";if(b)switch(b){case Ee:return A;case he:return E;case is:return ot;case ls:return vt;case os:return Ht}return c});var We=fe(function(){return arguments}())?fe:function(l){return ie(l)&&zt.call(l,"callee")&&!Fe.call(l,"callee")},Xe=Array.isArray,Qe=un||function Ss(){return!1};function vn(l){if(!Gn(l))return!1;var c=qe(l);return c==m||c==_||c==F||c==Q}function _n(l){return"number"==typeof l&&l>-1&&l%1==0&&l<=W}function Gn(l){var c=typeof l;return null!=l&&("object"==c||"function"==c)}function ie(l){return null!=l&&"object"==typeof l}var En=Lt?function ss(l){return function(c){return l(c)}}(Lt):function Ns(l){return ie(l)&&_n(l.length)&&!!Z[qe(l)]};function Tn(l){return function Ye(l){return null!=l&&_n(l.length)&&!vn(l)}(l)?function Pn(l,c){var h=Xe(l),b=!h&&We(l),tt=!h&&!b&&Qe(l),I=!h&&!b&&!tt&&En(l),ct=h||b||tt||I,ut=ct?function ns(l,c){for(var h=-1,b=Array(l);++h<l;)b[h]=c(h);return b}(l.length,String):[],St=ut.length;for(var dt in l)(c||zt.call(l,dt))&&(!ct||!("length"==dt||tt&&("offset"==dt||"parent"==dt)||I&&("buffer"==dt||"byteLength"==dt||"byteOffset"==dt)||Fn(dt,St)))&&ut.push(dt);return ut}(l):function mn(l){if(!function Zn(l){var c=l&&l.constructor;return l===("function"==typeof c&&c.prototype||Se)}(l))return Le(l);var c=[];for(var h in Object(l))zt.call(l,h)&&"constructor"!=h&&c.push(h);return c}(l)}wt.exports=function $n(l,c){return Ne(l,c)}},6038:(wt,nt,j)=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});const et=j(5646),N=j(2650);var gt,Y;(Y=gt||(gt={})).compose=function W(w={},$={},p=!1){"object"!=typeof w&&(w={}),"object"!=typeof $&&($={});let m=et($);p||(m=Object.keys(m).reduce((_,E)=>(null!=m[E]&&(_[E]=m[E]),_),{}));for(const _ in w)void 0!==w[_]&&void 0===$[_]&&(m[_]=w[_]);return Object.keys(m).length>0?m:void 0},Y.diff=function D(w={},$={}){"object"!=typeof w&&(w={}),"object"!=typeof $&&($={});const p=Object.keys(w).concat(Object.keys($)).reduce((m,_)=>(N(w[_],$[_])||(m[_]=void 0===$[_]?null:$[_]),m),{});return Object.keys(p).length>0?p:void 0},Y.invert=function K(w={},$={}){w=w||{};const p=Object.keys($).reduce((m,_)=>($[_]!==w[_]&&void 0!==w[_]&&(m[_]=$[_]),m),{});return Object.keys(w).reduce((m,_)=>(w[_]!==$[_]&&void 0===$[_]&&(m[_]=null),m),p)},Y.transform=function F(w,$,p=!1){if("object"!=typeof w)return $;if("object"!=typeof $)return;if(!p)return $;const m=Object.keys($).reduce((_,E)=>(void 0===w[E]&&(_[E]=$[E]),_),{});return Object.keys(m).length>0?m:void 0},nt.default=gt},2727:(wt,nt,j)=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0}),nt.AttributeMap=nt.OpIterator=nt.Op=void 0;const et=j(5739),N=j(5646),gt=j(2650),Y=j(6038);nt.AttributeMap=Y.default;const W=j(4411);nt.Op=W.default;const D=j(530);nt.OpIterator=D.default;const F=($,p)=>{if("object"!=typeof $||null===$)throw new Error("cannot retain a ".concat(typeof $));if("object"!=typeof p||null===p)throw new Error("cannot retain a ".concat(typeof p));const m=Object.keys($)[0];if(!m||m!==Object.keys(p)[0])throw new Error("embed types not matched: ".concat(m," != ").concat(Object.keys(p)[0]));return[m,$[m],p[m]]};class w{constructor(p){this.ops=Array.isArray(p)?p:null!=p&&Array.isArray(p.ops)?p.ops:[]}static registerEmbed(p,m){this.handlers[p]=m}static unregisterEmbed(p){delete this.handlers[p]}static getHandler(p){const m=this.handlers[p];if(!m)throw new Error('no handlers for embed type "'.concat(p,'"'));return m}insert(p,m){const _={};return"string"==typeof p&&0===p.length?this:(_.insert=p,null!=m&&"object"==typeof m&&Object.keys(m).length>0&&(_.attributes=m),this.push(_))}delete(p){return p<=0?this:this.push({delete:p})}retain(p,m){if("number"==typeof p&&p<=0)return this;const _={retain:p};return null!=m&&"object"==typeof m&&Object.keys(m).length>0&&(_.attributes=m),this.push(_)}push(p){let m=this.ops.length,_=this.ops[m-1];if(p=N(p),"object"==typeof _){if("number"==typeof p.delete&&"number"==typeof _.delete)return this.ops[m-1]={delete:_.delete+p.delete},this;if("number"==typeof _.delete&&null!=p.insert&&(m-=1,_=this.ops[m-1],"object"!=typeof _))return this.ops.unshift(p),this;if(gt(p.attributes,_.attributes)){if("string"==typeof p.insert&&"string"==typeof _.insert)return this.ops[m-1]={insert:_.insert+p.insert},"object"==typeof p.attributes&&(this.ops[m-1].attributes=p.attributes),this;if("number"==typeof p.retain&&"number"==typeof _.retain)return this.ops[m-1]={retain:_.retain+p.retain},"object"==typeof p.attributes&&(this.ops[m-1].attributes=p.attributes),this}}return m===this.ops.length?this.ops.push(p):this.ops.splice(m,0,p),this}chop(){const p=this.ops[this.ops.length-1];return p&&"number"==typeof p.retain&&!p.attributes&&this.ops.pop(),this}filter(p){return this.ops.filter(p)}forEach(p){this.ops.forEach(p)}map(p){return this.ops.map(p)}partition(p){const m=[],_=[];return this.forEach(E=>{(p(E)?m:_).push(E)}),[m,_]}reduce(p,m){return this.ops.reduce(p,m)}changeLength(){return this.reduce((p,m)=>m.insert?p+W.default.length(m):m.delete?p-m.delete:p,0)}length(){return this.reduce((p,m)=>p+W.default.length(m),0)}slice(p=0,m=1/0){const _=[],E=new D.default(this.ops);let G=0;for(;G<m&&E.hasNext();){let V;G<p?V=E.next(p-G):(V=E.next(m-G),_.push(V)),G+=W.default.length(V)}return new w(_)}compose(p){const m=new D.default(this.ops),_=new D.default(p.ops),E=[],G=_.peek();if(null!=G&&"number"==typeof G.retain&&null==G.attributes){let B=G.retain;for(;"insert"===m.peekType()&&m.peekLength()<=B;)B-=m.peekLength(),E.push(m.next());G.retain-B>0&&_.next(G.retain-B)}const V=new w(E);for(;m.hasNext()||_.hasNext();)if("insert"===_.peekType())V.push(_.next());else if("delete"===m.peekType())V.push(m.next());else{const B=Math.min(m.peekLength(),_.peekLength()),ot=m.next(B),Q=_.next(B);if(Q.retain){const rt={};if("number"==typeof ot.retain)rt.retain="number"==typeof Q.retain?B:Q.retain;else if("number"==typeof Q.retain)null==ot.retain?rt.insert=ot.insert:rt.retain=ot.retain;else{const Ct=null==ot.retain?"insert":"retain",[kt,Gt,Ht]=F(ot[Ct],Q.retain),f=w.getHandler(kt);rt[Ct]={[kt]:f.compose(Gt,Ht,"retain"===Ct)}}const vt=Y.default.compose(ot.attributes,Q.attributes,"number"==typeof ot.retain);if(vt&&(rt.attributes=vt),V.push(rt),!_.hasNext()&&gt(V.ops[V.ops.length-1],rt)){const Ct=new w(m.rest());return V.concat(Ct).chop()}}else"number"==typeof Q.delete&&("number"==typeof ot.retain||"object"==typeof ot.retain&&null!==ot.retain)&&V.push(Q)}return V.chop()}concat(p){const m=new w(this.ops.slice());return p.ops.length>0&&(m.push(p.ops[0]),m.ops=m.ops.concat(p.ops.slice(1))),m}diff(p,m){if(this.ops===p.ops)return new w;const _=[this,p].map(ot=>ot.map(Q=>{if(null!=Q.insert)return"string"==typeof Q.insert?Q.insert:"\0";throw new Error("diff() called "+(ot===p?"on":"with")+" non-document")}).join("")),E=new w,G=et(_[0],_[1],m,!0),V=new D.default(this.ops),B=new D.default(p.ops);return G.forEach(ot=>{let Q=ot[1].length;for(;Q>0;){let rt=0;switch(ot[0]){case et.INSERT:rt=Math.min(B.peekLength(),Q),E.push(B.next(rt));break;case et.DELETE:rt=Math.min(Q,V.peekLength()),V.next(rt),E.delete(rt);break;case et.EQUAL:rt=Math.min(V.peekLength(),B.peekLength(),Q);const vt=V.next(rt),Ct=B.next(rt);gt(vt.insert,Ct.insert)?E.retain(rt,Y.default.diff(vt.attributes,Ct.attributes)):E.push(Ct).delete(rt)}Q-=rt}}),E.chop()}eachLine(p,m="\n"){const _=new D.default(this.ops);let E=new w,G=0;for(;_.hasNext();){if("insert"!==_.peekType())return;const V=_.peek(),B=W.default.length(V)-_.peekLength(),ot="string"==typeof V.insert?V.insert.indexOf(m,B)-B:-1;if(ot<0)E.push(_.next());else if(ot>0)E.push(_.next(ot));else{if(!1===p(E,_.next(1).attributes||{},G))return;G+=1,E=new w}}E.length()>0&&p(E,{},G)}invert(p){const m=new w;return this.reduce((_,E)=>{if(E.insert)m.delete(W.default.length(E));else{if("number"==typeof E.retain&&null==E.attributes)return m.retain(E.retain),_+E.retain;if(E.delete||"number"==typeof E.retain){const G=E.delete||E.retain;return p.slice(_,_+G).forEach(B=>{E.delete?m.push(B):E.retain&&E.attributes&&m.retain(W.default.length(B),Y.default.invert(E.attributes,B.attributes))}),_+G}if("object"==typeof E.retain&&null!==E.retain){const G=p.slice(_,_+1),V=new D.default(G.ops).next(),[B,ot,Q]=F(E.retain,V.insert),rt=w.getHandler(B);return m.retain({[B]:rt.invert(ot,Q)},Y.default.invert(E.attributes,V.attributes)),_+1}}return _},0),m.chop()}transform(p,m=!1){if(m=!!m,"number"==typeof p)return this.transformPosition(p,m);const _=p,E=new D.default(this.ops),G=new D.default(_.ops),V=new w;for(;E.hasNext()||G.hasNext();)if("insert"!==E.peekType()||!m&&"insert"===G.peekType())if("insert"===G.peekType())V.push(G.next());else{const B=Math.min(E.peekLength(),G.peekLength()),ot=E.next(B),Q=G.next(B);if(ot.delete)continue;if(Q.delete)V.push(Q);else{const rt=ot.retain,vt=Q.retain;let Ct="object"==typeof vt&&null!==vt?vt:B;if("object"==typeof rt&&null!==rt&&"object"==typeof vt&&null!==vt){const kt=Object.keys(rt)[0];if(kt===Object.keys(vt)[0]){const Gt=w.getHandler(kt);Gt&&(Ct={[kt]:Gt.transform(rt[kt],vt[kt],m)})}}V.retain(Ct,Y.default.transform(ot.attributes,Q.attributes,m))}}else V.retain(W.default.length(E.next()));return V.chop()}transformPosition(p,m=!1){m=!!m;const _=new D.default(this.ops);let E=0;for(;_.hasNext()&&E<=p;){const G=_.peekLength(),V=_.peekType();_.next(),"delete"!==V?("insert"===V&&(E<p||!m)&&(p+=G),E+=G):p-=Math.min(G,p-E)}return p}}w.Op=W.default,w.OpIterator=D.default,w.AttributeMap=Y.default,w.handlers={},nt.default=w,wt.exports=w,wt.exports.default=w},4411:(wt,nt)=>{"use strict";var j;Object.defineProperty(nt,"__esModule",{value:!0}),(j||(j={})).length=function N(gt){return"number"==typeof gt.delete?gt.delete:"number"==typeof gt.retain?gt.retain:"object"==typeof gt.retain&&null!==gt.retain?1:"string"==typeof gt.insert?gt.insert.length:1},nt.default=j},530:(wt,nt,j)=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});const et=j(4411);nt.default=class N{constructor(Y){this.ops=Y,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(Y){Y||(Y=1/0);const W=this.ops[this.index];if(W){const D=this.offset,K=et.default.length(W);if(Y>=K-D?(Y=K-D,this.index+=1,this.offset=0):this.offset+=Y,"number"==typeof W.delete)return{delete:Y};{const F={};return W.attributes&&(F.attributes=W.attributes),"number"==typeof W.retain?F.retain=Y:"object"==typeof W.retain&&null!==W.retain?F.retain=W.retain:F.insert="string"==typeof W.insert?W.insert.substr(D,Y):W.insert,F}}return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?et.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const Y=this.ops[this.index];return Y?"number"==typeof Y.delete?"delete":"number"==typeof Y.retain||"object"==typeof Y.retain&&null!==Y.retain?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);{const Y=this.offset,W=this.index,D=this.next(),K=this.ops.slice(this.index);return this.offset=Y,this.index=W,[D].concat(K)}}return[]}}},9335:wt=>{"use strict";var nt=Object.prototype.hasOwnProperty,j="~";function et(){}function N(D,K,F){this.fn=D,this.context=K,this.once=F||!1}function gt(D,K,F,w,$){if("function"!=typeof F)throw new TypeError("The listener must be a function");var p=new N(F,w||D,$),m=j?j+K:K;return D._events[m]?D._events[m].fn?D._events[m]=[D._events[m],p]:D._events[m].push(p):(D._events[m]=p,D._eventsCount++),D}function Y(D,K){0==--D._eventsCount?D._events=new et:delete D._events[K]}function W(){this._events=new et,this._eventsCount=0}Object.create&&(et.prototype=Object.create(null),(new et).__proto__||(j=!1)),W.prototype.eventNames=function(){var F,w,K=[];if(0===this._eventsCount)return K;for(w in F=this._events)nt.call(F,w)&&K.push(j?w.slice(1):w);return Object.getOwnPropertySymbols?K.concat(Object.getOwnPropertySymbols(F)):K},W.prototype.listeners=function(K){var w=this._events[j?j+K:K];if(!w)return[];if(w.fn)return[w.fn];for(var $=0,p=w.length,m=new Array(p);$<p;$++)m[$]=w[$].fn;return m},W.prototype.listenerCount=function(K){var w=this._events[j?j+K:K];return w?w.fn?1:w.length:0},W.prototype.emit=function(K,F,w,$,p,m){var _=j?j+K:K;if(!this._events[_])return!1;var V,B,E=this._events[_],G=arguments.length;if(E.fn){switch(E.once&&this.removeListener(K,E.fn,void 0,!0),G){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,F),!0;case 3:return E.fn.call(E.context,F,w),!0;case 4:return E.fn.call(E.context,F,w,$),!0;case 5:return E.fn.call(E.context,F,w,$,p),!0;case 6:return E.fn.call(E.context,F,w,$,p,m),!0}for(B=1,V=new Array(G-1);B<G;B++)V[B-1]=arguments[B];E.fn.apply(E.context,V)}else{var Q,ot=E.length;for(B=0;B<ot;B++)switch(E[B].once&&this.removeListener(K,E[B].fn,void 0,!0),G){case 1:E[B].fn.call(E[B].context);break;case 2:E[B].fn.call(E[B].context,F);break;case 3:E[B].fn.call(E[B].context,F,w);break;case 4:E[B].fn.call(E[B].context,F,w,$);break;default:if(!V)for(Q=1,V=new Array(G-1);Q<G;Q++)V[Q-1]=arguments[Q];E[B].fn.apply(E[B].context,V)}}return!0},W.prototype.on=function(K,F,w){return gt(this,K,F,w,!1)},W.prototype.once=function(K,F,w){return gt(this,K,F,w,!0)},W.prototype.removeListener=function(K,F,w,$){var p=j?j+K:K;if(!this._events[p])return this;if(!F)return Y(this,p),this;var m=this._events[p];if(m.fn)m.fn===F&&(!$||m.once)&&(!w||m.context===w)&&Y(this,p);else{for(var _=0,E=[],G=m.length;_<G;_++)(m[_].fn!==F||$&&!m[_].once||w&&m[_].context!==w)&&E.push(m[_]);E.length?this._events[p]=1===E.length?E[0]:E:Y(this,p)}return this},W.prototype.removeAllListeners=function(K){var F;return K?this._events[F=j?j+K:K]&&Y(this,F):(this._events=new et,this._eventsCount=0),this},W.prototype.off=W.prototype.removeListener,W.prototype.addListener=W.prototype.on,W.prefixed=j,W.EventEmitter=W,wt.exports=W},2288:(wt,nt,j)=>{"use strict";j.r(nt),j.d(nt,{default:()=>md});var et={};j.r(et),j.d(et,{Attributor:()=>we,AttributorStore:()=>zs,BlockBlot:()=>Bs,ClassAttributor:()=>pe,ContainerBlot:()=>Ks,EmbedBlot:()=>Qt,InlineBlot:()=>Tr,LeafBlot:()=>Ft,ParentBlot:()=>me,Registry:()=>Rs,Scope:()=>U,ScrollBlot:()=>Nr,StyleAttributor:()=>tn,TextBlot:()=>$s});var N=j(4942);const D=function W(s,t){return s===t||s!=s&&t!=t},F=function K(s,t){for(var e=s.length;e--;)if(D(s[e][0],t))return e;return-1};var $=Array.prototype.splice;function Q(s){var t=-1,e=null==s?0:s.length;for(this.clear();++t<e;){var n=s[t];this.set(n[0],n[1])}}Q.prototype.clear=function gt(){this.__data__=[],this.size=0},Q.prototype.delete=function p(s){var t=this.__data__,e=F(t,s);return!(e<0||(e==t.length-1?t.pop():$.call(t,e,1),--this.size,0))},Q.prototype.get=function _(s){var t=this.__data__,e=F(t,s);return e<0?void 0:t[e][1]},Q.prototype.has=function G(s){return F(this.__data__,s)>-1},Q.prototype.set=function B(s,t){var e=this.__data__,n=F(e,s);return n<0?(++this.size,e.push([s,t])):e[n][1]=t,this};const rt=Q,x="object"==typeof global&&global&&global.Object===Object&&global;var T="object"==typeof self&&self&&self.Object===Object&&self;const q=x||T||Function("return this")(),L=q.Symbol;var st=Object.prototype,J=st.hasOwnProperty,at=st.toString,it=L?L.toStringTag:void 0;var lt=Object.prototype.toString;var yt=L?L.toStringTag:void 0;const xt=function Lt(s){return null==s?void 0===s?"[object Undefined]":"[object Null]":yt&&yt in Object(s)?function Z(s){var t=J.call(s,it),e=s[it];try{s[it]=void 0;var n=!0}catch(i){}var r=at.call(s);return n&&(t?s[it]=e:delete s[it]),r}(s):function pt(s){return lt.call(s)}(s)},Vt=function ln(s){var t=typeof s;return null!=s&&("object"==t||"function"==t)},je=function In(s){if(!Vt(s))return!1;var t=xt(s);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};var s,te=q["__core-js_shared__"],kn=(s=/[^.]+$/.exec(te&&te.keys&&te.keys.IE_PROTO||""))?"Symbol(src)_1."+s:"";var zt=Function.prototype.toString;const ee=function Rn(s){if(null!=s){try{return zt.call(s)}catch(t){}try{return s+""}catch(t){}}return""};var cn=/^\[object .+?Constructor\]$/,Wt=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const un=function He(s){return!(!Vt(s)||function Se(s){return!!kn&&kn in s}(s))&&(je(s)?Wt:cn).test(ee(s))},Xt=function Oe(s,t){var e=function Le(s,t){return null==s?void 0:s[t]}(s,t);return un(e)?e:void 0},ue=Xt(q,"Map"),Ee=Xt(Object,"create");var Rt=Object.prototype.hasOwnProperty;var hs=Object.prototype.hasOwnProperty;function Te(s){var t=-1,e=null==s?0:s.length;for(this.clear();++t<e;){var n=s[t];this.set(n[0],n[1])}}Te.prototype.clear=function he(){this.__data__=Ee?Ee(null):{},this.size=0},Te.prototype.delete=function ls(s){var t=this.has(s)&&delete this.__data__[s];return this.size-=t?1:0,t},Te.prototype.get=function as(s){var t=this.__data__;if(Ee){var e=t[s];return"__lodash_hash_undefined__"===e?void 0:e}return Rt.call(t,s)?t[s]:void 0},Te.prototype.has=function fs(s){var t=this.__data__;return Ee?void 0!==t[s]:hs.call(t,s)},Te.prototype.set=function gs(s,t){var e=this.__data__;return this.size+=this.has(s)?0:1,e[s]=Ee&&void 0===t?"__lodash_hash_undefined__":t,this};const Dn=Te,Ze=function vs(s,t){var e=s.__data__;return function bs(s){var t=typeof s;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==s:null===s}(t)?e["string"==typeof t?"string":"hash"]:e.map};function Ae(s){var t=-1,e=null==s?0:s.length;for(this.clear();++t<e;){var n=s[t];this.set(n[0],n[1])}}Ae.prototype.clear=function jt(){this.size=0,this.__data__={hash:new Dn,map:new(ue||rt),string:new Dn}},Ae.prototype.delete=function ze(s){var t=Ze(this,s).delete(s);return this.size-=t?1:0,t},Ae.prototype.get=function Ke(s){return Ze(this,s).get(s)},Ae.prototype.has=function gn(s){return Ze(this,s).has(s)},Ae.prototype.set=function Es(s,t){var e=Ze(this,s),n=e.size;return e.set(s,t),this.size+=e.size==n?0:1,this};const Pn=Ae;function fe(s){var t=this.__data__=new rt(s);this.size=t.size}fe.prototype.clear=function vt(){this.__data__=new rt,this.size=0},fe.prototype.delete=function kt(s){var t=this.__data__,e=t.delete(s);return this.size=t.size,e},fe.prototype.get=function Ht(s){return this.__data__.get(s)},fe.prototype.has=function A(s){return this.__data__.has(s)},fe.prototype.set=function pn(s,t){var e=this.__data__;if(e instanceof rt){var n=e.__data__;if(!ue||n.length<199)return n.push([s,t]),this.size=++e.size,this;e=this.__data__=new Pn(n)}return e.set(s,t),this.size=e.size,this};const Ne=fe;var As=function(){try{var s=Xt(Object,"defineProperty");return s({},"",{}),s}catch(t){}}();const Ge=As,mn=function Ns(s,t,e){"__proto__"==t&&Ge?Ge(s,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):s[t]=e},yn=function bn(s,t,e){(void 0!==e&&!D(s[t],e)||void 0===e&&!(t in s))&&mn(s,t,e)};var Yt=function ws(s){return function(t,e,n){for(var r=-1,i=Object(t),o=n(t),a=o.length;a--;){var u=o[s?a:++r];if(!1===e(i[u],u,i))break}return t}}();const de=Yt;var se="object"==typeof exports&&exports&&!exports.nodeType&&exports,Un=se&&"object"==typeof module&&module&&!module.nodeType&&module,Fn=Un&&Un.exports===se?q.Buffer:void 0,Hn=Fn?Fn.allocUnsafe:void 0;const Zn=function xs(s,t){if(t)return s.slice();var e=s.length,n=Hn?Hn(e):new s.constructor(e);return s.copy(n),n},qt=q.Uint8Array,We=function Kn(s){var t=new s.constructor(s.byteLength);return new qt(t).set(new qt(s)),t},Ye=function Xe(s,t){var e=t?We(s.buffer):s.buffer;return new s.constructor(e,s.byteOffset,s.length)},$n=function Qe(s,t){var e=-1,n=s.length;for(t||(t=Array(n));++e<n;)t[e]=s[e];return t};var vn=Object.create,_n=function(){function s(){}return function(t){if(!Vt(t))return{};if(vn)return vn(t);s.prototype=t;var e=new s;return s.prototype=void 0,e}}();const Gn=_n,En=function ie(s,t){return function(e){return s(t(e))}},An=En(Object.getPrototypeOf,Object);var Ss=Object.prototype;const c=function l(s){var t=s&&s.constructor;return s===("function"==typeof t&&t.prototype||Ss)},b=function h(s){return"function"!=typeof s.constructor||c(s)?{}:Gn(An(s))},I=function tt(s){return null!=s&&"object"==typeof s},St=function ut(s){return I(s)&&"[object Arguments]"==xt(s)};var dt=Object.prototype,Dt=dt.hasOwnProperty,Pt=dt.propertyIsEnumerable,Ot=St(function(){return arguments}())?St:function(s){return I(s)&&Dt.call(s,"callee")&&!Pt.call(s,"callee")};const It=Ot,Ut=Array.isArray,Cs=function Ie(s){return"number"==typeof s&&s>-1&&s%1==0&&s<=9007199254740991},ke=function Vn(s){return null!=s&&Cs(s.length)&&!je(s)};var ei="object"==typeof exports&&exports&&!exports.nodeType&&exports,ni=ei&&"object"==typeof module&&module&&!module.nodeType&&module,si=ni&&ni.exports===ei?q.Buffer:void 0;const Ls=(si?si.isBuffer:void 0)||function jl(){return!1};var ri=Function.prototype.toString,$l=Object.prototype.hasOwnProperty,Gl=ri.call(Object);var Nt={};Nt["[object Float32Array]"]=Nt["[object Float64Array]"]=Nt["[object Int8Array]"]=Nt["[object Int16Array]"]=Nt["[object Int32Array]"]=Nt["[object Uint8Array]"]=Nt["[object Uint8ClampedArray]"]=Nt["[object Uint16Array]"]=Nt["[object Uint32Array]"]=!0,Nt["[object Arguments]"]=Nt["[object Array]"]=Nt["[object ArrayBuffer]"]=Nt["[object Boolean]"]=Nt["[object DataView]"]=Nt["[object Date]"]=Nt["[object Error]"]=Nt["[object Function]"]=Nt["[object Map]"]=Nt["[object Number]"]=Nt["[object Object]"]=Nt["[object RegExp]"]=Nt["[object Set]"]=Nt["[object String]"]=Nt["[object WeakMap]"]=!1;const ur=function Ao(s){return function(t){return s(t)}};var ii="object"==typeof exports&&exports&&!exports.nodeType&&exports,Os=ii&&"object"==typeof module&&module&&!module.nodeType&&module,hr=Os&&Os.exports===ii&&x.process;const Wn=function(){try{return Os&&Os.require&&Os.require("util").types||hr&&hr.binding&&hr.binding("util")}catch(t){}}();var li=Wn&&Wn.isTypedArray;const fr=li?ur(li):function Eo(s){return I(s)&&Cs(s.length)&&!!Nt[xt(s)]},dr=function So(s,t){if(("constructor"!==t||"function"!=typeof s[t])&&"__proto__"!=t)return s[t]};var Lo=Object.prototype.hasOwnProperty;const oi=function Oo(s,t,e){var n=s[t];(!Lo.call(s,t)||!D(n,e)||void 0===e&&!(t in s))&&mn(s,t,e)},qs=function qo(s,t,e,n){var r=!e;e||(e={});for(var i=-1,o=t.length;++i<o;){var a=t[i],u=n?n(e[a],s[a],a,e,s):void 0;void 0===u&&(u=s[a]),r?mn(e,a,u):oi(e,a,u)}return e};var Bo=/^(?:0|[1-9]\d*)$/;const ai=function Mo(s,t){var e=typeof s;return!!(t=null==t?9007199254740991:t)&&("number"==e||"symbol"!=e&&Bo.test(s))&&s>-1&&s%1==0&&s<t};var jo=Object.prototype.hasOwnProperty;const ci=function Po(s,t){var e=Ut(s),n=!e&&It(s),r=!e&&!n&&Ls(s),i=!e&&!n&&!r&&fr(s),o=e||n||r||i,a=o?function Io(s,t){for(var e=-1,n=Array(s);++e<s;)n[e]=t(e);return n}(s.length,String):[],u=a.length;for(var d in s)(t||jo.call(s,d))&&(!o||!("length"==d||r&&("offset"==d||"parent"==d)||i&&("buffer"==d||"byteLength"==d||"byteOffset"==d)||ai(d,u)))&&a.push(d);return a};var Zo=Object.prototype.hasOwnProperty;const Ko=function zo(s){if(!Vt(s))return function Uo(s){var t=[];if(null!=s)for(var e in Object(s))t.push(e);return t}(s);var t=c(s),e=[];for(var n in s)"constructor"==n&&(t||!Zo.call(s,n))||e.push(n);return e},Is=function $o(s){return ke(s)?ci(s,!0):Ko(s)},Xo=function Wo(s,t,e,n,r,i,o){var a=dr(s,e),u=dr(t,e),d=o.get(u);if(d)yn(s,e,d);else{var y=i?i(a,u,e+"",s,t,o):void 0,S=void 0===y;if(S){var k=Ut(u),z=!k&&Ls(u),R=!k&&!z&&fr(u);y=u,k||z||R?Ut(a)?y=a:function Ml(s){return I(s)&&ke(s)}(a)?y=$n(a):z?(S=!1,y=Zn(u,!0)):R?(S=!1,y=Ye(u,!0)):y=[]:function Vl(s){if(!I(s)||"[object Object]"!=xt(s))return!1;var t=An(s);if(null===t)return!0;var e=$l.call(t,"constructor")&&t.constructor;return"function"==typeof e&&e instanceof e&&ri.call(e)==Gl}(u)||It(u)?(y=a,It(a)?y=function Go(s){return qs(s,Is(s))}(a):(!Vt(a)||je(a))&&(y=b(u))):S=!1}S&&(o.set(u,y),r(y,u,n,i,o),o.delete(u)),yn(s,e,y)}},Yo=function ui(s,t,e,n,r){s!==t&&de(t,function(i,o){if(r||(r=new Ne),Vt(i))Xo(s,t,o,e,ui,n,r);else{var a=n?n(dr(s,o),i,o+"",s,t,r):void 0;void 0===a&&(a=i),yn(s,o,a)}},Is)},hi=function Qo(s){return s};var fi=Math.max;const ra=function sa(s){return function(){return s}};var ia=Ge?function(s,t){return Ge(s,"toString",{configurable:!0,enumerable:!1,value:ra(t),writable:!0})}:hi,ca=Date.now,ha=function ua(s){var t=0,e=0;return function(){var n=ca(),r=16-(n-e);if(e=n,r>0){if(++t>=800)return arguments[0]}else t=0;return s.apply(void 0,arguments)}}(ia);const fa=ha,ga=function da(s,t){return fa(function ea(s,t,e){return t=fi(void 0===t?s.length-1:t,0),function(){for(var n=arguments,r=-1,i=fi(n.length-t,0),o=Array(i);++r<i;)o[r]=n[t+r];r=-1;for(var a=Array(t+1);++r<t;)a[r]=n[r];return a[t]=e(o),function Jo(s,t,e){switch(e.length){case 0:return s.call(t);case 1:return s.call(t,e[0]);case 2:return s.call(t,e[0],e[1]);case 3:return s.call(t,e[0],e[1],e[2])}return s.apply(t,e)}(s,this,a)}}(s,t,hi),s+"")};var ya=function ba(s){return ga(function(t,e){var n=-1,r=e.length,i=r>1?e[r-1]:void 0,o=r>2?e[2]:void 0;for(i=s.length>3&&"function"==typeof i?(r--,i):void 0,o&&function pa(s,t,e){if(!Vt(e))return!1;var n=typeof t;return!!("number"==n?ke(e)&&ai(t,e.length):"string"==n&&t in e)&&D(e[t],s)}(e[0],e[1],o)&&(i=r<3?void 0:i,r=1),t=Object(t);++n<r;){var a=e[n];a&&s(t,a,n,i)}return t})}(function(s,t,e){Yo(s,t,e)});const Je=ya,Ta=En(Object.keys,Object);var Na=Object.prototype.hasOwnProperty;const gr=function Sa(s){return ke(s)?ci(s):function wa(s){if(!c(s))return Ta(s);var t=[];for(var e in Object(s))Na.call(s,e)&&"constructor"!=e&&t.push(e);return t}(s)},di=function Ra(){return[]};var Ma=Object.prototype.propertyIsEnumerable,gi=Object.getOwnPropertySymbols,Da=gi?function(s){return null==s?[]:(s=Object(s),function Ia(s,t){for(var e=-1,n=null==s?0:s.length,r=0,i=[];++e<n;){var o=s[e];t(o,e,s)&&(i[r++]=o)}return i}(gi(s),function(t){return Ma.call(s,t)}))}:di;const pr=Da,pi=function Ua(s,t){for(var e=-1,n=t.length,r=s.length;++e<n;)s[r+e]=t[e];return s};var Ha=Object.getOwnPropertySymbols?function(s){for(var t=[];s;)pi(t,pr(s)),s=An(s);return t}:di;const mi=Ha,bi=function Ka(s,t,e){var n=t(s);return Ut(s)?n:pi(n,e(s))},mr=function $a(s){return bi(s,gr,pr)},Va=function Ga(s){return bi(s,Is,mi)},br=Xt(q,"DataView"),yr=Xt(q,"Promise"),vr=Xt(q,"Set"),_r=Xt(q,"WeakMap");var yi="[object Map]",vi="[object Promise]",_i="[object Set]",Ei="[object WeakMap]",Ti="[object DataView]",tc=ee(br),ec=ee(ue),nc=ee(yr),sc=ee(vr),rc=ee(_r),Nn=xt;(br&&Nn(new br(new ArrayBuffer(1)))!=Ti||ue&&Nn(new ue)!=yi||yr&&Nn(yr.resolve())!=vi||vr&&Nn(new vr)!=_i||_r&&Nn(new _r)!=Ei)&&(Nn=function(s){var t=xt(s),e="[object Object]"==t?s.constructor:void 0,n=e?ee(e):"";if(n)switch(n){case tc:return Ti;case ec:return yi;case nc:return vi;case sc:return _i;case rc:return Ei}return t});const ks=Nn;var lc=Object.prototype.hasOwnProperty;var hc=/\w*$/;var Ai=L?L.prototype:void 0,Ni=Ai?Ai.valueOf:void 0;const Mc=function Bc(s,t,e){var n=s.constructor;switch(t){case"[object ArrayBuffer]":return We(s);case"[object Boolean]":case"[object Date]":return new n(+s);case"[object DataView]":return function cc(s,t){var e=t?We(s.buffer):s.buffer;return new s.constructor(e,s.byteOffset,s.byteLength)}(s,e);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Ye(s,e);case"[object Map]":case"[object Set]":return new n;case"[object Number]":case"[object String]":return new n(s);case"[object RegExp]":return function fc(s){var t=new s.constructor(s.source,hc.exec(s));return t.lastIndex=s.lastIndex,t}(s);case"[object Symbol]":return function gc(s){return Ni?Object(Ni.call(s)):{}}(s)}};var wi=Wn&&Wn.isMap;const Fc=wi?ur(wi):function jc(s){return I(s)&&"[object Map]"==ks(s)};var xi=Wn&&Wn.isSet;const $c=xi?ur(xi):function Zc(s){return I(s)&&"[object Set]"==ks(s)};var Si="[object Arguments]",Ci="[object Function]",Li="[object Object]",At={};At[Si]=At["[object Array]"]=At["[object ArrayBuffer]"]=At["[object DataView]"]=At["[object Boolean]"]=At["[object Date]"]=At["[object Float32Array]"]=At["[object Float64Array]"]=At["[object Int8Array]"]=At["[object Int16Array]"]=At["[object Int32Array]"]=At["[object Map]"]=At["[object Number]"]=At[Li]=At["[object RegExp]"]=At["[object Set]"]=At["[object String]"]=At["[object Symbol]"]=At["[object Uint8Array]"]=At["[object Uint8ClampedArray]"]=At["[object Uint16Array]"]=At["[object Uint32Array]"]=!0,At["[object Error]"]=At[Ci]=At["[object WeakMap]"]=!1;const vu=function Zs(s,t,e,n,r,i){var o,a=1&t,u=2&t,d=4&t;if(e&&(o=r?e(s,n,r,i):e(s)),void 0!==o)return o;if(!Vt(s))return s;var y=Ut(s);if(y){if(o=function oc(s){var t=s.length,e=new s.constructor(t);return t&&"string"==typeof s[0]&&lc.call(s,"index")&&(e.index=s.index,e.input=s.input),e}(s),!a)return $n(s,o)}else{var S=ks(s),k=S==Ci||"[object GeneratorFunction]"==S;if(Ls(s))return Zn(s,a);if(S==Li||S==Si||k&&!r){if(o=u||k?{}:b(s),!a)return u?function Za(s,t){return qs(s,mi(s),t)}(s,function Oa(s,t){return s&&qs(t,Is(t),s)}(o,s)):function ja(s,t){return qs(s,pr(s),t)}(s,function Ca(s,t){return s&&qs(t,gr(t),s)}(o,s))}else{if(!At[S])return r?s:{};o=Mc(s,S,a)}}i||(i=new Ne);var z=i.get(s);if(z)return z;i.set(s,o),$c(s)?s.forEach(function(X){o.add(Zs(X,t,e,X,s,i))}):Fc(s)&&s.forEach(function(X,ht){o.set(ht,Zs(X,t,e,ht,s,i))});var Et=y?void 0:(d?u?Va:mr:u?Is:gr)(s);return function va(s,t){for(var e=-1,n=null==s?0:s.length;++e<n&&!1!==t(s[e],e,s););}(Et||s,function(X,ht){Et&&(X=s[ht=X]),oi(o,ht,Zs(X,t,e,ht,s,i))}),o},wn=function Tu(s){return vu(s,5)};var U=(s=>(s[s.TYPE=3]="TYPE",s[s.LEVEL=12]="LEVEL",s[s.ATTRIBUTE=13]="ATTRIBUTE",s[s.BLOT=14]="BLOT",s[s.INLINE=7]="INLINE",s[s.BLOCK=11]="BLOCK",s[s.BLOCK_BLOT=10]="BLOCK_BLOT",s[s.INLINE_BLOT=6]="INLINE_BLOT",s[s.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",s[s.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",s[s.ANY=15]="ANY",s))(U||{});class we{constructor(t,e,n={}){this.attrName=t,this.keyName=e,this.scope=null!=n.scope?n.scope&U.LEVEL|U.TYPE&U.ATTRIBUTE:U.ATTRIBUTE,null!=n.whitelist&&(this.whitelist=n.whitelist)}static keys(t){return Array.from(t.attributes).map(e=>e.name)}add(t,e){return!!this.canAdd(t,e)&&(t.setAttribute(this.keyName,e),!0)}canAdd(t,e){return null==this.whitelist||("string"==typeof e?this.whitelist.indexOf(e.replace(/["']/g,""))>-1:this.whitelist.indexOf(e)>-1)}remove(t){t.removeAttribute(this.keyName)}value(t){const e=t.getAttribute(this.keyName);return this.canAdd(t,e)&&e?e:""}}class Xn extends Error{constructor(t){super(t="[Parchment] "+t),this.message=t,this.name=this.constructor.name}}const Oi=class Jr{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(t,e=!1){if(null==t)return null;if(this.blots.has(t))return this.blots.get(t)||null;if(e){let n=null;try{n=t.parentNode}catch(r){return null}return this.find(n,e)}return null}create(t,e,n){const r=this.query(e);if(null==r)throw new Xn("Unable to create ".concat(e," blot"));const i=r,o=e instanceof Node||e.nodeType===Node.TEXT_NODE?e:i.create(n),a=new i(t,o,n);return Jr.blots.set(a.domNode,a),a}find(t,e=!1){return Jr.find(t,e)}query(t,e=U.ANY){let n;return"string"==typeof t?n=this.types[t]||this.attributes[t]:t instanceof Text||t.nodeType===Node.TEXT_NODE?n=this.types.text:"number"==typeof t?t&U.LEVEL&U.BLOCK?n=this.types.block:t&U.LEVEL&U.INLINE&&(n=this.types.inline):t instanceof Element&&((t.getAttribute("class")||"").split(/\s+/).some(r=>(n=this.classes[r],!!n)),n=n||this.tags[t.tagName]),null==n?null:"scope"in n&&e&U.LEVEL&n.scope&&e&U.TYPE&n.scope?n:null}register(...t){return t.map(e=>{const n="blotName"in e,r="attrName"in e;if(!n&&!r)throw new Xn("Invalid definition");if(n&&"abstract"===e.blotName)throw new Xn("Cannot register abstract class");return this.types[n?e.blotName:r?e.attrName:void 0]=e,r?"string"==typeof e.keyName&&(this.attributes[e.keyName]=e):n&&(e.className&&(this.classes[e.className]=e),e.tagName&&(e.tagName=Array.isArray(e.tagName)?e.tagName.map(o=>o.toUpperCase()):e.tagName.toUpperCase(),(Array.isArray(e.tagName)?e.tagName:[e.tagName]).forEach(o=>{(null==this.tags[o]||null==e.className)&&(this.tags[o]=e)}))),e})}};Oi.blots=new WeakMap;let Rs=Oi;function qi(s,t){return(s.getAttribute("class")||"").split(/\s+/).filter(e=>0===e.indexOf("".concat(t,"-")))}class pe extends we{static keys(t){return(t.getAttribute("class")||"").split(/\s+/).map(e=>e.split("-").slice(0,-1).join("-"))}add(t,e){return!!this.canAdd(t,e)&&(this.remove(t),t.classList.add("".concat(this.keyName,"-").concat(e)),!0)}remove(t){qi(t,this.keyName).forEach(e=>{t.classList.remove(e)}),0===t.classList.length&&t.removeAttribute("class")}value(t){const e=(qi(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,e)?e:""}}function Er(s){const t=s.split("-"),e=t.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("");return t[0]+e}class tn extends we{static keys(t){return(t.getAttribute("style")||"").split(";").map(e=>e.split(":")[0].trim())}add(t,e){return!!this.canAdd(t,e)&&(t.style[Er(this.keyName)]=e,!0)}remove(t){t.style[Er(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")}value(t){const e=t.style[Er(this.keyName)];return this.canAdd(t,e)?e:""}}class zs{constructor(t){this.attributes={},this.domNode=t,this.build()}attribute(t,e){e?t.add(this.domNode,e)&&(null!=t.value(this.domNode)?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])}build(){this.attributes={};const t=Rs.find(this.domNode);if(null==t)return;const e=we.keys(this.domNode),n=pe.keys(this.domNode),r=tn.keys(this.domNode);e.concat(n).concat(r).forEach(i=>{const o=t.scroll.query(i,U.ATTRIBUTE);o instanceof we&&(this.attributes[o.attrName]=o)})}copy(t){Object.keys(this.attributes).forEach(e=>{const n=this.attributes[e].value(this.domNode);t.format(e,n)})}move(t){this.copy(t),Object.keys(this.attributes).forEach(e=>{this.attributes[e].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((t,e)=>(t[e]=this.attributes[e].value(this.domNode),t),{})}}const Ii=class{constructor(t,e){this.scroll=t,this.domNode=e,Rs.blots.set(e,this),this.prev=null,this.next=null}static create(t){if(null==this.tagName)throw new Xn("Blot definition missing tagName");let e,n;return Array.isArray(this.tagName)?("string"==typeof t?(n=t.toUpperCase(),parseInt(n,10).toString()===n&&(n=parseInt(n,10))):"number"==typeof t&&(n=t),e="number"==typeof n?document.createElement(this.tagName[n-1]):n&&this.tagName.indexOf(n)>-1?document.createElement(n):document.createElement(this.tagName[0])):e=document.createElement(this.tagName),this.className&&e.classList.add(this.className),e}get statics(){return this.constructor}attach(){}clone(){const t=this.domNode.cloneNode(!1);return this.scroll.create(t)}detach(){null!=this.parent&&this.parent.removeChild(this),Rs.blots.delete(this.domNode)}deleteAt(t,e){this.isolate(t,e).remove()}formatAt(t,e,n,r){const i=this.isolate(t,e);if(null!=this.scroll.query(n,U.BLOT)&&r)i.wrap(n,r);else if(null!=this.scroll.query(n,U.ATTRIBUTE)){const o=this.scroll.create(this.statics.scope);i.wrap(o),o.format(n,r)}}insertAt(t,e,n){const r=null==n?this.scroll.create("text",e):this.scroll.create(e,n),i=this.split(t);this.parent.insertBefore(r,i||void 0)}isolate(t,e){const n=this.split(t);if(null==n)throw new Error("Attempt to isolate at end");return n.split(e),n}length(){return 1}offset(t=this.parent){return null==this.parent||this===t?0:this.parent.children.offset(this)+this.parent.offset(t)}optimize(t){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(t,e){const n="string"==typeof t?this.scroll.create(t,e):t;return null!=this.parent&&(this.parent.insertBefore(n,this.next||void 0),this.remove()),n}split(t,e){return 0===t?this:this.next}update(t,e){}wrap(t,e){const n="string"==typeof t?this.scroll.create(t,e):t;if(null!=this.parent&&this.parent.insertBefore(n,this.next||void 0),"function"!=typeof n.appendChild)throw new Xn("Cannot wrap ".concat(t));return n.appendChild(this),n}};Ii.blotName="abstract";let ki=Ii;const Ri=class extends ki{static value(t){return!0}index(t,e){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1}position(t,e){let n=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return t>0&&(n+=1),[this.parent.domNode,n]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};Ri.scope=U.INLINE_BLOT;let Ft=Ri;class Au{constructor(){this.head=null,this.tail=null,this.length=0}append(...t){if(this.insertBefore(t[0],null),t.length>1){const e=t.slice(1);this.append(...e)}}at(t){const e=this.iterator();let n=e();for(;n&&t>0;)t-=1,n=e();return n}contains(t){const e=this.iterator();let n=e();for(;n;){if(n===t)return!0;n=e()}return!1}indexOf(t){const e=this.iterator();let n=e(),r=0;for(;n;){if(n===t)return r;r+=1,n=e()}return-1}insertBefore(t,e){null!=t&&(this.remove(t),t.next=e,null!=e?(t.prev=e.prev,null!=e.prev&&(e.prev.next=t),e.prev=t,e===this.head&&(this.head=t)):null!=this.tail?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)}offset(t){let e=0,n=this.head;for(;null!=n;){if(n===t)return e;e+=n.length(),n=n.next}return-1}remove(t){this.contains(t)&&(null!=t.prev&&(t.prev.next=t.next),null!=t.next&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)}iterator(t=this.head){return()=>{const e=t;return null!=t&&(t=t.next),e}}find(t,e=!1){const n=this.iterator();let r=n();for(;r;){const i=r.length();if(t<i||e&&t===i&&(null==r.next||0!==r.next.length()))return[r,t];t-=i,r=n()}return[null,0]}forEach(t){const e=this.iterator();let n=e();for(;n;)t(n),n=e()}forEachAt(t,e,n){if(e<=0)return;const[r,i]=this.find(t);let o=t-i;const a=this.iterator(r);let u=a();for(;u&&o<t+e;){const d=u.length();t>o?n(u,t-o,Math.min(e,o+d-t)):n(u,0,Math.min(d,t+e-o)),o+=d,u=a()}}map(t){return this.reduce((e,n)=>(e.push(t(n)),e),[])}reduce(t,e){const n=this.iterator();let r=n();for(;r;)e=t(e,r),r=n();return e}}function Bi(s,t){const e=t.find(s);if(e)return e;try{return t.create(s)}catch(n){const r=t.create(U.INLINE);return Array.from(s.childNodes).forEach(i=>{r.domNode.appendChild(i)}),s.parentNode&&s.parentNode.replaceChild(r.domNode,s),r.attach(),r}}const Mi=class rn extends ki{constructor(t,e){super(t,e),this.uiNode=null,this.build()}appendChild(t){this.insertBefore(t)}attach(){super.attach(),this.children.forEach(t=>{t.attach()})}attachUI(t){null!=this.uiNode&&this.uiNode.remove(),this.uiNode=t,rn.uiClass&&this.uiNode.classList.add(rn.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new Au,Array.from(this.domNode.childNodes).filter(t=>t!==this.uiNode).reverse().forEach(t=>{try{const e=Bi(t,this.scroll);this.insertBefore(e,this.children.head||void 0)}catch(e){if(e instanceof Xn)return;throw e}})}deleteAt(t,e){if(0===t&&e===this.length())return this.remove();this.children.forEachAt(t,e,(n,r,i)=>{n.deleteAt(r,i)})}descendant(t,e=0){const[n,r]=this.children.find(e);return null==t.blotName&&t(n)||null!=t.blotName&&n instanceof t?[n,r]:n instanceof rn?n.descendant(t,r):[null,-1]}descendants(t,e=0,n=Number.MAX_VALUE){let r=[],i=n;return this.children.forEachAt(e,n,(o,a,u)=>{(null==t.blotName&&t(o)||null!=t.blotName&&o instanceof t)&&r.push(o),o instanceof rn&&(r=r.concat(o.descendants(t,a,i))),i-=u}),r}detach(){this.children.forEach(t=>{t.detach()}),super.detach()}enforceAllowedChildren(){let t=!1;this.children.forEach(e=>{t||this.statics.allowedChildren.some(n=>e instanceof n)||(e.statics.scope===U.BLOCK_BLOT?(null!=e.next&&this.splitAfter(e),null!=e.prev&&this.splitAfter(e.prev),e.parent.unwrap(),t=!0):e instanceof rn?e.unwrap():e.remove())})}formatAt(t,e,n,r){this.children.forEachAt(t,e,(i,o,a)=>{i.formatAt(o,a,n,r)})}insertAt(t,e,n){const[r,i]=this.children.find(t);if(r)r.insertAt(i,e,n);else{const o=null==n?this.scroll.create("text",e):this.scroll.create(e,n);this.appendChild(o)}}insertBefore(t,e){null!=t.parent&&t.parent.children.remove(t);let n=null;this.children.insertBefore(t,e||null),t.parent=this,null!=e&&(n=e.domNode),(this.domNode.parentNode!==t.domNode||this.domNode.nextSibling!==n)&&this.domNode.insertBefore(t.domNode,n),t.attach()}length(){return this.children.reduce((t,e)=>t+e.length(),0)}moveChildren(t,e){this.children.forEach(n=>{t.insertBefore(n,e)})}optimize(t){if(super.optimize(t),this.enforceAllowedChildren(),null!=this.uiNode&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),0===this.children.length)if(null!=this.statics.defaultChild){const e=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(e)}else this.remove()}path(t,e=!1){const[n,r]=this.children.find(t,e),i=[[this,t]];return n instanceof rn?i.concat(n.path(r,e)):(null!=n&&i.push([n,r]),i)}removeChild(t){this.children.remove(t)}replaceWith(t,e){const n="string"==typeof t?this.scroll.create(t,e):t;return n instanceof rn&&this.moveChildren(n),super.replaceWith(n)}split(t,e=!1){if(!e){if(0===t)return this;if(t===this.length())return this.next}const n=this.clone();return this.parent&&this.parent.insertBefore(n,this.next||void 0),this.children.forEachAt(t,this.length(),(r,i,o)=>{const a=r.split(i,e);null!=a&&n.appendChild(a)}),n}splitAfter(t){const e=this.clone();for(;null!=t.next;)e.appendChild(t.next);return this.parent&&this.parent.insertBefore(e,this.next||void 0),e}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(t,e){const n=[],r=[];t.forEach(i=>{i.target===this.domNode&&"childList"===i.type&&(n.push(...i.addedNodes),r.push(...i.removedNodes))}),r.forEach(i=>{if(null!=i.parentNode&&"IFRAME"!==i.tagName&&document.body.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const o=this.scroll.find(i);null!=o&&(null==o.domNode.parentNode||o.domNode.parentNode===this.domNode)&&o.detach()}),n.filter(i=>i.parentNode===this.domNode&&i!==this.uiNode).sort((i,o)=>i===o?0:i.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(i=>{let o=null;null!=i.nextSibling&&(o=this.scroll.find(i.nextSibling));const a=Bi(i,this.scroll);(a.next!==o||null==a.next)&&(null!=a.parent&&a.parent.removeChild(this),this.insertBefore(a,o||void 0))}),this.enforceAllowedChildren()}};Mi.uiClass="";let me=Mi;const Yn=class es extends me{constructor(t,e){super(t,e),this.attributes=new zs(this.domNode)}static create(t){return super.create(t)}static formats(t,e){const n=e.query(es.blotName);if(null==n||t.tagName!==n.tagName){if("string"==typeof this.tagName)return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}format(t,e){if(t!==this.statics.blotName||e){const n=this.scroll.query(t,U.INLINE);if(null==n)return;n instanceof we?this.attributes.attribute(n,e):e&&(t!==this.statics.blotName||this.formats()[t]!==e)&&this.replaceWith(t,e)}else this.children.forEach(n=>{n instanceof es||(n=n.wrap(es.blotName,!0)),this.attributes.copy(n)}),this.unwrap()}formats(){const t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return null!=e&&(t[this.statics.blotName]=e),t}formatAt(t,e,n,r){null!=this.formats()[n]||this.scroll.query(n,U.ATTRIBUTE)?this.isolate(t,e).format(n,r):super.formatAt(t,e,n,r)}optimize(t){super.optimize(t);const e=this.formats();if(0===Object.keys(e).length)return this.unwrap();const n=this.next;n instanceof es&&n.prev===this&&function Nu(s,t){if(Object.keys(s).length!==Object.keys(t).length)return!1;for(const e in s)if(s[e]!==t[e])return!1;return!0}(e,n.formats())&&(n.moveChildren(this),n.remove())}replaceWith(t,e){const n=super.replaceWith(t,e);return this.attributes.copy(n),n}update(t,e){super.update(t,e),t.some(n=>n.target===this.domNode&&"attributes"===n.type)&&this.attributes.build()}wrap(t,e){const n=super.wrap(t,e);return n instanceof es&&this.attributes.move(n),n}};Yn.allowedChildren=[Yn,Ft],Yn.blotName="inline",Yn.scope=U.INLINE_BLOT,Yn.tagName="SPAN";let Tr=Yn;const Qn=class ti extends me{constructor(t,e){super(t,e),this.attributes=new zs(this.domNode)}static create(t){return super.create(t)}static formats(t,e){const n=e.query(ti.blotName);if(null==n||t.tagName!==n.tagName){if("string"==typeof this.tagName)return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}format(t,e){const n=this.scroll.query(t,U.BLOCK);null!=n&&(n instanceof we?this.attributes.attribute(n,e):t!==this.statics.blotName||e?e&&(t!==this.statics.blotName||this.formats()[t]!==e)&&this.replaceWith(t,e):this.replaceWith(ti.blotName))}formats(){const t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return null!=e&&(t[this.statics.blotName]=e),t}formatAt(t,e,n,r){null!=this.scroll.query(n,U.BLOCK)?this.format(n,r):super.formatAt(t,e,n,r)}insertAt(t,e,n){if(null==n||null!=this.scroll.query(e,U.INLINE))super.insertAt(t,e,n);else{const r=this.split(t);if(null==r)throw new Error("Attempt to insertAt after block boundaries");{const i=this.scroll.create(e,n);r.parent.insertBefore(i,r)}}}replaceWith(t,e){const n=super.replaceWith(t,e);return this.attributes.copy(n),n}update(t,e){super.update(t,e),t.some(n=>n.target===this.domNode&&"attributes"===n.type)&&this.attributes.build()}};Qn.blotName="block",Qn.scope=U.BLOCK_BLOT,Qn.tagName="P",Qn.allowedChildren=[Tr,Qn,Ft];let Bs=Qn;const Ar=class extends me{checkMerge(){return null!==this.next&&this.next.statics.blotName===this.statics.blotName}deleteAt(t,e){super.deleteAt(t,e),this.enforceAllowedChildren()}formatAt(t,e,n,r){super.formatAt(t,e,n,r),this.enforceAllowedChildren()}insertAt(t,e,n){super.insertAt(t,e,n),this.enforceAllowedChildren()}optimize(t){super.optimize(t),this.children.length>0&&null!=this.next&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};Ar.blotName="container",Ar.scope=U.BLOCK_BLOT;let Ks=Ar;class Qt extends Ft{static formats(t,e){}format(t,e){super.formatAt(0,this.length(),t,e)}formatAt(t,e,n,r){0===t&&e===this.length()?this.format(n,r):super.formatAt(t,e,n,r)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const wu={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},Jn=class extends me{constructor(t,e){super(null,e),this.registry=t,this.scroll=this,this.build(),this.observer=new MutationObserver(n=>{this.update(n)}),this.observer.observe(this.domNode,wu),this.attach()}create(t,e){return this.registry.create(this,t,e)}find(t,e=!1){const n=this.registry.find(t,e);return n?n.scroll===this?n:e?this.find(n.scroll.domNode.parentNode,!0):null:null}query(t,e=U.ANY){return this.registry.query(t,e)}register(...t){return this.registry.register(...t)}build(){null!=this.scroll&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(t,e){this.update(),0===t&&e===this.length()?this.children.forEach(n=>{n.remove()}):super.deleteAt(t,e)}formatAt(t,e,n,r){this.update(),super.formatAt(t,e,n,r)}insertAt(t,e,n){this.update(),super.insertAt(t,e,n)}optimize(t=[],e={}){super.optimize(e);const n=e.mutationsMap||new WeakMap;let r=Array.from(this.observer.takeRecords());for(;r.length>0;)t.push(r.pop());const i=(u,d=!0)=>{null==u||u===this||null!=u.domNode.parentNode&&(n.has(u.domNode)||n.set(u.domNode,[]),d&&i(u.parent))},o=u=>{n.has(u.domNode)&&(u instanceof me&&u.children.forEach(o),n.delete(u.domNode),u.optimize(e))};let a=t;for(let u=0;a.length>0;u+=1){if(u>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(a.forEach(d=>{const y=this.find(d.target,!0);null!=y&&(y.domNode===d.target&&("childList"===d.type?(i(this.find(d.previousSibling,!1)),Array.from(d.addedNodes).forEach(S=>{const k=this.find(S,!1);i(k,!1),k instanceof me&&k.children.forEach(z=>{i(z,!1)})})):"attributes"===d.type&&i(y.prev)),i(y))}),this.children.forEach(o),a=Array.from(this.observer.takeRecords()),r=a.slice();r.length>0;)t.push(r.pop())}}update(t,e={}){t=t||this.observer.takeRecords();const n=new WeakMap;t.map(r=>{const i=this.find(r.target,!0);return null==i?null:n.has(i.domNode)?(n.get(i.domNode).push(r),null):(n.set(i.domNode,[r]),i)}).forEach(r=>{null!=r&&r!==this&&n.has(r.domNode)&&r.update(n.get(r.domNode)||[],e)}),e.mutationsMap=n,n.has(this.domNode)&&super.update(n.get(this.domNode),e),this.optimize(t,e)}};Jn.blotName="scroll",Jn.defaultChild=Bs,Jn.allowedChildren=[Bs,Ks],Jn.scope=U.BLOCK_BLOT,Jn.tagName="DIV";let Nr=Jn;const wr=class Bl extends Ft{constructor(t,e){super(t,e),this.text=this.statics.value(this.domNode)}static create(t){return document.createTextNode(t)}static value(t){return t.data}deleteAt(t,e){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+e)}index(t,e){return this.domNode===t?e:-1}insertAt(t,e,n){null==n?(this.text=this.text.slice(0,t)+e+this.text.slice(t),this.domNode.data=this.text):super.insertAt(t,e,n)}length(){return this.text.length}optimize(t){super.optimize(t),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof Bl&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(t,e=!1){return[this.domNode,t]}split(t,e=!1){if(!e){if(0===t)return this;if(t===this.length())return this.next}const n=this.scroll.create(this.domNode.splitText(t));return this.parent.insertBefore(n,this.next||void 0),this.text=this.statics.value(this.domNode),n}update(t,e){t.some(n=>"characterData"===n.type&&n.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};wr.blotName="text",wr.scope=U.INLINE_BLOT;let $s=wr;var le=j(2727),P=j.n(le),Kt=j(1413);function Gs(s){var t=-1,e=null==s?0:s.length;for(this.__data__=new Pn;++t<e;)this.add(s[t])}Gs.prototype.add=Gs.prototype.push=function Cu(s){return this.__data__.set(s,"__lodash_hash_undefined__"),this},Gs.prototype.has=function Ou(s){return this.__data__.has(s)};const Iu=Gs,Ru=function ku(s,t){for(var e=-1,n=null==s?0:s.length;++e<n;)if(t(s[e],e,s))return!0;return!1},Mu=function Bu(s,t){return s.has(t)},Di=function Pu(s,t,e,n,r,i){var o=1&e,a=s.length,u=t.length;if(a!=u&&!(o&&u>a))return!1;var d=i.get(s),y=i.get(t);if(d&&y)return d==t&&y==s;var S=-1,k=!0,z=2&e?new Iu:void 0;for(i.set(s,t),i.set(t,s);++S<a;){var R=s[S],Et=t[S];if(n)var X=o?n(Et,R,S,t,s,i):n(R,Et,S,s,t,i);if(void 0!==X){if(X)continue;k=!1;break}if(z){if(!Ru(t,function(ht,$t){if(!Mu(z,$t)&&(R===ht||r(R,ht,e,n,i)))return z.push($t)})){k=!1;break}}else if(R!==Et&&!r(R,Et,e,n,i)){k=!1;break}}return i.delete(s),i.delete(t),k},Fu=function Uu(s){var t=-1,e=Array(s.size);return s.forEach(function(n,r){e[++t]=[r,n]}),e},Zu=function Hu(s){var t=-1,e=Array(s.size);return s.forEach(function(n){e[++t]=n}),e};var ji=L?L.prototype:void 0,xr=ji?ji.valueOf:void 0;var oh=Object.prototype.hasOwnProperty;var Pi="[object Arguments]",Ui="[object Array]",Vs="[object Object]",Fi=Object.prototype.hasOwnProperty;const dh=function fh(s,t,e,n,r,i){var o=Ut(s),a=Ut(t),u=o?Ui:ks(s),d=a?Ui:ks(t),y=(u=u==Pi?Vs:u)==Vs,S=(d=d==Pi?Vs:d)==Vs,k=u==d;if(k&&Ls(s)){if(!Ls(t))return!1;o=!0,y=!1}if(k&&!y)return i||(i=new Ne),o||fr(s)?Di(s,t,e,n,r,i):function sh(s,t,e,n,r,i,o){switch(e){case"[object DataView]":if(s.byteLength!=t.byteLength||s.byteOffset!=t.byteOffset)return!1;s=s.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(s.byteLength!=t.byteLength||!i(new qt(s),new qt(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return D(+s,+t);case"[object Error]":return s.name==t.name&&s.message==t.message;case"[object RegExp]":case"[object String]":return s==t+"";case"[object Map]":var a=Fu;case"[object Set]":if(a||(a=Zu),s.size!=t.size&&!(1&n))return!1;var d=o.get(s);if(d)return d==t;n|=2,o.set(s,t);var y=Di(a(s),a(t),n,r,i,o);return o.delete(s),y;case"[object Symbol]":if(xr)return xr.call(s)==xr.call(t)}return!1}(s,t,u,e,n,r,i);if(!(1&e)){var z=y&&Fi.call(s,"__wrapped__"),R=S&&Fi.call(t,"__wrapped__");if(z||R){var Et=z?s.value():s,X=R?t.value():t;return i||(i=new Ne),r(Et,X,e,n,i)}}return!!k&&(i||(i=new Ne),function ah(s,t,e,n,r,i){var o=1&e,a=mr(s),u=a.length;if(u!=mr(t).length&&!o)return!1;for(var S=u;S--;){var k=a[S];if(!(o?k in t:oh.call(t,k)))return!1}var z=i.get(s),R=i.get(t);if(z&&R)return z==t&&R==s;var Et=!0;i.set(s,t),i.set(t,s);for(var X=o;++S<u;){var ht=s[k=a[S]],$t=t[k];if(n)var Rl=o?n($t,ht,k,t,s,i):n(ht,$t,k,s,t,i);if(!(void 0===Rl?ht===$t||r(ht,$t,e,n,i):Rl)){Et=!1;break}X||(X="constructor"==k)}if(Et&&!X){var ar=s.constructor,cr=t.constructor;ar!=cr&&"constructor"in s&&"constructor"in t&&!("function"==typeof ar&&ar instanceof ar&&"function"==typeof cr&&cr instanceof cr)&&(Et=!1)}return i.delete(s),i.delete(t),Et}(s,t,e,n,r,i))},gh=function Hi(s,t,e,n,r){return s===t||(null==s||null==t||!I(s)&&!I(t)?s!=s&&t!=t:dh(s,t,e,n,Hi,r))},Sr=function ph(s,t){return gh(s,t)},Re=(()=>{class s extends Qt{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}return s.blotName="break",s.tagName="BR",s})();class be extends $s{}function Ws(s){return s.replace(/[&<>"']/g,t=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[t]))}const en=(()=>{class t extends Tr{static compare(n,r){const i=t.order.indexOf(n),o=t.order.indexOf(r);return i>=0||o>=0?i-o:n===r?0:n<r?-1:1}formatAt(n,r,i,o){if(t.compare(this.statics.blotName,i)<0&&this.scroll.query(i,U.BLOT)){const a=this.isolate(n,r);o&&a.wrap(i,o)}else super.formatAt(n,r,i,o)}optimize(n){if(super.optimize(n),this.parent instanceof t&&t.compare(this.statics.blotName,this.parent.statics.blotName)>0){const r=this.parent.isolate(this.offset(),this.length());this.moveChildren(r),r.wrap(this)}}}return(0,N.Z)(t,"allowedChildren",[t,Re,Qt,be]),(0,N.Z)(t,"order",["cursor","inline","link","underline","strike","italic","bold","script","code"]),t})();let Jt=(()=>{class s extends Bs{constructor(...e){super(...e),(0,N.Z)(this,"cache",{})}delta(){return null==this.cache.delta&&(this.cache.delta=zi(this)),this.cache.delta}deleteAt(e,n){super.deleteAt(e,n),this.cache={}}formatAt(e,n,r,i){n<=0||(this.scroll.query(r,U.BLOCK)?e+n===this.length()&&this.format(r,i):super.formatAt(e,Math.min(n,this.length()-e-1),r,i),this.cache={})}insertAt(e,n,r){if(null!=r)return super.insertAt(e,n,r),void(this.cache={});if(0===n.length)return;const i=n.split("\n"),o=i.shift();o.length>0&&(e<this.length()-1||null==this.children.tail?super.insertAt(Math.min(e,this.length()-1),o):this.children.tail.insertAt(this.children.tail.length(),o),this.cache={});let a=this;i.reduce((u,d)=>(a=a.split(u,!0),a.insertAt(0,d),d.length),e+o.length)}insertBefore(e,n){const{head:r}=this.children;super.insertBefore(e,n),r instanceof Re&&r.remove(),this.cache={}}length(){return null==this.cache.length&&(this.cache.length=super.length()+1),this.cache.length}moveChildren(e,n){super.moveChildren(e,n),this.cache={}}optimize(e){super.optimize(e),this.cache={}}path(e){return super.path(e,!0)}removeChild(e){super.removeChild(e),this.cache={}}split(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n&&(0===e||e>=this.length()-1)){const i=this.clone();return 0===e?(this.parent.insertBefore(i,this),this):(this.parent.insertBefore(i,this.next),i)}const r=super.split(e,n);return this.cache={},r}}return s.blotName="block",s.tagName="P",s.defaultChild=Re,s.allowedChildren=[Re,en,Qt,be],s})();class oe extends Qt{attach(){super.attach(),this.attributes=new zs(this.domNode)}delta(){return(new(P())).insert(this.value(),(0,Kt.Z)((0,Kt.Z)({},this.formats()),this.attributes.values()))}format(t,e){const n=this.scroll.query(t,U.BLOCK_ATTRIBUTE);null!=n&&this.attributes.attribute(n,e)}formatAt(t,e,n,r){this.format(n,r)}insertAt(t,e,n){if(null!=n)return void super.insertAt(t,e,n);const r=e.split("\n"),i=r.pop(),o=r.map(u=>{const d=this.scroll.create(Jt.blotName);return d.insertAt(0,u),d}),a=this.split(t);o.forEach(u=>{this.parent.insertBefore(u,a)}),i&&this.parent.insertBefore(this.scroll.create("text",i),a)}}function zi(s){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return s.descendants(Ft).reduce((e,n)=>0===n.length()?e:e.insert(n.value(),ae(n,{},t)),new(P())).insert("\n",ae(s))}function ae(s){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return null==s||("formats"in s&&"function"==typeof s.formats&&(t=(0,Kt.Z)((0,Kt.Z)({},t),s.formats()),e&&delete t["code-token"]),null==s.parent||"scroll"===s.parent.statics.blotName||s.parent.statics.scope!==s.statics.scope)?t:ae(s.parent,t,e)}oe.scope=U.BLOCK_BLOT;const Xs=(()=>{class s extends Qt{static value(){}constructor(e,n,r){super(e,n),this.selection=r,this.textNode=document.createTextNode(s.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){null!=this.parent&&this.parent.removeChild(this)}format(e,n){if(0!==this.savedLength)return void super.format(e,n);let r=this,i=0;for(;null!=r&&r.statics.scope!==U.BLOCK_BLOT;)i+=r.offset(r.parent),r=r.parent;null!=r&&(this.savedLength=s.CONTENTS.length,r.optimize(),r.formatAt(i,s.CONTENTS.length,e,n),this.savedLength=0)}index(e,n){return e===this.textNode?0:super.index(e,n)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||null==this.parent)return null;const e=this.selection.getNativeRange();for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const n=this.prev instanceof be?this.prev:null,r=n?n.length():0,i=this.next instanceof be?this.next:null,o=i?i.text:"",{textNode:a}=this,u=a.data.split(s.CONTENTS).join("");let d;if(a.data=s.CONTENTS,n)d=n,(u||i)&&(n.insertAt(n.length(),u+o),i&&i.remove());else if(i)d=i,i.insertAt(0,u);else{const y=document.createTextNode(u);d=this.scroll.create(y),this.parent.insertBefore(d,this)}if(this.remove(),e){const y=(z,R)=>n&&z===n.domNode?R:z===a?r+R-1:i&&z===i.domNode?r+u.length+R:null,S=y(e.start.node,e.start.offset),k=y(e.end.node,e.end.offset);if(null!==S&&null!==k)return{startNode:d.domNode,startOffset:S,endNode:d.domNode,endOffset:k}}return null}update(e,n){if(e.some(r=>"characterData"===r.type&&r.target===this.textNode)){const r=this.restore();r&&(n.range=r)}}optimize(e){super.optimize(e);let{parent:n}=this;for(;n;){if("A"===n.domNode.tagName){this.savedLength=s.CONTENTS.length,n.isolate(this.offset(n),this.length()).unwrap(),this.savedLength=0;break}n=n.parent}}value(){return""}}return(0,N.Z)(s,"blotName","cursor"),(0,N.Z)(s,"className","ql-cursor"),(0,N.Z)(s,"tagName","span"),(0,N.Z)(s,"CONTENTS","\ufeff"),s})();var mh=j(9335);const Cr=new WeakMap,Lr=["error","warn","log","info"];let Or="warn";function Ki(s){if(Or&&Lr.indexOf(s)<=Lr.indexOf(Or)){for(var t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];console[s](...e)}}function qr(s){return Lr.reduce((t,e)=>(t[e]=Ki.bind(console,e,s),t),{})}qr.level=s=>{Or=s},Ki.level=qr.level;const xn=qr,Ir=xn("quill:events");["selectionchange","mousedown","mouseup","click"].forEach(s=>{document.addEventListener(s,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Array.from(document.querySelectorAll(".ql-container")).forEach(r=>{const i=Cr.get(r);i&&i.emitter&&i.emitter.handleDOM(...e)})})});const M=(()=>{class s extends mh{constructor(){super(),this.domListeners={},this.on("error",Ir.error)}emit(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Ir.log.call(Ir,...n),super.emit(...n)}handleDOM(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(this.domListeners[e.type]||[]).forEach(o=>{let{node:a,handler:u}=o;(e.target===a||a.contains(e.target))&&u(e,...r)})}listenDOM(e,n,r){this.domListeners[e]||(this.domListeners[e]=[]),this.domListeners[e].push({node:n,handler:r})}}return(0,N.Z)(s,"events",{EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"}),(0,N.Z)(s,"sources",{API:"api",SILENT:"silent",USER:"user"}),s})(),kr=xn("quill:selection");class Sn{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.index=t,this.length=e}}class bh{constructor(t,e){this.emitter=e,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new Sn(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,M.sources.USER),1)}),this.emitter.on(M.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const n=this.getNativeRange();null!=n&&n.start.node!==this.cursor.textNode&&this.emitter.once(M.events.SCROLL_UPDATE,(r,i)=>{try{this.root.contains(n.start.node)&&this.root.contains(n.end.node)&&this.setNativeRange(n.start.node,n.start.offset,n.end.node,n.end.offset);const o=i.some(a=>"characterData"===a.type||"childList"===a.type||"attributes"===a.type&&a.target===this.root);this.update(o?M.sources.SILENT:r)}catch(o){}})}),this.emitter.on(M.events.SCROLL_OPTIMIZE,(n,r)=>{if(r.range){const{startNode:i,startOffset:o,endNode:a,endOffset:u}=r.range;this.setNativeRange(i,o,a,u),this.update(M.sources.SILENT)}}),this.update(M.sources.SILENT)}handleComposition(){this.emitter.on(M.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(M.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const t=this.cursor.restore();if(!t)return;setTimeout(()=>{this.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(M.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(t,e){this.scroll.update();const n=this.getNativeRange();if(null!=n&&n.native.collapsed&&!this.scroll.query(t,U.BLOCK)){if(n.start.node!==this.cursor.textNode){const r=this.scroll.find(n.start.node,!1);if(null==r)return;if(r instanceof Ft){const i=r.split(n.start.offset);r.parent.insertBefore(this.cursor,i)}else r.insertBefore(this.cursor,n.start.node);this.cursor.attach()}this.cursor.format(t,e),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.scroll.length();t=Math.min(t,n-1),e=Math.min(t+e,n-1)-t;let r,[i,o]=this.scroll.leaf(t);if(null==i)return null;if(e>0&&o===i.length()){const[y]=this.scroll.leaf(t+1);if(y){const[S]=this.scroll.line(t),[k]=this.scroll.line(t+1);S===k&&(i=y,o=0)}}[r,o]=i.position(o,!0);const a=document.createRange();if(e>0)return a.setStart(r,o),[i,o]=this.scroll.leaf(t+e),null==i?null:([r,o]=i.position(o,!0),a.setEnd(r,o),a.getBoundingClientRect());let d,u="left";if(r instanceof Text){if(!r.data.length)return null;o<r.data.length?(a.setStart(r,o),a.setEnd(r,o+1)):(a.setStart(r,o-1),a.setEnd(r,o),u="right"),d=a.getBoundingClientRect()}else{if(!(i.domNode instanceof Element))return null;d=i.domNode.getBoundingClientRect(),o>0&&(u="right")}return{bottom:d.top+d.height,height:d.height,left:d[u],right:d[u],top:d.top,width:0}}getNativeRange(){const t=document.getSelection();if(null==t||t.rangeCount<=0)return null;const e=t.getRangeAt(0);if(null==e)return null;const n=this.normalizeNative(e);return kr.info("getNativeRange",n),n}getRange(){const t=this.scroll.domNode;if("isConnected"in t&&!t.isConnected)return[null,null];const e=this.getNativeRange();return null==e?[null,null]:[this.normalizedToRange(e),e]}hasFocus(){return document.activeElement===this.root||null!=document.activeElement&&Rr(this.root,document.activeElement)}normalizedToRange(t){const e=[[t.start.node,t.start.offset]];t.native.collapsed||e.push([t.end.node,t.end.offset]);const n=e.map(o=>{const[a,u]=o,d=this.scroll.find(a,!0),y=d.offset(this.scroll);return 0===u?y:d instanceof Ft?y+d.index(a,u):y+d.length()}),r=Math.min(Math.max(...n),this.scroll.length()-1),i=Math.min(r,...n);return new Sn(i,r-i)}normalizeNative(t){if(!Rr(this.root,t.startContainer)||!t.collapsed&&!Rr(this.root,t.endContainer))return null;const e={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t};return[e.start,e.end].forEach(n=>{let{node:r,offset:i}=n;for(;!(r instanceof Text)&&r.childNodes.length>0;)if(r.childNodes.length>i)r=r.childNodes[i],i=0;else{if(r.childNodes.length!==i)break;r=r.lastChild,i=r instanceof Text?r.data.length:r.childNodes.length>0?r.childNodes.length:r.childNodes.length+1}n.node=r,n.offset=i}),e}rangeToNative(t){const e=this.scroll.length(),n=(r,i)=>{r=Math.min(e-1,r);const[o,a]=this.scroll.leaf(r);return o?o.position(a,i):[null,-1]};return[...n(t.index,!1),...n(t.index+t.length,!0)]}setNativeRange(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(kr.info("setNativeRange",t,e,n,r),null!=t&&(null==this.root.parentNode||null==t.parentNode||null==n.parentNode))return;const o=document.getSelection();if(null!=o)if(null!=t){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:a}=this.getNativeRange()||{};if(null==a||i||t!==a.startContainer||e!==a.startOffset||n!==a.endContainer||r!==a.endOffset){t instanceof Element&&"BR"===t.tagName&&(e=Array.from(t.parentNode.childNodes).indexOf(t),t=t.parentNode),n instanceof Element&&"BR"===n.tagName&&(r=Array.from(n.parentNode.childNodes).indexOf(n),n=n.parentNode);const u=document.createRange();u.setStart(t,e),u.setEnd(n,r),o.removeAllRanges(),o.addRange(u)}}else o.removeAllRanges(),this.root.blur()}setRange(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:M.sources.API;if("string"==typeof e&&(n=e,e=!1),kr.info("setRange",t),null!=t){const r=this.rangeToNative(t);this.setNativeRange(...r,e)}else this.setNativeRange(null);this.update(n)}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M.sources.USER;const e=this.lastRange,[n,r]=this.getRange();if(this.lastRange=n,this.lastNative=r,null!=this.lastRange&&(this.savedRange=this.lastRange),!Sr(e,this.lastRange)){if(!this.composing&&null!=r&&r.native.collapsed&&r.start.node!==this.cursor.textNode){const o=this.cursor.restore();o&&this.setNativeRange(o.startNode,o.startOffset,o.endNode,o.endOffset)}const i=[M.events.SELECTION_CHANGE,wn(this.lastRange),wn(e),t];this.emitter.emit(M.events.EDITOR_CHANGE,...i),t!==M.sources.SILENT&&this.emitter.emit(...i)}}}function Rr(s,t){return s.contains(t)}const yh=/^[ -~]*$/;function ts(s,t,e){if(0===s.length){const[z]=Br(e.pop());return t<=0?"</li></".concat(z,">"):"</li></".concat(z,">").concat(ts([],t-1,e))}const[{child:n,offset:r,length:i,indent:o,type:a},...u]=s,[d,y]=Br(a);if(o>t)return e.push(a),o===t+1?"<".concat(d,"><li").concat(y,">").concat(Ms(n,r,i)).concat(ts(u,o,e)):"<".concat(d,"><li>").concat(ts(s,t+1,e));if(o===t&&a===e[e.length-1])return"</li><li".concat(y,">").concat(Ms(n,r,i)).concat(ts(u,o,e));const[k]=Br(e.pop());return"</li></".concat(k,">").concat(ts(s,t-1,e))}function Ms(s,t,e){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("html"in s&&"function"==typeof s.html)return s.html(t,e);if(s instanceof be)return Ws(s.value().slice(t,t+e));if(s instanceof me){if("list-container"===s.statics.blotName){const d=[];return s.children.forEachAt(t,e,(y,S,k)=>{const z="formats"in y&&"function"==typeof y.formats?y.formats():{};d.push({child:y,offset:S,length:k,indent:z.indent||0,type:z.list})}),ts(d,-1,[])}const r=[];if(s.children.forEachAt(t,e,(d,y,S)=>{r.push(Ms(d,y,S))}),n||"list"===s.statics.blotName)return r.join("");const{outerHTML:i,innerHTML:o}=s.domNode,[a,u]=i.split(">".concat(o,"<"));return"<table"===a?'<table style="border: 1px solid #000;">'.concat(r.join(""),"<").concat(u):"".concat(a,">").concat(r.join(""),"<").concat(u)}return s.domNode instanceof Element?s.domNode.outerHTML:""}function _h(s,t){return Object.keys(t).reduce((e,n)=>{if(null==s[n])return e;const r=t[n];return e[n]=r===s[n]?r:Array.isArray(r)?r.indexOf(s[n])<0?r.concat([s[n]]):r:[r,s[n]],e},{})}function Br(s){const t="ordered"===s?"ol":"ul";switch(s){case"checked":return[t,' data-list="checked"'];case"unchecked":return[t,' data-list="unchecked"'];default:return[t,""]}}function $i(s){return s.reduce((t,e)=>{if("string"==typeof e.insert){const n=e.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return t.insert(n,e.attributes)}return t.push(e)},new(P()))}function Gi(s,t){let{index:e,length:n}=s;return new Sn(e+t,n)}const Th=class vh{constructor(t){this.scroll=t,this.delta=this.getDelta()}applyDelta(t){this.scroll.update();let e=this.scroll.length();this.scroll.batchStart();const n=$i(t),r=new(P());return function Eh(s){const t=[];return s.forEach(e=>{"string"==typeof e.insert?e.insert.split("\n").forEach((r,i)=>{i&&t.push({insert:"\n",attributes:e.attributes}),r&&t.push({insert:r,attributes:e.attributes})}):t.push(e)}),t}(n.ops.slice()).reduce((o,a)=>{const u=le.Op.length(a);let d=a.attributes||{},y=!1,S=!1;if(null!=a.insert){if(r.retain(u),"string"==typeof a.insert){const R=a.insert;S=!R.endsWith("\n")&&(e<=o||!!this.scroll.descendant(oe,o)[0]),this.scroll.insertAt(o,R);const[Et,X]=this.scroll.line(o);let ht=Je({},ae(Et));if(Et instanceof Jt){const[$t]=Et.descendant(Ft,X);$t&&(ht=Je(ht,ae($t)))}d=le.AttributeMap.diff(ht,d)||{}}else if("object"==typeof a.insert){const R=Object.keys(a.insert)[0];if(null==R)return o;const Et=null!=this.scroll.query(R,U.INLINE);if(Et)(e<=o||this.scroll.descendant(oe,o)[0])&&(S=!0);else if(o>0){const[X,ht]=this.scroll.descendant(Ft,o-1);X instanceof be?"\n"!==X.value()[ht]&&(y=!0):X instanceof Qt&&X.statics.scope===U.INLINE_BLOT&&(y=!0)}if(this.scroll.insertAt(o,R,a.insert[R]),Et){const[X]=this.scroll.descendant(Ft,o);if(X){const ht=Je({},ae(X));d=le.AttributeMap.diff(ht,d)||{}}}}e+=u}else if(r.push(a),null!==a.retain&&"object"==typeof a.retain){const R=Object.keys(a.retain)[0];if(null==R)return o;this.scroll.updateEmbedAt(o,R,a.retain[R])}Object.keys(d).forEach(R=>{this.scroll.formatAt(o,u,R,d[R])});const k=y?1:0,z=S?1:0;return e+=k+z,r.retain(k),r.delete(z),o+u+k+z},0),r.reduce((o,a)=>"number"==typeof a.delete?(this.scroll.deleteAt(o,a.delete),o):o+le.Op.length(a),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(n)}deleteText(t,e){return this.scroll.deleteAt(t,e),this.update((new(P())).retain(t).delete(e))}formatLine(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.scroll.update(),Object.keys(n).forEach(i=>{this.scroll.lines(t,Math.max(e,1)).forEach(o=>{o.format(i,n[i])})}),this.scroll.optimize();const r=(new(P())).retain(t).retain(e,wn(n));return this.update(r)}formatText(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.keys(n).forEach(i=>{this.scroll.formatAt(t,e,i,n[i])});const r=(new(P())).retain(t).retain(e,wn(n));return this.update(r)}getContents(t,e){return this.delta.slice(t,t+e)}getDelta(){return this.scroll.lines().reduce((t,e)=>t.concat(e.delta()),new(P()))}getFormat(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],r=[];0===e?this.scroll.path(t).forEach(a=>{const[u]=a;u instanceof Jt?n.push(u):u instanceof Ft&&r.push(u)}):(n=this.scroll.lines(t,e),r=this.scroll.descendants(Ft,t,e));const[i,o]=[n,r].map(a=>{const u=a.shift();if(null==u)return{};let d=ae(u);for(;Object.keys(d).length>0;){const y=a.shift();if(null==y)return d;d=_h(ae(y),d)}return d});return(0,Kt.Z)((0,Kt.Z)({},i),o)}getHTML(t,e){const[n,r]=this.scroll.line(t);if(n){const i=n.length();return n.length()>=r+e?Ms(n,r,e,!(0===r&&e===i)):Ms(this.scroll,t,e,!0)}return""}getText(t,e){return this.getContents(t,e).filter(n=>"string"==typeof n.insert).map(n=>n.insert).join("")}insertContents(t,e){const n=$i(e),r=(new(P())).retain(t).concat(n);return this.scroll.insertContents(t,n),this.update(r)}insertEmbed(t,e,n){return this.scroll.insertAt(t,e,n),this.update((new(P())).retain(t).insert({[e]:n}))}insertText(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(t,e),Object.keys(n).forEach(r=>{this.scroll.formatAt(t,e.length,r,n[r])}),this.update((new(P())).retain(t).insert(e,wn(n)))}isBlank(){if(0===this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;const t=this.scroll.children.head;return(null==t?void 0:t.statics.blotName)===Jt.blotName&&(!(t.children.length>1)&&t.children.head instanceof Re)}removeFormat(t,e){const n=this.getText(t,e),[r,i]=this.scroll.line(t+e);let o=0,a=new(P());null!=r&&(o=r.length()-i,a=r.delta().slice(i,i+o-1).insert("\n"));const d=this.getContents(t,e+o).diff((new(P())).insert(n).concat(a)),y=(new(P())).retain(t).concat(d);return this.applyDelta(y)}update(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r=this.delta;if(1===e.length&&"characterData"===e[0].type&&e[0].target.data.match(yh)&&this.scroll.find(e[0].target)){const i=this.scroll.find(e[0].target),o=ae(i),a=i.offset(this.scroll),u=e[0].oldValue.replace(Xs.CONTENTS,""),d=(new(P())).insert(u),y=(new(P())).insert(i.value()),S=n&&{oldRange:Gi(n.oldRange,-a),newRange:Gi(n.newRange,-a)};t=(new(P())).retain(a).concat(d.diff(y,S)).reduce((z,R)=>R.insert?z.insert(R.insert,o):z.push(R),new(P())),this.delta=r.compose(t)}else this.delta=this.getDelta(),(!t||!Sr(r.compose(t),this.delta))&&(t=r.diff(this.delta,n));return t}},xe=(()=>{class s{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.quill=e,this.options=n}}return(0,N.Z)(s,"DEFAULTS",{}),s})(),Mr=class Ah extends Qt{constructor(t,e){super(t,e),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(n=>{this.contentNode.appendChild(n)}),this.leftGuard=document.createTextNode("\ufeff"),this.rightGuard=document.createTextNode("\ufeff"),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(t,e){return t===this.leftGuard?0:t===this.rightGuard?1:super.index(t,e)}restore(t){let n,e=null;const r=t.data.split("\ufeff").join("");if(t===this.leftGuard)if(this.prev instanceof be){const i=this.prev.length();this.prev.insertAt(i,r),e={startNode:this.prev.domNode,startOffset:i+r.length}}else n=document.createTextNode(r),this.parent.insertBefore(this.scroll.create(n),this),e={startNode:n,startOffset:r.length};else t===this.rightGuard&&(this.next instanceof be?(this.next.insertAt(0,r),e={startNode:this.next.domNode,startOffset:r.length}):(n=document.createTextNode(r),this.parent.insertBefore(this.scroll.create(n),this.next),e={startNode:n,startOffset:r.length}));return t.data="\ufeff",e}update(t,e){t.forEach(n=>{if("characterData"===n.type&&(n.target===this.leftGuard||n.target===this.rightGuard)){const r=this.restore(n.target);r&&(e.range=r)}})}},wh=class Nh{constructor(t,e){(0,N.Z)(this,"isComposing",!1),this.scroll=t,this.emitter=e,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",t=>{this.isComposing||this.handleCompositionStart(t)}),this.scroll.domNode.addEventListener("compositionend",t=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(t)})})}handleCompositionStart(t){const e=t.target instanceof Node?this.scroll.find(t.target,!0):null;e&&!(e instanceof Mr)&&(this.emitter.emit(M.events.COMPOSITION_BEFORE_START,t),this.scroll.batchStart(),this.emitter.emit(M.events.COMPOSITION_START,t),this.isComposing=!0)}handleCompositionEnd(t){this.emitter.emit(M.events.COMPOSITION_BEFORE_END,t),this.scroll.batchEnd(),this.emitter.emit(M.events.COMPOSITION_END,t),this.isComposing=!1}},Qs=(()=>{var s;class t{constructor(n,r){(0,N.Z)(this,"modules",{}),this.quill=n,this.options=r}init(){Object.keys(this.options.modules).forEach(n=>{null==this.modules[n]&&this.addModule(n)})}addModule(n){const r=this.quill.constructor.import("modules/".concat(n));return this.modules[n]=new r(this.quill,this.options.modules[n]||{}),this.modules[n]}}return s=t,(0,N.Z)(t,"DEFAULTS",{modules:{}}),(0,N.Z)(t,"themes",{default:s}),t})(),xh=s=>s.parentElement||s.getRootNode().host||null,Sh=s=>{const t=s.getBoundingClientRect(),e="offsetWidth"in s&&Math.abs(t.width)/s.offsetWidth||1,n="offsetHeight"in s&&Math.abs(t.height)/s.offsetHeight||1;return{top:t.top,right:t.left+s.clientWidth*e,bottom:t.top+s.clientHeight*n,left:t.left}},Js=s=>{const t=parseInt(s,10);return Number.isNaN(t)?0:t},Vi=(s,t,e,n,r,i)=>s<e&&t>n?0:s<e?-(e-s+r):t>n?t-s>n-e?s+r-e:t-n+i:0,tr=xn("quill"),er=new Rs;me.uiClass="ql-ui";class v{static debug(t){!0===t&&(t="log"),xn.level(t)}static find(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Cr.get(t)||er.find(t,e)}static import(t){return null==this.imports[t]&&tr.error("Cannot import ".concat(t,". Are you sure it was registered?")),this.imports[t]}static register(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!=typeof t){const r="attrName"in t?t.attrName:t.blotName;"string"==typeof r?this.register("formats/".concat(r),t,e):Object.keys(t).forEach(i=>{this.register(i,t[i],e)})}else null!=this.imports[t]&&!n&&tr.warn("Overwriting ".concat(t," with"),e),this.imports[t]=e,(t.startsWith("blots/")||t.startsWith("formats/"))&&e&&"boolean"!=typeof e&&"abstract"!==e.blotName&&er.register(e),"function"==typeof e.register&&e.register(er)}constructor(t){if(this.options=function Lh(s,t){let e=Je({container:s,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0}},t);if(e.theme&&e.theme!==v.DEFAULTS.theme){if(e.theme=v.import("themes/".concat(e.theme)),null==e.theme)throw new Error("Invalid theme ".concat(e.theme,". Did you register it?"))}else e.theme=Qs;const n=wn(e.theme.DEFAULTS);[n,e].forEach(o=>{o.modules=o.modules||{},Object.keys(o.modules).forEach(a=>{!0===o.modules[a]&&(o.modules[a]={})})});const i=Object.keys(n.modules).concat(Object.keys(e.modules)).reduce((o,a)=>{const u=v.import("modules/".concat(a));return null==u?tr.error("Cannot load ".concat(a," module. Are you sure you registered it?")):o[a]=u.DEFAULTS||{},o},{});return null!=e.modules&&e.modules.toolbar&&e.modules.toolbar.constructor!==Object&&(e.modules.toolbar={container:e.modules.toolbar}),e=Je({},v.DEFAULTS,{modules:i},n,e),["bounds","container"].forEach(o=>{const a=e[o];"string"==typeof a&&(e[o]=document.querySelector(a))}),e.modules=Object.keys(e.modules).reduce((o,a)=>(e.modules[a]&&(o[a]=e.modules[a]),o),{}),e}(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.container=this.options.container,null==this.container)return void tr.error("Invalid Quill container",t);this.options.debug&&v.debug(this.options.debug);const n=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",Cr.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new M;const r=Nr.blotName,i=this.options.registry.query(r);if(!i||!("blotName"in i))throw new Error('Cannot initialize Quill without "'.concat(r,'" blot'));if(this.scroll=new i(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new Th(this.scroll),this.selection=new bh(this.scroll,this.emitter),this.composition=new wh(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(M.events.EDITOR_CHANGE,o=>{o===M.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(M.events.SCROLL_UPDATE,(o,a)=>{const u=this.selection.lastRange,[d]=this.selection.getRange(),y=u&&d?{oldRange:u,newRange:d}:void 0;ye.call(this,()=>this.editor.update(null,a,y),o)}),this.emitter.on(M.events.SCROLL_EMBED_UPDATE,(o,a)=>{const u=this.selection.lastRange,[d]=this.selection.getRange(),y=u&&d?{oldRange:u,newRange:d}:void 0;ye.call(this,()=>{const S=(new(P())).retain(o.offset(this)).retain({[o.statics.blotName]:a});return this.editor.update(S,[],y)},v.sources.USER)}),n){const o=this.clipboard.convert({html:"".concat(n,"<p><br></p>"),text:"\n"});this.setContents(o)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof t){const n=t;(t=document.createElement("div")).classList.add(n)}return this.container.insertBefore(t,e),t}blur(){this.selection.setRange(null)}deleteText(t,e,n){return[t,e,,n]=Be(t,e,n),ye.call(this,()=>this.editor.deleteText(t,e),n,t,-1*e)}disable(){this.enable(!1)}editReadOnly(t){this.allowReadOnlyEdits=!0;const e=t();return this.allowReadOnlyEdits=!1,e}enable(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(t),this.container.classList.toggle("ql-disabled",!t)}focus(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.selection.focus(),t.preventScroll||this.scrollSelectionIntoView()}format(t,e){return ye.call(this,()=>{const r=this.getSelection(!0);let i=new(P());if(null==r)return i;if(this.scroll.query(t,U.BLOCK))i=this.editor.formatLine(r.index,r.length,{[t]:e});else{if(0===r.length)return this.selection.format(t,e),i;i=this.editor.formatText(r.index,r.length,{[t]:e})}return this.setSelection(r,M.sources.SILENT),i},arguments.length>2&&void 0!==arguments[2]?arguments[2]:M.sources.API)}formatLine(t,e,n,r,i){let o;return[t,e,o,i]=Be(t,e,n,r,i),ye.call(this,()=>this.editor.formatLine(t,e,o),i,t,0)}formatText(t,e,n,r,i){let o;return[t,e,o,i]=Be(t,e,n,r,i),ye.call(this,()=>this.editor.formatText(t,e,o),i,t,0)}getBounds(t){let n=null;if(n="number"==typeof t?this.selection.getBounds(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0):this.selection.getBounds(t.index,t.length),!n)return null;const r=this.container.getBoundingClientRect();return{bottom:n.bottom-r.top,height:n.height,left:n.left-r.left,right:n.right-r.left,top:n.top-r.top,width:n.width}}getContents(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-t;return[t,e]=Be(t,e),this.editor.getContents(t,e)}getFormat(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0);return"number"==typeof t?this.editor.getFormat(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0):this.editor.getFormat(t.index,t.length)}getIndex(t){return t.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(t){return this.scroll.leaf(t)}getLine(t){return this.scroll.line(t)}getLines(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof t?this.scroll.lines(t.index,t.length):this.scroll.lines(t,e)}getModule(t){return this.theme.modules[t]}getSelection(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;var n;return"number"==typeof t&&(e=null!==(n=e)&&void 0!==n?n:this.getLength()-t),[t,e]=Be(t,e),this.editor.getHTML(t,e)}getText(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;var n;return"number"==typeof t&&(e=null!==(n=e)&&void 0!==n?n:this.getLength()-t),[t,e]=Be(t,e),this.editor.getText(t,e)}hasFocus(){return this.selection.hasFocus()}insertEmbed(t,e,n){return ye.call(this,()=>this.editor.insertEmbed(t,e,n),arguments.length>3&&void 0!==arguments[3]?arguments[3]:v.sources.API,t)}insertText(t,e,n,r,i){let o;return[t,,o,i]=Be(t,0,n,r,i),ye.call(this,()=>this.editor.insertText(t,e,o),i,t,e.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(){const[t,e,,n]=Be(...arguments);return ye.call(this,()=>this.editor.removeFormat(t,e),n,t)}scrollRectIntoView(t){((s,t)=>{const e=s.ownerDocument;let n=t,r=s;for(;r;){var i,o,a,u;const y=r===e.body,S=y?{top:0,right:null!==(i=null===(o=window.visualViewport)||void 0===o?void 0:o.width)&&void 0!==i?i:e.documentElement.clientWidth,bottom:null!==(a=null===(u=window.visualViewport)||void 0===u?void 0:u.height)&&void 0!==a?a:e.documentElement.clientHeight,left:0}:Sh(r),k=getComputedStyle(r),z=Vi(n.left,n.right,S.left,S.right,Js(k.scrollPaddingLeft),Js(k.scrollPaddingRight)),R=Vi(n.top,n.bottom,S.top,S.bottom,Js(k.scrollPaddingTop),Js(k.scrollPaddingBottom));if(z||R)if(y){var d;null===(d=e.defaultView)||void 0===d||d.scrollBy(z,R)}else{const{scrollLeft:Et,scrollTop:X}=r;R&&(r.scrollTop+=R),z&&(r.scrollLeft+=z);const ht=r.scrollLeft-Et,$t=r.scrollTop-X;n={left:n.left-ht,top:n.top-$t,right:n.right-ht,bottom:n.bottom-$t}}r=y||"fixed"===k.position?null:xh(r)}})(this.root,t)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const t=this.selection.lastRange,e=t&&this.selection.getBounds(t.index,t.length);e&&this.scrollRectIntoView(e)}setContents(t){return ye.call(this,()=>{t=new(P())(t);const n=this.getLength(),r=this.editor.deleteText(0,n),i=this.editor.insertContents(0,t),o=this.editor.deleteText(this.getLength()-1,1);return r.compose(i).compose(o)},arguments.length>1&&void 0!==arguments[1]?arguments[1]:M.sources.API)}setSelection(t,e,n){null==t?this.selection.setRange(null,e||v.sources.API):([t,e,,n]=Be(t,e,n),this.selection.setRange(new Sn(Math.max(0,t),e),n),n!==M.sources.SILENT&&this.scrollSelectionIntoView())}setText(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M.sources.API;const n=(new(P())).insert(t);return this.setContents(n,e)}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M.sources.USER;const e=this.scroll.update(t);return this.selection.update(t),e}updateContents(t){return ye.call(this,()=>(t=new(P())(t),this.editor.applyDelta(t)),arguments.length>1&&void 0!==arguments[1]?arguments[1]:M.sources.API,!0)}}function ye(s,t,e,n){if(!this.isEnabled()&&t===M.sources.USER&&!this.allowReadOnlyEdits)return new(P());let r=null==e?null:this.getSelection();const i=this.editor.delta,o=s();if(null!=r&&(!0===e&&(e=r.index),null==n?r=Wi(r,o,t):0!==n&&(r=Wi(r,e,n,t)),this.setSelection(r,M.sources.SILENT)),o.length()>0){const a=[M.events.TEXT_CHANGE,o,i,t];this.emitter.emit(M.events.EDITOR_CHANGE,...a),t!==M.sources.SILENT&&this.emitter.emit(...a)}return o}function Be(s,t,e,n,r){let i={};return"number"==typeof s.index&&"number"==typeof s.length?"number"!=typeof t?(r=n,n=e,e=t,t=s.length,s=s.index):(t=s.length,s=s.index):"number"!=typeof t&&(r=n,n=e,e=t,t=0),"object"==typeof e?(i=e,r=n):"string"==typeof e&&(null!=n?i[e]=n:r=e),[s,t,i,r=r||M.sources.API]}function Wi(s,t,e,n){const r="number"==typeof e?e:0;if(null==s)return null;let i,o;return[i,o]=[s.index,s.index+s.length].map(t&&"function"==typeof t.transformPosition?a=>t.transformPosition(a,n!==M.sources.USER):a=>a<t||a===t&&n===M.sources.USER?a:r>=0?a+r:Math.max(t,a+r)),new Sn(i,o-i)}(0,N.Z)(v,"DEFAULTS",{bounds:null,modules:{},placeholder:"",readOnly:!1,registry:er,theme:"default"}),(0,N.Z)(v,"events",M.events),(0,N.Z)(v,"sources",M.sources),(0,N.Z)(v,"version","2.0.0-rc.2"),(0,N.Z)(v,"imports",{delta:P(),parchment:et,"core/module":xe,"core/theme":Qs});const Cn=class Oh extends Ks{};function Xi(s){return s instanceof Jt||s instanceof oe}function Yi(s){return"function"==typeof s.updateContent}let qh=(()=>{class s extends Nr{constructor(e,n,r){let{emitter:i}=r;super(e,n),this.emitter=i,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",o=>this.handleDragStart(o))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const e=this.batch;this.batch=!1,this.update(e)}emitMount(e){this.emitter.emit(M.events.SCROLL_BLOT_MOUNT,e)}emitUnmount(e){this.emitter.emit(M.events.SCROLL_BLOT_UNMOUNT,e)}emitEmbedUpdate(e,n){this.emitter.emit(M.events.SCROLL_EMBED_UPDATE,e,n)}deleteAt(e,n){const[r,i]=this.line(e),[o]=this.line(e+n);if(super.deleteAt(e,n),null!=o&&r!==o&&i>0){if(r instanceof oe||o instanceof oe)return void this.optimize();r.moveChildren(o,o.children.head instanceof Re?null:o.children.head),r.remove()}this.optimize()}enable(){this.domNode.setAttribute("contenteditable",arguments.length>0&&void 0!==arguments[0]&&!arguments[0]?"false":"true")}formatAt(e,n,r,i){super.formatAt(e,n,r,i),this.optimize()}insertAt(e,n,r){if(e>=this.length())if(null==r||null==this.scroll.query(n,U.BLOCK)){const i=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(i),null==r&&n.endsWith("\n")?i.insertAt(0,n.slice(0,-1),r):i.insertAt(0,n,r)}else{const i=this.scroll.create(n,r);this.appendChild(i)}else super.insertAt(e,n,r);this.optimize()}insertBefore(e,n){if(e.statics.scope===U.INLINE_BLOT){const r=this.scroll.create(this.statics.defaultChild.blotName);r.appendChild(e),super.insertBefore(r,n)}else super.insertBefore(e,n)}insertContents(e,n){const r=this.deltaToRenderBlocks(n.concat((new(P())).insert("\n"))),i=r.pop();if(null==i)return;this.batchStart();const o=r.shift();if(o){const d="block"===o.type&&(0===o.delta.length()||!this.descendant(oe,e)[0]&&e<this.length()),y="block"===o.type?o.delta:(new(P())).insert({[o.key]:o.value});Dr(this,e,y);const S="block"===o.type?1:0,k=e+y.length()+S;d&&this.insertAt(k-1,"\n");const z=ae(this.line(e)[0]),R=le.AttributeMap.diff(z,o.attributes)||{};Object.keys(R).forEach(Et=>{this.formatAt(k-1,1,Et,R[Et])}),e=k}let[a,u]=this.children.find(e);r.length&&(a&&(a=a.split(u),u=0),r.forEach(d=>{if("block"===d.type)Dr(this.createBlock(d.attributes,a||void 0),0,d.delta);else{const y=this.create(d.key,d.value);this.insertBefore(y,a||void 0),Object.keys(d.attributes).forEach(S=>{y.format(S,d.attributes[S])})}})),"block"===i.type&&i.delta.length()&&Dr(this,a?a.offset(a.scroll)+u:this.length(),i.delta),this.batchEnd(),this.optimize()}isEnabled(){return"true"===this.domNode.getAttribute("contenteditable")}leaf(e){const n=this.path(e).pop();if(!n)return[null,-1];const[r,i]=n;return r instanceof Ft?[r,i]:[null,-1]}line(e){return e===this.length()?this.line(e-1):this.descendant(Xi,e)}lines(){const r=(i,o,a)=>{let u=[],d=a;return i.children.forEachAt(o,a,(y,S,k)=>{Xi(y)?u.push(y):y instanceof Ks&&(u=u.concat(r(y,S,d))),d-=k}),u};return r(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE)}optimize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.batch||(super.optimize(e,n),e.length>0&&this.emitter.emit(M.events.SCROLL_OPTIMIZE,e,n))}path(e){return super.path(e).slice(1)}remove(){}update(e){if(this.batch)return void(Array.isArray(e)&&(this.batch=this.batch.concat(e)));let n=M.sources.USER;"string"==typeof e&&(n=e),Array.isArray(e)||(e=this.observer.takeRecords()),(e=e.filter(r=>{let{target:i}=r;const o=this.find(i,!0);return o&&!Yi(o)})).length>0&&this.emitter.emit(M.events.SCROLL_BEFORE_UPDATE,n,e),super.update(e.concat([])),e.length>0&&this.emitter.emit(M.events.SCROLL_UPDATE,n,e)}updateEmbedAt(e,n,r){const[i]=this.descendant(o=>o instanceof oe,e);i&&i.statics.blotName===n&&Yi(i)&&i.updateContent(r)}handleDragStart(e){e.preventDefault()}deltaToRenderBlocks(e){const n=[];let r=new(P());return e.forEach(i=>{const o=null==i?void 0:i.insert;if(o)if("string"==typeof o){const u=o.split("\n");u.slice(0,-1).forEach(y=>{var S;r.insert(y,i.attributes),n.push({type:"block",delta:r,attributes:null!==(S=i.attributes)&&void 0!==S?S:{}}),r=new(P())});const d=u[u.length-1];d&&r.insert(d,i.attributes)}else{const u=Object.keys(o)[0];if(!u)return;var a;this.query(u,U.INLINE)?r.push(i):(r.length()&&n.push({type:"block",delta:r,attributes:{}}),r=new(P()),n.push({type:"blockEmbed",key:u,value:o[u],attributes:null!==(a=i.attributes)&&void 0!==a?a:{}}))}}),r.length()&&n.push({type:"block",delta:r,attributes:{}}),n}createBlock(e,n){let r;const i={};Object.entries(e).forEach(u=>{let[d,y]=u;null!=this.query(d,U.BLOCK&U.BLOT)?r=d:i[d]=y});const o=this.create(r||this.statics.defaultChild.blotName,r?e[r]:void 0);this.insertBefore(o,n||void 0);const a=o.length();return Object.entries(i).forEach(u=>{let[d,y]=u;o.formatAt(0,a,d,y)}),o}}return(0,N.Z)(s,"blotName","scroll"),(0,N.Z)(s,"className","ql-editor"),(0,N.Z)(s,"tagName","DIV"),(0,N.Z)(s,"defaultChild",Jt),(0,N.Z)(s,"allowedChildren",[Jt,oe,Cn]),s})();function Dr(s,t,e){e.reduce((n,r)=>{const i=le.Op.length(r);let o=r.attributes||{};if(null!=r.insert)if("string"==typeof r.insert){s.insertAt(n,r.insert);const[u]=s.descendant(Ft,n),d=ae(u);o=le.AttributeMap.diff(d,o)||{}}else if("object"==typeof r.insert){const a=Object.keys(r.insert)[0];if(null==a)return n;if(s.insertAt(n,a,r.insert[a]),null!=s.scroll.query(a,U.INLINE)){const[d]=s.descendant(Ft,n),y=ae(d);o=le.AttributeMap.diff(y,o)||{}}}return Object.keys(o).forEach(a=>{s.formatAt(n,i,a,o[a])}),n+i},t)}const Ih=qh,jr={scope:U.BLOCK,whitelist:["right","center","justify"]},kh=new we("align","align",jr),Qi=new pe("align","ql-align",jr),Ji=new tn("align","text-align",jr);class tl extends tn{value(t){let e=super.value(t);if(!e.startsWith("rgb("))return e;e=e.replace(/^[^\d]+/,"").replace(/[^\d]+$/,"");const n=e.split(",").map(r=>"00".concat(parseInt(r,10).toString(16)).slice(-2)).join("");return"#".concat(n)}}const Rh=new pe("color","ql-color",{scope:U.INLINE}),Pr=new tl("color","color",{scope:U.INLINE}),Bh=new pe("background","ql-bg",{scope:U.INLINE}),Ur=new tl("background","background-color",{scope:U.INLINE});class Ln extends Cn{static create(t){const e=super.create(t);return e.setAttribute("spellcheck","false"),e}code(t,e){return this.children.map(n=>n.length()<=1?"":n.domNode.innerText).join("\n").slice(t,t+e)}html(t,e){return"<pre>\n".concat(Ws(this.code(t,e)),"\n</pre>")}}let Zt=(()=>{class s extends Jt{static register(){v.register(Ln)}}return(0,N.Z)(s,"TAB","  "),s})(),Mh=(()=>{class s extends en{}return s.blotName="code",s.tagName="CODE",s})();Zt.blotName="code-block",Zt.className="ql-code-block",Zt.tagName="DIV",Ln.blotName="code-block-container",Ln.className="ql-code-block-container",Ln.tagName="DIV",Ln.allowedChildren=[Zt],Zt.allowedChildren=[be,Re,Xs],Zt.requiredContainer=Ln;const Fr={scope:U.BLOCK,whitelist:["rtl"]},el=new we("direction","dir",Fr),nl=new pe("direction","ql-direction",Fr),sl=new tn("direction","direction",Fr),rl={scope:U.INLINE,whitelist:["serif","monospace"]},il=new pe("font","ql-font",rl),ll=new class Dh extends tn{value(t){return super.value(t).replace(/["']/g,"")}}("font","font-family",rl),ol=new pe("size","ql-size",{scope:U.INLINE,whitelist:["small","large","huge"]}),al=new tn("size","font-size",{scope:U.INLINE,whitelist:["10px","18px","32px"]}),jh=xn("quill:keyboard"),Ph=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class nr extends xe{static match(t,e){return!["altKey","ctrlKey","metaKey","shiftKey"].some(n=>!!e[n]!==t[n]&&null!==e[n])&&(e.key===t.key||e.key===t.which)}constructor(t,e){super(t,e),this.bindings={},Object.keys(this.options.bindings).forEach(n=>{this.options.bindings[n]&&this.addBinding(this.options.bindings[n])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=function Fh(s){if("string"==typeof s||"number"==typeof s)s={key:s};else{if("object"!=typeof s)return null;s=wn(s)}return s.shortKey&&(s[Ph]=s.shortKey,delete s.shortKey),s}(t);null!=r?("function"==typeof e&&(e={handler:e}),"function"==typeof n&&(n={handler:n}),(Array.isArray(r.key)?r.key:[r.key]).forEach(o=>{const a=(0,Kt.Z)((0,Kt.Z)((0,Kt.Z)({},r),{},{key:o},e),n);this.bindings[a.key]=this.bindings[a.key]||[],this.bindings[a.key].push(a)})):jh.warn("Attempted to add invalid keyboard binding",r)}listen(){this.quill.root.addEventListener("keydown",t=>{if(t.defaultPrevented||t.isComposing)return;const n=(this.bindings[t.key]||[]).concat(this.bindings[t.which]||[]).filter(X=>nr.match(t,X));if(0===n.length)return;const r=v.find(t.target,!0);if(r&&r.scroll!==this.quill.scroll)return;const i=this.quill.getSelection();if(null==i||!this.quill.hasFocus())return;const[o,a]=this.quill.getLine(i.index),[u,d]=this.quill.getLeaf(i.index),[y,S]=0===i.length?[u,d]:this.quill.getLeaf(i.index+i.length),k=u instanceof $s?u.value().slice(0,d):"",z=y instanceof $s?y.value().slice(S):"",R={collapsed:0===i.length,empty:0===i.length&&o.length()<=1,format:this.quill.getFormat(i),line:o,offset:a,prefix:k,suffix:z,event:t};n.some(X=>{if(null!=X.collapsed&&X.collapsed!==R.collapsed||null!=X.empty&&X.empty!==R.empty||null!=X.offset&&X.offset!==R.offset)return!1;if(Array.isArray(X.format)){if(X.format.every(ht=>null==R.format[ht]))return!1}else if("object"==typeof X.format&&!Object.keys(X.format).every(ht=>!0===X.format[ht]?null!=R.format[ht]:!1===X.format[ht]?null==R.format[ht]:Sr(X.format[ht],R.format[ht])))return!1;return!(null!=X.prefix&&!X.prefix.test(R.prefix)||null!=X.suffix&&!X.suffix.test(R.suffix))&&!0!==X.handler.call(this,i,R,X)})&&t.preventDefault()})}handleBackspace(t,e){const n=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix)?2:1;if(0===t.index||this.quill.getLength()<=1)return;let r={};const[i]=this.quill.getLine(t.index);let o=(new(P())).retain(t.index-n).delete(n);if(0===e.offset){const[a]=this.quill.getLine(t.index-1);if(a&&!("block"===a.statics.blotName&&a.length()<=1)){const d=i.formats(),y=this.quill.getFormat(t.index-1,1);if(r=le.AttributeMap.diff(d,y)||{},Object.keys(r).length>0){const S=(new(P())).retain(t.index+i.length()-2).retain(1,r);o=o.compose(S)}}}this.quill.updateContents(o,v.sources.USER),this.quill.focus()}handleDelete(t,e){const n=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix)?2:1;if(t.index>=this.quill.getLength()-n)return;let r={};const[i]=this.quill.getLine(t.index);let o=(new(P())).retain(t.index).delete(n);if(e.offset>=i.length()-1){const[a]=this.quill.getLine(t.index+1);if(a){const u=i.formats(),d=this.quill.getFormat(t.index,1);r=le.AttributeMap.diff(u,d)||{},Object.keys(r).length>0&&(o=o.retain(a.length()-1).retain(1,r))}}this.quill.updateContents(o,v.sources.USER),this.quill.focus()}handleDeleteRange(t){Zr({range:t,quill:this.quill}),this.quill.focus()}handleEnter(t,e){const n=Object.keys(e.format).reduce((i,o)=>(this.quill.scroll.query(o,U.BLOCK)&&!Array.isArray(e.format[o])&&(i[o]=e.format[o]),i),{}),r=(new(P())).retain(t.index).delete(t.length).insert("\n",n);this.quill.updateContents(r,v.sources.USER),this.quill.setSelection(t.index+1,v.sources.SILENT),this.quill.focus()}}const Uh={bindings:{bold:Hr("bold"),italic:Hr("italic"),underline:Hr("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(s,t){return!(!t.collapsed||0===t.offset)||(this.quill.format("indent","+1",v.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(s,t){return!(!t.collapsed||0===t.offset)||(this.quill.format("indent","-1",v.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(s,t){null!=t.format.indent?this.quill.format("indent","-1",v.sources.USER):null!=t.format.list&&this.quill.format("list",!1,v.sources.USER)}},"indent code-block":cl(!0),"outdent code-block":cl(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(s){this.quill.deleteText(s.index-1,1,v.sources.USER)}},tab:{key:"Tab",handler(s,t){if(t.format.table)return!0;this.quill.history.cutoff();const e=(new(P())).retain(s.index).delete(s.length).insert("\t");return this.quill.updateContents(e,v.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(s.index+1,v.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,v.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(s,t){const e={list:!1};t.format.indent&&(e.indent=!1),this.quill.formatLine(s.index,s.length,e,v.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(s){const[t,e]=this.quill.getLine(s.index),n=(0,Kt.Z)((0,Kt.Z)({},t.formats()),{},{list:"checked"}),r=(new(P())).retain(s.index).insert("\n",n).retain(t.length()-e-1).retain(1,{list:"unchecked"});this.quill.updateContents(r,v.sources.USER),this.quill.setSelection(s.index+1,v.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(s,t){const[e,n]=this.quill.getLine(s.index),r=(new(P())).retain(s.index).insert("\n",t.format).retain(e.length()-n-1).retain(1,{header:null});this.quill.updateContents(r,v.sources.USER),this.quill.setSelection(s.index+1,v.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(s){const t=this.quill.getModule("table");if(t){const[e,n,r,i]=t.getTable(s),o=function Hh(s,t,e,n){return null==t.prev&&null==t.next?null==e.prev&&null==e.next?0===n?-1:1:null==e.prev?-1:1:null==t.prev?-1:null==t.next?1:null}(0,n,r,i);if(null==o)return;let a=e.offset();if(o<0){const u=(new(P())).retain(a).insert("\n");this.quill.updateContents(u,v.sources.USER),this.quill.setSelection(s.index+1,s.length,v.sources.SILENT)}else if(o>0){a+=e.length();const u=(new(P())).retain(a).insert("\n");this.quill.updateContents(u,v.sources.USER),this.quill.setSelection(a,v.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(s,t){const{event:e,line:n}=t,r=n.offset(this.quill.scroll);this.quill.setSelection(e.shiftKey?r-1:r+n.length(),v.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(s,t){if(null==this.quill.scroll.query("list"))return!0;const{length:e}=t.prefix,[n,r]=this.quill.getLine(s.index);if(r>e)return!0;let i;switch(t.prefix.trim()){case"[]":case"[ ]":i="unchecked";break;case"[x]":i="checked";break;case"-":case"*":i="bullet";break;default:i="ordered"}this.quill.insertText(s.index," ",v.sources.USER),this.quill.history.cutoff();const o=(new(P())).retain(s.index-r).delete(e+1).retain(n.length()-2-r).retain(1,{list:i});return this.quill.updateContents(o,v.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(s.index-e,v.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(s){const[t,e]=this.quill.getLine(s.index);let n=2,r=t;for(;null!=r&&r.length()<=1&&r.formats()["code-block"];)if(r=r.prev,n-=1,n<=0){const i=(new(P())).retain(s.index+t.length()-e-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(i,v.sources.USER),this.quill.setSelection(s.index-1,v.sources.SILENT),!1}return!0}},"embed left":sr("ArrowLeft",!1),"embed left shift":sr("ArrowLeft",!0),"embed right":sr("ArrowRight",!1),"embed right shift":sr("ArrowRight",!0),"table down":ul(!1),"table up":ul(!0)}};function cl(s){return{key:"Tab",shiftKey:!s,format:{"code-block":!0},handler(t,e){let{event:n}=e;const r=this.quill.scroll.query("code-block"),{TAB:i}=r;if(0===t.length&&!n.shiftKey)return this.quill.insertText(t.index,i,v.sources.USER),void this.quill.setSelection(t.index+i.length,v.sources.SILENT);const o=0===t.length?this.quill.getLines(t.index,1):this.quill.getLines(t);let{index:a,length:u}=t;o.forEach((d,y)=>{s?(d.insertAt(0,i),0===y?a+=i.length:u+=i.length):d.domNode.textContent.startsWith(i)&&(d.deleteAt(0,i.length),0===y?a-=i.length:u-=i.length)}),this.quill.update(v.sources.USER),this.quill.setSelection(a,u,v.sources.SILENT)}}}function sr(s,t){return{key:s,shiftKey:t,altKey:null,["ArrowLeft"===s?"prefix":"suffix"]:/^$/,handler(n){let{index:r}=n;"ArrowRight"===s&&(r+=n.length+1);const[i]=this.quill.getLeaf(r);return!(i instanceof Qt&&("ArrowLeft"===s?t?this.quill.setSelection(n.index-1,n.length+1,v.sources.USER):this.quill.setSelection(n.index-1,v.sources.USER):t?this.quill.setSelection(n.index,n.length+1,v.sources.USER):this.quill.setSelection(n.index+n.length+1,v.sources.USER),1))}}}function Hr(s){return{key:s[0],shortKey:!0,handler(t,e){this.quill.format(s,!e.format[s],v.sources.USER)}}}function ul(s){return{key:s?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(t,e){const n=s?"prev":"next",r=e.line,i=r.parent[n];if(null!=i){if("table-row"===i.statics.blotName){let o=i.children.head,a=r;for(;null!=a.prev;)a=a.prev,o=o.next;const u=o.offset(this.quill.scroll)+Math.min(e.offset,o.length()-1);this.quill.setSelection(u,0,v.sources.USER)}}else{const o=r.table()[n];null!=o&&this.quill.setSelection(s?o.offset(this.quill.scroll)+o.length()-1:o.offset(this.quill.scroll),0,v.sources.USER)}return!1}}}function Zr(s){let{quill:t,range:e}=s;const n=t.getLines(e);let r={};if(n.length>1){const i=n[0].formats(),o=n[n.length-1].formats();r=le.AttributeMap.diff(o,i)||{}}t.deleteText(e,v.sources.USER),Object.keys(r).length>0&&t.formatLine(e.index,1,r,v.sources.USER),t.setSelection(e.index,v.sources.SILENT)}nr.DEFAULTS=Uh;const Zh=/font-weight:\s*normal/,zh=["P","OL","UL"],hl=s=>s&&zh.includes(s.tagName),Vh=/\bmso-list:[^;]*ignore/i,Wh=/\bmso-list:[^;]*\bl(\d+)/i,Xh=/\bmso-list:[^;]*\blevel(\d+)/i,tf=[function Jh(s){"urn:schemas-microsoft-com:office:word"===s.documentElement.getAttribute("xmlns:w")&&(s=>{const t=Array.from(s.querySelectorAll("[style*=mso-list]")),e=[],n=[];t.forEach(u=>{(u.getAttribute("style")||"").match(Vh)?e.push(u):n.push(u)}),e.forEach(u=>{var d;return null===(d=u.parentNode)||void 0===d?void 0:d.removeChild(u)});const r=s.documentElement.innerHTML,i=n.map(u=>((s,t)=>{const e=s.getAttribute("style"),n=null==e?void 0:e.match(Wh);if(!n)return null;const r=Number(n[1]),i=null==e?void 0:e.match(Xh),o=i?Number(i[1]):1,a=new RegExp("@list l".concat(r,":level").concat(o,"\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)"),"i"),u=t.match(a);return{id:r,indent:o,type:u&&"bullet"===u[1]?"bullet":"ordered",element:s}})(u,r)).filter(u=>u);for(;i.length;){var o;const u=[];let d=i.shift();for(;d;){var a;u.push(d),d=i.length&&(null===(a=i[0])||void 0===a?void 0:a.element)===d.element.nextElementSibling&&i[0].id===d.id?i.shift():null}const y=document.createElement("ul");u.forEach(z=>{const R=document.createElement("li");R.setAttribute("data-list",z.type),z.indent>1&&R.setAttribute("class","ql-indent-".concat(z.indent-1)),R.innerHTML=z.element.innerHTML,y.appendChild(R)});const S=null===(o=u[0])||void 0===o?void 0:o.element,{parentNode:k}=null!=S?S:{};S&&(null==k||k.replaceChild(y,S)),u.slice(1).forEach(z=>{let{element:R}=z;null==k||k.removeChild(R)})}})(s)},function Gh(s){s.querySelector('[id^="docs-internal-guid-"]')&&((s=>{Array.from(s.querySelectorAll('b[style*="font-weight"]')).filter(t=>{var e;return null===(e=t.getAttribute("style"))||void 0===e?void 0:e.match(Zh)}).forEach(t=>{var e;const n=s.createDocumentFragment();n.append(...t.childNodes),null===(e=t.parentNode)||void 0===e||e.replaceChild(n,t)})})(s),(s=>{Array.from(s.querySelectorAll("br")).filter(t=>hl(t.previousElementSibling)&&hl(t.nextElementSibling)).forEach(t=>{var e;null===(e=t.parentNode)||void 0===e||e.removeChild(t)})})(s))}],nf=xn("quill:clipboard"),sf=[[Node.TEXT_NODE,function bf(s,t,e){var n;let r=s.data;if("O:P"===(null===(n=s.parentElement)||void 0===n?void 0:n.tagName))return t.insert(r.trim());if(!dl(s)){if(0===r.trim().length&&r.includes("\n")&&!function of(s,t){return s.previousElementSibling&&s.nextElementSibling&&!nn(s.previousElementSibling,t)&&!nn(s.nextElementSibling,t)}(s,e))return t;const i=(o,a)=>{const u=a.replace(/[^\u00a0]/g,"");return u.length<1&&o?" ":u};r=r.replace(/\r\n/g," ").replace(/\n/g," "),r=r.replace(/\s\s+/g,i.bind(i,!0)),(null==s.previousSibling&&null!=s.parentElement&&nn(s.parentElement,e)||s.previousSibling instanceof Element&&nn(s.previousSibling,e))&&(r=r.replace(/^\s+/,i.bind(i,!1))),(null==s.nextSibling&&null!=s.parentElement&&nn(s.parentElement,e)||s.nextSibling instanceof Element&&nn(s.nextSibling,e))&&(r=r.replace(/\s+$/,i.bind(i,!1)))}return t.insert(r)}],[Node.TEXT_NODE,gl],["br",function uf(s,t){return Ds(t,"\n")||t.insert("\n"),t}],[Node.ELEMENT_NODE,gl],[Node.ELEMENT_NODE,function cf(s,t,e){const n=e.query(s);if(null==n)return t;if(n.prototype instanceof Qt){const r={},i=n.value(s);if(null!=i)return r[n.blotName]=i,(new(P())).insert(r,n.formats(s,e))}else if(n.prototype instanceof Bs&&!Ds(t,"\n")&&t.insert("\n"),"blotName"in n&&"formats"in n&&"function"==typeof n.formats)return On(t,n.blotName,n.formats(s,e),e);return t}],[Node.ELEMENT_NODE,function af(s,t,e){const n=we.keys(s),r=pe.keys(s),i=tn.keys(s),o={};return n.concat(r).concat(i).forEach(a=>{let u=e.query(a,U.ATTRIBUTE);null!=u&&(o[u.attrName]=u.value(s),o[u.attrName])||(u=rf[a],null!=u&&(u.attrName===a||u.keyName===a)&&(o[u.attrName]=u.value(s)||void 0),u=fl[a],null!=u&&(u.attrName===a||u.keyName===a)&&(u=fl[a],o[u.attrName]=u.value(s)||void 0))}),Object.entries(o).reduce((a,u)=>{let[d,y]=u;return On(a,d,y,e)},t)}],[Node.ELEMENT_NODE,function pf(s,t,e){var n;const r={},i=s.style||{};return"italic"===i.fontStyle&&(r.italic=!0),"underline"===i.textDecoration&&(r.underline=!0),"line-through"===i.textDecoration&&(r.strike=!0),(null!==(n=i.fontWeight)&&void 0!==n&&n.startsWith("bold")||parseInt(i.fontWeight,10)>=700)&&(r.bold=!0),t=Object.entries(r).reduce((o,a)=>{let[u,d]=a;return On(o,u,d,e)},t),parseFloat(i.textIndent||0)>0?(new(P())).insert("\t").concat(t):t}],["li",function df(s,t,e){const n=e.query(s);if(null==n||"list"!==n.blotName||!Ds(t,"\n"))return t;let r=-1,i=s.parentNode;for(;null!=i;)["OL","UL"].includes(i.tagName)&&(r+=1),i=i.parentNode;return r<=0?t:t.reduce((o,a)=>a.attributes&&"number"==typeof a.attributes.indent?o.push(a):o.insert(a.insert,(0,Kt.Z)({indent:r},a.attributes||{})),new(P()))}],["ol, ul",function gf(s,t,e){return On(t,"list","OL"===s.tagName?"ordered":"bullet",e)}],["pre",function hf(s,t,e){const n=e.query("code-block");return On(t,"code-block",!n||!("formats"in n)||"function"!=typeof n.formats||n.formats(s,e),e)}],["tr",function mf(s,t,e){var n,r;const i="TABLE"===(null===(n=s.parentElement)||void 0===n?void 0:n.tagName)?s.parentElement:null===(r=s.parentElement)||void 0===r?void 0:r.parentElement;return null!=i?On(t,"table",Array.from(i.querySelectorAll("tr")).indexOf(s)+1,e):t}],["b",Kr("bold")],["i",Kr("italic")],["strike",Kr("strike")],["style",function ff(){return new(P())}]],rf=[kh,el].reduce((s,t)=>(s[t.keyName]=t,s),{}),fl=[Ji,Ur,Pr,sl,ll,al].reduce((s,t)=>(s[t.keyName]=t,s),{});let lf=(()=>{class s extends xe{constructor(e,n){super(e,n),this.quill.root.addEventListener("copy",r=>this.onCaptureCopy(r,!1)),this.quill.root.addEventListener("cut",r=>this.onCaptureCopy(r,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],sf.concat(this.options.matchers).forEach(r=>{let[i,o]=r;this.addMatcher(i,o)})}addMatcher(e,n){this.matchers.push([e,n])}convert(e){let{html:n,text:r}=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(i[Zt.blotName])return(new(P())).insert(r||"",{[Zt.blotName]:i[Zt.blotName]});if(!n)return(new(P())).insert(r||"",i);const o=this.convertHTML(n);return Ds(o,"\n")&&(null==o.ops[o.ops.length-1].attributes||i.table)?o.compose((new(P())).retain(o.length()-1).delete(1)):o}normalizeHTML(e){(s=>{s.documentElement&&tf.forEach(t=>{t(s)})})(e)}convertHTML(e){const n=(new DOMParser).parseFromString(e,"text/html");this.normalizeHTML(n);const r=n.body,i=new WeakMap,[o,a]=this.prepareMatching(r,i);return zr(this.quill.scroll,r,o,a,i)}dangerouslyPasteHTML(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v.sources.API;if("string"==typeof e){const i=this.convert({html:e,text:""});this.quill.setContents(i,n),this.quill.setSelection(0,v.sources.SILENT)}else{const i=this.convert({html:n,text:""});this.quill.updateContents((new(P())).retain(e).concat(i),r),this.quill.setSelection(e+i.length(),v.sources.SILENT)}}onCaptureCopy(e){var n,r;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.defaultPrevented)return;e.preventDefault();const[o]=this.quill.selection.getRange();if(null==o)return;const{html:a,text:u}=this.onCopy(o,i);null===(n=e.clipboardData)||void 0===n||n.setData("text/plain",u),null===(r=e.clipboardData)||void 0===r||r.setData("text/html",a),i&&Zr({range:o,quill:this.quill})}onCapturePaste(e){var n,r,i;if(e.defaultPrevented||!this.quill.isEnabled())return;e.preventDefault();const o=this.quill.getSelection(!0);if(null==o)return;const a=null===(n=e.clipboardData)||void 0===n?void 0:n.getData("text/html"),u=null===(r=e.clipboardData)||void 0===r?void 0:r.getData("text/plain"),d=Array.from((null===(i=e.clipboardData)||void 0===i?void 0:i.files)||[]);if(!a&&d.length>0)this.quill.uploader.upload(o,d);else{if(a&&d.length>0){var y;const S=(new DOMParser).parseFromString(a,"text/html");if(1===S.body.childElementCount&&"IMG"===(null===(y=S.body.firstElementChild)||void 0===y?void 0:y.tagName))return void this.quill.uploader.upload(o,d)}this.onPaste(o,{html:a,text:u})}}onCopy(e){const n=this.quill.getText(e);return{html:this.quill.getSemanticHTML(e),text:n}}onPaste(e,n){let{text:r,html:i}=n;const o=this.quill.getFormat(e.index),a=this.convert({text:r,html:i},o);nf.log("onPaste",a,{text:r,html:i});const u=(new(P())).retain(e.index).delete(e.length).concat(a);this.quill.updateContents(u,v.sources.USER),this.quill.setSelection(u.length()-e.length,v.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(e,n){const r=[],i=[];return this.matchers.forEach(o=>{const[a,u]=o;switch(a){case Node.TEXT_NODE:i.push(u);break;case Node.ELEMENT_NODE:r.push(u);break;default:Array.from(e.querySelectorAll(a)).forEach(d=>{if(n.has(d)){const y=n.get(d);null==y||y.push(u)}else n.set(d,[u])})}}),[r,i]}}return s.DEFAULTS={matchers:[]},s})();function On(s,t,e,n){return n.query(t)?s.reduce((r,i)=>i.attributes&&i.attributes[t]?r.push(i):r.insert(i.insert,(0,Kt.Z)((0,Kt.Z)({},e?{[t]:e}:{}),i.attributes)),new(P())):s}function Ds(s,t){let e="";for(let n=s.ops.length-1;n>=0&&e.length<t.length;--n){const r=s.ops[n];if("string"!=typeof r.insert)break;e=r.insert+e}return e.slice(-1*t.length)===t}function nn(s,t){if(!(s instanceof Element))return!1;const e=t.query(s);return!(e&&e.prototype instanceof Qt)&&["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(s.tagName.toLowerCase())}const rr=new WeakMap;function dl(s){return null!=s&&(rr.has(s)||rr.set(s,"PRE"===s.tagName||dl(s.parentNode)),rr.get(s))}function zr(s,t,e,n,r){return t.nodeType===t.TEXT_NODE?n.reduce((i,o)=>o(t,i,s),new(P())):t.nodeType===t.ELEMENT_NODE?Array.from(t.childNodes||[]).reduce((i,o)=>{let a=zr(s,o,e,n,r);return o.nodeType===t.ELEMENT_NODE&&(a=e.reduce((u,d)=>d(o,u,s),a),a=(r.get(o)||[]).reduce((u,d)=>d(o,u,s),a)),i.concat(a)},new(P())):new(P())}function Kr(s){return(t,e,n)=>On(e,s,!0,n)}function gl(s,t,e){if(!Ds(t,"\n")){if(nn(s,e))return t.insert("\n");if(t.length()>0&&s.nextSibling){let n=s.nextSibling;for(;null!=n;){if(nn(n,e))return t.insert("\n");const r=e.query(n);if(r&&r.prototype instanceof oe)return t.insert("\n");n=n.firstChild}}}return t}let yf=(()=>{class s extends xe{constructor(e,n){super(e,n),(0,N.Z)(this,"lastRecorded",0),(0,N.Z)(this,"ignoreChange",!1),(0,N.Z)(this,"stack",{undo:[],redo:[]}),(0,N.Z)(this,"currentRange",null),this.quill.on(v.events.EDITOR_CHANGE,(r,i,o,a)=>{r===v.events.SELECTION_CHANGE?i&&a!==v.sources.SILENT&&(this.currentRange=i):r===v.events.TEXT_CHANGE&&(this.ignoreChange||(this.options.userOnly&&a!==v.sources.USER?this.transform(i):this.record(i,o)),this.currentRange=$r(this.currentRange,i))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",r=>{"historyUndo"===r.inputType?(this.undo(),r.preventDefault()):"historyRedo"===r.inputType&&(this.redo(),r.preventDefault())})}change(e,n){if(0===this.stack[e].length)return;const r=this.stack[e].pop();if(!r)return;const i=this.quill.getContents(),o=r.delta.invert(i);this.stack[n].push({delta:o,range:$r(r.range,o)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(r.delta,v.sources.USER),this.ignoreChange=!1,this.restoreSelection(r)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(e,n){if(0===e.ops.length)return;this.stack.redo=[];let r=e.invert(n),i=this.currentRange;const o=Date.now();if(this.lastRecorded+this.options.delay>o&&this.stack.undo.length>0){const a=this.stack.undo.pop();a&&(r=r.compose(a.delta),i=a.range)}else this.lastRecorded=o;0!==r.length()&&(this.stack.undo.push({delta:r,range:i}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(e){pl(this.stack.undo,e),pl(this.stack.redo,e)}undo(){this.change("undo","redo")}restoreSelection(e){if(e.range)this.quill.setSelection(e.range,v.sources.USER);else{const n=function _f(s,t){const e=t.reduce((r,i)=>r+(i.delete||0),0);let n=t.length()-e;return function vf(s,t){const e=t.ops[t.ops.length-1];return null!=e&&(null!=e.insert?"string"==typeof e.insert&&e.insert.endsWith("\n"):null!=e.attributes&&Object.keys(e.attributes).some(n=>null!=s.query(n,U.BLOCK)))}(s,t)&&(n-=1),n}(this.quill.scroll,e.delta);this.quill.setSelection(n,v.sources.USER)}}}return s.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1},s})();function pl(s,t){let e=t;for(let n=s.length-1;n>=0;n-=1){const r=s[n];s[n]={delta:e.transform(r.delta,!0),range:r.range&&$r(r.range,e)},e=r.delta.transform(e),0===s[n].delta.length()&&s.splice(n,1)}}function $r(s,t){if(!s)return s;const e=t.transformPosition(s.index);return{index:e,length:t.transformPosition(s.index+s.length)-e}}const Ef=(()=>{class s extends xe{constructor(e,n){super(e,n),e.root.addEventListener("drop",r=>{r.preventDefault();let i=null;if(document.caretRangeFromPoint)i=document.caretRangeFromPoint(r.clientX,r.clientY);else if(document.caretPositionFromPoint){const u=document.caretPositionFromPoint(r.clientX,r.clientY);i=document.createRange(),i.setStart(u.offsetNode,u.offset),i.setEnd(u.offsetNode,u.offset)}const o=i&&e.selection.normalizeNative(i);if(o){var a;const u=e.selection.normalizedToRange(o);null!==(a=r.dataTransfer)&&void 0!==a&&a.files&&this.upload(u,r.dataTransfer.files)}})}upload(e,n){const r=[];Array.from(n).forEach(i=>{var o;i&&null!==(o=this.options.mimetypes)&&void 0!==o&&o.includes(i.type)&&r.push(i)}),r.length>0&&this.options.handler.call(this,e,r)}}return s.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(t,e){const n=e.map(r=>new Promise(i=>{const o=new FileReader;o.onload=a=>{i(a.target.result)},o.readAsDataURL(r)}));Promise.all(n).then(r=>{const i=r.reduce((o,a)=>o.insert({image:a}),(new(P())).retain(t.index).delete(t.length));this.quill.updateContents(i,M.sources.USER),this.quill.setSelection(t.index+r.length,M.sources.SILENT)})}},s})(),Tf=["insertText","insertReplacementText"],xf=/Mac/i.test(navigator.platform);v.register({"blots/block":Jt,"blots/block/embed":oe,"blots/break":Re,"blots/container":Cn,"blots/cursor":Xs,"blots/embed":Mr,"blots/inline":en,"blots/scroll":Ih,"blots/text":be,"modules/clipboard":lf,"modules/history":yf,"modules/keyboard":nr,"modules/uploader":Ef,"modules/input":class Af extends xe{constructor(t,e){super(t,e),t.root.addEventListener("beforeinput",n=>{this.handleBeforeInput(n)}),/Android/i.test(navigator.userAgent)||t.on(v.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(t){Zr({range:t,quill:this.quill})}replaceText(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(0===t.length)return!1;if(e){const n=this.quill.getFormat(t.index,1);this.deleteRange(t),this.quill.updateContents((new(P())).retain(t.index).insert(e,n),v.sources.USER)}else this.deleteRange(t);return this.quill.setSelection(t.index+e.length,0,v.sources.SILENT),!0}handleBeforeInput(t){if(this.quill.composition.isComposing||t.defaultPrevented||!Tf.includes(t.inputType))return;const e=t.getTargetRanges?t.getTargetRanges()[0]:null;if(!e||!0===e.collapsed)return;const n=function Nf(s){var t;return"string"==typeof s.data?s.data:null!==(t=s.dataTransfer)&&void 0!==t&&t.types.includes("text/plain")?s.dataTransfer.getData("text/plain"):null}(t);if(null==n)return;const r=this.quill.selection.normalizeNative(e),i=r?this.quill.selection.normalizedToRange(r):null;i&&this.replaceText(i,n)&&t.preventDefault()}handleCompositionStart(){const t=this.quill.getSelection();t&&this.replaceText(t)}},"modules/uiNode":class Lf extends xe{constructor(t,e){super(t,e),(0,N.Z)(this,"isListening",!1),(0,N.Z)(this,"selectionChangeDeadline",0),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(t,e){let{line:n,event:r}=e;if(!(n instanceof me&&n.uiNode))return!0;const i="rtl"===getComputedStyle(n.domNode).direction;return!!(i&&"ArrowRight"!==r.key||!i&&"ArrowLeft"!==r.key)||(this.quill.setSelection(t.index-1,t.length+(r.shiftKey?1:0),v.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",t=>{!t.defaultPrevented&&(s=>!!("ArrowLeft"===s.key||"ArrowRight"===s.key||"ArrowUp"===s.key||"ArrowDown"===s.key||"Home"===s.key||xf&&"a"===s.key&&!0===s.ctrlKey))(t)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){this.selectionChangeDeadline=Date.now()+100,this.isListening||(this.isListening=!0,document.addEventListener("selectionchange",()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()},{once:!0}))}handleSelectionChange(){const t=document.getSelection();if(!t)return;const e=t.getRangeAt(0);if(!0!==e.collapsed||0!==e.startOffset)return;const n=this.quill.scroll.find(e.startContainer);if(!(n instanceof me&&n.uiNode))return;const r=document.createRange();r.setStartAfter(n.uiNode),r.setEndAfter(n.uiNode),t.removeAllRanges(),t.addRange(r)}}});const Gr=v,If=new class qf extends pe{add(t,e){let n=0;if("+1"===e||"-1"===e){const r=this.value(t)||0;n="+1"===e?r+1:r-1}else"number"==typeof e&&(n=e);return 0===n?(this.remove(t),!0):super.add(t,n.toString())}canAdd(t,e){return super.canAdd(t,e)||super.canAdd(t,parseInt(e,10))}value(t){return parseInt(super.value(t),10)||void 0}}("indent","ql-indent",{scope:U.BLOCK,whitelist:[1,2,3,4,5,6,7,8]}),kf=(()=>{class s extends Jt{}return(0,N.Z)(s,"blotName","blockquote"),(0,N.Z)(s,"tagName","blockquote"),s})(),Rf=(()=>{class s extends Jt{static formats(e){return this.tagName.indexOf(e.tagName)+1}}return(0,N.Z)(s,"blotName","header"),(0,N.Z)(s,"tagName",["H1","H2","H3","H4","H5","H6"]),s})();let Vr=(()=>{class s extends Cn{}return s.blotName="list-container",s.tagName="OL",s})(),Wr=(()=>{class s extends Jt{static create(e){const n=super.create();return n.setAttribute("data-list",e),n}static formats(e){return e.getAttribute("data-list")||void 0}static register(){v.register(Vr)}constructor(e,n){super(e,n);const r=n.ownerDocument.createElement("span"),i=o=>{if(!e.isEnabled())return;const a=this.statics.formats(n,e);"checked"===a?(this.format("list","unchecked"),o.preventDefault()):"unchecked"===a&&(this.format("list","checked"),o.preventDefault())};r.addEventListener("mousedown",i),r.addEventListener("touchstart",i),this.attachUI(r)}format(e,n){e===this.statics.blotName&&n?this.domNode.setAttribute("data-list",n):super.format(e,n)}}return s.blotName="list",s.tagName="LI",s})();Vr.allowedChildren=[Wr],Wr.requiredContainer=Vr;const Xr=(()=>{class s extends en{static create(){return super.create()}static formats(){return!0}optimize(e){super.optimize(e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}return(0,N.Z)(s,"blotName","bold"),(0,N.Z)(s,"tagName",["STRONG","B"]),s})(),Bf=(()=>{class s extends Xr{}return(0,N.Z)(s,"blotName","italic"),(0,N.Z)(s,"tagName",["EM","I"]),s})();let ir=(()=>{class s extends en{static create(e){const n=super.create(e);return n.setAttribute("href",this.sanitize(e)),n.setAttribute("rel","noopener noreferrer"),n.setAttribute("target","_blank"),n}static formats(e){return e.getAttribute("href")}static sanitize(e){return ml(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}format(e,n){e===this.statics.blotName&&n?this.domNode.setAttribute("href",this.constructor.sanitize(n)):super.format(e,n)}}return(0,N.Z)(s,"blotName","link"),(0,N.Z)(s,"tagName","A"),(0,N.Z)(s,"SANITIZED_URL","about:blank"),(0,N.Z)(s,"PROTOCOL_WHITELIST",["http","https","mailto","tel","sms"]),s})();function ml(s,t){const e=document.createElement("a");e.href=s;const n=e.href.slice(0,e.href.indexOf(":"));return t.indexOf(n)>-1}const Mf=(()=>{class s extends en{static create(e){return"super"===e?document.createElement("sup"):"sub"===e?document.createElement("sub"):super.create(e)}static formats(e){return"SUB"===e.tagName?"sub":"SUP"===e.tagName?"super":void 0}}return(0,N.Z)(s,"blotName","script"),(0,N.Z)(s,"tagName",["SUB","SUP"]),s})(),Df=(()=>{class s extends Xr{}return(0,N.Z)(s,"blotName","strike"),(0,N.Z)(s,"tagName",["S","STRIKE"]),s})(),jf=(()=>{class s extends en{}return(0,N.Z)(s,"blotName","underline"),(0,N.Z)(s,"tagName","U"),s})(),Pf=(()=>{class s extends Mr{static create(e){if(null==window.katex)throw new Error("Formula module requires KaTeX.");const n=super.create(e);return"string"==typeof e&&(window.katex.render(e,n,{throwOnError:!1,errorColor:"#f00"}),n.setAttribute("data-value",e)),n}static value(e){return e.getAttribute("data-value")}html(){const{formula:e}=this.value();return"<span>".concat(e,"</span>")}}return(0,N.Z)(s,"blotName","formula"),(0,N.Z)(s,"className","ql-formula"),(0,N.Z)(s,"tagName","SPAN"),s})(),bl=["alt","height","width"],Uf=(()=>{class s extends Qt{static create(e){const n=super.create(e);return"string"==typeof e&&n.setAttribute("src",this.sanitize(e)),n}static formats(e){return bl.reduce((n,r)=>(e.hasAttribute(r)&&(n[r]=e.getAttribute(r)),n),{})}static match(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}static register(){/Firefox/i.test(navigator.userAgent)&&setTimeout(()=>{document.execCommand("enableObjectResizing",!1,!1)},1)}static sanitize(e){return ml(e,["http","https","data"])?e:"//:0"}static value(e){return e.getAttribute("src")}format(e,n){bl.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):super.format(e,n)}}return(0,N.Z)(s,"blotName","image"),(0,N.Z)(s,"tagName","IMG"),s})(),yl=["height","width"],Ff=(()=>{class s extends oe{static create(e){const n=super.create(e);return n.setAttribute("frameborder","0"),n.setAttribute("allowfullscreen","true"),n.setAttribute("src",this.sanitize(e)),n}static formats(e){return yl.reduce((n,r)=>(e.hasAttribute(r)&&(n[r]=e.getAttribute(r)),n),{})}static sanitize(e){return ir.sanitize(e)}static value(e){return e.getAttribute("src")}format(e,n){yl.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):super.format(e,n)}html(){const{video:e}=this.value();return'<a href="'.concat(e,'">').concat(e,"</a>")}}return(0,N.Z)(s,"blotName","video"),(0,N.Z)(s,"className","ql-video"),(0,N.Z)(s,"tagName","IFRAME"),s})(),js=new pe("code-token","hljs",{scope:U.INLINE});let Ps=(()=>{class s extends en{static formats(e,n){for(;null!=e&&e!==n.domNode;){if(e.classList&&e.classList.contains(Zt.className))return super.formats(e,n);e=e.parentNode}}constructor(e,n,r){super(e,n,r),js.add(this.domNode,r)}format(e,n){e!==s.blotName?super.format(e,n):n?js.add(this.domNode,n):(js.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),js.value(this.domNode)||this.unwrap()}}return s.blotName="code-token",s.className="ql-token",s})();class ce extends Zt{static create(t){const e=super.create(t);return"string"==typeof t&&e.setAttribute("data-language",t),e}static formats(t){return t.getAttribute("data-language")||"plain"}static register(){}format(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("data-language",e):super.format(t,e)}replaceWith(t,e){return this.formatAt(0,this.length(),Ps.blotName,!1),super.replaceWith(t,e)}}let lr=(()=>{class s extends Ln{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(e,n){e===ce.blotName&&(this.forceNext=!0,this.children.forEach(r=>{r.format(e,n)}))}formatAt(e,n,r,i){r===ce.blotName&&(this.forceNext=!0),super.formatAt(e,n,r,i)}highlight(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==this.children.head)return;const r=Array.from(this.domNode.childNodes).filter(a=>a!==this.uiNode),i="".concat(r.map(a=>a.textContent).join("\n"),"\n"),o=ce.formats(this.children.head.domNode);if(n||this.forceNext||this.cachedText!==i){if(i.trim().length>0||null==this.cachedText){const a=this.children.reduce((d,y)=>d.concat(zi(y,!1)),new(P())),u=e(i,o);a.diff(u).reduce((d,y)=>{let{retain:S,attributes:k}=y;return S?(k&&Object.keys(k).forEach(z=>{[ce.blotName,Ps.blotName].includes(z)&&this.formatAt(d,S,z,k[z])}),d+S):d},0)}this.cachedText=i,this.forceNext=!1}}html(e,n){const[r]=this.children.find(e),i=r?ce.formats(r.domNode):"plain";return'<pre data-language="'.concat(i,'">\n').concat(Ws(this.code(e,n)),"\n</pre>")}optimize(e){if(super.optimize(e),null!=this.parent&&null!=this.children.head&&null!=this.uiNode){const n=ce.formats(this.children.head.domNode);n!==this.uiNode.value&&(this.uiNode.value=n)}}}return s.allowedChildren=[ce],s})();ce.requiredContainer=lr,ce.allowedChildren=[Ps,Xs,be,Re];class vl extends xe{static register(){v.register(Ps,!0),v.register(ce,!0),v.register(lr,!0)}constructor(t,e){if(super(t,e),null==this.options.hljs)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((n,r)=>{let{key:i}=r;return n[i]=!0,n},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(v.events.SCROLL_BLOT_MOUNT,t=>{if(!(t instanceof lr))return;const e=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(n=>{let{key:r,label:i}=n;const o=e.ownerDocument.createElement("option");o.textContent=i,o.setAttribute("value",r),e.appendChild(o)}),e.addEventListener("change",()=>{t.format(ce.blotName,e.value),this.quill.root.focus(),this.highlight(t,!0)}),null==t.uiNode&&(t.attachUI(e),t.children.head&&(e.value=ce.formats(t.children.head.domNode)))})}initTimer(){let t=null;this.quill.on(v.events.SCROLL_OPTIMIZE,()=>{t&&clearTimeout(t),t=setTimeout(()=>{this.highlight(),t=null},this.options.interval)})}highlight(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.quill.selection.composing)return;this.quill.update(v.sources.USER);const n=this.quill.getSelection();(null==t?this.quill.scroll.descendants(lr):[t]).forEach(i=>{i.highlight(this.highlightBlot,e)}),this.quill.update(v.sources.SILENT),null!=n&&this.quill.setSelection(n,v.sources.SILENT)}highlightBlot(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"plain";if(e=this.languages[e]?e:"plain","plain"===e)return Ws(t).split("\n").reduce((r,i,o)=>(0!==o&&r.insert("\n",{[Zt.blotName]:e}),r.insert(i)),new(P()));const n=this.quill.root.ownerDocument.createElement("div");return n.classList.add(Zt.className),n.innerHTML=((s,t,e)=>{if("string"==typeof s.versionString){const n=s.versionString.split(".")[0];if(parseInt(n,10)>=11)return s.highlight(e,{language:t}).value}return s.highlight(t,e).value})(this.options.hljs,e,t),zr(this.quill.scroll,n,[(r,i)=>{const o=js.value(r);return o?i.compose((new(P())).retain(i.length(),{[Ps.blotName]:o})):i}],[(r,i)=>r.data.split("\n").reduce((o,a,u)=>(0!==u&&o.insert("\n",{[Zt.blotName]:e}),o.insert(a)),i)],new WeakMap)}}vl.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};let Me=(()=>{class s extends Jt{static create(e){const n=super.create();return n.setAttribute("data-row",e||Qr()),n}static formats(e){if(e.hasAttribute("data-row"))return e.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(e,n){e===s.blotName&&n?this.domNode.setAttribute("data-row",n):super.format(e,n)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}return(0,N.Z)(s,"blotName","table"),(0,N.Z)(s,"tagName","TD"),s})(),qn=(()=>{class s extends Cn{checkMerge(){if(super.checkMerge()&&null!=this.next.children.head){const e=this.children.head.formats(),n=this.children.tail.formats(),r=this.next.children.head.formats(),i=this.next.children.tail.formats();return e.table===n.table&&e.table===r.table&&e.table===i.table}return!1}optimize(e){super.optimize(e),this.children.forEach(n=>{if(null==n.next)return;const r=n.formats(),i=n.next.formats();if(r.table!==i.table){const o=this.splitAfter(n);o&&o.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}return(0,N.Z)(s,"blotName","table-row"),(0,N.Z)(s,"tagName","TR"),s})(),sn=(()=>{class s extends Cn{}return(0,N.Z)(s,"blotName","table-body"),(0,N.Z)(s,"tagName","TBODY"),s})(),Yr=(()=>{class s extends Cn{balanceCells(){const e=this.descendants(qn),n=e.reduce((r,i)=>Math.max(i.children.length,r),0);e.forEach(r=>{new Array(n-r.children.length).fill(0).forEach(()=>{let i;null!=r.children.head&&(i=Me.formats(r.children.head.domNode));const o=this.scroll.create(Me.blotName,i);r.appendChild(o),o.optimize()})})}cells(e){return this.rows().map(n=>n.children.at(e))}deleteColumn(e){const[n]=this.descendant(sn);null==n||null==n.children.head||n.children.forEach(r=>{const i=r.children.at(e);null!=i&&i.remove()})}insertColumn(e){const[n]=this.descendant(sn);null==n||null==n.children.head||n.children.forEach(r=>{const i=r.children.at(e),o=Me.formats(r.children.head.domNode),a=this.scroll.create(Me.blotName,o);r.insertBefore(a,i)})}insertRow(e){const[n]=this.descendant(sn);if(null==n||null==n.children.head)return;const r=Qr(),i=this.scroll.create(qn.blotName);n.children.head.children.forEach(()=>{const a=this.scroll.create(Me.blotName,r);i.appendChild(a)});const o=n.children.at(e);n.insertBefore(i,o)}rows(){const e=this.children.head;return null==e?[]:e.children.map(n=>n)}}return(0,N.Z)(s,"blotName","table-container"),(0,N.Z)(s,"tagName","TABLE"),s.allowedChildren=[sn],s})();function Qr(){const s=Math.random().toString(36).slice(2,6);return"row-".concat(s)}sn.requiredContainer=Yr,sn.allowedChildren=[qn],qn.requiredContainer=sn,qn.allowedChildren=[Me],Me.requiredContainer=qn;const _l=xn("quill:toolbar");let El=(()=>{class s extends xe{constructor(e,n){if(super(e,n),Array.isArray(this.options.container)){var r;const i=document.createElement("div");i.setAttribute("role","toolbar"),function Kf(s,t){Array.isArray(t[0])||(t=[t]),t.forEach(e=>{const n=document.createElement("span");n.classList.add("ql-formats"),e.forEach(r=>{if("string"==typeof r)Tl(n,r);else{const i=Object.keys(r)[0],o=r[i];Array.isArray(o)?function $f(s,t,e){const n=document.createElement("select");n.classList.add("ql-".concat(t)),e.forEach(r=>{const i=document.createElement("option");!1!==r?i.setAttribute("value",String(r)):i.setAttribute("selected","selected"),n.appendChild(i)}),s.appendChild(n)}(n,i,o):Tl(n,i,o)}}),s.appendChild(n)})}(i,this.options.container),null===(r=e.container)||void 0===r||null===(r=r.parentNode)||void 0===r||r.insertBefore(i,e.container),this.container=i}else this.container="string"==typeof this.options.container?document.querySelector(this.options.container):this.options.container;this.container instanceof HTMLElement?(this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(i=>{var o;const a=null===(o=this.options.handlers)||void 0===o?void 0:o[i];a&&this.addHandler(i,a)}),Array.from(this.container.querySelectorAll("button, select")).forEach(i=>{this.attach(i)}),this.quill.on(v.events.EDITOR_CHANGE,()=>{const[i]=this.quill.selection.getRange();this.update(i)})):_l.error("Container required for toolbar",this.options)}addHandler(e,n){this.handlers[e]=n}attach(e){let n=Array.from(e.classList).find(i=>0===i.indexOf("ql-"));n&&(n=n.slice(3),"BUTTON"===e.tagName&&e.setAttribute("type","button"),null!=this.handlers[n]||null!=this.quill.scroll.query(n)?(e.addEventListener("SELECT"===e.tagName?"change":"click",i=>{let o;if("SELECT"===e.tagName){if(e.selectedIndex<0)return;const u=e.options[e.selectedIndex];o=!u.hasAttribute("selected")&&(u.value||!1)}else o=!e.classList.contains("ql-active")&&(e.value||!e.hasAttribute("value")),i.preventDefault();this.quill.focus();const[a]=this.quill.selection.getRange();if(null!=this.handlers[n])this.handlers[n].call(this,o);else if(this.quill.scroll.query(n).prototype instanceof Qt){if(o=prompt("Enter ".concat(n)),!o)return;this.quill.updateContents((new(P())).retain(a.index).delete(a.length).insert({[n]:o}),v.sources.USER)}else this.quill.format(n,o,v.sources.USER);this.update(a)}),this.controls.push([n,e])):_l.warn("ignoring attaching to nonexistent format",n,e))}update(e){const n=null==e?{}:this.quill.getFormat(e);this.controls.forEach(r=>{const[i,o]=r;if("SELECT"===o.tagName){let a=null;if(null==e)a=null;else if(null==n[i])a=o.querySelector("option[selected]");else if(!Array.isArray(n[i])){let u=n[i];"string"==typeof u&&(u=u.replace(/"/g,'\\"')),a=o.querySelector('option[value="'.concat(u,'"]'))}null==a?(o.value="",o.selectedIndex=-1):a.selected=!0}else if(null==e)o.classList.remove("ql-active"),o.setAttribute("aria-pressed","false");else if(o.hasAttribute("value")){const a=n[i],u=a===o.getAttribute("value")||null!=a&&a.toString()===o.getAttribute("value")||null==a&&!o.getAttribute("value");o.classList.toggle("ql-active",u),o.setAttribute("aria-pressed",u.toString())}else{const a=null!=n[i];o.classList.toggle("ql-active",a),o.setAttribute("aria-pressed",a.toString())}})}}return s.DEFAULTS={},s})();function Tl(s,t,e){const n=document.createElement("button");n.setAttribute("type","button"),n.classList.add("ql-".concat(t)),n.setAttribute("aria-pressed","false"),null!=e?(n.value=e,n.setAttribute("aria-label","".concat(t,": ").concat(e))):n.setAttribute("aria-label",t),s.appendChild(n)}El.DEFAULTS={container:null,handlers:{clean(){const s=this.quill.getSelection();if(null!=s)if(0===s.length){const t=this.quill.getFormat();Object.keys(t).forEach(e=>{null!=this.quill.scroll.query(e,U.INLINE)&&this.quill.format(e,!1,v.sources.USER)})}else this.quill.removeFormat(s,v.sources.USER)},direction(s){const{align:t}=this.quill.getFormat();"rtl"===s&&null==t?this.quill.format("align","right",v.sources.USER):!s&&"right"===t&&this.quill.format("align",!1,v.sources.USER),this.quill.format("direction",s,v.sources.USER)},indent(s){const t=this.quill.getSelection(),e=this.quill.getFormat(t),n=parseInt(e.indent||0,10);if("+1"===s||"-1"===s){let r="+1"===s?1:-1;"rtl"===e.direction&&(r*=-1),this.quill.format("indent",n+r,v.sources.USER)}},link(s){!0===s&&(s=prompt("Enter link URL:")),this.quill.format("link",s,v.sources.USER)},list(s){const t=this.quill.getSelection(),e=this.quill.getFormat(t);this.quill.format("list","check"===s?"checked"!==e.list&&"unchecked"!==e.list&&"unchecked":s,v.sources.USER)}}};const Al='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',Us={align:{"":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',center:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',right:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',justify:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>'},background:'<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',blockquote:'<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',bold:'<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',clean:'<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',code:Al,"code-block":Al,color:'<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',direction:{"":'<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',rtl:'<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>'},formula:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',header:{1:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',2:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>'},italic:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',image:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',indent:{"+1":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',"-1":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>'},link:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',list:{bullet:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',check:'<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',ordered:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>'},script:{sub:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',super:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>'},strike:'<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',table:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',underline:'<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',video:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>'};let Nl=0;function wl(s,t){s.setAttribute(t,"".concat("true"!==s.getAttribute(t)))}const or=class nd{constructor(t){this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",e=>{switch(e.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),e.preventDefault()}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),wl(this.label,"aria-expanded"),wl(this.options,"aria-hidden")}buildItem(t){const e=document.createElement("span");e.tabIndex="0",e.setAttribute("role","button"),e.classList.add("ql-picker-item");const n=t.getAttribute("value");return n&&e.setAttribute("data-value",n),t.textContent&&e.setAttribute("data-label",t.textContent),e.addEventListener("click",()=>{this.selectItem(e,!0)}),e.addEventListener("keydown",r=>{switch(r.key){case"Enter":this.selectItem(e,!0),r.preventDefault();break;case"Escape":this.escape(),r.preventDefault()}}),e}buildLabel(){const t=document.createElement("span");return t.classList.add("ql-picker-label"),t.innerHTML='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>',t.tabIndex="0",t.setAttribute("role","button"),t.setAttribute("aria-expanded","false"),this.container.appendChild(t),t}buildOptions(){const t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id="ql-picker-options-".concat(Nl),Nl+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,Array.from(this.select.options).forEach(e=>{const n=this.buildItem(e);t.appendChild(n),!0===e.selected&&this.selectItem(n)}),this.container.appendChild(t)}buildPicker(){Array.from(this.select.attributes).forEach(t=>{this.container.setAttribute(t.name,t.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.container.querySelector(".ql-selected");t!==n&&(null!=n&&n.classList.remove("ql-selected"),null!=t&&(t.classList.add("ql-selected"),this.select.selectedIndex=Array.from(t.parentNode.children).indexOf(t),t.hasAttribute("data-value")?this.label.setAttribute("data-value",t.getAttribute("data-value")):this.label.removeAttribute("data-value"),t.hasAttribute("data-label")?this.label.setAttribute("data-label",t.getAttribute("data-label")):this.label.removeAttribute("data-label"),e&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let t;if(this.select.selectedIndex>-1){const n=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];t=this.select.options[this.select.selectedIndex],this.selectItem(n)}else this.selectItem(null);const e=null!=t&&t!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",e)}},xl=class sd extends or{constructor(t,e){super(t),this.label.innerHTML=e,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(n=>{n.classList.add("ql-primary")})}buildItem(t){const e=super.buildItem(t);return e.style.backgroundColor=t.getAttribute("value")||"",e}selectItem(t,e){super.selectItem(t,e);const n=this.label.querySelector(".ql-color-label"),r=t&&t.getAttribute("data-value")||"";n&&("line"===n.tagName?n.style.stroke=r:n.style.fill=r)}},Sl=class rd extends or{constructor(t,e){super(t),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(n=>{n.innerHTML=e[n.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(t,e){super.selectItem(t,e);const n=t||this.defaultItem;if(null!=n){if(this.label.innerHTML===n.innerHTML)return;this.label.innerHTML=n.innerHTML}}},Cl=class ld{constructor(t,e){this.quill=t,this.boundsContainer=e||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,(s=>{const{overflowY:t}=getComputedStyle(s,null);return"visible"!==t&&"clip"!==t})(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop="".concat(-1*this.quill.root.scrollTop,"px")}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(t){const e=t.left+t.width/2-this.root.offsetWidth/2,n=t.bottom+this.quill.root.scrollTop;this.root.style.left="".concat(e,"px"),this.root.style.top="".concat(n,"px"),this.root.classList.remove("ql-flip");const r=this.boundsContainer.getBoundingClientRect(),i=this.root.getBoundingClientRect();let o=0;return i.right>r.right&&(o=r.right-i.right,this.root.style.left="".concat(e+o,"px")),i.left<r.left&&(o=r.left-i.left,this.root.style.left="".concat(e+o,"px")),i.bottom>r.bottom&&(this.root.style.top="".concat(n-(t.bottom-t.top+(i.bottom-i.top)),"px"),this.root.classList.add("ql-flip")),o}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}},od=[!1,"center","right","justify"],ad=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],cd=[!1,"serif","monospace"],ud=["1","2","3",!1],hd=["small",!1,"large","huge"];class Fs extends Qs{constructor(t,e){super(t,e);const n=r=>{document.body.contains(t.root)?(null!=this.tooltip&&!this.tooltip.root.contains(r.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),null!=this.pickers&&this.pickers.forEach(i=>{i.container.contains(r.target)||i.close()})):document.body.removeEventListener("click",n)};t.emitter.listenDOM("click",document.body,n)}addModule(t){const e=super.addModule(t);return"toolbar"===t&&this.extendToolbar(e),e}buildButtons(t,e){Array.from(t).forEach(n=>{(n.getAttribute("class")||"").split(/\s+/).forEach(i=>{if(i.startsWith("ql-")&&(i=i.slice(3),null!=e[i]))if("direction"===i)n.innerHTML=e[i][""]+e[i].rtl;else if("string"==typeof e[i])n.innerHTML=e[i];else{const o=n.value||"";null!=o&&e[i][o]&&(n.innerHTML=e[i][o])}})})}buildPickers(t,e){this.pickers=Array.from(t).map(r=>{if(r.classList.contains("ql-align")&&(null==r.querySelector("option")&&Hs(r,od),"object"==typeof e.align))return new Sl(r,e.align);if(r.classList.contains("ql-background")||r.classList.contains("ql-color")){const i=r.classList.contains("ql-background")?"background":"color";return null==r.querySelector("option")&&Hs(r,ad,"background"===i?"#ffffff":"#000000"),new xl(r,e[i])}return null==r.querySelector("option")&&(r.classList.contains("ql-font")?Hs(r,cd):r.classList.contains("ql-header")?Hs(r,ud):r.classList.contains("ql-size")&&Hs(r,hd)),new or(r)}),this.quill.on(M.events.EDITOR_CHANGE,()=>{this.pickers.forEach(r=>{r.update()})})}}Fs.DEFAULTS=Je({},Qs.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let s=this.container.querySelector("input.ql-image[type=file]");null==s&&(s=document.createElement("input"),s.setAttribute("type","file"),s.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),s.classList.add("ql-image"),s.addEventListener("change",()=>{const t=this.quill.getSelection(!0);this.quill.uploader.upload(t,s.files),s.value=""}),this.container.appendChild(s)),s.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class Ll extends Cl{constructor(t,e){super(t,e),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",t=>{"Enter"===t.key?(this.save(),t.preventDefault()):"Escape"===t.key&&(this.cancel(),t.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null==this.textbox)return;null!=e?this.textbox.value=e:t!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const n=this.quill.getBounds(this.quill.selection.savedRange);null!=n&&this.position(n),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-".concat(t))||""),this.root.setAttribute("data-mode",t)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:t}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:e}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",t,M.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",t,M.sources.USER)),this.quill.root.scrollTop=e;break}case"video":t=function fd(s){let t=s.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||s.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return t?"".concat(t[1]||"https","://www.youtube.com/embed/").concat(t[2],"?showinfo=0"):(t=s.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?"".concat(t[1]||"https","://player.vimeo.com/video/").concat(t[2],"/"):s}(t);case"formula":{if(!t)break;const e=this.quill.getSelection(!0);if(null!=e){const n=e.index+e.length;this.quill.insertEmbed(n,this.root.getAttribute("data-mode"),t,M.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(n+1," ",M.sources.USER),this.quill.setSelection(n+2,M.sources.USER)}break}}this.textbox.value="",this.hide()}}function Hs(s,t){let e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.forEach(n=>{const r=document.createElement("option");n===e?r.setAttribute("selected","selected"):r.setAttribute("value",String(n)),s.appendChild(r)})}const dd=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class Ol extends Ll{constructor(t,e){super(t,e),this.quill.on(M.events.EDITOR_CHANGE,(n,r,i,o)=>{if(n===M.events.SELECTION_CHANGE)if(null!=r&&r.length>0&&o===M.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width="".concat(this.root.offsetWidth,"px");const a=this.quill.getLines(r.index,r.length);if(1===a.length){const u=this.quill.getBounds(r);null!=u&&this.position(u)}else{const u=a[a.length-1],d=this.quill.getIndex(u),y=Math.min(u.length()-1,r.index+r.length-d),S=this.quill.getBounds(new Sn(d,y));null!=S&&this.position(S)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(M.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const t=this.quill.getSelection();if(null!=t){const e=this.quill.getBounds(t);null!=e&&this.position(e)}},1)})}cancel(){this.show()}position(t){const e=super.position(t),n=this.root.querySelector(".ql-tooltip-arrow");return n.style.marginLeft="",0!==e&&(n.style.marginLeft="".concat(-1*e-n.offsetWidth/2,"px")),e}}(0,N.Z)(Ol,"TEMPLATE",['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""));class ql extends Fs{constructor(t,e){null!=e.modules.toolbar&&null==e.modules.toolbar.container&&(e.modules.toolbar.container=dd),super(t,e),this.quill.container.classList.add("ql-bubble")}extendToolbar(t){this.tooltip=new Ol(this.quill,this.options.bounds),null!=t.container&&(this.tooltip.root.appendChild(t.container),this.buildButtons(t.container.querySelectorAll("button"),Us),this.buildPickers(t.container.querySelectorAll("select"),Us))}}ql.DEFAULTS=Je({},Fs.DEFAULTS,{modules:{toolbar:{handlers:{link(s){s?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});const gd=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class Il extends Ll{constructor(...t){super(...t),(0,N.Z)(this,"preview",this.root.querySelector("a.ql-preview"))}listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",t=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),t.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",t=>{if(null!=this.linkRange){const e=this.linkRange;this.restoreFocus(),this.quill.formatText(e,"link",!1,M.sources.USER),delete this.linkRange}t.preventDefault(),this.hide()}),this.quill.on(M.events.SELECTION_CHANGE,(t,e,n)=>{if(null!=t){if(0===t.length&&n===M.sources.USER){const[r,i]=this.quill.scroll.descendant(ir,t.index);if(null!=r){this.linkRange=new Sn(t.index-i,r.length());const o=ir.formats(r.domNode);this.preview.textContent=o,this.preview.setAttribute("href",o),this.show();const a=this.quill.getBounds(this.linkRange);return void(null!=a&&this.position(a))}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}(0,N.Z)(Il,"TEMPLATE",['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""));class kl extends Fs{constructor(t,e){null!=e.modules.toolbar&&null==e.modules.toolbar.container&&(e.modules.toolbar.container=gd),super(t,e),this.quill.container.classList.add("ql-snow")}extendToolbar(t){null!=t.container&&(t.container.classList.add("ql-snow"),this.buildButtons(t.container.querySelectorAll("button"),Us),this.buildPickers(t.container.querySelectorAll("select"),Us),this.tooltip=new Il(this.quill,this.options.bounds),t.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(e,n)=>{t.handlers.link.call(t,!n.format.link)}))}}kl.DEFAULTS=Je({},Fs.DEFAULTS,{modules:{toolbar:{handlers:{link(s){if(s){const t=this.quill.getSelection();if(null==t||0===t.length)return;let e=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(e)&&0!==e.indexOf("mailto:")&&(e="mailto:".concat(e));const{tooltip:n}=this.quill.theme;n.edit("link",e)}else this.quill.format("link",!1)}}}}});const pd=kl;Gr.register({"attributors/attribute/direction":el,"attributors/class/align":Qi,"attributors/class/background":Bh,"attributors/class/color":Rh,"attributors/class/direction":nl,"attributors/class/font":il,"attributors/class/size":ol,"attributors/style/align":Ji,"attributors/style/background":Ur,"attributors/style/color":Pr,"attributors/style/direction":sl,"attributors/style/font":ll,"attributors/style/size":al},!0),Gr.register({"formats/align":Qi,"formats/direction":nl,"formats/indent":If,"formats/background":Ur,"formats/color":Pr,"formats/font":il,"formats/size":ol,"formats/blockquote":kf,"formats/code-block":Zt,"formats/header":Rf,"formats/list":Wr,"formats/bold":Xr,"formats/code":Mh,"formats/italic":Bf,"formats/link":ir,"formats/script":Mf,"formats/strike":Df,"formats/underline":jf,"formats/formula":Pf,"formats/image":Uf,"formats/video":Ff,"modules/syntax":vl,"modules/table":class Zf extends xe{static register(){v.register(Me),v.register(qn),v.register(sn),v.register(Yr)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(Yr).forEach(t=>{t.balanceCells()})}deleteColumn(){const[t,,e]=this.getTable();null!=e&&(t.deleteColumn(e.cellOffset()),this.quill.update(v.sources.USER))}deleteRow(){const[,t]=this.getTable();null!=t&&(t.remove(),this.quill.update(v.sources.USER))}deleteTable(){const[t]=this.getTable();if(null==t)return;const e=t.offset();t.remove(),this.quill.update(v.sources.USER),this.quill.setSelection(e,v.sources.SILENT)}getTable(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.quill.getSelection();if(null==t)return[null,null,null,-1];const[e,n]=this.quill.getLine(t.index);if(null==e||e.statics.blotName!==Me.blotName)return[null,null,null,-1];const r=e.parent;return[r.parent.parent,r,e,n]}insertColumn(t){const e=this.quill.getSelection();if(!e)return;const[n,r,i]=this.getTable(e);if(null==i)return;const o=i.cellOffset();n.insertColumn(o+t),this.quill.update(v.sources.USER);let a=r.rowOffset();0===t&&(a+=1),this.quill.setSelection(e.index+a,e.length,v.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(t){const e=this.quill.getSelection();if(!e)return;const[n,r,i]=this.getTable(e);if(null==i)return;const o=r.rowOffset();n.insertRow(o+t),this.quill.update(v.sources.USER),t>0?this.quill.setSelection(e,v.sources.SILENT):this.quill.setSelection(e.index+r.children.length,e.length,v.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(t,e){const n=this.quill.getSelection();if(null==n)return;const r=new Array(t).fill(0).reduce(i=>{const o=new Array(e).fill("\n").join("");return i.insert(o,{table:Qr()})},(new(P())).retain(n.index));this.quill.updateContents(r,v.sources.USER),this.quill.setSelection(n.index,v.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(v.events.SCROLL_OPTIMIZE,t=>{t.some(e=>!!["TD","TR","TBODY","TABLE"].includes(e.target.tagName)&&(this.quill.once(v.events.TEXT_CHANGE,(n,r,i)=>{i===v.sources.USER&&this.balanceTables()}),!0))})}},"modules/toolbar":El,"themes/bubble":ql,"themes/snow":pd,"ui/icons":Us,"ui/picker":or,"ui/icon-picker":Sl,"ui/color-picker":xl,"ui/tooltip":Cl},!0);const md=Gr}}]);