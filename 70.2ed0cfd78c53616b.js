"use strict";(self.webpackChunkpages=self.webpackChunkpages||[]).push([[70],{7429:(Ae,pe,F)=>{F.d(pe,{d:()=>me});var v=F(5879),e=F(6223),g=F(5661),u=F(336);let D=(()=>{class J{constructor(){this.allowedProps={$ref:{validator:this.isString},anyOf:{validator:this.validateAnyOf},default:{validator:this.isNestedOfPrimitives},definitions:null,description:null,enum:{validator:this.validateEnum},items:{child:"allProps"},maximum:null,maxItems:null,maxLength:null,minimum:null,minItems:null,minLength:null,multipleOf:null,oneOf:{validator:this.validateOneOf},properties:null,required:{validator:this.validateRequired},title:null,type:{validator:this.isNestedOfPrimitives},uniqueItems:null,widget:{child:{formlyConfig:{child:{props:{child:{placeholder:{validator:this.isString},multiple:{validator:this.isBoolean},pattern:{validator:this.isString},type:{validator:function(y){return"hidden"===y}},minLength:{validator:this.isNumber},maxLength:{validator:this.isNumber},rows:{validator:this.isNumber},keepGroupsWithoutId:{validator:this.isBoolean},fieldsetTemplate:{validator:this.isBoolean}}},type:{validator:function(y){return"radio"===y}}}}}}},this.fieldListKeys=["properties","definitions"]}validateSchema(y){this.isObject(y)&&((!y.hasOwnProperty("type")||!y.hasOwnProperty("properties")||"object"!==y.type)&&(y.type="object",y.properties={}),this.validate(y))}validate(y,w){w||(w=this.allowedProps);for(const[O,K]of Object.entries(y)){var j,$;if(w.hasOwnProperty(O)){if(null!==(j=w[O])&&void 0!==j&&j.hasOwnProperty("validator"))w[O].validator.call(this,K)||delete y[O];else if(this.fieldListKeys.includes(O))for(const m of Object.keys(y[O]))this.validate(y[O][m]);else if(!this.isPrimitive(K)){if(null===($=w[O])||void 0===$||!$.hasOwnProperty("child")||!this.isObject(K)){delete y[O];continue}this.validate(y[O],"allProps"===w[O].child?this.allowedProps:w[O].child)}}else delete y[O]}}isObject(y){return null!=y&&"object"==typeof y&&!Array.isArray(y)}isPrimitive(y){return this.isString(y)||this.isNumber(y)||this.isBoolean(y)||null==y}isString(y){return"string"==typeof y}isBoolean(y){return"boolean"==typeof y}isNumber(y){return"number"==typeof y}validateRequired(y){if(!Array.isArray(y))return!1;for(const w of y)if(!this.isString(w))return!1;return!0}validateEnum(y){if(!Array.isArray(y))return!1;for(const w of y)if(!this.isString(w)&&!this.isNumber(w))return!1;return!0}validateOneOf(y){var w;if(Array.isArray(y)&&null!==(w=y[0])&&void 0!==w&&w.hasOwnProperty("const")){for(const j of y){if(!this.isObject(j))return!1;this.validate(j,{const:null,title:null})}return!0}return this.validateAnyOf(y)}validateAnyOf(y){if(!Array.isArray(y))return!1;for(const w of y){if(!this.isObject(w))return!1;this.validate(w)}return!0}isNestedOfPrimitives(y){if(this.isPrimitive(y))return!0;if(Array.isArray(y)||this.isObject(y)){for(const w of Object.values(y))if(!this.isNestedOfPrimitives(w))return!1;return!0}return!1}}return J.\u0275fac=function(y){return new(y||J)},J.\u0275prov=v.Yz7({token:J,factory:J.\u0275fac,providedIn:"root"}),J})();var S=F(5545);const H=["app-custom-form",""],q=[[["","buttons",""]]],ue=["[buttons]"];let me=(()=>{class J{constructor(y,w,j){this.formlyJsonschema=y,this.customFormSchemaService=w,this.toastService=j,this.model={},this.validateSchema=!1,this.enableModelChangeEvent=!1,this.defaultModel={},this.cancelEvent=new v.vpe,this.submitEvent=new v.vpe,this.validityChangeEvent=new v.vpe,this.modelChangeEvent=new v.vpe,this.form=new e.nJ({}),this.fields=[],this.options={},this.isFormCurrentlyValid=!0}ngOnInit(){this.createFields()}ngOnChanges(y){y.schema&&!y.schema.firstChange&&this.createFields()}createFields(){this.customFormSchemaService.isObject(this.schema)||(this.schema={}),this.validateSchema&&this.customFormSchemaService.validateSchema(this.schema),this.fields=[this.formlyJsonschema.toFieldConfig(this.schema)]}showFieldValidation(){this.cycleFields(this.fields)}showFieldValidationWithMessage(){this.showFieldValidation(),this.toastService.show({content:"Tutti i campi sono stati <strong>validati</strong>: quelli con errore sono evidenziati da un <strong>bordo rosso</strong>!"})}cycleFields(y){y.forEach(w=>{this.forceValidation(w),w.fieldGroup&&this.cycleFields(w.fieldGroup)})}forceValidation(y){y.validation||(y.validation={}),y.validation.show=!0}reset(){this.options.resetModel&&this.options.resetModel(this.defaultModel)}cancel(){this.cancelEvent.emit()}submit(){this.form.valid&&(this.log(),this.submitEvent.emit(this.model))}onModelChange(y){this.enableModelChangeEvent&&this.modelChangeEvent.emit(y||{}),this.form.valid!==this.isFormCurrentlyValid&&this.validityChangeEvent.emit(this.isFormCurrentlyValid=this.form.valid)}log(){}}return J.\u0275fac=function(y){return new(y||J)(v.Y36(u.c),v.Y36(D),v.Y36(g.k))},J.\u0275cmp=v.Xpm({type:J,selectors:[["","app-custom-form",""]],inputs:{schema:"schema",model:"model",validateSchema:"validateSchema",enableModelChangeEvent:"enableModelChangeEvent",defaultModel:"defaultModel"},outputs:{cancelEvent:"cancelEvent",submitEvent:"submitEvent",validityChangeEvent:"validityChangeEvent",modelChangeEvent:"modelChangeEvent"},features:[v.TTD],attrs:H,ngContentSelectors:ue,decls:3,vars:5,consts:[[3,"formGroup","ngSubmit"],[3,"model","fields","form","options","modelChange"]],template:function(y,w){1&y&&(v.F$t(q),v.TgZ(0,"form",0),v.NdJ("ngSubmit",function(){return w.submit()}),v.TgZ(1,"formly-form",1),v.NdJ("modelChange",function($){return w.onModelChange($)}),v.qZA(),v.Hsn(2),v.qZA()),2&y&&(v.Q6J("formGroup",w.form),v.xp6(1),v.Q6J("model",w.model)("fields",w.fields)("form",w.form)("options",w.options))},dependencies:[S.T7,e._Y,e.JL,e.sg]}),J})()},337:(Ae,pe,F)=>{F.d(pe,{I:()=>Fn});var v=F(6814),e=F(5879),g=F(5545),u=F(6223);function D(o,l){1&o&&(e.TgZ(0,"span",9),e._uU(1,"*"),e.qZA())}function S(o,l){if(1&o&&(e.TgZ(0,"label",7),e._uU(1),e.YNc(2,D,2,0,"span",8),e.qZA()),2&o){const t=e.oxw(2);e.uIk("for",t.id),e.xp6(1),e.hij(" ",t.props.label," "),e.xp6(1),e.Q6J("ngIf",t.props.required&&!0!==t.props.hideRequiredMarker)}}function H(o,l){if(1&o&&e.YNc(0,S,3,3,"label",6),2&o){const t=e.oxw();e.Q6J("ngIf",t.props.label&&!0!==t.props.hideLabel)}}function q(o,l){if(1&o&&(e.ynx(0),e.GkF(1,10),e.BQk()),2&o){e.oxw();const t=e.MAs(1);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function ue(o,l){}function me(o,l){if(1&o&&(e.ynx(0),e.GkF(1,10),e.BQk()),2&o){e.oxw();const t=e.MAs(1);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function J(o,l){if(1&o&&(e.TgZ(0,"div",11),e._UZ(1,"formly-validation-message",12),e.qZA()),2&o){const t=e.oxw();e.Udp("display","block"),e.xp6(1),e.Q6J("field",t.field)}}function z(o,l){if(1&o&&(e.TgZ(0,"small",13),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.props.description)}}const y=["fieldTypeTemplate"];let w=(()=>{class o extends g.n2{}return o.\u0275fac=function(){let l;return function(a){return(l||(l=e.n5z(o)))(a||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-wrapper-form-field"]],features:[e.qOj],decls:9,vars:8,consts:[["labelTemplate",""],[1,"mb-3"],[4,"ngIf"],["fieldComponent",""],["class","invalid-feedback",3,"display",4,"ngIf"],["class","form-text text-muted",4,"ngIf"],["class","form-label",4,"ngIf"],[1,"form-label"],["aria-hidden","true",4,"ngIf"],["aria-hidden","true"],[3,"ngTemplateOutlet"],[1,"invalid-feedback"],[3,"field"],[1,"form-text","text-muted"]],template:function(t,a){1&t&&(e.YNc(0,H,1,1,"ng-template",null,0,e.W1O),e.TgZ(2,"div",1),e.YNc(3,q,2,1,"ng-container",2),e.YNc(4,ue,0,0,"ng-template",null,3,e.W1O),e.YNc(6,me,2,1,"ng-container",2),e.YNc(7,J,2,3,"div",4),e.YNc(8,z,2,1,"small",5),e.qZA()),2&t&&(e.xp6(2),e.ekj("form-floating","floating"===a.props.labelPosition)("has-error",a.showError),e.xp6(1),e.Q6J("ngIf","floating"!==a.props.labelPosition),e.xp6(3),e.Q6J("ngIf","floating"===a.props.labelPosition),e.xp6(1),e.Q6J("ngIf",a.showError),e.xp6(1),e.Q6J("ngIf",a.props.description))},dependencies:[g.M2,v.O5,v.tP],encapsulation:2}),o})(),j=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[v.ez,u.UX,g.X0.forChild({wrappers:[{name:"form-field",component:w}]})]]}),o})(),$=(()=>{class o extends g.fS{constructor(t){super(),this.hostContainerRef=t}set content(t){t&&this.hostContainerRef&&this.hostContainerRef.createEmbeddedView(t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.s_b,8))},o.\u0275dir=e.lG2({type:o,viewQuery:function(t,a){if(1&t&&e.Gf(y,7),2&t){let f;e.iGM(f=e.CRH())&&(a.content=f.first)}},features:[e.qOj]}),o})();function O(o,l){if(1&o&&e._UZ(0,"input",3),2&o){const t=e.oxw(2);e.ekj("is-invalid",t.showError),e.Q6J("type",t.type)("formControl",t.formControl)("formlyAttributes",t.field)}}function K(o,l){if(1&o&&e._UZ(0,"input",4),2&o){const t=e.oxw(2);e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("formlyAttributes",t.field)}}function m(o,l){if(1&o&&(e.YNc(0,O,1,5,"input",1),e.YNc(1,K,1,4,"ng-template",null,2,e.W1O)),2&o){const t=e.MAs(2),a=e.oxw();e.Q6J("ngIf","number"!==a.type)("ngIfElse",t)}}let T=(()=>{class o extends ${get type(){return this.props.type||"text"}}return o.\u0275fac=function(){let l;return function(a){return(l||(l=e.n5z(o)))(a||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-input"]],features:[e.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],["class","form-control",3,"type","formControl","formlyAttributes","is-invalid",4,"ngIf","ngIfElse"],["numberTmp",""],[1,"form-control",3,"type","formControl","formlyAttributes"],["type","number",1,"form-control",3,"formControl","formlyAttributes"]],template:function(t,a){1&t&&e.YNc(0,m,3,2,"ng-template",null,0,e.W1O)},dependencies:[v.O5,u.Fj,u.JJ,u.oH,g.JD,u.wV],encapsulation:2,changeDetection:0}),o})(),k=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[v.ez,u.UX,j,g.X0.forChild({types:[{name:"input",component:T,wrappers:["form-field"]},{name:"string",extends:"input"},{name:"number",extends:"input",defaultOptions:{props:{type:"number"}}},{name:"integer",extends:"input",defaultOptions:{props:{type:"number"}}}]})]]}),o})();function I(o,l){if(1&o&&(e.TgZ(0,"textarea",1),e._uU(1,"      "),e.qZA()),2&o){const t=e.oxw();e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("cols",t.props.cols)("rows",t.props.rows)("formlyAttributes",t.field)}}let x=(()=>{class o extends ${constructor(){super(...arguments),this.defaultOptions={props:{cols:1,rows:1}}}}return o.\u0275fac=function(){let l;return function(a){return(l||(l=e.n5z(o)))(a||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-textarea"]],features:[e.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],[1,"form-control",3,"formControl","cols","rows","formlyAttributes"]],template:function(t,a){1&t&&e.YNc(0,I,2,6,"ng-template",null,0,e.W1O)},dependencies:[u.Fj,u.JJ,u.oH,g.JD],encapsulation:2,changeDetection:0}),o})(),A=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[v.ez,u.UX,j,g.X0.forChild({types:[{name:"textarea",component:x,wrappers:["form-field"]}]})]]}),o})();var _=F(5592),C=F(5619),P=F(7398),M=F(2181),B=F(9397);let Z=(()=>{class o{transform(t,a){return t instanceof _.y?this.dispose():t=this.observableOf(t,a),t.pipe((0,P.U)(f=>this.transformOptions(f,a)))}ngOnDestroy(){this.dispose()}transformOptions(t,a){const f=this.transformSelectProps(a),b=[],U={};return null==t||t.forEach(ie=>{const oe=this.transformOption(ie,f);if(oe.group){const re=U[oe.label];void 0===re?U[oe.label]=b.push(oe)-1:oe.group.forEach(ze=>b[re].group.push(ze))}else b.push(oe)}),b}transformOption(t,a){const f=a.groupProp(t);return Array.isArray(f)?{label:a.labelProp(t),group:f.map(b=>this.transformOption(b,a))}:(t={label:a.labelProp(t),value:a.valueProp(t),disabled:!!a.disabledProp(t)},f?{label:f,group:[t]}:t)}transformSelectProps(t){const a=(null==t?void 0:t.props)||(null==t?void 0:t.templateOptions)||{},f=b=>"function"==typeof b?b:U=>U[b];return{groupProp:f(a.groupProp||"group"),labelProp:f(a.labelProp||"label"),valueProp:f(a.valueProp||"value"),disabledProp:f(a.disabledProp||"disabled")}}dispose(){this._options&&(this._options.complete(),this._options=null),this._subscription&&(this._subscription.unsubscribe(),this._subscription=null)}observableOf(t,a){return this.dispose(),a&&a.options&&a.options.fieldChanges&&(this._subscription=a.options.fieldChanges.pipe((0,M.h)(({property:f,type:b,field:U})=>"expressionChanges"===b&&(0===f.indexOf("templateOptions.options")||0===f.indexOf("props.options"))&&U===a&&Array.isArray(U.props.options)&&!!this._options),(0,B.b)(()=>this._options.next(a.props.options))).subscribe()),this._options=new C.X(t),this._options.asObservable()}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275pipe=e.Yjl({name:"formlySelectOptions",type:o,pure:!0}),o})(),R=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({}),o})();function V(o,l){if(1&o&&(e.TgZ(0,"div",2),e._UZ(1,"input",3),e.TgZ(2,"label",4),e._uU(3),e.qZA()()),2&o){const t=l.$implicit,a=l.index,f=e.oxw(2);e.ekj("form-check-inline","inline"===f.props.formCheck),e.xp6(1),e.ekj("is-invalid",f.showError),e.Q6J("id",f.id+"_"+a)("name",f.field.name||f.id)("value",t.value)("formControl",t.disabled?f.disabledControl:f.formControl)("formlyAttributes",f.field),e.uIk("value",t.value),e.xp6(1),e.Q6J("for",f.id+"_"+a),e.xp6(1),e.hij(" ",t.label," ")}}function L(o,l){if(1&o&&(e.YNc(0,V,4,12,"div",1),e.ALo(1,"async"),e.ALo(2,"formlySelectOptions")),2&o){const t=e.oxw();e.Q6J("ngForOf",e.lcZ(1,1,e.xi3(2,3,t.props.options,t.field)))}}let de=(()=>{class o extends ${constructor(){super(...arguments),this.defaultOptions={props:{formCheck:"default"}}}get disabledControl(){return new u.NI({value:this.formControl.value,disabled:!0})}}return o.\u0275fac=function(){let l;return function(a){return(l||(l=e.n5z(o)))(a||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-radio"]],features:[e.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],["class","form-check",3,"form-check-inline",4,"ngFor","ngForOf"],[1,"form-check"],["type","radio",1,"form-check-input",3,"id","name","value","formControl","formlyAttributes"],[1,"form-check-label",3,"for"]],template:function(t,a){1&t&&e.YNc(0,L,3,6,"ng-template",null,0,e.W1O)},dependencies:[v.sg,u._,u.Fj,u.JJ,u.oH,g.JD,v.Ov,Z],encapsulation:2,changeDetection:0}),o})(),te=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[v.ez,u.UX,j,R,g.X0.forChild({types:[{name:"radio",component:de,wrappers:["form-field"]}]})]]}),o})();function se(o,l){1&o&&(e.TgZ(0,"span",6),e._uU(1,"*"),e.qZA())}function ne(o,l){if(1&o&&(e.TgZ(0,"label",4),e._uU(1),e.YNc(2,se,2,0,"span",5),e.qZA()),2&o){const t=e.oxw(2);e.Q6J("for",t.id),e.xp6(1),e.hij(" ",t.props.label," "),e.xp6(1),e.Q6J("ngIf",t.props.required&&!0!==t.props.hideRequiredMarker)}}const ye=function(o,l){return{"form-check-inline":o,"form-switch":l}};function Je(o,l){if(1&o&&(e.TgZ(0,"div",1),e._UZ(1,"input",2),e.YNc(2,ne,3,3,"label",3),e.qZA()),2&o){const t=e.oxw();e.Q6J("ngClass",e.WLB(9,ye,"inline"===t.props.formCheck||"inline-switch"===t.props.formCheck,"switch"===t.props.formCheck||"inline-switch"===t.props.formCheck)),e.xp6(1),e.ekj("is-invalid",t.showError)("position-static","nolabel"===t.props.formCheck),e.Q6J("indeterminate",t.props.indeterminate&&null==t.formControl.value)("formControl",t.formControl)("formlyAttributes",t.field),e.xp6(1),e.Q6J("ngIf","nolabel"!==t.props.formCheck)}}let be=(()=>{class o extends ${constructor(){super(...arguments),this.defaultOptions={props:{indeterminate:!0,hideLabel:!0,formCheck:"default"}}}}return o.\u0275fac=function(){let l;return function(a){return(l||(l=e.n5z(o)))(a||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-checkbox"]],features:[e.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],[1,"form-check",3,"ngClass"],["type","checkbox",1,"form-check-input",3,"indeterminate","formControl","formlyAttributes"],["class","form-check-label",3,"for",4,"ngIf"],[1,"form-check-label",3,"for"],["aria-hidden","true",4,"ngIf"],["aria-hidden","true"]],template:function(t,a){1&t&&e.YNc(0,Je,3,12,"ng-template",null,0,e.W1O)},dependencies:[v.mk,u.Wl,u.JJ,u.oH,g.JD,v.O5],encapsulation:2,changeDetection:0}),o})(),Se=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[v.ez,u.UX,j,g.X0.forChild({types:[{name:"checkbox",component:be,wrappers:["form-field"]},{name:"boolean",extends:"checkbox"}]})]]}),o})();var G=F(1413);const Qe=function(o,l){return{"form-check-inline":o,"form-switch":l}};function ee(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",2)(1,"input",3),e.NdJ("change",function(f){const U=e.CHM(t).$implicit,ie=e.oxw(2);return e.KtG(ie.onChange(U.value,f.target.checked))}),e.qZA(),e.TgZ(2,"label",4),e._uU(3),e.qZA()()}if(2&o){const t=l.$implicit,a=l.index,f=e.oxw(2);e.Q6J("ngClass",e.WLB(8,Qe,"inline"===f.props.formCheck||"inline-switch"===f.props.formCheck,"switch"===f.props.formCheck||"inline-switch"===f.props.formCheck)),e.xp6(1),e.Q6J("id",f.id+"_"+a)("value",t.value)("checked",f.isChecked(t))("formlyAttributes",f.field)("disabled",f.formControl.disabled||t.disabled),e.xp6(1),e.Q6J("for",f.id+"_"+a),e.xp6(1),e.hij(" ",t.label," ")}}function N(o,l){if(1&o&&(e.YNc(0,ee,4,11,"div",1),e.ALo(1,"async"),e.ALo(2,"formlySelectOptions")),2&o){const t=e.oxw();e.Q6J("ngForOf",e.lcZ(1,1,e.xi3(2,3,t.props.options,t.field)))}}let Ce=(()=>{class o extends ${constructor(){super(...arguments),this.defaultOptions={props:{formCheck:"default"}}}onChange(t,a){this.formControl.markAsDirty(),this.formControl.patchValue("array"===this.props.type?a?[...this.formControl.value||[],t]:[...this.formControl.value||[]].filter(f=>f!==t):(0,G.Z)((0,G.Z)({},this.formControl.value),{},{[t]:a})),this.formControl.markAsTouched()}isChecked(t){const a=this.formControl.value;return a&&("array"===this.props.type?-1!==a.indexOf(t.value):a[t.value])}}return o.\u0275fac=function(){let l;return function(a){return(l||(l=e.n5z(o)))(a||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-multicheckbox"]],features:[e.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],["class","form-check",3,"ngClass",4,"ngFor","ngForOf"],[1,"form-check",3,"ngClass"],["type","checkbox",1,"form-check-input",3,"id","value","checked","formlyAttributes","disabled","change"],[1,"form-check-label",3,"for"]],template:function(t,a){1&t&&e.YNc(0,N,3,6,"ng-template",null,0,e.W1O)},dependencies:[v.sg,v.mk,g.JD,v.Ov,Z],encapsulation:2,changeDetection:0}),o})(),W=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[v.ez,u.UX,j,R,g.X0.forChild({types:[{name:"multicheckbox",component:Ce,wrappers:["form-field"]}]})]]}),o})();var Oe=F(8180);function ke(o,l){if(1&o&&(e.TgZ(0,"option",8),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("ngValue",t.value)("disabled",t.disabled),e.xp6(1),e.hij(" ",t.label," ")}}function fe(o,l){if(1&o&&(e.TgZ(0,"option",8),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("ngValue",t.value)("disabled",t.disabled),e.xp6(1),e.hij(" ",t.label," ")}}function ae(o,l){if(1&o&&(e.TgZ(0,"optgroup",9),e.YNc(1,fe,2,3,"option",10),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("label",t.label),e.xp6(1),e.Q6J("ngForOf",t.group)}}function ve(o,l){if(1&o&&(e.ynx(0),e.YNc(1,ke,2,3,"option",6),e.YNc(2,ae,2,2,"ng-template",null,7,e.W1O),e.BQk()),2&o){const t=l.$implicit,a=e.MAs(3);e.xp6(1),e.Q6J("ngIf",!t.group)("ngIfElse",a)}}function Te(o,l){if(1&o&&(e.ynx(0),e.YNc(1,ve,4,2,"ng-container",5),e.BQk()),2&o){const t=l.ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}function De(o,l){if(1&o&&(e.TgZ(0,"select",3),e.YNc(1,Te,2,1,"ng-container",4),e.ALo(2,"async"),e.ALo(3,"formlySelectOptions"),e.qZA()),2&o){const t=e.oxw(2);e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("compareWith",t.props.compareWith)("formlyAttributes",t.field),e.xp6(1),e.Q6J("ngIf",e.lcZ(2,6,e.xi3(3,8,t.props.options,t.field)))}}function Me(o,l){if(1&o&&(e.TgZ(0,"option",13),e._uU(1),e.qZA()),2&o){const t=e.oxw(3);e.Q6J("ngValue",void 0),e.xp6(1),e.Oqu(t.props.placeholder)}}function he(o,l){if(1&o&&(e.TgZ(0,"option",8),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("ngValue",t.value)("disabled",t.disabled),e.xp6(1),e.hij(" ",t.label," ")}}function Ie(o,l){if(1&o&&(e.TgZ(0,"option",8),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("ngValue",t.value)("disabled",t.disabled),e.xp6(1),e.hij(" ",t.label," ")}}function Le(o,l){if(1&o&&(e.TgZ(0,"optgroup",9),e.YNc(1,Ie,2,3,"option",10),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("label",t.label),e.xp6(1),e.Q6J("ngForOf",t.group)}}function Ee(o,l){if(1&o&&(e.ynx(0),e.YNc(1,he,2,3,"option",6),e.YNc(2,Le,2,2,"ng-template",null,7,e.W1O),e.BQk()),2&o){const t=l.$implicit,a=e.MAs(3);e.xp6(1),e.Q6J("ngIf",!t.group)("ngIfElse",a)}}function we(o,l){if(1&o&&(e.ynx(0),e.YNc(1,Ee,4,2,"ng-container",5),e.BQk()),2&o){const t=l.ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}function je(o,l){if(1&o&&(e.TgZ(0,"select",11),e.YNc(1,Me,2,2,"option",12),e.YNc(2,we,2,1,"ng-container",4),e.ALo(3,"async"),e.ALo(4,"formlySelectOptions"),e.qZA()),2&o){const t=e.oxw(2);e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("compareWith",t.props.compareWith)("formlyAttributes",t.field),e.xp6(1),e.Q6J("ngIf",t.props.placeholder),e.xp6(1),e.Q6J("ngIf",e.lcZ(3,7,e.xi3(4,9,t.props.options,t.field)))}}function Re(o,l){if(1&o&&(e.YNc(0,De,4,11,"select",1),e.YNc(1,je,5,12,"ng-template",null,2,e.W1O)),2&o){const t=e.MAs(2),a=e.oxw();e.Q6J("ngIf",a.props.multiple)("ngIfElse",t)}}let ge=(()=>{class o extends ${constructor(t,a){super(a),this.ngZone=t,this.defaultOptions={props:{compareWith:(f,b)=>f===b}}}set selectAccessor(t){if(!t)return;const a=t.writeValue.bind(t);null===t._getOptionId(t.value)&&a(t.value),t.writeValue=f=>{const b=t._idCounter;a(f),null===f&&this.ngZone.onStable.asObservable().pipe((0,Oe.q)(1)).subscribe(()=>{b!==t._idCounter&&null===t._getOptionId(f)&&-1!==t._elementRef.nativeElement.selectedIndex&&a(f)})}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.R0b),e.Y36(e.s_b))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-select"]],viewQuery:function(t,a){if(1&t&&e.Gf(u.EJ,5),2&t){let f;e.iGM(f=e.CRH())&&(a.selectAccessor=f.first)}},features:[e.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],["class","form-select","multiple","",3,"formControl","compareWith","is-invalid","formlyAttributes",4,"ngIf","ngIfElse"],["singleSelect",""],["multiple","",1,"form-select",3,"formControl","compareWith","formlyAttributes"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngValue","disabled",4,"ngIf","ngIfElse"],["optgroup",""],[3,"ngValue","disabled"],[3,"label"],[3,"ngValue","disabled",4,"ngFor","ngForOf"],[1,"form-select",3,"formControl","compareWith","formlyAttributes"],[3,"ngValue",4,"ngIf"],[3,"ngValue"]],template:function(t,a){1&t&&e.YNc(0,Re,3,2,"ng-template",null,0,e.W1O)},dependencies:[v.O5,u.K7,u.JJ,u.oH,g.JD,v.sg,u.YN,u.Kr,u.EJ,v.Ov,Z],encapsulation:2,changeDetection:0}),o})(),Ue=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[v.ez,u.UX,j,R,g.X0.forChild({types:[{name:"select",component:ge,wrappers:["form-field"]},{name:"enum",extends:"select"}]})]]}),o})();const Ve=["fieldTypeTemplate"];function Be(o,l){if(1&o&&e._UZ(0,"i",7),2&o){const t=e.oxw(3);e.Q6J("ngClass",t.props.addonLeft.class)}}function Ne(o,l){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Oqu(t.props.addonLeft.text)}}function Ye(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",4),e.NdJ("click",function(f){e.CHM(t);const b=e.oxw(2);return e.KtG(b.addonLeftClick(f))}),e.YNc(1,Be,1,1,"i",5),e.YNc(2,Ne,2,1,"span",6),e.qZA()}if(2&o){const t=e.oxw(2);e.ekj("input-group-btn",t.props.addonLeft.onClick),e.xp6(1),e.Q6J("ngIf",t.props.addonLeft.class),e.xp6(1),e.Q6J("ngIf",t.props.addonLeft.text)}}function Ge(o,l){if(1&o&&e._UZ(0,"i",7),2&o){const t=e.oxw(3);e.Q6J("ngClass",t.props.addonRight.class)}}function We(o,l){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Oqu(t.props.addonRight.text)}}function He(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",4),e.NdJ("click",function(f){e.CHM(t);const b=e.oxw(2);return e.KtG(b.addonRightClick(f))}),e.YNc(1,Ge,1,1,"i",5),e.YNc(2,We,2,1,"span",6),e.qZA()}if(2&o){const t=e.oxw(2);e.ekj("input-group-btn",t.props.addonRight.onClick),e.xp6(1),e.Q6J("ngIf",t.props.addonRight.class),e.xp6(1),e.Q6J("ngIf",t.props.addonRight.text)}}function qe(o,l){if(1&o&&(e.TgZ(0,"div",1),e.YNc(1,Ye,3,4,"div",2),e.GkF(2,null,3),e.YNc(4,He,3,4,"div",2),e.qZA()),2&o){const t=e.oxw();e.ekj("has-validation",t.showError),e.xp6(1),e.Q6J("ngIf",t.props.addonLeft),e.xp6(3),e.Q6J("ngIf",t.props.addonRight)}}let $e=(()=>{class o extends g.n2{constructor(t){super(),this.hostContainerRef=t}set content(t){t&&this.hostContainerRef&&this.hostContainerRef.createEmbeddedView(t)}addonRightClick(t){var a,f;null===(a=(f=this.props.addonRight).onClick)||void 0===a||a.call(f,this.field,t)}addonLeftClick(t){var a,f;null===(a=(f=this.props.addonLeft).onClick)||void 0===a||a.call(f,this.field,t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.s_b))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-wrapper-addons"]],viewQuery:function(t,a){if(1&t&&e.Gf(Ve,7),2&t){let f;e.iGM(f=e.CRH())&&(a.content=f.first)}},features:[e.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],[1,"input-group"],["class","input-group-text",3,"input-group-btn","click",4,"ngIf"],["fieldComponent",""],[1,"input-group-text",3,"click"],[3,"ngClass",4,"ngIf"],[4,"ngIf"],[3,"ngClass"]],template:function(t,a){1&t&&e.YNc(0,qe,5,4,"ng-template",null,0,e.W1O)},dependencies:[v.O5,v.mk],styles:["formly-wrapper-form-field .input-group-btn{cursor:pointer}\n"],encapsulation:2}),o})();function Ke(o){!o.props||o.wrappers&&-1!==o.wrappers.indexOf("addons")||(o.props.addonLeft||o.props.addonRight)&&(o.wrappers=[...o.wrappers||[],"addons"])}let Ze=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[v.ez,u.UX,g.X0.forChild({wrappers:[{name:"addons",component:$e}],extensions:[{name:"addons",extension:{postPopulate:Ke}}]})]]}),o})(),Xe=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[j,k,A,te,Se,W,Ue,Ze]]}),o})();var c=F(6593);let r=(()=>{class o{constructor(t){this.domSanitizer=t,this.validBBCodes=[{regstring:"\\[b](.+?)\\[/b]",replacement:"<strong>$1</strong>"},{regstring:"\\[i](.+?)\\[/i]",replacement:"<em>$1</em>"},{regstring:"\\[u](.+?)\\[/u]",replacement:"<u>$1</u>"},{regstring:"\\[ul](.+?)\\[/ul]",replacement:"<ul>$1</ul>"},{regstring:"\\[ol](.+?)\\[/ol]",replacement:"<ol>$1</ol>"},{regstring:"\\[li](.+?)\\[/li]",replacement:"<li>$1</li>"},{regstring:"\\[br]",replacement:"<br>"}];for(const a of this.validBBCodes)a.regexp=new RegExp(a.regstring,"gim")}parseBBCode(t){t=t.replace(/</gi,"&lt;").replace(/>/gi,"&gt;"),t=this.domSanitizer.sanitize(e.q3G.HTML,t)||"";for(const a of this.validBBCodes)t=t.replace(a.regexp,a.replacement);return t}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(c.H7))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function n(o,l){1&o&&e.GkF(0)}const i=function(o,l){return{$implicit:o,props:l}};function s(o,l){if(1&o&&(e.ynx(0),e.YNc(1,n,1,0,"ng-container",8),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngTemplateOutlet",t.customLabelTemplate)("ngTemplateOutletContext",e.WLB(2,i,t.id,t.props))}}function p(o,l){1&o&&(e.TgZ(0,"span",11),e._uU(1," *"),e.qZA())}function d(o,l){if(1&o&&(e.TgZ(0,"div"),e._UZ(1,"label",9),e.YNc(2,p,2,0,"span",10),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("innerHTML",t.parsedLabel,e.oJD),e.uIk("for",t.id),e.xp6(1),e.Q6J("ngIf",t.props.required&&!0!==t.props.hideRequiredMarker)}}function h(o,l){if(1&o&&e.YNc(0,d,3,3,"div",2),2&o){const t=e.oxw(2);e.Q6J("ngIf",t.props.label&&!0!==t.props.hideLabel)}}function E(o,l){if(1&o&&(e.YNc(0,s,2,5,"ng-container",6),e.YNc(1,h,1,1,"ng-template",null,7,e.W1O)),2&o){const t=e.MAs(2),a=e.oxw();e.Q6J("ngIf",a.hasCustomLabelTemplate)("ngIfElse",t)}}function Y(o,l){if(1&o&&(e.ynx(0),e.GkF(1,12),e.BQk()),2&o){e.oxw();const t=e.MAs(1);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function Q(o,l){}function X(o,l){if(1&o&&(e.ynx(0),e.GkF(1,12),e.BQk()),2&o){e.oxw();const t=e.MAs(1);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function le(o,l){if(1&o&&(e.TgZ(0,"div",13),e._UZ(1,"formly-validation-message",14),e.qZA()),2&o){const t=e.oxw();e.Udp("display","block"),e.xp6(1),e.Q6J("field",t.field)}}function ce(o,l){if(1&o&&e._UZ(0,"div",15),2&o){const t=e.oxw();e.Q6J("innerHTML",t.parsedDescription,e.oJD)}}let Fe=(()=>{class o extends g.n2{constructor(t){super(),this.customFormUtilsService=t,this.hasCustomLabelTemplate=!1,this.parsedDescription="",this.parsedLabel=""}ngOnInit(){this.hasCustomLabelTemplate=!(!this.props.customLabelTemplate||!this.props.customLabelTemplate.elementRef),this.parsedDescription=this.props.description?this.customFormUtilsService.parseBBCode(this.props.description):"",this.parsedLabel=!this.hasCustomLabelTemplate&&this.props.label?this.customFormUtilsService.parseBBCode(this.props.label):""}get customLabelTemplate(){return this.props.customLabelTemplate}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(r))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-custom-wrapper-form-field"]],features:[e.qOj],decls:9,vars:8,consts:[["labelTemplate",""],[1,"mb-3"],[4,"ngIf"],["fieldComponent",""],["class","invalid-feedback",3,"display",4,"ngIf"],["class","form-text text-muted",3,"innerHTML",4,"ngIf"],[4,"ngIf","ngIfElse"],["stringLabel",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"form-label",3,"innerHTML"],["aria-hidden","true",4,"ngIf"],["aria-hidden","true"],[3,"ngTemplateOutlet"],[1,"invalid-feedback"],[3,"field"],[1,"form-text","text-muted",3,"innerHTML"]],template:function(t,a){1&t&&(e.YNc(0,E,3,2,"ng-template",null,0,e.W1O),e.TgZ(2,"div",1),e.YNc(3,Y,2,1,"ng-container",2),e.YNc(4,Q,0,0,"ng-template",null,3,e.W1O),e.YNc(6,X,2,1,"ng-container",2),e.YNc(7,le,2,3,"div",4),e.YNc(8,ce,1,1,"div",5),e.qZA()),2&t&&(e.xp6(2),e.ekj("form-floating","floating"===a.props.labelPosition)("has-error",a.showError),e.xp6(1),e.Q6J("ngIf","floating"!==a.props.labelPosition),e.xp6(3),e.Q6J("ngIf","floating"===a.props.labelPosition),e.xp6(1),e.Q6J("ngIf",a.showError),e.xp6(1),e.Q6J("ngIf",a.parsedDescription))},dependencies:[v.O5,v.tP,g.M2],encapsulation:2}),o})();var _e=F(8595);function Pe(o,l){1&o&&e.GkF(0)}function st(o,l){if(1&o&&(e.ynx(0),e._UZ(1,"div",13),e.TgZ(2,"div",14),e._uU(3," ("),e.YNc(4,Pe,1,0,"ng-container",15),e._uU(5,") "),e.qZA(),e.BQk()),2&o){const t=e.oxw(),a=e.MAs(15);e.xp6(1),e.Q6J("innerHTML",t.parsedTitle,e.oJD),e.xp6(3),e.Q6J("ngTemplateOutlet",a)}}function lt(o,l){1&o&&e.GkF(0)}function at(o,l){if(1&o&&(e.TgZ(0,"div",16),e._uU(1," Lista di "),e.YNc(2,lt,1,0,"ng-container",15),e.qZA()),2&o){e.oxw();const t=e.MAs(15);e.xp6(2),e.Q6J("ngTemplateOutlet",t)}}function ct(o,l){if(1&o&&e._UZ(0,"div",17),2&o){const t=e.oxw();e.Q6J("innerHTML",t.parsedDescription,e.oJD)}}const pt=function(o){return{"mt-3":o}};function dt(o,l){if(1&o&&(e.TgZ(0,"div",18),e._UZ(1,"formly-validation-message",19),e.qZA()),2&o){const t=e.oxw();e.Q6J("ngClass",e.VKq(2,pt,t.parsedDescription.length)),e.xp6(1),e.Q6J("field",t.field)}}function ut(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"li")(1,"div",30),e.NdJ("click",function(){e.CHM(t);const f=e.oxw().index,b=e.oxw(2);return e.KtG(b.move(f,f-1))}),e._uU(2," arrow_circle_up "),e.qZA()()}2&o&&(e.xp6(1),e.Q6J("disableOnTouchDevice",!0))}const et=function(o){return{"ms-1":o}};function mt(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"li",31)(1,"div",32),e.NdJ("click",function(){e.CHM(t);const f=e.oxw().index,b=e.oxw(2);return e.KtG(b.move(f,f+1))}),e._uU(2," arrow_circle_down "),e.qZA()()}if(2&o){const t=e.oxw().first;e.Q6J("ngClass",e.VKq(2,et,!t)),e.xp6(1),e.Q6J("disableOnTouchDevice",!0)}}function ft(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"li",31)(1,"div",33),e.NdJ("click",function(){e.CHM(t);const f=e.oxw().index,b=e.oxw(2);return e.KtG(b.remove(f))}),e._uU(2," highlight_off "),e.qZA()()}if(2&o){const t=e.oxw();e.Q6J("ngClass",e.VKq(2,et,!(t.first&&t.last))),e.xp6(1),e.Q6J("disableOnTouchDevice",!0)}}const ht=function(o){return{"mb-3":o}},tt=function(o){return{"has-error":o}};function gt(o,l){if(1&o&&(e.TgZ(0,"li",22)(1,"fieldset",23)(2,"legend",24)(3,"div",25)(4,"div",26),e._uU(5),e.qZA(),e.TgZ(6,"ul",27),e.YNc(7,ut,3,1,"li",28),e.YNc(8,mt,3,4,"li",29),e.YNc(9,ft,3,4,"li",29),e.qZA()()(),e._UZ(10,"formly-field",19),e.qZA()()),2&o){const t=l.$implicit,a=l.index,f=l.first,b=l.last;e.Q6J("ngClass",e.VKq(7,ht,!b)),e.xp6(1),e.Q6J("ngClass",e.VKq(9,tt,null==t.formControl?null:t.formControl.invalid)),e.xp6(4),e.hij("#",a+1,""),e.xp6(2),e.Q6J("ngIf",!f),e.xp6(1),e.Q6J("ngIf",!b),e.xp6(1),e.Q6J("ngIf",t.props&&!1!==t.props.removable),e.xp6(1),e.Q6J("field",t)}}function _t(o,l){if(1&o&&(e.TgZ(0,"ul",20),e.YNc(1,gt,11,11,"li",21),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.field.fieldGroup)}}const yt=function(o){return{"d-none d-md-inline":o}};function vt(o,l){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA(),e.TgZ(2,"span",31),e._uU(3),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.field.fieldGroup?t.field.fieldGroup.length:0),e.xp6(1),e.Q6J("ngClass",e.VKq(3,yt,t.props.label)),e.xp6(1),e.hij(" element",t.field.fieldGroup&&1===t.field.fieldGroup.length?"o":"i","")}}const Ft=function(){return[10,10]},xt=function(o){return{placement:"top-end",offset:o}};let bt=(()=>{class o extends g.hv{constructor(t){super(),this.customFormUtilsService=t,this.parsedTitle="",this.parsedDescription=""}ngOnInit(){this.parsedDescription=this.props.description?this.customFormUtilsService.parseBBCode(this.props.description):"",this.parsedTitle=this.props.label?this.customFormUtilsService.parseBBCode(this.props.label):""}get maxLengthExceeded(){return this.props.maxItems&&this.model&&this.model.length>=this.props.maxItems}move(t,a){const f=this.model[t];this.remove(t),this.add(a,f)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(r))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-array"]],features:[e.qOj],decls:16,vars:14,consts:[[1,"rounded","px-3","pb-3","pt-2","mb-3","formly-fieldset",3,"ngClass"],[1,"legend-reset","pb-1","px-2","mb-0","mw-100"],[1,"d-flex","align-items-center","mw-100"],[4,"ngIf","ngIfElse"],["nolabel",""],["class","mb-2 text-justify",3,"innerHTML",4,"ngIf"],["class","alert alert-danger formly-field-array-error text-center","role","alert",3,"ngClass",4,"ngIf"],["class","list-unstyled mb-3",4,"ngIf"],[1,"d-flex","flex-row-reverse"],["appTippy","Hai aggiunto il numero massimo di elementi!",3,"disableInstance","tippyProps"],["type","button",1,"btn","btn-primary","d-flex","align-items-center",3,"disabled","click"],[1,"material-icons"],["itemscount",""],[1,"fs-xl","text-truncate","mw-100",3,"innerHTML"],[1,"ms-2","fs-reset","lh-1","fst-italic","list-counter","text-nowrap"],[4,"ngTemplateOutlet"],[1,"fs-xl","text-truncate","mw-10"],[1,"mb-2","text-justify",3,"innerHTML"],["role","alert",1,"alert","alert-danger","formly-field-array-error","text-center",3,"ngClass"],[3,"field"],[1,"list-unstyled","mb-3"],["class","item",3,"ngClass",4,"ngFor","ngForOf"],[1,"item",3,"ngClass"],[1,"rounded","formly-fieldset","dashed","show-success","px-3",3,"ngClass"],[1,"legend-reset","ms-auto","mb-0","px-2"],[1,"d-flex","align-items-center"],[1,"fs-xl","ms-1"],[1,"ms-2","mb-0","item-icons","list-unstyled","d-flex","align-items-center"],[4,"ngIf"],[3,"ngClass",4,"ngIf"],["appTippy","Sposta in alto",1,"d-block","material-icons","cursor-pointer",3,"disableOnTouchDevice","click"],[3,"ngClass"],["appTippy","Sposta in basso",1,"d-block","material-icons","cursor-pointer",3,"disableOnTouchDevice","click"],["appTippy","Rimuovi",1,"d-block","material-icons","cursor-pointer","text-danger",3,"disableOnTouchDevice","click"]],template:function(t,a){if(1&t&&(e.TgZ(0,"fieldset",0)(1,"legend",1)(2,"div",2),e.YNc(3,st,6,2,"ng-container",3),e.YNc(4,at,3,1,"ng-template",null,4,e.W1O),e.qZA()(),e.YNc(6,ct,1,1,"div",5),e.YNc(7,dt,2,4,"div",6),e.YNc(8,_t,2,1,"ul",7),e.TgZ(9,"div",8)(10,"div",9)(11,"button",10),e.NdJ("click",function(){return!a.maxLengthExceeded&&a.add()}),e.TgZ(12,"span",11),e._uU(13,"add"),e.qZA()()()(),e.YNc(14,vt,4,5,"ng-template",null,12,e.W1O),e.qZA()),2&t){const f=e.MAs(5);e.Q6J("ngClass",e.VKq(9,tt,a.formControl.invalid)),e.xp6(3),e.Q6J("ngIf",a.parsedTitle)("ngIfElse",f),e.xp6(3),e.Q6J("ngIf",a.parsedDescription),e.xp6(1),e.Q6J("ngIf",a.showError&&a.formControl.errors),e.xp6(1),e.Q6J("ngIf",a.field.fieldGroup&&a.field.fieldGroup.length),e.xp6(2),e.Q6J("disableInstance",!a.maxLengthExceeded)("tippyProps",e.VKq(12,xt,e.DdM(11,Ft))),e.xp6(1),e.Q6J("disabled",a.maxLengthExceeded)}},dependencies:[v.mk,v.sg,v.O5,v.tP,g.cw,g.M2,_e.$],styles:["legend[_ngcontent-%COMP%]   .list-counter[_ngcontent-%COMP%]{padding-top:.175rem}legend[_ngcontent-%COMP%]   .item-icons[_ngcontent-%COMP%]{padding-top:.1rem}"]}),o})();function Ct(o,l){if(1&o&&e._UZ(0,"label",4),2&o){const t=e.oxw();e.Q6J("for",t.id)("innerHTML",t.parsedTitle,e.oJD)}}function Ot(o,l){1&o&&(e.TgZ(0,"span",5),e._uU(1," *"),e.qZA())}const Tt=function(o,l){return{"form-check-inline":o,"form-switch":l}};let Mt=(()=>{class o extends ${constructor(t){super(),this.customFormUtilsService=t,this.defaultOptions={props:{indeterminate:!0,hideLabel:!0,formCheck:"default"}},this.parsedTitle=""}ngOnInit(){this.props.label&&"nolabel"!==this.props.formCheck&&(this.parsedTitle=this.customFormUtilsService.parseBBCode(this.props.label))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(r))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-custom-checkbox"]],features:[e.qOj],decls:4,vars:13,consts:[[1,"form-check",3,"ngClass"],["type","checkbox",1,"form-check-input",3,"indeterminate","formControl","formlyAttributes"],["class","form-check-label",3,"for","innerHTML",4,"ngIf"],["aria-hidden","true",4,"ngIf"],[1,"form-check-label",3,"for","innerHTML"],["aria-hidden","true"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"input",1),e.YNc(2,Ct,1,2,"label",2),e.YNc(3,Ot,2,0,"span",3),e.qZA()),2&t&&(e.Q6J("ngClass",e.WLB(10,Tt,"inline"===a.props.formCheck||"inline-switch"===a.props.formCheck,"switch"===a.props.formCheck||"inline-switch"===a.props.formCheck)),e.xp6(1),e.ekj("is-invalid",a.showError)("position-static","nolabel"===a.props.formCheck),e.Q6J("indeterminate",a.props.indeterminate&&null==a.formControl.value)("formControl",a.formControl)("formlyAttributes",a.field),e.xp6(1),e.Q6J("ngIf",a.parsedTitle),e.xp6(1),e.Q6J("ngIf",a.props.required&&!0!==a.props.hideRequiredMarker))},dependencies:[v.mk,v.O5,g.JD,u.Wl,u.JJ,u.oH],encapsulation:2,changeDetection:0}),o})();var Et=F(4020),wt=F(91);const At=["language","theme"],kt=["editor"];let It=(()=>{class o{constructor(t,a){this.ngZone=t,this.monacoPathConfig=a,this.isMonacoLoaded$=new C.X(!1),this._monacoPath="assets/monaco-editor/min/vs",window.monacoEditorAlreadyInitialized?t.run(()=>this.isMonacoLoaded$.next(!0)):(window.monacoEditorAlreadyInitialized=!0,this.monacoPathConfig&&(this.monacoPath=this.monacoPathConfig),this.loadMonaco())}set monacoPath(t){t&&(this._monacoPath=t)}loadMonaco(){const t=()=>{let U=this._monacoPath;window.amdRequire=window.require;const ie=!!this.nodeRequire,oe=U.includes("http");ie&&(window.require=this.nodeRequire,oe||(U=window.require("path").resolve(window.__dirname,this._monacoPath))),window.amdRequire.config({paths:{vs:U}}),window.amdRequire(["vs/editor/editor.main"],()=>{this.ngZone.run(()=>this.isMonacoLoaded$.next(!0))},re=>console.error("Error loading monaco-editor: ",re))};if(window.amdRequire)return t();window.require&&(this.addElectronFixScripts(),this.nodeRequire=window.require);const b=document.createElement("script");b.type="text/javascript",b.src=`${this._monacoPath}/loader.js`,b.addEventListener("load",t),document.body.appendChild(b)}addElectronFixScripts(){const t=document.createElement("script"),a=document.createTextNode("self.module = undefined;"),f=document.createTextNode("self.process.browser = true;");t.appendChild(a),t.appendChild(f),document.body.appendChild(t)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(e.R0b),e.LFG("MONACO_PATH",8))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),Zt=(()=>{class o{constructor(t){this.monacoLoader=t,this.init=new e.vpe,this.onTouched=()=>{},this.onErrorStatusChange=()=>{},this.propagateChange=()=>{}}get model(){return this.editor&&this.editor.getModel()}get modelMarkers(){return this.model&&monaco.editor.getModelMarkers({resource:this.model.uri})}ngOnInit(){this.monacoLoader.isMonacoLoaded$.pipe((0,M.h)(t=>t),(0,Oe.q)(1)).subscribe(()=>{this.initEditor()})}ngOnChanges(t){if(this.editor&&t.options&&!t.options.firstChange){const a=t.options.currentValue,{language:f,theme:b}=a,U=(0,wt.Z)(a,At),{language:ie,theme:oe}=t.options.previousValue;ie!==f&&monaco.editor.setModelLanguage(this.editor.getModel(),this.options&&this.options.language?this.options.language:"text"),oe!==b&&monaco.editor.setTheme(b),this.editor.updateOptions(U)}if(this.editor&&t.uri){const a=t.uri.currentValue,f=t.uri.previousValue;if(f&&!a||!f&&a||a&&f&&a.path!==f.path){const b=this.editor.getValue();let U;this.modelUriInstance&&this.modelUriInstance.dispose(),a&&(U=monaco.editor.getModels().find(ie=>ie.uri.path===a.path)),this.modelUriInstance=U||monaco.editor.createModel(b,this.options.language||"text",this.uri),this.editor.setModel(this.modelUriInstance)}}}writeValue(t){this.value=t,this.editor&&t?this.editor.setValue(t):this.editor&&this.editor.setValue("")}registerOnChange(t){this.propagateChange=t}registerOnTouched(t){this.onTouched=t}validate(){return this.parsedError?{monaco:{value:this.parsedError.split("|")}}:null}registerOnValidatorChange(t){this.onErrorStatusChange=t}initEditor(){const t={value:[this.value].join("\n"),language:"text",automaticLayout:!0,scrollBeyondLastLine:!1,theme:"vc"};this.editor=monaco.editor.create(this.editorContent.nativeElement,this.options?(0,G.Z)((0,G.Z)({},t),this.options):t),this.registerEditorListeners(),this.init.emit(this.editor)}registerEditorListeners(){this.editor.onDidChangeModelContent(()=>{this.propagateChange(this.editor.getValue())}),this.editor.onDidChangeModelDecorations(()=>{const t=this.modelMarkers.map(({message:f})=>f).join("|");this.parsedError!==t&&(this.parsedError=t,this.onErrorStatusChange())}),this.editor.onDidBlurEditorText(()=>{this.onTouched()})}ngOnDestroy(){this.editor&&this.editor.dispose()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(It))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ngx-monaco-editor"]],viewQuery:function(t,a){if(1&t&&e.Gf(kt,7),2&t){let f;e.iGM(f=e.CRH())&&(a.editorContent=f.first)}},inputs:{options:"options",uri:"uri"},outputs:{init:"init"},features:[e._Bn([{provide:u.JU,useExisting:(0,e.Gpc)(()=>o),multi:!0},{provide:u.Cf,useExisting:(0,e.Gpc)(()=>o),multi:!0}]),e.TTD],decls:4,vars:0,consts:[["fxFlex","",1,"editor-container"],["container",""],[1,"monaco-editor"],["editor",""]],template:function(t,a){1&t&&(e.TgZ(0,"div",0,1),e._UZ(2,"div",2,3),e.qZA())},styles:[".monaco-editor[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0}.editor-container[_ngcontent-%COMP%]{overflow:hidden;position:relative;display:table;width:100%;height:100%;min-width:0}"],changeDetection:0}),o})(),Pt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[]]}),o})();function Jt(o,l){if(1&o&&(e.ynx(0),e.TgZ(1,"textarea",2),e._uU(2,"            "),e.qZA(),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("cols",1)("rows",10)("formlyAttributes",t.field)}}function St(o,l){1&o&&(e.ynx(0),e.TgZ(1,"p",4),e._UZ(2,"span",5),e.qZA(),e.BQk())}function Qt(o,l){if(1&o&&e._UZ(0,"ngx-monaco-editor",6),2&o){const t=e.oxw(2);e.Udp("height",t.editorHeight),e.Q6J("options",t.editorOptions)("formControl",t.formControl)}}function Lt(o,l){if(1&o&&(e.YNc(0,St,3,0,"ng-container",0),e.YNc(1,Qt,1,4,"ng-template",null,3,e.W1O)),2&o){const t=e.MAs(2),a=e.oxw();e.Q6J("ngIf",a.loading)("ngIfElse",t)}}let jt=(()=>{class o extends g.fS{constructor(){super(...arguments),this.touchDevice=Et.eX,this.editorOptions={theme:"vs-dark",language:"json"},this.loading=!0,this.editorHeight="350px"}ngOnInit(){this.touchDevice||(this.field.props.editorOptions&&(this.field.props.editorOptions.height&&(this.editorHeight=this.field.props.editorOptions.height,delete this.field.props.editorOptions.height),this.editorOptions=(0,G.Z)((0,G.Z)({},this.editorOptions),this.field.props.editorOptions)),this.loading=!1)}}return o.\u0275fac=function(){let l;return function(a){return(l||(l=e.n5z(o)))(a||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-code-editor-type"]],features:[e.qOj],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["notTouchDevice",""],[1,"form-control",3,"formControl","cols","rows","formlyAttributes"],["codeEditor",""],[1,"placeholder-glow"],[1,"placeholder","col-12","placeholder-lg"],[1,"d-block","formly-code-editor",3,"options","formControl"]],template:function(t,a){if(1&t&&(e.YNc(0,Jt,3,6,"ng-container",0),e.YNc(1,Lt,3,2,"ng-template",null,1,e.W1O)),2&t){const f=e.MAs(2);e.Q6J("ngIf",a.touchDevice)("ngIfElse",f)}},dependencies:[v.O5,g.JD,u.Fj,u.JJ,Zt,u.oH],encapsulation:2}),o})();var xe=F(5861),ot=F(8784);function Rt(o,l){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",4),e.NdJ("click",function(){e.CHM(t);const f=e.oxw();return e.KtG(f.formControl.setValue(void 0))}),e._uU(2," highlight_off "),e.qZA(),e.BQk()}}function Ut(o,l){1&o&&(e.ynx(0),e.TgZ(1,"p",5),e._UZ(2,"span",6),e.qZA(),e.BQk())}function Vt(o,l){if(1&o&&e._UZ(0,"option",10),2&o){const t=l.$implicit;e.Q6J("ngValue",t.id||t.name)("innerText",t.name)}}function Bt(o,l){if(1&o&&(e.ynx(0),e.TgZ(1,"select",8),e.YNc(2,Vt,1,2,"option",9),e.qZA(),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("formlyAttributes",t.field),e.xp6(1),e.Q6J("ngForOf",t.groupsList)}}function Nt(o,l){if(1&o&&e._UZ(0,"option",10),2&o){const t=l.$implicit;e.Q6J("ngValue",t.id||t.name)("innerText",t.name)}}function Yt(o,l){if(1&o&&(e.TgZ(0,"select",11),e.YNc(1,Nt,1,2,"option",9),e.qZA()),2&o){const t=e.oxw(2);e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("formlyAttributes",t.field),e.xp6(1),e.Q6J("ngForOf",t.groupsList)}}function Gt(o,l){if(1&o&&(e.YNc(0,Bt,3,5,"ng-container",2),e.YNc(1,Yt,2,5,"ng-template",null,7,e.W1O)),2&o){const t=e.MAs(2),a=e.oxw();e.Q6J("ngIf",a.field.props.multiple)("ngIfElse",t)}}const Wt=function(o){return{"no-label":o}};let Ht=(()=>{class o extends g.fS{constructor(t){super(),this.forumService=t,this.loading=!0,this.groupsList=[]}ngOnInit(){var t=this;return(0,xe.Z)(function*(){t.field.defaultValue=void 0,t.field.props.hasOwnProperty("multiple")||(t.field.props.multiple=!0),t.groupsList=(yield t.forumService.getGroups()).sort((a,f)=>a.name.localeCompare(f.name)),t.field.props.keepGroupsWithoutId||(t.groupsList=t.groupsList.filter(a=>a.id>0)),t.loading=!1,t.field.formControl.updateValueAndValidity()})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(ot._))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-forum-groups"]],features:[e.qOj],decls:5,vars:6,consts:[[1,"position-relative","wrapper",3,"ngClass"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["formSelect",""],[1,"reset-icon","position-absolute","cursor-pointer","d-block","material-icons","text-danger",3,"click"],[1,"placeholder-glow"],[1,"placeholder","col-12","placeholder-lg"],["single",""],["multiple","",1,"form-select",3,"formControl","formlyAttributes"],[3,"ngValue","innerText",4,"ngFor","ngForOf"],[3,"ngValue","innerText"],[1,"form-select",3,"formControl","formlyAttributes"]],template:function(t,a){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,Rt,3,0,"ng-container",1),e.YNc(2,Ut,3,0,"ng-container",2),e.YNc(3,Gt,3,2,"ng-template",null,3,e.W1O),e.qZA()),2&t){const f=e.MAs(4);e.Q6J("ngClass",e.VKq(4,Wt,!a.props.label)),e.xp6(1),e.Q6J("ngIf",!a.props.label||void 0!==a.formControl.value),e.xp6(1),e.Q6J("ngIf",a.loading)("ngIfElse",f)}},dependencies:[v.mk,v.sg,v.O5,g.JD,u.YN,u.Kr,u.EJ,u.K7,u.JJ,u.oH],styles:[".reset-icon[_ngcontent-%COMP%]{right:0}.wrapper[_ngcontent-%COMP%]:not(.no-label)   .reset-icon[_ngcontent-%COMP%]{top:calc(-24px - .45rem)}.no-label[_ngcontent-%COMP%]{padding-top:calc(24px + .45rem)}.no-label[_ngcontent-%COMP%]   .reset-icon[_ngcontent-%COMP%]{top:0}"]}),o})();function qt(o,l){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",4),e.NdJ("click",function(){e.CHM(t);const f=e.oxw();return e.KtG(f.formControl.setValue(void 0))}),e._uU(2," highlight_off "),e.qZA(),e.BQk()}}function $t(o,l){1&o&&(e.ynx(0),e.TgZ(1,"p",5),e._UZ(2,"span",6),e.qZA(),e.BQk())}function Kt(o,l){if(1&o&&(e.ynx(0),e._UZ(1,"option",10),e.BQk()),2&o){const t=l.$implicit;e.xp6(1),e.Q6J("ngValue",t.id)("innerHTML"," - "+t.name,e.oJD)}}function Xt(o,l){if(1&o&&(e.ynx(0),e.YNc(1,Kt,2,2,"ng-container",9),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.subsections)}}function zt(o,l){if(1&o&&(e.ynx(0),e._UZ(1,"option",10),e.YNc(2,Xt,2,1,"ng-container",1),e.BQk()),2&o){const t=l.$implicit;e.xp6(1),e.Q6J("ngValue",t.id)("innerHTML",t.name,e.oJD),e.xp6(1),e.Q6J("ngIf",t.subsections&&t.subsections.length)}}function eo(o,l){if(1&o&&(e.ynx(0),e._UZ(1,"option",10),e.BQk()),2&o){const t=l.$implicit;e.xp6(1),e.Q6J("ngValue",t)("innerHTML"," -- Sezione ristretta -- #"+t,e.oJD)}}function to(o,l){if(1&o&&(e.ynx(0),e.YNc(1,eo,2,2,"ng-container",9),e.BQk()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.restrictedOrDeletedSections)}}function oo(o,l){if(1&o&&(e.ynx(0),e.TgZ(1,"select",8),e.YNc(2,zt,3,3,"ng-container",9),e.YNc(3,to,2,1,"ng-container",1),e.qZA(),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("formlyAttributes",t.field),e.xp6(1),e.Q6J("ngForOf",t.sectionsList),e.xp6(1),e.Q6J("ngIf",t.restrictedOrDeletedSections.length>0)}}function no(o,l){if(1&o&&(e.ynx(0),e._UZ(1,"option",10),e.BQk()),2&o){const t=l.$implicit;e.xp6(1),e.Q6J("ngValue",t.id)("innerHTML"," - "+t.name,e.oJD)}}function io(o,l){if(1&o&&(e.ynx(0),e.YNc(1,no,2,2,"ng-container",9),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.subsections)}}function ro(o,l){if(1&o&&(e.ynx(0),e._UZ(1,"option",10),e.YNc(2,io,2,1,"ng-container",1),e.BQk()),2&o){const t=l.$implicit;e.xp6(1),e.Q6J("ngValue",t.id)("innerHTML",t.name,e.oJD),e.xp6(1),e.Q6J("ngIf",t.subsections&&t.subsections.length)}}function so(o,l){if(1&o&&(e.ynx(0),e._UZ(1,"option",10),e.BQk()),2&o){const t=l.$implicit;e.xp6(1),e.Q6J("ngValue",t)("innerHTML"," -- Sezione ristretta -- #"+t,e.oJD)}}function lo(o,l){if(1&o&&(e.ynx(0),e.YNc(1,so,2,2,"ng-container",9),e.BQk()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.restrictedOrDeletedSections)}}function ao(o,l){if(1&o&&(e.TgZ(0,"select",11),e.YNc(1,ro,3,3,"ng-container",9),e.YNc(2,lo,2,1,"ng-container",1),e.qZA()),2&o){const t=e.oxw(2);e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("formlyAttributes",t.field),e.xp6(1),e.Q6J("ngForOf",t.sectionsList),e.xp6(1),e.Q6J("ngIf",t.restrictedOrDeletedSections.length>0)}}function co(o,l){if(1&o&&(e.YNc(0,oo,4,6,"ng-container",2),e.YNc(1,ao,3,6,"ng-template",null,7,e.W1O)),2&o){const t=e.MAs(2),a=e.oxw();e.Q6J("ngIf",a.field.props.multiple)("ngIfElse",t)}}const po=function(o){return{"no-label":o}};let uo=(()=>{class o extends g.fS{constructor(t){super(),this.forumService=t,this.loading=!0,this.sectionsList=[],this.restrictedOrDeletedSections=[]}ngOnInit(){var t=this;return(0,xe.Z)(function*(){t.field.defaultValue=void 0,t.field.props.hasOwnProperty("multiple")||(t.field.props.multiple=!0),t.restrictedOrDeletedSections=Array.isArray(t.field.formControl.value)?[...t.field.formControl.value]:[];const a=yield t.forumService.getSections();t.sectionsList=a.map(f=>{const b=t.restrictedOrDeletedSections.indexOf(f.id);return b>-1&&t.restrictedOrDeletedSections.splice(b,1),(0,G.Z)((0,G.Z)({},f),{subsections:t.flattenSubsections(f)})}),t.loading=!1,t.field.formControl.updateValueAndValidity()})()}flattenSubsections(t){let a=[],f=-1;if(t.subsections&&t.subsections.length)for(const b of t.subsections)f=this.restrictedOrDeletedSections.indexOf(b.id),f>-1&&this.restrictedOrDeletedSections.splice(f,1),a.push(b),b.subsections&&(a=[...a,...this.flattenSubsections(b)]);return a}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(ot._))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-forum-sections"]],features:[e.qOj],decls:5,vars:6,consts:[[1,"position-relative","wrapper",3,"ngClass"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["formSelect",""],[1,"reset-icon","position-absolute","cursor-pointer","d-block","material-icons","text-danger",3,"click"],[1,"placeholder-glow"],[1,"placeholder","col-12","placeholder-lg"],["single",""],["multiple","",1,"form-select",3,"formControl","formlyAttributes"],[4,"ngFor","ngForOf"],[3,"ngValue","innerHTML"],[1,"form-select",3,"formControl","formlyAttributes"]],template:function(t,a){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,qt,3,0,"ng-container",1),e.YNc(2,$t,3,0,"ng-container",2),e.YNc(3,co,3,2,"ng-template",null,3,e.W1O),e.qZA()),2&t){const f=e.MAs(4);e.Q6J("ngClass",e.VKq(4,po,!a.props.label)),e.xp6(1),e.Q6J("ngIf",!a.props.label||void 0!==a.formControl.value),e.xp6(1),e.Q6J("ngIf",a.loading)("ngIfElse",f)}},dependencies:[v.mk,v.sg,v.O5,g.JD,u.YN,u.Kr,u.EJ,u.K7,u.JJ,u.oH],styles:[".reset-icon[_ngcontent-%COMP%]{right:0}.wrapper[_ngcontent-%COMP%]:not(.no-label)   .reset-icon[_ngcontent-%COMP%]{top:calc(-24px - .45rem)}.no-label[_ngcontent-%COMP%]{padding-top:calc(24px + .45rem)}.no-label[_ngcontent-%COMP%]   .reset-icon[_ngcontent-%COMP%]{top:0}"]}),o})();var mo=F(8645),fo=F(3620),ho=F(3997),go=F(3019),_o=F(4664),yo=F(2096);let nt=(()=>{class o{transform(t){let a=document.createElement("TEXTAREA");return a.innerHTML=t,a.value}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275pipe=e.Yjl({name:"decodeHtmlEntitites",type:o,pure:!0}),o})();var vo=F(1410),Fo=F(7165),xo=F(5661),bo=F(8418),Co=F(4291),Oo=F(4929),it=F(3946),To=F(7291);function Mo(o,l){1&o&&(e.TgZ(0,"span",8),e._uU(1,"*"),e.qZA())}function Eo(o,l){if(1&o&&(e.TgZ(0,"legend",5)(1,"label",6),e._uU(2),e.YNc(3,Mo,2,0,"span",7),e.qZA()()),2&o){const t=e.oxw();e.xp6(1),e.s9C("for",t.id),e.xp6(1),e.hij(" ",t.props.label," "),e.xp6(1),e.Q6J("ngIf",t.props.required)}}function wo(o,l){1&o&&e.GkF(0)}function Ao(o,l){if(1&o&&e._UZ(0,"div",9),2&o){const t=e.oxw();e.Q6J("innerHTML",t.parsedDescription,e.oJD)}}function ko(o,l){1&o&&(e.TgZ(0,"div",16)(1,"span",17),e._uU(2,"Loading..."),e.qZA()())}function Do(o,l){if(1&o&&(e.TgZ(0,"div",18),e._UZ(1,"formly-validation-message",19),e.qZA()),2&o){const t=e.oxw(2);e.Udp("display","block"),e.xp6(1),e.Q6J("field",t.field)}}function Io(o,l){1&o&&e._UZ(0,"app-loader",20)}function Zo(o,l){1&o&&e._UZ(0,"div",25),2&o&&e.Q6J("innerText","Nessun utente inserito!")}function Po(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"li")(1,"a",28)(2,"div",29),e.NdJ("click",function(f){const U=e.CHM(t).$implicit,ie=e.oxw(4);return e.KtG(ie.removeUser(U,f))}),e.TgZ(3,"div",30),e._uU(4," remove "),e.qZA()(),e._UZ(5,"img",31),e.ALo(6,"uploadsreplace"),e.qZA(),e._UZ(7,"a",32),e.qZA()}if(2&o){const t=l.$implicit,a=e.oxw(4);e.Gre("d-flex flex-column align-items-center user-",a.circuit,""),e.xp6(1),e.Q6J("href",a.baseUrl+t.uid.substring(2),e.LSH),e.xp6(1),e.Q6J("disableOnTouchDevice",!0),e.xp6(3),e.s9C("alt",t.nickname+"'s avatar"),e.Q6J("src",e.lcZ(6,9,t.avatar),e.LSH),e.xp6(2),e.Q6J("innerHTML",t.nickname,e.oJD)("href",a.baseUrl+t.uid.substring(2),e.LSH)}}function Jo(o,l){if(1&o&&(e.TgZ(0,"ul",26),e.YNc(1,Po,8,11,"li",27),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.selectedUsers)}}const So=function(o){return{"empty-list":o}};function Qo(o,l){if(1&o&&(e.TgZ(0,"fieldset",21)(1,"legend",22),e._uU(2," Lista utenti "),e.qZA(),e.YNc(3,Zo,1,1,"div",23),e.YNc(4,Jo,2,1,"ng-template",null,24,e.W1O),e.qZA()),2&o){const t=e.MAs(5),a=e.oxw(2);e.Q6J("ngClass",e.VKq(3,So,0===a.selectedUsers.length)),e.xp6(3),e.Q6J("ngIf",0===a.selectedUsers.length)("ngIfElse",t)}}function Lo(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",10)(1,"input",11),e.NdJ("ngModelChange",function(f){e.CHM(t);const b=e.oxw();return e.KtG(b.inputValue=f)})("selectItem",function(f){e.CHM(t);const b=e.oxw();return e.KtG(b.selectUser(f))})("focus",function(f){e.CHM(t);const b=e.oxw();return e.KtG(b.focus.next(f.target.value))}),e.qZA(),e.YNc(2,ko,3,0,"div",12),e.qZA(),e.YNc(3,Do,2,3,"div",13),e.YNc(4,Io,1,0,"app-loader",14),e.YNc(5,Qo,6,5,"ng-template",null,15,e.W1O)}if(2&o){const t=e.MAs(6),a=e.oxw();e.xp6(1),e.ekj("is-invalid",a.showError),e.Q6J("ngModel",a.inputValue)("formlyAttributes",a.field)("ngbTypeahead",a.search)("editable",!1)("inputFormatter",a.inputFormatter)("resultFormatter",a.outputFormatter),e.xp6(1),e.Q6J("ngIf",a.searching),e.xp6(1),e.Q6J("ngIf",a.showError),e.xp6(1),e.Q6J("ngIf",a.loading)("ngIfElse",t)}}let jo=(()=>{class o extends g.fS{constructor(t,a,f,b,U,ie){var oe;if(super(),this.userService=t,this.globalsService=a,this.changeDetectorRef=f,this.toastService=b,this.customFormUtilsService=U,this.decodeHtmlEntitiesPipe=ie,this.inputValue="",this.selectedUsers=[],this.loading=!0,this.searching=!1,this.focus=new mo.x,this.parsedDescription="",this.formlyFieldValues=[],this.lastSearchedValueWithoutResult="",this.outputFormatter=re=>re?re.nickname.indexOf("&")>-1?this.decodeHtmlEntitiesPipe.transform(re.nickname):re.nickname:"",this.search=re=>{const ze=re.pipe((0,fo.b)(1e3),(0,ho.x)());return(0,go.T)(ze,this.focus).pipe((0,B.b)(()=>this.setSearching(!0)),(0,_o.w)(rt=>rt.length<3?(0,yo.of)([]):this.getUsers(rt)),(0,B.b)(()=>this.setSearching(!1)))},this.circuit=(null===(oe=this.globalsService.credentials)||void 0===oe?void 0:oe.site.short)||"",!this.circuit)throw new Error("Missing credentials!");this.baseUrl=Fo.hD[this.circuit]+"/?act=Profile&MID="}ngOnInit(){var t=this;return(0,xe.Z)(function*(){t.parsedDescription=t.props.description?t.customFormUtilsService.parseBBCode(t.props.description):"",t.formlyFieldValues=Array.isArray(t.formControl.value)?t.formControl.value:Array.isArray(t.field.defaultValue)?t.field.defaultValue:[],yield t.getSelectedUsersFromApi(),t.loading=!1,t.formControl.updateValueAndValidity(),t.formControl.registerOnChange(()=>{t.formControlChangeCallback()})})()}inputFormatter(t){return t.nickname}getUsers(t){var a=this;return(0,xe.Z)(function*(){if(a.lastSearchedValueWithoutResult&&0===t.indexOf(a.lastSearchedValueWithoutResult))return[];const f=yield a.userService.searchUserByName(t);return 0===f.length&&(a.lastSearchedValueWithoutResult=t),f})()}setSearching(t){this.searching=t,this.changeDetectorRef.detectChanges()}selectUser(t){const a=t.item,f=Number(a.uid.substring(2));if(this.formlyFieldValues.includes(f))return this.toastService.show({content:`L'utente <strong>${a.nickname}</strong> \xe8 gi\xe0 stato aggiunto alla lista!`}),void(this.inputValue="");this.formlyFieldValues.push(f),this.selectedUsers.push(a),t.preventDefault(),this.inputValue="",this.formControl.setValue([...this.formlyFieldValues])}removeUser(t,a){a.preventDefault(),a.stopPropagation();const f=Number(t.uid.substring(2));this.formlyFieldValues=this.formlyFieldValues.filter(b=>b!==f),this.selectedUsers=this.selectedUsers.filter(b=>b.uid!==t.uid),this.formControl.setValue([...this.formlyFieldValues])}formControlChangeCallback(){var t=this;return(0,xe.Z)(function*(){if(!Array.isArray(t.formControl.value))return;let a=!1;if(t.formControl.value.length!==t.formlyFieldValues.length)a=!0;else for(const f of t.formControl.value)if(!t.formlyFieldValues.includes(f)){a=!0;break}a&&(t.formlyFieldValues=t.formControl.value,t.loading=!0,t.changeDetectorRef.detectChanges(),yield t.getSelectedUsersFromApi(),t.loading=!1,t.changeDetectorRef.detectChanges())})()}getSelectedUsersFromApi(){var t=this;return(0,xe.Z)(function*(){t.selectedUsers=0!==t.formlyFieldValues.length?(yield t.userService.getDetailsFromUids(t.formlyFieldValues.map(a=>t.circuit+a))).sort((a,f)=>a.nickname>f.nickname?1:f.nickname>a.nickname?-1:0):[]})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(bo.K),e.Y36(vo.d),e.Y36(e.sBO),e.Y36(xo.k),e.Y36(r),e.Y36(nt))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-forum-users"]],features:[e._Bn([nt]),e.qOj],decls:6,vars:5,consts:[[1,"mb-3","rounded","px-3","pt-2","pb-3","formly-fieldset"],["class","legend-reset fs-reset mb-0 px-2 mw-100 lh-1 py-1",4,"ngIf"],[4,"ngTemplateOutlet"],["class","form-text text-muted",3,"innerHTML",4,"ngIf"],["fieldContet",""],[1,"legend-reset","fs-reset","mb-0","px-2","mw-100","lh-1","py-1"],[1,"form-label","mb-0","mw-100","text-truncate",3,"for"],["aria-hidden","true",4,"ngIf"],["aria-hidden","true"],[1,"form-text","text-muted",3,"innerHTML"],[1,"position-relative"],["type","text","container","body",1,"form-control",3,"ngModel","formlyAttributes","ngbTypeahead","editable","inputFormatter","resultFormatter","ngModelChange","selectItem","focus"],["class","spinner-border spinner-border-sm text-primary position-absolute","role","status",4,"ngIf"],["class","invalid-feedback",3,"display",4,"ngIf"],["message","Recupero utenti","class","d-block mt-3",4,"ngIf","ngIfElse"],["userList",""],["role","status",1,"spinner-border","spinner-border-sm","text-primary","position-absolute"],[1,"visually-hidden"],[1,"invalid-feedback"],[3,"field"],["message","Recupero utenti",1,"d-block","mt-3"],[1,"formly-user-list-container","rounded","px-3","pt-2","mb-3","mt-2",3,"ngClass"],[1,"legend-reset","fs-reset","mb-0","px-2","pb-1"],["class","alert alert-primary text-center mb-0 fw-bold",3,"innerText",4,"ngIf","ngIfElse"],["noEmpty",""],[1,"alert","alert-primary","text-center","mb-0","fw-bold",3,"innerText"],[1,"formly-user-list","list-unstyled","mb-0","d-grid","px-2"],[3,"class",4,"ngFor","ngForOf"],["target","_blank",1,"avatar-container","rounded-circle","d-block","position-relative",3,"href"],["appTippy","Rimuovi",1,"remove-user","alert","alert-danger","position-absolute","cursor-pointer","mb-0","py-0","px-1",3,"disableOnTouchDevice","click"],[1,"material-icons","d-block","fs-reset"],["appImage","",1,"d-block","image-cover","rounded-circle",3,"src","alt"],["target","_blank",1,"d-block","fw-bold","mt-1","nickname","text-truncate","mw-100",3,"innerHTML","href"]],template:function(t,a){if(1&t&&(e.TgZ(0,"fieldset",0),e.YNc(1,Eo,4,3,"legend",1),e.YNc(2,wo,1,0,"ng-container",2),e.YNc(3,Ao,1,1,"div",3),e.qZA(),e.YNc(4,Lo,7,12,"ng-template",null,4,e.W1O)),2&t){const f=e.MAs(5);e.ekj("has-error",a.formControl.invalid),e.xp6(1),e.Q6J("ngIf",a.props.label),e.xp6(1),e.Q6J("ngTemplateOutlet",f),e.xp6(1),e.Q6J("ngIf",a.parsedDescription)}},dependencies:[v.mk,v.sg,v.O5,v.tP,g.JD,g.M2,u.Fj,u.JJ,u.On,Co.t,Oo.R,it.dR,_e.$,To.g],styles:[".spinner-border[_ngcontent-%COMP%]{top:calc(50% - 8px);right:10px}fieldset.formly-user-list-container[_ngcontent-%COMP%]{border:1px dashed var(--ei-gray-500)}fieldset.formly-user-list-container[_ngcontent-%COMP%]:not(.empty-list){padding-bottom:.75rem}fieldset.formly-user-list-container.empty-list[_ngcontent-%COMP%]{padding-bottom:1rem}.formly-user-list[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(60px,1fr));gap:1rem}.formly-user-list[_ngcontent-%COMP%]   .remove-user[_ngcontent-%COMP%]{top:0;left:-8px}.formly-user-list[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{width:60px;height:60px;border:2px solid}.formly-user-list[_ngcontent-%COMP%]   .user-ff[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{border-color:#58a72e}.formly-user-list[_ngcontent-%COMP%]   .user-ff[_ngcontent-%COMP%]   .nickname[_ngcontent-%COMP%]{color:#58a72e!important}.formly-user-list[_ngcontent-%COMP%]   .user-fc[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{border-color:#0082cd}.formly-user-list[_ngcontent-%COMP%]   .user-fc[_ngcontent-%COMP%]   .nickname[_ngcontent-%COMP%]{color:#0082cd!important}.formly-user-list[_ngcontent-%COMP%]   .user-bf[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{border-color:#e67f22}.formly-user-list[_ngcontent-%COMP%]   .user-bf[_ngcontent-%COMP%]   .nickname[_ngcontent-%COMP%]{color:#e67f22!important}@media (min-width: 960px){.formly-user-list[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(75px,1fr));gap:1.5rem}.formly-user-list[_ngcontent-%COMP%]   .remove-user[_ngcontent-%COMP%]{top:4px}.formly-user-list[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{width:75px;height:75px}}"]}),o})();function Ro(o,l){if(1&o&&(e.TgZ(0,"legend"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.props.label)}}function Uo(o,l){if(1&o&&e._UZ(0,"p",5),2&o){const t=e.oxw();e.Q6J("innerHTML",t.parsedDescription,e.oJD)}}function Vo(o,l){if(1&o&&(e.TgZ(0,"div",6),e._UZ(1,"formly-validation-message",7),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("field",t.field)}}function Bo(o,l){1&o&&e._UZ(0,"formly-field",7),2&o&&e.Q6J("field",l.$implicit)}let No=(()=>{class o extends g.fS{constructor(t){super(),this.customForumUtilsService=t,this.parsedDescription=""}ngOnInit(){this.props.description&&(this.parsedDescription=this.customForumUtilsService.parseBBCode(this.props.description))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(r))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-multi-schema"]],features:[e.qOj],decls:5,vars:4,consts:[[1,"pt-3","px-3","rounded","border","mt-2"],[4,"ngIf"],[3,"innerHTML",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],[3,"field",4,"ngFor","ngForOf"],[3,"innerHTML"],["role","alert",1,"alert","alert-danger"],[3,"field"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Ro,2,1,"legend",1),e.YNc(2,Uo,1,1,"p",2),e.YNc(3,Vo,2,1,"div",3),e.YNc(4,Bo,1,1,"formly-field",4),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",a.props.label),e.xp6(1),e.Q6J("ngIf",a.parsedDescription),e.xp6(1),e.Q6J("ngIf",a.showError&&a.formControl.errors),e.xp6(1),e.Q6J("ngForOf",a.field.fieldGroup))},dependencies:[v.sg,v.O5,g.cw,g.M2],encapsulation:2}),o})();function Yo(o,l){if(1&o&&(e.TgZ(0,"legend",6),e._UZ(1,"div",7),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("innerHTML",t.parsedTitle,e.oJD)}}function Go(o,l){1&o&&e.GkF(0)}const Wo=function(o){return{"has-error":o}};function Ho(o,l){if(1&o&&(e.TgZ(0,"fieldset",3),e.YNc(1,Yo,2,1,"legend",4),e.YNc(2,Go,1,0,"ng-container",5),e.qZA()),2&o){const t=e.oxw(),a=e.MAs(4);e.Q6J("ngClass",e.VKq(3,Wo,t.formControl.invalid)),e.xp6(1),e.Q6J("ngIf",t.parsedTitle),e.xp6(1),e.Q6J("ngTemplateOutlet",a)}}function qo(o,l){if(1&o&&e._UZ(0,"div",10),2&o){const t=e.oxw(2);e.Q6J("innerHTML",t.parsedTitle,e.oJD)}}function $o(o,l){1&o&&e.GkF(0)}function Ko(o,l){if(1&o&&(e.TgZ(0,"div",8),e.YNc(1,qo,1,1,"div",9),e.YNc(2,$o,1,0,"ng-container",5),e.qZA()),2&o){const t=e.oxw(),a=e.MAs(4);e.xp6(1),e.Q6J("ngIf",t.parsedTitle),e.xp6(1),e.Q6J("ngTemplateOutlet",a)}}function Xo(o,l){if(1&o&&e._UZ(0,"p",14),2&o){const t=e.oxw(2);e.Q6J("innerHTML",t.parsedDescription,e.oJD)}}function zo(o,l){if(1&o&&(e.TgZ(0,"div",15),e._UZ(1,"formly-validation-message",16),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("field",t.field)}}function en(o,l){1&o&&e._UZ(0,"formly-field",16),2&o&&e.Q6J("field",l.$implicit)}function tn(o,l){if(1&o&&(e.YNc(0,Xo,1,1,"p",11),e.YNc(1,zo,2,1,"div",12),e.YNc(2,en,1,1,"formly-field",13)),2&o){const t=e.oxw();e.Q6J("ngIf",t.parsedDescription),e.xp6(1),e.Q6J("ngIf",t.showError&&t.formControl.errors),e.xp6(1),e.Q6J("ngForOf",t.field.fieldGroup)}}let on=(()=>{class o extends g.fS{constructor(t){super(),this.customFormUtilsService=t,this.parsedTitle="",this.parsedDescription=""}ngOnInit(){this.parsedDescription=this.props.description?this.customFormUtilsService.parseBBCode(this.props.description):"",this.parsedTitle=this.props.label?this.customFormUtilsService.parseBBCode(this.props.label):""}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(r))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-object"]],features:[e.qOj],decls:5,vars:2,consts:[["class","px-3 mb-3 pt-1 rounded formly-fieldset",3,"ngClass",4,"ngIf","ngIfElse"],["noFieldset",""],["objectFieldContent",""],[1,"px-3","mb-3","pt-1","rounded","formly-fieldset",3,"ngClass"],["class","legend-reset fs-xl px-2 mb-0 pb-1 mw-100 d-flex align-items-center",4,"ngIf"],[4,"ngTemplateOutlet"],[1,"legend-reset","fs-xl","px-2","mb-0","pb-1","mw-100","d-flex","align-items-center"],[1,"mw-100","text-truncate",3,"innerHTML"],[1,"mb-3"],["class","h4",3,"innerHTML",4,"ngIf"],[1,"h4",3,"innerHTML"],["class","text-justify mt-2",3,"innerHTML",4,"ngIf"],["class","alert alert-danger formly-field-object-error text-center","role","alert",4,"ngIf"],[3,"field",4,"ngFor","ngForOf"],[1,"text-justify","mt-2",3,"innerHTML"],["role","alert",1,"alert","alert-danger","formly-field-object-error","text-center"],[3,"field"]],template:function(t,a){if(1&t&&(e.YNc(0,Ho,3,5,"fieldset",0),e.YNc(1,Ko,3,2,"ng-template",null,1,e.W1O),e.YNc(3,tn,3,3,"ng-template",null,2,e.W1O)),2&t){const f=e.MAs(2);e.Q6J("ngIf",a.props.fieldsetTemplate)("ngIfElse",f)}},dependencies:[v.mk,v.sg,v.O5,v.tP,g.cw,g.M2],encapsulation:2}),o})(),nn=(()=>{class o extends g.fS{constructor(){super(...arguments),this.defaultOptions={props:{cols:1,rows:10}}}}return o.\u0275fac=function(){let l;return function(a){return(l||(l=e.n5z(o)))(a||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-textarea"]],features:[e.qOj],decls:2,vars:6,consts:[[1,"form-control",3,"formControl","cols","rows","formlyAttributes"]],template:function(t,a){1&t&&(e.TgZ(0,"textarea",0),e._uU(1,"        "),e.qZA()),2&t&&(e.ekj("is-invalid",a.showError),e.Q6J("formControl",a.formControl)("cols",a.props.cols)("rows",a.props.rows)("formlyAttributes",a.field))},dependencies:[g.JD,u.Fj,u.JJ,u.oH],encapsulation:2,changeDetection:0}),o})();var rn=F(4295),sn=F(7535);function cn(o,l){return`Questo campo deve avere almeno ${l.props.minLength} caratteri`}function pn(o,l){return`Questo campo pu\xf2 avere al massimo ${l.props.maxLength} caratteri`}function dn(o,l){return`Questo campo deve avere un valore minimo di ${l.props.min}`}function un(o,l){return`Questo campo pu\xf2 avere un valore massimo di ${l.props.max}`}function mn(){return"Il campo non rispetta lo schema richiesto"}function fn(o,l){return`Questo campo deve avere almeno ${l.props.minItems} element${1===l.props.minItems?"o":"i"}!`}function hn(o,l){return`Questo campo pu\xf2 avere al massimo ${l.props.maxItems} element${1===l.props.maxItems?"o":"i"}!`}function gn(o,l){return`Questo campo deve essere un multiplo di ${l.props.step}`}var _n=F(3038),yn=F(5778);let vn=(()=>{class o extends g.fS{constructor(){super(...arguments),this.defaultOptions={props:{label:""}}}}return o.\u0275fac=function(){let l;return function(a){return(l||(l=e.n5z(o)))(a||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-label"]],features:[e.qOj],decls:2,vars:1,template:function(t,a){1&t&&(e.TgZ(0,"h5"),e._uU(1),e.qZA()),2&t&&(e.xp6(1),e.Oqu(a.props.label))},encapsulation:2,changeDetection:0}),o})(),Fn=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[v.ez,Xe,g.X0.forRoot({extras:{renderFormlyFieldElement:!1},wrappers:[{name:"form-field",component:Fe}],validationMessages:[{name:"required",message:"Compila questo campo!"},{name:"minLength",message:cn},{name:"maxLength",message:pn},{name:"min",message:dn},{name:"max",message:un},{name:"minItems",message:fn},{name:"maxItems",message:hn},{name:"multipleOf",message:gn},{name:"pattern",message:mn},{name:"uniqueItems",message:"Non possono esserci elementi uguali fra loro!"}],types:[{name:"array",component:bt},{name:"code-editor",component:jt,wrappers:["form-field"]},{name:"object",component:on},{name:"textarea",component:nn},{name:"forum-groups",component:Ht,wrappers:["form-field"]},{name:"forum-sections",component:uo,wrappers:["form-field"]},{name:"label",component:vn},{name:"forum-users",component:jo},{name:"multischema",component:No},{name:"boolean",component:Mt,wrappers:["form-field"]}]}),u.u5,rn.$,sn.q,Pt,it.ZS,u.UX,_n.G,yn.g]}),o})()},336:(Ae,pe,F)=>{F.d(pe,{c:()=>$});var v=F(9376),e=F(91),g=F(1413),u=F(5879),D=F(6223),S=F(5545),H=F(9397);const q=["key"],ue=["allOf"];function J(O){return""===O||null==O}function z(O){return null!=O&&"object"==typeof O&&!Array.isArray(O)}function y(O){return Number.isInteger?Number.isInteger(O):"number"==typeof O&&Math.floor(O)===O}function w(O){return"object"==typeof O&&(O.hasOwnProperty("const")||O.enum&&1===O.enum.length)}function j(O){if(!O.fieldGroup)return(0,S._S)(O)&&void 0!==(0,S.Hl)(O)?1:0;const K=O.fieldGroup.reduce((m,T)=>j(T)+m,0);if(0===K&&(0,S._S)(O)){const m=(0,S.Hl)(O);if(null===m||void 0!==m&&(O.fieldArray&&Array.isArray(m)||!O.fieldArray&&z(m)))return 1}return K}let $=(()=>{class O{toFieldConfig(m,T){return this._toFieldConfig(m,(0,g.Z)({schema:m},T||{}))}_toFieldConfig(m,T){var k;let{key:I}=T,x=(0,e.Z)(T,q);m=this.resolveSchema(m,x);const A=this.guessSchemaType(m);let _={type:A[0],defaultValue:m.default,props:{label:m.title,readonly:m.readOnly,description:m.description}};switch(null!=I&&(_.key=I),!x.ignoreDefault&&(m.readOnly||x.readOnly)&&(_.props.disabled=!0,x=(0,g.Z)((0,g.Z)({},x),{},{readOnly:!0})),x.resetOnHide&&(_.resetOnHide=!0),I&&x.strict&&this.addValidator(_,"type",(C,P)=>{const M=(0,S.Hl)(P);if(null!=M)switch(_.type){case"string":return"string"==typeof M;case"integer":return y(M);case"number":return"number"==typeof M;case"object":return z(M);case"array":return Array.isArray(M)}return!0}),!1===x.shareFormControl&&(_.shareFormControl=!1),x.ignoreDefault&&delete _.defaultValue,this.addValidator(_,"type",{schemaType:A,expression:({value:C})=>{if(void 0===C||null===C&&-1!==A.indexOf("null"))return!0;switch(A[0]){case"null":return null===typeof C;case"string":return"string"==typeof C;case"integer":return y(C);case"number":return"number"==typeof C;case"object":return z(C);case"array":return Array.isArray(C)}return!0}}),_.type){case"number":case"integer":_.parsers=[C=>J(C)?void 0:Number(C)],m.hasOwnProperty("minimum")&&(_.props.min=m.minimum),m.hasOwnProperty("maximum")&&(_.props.max=m.maximum),m.hasOwnProperty("exclusiveMinimum")&&(_.props.exclusiveMinimum=m.exclusiveMinimum,this.addValidator(_,"exclusiveMinimum",({value:C})=>J(C)||C>m.exclusiveMinimum)),m.hasOwnProperty("exclusiveMaximum")&&(_.props.exclusiveMaximum=m.exclusiveMaximum,this.addValidator(_,"exclusiveMaximum",({value:C})=>J(C)||C<m.exclusiveMaximum)),m.hasOwnProperty("multipleOf")&&(_.props.step=m.multipleOf,this.addValidator(_,"multipleOf",({value:C})=>{if(J(C)||"number"!=typeof C||0===C||m.multipleOf<=0)return!0;const P=Math.pow(10,function me(O){if(!isFinite(O))return 0;let K=1,m=0;for(;Math.round(O*K)/K!==O;)K*=10,m++;return m}(m.multipleOf));return Math.round(C*P)%Math.round(m.multipleOf*P)==0}));break;case"string":_.parsers=[C=>(-1!==A.indexOf("null")?C=J(C)?null:C:_.props.required||(C=""===C?void 0:C),C)],["minLength","maxLength","pattern"].forEach(C=>{m.hasOwnProperty(C)&&(_.props[C]=m[C])});break;case"object":{_.fieldGroup||(_.fieldGroup=[]);const{propDeps:C,schemaDeps:P}=this.resolveDependencies(m);Object.keys(m.properties||{}).forEach(M=>{const B=Array.isArray(m.required)&&-1!==m.required.indexOf(M),Z=this._toFieldConfig(m.properties[M],(0,g.Z)((0,g.Z)({},x),{},{key:M,isOptional:x.isOptional||!B}));if(_.fieldGroup.push(Z),(B||C[M])&&(Z.expressions=(0,g.Z)((0,g.Z)({},Z.expressions||{}),{},{"props.required":R=>{let V=R.parent;const L=R.fieldGroup&&null!=R.key?V.model:R.model;for(;null==V.key&&V.parent;)V=V.parent;return!!(L||V&&V.props&&V.props.required)&&(!(!Array.isArray(m.required)||-1===m.required.indexOf(M))||C[M]&&R.model&&C[M].some(te=>!J(R.model[te])))}})),P[M]){const R=L=>L.hasOwnProperty("const")?L.const:L.enum[0],V=P[M].oneOf;V&&V.every(L=>L.properties&&L.properties[M]&&w(L.properties[M]))?V.forEach(L=>{const de=L.properties,{[M]:te}=de,se=(0,e.Z)(de,[M].map(v.Z));_.fieldGroup.push((0,g.Z)((0,g.Z)({},this._toFieldConfig((0,g.Z)((0,g.Z)({},L),{},{properties:se}),(0,g.Z)((0,g.Z)({},x),{},{resetOnHide:!0}))),{},{expressions:{hide:ne=>!ne.model||R(te)!==ne.model[M]}}))}):_.fieldGroup.push((0,g.Z)((0,g.Z)({},this._toFieldConfig(P[M],x)),{},{expressions:{hide:L=>!L.model||J(L.model[M])}}))}}),m.oneOf&&_.fieldGroup.push(this.resolveMultiSchema("oneOf",m.oneOf,(0,g.Z)((0,g.Z)({},x),{},{shareFormControl:!1}))),m.anyOf&&_.fieldGroup.push(this.resolveMultiSchema("anyOf",m.anyOf,x));break}case"array":m.hasOwnProperty("minItems")&&(_.props.minItems=m.minItems,this.addValidator(_,"minItems",(C,P)=>{const M=(0,S.Hl)(P);return J(M)||M.length>=m.minItems}),!x.isOptional&&m.minItems>0&&void 0===_.defaultValue&&(_.defaultValue=Array.from(new Array(m.minItems)))),m.hasOwnProperty("maxItems")&&(_.props.maxItems=m.maxItems,this.addValidator(_,"maxItems",(C,P)=>{const M=(0,S.Hl)(P);return J(M)||M.length<=m.maxItems})),m.hasOwnProperty("uniqueItems")&&(_.props.uniqueItems=m.uniqueItems,this.addValidator(_,"uniqueItems",(C,P)=>{const M=(0,S.Hl)(P);return!(!J(M)&&m.uniqueItems)||Array.from(new Set(M.map(Z=>JSON.stringify(Z)))).length===M.length})),m.items&&!Array.isArray(m.items)&&(m.items=this.resolveSchema(m.items,x)),this.isEnum(m)||(_.fieldArray=C=>{if(!Array.isArray(m.items)){const Z=m.items?this._toFieldConfig(m.items,x):{};return Z.props&&(Z.props.required=!0),Z}const P=C.fieldGroup?C.fieldGroup.length:0,M=m.items[P]?m.items[P]:m.additionalItems,B=M?this._toFieldConfig(M,x):{};return B.props&&(B.props.required=!0),m.items[P]&&(B.props.removable=!1),B})}return m.hasOwnProperty("const")&&(_.props.const=m.const,this.addValidator(_,"const",({value:C})=>C===m.const),_.type||(_.defaultValue=m.const)),this.isEnum(m)&&(_.props.multiple="array"===_.type,_.type="enum",_.props.options=this.toEnumOptions(m)),m.oneOf&&!_.type&&(delete _.key,_.fieldGroup=[this.resolveMultiSchema("oneOf",m.oneOf,(0,g.Z)((0,g.Z)({},x),{},{key:I,shareFormControl:!1}))]),m.oneOf&&!_.type&&(delete _.key,_.fieldGroup=[this.resolveMultiSchema("oneOf",m.oneOf,(0,g.Z)((0,g.Z)({},x),{},{key:I,shareFormControl:!1}))]),null!==(k=m.widget)&&void 0!==k&&k.formlyConfig&&(_=this.mergeFields(_,m.widget.formlyConfig)),_.templateOptions=_.props,x.map?x.map(_,m):_}resolveSchema(m,T){return m&&m.$ref&&(m=this.resolveDefinition(m,T)),m&&m.allOf&&(m=this.resolveAllOf(m,T)),m}resolveAllOf(m,T){let{allOf:k}=m,I=(0,e.Z)(m,ue);if(!k.length)throw Error(`allOf array can not be empty ${k}.`);return k.reduce((x,A)=>(A=this.resolveSchema(A,T),x.required&&A.required&&(x.required=[...x.required,...A.required]),A.uniqueItems&&(x.uniqueItems=A.uniqueItems),["maxLength","maximum","exclusiveMaximum","maxItems","maxProperties"].forEach(_=>{!J(x[_])&&!J(A[_])&&(x[_]=x[_]<A[_]?x[_]:A[_])}),["minLength","minimum","exclusiveMinimum","minItems","minProperties"].forEach(_=>{!J(x[_])&&!J(A[_])&&(x[_]=x[_]>A[_]?x[_]:A[_])}),(0,S.Du)(x,A)),I)}resolveMultiSchema(m,T,k){return{type:"multischema",fieldGroup:[{type:"enum",defaultValue:-1,props:{multiple:"anyOf"===m,options:T.map((I,x)=>({label:I.title,value:x,disabled:I.readOnly}))},hooks:{onInit:I=>I.formControl.valueChanges.pipe((0,H.b)(()=>I.options.detectChanges(I.parent)))}},{fieldGroup:T.map((I,x)=>(0,g.Z)((0,g.Z)({},this._toFieldConfig(I,(0,g.Z)((0,g.Z)({},k),{},{resetOnHide:!0}))),{},{expressions:{hide:(A,_)=>{const C=A.parent.parent.fieldGroup[0].formControl;if(-1===C.value||_){let P=A.parent.fieldGroup.map((M,B)=>[M,B,this.isFieldValid(M,B,T,k)]).sort(([M,,B],[Z,,R])=>{if(B!==R)return R?1:-1;const V=j(M),L=j(Z);return V===L&&M.props.disabled===Z.props.disabled?0:L>V?1:-1}).map(([,M])=>M);if("anyOf"===m){const M=P.filter(B=>j(A.parent.fieldGroup[B]));P=M.length>0?M:[P[0]||0]}P=P.length>0?P:[0],C.setValue("anyOf"===m?P:P[0])}return Array.isArray(C.value)?-1===C.value.indexOf(x):C.value!==x}}}))}]}}resolveDefinition(m,T){const[k,I]=m.$ref.split("#/");if(k)throw Error(`Remote schemas for ${m.$ref} not supported yet.`);const x=I?I.split("/").reduce((A,_)=>null!=A&&A.hasOwnProperty(_)?A[_]:null,T.schema):null;if(!x)throw Error(`Cannot find a definition for ${m.$ref}.`);return x.$ref?this.resolveDefinition(x,T):(0,g.Z)((0,g.Z)({},x),["title","description","default","widget"].reduce((A,_)=>(m.hasOwnProperty(_)&&(A[_]=m[_]),A),{}))}resolveDependencies(m){const T={},k={};return Object.keys(m.dependencies||{}).forEach(I=>{const x=m.dependencies[I];Array.isArray(x)?x.forEach(A=>{T[A]?T[A].push(I):T[A]=[I]}):k[I]=x}),{propDeps:T,schemaDeps:k}}guessSchemaType(m){const T=null==m?void 0:m.type;return!T&&null!=m&&m.properties?["object"]:Array.isArray(T)?1===T.length?T:2===T.length&&-1!==T.indexOf("null")?T.sort(k=>"null"==k?1:-1):T:T?[T]:[]}addValidator(m,T,k){m.validators=m.validators||{},m.validators[T]=k}isEnum(m){return!!m.enum||m.anyOf&&m.anyOf.every(w)||m.oneOf&&m.oneOf.every(w)||m.uniqueItems&&m.items&&!Array.isArray(m.items)&&this.isEnum(m.items)}toEnumOptions(m){if(m.enum)return m.enum.map(k=>({value:k,label:k}));const T=k=>{const I=k.hasOwnProperty("const")?k.const:k.enum[0],x={value:I,label:k.title||I};return k.readOnly&&(x.disabled=!0),x};return m.anyOf?m.anyOf.map(T):m.oneOf?m.oneOf.map(T):this.toEnumOptions(m.items)}isFieldValid(m,T,k,I){m._schemasFields||(Object.defineProperty(m,"_schemasFields",{enumerable:!1,writable:!0,configurable:!0}),m._schemasFields={});let x=m._schemasFields[T];const A=m.model?(0,S.kg)(m.model):m.fieldArray?[]:{};return x?(x.model=A,m.options.build(x)):x=m._schemasFields[T]=m.options.build({form:Array.isArray(A)?new D.Oe([]):new D.cw({}),fieldGroup:[this._toFieldConfig(k[T],(0,g.Z)((0,g.Z)({},I),{},{resetOnHide:!0,ignoreDefault:!0,map:null,strict:!0}))],model:A,options:{}}),x.form.valid}mergeFields(m,T){for(let k in T){const I="templateOptions"===k?"props":k;z(m[I])&&z(T[k])?m[I]=this.mergeFields(m[I],T[k]):null!=T[k]&&(m[I]=T[k])}return m}}return O.\u0275fac=function(m){return new(m||O)},O.\u0275prov=u.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})()},5545:(Ae,pe,F)=>{F.d(pe,{Du:()=>se,Hl:()=>te,JD:()=>Re,M2:()=>Ve,T7:()=>je,X0:()=>Xe,_S:()=>Z,cw:()=>we,fS:()=>ge,hv:()=>Be,kg:()=>ee,n2:()=>Ne});var v=F(9376),e=F(91),g=F(1413),u=F(5879),D=F(6223),S=F(2664),H=F(3019),q=F(2096),ue=F(5592),me=F(8645),J=F(3997),z=F(7921),y=F(3620),w=F(2181),j=F(4664),$=F(8180),O=F(9397),K=F(7398),m=F(6814),T=F(6593);const k=["expression"],I=["errorPath"],x=["container"];function A(c,r){}function _(c,r){1&c&&u._UZ(0,"formly-field",1),2&c&&u.Q6J("field",r.$implicit)}const C=["*"],P=["fieldComponent"];function B(c,r,n){if(r.id)return r.id;let i=r.type;return!i&&r.template&&(i="template"),i instanceof u.DyG&&(i=i.prototype.constructor.name),[c,i,r.key,n].join("_")}function Z(c){return!ne(c.key)&&""!==c.key}function R(c){var r;if(!Z(c))return[];if((null===(r=c._keyPath)||void 0===r?void 0:r.key)!==c.key){let n=[];if("string"==typeof c.key){const i=-1===c.key.indexOf("[")?c.key:c.key.replace(/\[(\w+)\]/g,".$1");n=-1!==i.indexOf(".")?i.split("."):[i]}else n=Array.isArray(c.key)?c.key.slice(0):[`${c.key}`];N(c,"_keyPath",{key:c.key,path:n})}return c._keyPath.path.slice(0)}const V=["required","pattern","minLength","maxLength","min","max"];function L(c,r){let n=R(c);if(0===n.length)return;let i=c;for(;i.parent;)i=i.parent,n=[...R(i),...n];if(void 0===r&&c.resetOnHide){const s=n.pop();delete n.reduce((d,h)=>d[h]||{},i.model)[s]}else!function de(c,r,n){for(let i=0;i<r.length-1;i++){const s=r[i];(!c[s]||!G(c[s]))&&(c[s]=/^\d+$/.test(r[i+1])?[]:{}),c=c[s]}c[r[r.length-1]]=ee(n)}(i.model,n,r)}function te(c){let r=c.parent?c.parent.model:c.model;for(const n of R(c)){if(!r)return r;r=r[n]}return r}function se(c,...r){return r.forEach(n=>{for(const i in n)ne(c[i])||Je(c[i])?c[i]=ee(n[i]):Se(c[i],n[i])&&se(c[i],n[i])}),c}function ne(c){return null==c}function ye(c){return void 0===c}function Je(c){return""===c}function be(c){return"function"==typeof c}function Se(c,r){return G(c)&&G(r)&&Object.getPrototypeOf(c)===Object.getPrototypeOf(r)&&!(Array.isArray(c)||Array.isArray(r))}function G(c){return null!=c&&"object"==typeof c}function ee(c){if(!G(c)||(0,S.b)(c)||c instanceof u.Rgc||c.changingThisBreaksApplicationSecurity||-1!==["RegExp","FileList","File","Blob"].indexOf(c.constructor.name))return c;if(c instanceof Set)return new Set(c);if(c instanceof Map)return new Map(c);if(c._isAMomentObject&&be(c.clone))return c.clone();if(c instanceof D.TO)return null;if(c instanceof Date)return new Date(c.getTime());if(Array.isArray(c))return c.slice(0).map(i=>ee(i));const r=Object.getPrototypeOf(c);let n=Object.create(r);return n=Object.setPrototypeOf(n,r),Object.keys(c).reduce((i,s)=>{const p=Object.getOwnPropertyDescriptor(c,s);return p.get?Object.defineProperty(i,s,p):i[s]=ee(c[s]),i},n)}function N(c,r,n){Object.defineProperty(c,r,{enumerable:!1,writable:!0,configurable:!0}),c[r]=n}function Ce(c,r,n){let i=[];const s=()=>{i.forEach(d=>d()),i=[]},p=W(c,r,({firstChange:d,currentValue:h})=>{!d&&n(),s(),G(h)&&"Object"===h.constructor.name&&Object.keys(h).forEach(E=>{i.push(Ce(c,[...r,E],n))})});return()=>{p.unsubscribe(),s()}}function W(c,r,n){c._observers||N(c,"_observers",{});let i=c;for(let h=0;h<r.length-1;h++)(!i[r[h]]||!G(i[r[h]]))&&(i[r[h]]=/^\d+$/.test(r[h+1])?[]:{}),i=i[r[h]];const s=r[r.length-1],p=r.join(".");c._observers[p]||(c._observers[p]={value:i[s],onChange:[]});const d=c._observers[p];if(i[s]!==d.value&&(d.value=i[s]),-1===d.onChange.indexOf(n)&&(d.onChange.push(n),n({currentValue:d.value,firstChange:!0}),d.onChange.length>=1&&G(i))){const{enumerable:h}=Object.getOwnPropertyDescriptor(i,s)||{enumerable:!0};Object.defineProperty(i,s,{enumerable:h,configurable:!0,get:()=>d.value,set:E=>{if(E!==d.value){const Y=d.value;d.value=E,d.onChange.forEach(Q=>Q({previousValue:Y,currentValue:E,firstChange:!1}))}}})}return{setValue(h){if(h===d.value)return;const E=d.value;d.value=h,d.onChange.forEach(Y=>{Y!==n&&Y({previousValue:E,currentValue:h,firstChange:!1})})},unsubscribe(){d.onChange=d.onChange.filter(h=>h!==n),0===d.onChange.length&&delete c._observers[p]}}}function Oe(c,r){if(r=Array.isArray(r)?r.join("."):r,c.fieldGroup)for(let n=0,i=c.fieldGroup.length;n<i;n++){const s=c.fieldGroup[n],p=Array.isArray(s.key)?s.key.join("."):s.key;if(p===r)return s;if(s.fieldGroup&&(ne(p)||0===r.indexOf(`${p}.`))){const d=Oe(s,ne(p)?r:r.slice(p.length+1));if(d)return d}}}function ke(c){var r;null===(r=c._componentRefs)||void 0===r||r.forEach(n=>{n instanceof u.UuU?n.injector.get(u.sBO).markForCheck():n.markForCheck()})}const fe=new u.OlP("FORMLY_CONFIG");let ae=(()=>{class c{constructor(){this.types={},this.validators={},this.wrappers={},this.messages={},this.extras={checkExpressionOn:"modelChange",lazyRender:!0,resetFieldOnHide:!0,renderFormlyFieldElement:!0,showError(n){var i,s,p,d;return(null===(i=n.formControl)||void 0===i?void 0:i.invalid)&&((null===(s=n.formControl)||void 0===s?void 0:s.touched)||(null===(p=n.options.parentForm)||void 0===p?void 0:p.submitted)||!(null===(d=n.field.validation)||void 0===d||!d.show))}},this.extensions={},this.presets={},this.extensionsByPriority={}}addConfig(n){n.types&&n.types.forEach(i=>this.setType(i)),n.validators&&n.validators.forEach(i=>this.setValidator(i)),n.wrappers&&n.wrappers.forEach(i=>this.setWrapper(i)),n.validationMessages&&n.validationMessages.forEach(i=>this.addValidatorMessage(i.name,i.message)),n.extensions&&this.setSortedExtensions(n.extensions),n.extras&&(this.extras=(0,g.Z)((0,g.Z)({},this.extras),n.extras)),n.presets&&(this.presets=(0,g.Z)((0,g.Z)({},this.presets),n.presets.reduce((i,s)=>(0,g.Z)((0,g.Z)({},i),{},{[s.name]:s.config}),{})))}setType(n){Array.isArray(n)?n.forEach(i=>this.setType(i)):(this.types[n.name]||(this.types[n.name]={name:n.name}),["component","extends","defaultOptions","wrappers"].forEach(i=>{n.hasOwnProperty(i)&&(this.types[n.name][i]=n[i])}))}getType(n,i=!1){if(n instanceof u.DyG)return{component:n,name:n.prototype.constructor.name};if(!this.types[n]){if(i)throw new Error(`[Formly Error] The type "${n}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return null}return this.mergeExtendedType(n),this.types[n]}getMergedField(n={}){var i;const s=this.getType(n.type);if(!s)return;s.defaultOptions&&se(n,s.defaultOptions);const p=s.extends&&this.getType(s.extends).defaultOptions;p&&se(n,p),null!=n&&n.optionsTypes&&n.optionsTypes.forEach(h=>{const E=this.getType(h).defaultOptions;E&&se(n,E)});const d=this.resolveFieldTypeRef(n);null!=d&&null!==(i=d.instance)&&void 0!==i&&i.defaultOptions&&se(n,d.instance.defaultOptions),!n.wrappers&&s.wrappers&&(n.wrappers=[...s.wrappers])}resolveFieldTypeRef(n={}){const i=this.getType(n.type);if(!i)return null;if(!i.component||i._componentRef)return i._componentRef;const{_viewContainerRef:s,_injector:p}=n.options;if(!s||!p)return null;const d=s.createComponent(i.component,{injector:p});N(i,"_componentRef",d);try{d.destroy()}catch(h){console.error(`An error occurred while destroying the Formly component type "${n.type}"`,h)}return i._componentRef}setWrapper(n){this.wrappers[n.name]=n,n.types&&n.types.forEach(i=>{this.setTypeWrapper(i,n.name)})}getWrapper(n){if(n instanceof u.DyG)return{component:n,name:n.prototype.constructor.name};if(!this.wrappers[n])throw new Error(`[Formly Error] The wrapper "${n}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return this.wrappers[n]}setTypeWrapper(n,i){this.types[n]||(this.types[n]={}),this.types[n].wrappers||(this.types[n].wrappers=[]),-1===this.types[n].wrappers.indexOf(i)&&this.types[n].wrappers.push(i)}setValidator(n){this.validators[n.name]=n}getValidator(n){if(!this.validators[n])throw new Error(`[Formly Error] The validator "${n}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return this.validators[n]}addValidatorMessage(n,i){this.messages[n]=i}getValidatorMessage(n){return this.messages[n]}setSortedExtensions(n){n.forEach(i=>{var s;const p=null!==(s=i.priority)&&void 0!==s?s:1;this.extensionsByPriority[p]=(0,g.Z)((0,g.Z)({},this.extensionsByPriority[p]),{},{[i.name]:i.extension})}),this.extensions=Object.keys(this.extensionsByPriority).map(Number).sort((i,s)=>i-s).reduce((i,s)=>(0,g.Z)((0,g.Z)({},i),this.extensionsByPriority[s]),{})}mergeExtendedType(n){if(!this.types[n].extends)return;const i=this.getType(this.types[n].extends);this.types[n].component||(this.types[n].component=i.component),this.types[n].wrappers||(this.types[n].wrappers=i.wrappers)}}return c.\u0275fac=function(n){return new(n||c)},c.\u0275prov=u.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),ve=(()=>{class c{constructor(n,i,s,p){this.config=n,this.injector=i,this.viewContainerRef=s,this.parentForm=p}buildForm(n,i=[],s,p){this.build({fieldGroup:i,model:s,form:n,options:p})}build(n){if(!this.config.extensions.core)throw new Error("NgxFormly: missing `forRoot()` call. use `forRoot()` when registering the `FormlyModule`.");n.parent?this._build(n):(this._setOptions(n),function M(c,r){const n=c._updateTreeValidity.bind(c);c._updateTreeValidity=()=>{},r(),c._updateTreeValidity=n}(n.form,()=>{var i,s;this._build(n);const p=n.options;null===(i=p.checkExpressions)||void 0===i||i.call(p,n,!0),null===(s=p.detectChanges)||void 0===s||s.call(p,n)}))}_build(n){var i;if(!n)return;const s=Object.values(this.config.extensions);s.forEach(p=>{var d;return null===(d=p.prePopulate)||void 0===d?void 0:d.call(p,n)}),s.forEach(p=>{var d;return null===(d=p.onPopulate)||void 0===d?void 0:d.call(p,n)}),null===(i=n.fieldGroup)||void 0===i||i.forEach(p=>this._build(p)),s.forEach(p=>{var d;return null===(d=p.postPopulate)||void 0===d?void 0:d.call(p,n)})}_setOptions(n){n.form=n.form||new D.cw({}),n.model=n.model||{},n.options=n.options||{};const i=n.options;i._viewContainerRef||N(i,"_viewContainerRef",this.viewContainerRef),i._injector||N(i,"_injector",this.injector),i.build||(i._buildForm=()=>{console.warn("Formly: 'options._buildForm' is deprecated since v6.0, use 'options.build' instead."),this.build(n)},i.build=(s=n)=>(this.build(s),s)),!i.parentForm&&this.parentForm&&(N(i,"parentForm",this.parentForm),W(i,["parentForm","submitted"],({firstChange:s})=>{s||(i.checkExpressions(n),i.detectChanges(n))}))}}return c.\u0275fac=function(n){return new(n||c)(u.LFG(ae),u.LFG(u.zs3),u.LFG(u.s_b,8),u.LFG(D.sg,8))},c.\u0275prov=u.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();function Te(c,r=!1){const n=c.formControl,i=n._fields?n._fields.indexOf(c):-1;-1!==i&&n._fields.splice(i,1);const s=n.parent;if(!s)return;const p={emitEvent:r};if(s instanceof D.Oe){const d=s.controls.findIndex(h=>h===n);-1!==d&&s.removeAt(d,p)}else if(s instanceof D.cw){const d=R(c),h=d[d.length-1];s.get([h])===n&&s.removeControl(h,p)}n.setParent(null)}function De(c){var r;return c.formControl?c.formControl:!1===c.shareFormControl?null:null===(r=c.form)||void 0===r?void 0:r.get(R(c))}function Me(c,r,n=!1){if((r=r||c.formControl)._fields||N(r,"_fields",[]),-1===r._fields.indexOf(c)&&r._fields.push(c),!c.formControl&&r){N(c,"formControl",r),r.setValidators(null),r.setAsyncValidators(null),c.props.disabled=!!c.props.disabled;const h=W(c,["props","disabled"],({firstChange:E,currentValue:Y})=>{E||(Y?c.formControl.disable():c.formControl.enable())});r instanceof D.NI&&r.registerOnDisabledChange(h.setValue)}if(!c.form||!Z(c))return;let i=c.form;const s=R(c),p=te(c);(!ne(r.value)||!ne(p))&&r.value!==p&&r instanceof D.NI&&r.patchValue(p);for(let h=0;h<s.length-1;h++){const E=s[h];i.get([E])||i.setControl(E,new D.cw({}),{emitEvent:n}),i=i.get([E])}const d=s[s.length-1];!c._hide&&i.get([d])!==r&&i.setControl(d,r,{emitEvent:n})}function he(c,r=!1){const n=c.status,i=c.value;c.updateValueAndValidity({emitEvent:!1,onlySelf:r}),n!==c.status&&c.statusChanges.emit(c.status),i!==c.value&&c.valueChanges.emit(c.value)}function Ie(c){null==c||delete c._fields,c.setValidators(null),c.setAsyncValidators(null),(c instanceof D.cw||c instanceof D.Oe)&&Object.values(c.controls).forEach(r=>Ie(r))}let Le=(()=>{class c{constructor(n){this.ref=n}ngOnChanges(){this.name=this.name||"formly-group"}}return c.\u0275fac=function(n){return new(n||c)(u.Y36(u.Rgc))},c.\u0275dir=u.lG2({type:c,selectors:[["","formlyTemplate",""]],inputs:{name:["formlyTemplate","name"]},features:[u.TTD]}),c})(),Ee=(()=>{class c{}return c.\u0275fac=function(n){return new(n||c)},c.\u0275prov=u.Yz7({token:c,factory:c.\u0275fac}),c})(),we=(()=>{class c{constructor(n,i,s,p,d){this.config=n,this.renderer=i,this._elementRef=s,this.hostContainerRef=p,this.form=d,this.hostObservers=[],this.componentRefs=[],this.hooksObservers=[],this.detectFieldBuild=!1,this.valueChangesUnsubscribe=()=>{}}get containerRef(){return this.config.extras.renderFormlyFieldElement?this.viewContainerRef:this.hostContainerRef}get elementRef(){var n;return this.config.extras.renderFormlyFieldElement?this._elementRef:(null===(n=this.componentRefs)||void 0===n?void 0:n[0])instanceof u.UuU?this.componentRefs[0].location:null}ngAfterContentInit(){this.triggerHook("afterContentInit")}ngAfterViewInit(){this.triggerHook("afterViewInit")}ngDoCheck(){this.detectFieldBuild&&this.field&&this.field.options&&this.render()}ngOnInit(){this.triggerHook("onInit")}ngOnChanges(n){this.triggerHook("onChanges",n)}ngOnDestroy(){this.resetRefs(this.field),this.hostObservers.forEach(n=>n.unsubscribe()),this.hooksObservers.forEach(n=>n()),this.valueChangesUnsubscribe(),this.triggerHook("onDestroy")}renderField(n,i,s=[]){var p,d;if(this.containerRef===n&&(this.resetRefs(this.field),this.containerRef.clear(),s=null===(d=this.field)||void 0===d?void 0:d.wrappers),(null===(p=s)||void 0===p?void 0:p.length)>0){const[E,...Y]=s,{component:Q}=this.config.getWrapper(E),X=n.createComponent(Q);this.attachComponentRef(X,i),W(X.instance,["fieldComponent"],({currentValue:le,previousValue:ce,firstChange:Fe})=>{if(le){if(ce&&ce._lContainer===le._lContainer)return;const _e=ce?ce.detach():null;_e&&!_e.destroyed?le.insert(_e):this.renderField(le,i,Y),!Fe&&X.changeDetectorRef.detectChanges()}})}else if(null!=i&&i.type){var h;const E=null===(h=this.form)||void 0===h||null===(h=h.templates)||void 0===h?void 0:h.find(Q=>Q.name===i.type);let Y;if(E)Y=n.createEmbeddedView(E.ref,{$implicit:i});else{const{component:Q}=this.config.getType(i.type,!0);Y=n.createComponent(Q)}this.attachComponentRef(Y,i)}}triggerHook(n,i){var s;if(("onInit"===n||"onChanges"===n&&i.field&&!i.field.firstChange)&&(this.valueChangesUnsubscribe=this.fieldChanges(this.field)),null!==(s=this.field)&&void 0!==s&&null!==(s=s.hooks)&&void 0!==s&&s[n]&&(!i||i.field)){const p=this.field.hooks[n](this.field);if((0,S.b)(p)&&-1!==["onInit","afterContentInit","afterViewInit"].indexOf(n)){const d=p.subscribe();this.hooksObservers.push(()=>d.unsubscribe())}}"onChanges"===n&&i.field&&(this.resetRefs(i.field.previousValue),this.render())}attachComponentRef(n,i){this.componentRefs.push(n),i._componentRefs.push(n),n instanceof u.UuU&&Object.assign(n.instance,{field:i})}render(){if(this.field){if(!this.field.options)return void(this.detectFieldBuild=!0);this.detectFieldBuild=!1,this.hostObservers.forEach(n=>n.unsubscribe()),this.hostObservers=[W(this.field,["hide"],({firstChange:n,currentValue:i})=>{const s=this.containerRef;!1===this.config.extras.lazyRender?(n&&this.renderField(s,this.field),(!n||n&&i)&&this.elementRef&&this.renderer.setStyle(this.elementRef.nativeElement,"display",i?"none":"")):i?(s.clear(),this.field.className&&this.renderer.removeAttribute(this.elementRef.nativeElement,"class")):(this.renderField(s,this.field),this.field.className&&this.renderer.setAttribute(this.elementRef.nativeElement,"class",this.field.className)),!n&&this.field.options.detectChanges(this.field)}),W(this.field,["className"],({firstChange:n,currentValue:i})=>{(!n||n&&i)&&(!this.config.extras.lazyRender||!0!==this.field.hide)&&this.elementRef&&this.renderer.setAttribute(this.elementRef.nativeElement,"class",i)}),...["touched","pristine","status"].map(n=>W(this.field,["formControl",n],({firstChange:i})=>!i&&ke(this.field)))]}}resetRefs(n){n&&(n._localFields?n._localFields=[]:N(this.field,"_localFields",[]),n._componentRefs?n._componentRefs=n._componentRefs.filter(i=>-1===this.componentRefs.indexOf(i)):N(this.field,"_componentRefs",[])),this.componentRefs=[]}fieldChanges(n){if(this.valueChangesUnsubscribe(),!n)return()=>{};const i=[Ce(n,["props"],()=>n.options.detectChanges(n))];n.options&&i.push(Ce(n.options,["formState"],()=>n.options.detectChanges(n)));for(const p of Object.keys(n._expressions||{})){const d=W(n,["_expressions",p],({currentValue:h,previousValue:E})=>{null!=E&&E.subscription&&(E.subscription.unsubscribe(),E.subscription=null),(0,S.b)(h.value$)&&(h.subscription=h.value$.subscribe())});i.push(()=>{var h;null!==(h=n._expressions[p])&&void 0!==h&&h.subscription&&n._expressions[p].subscription.unsubscribe(),d.unsubscribe()})}for(const p of[["focus"],["template"],["fieldGroupClassName"],["validation","show"]]){const d=W(n,p,({firstChange:h})=>!h&&n.options.detectChanges(n));i.push(()=>d.unsubscribe())}if(n.formControl&&!n.fieldGroup){const p=n.formControl;let d=p.valueChanges.pipe((0,J.x)((Q,X)=>!(Q!==X||Array.isArray(Q)||G(Q))));p.value!==te(n)&&(d=d.pipe((0,z.O)(p.value)));const{updateOn:h,debounce:E}=n.modelOptions;(!h||"change"===h)&&(null==E?void 0:E.default)>0&&(d=p.valueChanges.pipe((0,y.b)(E.default)));const Y=d.subscribe(Q=>{var X,le;(null===(X=p._fields)||void 0===X?void 0:X.length)>1&&p instanceof D.NI&&p.patchValue(Q,{emitEvent:!1,onlySelf:!0}),null===(le=n.parsers)||void 0===le||le.forEach(ce=>Q=ce(Q)),Q===n.formControl.value?(Z(n)&&L(n,Q),n.options.fieldChanges.next({value:Q,field:n,type:"valueChanges"})):n.formControl.setValue(Q)});i.push(()=>Y.unsubscribe())}let s=[];return W(n,["_localFields"],({currentValue:p})=>{s.forEach(d=>d()),s=(p||[]).map(d=>this.fieldChanges(d))}),()=>{i.forEach(p=>p()),s.forEach(p=>p())}}}return c.\u0275fac=function(n){return new(n||c)(u.Y36(ae),u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(u.s_b),u.Y36(Ee,8))},c.\u0275cmp=u.Xpm({type:c,selectors:[["formly-field"]],viewQuery:function(n,i){if(1&n&&u.Gf(x,7,u.s_b),2&n){let s;u.iGM(s=u.CRH())&&(i.viewContainerRef=s.first)}},inputs:{field:"field"},features:[u.TTD],decls:2,vars:0,consts:[["container",""]],template:function(n,i){1&n&&u.YNc(0,A,0,0,"ng-template",null,0,u.W1O)},styles:["[_nghost-%COMP%]:empty{display:none}"]}),c})(),je=(()=>{class c{constructor(n,i,s,p){this.builder=n,this.config=i,this.ngZone=s,this.fieldTemplates=p,this.modelChange=new u.vpe,this.field={type:"formly-group"},this._modelChangeValue={},this.valueChangesUnsubscribe=()=>{}}set form(n){this.field.form=n}get form(){return this.field.form}set model(n){this.config.extras.immutable&&this._modelChangeValue===n||this.setField({model:n})}get model(){return this.field.model}set fields(n){this.setField({fieldGroup:n})}get fields(){return this.field.fieldGroup}set options(n){this.setField({options:n})}get options(){return this.field.options}set templates(n){this.fieldTemplates.templates=n}ngDoCheck(){"changeDetectionCheck"===this.config.extras.checkExpressionOn&&this.checkExpressionChange()}ngOnChanges(n){n.fields&&this.form&&Ie(this.form),(n.fields||n.form||n.model&&this._modelChangeValue!==n.model.currentValue)&&(this.valueChangesUnsubscribe(),this.builder.build(this.field),this.valueChangesUnsubscribe=this.valueChanges())}ngOnDestroy(){this.valueChangesUnsubscribe()}checkExpressionChange(){var n,i;null===(n=(i=this.field.options).checkExpressions)||void 0===n||n.call(i,this.field)}valueChanges(){this.valueChangesUnsubscribe();const n=this.field.options.fieldChanges.pipe((0,w.h)(({field:i,type:s})=>Z(i)&&"valueChanges"===s),(0,j.w)(()=>this.ngZone.onStable.asObservable().pipe((0,$.q)(1)))).subscribe(()=>this.ngZone.runGuarded(()=>{this.checkExpressionChange(),this.modelChange.emit(this._modelChangeValue=ee(this.model))}));return()=>n.unsubscribe()}setField(n){this.config.extras.immutable?this.field=(0,g.Z)((0,g.Z)({},this.field),ee(n)):Object.keys(n).forEach(i=>this.field[i]=n[i])}}return c.\u0275fac=function(n){return new(n||c)(u.Y36(ve),u.Y36(ae),u.Y36(u.R0b),u.Y36(Ee))},c.\u0275cmp=u.Xpm({type:c,selectors:[["formly-form"]],contentQueries:function(n,i,s){if(1&n&&u.Suo(s,Le,4),2&n){let p;u.iGM(p=u.CRH())&&(i.templates=p)}},inputs:{form:"form",model:"model",fields:"fields",options:"options"},outputs:{modelChange:"modelChange"},features:[u._Bn([ve,Ee]),u.TTD],decls:1,vars:1,consts:[[3,"field"]],template:function(n,i){1&n&&u._UZ(0,"formly-field",0),2&n&&u.Q6J("field",i.field)},dependencies:[we],encapsulation:2,changeDetection:0}),c})(),Re=(()=>{class c{constructor(n,i,s){this.renderer=n,this.elementRef=i,this.uiAttributesCache={},this.uiEvents={listeners:[],events:["click","keyup","keydown","keypress","focus","blur","change"],callback:(p,d)=>{switch(p){case"focus":return this.onFocus(d);case"blur":return this.onBlur(d);case"change":return this.onChange(d);default:return this.props[p](this.field,d)}}},this.document=s}get props(){return this.field.props||{}}get fieldAttrElements(){var n;return(null===(n=this.field)||void 0===n?void 0:n._elementRefs)||[]}ngOnChanges(n){var i;n.field&&(this.field.name&&this.setAttribute("name",this.field.name),this.uiEvents.listeners.forEach(s=>s()),this.uiEvents.events.forEach(s=>{var p;(null!==(p=this.props)&&void 0!==p&&p[s]||-1!==["focus","blur","change"].indexOf(s))&&this.uiEvents.listeners.push(this.renderer.listen(this.elementRef.nativeElement,s,d=>this.uiEvents.callback(s,d)))}),null!==(i=this.props)&&void 0!==i&&i.attributes&&W(this.field,["props","attributes"],({currentValue:s,previousValue:p})=>{p&&Object.keys(p).forEach(d=>this.removeAttribute(d)),s&&Object.keys(s).forEach(d=>{null!=s[d]&&this.setAttribute(d,s[d])})}),this.detachElementRef(n.field.previousValue),this.attachElementRef(n.field.currentValue),1===this.fieldAttrElements.length&&(!this.id&&this.field.id&&this.setAttribute("id",this.field.id),this.focusObserver=W(this.field,["focus"],({currentValue:s})=>{this.toggleFocus(s)}))),n.id&&this.setAttribute("id",this.id)}ngDoCheck(){if(!this.uiAttributes){const n=this.elementRef.nativeElement;this.uiAttributes=[...V,"tabindex","placeholder","readonly","disabled","step"].filter(i=>!n.hasAttribute||!n.hasAttribute(i))}this.uiAttributes.forEach(n=>{const i=this.props[n];this.uiAttributesCache[n]!==i&&(!this.props.attributes||!this.props.attributes.hasOwnProperty(n.toLowerCase()))&&(this.uiAttributesCache[n]=i,i||0===i?this.setAttribute(n,!0===i?n:`${i}`):this.removeAttribute(n))})}ngOnDestroy(){var n;this.uiEvents.listeners.forEach(i=>i()),this.detachElementRef(this.field),null===(n=this.focusObserver)||void 0===n||n.unsubscribe()}toggleFocus(n){const i=this.fieldAttrElements?this.fieldAttrElements[0]:null;if(!i||!i.nativeElement.focus)return;const s=!!this.document.activeElement&&this.fieldAttrElements.some(({nativeElement:p})=>this.document.activeElement===p||p.contains(this.document.activeElement));n&&!s?Promise.resolve().then(()=>i.nativeElement.focus()):!n&&s&&Promise.resolve().then(()=>i.nativeElement.blur())}onFocus(n){var i,s,p;null===(i=this.focusObserver)||void 0===i||i.setValue(!0),null===(s=(p=this.props).focus)||void 0===s||s.call(p,this.field,n)}onBlur(n){var i,s,p;null===(i=this.focusObserver)||void 0===i||i.setValue(!1),null===(s=(p=this.props).blur)||void 0===s||s.call(p,this.field,n)}onHostChange(n){n instanceof Event||this.onChange(n)}onChange(n){var i,s,p;null===(i=(s=this.props).change)||void 0===i||i.call(s,this.field,n),null===(p=this.field.formControl)||void 0===p||p.markAsDirty()}attachElementRef(n){var i;n&&(-1===(null===(i=n._elementRefs)||void 0===i?void 0:i.indexOf(this.elementRef))?n._elementRefs.push(this.elementRef):N(n,"_elementRefs",[this.elementRef]))}detachElementRef(n){const i=null!=n&&n._elementRefs?this.fieldAttrElements.indexOf(this.elementRef):-1;-1!==i&&n._elementRefs.splice(i,1)}setAttribute(n,i){this.renderer.setAttribute(this.elementRef.nativeElement,n,i)}removeAttribute(n){this.renderer.removeAttribute(this.elementRef.nativeElement,n)}}return c.\u0275fac=function(n){return new(n||c)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(m.K0))},c.\u0275dir=u.lG2({type:c,selectors:[["","formlyAttributes",""]],hostBindings:function(n,i){1&n&&u.NdJ("change",function(p){return i.onHostChange(p)})},inputs:{field:["formlyAttributes","field"],id:"id"},features:[u.TTD]}),c})(),ge=(()=>{class c{constructor(){this.field={}}set controls(n){this.field._localFields=n.map(s=>s.control._fields||[]).flat().filter(s=>s.formControl!==this.field.formControl)}get model(){return this.field.model}get form(){return this.field.form}get options(){return this.field.options}get key(){return this.field.key}get formControl(){return this.field.formControl}get props(){return this.field.props||{}}get to(){return this.props}get showError(){return this.options.showError(this)}get id(){return this.field.id}get formState(){var n;return(null===(n=this.options)||void 0===n?void 0:n.formState)||{}}}return c.\u0275fac=function(n){return new(n||c)},c.\u0275dir=u.lG2({type:c,viewQuery:function(n,i){if(1&n&&u.Gf(D.a5,5),2&n){let s;u.iGM(s=u.CRH())&&(i.controls=s)}},inputs:{field:"field"}}),c})(),Ue=(()=>{class c extends ge{}return c.\u0275fac=function(){let r;return function(i){return(r||(r=u.n5z(c)))(i||c)}}(),c.\u0275cmp=u.Xpm({type:c,selectors:[["formly-group"]],hostVars:2,hostBindings:function(n,i){2&n&&u.Tol(i.field.fieldGroupClassName||"")},features:[u.qOj],ngContentSelectors:C,decls:2,vars:1,consts:[[3,"field",4,"ngFor","ngForOf"],[3,"field"]],template:function(n,i){1&n&&(u.F$t(),u.YNc(0,_,1,1,"formly-field",0),u.Hsn(1)),2&n&&u.Q6J("ngForOf",i.field.fieldGroup)},dependencies:[we,m.sg],encapsulation:2,changeDetection:0}),c})(),Ve=(()=>{class c{constructor(n){this.config=n}ngOnChanges(){const n=V.map(i=>`templateOptions.${i}`);this.errorMessage$=(0,H.T)(this.field.formControl.statusChanges,this.field.options?this.field.options.fieldChanges.pipe((0,w.h)(({field:i,type:s,property:p})=>i===this.field&&"expressionChanges"===s&&(-1!==p.indexOf("validation")||-1!==n.indexOf(p)))):(0,q.of)(null)).pipe((0,z.O)(null),(0,j.w)(()=>(0,S.b)(this.errorMessage)?this.errorMessage:(0,q.of)(this.errorMessage)))}get errorMessage(){const n=this.field.formControl;for(const d in n.errors)if(n.errors.hasOwnProperty(d)){var i,s,p;let h=this.config.getValidatorMessage(d);if(G(n.errors[d])){if(n.errors[d].errorPath)return;n.errors[d].message&&(h=n.errors[d].message)}return null!==(i=this.field.validation)&&void 0!==i&&null!==(i=i.messages)&&void 0!==i&&i[d]&&(h=this.field.validation.messages[d]),null!==(s=this.field.validators)&&void 0!==s&&null!==(s=s[d])&&void 0!==s&&s.message&&(h=this.field.validators[d].message),null!==(p=this.field.asyncValidators)&&void 0!==p&&null!==(p=p[d])&&void 0!==p&&p.message&&(h=this.field.asyncValidators[d].message),"function"==typeof h?h(n.errors[d],this.field):h}}}return c.\u0275fac=function(n){return new(n||c)(u.Y36(ae))},c.\u0275cmp=u.Xpm({type:c,selectors:[["formly-validation-message"]],inputs:{field:"field"},features:[u.TTD],decls:2,vars:3,template:function(n,i){1&n&&(u._uU(0),u.ALo(1,"async")),2&n&&u.Oqu(u.lcZ(1,1,i.errorMessage$))},dependencies:[m.Ov],encapsulation:2,changeDetection:0}),c})(),Be=(()=>{class c extends ge{onPopulate(n){Z(n)&&Me(n,De(n)||new D.Oe([],{updateOn:n.modelOptions.updateOn})),n.fieldGroup=n.fieldGroup||[];const i=Array.isArray(n.model)?n.model.length:0;if(n.fieldGroup.length>i)for(let s=n.fieldGroup.length-1;s>=i;--s)Te(n.fieldGroup[s],!0),n.fieldGroup.splice(s,1);for(let s=n.fieldGroup.length;s<i;s++){const p=(0,g.Z)((0,g.Z)({},ee("function"==typeof n.fieldArray?n.fieldArray(n):n.fieldArray)),{},{key:`${s}`});n.fieldGroup.push(p)}}add(n,i,{markAsDirty:s}={markAsDirty:!0}){n=null==n?this.field.fieldGroup.length:n,this.model||L(this.field,[]),this.model.splice(n,0,i?ee(i):void 0),this._build(),s&&this.formControl.markAsDirty()}remove(n,{markAsDirty:i}={markAsDirty:!0}){this.model.splice(n,1);const s=this.field.fieldGroup[n];this.field.fieldGroup.splice(n,1),this.field.fieldGroup.forEach((p,d)=>p.key=`${d}`),Te(s,!0),this._build(),i&&this.formControl.markAsDirty()}_build(){var n;(null!==(n=this.field.formControl._fields)&&void 0!==n?n:[this.field]).forEach(s=>this.options.build(s)),this.options.fieldChanges.next({field:this.field,value:te(this.field),type:"valueChanges"})}}return c.\u0275fac=function(){let r;return function(i){return(r||(r=u.n5z(c)))(i||c)}}(),c.\u0275dir=u.lG2({type:c,features:[u.qOj]}),c})(),Ne=(()=>{class c extends ge{set _staticContent(n){this.fieldComponent=n}}return c.\u0275fac=function(){let r;return function(i){return(r||(r=u.n5z(c)))(i||c)}}(),c.\u0275dir=u.lG2({type:c,viewQuery:function(n,i){if(1&n&&(u.Gf(P,5,u.s_b),u.Gf(P,7,u.s_b)),2&n){let s;u.iGM(s=u.CRH())&&(i.fieldComponent=s.first),u.iGM(s=u.CRH())&&(i._staticContent=s.first)}},features:[u.qOj]}),c})(),Ye=(()=>{class c extends ge{constructor(n){super(),this.sanitizer=n,this.innerHtml={}}get template(){return this.field&&this.field.template!==this.innerHtml.template&&(this.innerHtml={template:this.field.template,content:this.props.safeHtml?this.sanitizer.bypassSecurityTrustHtml(this.field.template):this.field.template}),this.innerHtml.content}}return c.\u0275fac=function(n){return new(n||c)(u.Y36(T.H7))},c.\u0275cmp=u.Xpm({type:c,selectors:[["formly-template"]],features:[u.qOj],decls:1,vars:1,consts:[[3,"innerHtml"]],template:function(n,i){1&n&&u._UZ(0,"div",0),2&n&&u.Q6J("innerHtml",i.template,u.oJD)},encapsulation:2,changeDetection:0}),c})();class He{onPopulate(r){if(r._expressions)return;N(r,"_expressions",{}),W(r,["hide"],({currentValue:i,firstChange:s})=>{N(r,"_hide",!!i),(!s||s&&!0===i)&&(r.props.hidden=i,r.options._hiddenFieldsForCheck.push(r))}),r.hideExpression&&W(r,["hideExpression"],({currentValue:i})=>{r._expressions.hide=this.parseExpressions(r,"hide","boolean"==typeof i?()=>i:i)});const n=(i,s)=>{"string"==typeof s||be(s)?r._expressions[i]=this.parseExpressions(r,i,s):s instanceof ue.y&&(r._expressions[i]={value$:s.pipe((0,O.b)(p=>{this.evalExpr(r,i,p),r.options.detectChanges(r)}))})};r.expressions=r.expressions||{};for(const i of Object.keys(r.expressions))W(r,["expressions",i],({currentValue:s})=>{n(i,be(s)?(...p)=>s(r,p[3]):s)});r.expressionProperties=r.expressionProperties||{};for(const i of Object.keys(r.expressionProperties))W(r,["expressionProperties",i],({currentValue:s})=>n(i,s))}postPopulate(r){if(!r.parent&&!r.options.checkExpressions){let n=!1;r.options.checkExpressions=(i,s)=>{if(n)return;n=!0;const p=this.checkExpressions(i,s),d=r.options;d._hiddenFieldsForCheck.sort(h=>h.hide?-1:1).forEach(h=>this.changeHideState(h,h.hide,!s)),d._hiddenFieldsForCheck=[],p&&(this.checkExpressions(r),r.options&&r.options.detectChanges&&r.options.detectChanges(r)),n=!1},r.options._checkField=(i,s)=>{console.warn("Formly: 'options._checkField' is deprecated since v6.0, use 'options.checkExpressions' instead."),r.options.checkExpressions(i,s)}}}parseExpressions(r,n,i){let s,p;if(r.parent&&["hide","props.disabled"].includes(n)){const d=h=>"hide"===n?h.hide:h.props.disabled;s=()=>{let h=r.parent;for(;h.parent&&!d(h);)h=h.parent;return d(h)}}return"string"==typeof(i=i||(()=>!1))&&(i=function Ge(c,r){try{return Function(...r,`return ${c};`)}catch(n){console.error(n)}}(i,["model","formState","field"])),{callback:d=>{try{const h=function We(c,r,n){return"function"==typeof c?c.apply(r,n):!!c}(s?(...E)=>s(r)||i(...E):i,{field:r},[r.model,r.options.formState,r,d]);return!(!d&&(p===h||G(h)&&!(0,S.b)(h)&&JSON.stringify(h)===JSON.stringify(p))||(p=h,this.evalExpr(r,n,h),0))}catch(h){throw h.message=`[Formly Error] [Expression "${n}"] ${h.message}`,h}}}}checkExpressions(r,n=!1){var i;if(!r)return!1;let s=!1;if(r._expressions)for(const h of Object.keys(r._expressions)){var p,d;null!==(p=(d=r._expressions[h]).callback)&&void 0!==p&&p.call(d,n)&&(s=!0)}return null===(i=r.fieldGroup)||void 0===i||i.forEach(h=>this.checkExpressions(h,n)&&(s=!0)),s}changeDisabledState(r,n){r.fieldGroup&&r.fieldGroup.filter(i=>!i._expressions.hasOwnProperty("props.disabled")).forEach(i=>this.changeDisabledState(i,n)),Z(r)&&r.props.disabled!==n&&(r.props.disabled=n)}changeHideState(r,n,i){if(r.fieldGroup&&r.fieldGroup.filter(h=>!h._expressions.hide).forEach(h=>this.changeHideState(h,n,i)),r.formControl&&Z(r)){var s;N(r,"_hide",!(!n&&!r.hide));const h=r.formControl;if((null===(s=h._fields)||void 0===s?void 0:s.length)>1&&he(h),!0!==n||h._fields&&!h._fields.every(E=>!!E._hide)){if(!1===n){var p,d;r.resetOnHide&&!ye(r.defaultValue)&&ye(te(r))&&L(r,r.defaultValue),Me(r,void 0,!0),r.resetOnHide&&r.fieldArray&&(null===(p=r.fieldGroup)||void 0===p?void 0:p.length)!==(null===(d=r.model)||void 0===d?void 0:d.length)&&r.options.build(r)}}else Te(r,!0),i&&r.resetOnHide&&(L(r,void 0),r.formControl.reset({value:void 0,disabled:r.formControl.disabled}),r.options.fieldChanges.next({value:void 0,field:r,type:"valueChanges"}),r.fieldGroup&&r.formControl instanceof D.Oe&&(r.fieldGroup.length=0))}r.options.fieldChanges&&r.options.fieldChanges.next({field:r,type:"hidden",value:n})}evalExpr(r,n,i){if(0===n.indexOf("model.")){const s=n.replace(/^model\./,""),p=r.fieldGroup?r:r.parent;let d=(null==r?void 0:r.key)===s?r.formControl:r.form.get(s);!d&&r.get(s)&&(d=r.get(s).formControl),L({key:s,parent:p,model:r.model},i),d&&(!ne(d.value)||!ne(i))&&d.value!==i&&d.patchValue(i)}else{try{let s=r;const p=this._evalExpressionPath(r,n),d=p.length-1;for(let h=0;h<d;h++)s=s[p[h]];s[p[d]]=i}catch(s){throw s.message=`[Formly Error] [Expression "${n}"] ${s.message}`,s}["templateOptions.disabled","props.disabled"].includes(n)&&Z(r)&&this.changeDisabledState(r,i)}this.emitExpressionChanges(r,n,i)}emitExpressionChanges(r,n,i){r.options.fieldChanges&&r.options.fieldChanges.next({field:r,type:"expressionChanges",property:n,value:i})}_evalExpressionPath(r,n){if(r._expressions[n]&&r._expressions[n].paths)return r._expressions[n].paths;let i=[];return-1===n.indexOf("[")?i=n.split("."):n.split(/[[\]]{1,2}/).filter(s=>s).forEach(s=>{const p=s.match(/['|"](.*?)['|"]/);p?i.push(p[1]):i.push(...s.split(".").filter(d=>d))}),r._expressions[n]&&(r._expressions[n].paths=i),i}}class qe{constructor(r){this.config=r}onPopulate(r){this.initFieldValidation(r,"validators"),this.initFieldValidation(r,"asyncValidators")}initFieldValidation(r,n){const i=[];if("validators"===n&&!(r.hasOwnProperty("fieldGroup")&&!Z(r))&&i.push(this.getPredefinedFieldValidation(r)),r[n])for(const s of Object.keys(r[n]))"validation"===s?i.push(...r[n].validation.map(p=>this.wrapNgValidatorFn(r,p))):i.push(this.wrapNgValidatorFn(r,r[n][s],s));N(r,"_"+n,i)}getPredefinedFieldValidation(r){let n=[];return V.forEach(i=>W(r,["props",i],({currentValue:s,firstChange:p})=>{n=n.filter(d=>d!==i),null!=s&&!1!==s&&n.push(i),!p&&r.formControl&&he(r.formControl)})),i=>0===n.length?null:D.kI.compose(n.map(s=>()=>{var p,d;const h=r.props[s];switch(s){case"required":return D.kI.required(i);case"pattern":return D.kI.pattern(h)(i);case"minLength":const E=D.kI.minLength(h)(i),Y=this.config.getValidatorMessage("minlength")||null!==(p=r.validation)&&void 0!==p&&null!==(p=p.messages)&&void 0!==p&&p.minlength?"minlength":"minLength";return E?{[Y]:E.minlength}:null;case"maxLength":const Q=D.kI.maxLength(h)(i),X=this.config.getValidatorMessage("maxlength")||null!==(d=r.validation)&&void 0!==d&&null!==(d=d.messages)&&void 0!==d&&d.maxlength?"maxlength":"maxLength";return Q?{[X]:Q.maxlength}:null;case"min":return D.kI.min(h)(i);case"max":return D.kI.max(h)(i);default:return null}}))(i)}wrapNgValidatorFn(r,n,i){let s;if("string"==typeof n&&(s=ee(this.config.getValidator(n))),"object"==typeof n&&n.name&&(s=ee(this.config.getValidator(n.name)),n.options&&(s.options=n.options)),"object"==typeof n&&n.expression){const{expression:p}=n,d=(0,e.Z)(n,k);s={name:i,validation:p,options:Object.keys(d).length>0?d:null}}return"function"==typeof n&&(s={name:i,validation:n}),p=>{const d=s.validation(p,r,s.options);return function Qe(c){return!!c&&"function"==typeof c.then}(d)?d.then(h=>this.handleAsyncResult(r,i?!!h:h,s)):(0,S.b)(d)?d.pipe((0,K.U)(h=>this.handleAsyncResult(r,i?!!h:h,s))):this.handleResult(r,i?!!d:d,s)}}handleAsyncResult(r,n,i){return r.options.detectChanges(r),this.handleResult(r,n,i)}handleResult(r,n,{name:i,options:s}){var p,d;"boolean"==typeof n&&(n=n?null:{[i]:s||!0});const h=r.formControl;return null==h||null===(p=h._childrenErrors)||void 0===p||null===(d=p[i])||void 0===d||d.call(p),G(n)&&Object.keys(n).forEach(E=>{const Y=n[E].errorPath?n[E].errorPath:null==s?void 0:s.errorPath,Q=Y?r.formControl.get(Y):null;if(Q){const ce=(0,e.Z)(n[E],I);Q.setErrors((0,g.Z)((0,g.Z)({},Q.errors||{}),{},{[E]:ce})),!h._childrenErrors&&N(h,"_childrenErrors",{}),h._childrenErrors[E]=()=>{const Fe=Q.errors||{},{[E]:_e}=Fe,Pe=(0,e.Z)(Fe,[E].map(v.Z));Q.setErrors(0===Object.keys(Pe).length?null:Pe)}}}),n}}class $e{prePopulate(r){this.root||(this.root=r),r.parent&&Object.defineProperty(r,"form",{get:()=>r.parent.formControl,configurable:!0})}onPopulate(r){r.hasOwnProperty("fieldGroup")&&!Z(r)?N(r,"formControl",r.form):this.addFormControl(r)}postPopulate(r){if(this.root===r&&(this.root=null,this.setValidators(r)&&r.parent)){let i=r.parent;for(;i;)(Z(i)||!i.parent)&&he(i.formControl,!0),i=i.parent}}addFormControl(r){let n=De(r);if(!r.fieldArray){if(!n){const i={updateOn:r.modelOptions.updateOn};if(r.fieldGroup)n=new D.cw({},i);else{const s=Z(r)?te(r):r.defaultValue;n=new D.NI({value:s,disabled:!!r.props.disabled},(0,g.Z)((0,g.Z)({},i),{},{initialValueIsDefault:!0}))}}Me(r,n)}}setValidators(r,n=!1){var i,s;!1===n&&Z(r)&&null!==(i=r.props)&&void 0!==i&&i.disabled&&(n=!0);let p=!1;if(null===(s=r.fieldGroup)||void 0===s||s.forEach(d=>d&&this.setValidators(d,n)&&(p=!0)),Z(r)||!r.parent||!Z(r)&&!r.fieldGroup){const{formControl:d}=r;if(d&&(Z(r)&&d instanceof D.NI&&(n&&d.enabled&&(d.disable({emitEvent:!1,onlySelf:!0}),p=!0),!n&&d.disabled&&(d.enable({emitEvent:!1,onlySelf:!0}),p=!0)),(null===d.validator||null===d.asyncValidator)&&(d.setValidators(()=>{const h=D.kI.compose(this.mergeValidators(r,"_validators"));return h?h(d):null}),d.setAsyncValidators(()=>{const h=D.kI.composeAsync(this.mergeValidators(r,"_asyncValidators"));return h?h(d):(0,q.of)(null)}),p=!0),p)){he(d,!0);let h=d.parent;for(let E=1;E<R(r).length;E++)h&&(he(h,!0),h=h.parent)}}return p}mergeValidators(r,n){var i;const s=[],p=r.formControl;return(null==p||null===(i=p._fields)||void 0===i?void 0:i.length)>1?p._fields.filter(d=>!d._hide).forEach(d=>s.push(...d[n])):r[n]&&s.push(...r[n]),r.fieldGroup&&r.fieldGroup.filter(d=>(null==d?void 0:d.fieldGroup)&&!Z(d)).forEach(d=>s.push(...this.mergeValidators(d,n))),s}}class Ke{constructor(r){this.config=r,this.formId=0}prePopulate(r){var n,i;const s=r.parent;this.initRootOptions(r),this.initFieldProps(r),s&&(Object.defineProperty(r,"options",{get:()=>s.options,configurable:!0}),Object.defineProperty(r,"model",{get:()=>Z(r)&&r.fieldGroup?te(r):s.model,configurable:!0})),Object.defineProperty(r,"get",{value:p=>Oe(r,p),configurable:!0}),null===(n=(i=this.getFieldComponentInstance(r)).prePopulate)||void 0===n||n.call(i,r)}onPopulate(r){var n,i;this.initFieldOptions(r),null===(n=(i=this.getFieldComponentInstance(r)).onPopulate)||void 0===n||n.call(i,r),r.fieldGroup&&r.fieldGroup.forEach((s,p)=>{s&&(Object.defineProperty(s,"parent",{get:()=>r,configurable:!0}),Object.defineProperty(s,"index",{get:()=>p,configurable:!0})),this.formId++})}postPopulate(r){var n,i;null===(n=(i=this.getFieldComponentInstance(r)).postPopulate)||void 0===n||n.call(i,r)}initFieldProps(r){var n;null!==(n=r.props)&&void 0!==n||(r.props=r.templateOptions),Object.defineProperty(r,"templateOptions",{get:()=>r.props,set:i=>r.props=i,configurable:!0})}initRootOptions(r){if(r.parent)return;const n=r.options;r.options.formState=r.options.formState||{},n.showError||(n.showError=this.config.extras.showError),n.fieldChanges||N(n,"fieldChanges",new me.x),n._hiddenFieldsForCheck||(n._hiddenFieldsForCheck=[]),n._markForCheck=i=>{console.warn("Formly: 'options._markForCheck' is deprecated since v6.0, use 'options.detectChanges' instead."),n.detectChanges(i)},n.detectChanges=i=>{var s;i._componentRefs&&(i.options.checkExpressions(i),ke(i)),null===(s=i.fieldGroup)||void 0===s||s.forEach(p=>p&&n.detectChanges(p))},n.resetModel=i=>{var s;i=ee(null!==(s=i)&&void 0!==s?s:n._initialModel),r.model&&(Object.keys(r.model).forEach(p=>delete r.model[p]),Object.assign(r.model,i||{})),n.build(r),r.form.reset(r.model),n.parentForm&&n.parentForm.control===r.formControl&&(n.parentForm.submitted=!1)},n.updateInitialValue=i=>n._initialModel=ee(null!=i?i:r.model),r.options.updateInitialValue()}initFieldOptions(r){var n,i;if(se(r,{id:B(`formly_${this.formId}`,r,r.index),hooks:{},modelOptions:{},validation:{messages:{}},props:r.type&&Z(r)?{label:"",placeholder:"",disabled:!1}:{}}),this.config.extras.resetFieldOnHide&&!1!==r.resetOnHide&&(r.resetOnHide=!0),"formly-template"!==r.type&&(r.template||null!==(n=r.expressions)&&void 0!==n&&n.template||null!==(i=r.expressionProperties)&&void 0!==i&&i.template)&&(r.type="formly-template"),!r.type&&r.fieldGroup&&(r.type="formly-group"),r.type&&this.config.getMergedField(r),Z(r)&&!ye(r.defaultValue)&&ye(te(r))){const s=d=>{var h;return d.hide||(null===(h=d.expressions)||void 0===h?void 0:h.hide)||d.hideExpression};let p=!r.resetOnHide||!s(r);if(!s(r)&&r.resetOnHide){let d=r.parent;for(;d&&!s(d);)d=d.parent;p=!d||!s(d)}p&&L(r,r.defaultValue)}r.wrappers=r.wrappers||[]}getFieldComponentInstance(r){const n=()=>{var i,s,p;let d=this.config.resolveFieldTypeRef(r);const h=null===(i=r._componentRefs)||void 0===i?void 0:i.slice(-1)[0];return h instanceof u.UuU&&(null==h?void 0:h.componentType)===(null===(s=d)||void 0===s?void 0:s.componentType)&&(d=h),null===(p=d)||void 0===p?void 0:p.instance};return r._proxyInstance||N(r,"_proxyInstance",new Proxy({},{get:(i,s)=>{var p;return null===(p=n())||void 0===p?void 0:p[s]},set:(i,s,p)=>n()[s]=p})),r._proxyInstance}}function Ze(c){return{types:[{name:"formly-group",component:Ue},{name:"formly-template",component:Ye}],extensions:[{name:"core",extension:new Ke(c),priority:-250},{name:"field-validation",extension:new qe(c),priority:-200},{name:"field-form",extension:new $e,priority:-150},{name:"field-expression",extension:new He,priority:-100}]}}let Xe=(()=>{class c{constructor(n,i=[]){i&&i.forEach(s=>n.addConfig(s))}static forRoot(n={}){return{ngModule:c,providers:[{provide:fe,multi:!0,useFactory:Ze,deps:[ae]},{provide:fe,useValue:n,multi:!0},ae,ve]}}static forChild(n={}){return{ngModule:c,providers:[{provide:fe,multi:!0,useFactory:Ze,deps:[ae]},{provide:fe,useValue:n,multi:!0},ve]}}}return c.\u0275fac=function(n){return new(n||c)(u.LFG(ae),u.LFG(fe,8))},c.\u0275mod=u.oAB({type:c}),c.\u0275inj=u.cJS({imports:[[m.ez]]}),c})()},91:(Ae,pe,F)=>{function e(g,u){if(null==g)return{};var S,H,D=function v(g,u){if(null==g)return{};var H,q,D={},S=Object.keys(g);for(q=0;q<S.length;q++)!(u.indexOf(H=S[q])>=0)&&(D[H]=g[H]);return D}(g,u);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(g);for(H=0;H<q.length;H++)!(u.indexOf(S=q[H])>=0)&&Object.prototype.propertyIsEnumerable.call(g,S)&&(D[S]=g[S])}return D}F.d(pe,{Z:()=>e})}}]);