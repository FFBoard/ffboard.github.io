(self.webpackChunkpages=self.webpackChunkpages||[]).push([[70],{5851:(ee,F,t)=>{"use strict";t.d(F,{B:()=>V});var g=t(5861),O=t(1378),e=t(5879),D=t(2438),P=t(4036),l=t(9054),y=t(4020),a=t(148),M=t(9093),E=t(7621),W=t(1990),v=t(5661),m=t(5172),j=t(3845),k=t(4887),K=t(5487),A=t(658),f=t(9515),d=t(6814),U=t(6223),p=t(9473),h=t(554),T=t(4464),L=t(4228);const w=["fileInput"];function Z(o,I){1&o&&(e.O4$(),e.TgZ(0,"svg",31),e._UZ(1,"path",32)(2,"path",33),e.qZA())}const Q=function(){return["text-primary"]};function q(o,I){1&o&&e._UZ(0,"app-logo",34),2&o&&e.Q6J("svgClass",e.DdM(2,Q))("responsive",!1)}function he(o,I){1&o&&(e._UZ(0,"span",38),e.ALo(1,"translate")),2&o&&e.Q6J("innerHTML",e.lcZ(1,1,"COMPONENTS.UPLOADER.DESCRIPTION.DESKTOP"),e.oJD)}function fe(o,I){1&o&&(e._UZ(0,"span",38),e.ALo(1,"translate")),2&o&&e.Q6J("innerHTML",e.lcZ(1,1,"COMPONENTS.UPLOADER.DESCRIPTION.TOUCH"),e.oJD)}const me=function(o){return{"fw-bold fs-md-lg":o}},ue=function(o){return{"text-decoration-underline":o}};function oe(o,I){if(1&o){const n=e.EpF();e.TgZ(0,"div",35),e.YNc(1,he,2,3,"span",36),e.YNc(2,fe,2,3,"span",36),e.TgZ(3,"span",37),e.NdJ("click",function(i){e.CHM(n);const C=e.oxw(2),B=e.MAs(23);return e.KtG(C.toggleRemoteUrlForm(i,B))}),e._uU(4),e.ALo(5,"translate"),e.qZA()()}if(2&o){const n=e.oxw(2);e.Q6J("ngClass",e.VKq(7,me,!n.isWidget)),e.xp6(1),e.Q6J("ngIf",!n.touchDevice),e.xp6(1),e.Q6J("ngIf",n.touchDevice),e.xp6(1),e.Q6J("ngClass",e.VKq(9,ue,n.isWidget)),e.xp6(1),e.Oqu(e.lcZ(5,5,"COMPONENTS.UPLOADER.DESCRIPTION.REMOTE_URL"))}}function ve(o,I){1&o&&e.GkF(0)}function Ee(o,I){if(1&o){const n=e.EpF();e.TgZ(0,"div",39),e.YNc(1,ve,1,0,"ng-container",17),e.TgZ(2,"button",40),e.NdJ("click",function(i){e.CHM(n);const C=e.oxw(2);return e.KtG(C.handleRemoteUrlUpload(i))}),e.O4$(),e.TgZ(3,"svg",41),e._UZ(4,"path",42),e.qZA()(),e.kcU(),e.TgZ(5,"button",43),e.NdJ("click",function(i){e.CHM(n);const C=e.oxw(2);return e.KtG(C.toggleRemoteUrlForm(i))}),e.O4$(),e.TgZ(6,"svg",41),e._UZ(7,"path",44),e.qZA()()()}if(2&o){const n=e.oxw(2),u=e.MAs(34);e.xp6(1),e.Q6J("ngTemplateOutlet",u),e.xp6(1),e.Q6J("disabled",0===n.remoteUrl.length||!n.isRemoteUrlValid)}}function Oe(o,I){if(1&o&&(e.ynx(0),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"em",45),e.ALo(5,"arrayJoin"),e.BQk()),2&o){const n=e.oxw(2);e.xp6(2),e.hij("",e.lcZ(3,2,"COMPONENTS.UPLOADER.PATH.LONG")," "),e.xp6(2),e.Q6J("innerText",n.currentFolderPath.length?e.xi3(5,4,n.currentFolderPath,"/"):"root")}}function _(o,I){if(1&o&&(e._UZ(0,"div",50),e.ALo(1,"arrayJoin"),e.ALo(2,"slice")),2&o){const n=e.oxw(3);e.Q6J("innerText",e.xi3(1,1,e.Dn7(2,4,n.currentFolderPath,0,-1),"/"))}}function r(o,I){if(1&o&&(e.TgZ(0,"div",46)(1,"div",47),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,_,3,8,"div",48),e._UZ(5,"div",49),e.ALo(6,"arrayJoin"),e.ALo(7,"slice"),e.qZA()),2&o){const n=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,3,"COMPONENTS.UPLOADER.PATH.SHORT")," "),e.xp6(2),e.Q6J("ngIf",n.currentFolderPath.length>1),e.xp6(1),e.Q6J("innerText",(n.currentFolderPath.length>1?"/":"")+(n.currentFolderPath.length?e.xi3(6,5,e.xi3(7,8,n.currentFolderPath,n.currentFolderPath.length-1),"/"):"root"))}}const s=function(){return{bottom:0,left:0}};function c(o,I){if(1&o){const n=e.EpF();e.ynx(0),e.TgZ(1,"a",51),e.NdJ("click",function(){e.CHM(n);const i=e.oxw(2);return e.KtG(i.openInfoModal.emit())}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",52),e.NdJ("click",function(){e.CHM(n),e.oxw(2);const i=e.MAs(7);return e.KtG(i.open())}),e._uU(5," settings "),e.qZA(),e.TgZ(6,"div",53),e.NdJ("click",function(i){e.CHM(n);const C=e.oxw(2),B=e.MAs(23);return e.KtG(C.toggleRemoteUrlForm(i,B))}),e._uU(7," add_link "),e.qZA(),e.BQk()}2&o&&(e.xp6(1),e.Q6J("ngStyle",e.DdM(4,s)),e.xp6(1),e.Oqu(e.lcZ(3,2,"COMPONENTS.UPLOADER.INFO")))}const x=function(o,I,n){return{"cursor-pointer":o,"py-4 px-3 px-sm-4":I,"p-2 pb-3":n}},b=function(o,I,n){return{"my-2":o,"mb-2":I,"mw-100 mt-1":n}};function H(o,I){if(1&o){const n=e.EpF();e.ynx(0),e.TgZ(1,"div",22,23),e.NdJ("dragenter",function(){e.CHM(n);const i=e.MAs(2),C=e.oxw();return e.KtG(C.setDragOverEvent(i))})("drop",function(i){e.CHM(n);const C=e.oxw();return e.KtG(C.handleDropEvent(i))})("click",function(){e.CHM(n);const i=e.oxw(),C=e.MAs(2);return e.KtG(!i.isWaitingRemoteUrl&&C.click())}),e.YNc(3,Z,3,0,"svg",24),e.YNc(4,q,1,3,"ng-template",null,25,e.W1O),e.YNc(6,oe,6,11,"div",26),e.YNc(7,Ee,8,2,"div",27),e.TgZ(8,"div",28),e.YNc(9,Oe,6,7,"ng-container",3),e.YNc(10,r,8,11,"ng-template",null,29,e.W1O),e.qZA()(),e.YNc(12,c,8,5,"ng-container",30),e.BQk()}if(2&o){const n=e.MAs(5),u=e.MAs(11),i=e.oxw();e.xp6(1),e.Q6J("ngClass",e.kEZ(9,x,!i.loading&&!i.isWaitingRemoteUrl,!i.isWidget,i.isWidget)),e.xp6(2),e.Q6J("ngIf",!i.isWidget)("ngIfElse",n),e.xp6(3),e.Q6J("ngIf",!i.isWidget||!i.isWaitingRemoteUrl),e.xp6(1),e.Q6J("ngIf",i.isWidget&&i.isWaitingRemoteUrl),e.xp6(1),e.Q6J("ngClass",e.kEZ(13,b,!i.isWidget&&!i.touchDevice,!i.isWidget&&i.touchDevice,i.isWidget)),e.xp6(1),e.Q6J("ngIf",!i.isWidget)("ngIfElse",u),e.xp6(3),e.Q6J("ngIf",!i.isWidget)}}const N=function(o,I){return{"p-4":o,"p-2":I}};function S(o,I){if(1&o&&(e.TgZ(0,"div",54),e.O4$(),e.TgZ(1,"svg",55),e._UZ(2,"path",56),e.qZA(),e.kcU(),e._UZ(3,"app-loader",57),e.TgZ(4,"div",58),e._uU(5),e.ALo(6,"translate"),e.qZA()()),2&o){const n=e.oxw();e.Q6J("ngClass",e.WLB(6,N,!n.isWidget,n.isWidget)),e.xp6(3),e.Q6J("onlyMessage",!0)("message",n.loadingMessage),e.xp6(2),e.hij(" ",e.lcZ(6,4,"COMPONENTS.UPLOADER.LOADING.SUBTEXT")," ")}}function R(o,I){1&o&&e.GkF(0)}const J=function(o){return{"fs-reset":o}};function $(o,I){if(1&o){const n=e.EpF();e.TgZ(0,"input",59,60),e.NdJ("ngModelChange",function(i){e.CHM(n);const C=e.oxw();return e.KtG(C.remoteUrl=i)})("ngModelChange",function(){e.CHM(n);const i=e.MAs(1),C=e.oxw();return e.KtG(C.isRemoteUrlValid=!i.invalid)}),e.ALo(2,"translate"),e.qZA()}if(2&o){const n=e.oxw();e.Q6J("placeholder",e.lcZ(2,4,"COMPONENTS.UPLOADER.REMOTE_URL_INPUT_PLACEHOLDER"))("ngClass",e.VKq(6,J,n.isWidget))("ngModel",n.remoteUrl)("pattern","^https?://[^.]+\\.(.+)")}}const te=function(o,I){return{uploading:o,"widget flex-grow-1 min-w-0":I}};let V=(()=>{class o{constructor(n,u,i,C,B,G,ne,re,X){this.postMessageService=n,this.uploadService=u,this.uploadObservablesService=i,this.uploaderService=C,this.toastService=B,this.renderer=G,this.ngZone=ne,this.translateService=re,this.proxyService=X,this.loading=!0,this.currentFolderPath=[],this.isWidget=!1,this.fileUploadedEvent=new e.vpe,this.openInfoModal=new e.vpe,this.isUploading=!1,this.loadingMessage="",this.touchDevice=y.eX,this.isWaitingRemoteUrl=!1,this.remoteUrl="",this.isRemoteUrlValid=!1,this.dragOverEvent=!1,this.checkingFileMessage="",this.options=this.uploaderService.uploaderOptions;const Y=this.uploadService.preferences.uploader;Y.checkImage.active||(this.options.compress=!1),Y.showLinkModal&&(this.options.openLinkModalAfterUpload=!0),this.uploaderService.uploaderOptions=this.options}ngOnInit(){var n=this;return(0,g.Z)(function*(){n.handleClipboardPasteEvent(),n.handleExternalUpload(),n.checkingFileMessage=n.translateService.instant("COMPONENTS.UPLOADER.LOADING.MESSAGE.CHECK"),n.loadingMessage=n.checkingFileMessage})()}handleClipboardPasteEvent(){var n=this;this.clipboardPasteEventSubscription=(0,D.R)(document.body,"paste").subscribe(function(){var u=(0,g.Z)(function*(i){if(n.isWidget&&n.isWaitingRemoteUrl||!n.canUpload())return;const C=Array.from((i.clipboardData||i.originalEvent.clipboardData).items);let B=[];for(const G of C)if(0===G.type.indexOf("image")){const ne=G.getAsFile();ne&&B.push(ne)}B.length>0?yield n.preUpload(B):n.reset()});return function(i){return u.apply(this,arguments)}}())}handleExternalUpload(){var n=this;this.startExternalUploadSubscription=this.uploadObservablesService.startUploadObservable.subscribe(function(){var u=(0,g.Z)(function*(i){if(i){if(!n.canUpload())return;yield n.preUpload([i.file],i.options)}else n.fileInputRef.nativeElement.click()});return function(i){return u.apply(this,arguments)}}())}handleSelectionEvent(n){var u=this;return(0,g.Z)(function*(){if(!u.canUpload())return;const i=n.target;if(i.files&&i.files.length){const C=Array.from(i.files);return i.value="",u.preUpload(C)}u.reset()})()}handleDropEvent(n){var u=this;return(0,g.Z)(function*(){var i;if(n.preventDefault(),n.stopPropagation(),n.stopImmediatePropagation(),!u.canUpload())return;const C=null!==(i=n.dataTransfer)&&void 0!==i&&i.files?Array.from(n.dataTransfer.files):[];if(C.length)return u.preUpload(C);u.reset()})()}handleRemoteUrlUpload(n,u){var i=this;return(0,g.Z)(function*(){if(!i.isRemoteUrlValid||0===i.remoteUrl.length||!i.canUpload())return;const C=i.remoteUrl;i.loadingMessage=i.translateService.instant("COMPONENTS.UPLOADER.LOADING.MESSAGE.GETTING_REMOTE_FILE"),i.toggleRemoteUrlForm(n,u);const B=(0,l.Tb)(C);if(!B.ext||-1===W.O8.findIndex(ne=>-1!==ne.ext.indexOf(B.ext)))return i.handleErrors([B.name],[]),void i.reset();const G=yield i.proxyService.get(C);return G?i.preUpload([new File([G],B.name,{type:G.type,lastModified:Date.now()})]):(i.toastService.show({content:"Errore nel recupero dell'immagine dall'url!",level:O.m.ERROR}),i.postMessageService.send(a.l.UPLOAD_ERROR,{filename:B.name,error:j.S.REMOTE_URL_RESPONSE}),void i.reset())})()}saveOptions(n=!0){this.uploaderService.uploaderOptions=this.options,n&&this.savePreferences()}savePreferences(){this.uploadService.preferences.uploader={checkImage:{active:this.options.compress,time:Date.now()},showLinkModal:this.options.openLinkModalAfterUpload}}setDragOverEvent(n){this.dragOverEvent||(this.dragOverEvent=!0,this.ngZone.runOutsideAngular(()=>{this.renderer.listen(n,"dragover",u=>{u.preventDefault()})}))}canUpload(){return!this.loading&&!this.isUploading&&(this.isUploading=!0,this.dragOverEvent=!1,!0)}reset(){this.isUploading=!1,this.loadingMessage=this.checkingFileMessage,this.postMessageService.send(a.l.UPLOAD_END,{}),this.options.allowOverwrite=!1,this.saveOptions(!1)}preUpload(n,u){var i=this;return(0,g.Z)(function*(){const C=[...i.currentFolderPath];let B=[],G=[],ne=[],re=[];u?u.allowOverwrite=u.allowOverwrite||!1:(u=i.uploaderService.uploaderOptions).allowOverwrite=!1;for(let z=0;z<n.length;z++){const se=yield i.uploaderService.orientAndCompressFileIfNeeded(n[z]),ie=se.compressorCheck?se.file:u.compress?yield i.uploaderService.compressFileIfNeeded(n[z],u.imageDimensions?{width:u.imageDimensions.width,height:u.imageDimensions.height}:{}):n[z];if(ie){const le=(0,l.Tb)(ie.name),de=W.O8.find(ge=>-1!==ge.ext.indexOf(le.ext));if(!de){ne.push(ie.name);continue}if(ie.size>de.maxSize){re.push(ie.name);continue}B.push({file:{name:ie.name,size:ie.size,time:0,url:"",ext:le.ext,filename:le.filename,isImage:(0,l.Or)(le.ext),embedUrl:"",type:m.VC.FILE},progress:0,completed:!1}),G.push(ie)}}if(i.handleErrors(ne,re),0===G.length)return void i.reset();const X=i.translateService.instant("COMPONENTS.UPLOADER.LOADING.MESSAGE.UPLOADING",{total:G.length}),Y=i.translateService.instant("COMPONENTS.UPLOADER.LOADING.MESSAGE.CREATING_PACKAGE",{total:G.length});i.uploadObservablesService.pushUploadingFileQueue(B);for(let z=0;z<G.length;++z){i.loadingMessage=Y;const se=yield i.uploadService.getHostToken(C,G[z].name);B[z].progress+=20,i.loadingMessage=X.replace("{{current}}",`${z+1}`),yield(0,P.z)(i.uploaderService.upload(G[z],B[z],se,u.allowOverwrite))}i.uploadObservablesService.pushUploadingFileQueue([]);const ae=B.filter(z=>!z.error).map(z=>z.file);ae.length>0&&(i.fileUploadedEvent.emit({list:ae,rewrite:u.allowOverwrite,destPath:C}),i.postMessageService.send(a.l.UPLOAD_SUCCESS,{fileList:ae.map(z=>({filename:z.name,isImage:z.isImage,url:z.url}))}),u.openLinkModalAfterUpload&&i.uploadObservablesService.pushAction({name:m.In.FILE_SHOW_LINKS,payload:{entities:(0,l.jL)(ae)}})),i.reset()})()}handleErrors(n,u){if(0!==n.length||0!==u.length){if(!this.isWidget)return void this.toastService.show({content:this.createToastMessage(n,u),level:O.m.ERROR});[[j.S.UNSUPPORTED,n],[j.S.OVERSIZED,u]].forEach(i=>{i[1].forEach(C=>{this.postMessageService.send(a.l.UPLOAD_ERROR,{filename:C,error:i[0]})})})}}createToastMessage(n,u){let i=[];return n.length&&i.push(n.length>1?`I file <strong>${n.join(", ")}</strong> hanno un formato non supportato!`:`Il file <strong>${n[0]}</strong> ha un formato non supportato!`),u.length&&i.push(u.length>1?`I file <strong>${u.join(", ")}</strong> sono troppo pesanti!`:`Il file <strong>${u[0]}</strong> \xe8 troppo pesante!`),i.join("<br><br>")}toggleRemoteUrlForm(n,u){n.stopPropagation(),this.isWidget||(this.isWaitingRemoteUrl?null==u||u.close():null==u||u.open()),this.resetRemoteUrlForm(!this.isWaitingRemoteUrl)}resetRemoteUrlForm(n){this.isWaitingRemoteUrl=n,this.remoteUrl=""}ngOnDestroy(){var n;null===(n=this.startExternalUploadSubscription)||void 0===n||n.unsubscribe(),this.clipboardPasteEventSubscription.unsubscribe(),this.uploaderService.clearPendingRequests()}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(M.F),e.Y36(A.C),e.Y36(K.r),e.Y36(k.q),e.Y36(v.k),e.Y36(e.Qsj),e.Y36(e.R0b),e.Y36(f.sK),e.Y36(E.y))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-uploader"]],viewQuery:function(n,u){if(1&n&&e.Gf(w,5),2&n){let i;e.iGM(i=e.CRH())&&(u.fileInputRef=i.first)}},inputs:{loading:"loading",currentFolderPath:"currentFolderPath",isWidget:"isWidget"},outputs:{fileUploadedEvent:"fileUploadedEvent",openInfoModal:"openInfoModal"},decls:35,vars:37,consts:[[1,"uploader","rounded","position-relative",3,"ngClass"],["type","file",1,"d-none",3,"multiple","disabled","change"],["fileInput",""],[4,"ngIf","ngIfElse"],["uploading",""],[3,"title"],["optionsModal",""],[3,"innerHtml"],[1,"mb-1","list-unstyled"],[1,"form-check","form-switch"],["type","checkbox","role","switch","id","speed-upload",1,"form-check-input",3,"ngModel","ngModelChange"],["for","speed-upload",1,"form-check-label","me-auto",3,"innerHTML"],["type","checkbox","role","switch","id","show-link-modal",1,"form-check-input",3,"ngModel","ngModelChange"],["for","show-link-modal",1,"form-check-label","me-auto",3,"innerHTML"],["size","md",3,"title","disableCloseButton","hidden"],["remoteUrlModal",""],[1,"mb-2",3,"innerHTML"],[4,"ngTemplateOutlet"],["footer",""],["type","button",1,"btn","btn-secondary",3,"innerText","click"],["type","button",1,"btn","btn-primary",3,"disabled","innerText","click"],["remoteUrlInput",""],[1,"rounded","upload-area",3,"ngClass","dragenter","drop","click"],["uploadArea",""],["xmlns","http://www.w3.org/2000/svg","width","64","height","64","fill","currentColor","viewBox","0 0 16 16",4,"ngIf","ngIfElse"],["appLogo",""],["class","description text-center",3,"ngClass",4,"ngIf"],["class","input-group input-group-sm remote-url-form justify-content-center mb-1",4,"ngIf"],[1,"small","text-center",3,"ngClass"],["widgetFolder",""],[4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","64","height","64","fill","currentColor","viewBox","0 0 16 16"],["fill-rule","evenodd","d","M7.646 5.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 6.707V10.5a.5.5 0 0 1-1 0V6.707L6.354 7.854a.5.5 0 1 1-.708-.708l2-2z"],["d","M4.406 3.342A5.53 5.53 0 0 1 8 2c2.69 0 4.923 2 5.166 4.579C14.758 6.804 16 8.137 16 9.773 16 11.569 14.502 13 12.687 13H3.781C1.708 13 0 11.366 0 9.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383zm.653.757c-.757.653-1.153 1.44-1.153 2.056v.448l-.445.049C2.064 6.805 1 7.952 1 9.318 1 10.785 2.23 12 3.781 12h8.906C13.98 12 15 10.988 15 9.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 4.825 10.328 3 8 3a4.53 4.53 0 0 0-2.941 1.1z"],["svgSize","xl","subtext","Upload",1,"d-block","my-auto","py-1",3,"svgClass","responsive"],[1,"description","text-center",3,"ngClass"],[3,"innerHTML",4,"ngIf"],[1,"ms-1","remote-url-btn","fst-italic","cursor-pointer",3,"ngClass","click"],[3,"innerHTML"],[1,"input-group","input-group-sm","remote-url-form","justify-content-center","mb-1"],[1,"input-group-text","bg-light",3,"disabled","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 16 16"],["d","M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"],[1,"input-group-text","bg-light",3,"click"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],[1,"text-break",3,"innerText"],[1,"d-flex","min-w-0"],[1,"me-1"],["class","fst-italic text-truncate mw-100",3,"innerText",4,"ngIf"],[1,"fst-italic","text-nowrap",3,"innerText"],[1,"fst-italic","text-truncate","mw-100",3,"innerText"],[1,"fs-xs","fst-italic","d-block","px-2","py-1","text-reset","cursor-pointer","position-absolute",3,"ngStyle","click"],[1,"material-icons-outlined","d-block","cursor-pointer","fs-xl","position-absolute","icon","options-icon",3,"click"],[1,"material-icons-outlined","d-block","cursor-pointer","fs-xl","position-absolute","icon","remote-url-icon",3,"click"],[1,"p-4","rounded",3,"ngClass"],["xmlns","http://www.w3.org/2000/svg","width","64","height","64","viewBox","0 0 16 16",1,"overflow-visible"],["d","M 4.406 3.342 A 5.53 5.53 0 0 1 8 2 c 2.69 0 4.923 2 5.166 4.579 C 14.758 6.804 16 8.137 16 9.773 C 16 11.569 14.502 13 12.687 13 H 3.781 C 1.708 13 0 11.366 0 9.318 c 0 -1.763 1.266 -3.223 2.942 -3.593 c 0.143 -0.863 0.698 -1.723 1.464 -2.383 z",1,"cloud"],[3,"onlyMessage","message"],[1,"small","text-center"],["type","text","required","",1,"form-control",3,"placeholder","ngClass","ngModel","pattern","ngModelChange"],["input","ngModel"]],template:function(n,u){if(1&n){const i=e.EpF();e.TgZ(0,"div",0)(1,"input",1,2),e.NdJ("change",function(B){return u.handleSelectionEvent(B)}),e.qZA(),e.YNc(3,H,13,17,"ng-container",3),e.YNc(4,S,7,9,"ng-template",null,4,e.W1O),e.qZA(),e.TgZ(6,"app-modal",5,6),e.ALo(8,"translate"),e._UZ(9,"div",7),e.ALo(10,"translate"),e.TgZ(11,"ul",8)(12,"li")(13,"div",9)(14,"input",10),e.NdJ("ngModelChange",function(B){return u.options.compress=B})("ngModelChange",function(){return u.saveOptions()}),e.qZA(),e._UZ(15,"label",11),e.ALo(16,"translate"),e.qZA()(),e.TgZ(17,"li")(18,"div",9)(19,"input",12),e.NdJ("ngModelChange",function(B){return u.options.openLinkModalAfterUpload=B})("ngModelChange",function(){return u.saveOptions()}),e.qZA(),e._UZ(20,"label",13),e.ALo(21,"translate"),e.qZA()()()(),e.TgZ(22,"app-modal",14,15),e.NdJ("hidden",function(){return u.resetRemoteUrlForm(!1)}),e.ALo(24,"translate"),e._UZ(25,"p",16),e.ALo(26,"translate"),e.YNc(27,R,1,0,"ng-container",17),e.ynx(28,18),e.TgZ(29,"button",19),e.NdJ("click",function(){e.CHM(i);const B=e.MAs(23);return e.KtG(B.close())}),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"button",20),e.NdJ("click",function(B){e.CHM(i);const G=e.MAs(23);return e.KtG(u.handleRemoteUrlUpload(B,G))}),e.ALo(32,"translate"),e.qZA(),e.BQk(),e.qZA(),e.YNc(33,$,3,8,"ng-template",null,21,e.W1O)}if(2&n){const i=e.MAs(5),C=e.MAs(34);e.Q6J("ngClass",e.WLB(34,te,u.isUploading,u.isWidget)),e.xp6(1),e.Q6J("multiple",!0)("disabled",u.loading||u.isUploading),e.xp6(2),e.Q6J("ngIf",!u.isUploading)("ngIfElse",i),e.xp6(3),e.Q6J("title",e.lcZ(8,18,"COMPONENTS.UPLOADER.SETTINGS_MODAL.TITLE")),e.xp6(3),e.Q6J("innerHtml",e.lcZ(10,20,"COMPONENTS.UPLOADER.SETTINGS_MODAL.CONTENT.DESCRIPTION"),e.oJD),e.xp6(5),e.Q6J("ngModel",u.options.compress),e.xp6(1),e.Q6J("innerHTML",e.lcZ(16,22,"COMPONENTS.UPLOADER.SETTINGS_MODAL.CONTENT.COMPRESS_SWITCH"),e.oJD),e.xp6(4),e.Q6J("ngModel",u.options.openLinkModalAfterUpload),e.xp6(1),e.Q6J("innerHTML",e.lcZ(21,24,"COMPONENTS.UPLOADER.SETTINGS_MODAL.CONTENT.SHOW_LINK_SWITCH"),e.oJD),e.xp6(2),e.Q6J("title",e.lcZ(24,26,"COMPONENTS.UPLOADER.REMOTE_URL_MODAL.TITLE"))("disableCloseButton",!0),e.xp6(3),e.Q6J("innerHTML",e.lcZ(26,28,"COMPONENTS.UPLOADER.REMOTE_URL_MODAL.CONTENT"),e.oJD),e.xp6(2),e.Q6J("ngTemplateOutlet",C),e.xp6(2),e.Q6J("innerText",e.lcZ(30,30,"SHARED.CANCEL")),e.xp6(2),e.Q6J("disabled",0===u.remoteUrl.length||!u.isRemoteUrlValid)("innerText",e.lcZ(32,32,"COMPONENTS.UPLOADER.REMOTE_URL_MODAL.UPLOAD_BTN"))}},dependencies:[d.mk,d.O5,d.tP,d.PC,U.Fj,U.Wl,U.JJ,U.Q7,U.c5,U.On,p.R,h.R,T.z,L.J,d.OU,f.X$],styles:[".uploader[_ngcontent-%COMP%]:not(.widget){margin:0 1rem;border:2px dashed #4864fe;box-shadow:0 .125rem .25rem #00000013;color:#2036ad;height:100%}.uploader[_ngcontent-%COMP%]:not(.widget):not(.uploading)   svg[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bubble 4s linear infinite}.uploader[_ngcontent-%COMP%]:not(.widget).uploading   svg[_ngcontent-%COMP%]   path.cloud[_ngcontent-%COMP%]{stroke:#2036ad}.uploader[_ngcontent-%COMP%]:not(.widget)   .description[_ngcontent-%COMP%]{max-width:350px}.uploader.widget.uploading[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path.cloud[_ngcontent-%COMP%]{stroke:#4864fe}.uploader[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(.icon){height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.uploader.uploading[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path.cloud[_ngcontent-%COMP%]{fill:none;stroke-linecap:round;stroke-dasharray:50;stroke-dashoffset:100;animation:_ngcontent-%COMP%_draw 3.5s linear infinite}.uploader[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{top:5px;opacity:.7;transition:opacity .2s}.uploader[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:hover{opacity:1}.uploader[_ngcontent-%COMP%]   .options-icon[_ngcontent-%COMP%]{right:5px}.uploader[_ngcontent-%COMP%]   .remote-url-icon[_ngcontent-%COMP%]{right:30px}.upload-area.cursor-pointer[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(app-logo):not(.description), .upload-area.cursor-pointer[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(.remote-url-btn){pointer-events:none}.remote-url-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{max-width:300px}.remote-url-form[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{opacity:.5}@media (min-width: 768px){.uploader[_ngcontent-%COMP%]:not(.widget){margin:initial}}@keyframes _ngcontent-%COMP%_bubble{6%{transform:scale(1.3,.8)}9%{transform:scale(.8,1.3) translateY(-.5rem)}12%{transform:scale(1)}}@keyframes _ngcontent-%COMP%_draw{0%{stroke-dashoffset:100}to{stroke-dashoffset:0}}"]}),o})()},529:(ee,F,t)=>{"use strict";t.d(F,{M:()=>M});var g=t(4243),O=t(6814),e=t(6223),D=t(8876),P=t(2740),l=t(4610),y=t(9515),a=t(5879);let M=(()=>{class E{}return E.\u0275fac=function(v){return new(v||E)},E.\u0275mod=a.oAB({type:E}),E.\u0275inj=a.cJS({imports:[g.r,O.ez,e.u5,D.q,P.h,l.z,y.aw.forChild()]}),E})()},3845:(ee,F,t)=>{"use strict";t.d(F,{S:()=>g});var g=function(O){return O.UNSUPPORTED="unsupported",O.OVERSIZED="oversized",O.REMOTE_URL_RESPONSE="remote-url-response",O.UPLOAD_FAILED="upload-failed",O}(g||{})},4243:(ee,F,t)=>{"use strict";t.d(F,{r:()=>e});var g=t(6814),O=t(5879);let e=(()=>{class D{}return D.\u0275fac=function(l){return new(l||D)},D.\u0275mod=O.oAB({type:D}),D.\u0275inj=O.cJS({imports:[g.ez]}),D})()},4228:(ee,F,t)=>{"use strict";t.d(F,{J:()=>O});var g=t(5879);let O=(()=>{class e{transform(P,l){return P.join(l)}}return e.\u0275fac=function(P){return new(P||e)},e.\u0275pipe=g.Yjl({name:"arrayJoin",type:e,pure:!0}),e})()},5172:(ee,F,t)=>{"use strict";t.d(F,{In:()=>g,Ky:()=>P,VC:()=>O,c5:()=>D,gG:()=>e});var g=function(l){return l.FILE_SHOW_LINKS="fileLinks",l.FILE_EDIT="fileEdit",l.DELETE="delete",l.RENAME="rename",l.MOVE="move",l}(g||{}),O=function(l){return l.FILE="file",l.FOLDER="folder",l}(O||{}),e=function(l){return l.FILENAME="filename",l.SIZE="size",l.TIME="time",l.EXTENSION="ext",l}(e||{}),D=function(l){return l.GRID="grid",l.LIST="list",l}(D||{}),P=function(l){return l.W_768_I_1="(max-width: 767.98px)",l.W_933_I_2="(min-width: 768px) and (max-width: 933.98px)",l.W_960_I_3="(min-width: 934px) and (max-width: 959.98px)",l.W_1226_I_2="(min-width: 960px) and (max-width: 1225.98px)",l.W_1540_I_3="(min-width: 1226px) and (max-width: 1539.98px)",l.W_1854_I_4="(min-width: 1540px) and (max-width: 1853.98px)",l.W_2168_I_5="(min-width: 1854px) and (max-width: 2167.98px)",l.W_2482_I_6="(min-width: 2168px) and (max-width: 2481.98px)",l.W_2796_I_7="(min-width: 2482px) and (max-width: 2795.98px)",l.W_3110_I_8="(min-width: 2796px) and (max-width: 3109.98px)",l.W_3424_I_9="(min-width: 3110px) and (max-width: 3423.98px)",l.W_3738_I_10="(min-width: 3424px)",l}(P||{})},1990:(ee,F,t)=>{"use strict";t.d(F,{C7:()=>D,Mi:()=>P,O8:()=>O,er:()=>l,p0:()=>e,xt:()=>y});var g=t(5172);const O=[{ext:["png","apng"],maxSize:15},{ext:["jpeg","jpg","jpe"],maxSize:10},{ext:["gif"],maxSize:15},{ext:["bmp"],maxSize:10},{ext:["webp","webm"],maxSize:10},{ext:["psd","xcf"],maxSize:150},{ext:["svg"],maxSize:30}].map(a=>(a.maxSize*=1048576,a)),e={lastPath:[],layout:{asc:!0,orderBy:g.gG.FILENAME,type:g.c5.GRID},uploader:{checkImage:{time:0,active:!0},showLinkModal:!1}},D="https://upload.forumfree.net/api/",P=/^(?:(?![\t\r\n])[a-zA-Z0-9_\-.\s])*$/,l=/^(?:(?![\t\r\n])[a-zA-Z0-9_\-\s])*$/,y={invalidLength:!1,alreadyUsed:!1,invalidStartOrEnd:!1,invalidCharacter:!1}},7621:(ee,F,t)=>{"use strict";t.d(F,{y:()=>E});var g=t(5861),O=t(2907),e=t(708),D=t(8180),P=t(4664),l=t(2096),y=t(6306),a=t(5879),M=t(9862);let E=(()=>{class W{constructor(m,j){this.http=m,this.endpointsService=j}get(m){var j=this;return(0,g.Z)(function*(){const k=j.sendRequest(m);return yield(0,e.n)(k)})()}sendRequest(m){return this.getUrlContent(m).pipe((0,D.q)(1),(0,P.w)(j=>(0,l.of)(j)),(0,y.K)(()=>this.getUrlContentWithProxy(m)))}getUrlContent(m){return this.http.get(m,{responseType:"blob"})}getUrlContentWithProxy(m){return this.http.get(this.endpointsService.get(O.jQ.PROXY,O.ph.COMMON),{headers:{[O._o.HeaderKeys.TOKEN_TYPE]:O.s9.ACCESS,"x-remote-url":m},responseType:"blob"}).pipe((0,D.q)(1),(0,y.K)(()=>(0,l.of)(void 0)))}}return W.\u0275fac=function(m){return new(m||W)(a.LFG(M.eN),a.LFG(O.oz))},W.\u0275prov=a.Yz7({token:W,factory:W.\u0275fac,providedIn:"root"}),W})()},5983:(ee,F,t)=>{"use strict";t.d(F,{B:()=>D});var g=t(5172),O=t(1410),e=t(5879);let D=(()=>{class P{constructor(y){this.globalsService=y,this.ffuid="",this.cache={},this.profileSubscription=this.globalsService.profileObservable.subscribe(a=>{this.ffuid=a?a.user.ffuid:""})}getItem(y){const a=this.createKey(y);if(this.cache.hasOwnProperty(a))return this.cache[a]}setItem(y,a){this.cache[this.createKey(y)]=a}removeItem(y){const a=this.createKey(y);if(this.cache.hasOwnProperty(a)){if(this.cache[a].folders.length)for(const M of this.cache[a].folders)this.removeItem([...y,M.name]);return delete this.cache[a],!0}return!1}getEntities(y,a){let M={};const E=this.createKey(y);if(!this.cache.hasOwnProperty(E))return M;for(const W of a){const v=(W.type===g.VC.FILE?this.cache[E].files:this.cache[E].folders).find(m=>m.name===W.name);v&&(M[v.name]=v)}return M}addEntities(y,a,M=g.VC.FILE){const E=this.createKey(y);return!!this.cache.hasOwnProperty(E)&&(Array.isArray(a)||(a=[a]),M===g.VC.FILE?this.cache[E].files.unshift(...a):this.cache[E].folders.unshift(...a),!0)}removeEntities(y,a,M=g.VC.FILE){if(Array.isArray(a)||(a=[a]),M===g.VC.FOLDER)for(const m of a)this.removeItem([...y,m]);const E=this.createKey(y);if(!this.cache.hasOwnProperty(E))return[];const W=M===g.VC.FILE?"files":"folders";let v=[];for(const m of a){const j=this.cache[E][W].findIndex(k=>k.name===m);j>-1&&(this.cache[E][W].splice(j,1),v.push(m))}return v}refactorFolderContent(y,a){const M=this.createKey(y);if(!this.cache.hasOwnProperty(M))return!1;a.endsWith("/")||(a+="/");for(const E of this.cache[M].folders)E.url=a+E.name;for(const E of this.cache[M].files)E.url=E.embedUrl=a+E.name,E.time=Date.now();return!0}createKey(y){return`${this.ffuid}/${y.join("/")}`}ngOnDestroy(){this.profileSubscription.unsubscribe()}}return P.\u0275fac=function(y){return new(y||P)(e.LFG(O.d))},P.\u0275prov=e.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})()},5571:(ee,F,t)=>{"use strict";t.d(F,{AD:()=>O,It:()=>l,ex:()=>g,mH:()=>y,r2:()=>D,vO:()=>P,xJ:()=>e});const g="\nquery UploadEntitiesListToken($scope: String, $target: String!) {\n    uploadEntitiesListToken(scope: $scope, target: $target)\n}",O="\nquery UploadEntitiesHostToken($scope: String, $target: String!) {\n    uploadEntitiesHostToken(scope: $scope, target: $target)\n}",e="\nquery UploadEntitiesCreateDirectoryToken($scope: String, $target: String!) {\n    uploadEntitiesCreateDirectoryToken(scope: $scope, target: $target)\n}",D="\nquery UploadEntitiesMoveToken($scope: String, $source: String!, $target: String!) {\n    uploadEntitiesMoveToken(scope: $scope, source: $source, target: $target)\n}",P="\nquery UploadEntitiesDeleteToken($scope: String, $target: String!) {\n    uploadEntitiesDeleteToken(scope: $scope, target: $target)\n}",l="\nquery UploadHistoryAvailableDateRange {\n    uploadHistoryAvailableDateRange {\n        start\n        end\n    }\n}",y="\nsubscription UploadEntities($scope: String) {\n    uploadEntities(scope: $scope) {\n        eventMessage\n        eventType\n        user {\n            avatar\n            host\n            id\n            nickname\n        }\n    }\n}"},5487:(ee,F,t)=>{"use strict";t.d(F,{r:()=>P});var g=t(8645),O=t(5619),e=t(446),D=t(5879);let P=(()=>{class l{constructor(a){this.uploadPreferencesService=a,this.selectedFileListArray=[],this.actionSubject=new g.x,this.uploadingFileQueueSubject=new g.x,this.uploadingFileErrorSubject=new g.x,this.currentFolderPathSubject=new g.x,this.layoutOptionsSubject=new g.x,this.renameEntitySubject=new g.x,this.entityPendingSubject=new g.x,this.deleteFileSubject=new g.x,this.uploadedFileSubject=new g.x,this.draggedFileListSubject=new g.x,this.startUploadSubject=new g.x,this.startMoveSubject=new g.x,this.selectedFileListSubject=new O.X(this.selectedFileListArray)}get actionObservable(){return this.actionSubject.asObservable()}pushAction(a){this.actionSubject.next(a)}get layoutOptionsObservable(){return this.layoutOptionsSubject.asObservable()}pushLayoutOptions(a){this.uploadPreferencesService.layoutOptions=a,this.layoutOptionsSubject.next(a)}get currentFolderPathObservable(){return this.currentFolderPathSubject.asObservable()}pushCurrentFolderPath(a){this.uploadPreferencesService.lastFolderPath=a,this.currentFolderPathSubject.next(a)}get uploadingFileQueueObservable(){return this.uploadingFileQueueSubject.asObservable()}pushUploadingFileQueue(a){this.uploadingFileQueueSubject.next(a)}get uploadingFileErrorObservable(){return this.uploadingFileErrorSubject.asObservable()}pushUploadingFileError(a){this.uploadingFileErrorSubject.next(a)}get renameEntityObservable(){return this.renameEntitySubject.asObservable()}pushRenameEntity(a){this.renameEntitySubject.next(a)}get entityPendingObservable(){return this.entityPendingSubject.asObservable()}pushEntityPending(a){this.entityPendingSubject.next(a)}get deleteFileObservable(){return this.deleteFileSubject.asObservable()}pushDeleteFile(a){this.deleteFileSubject.next(a)}get uploadedFileObservable(){return this.uploadedFileSubject.asObservable()}pushUploadedFile(a){this.uploadedFileSubject.next(a)}get draggedFileListObservable(){return this.draggedFileListSubject.asObservable()}pushDraggedFileList(a){this.draggedFileListSubject.next(a)}get startUploadObservable(){return this.startUploadSubject.asObservable()}pushStartUpload(a){this.startUploadSubject.next(a)}get startMoveObservable(){return this.startMoveSubject.asObservable()}pushStartMove(a){this.startMoveSubject.next(a)}get selectedFileListObservable(){return this.selectedFileListSubject.asObservable()}pushSelectedFile(a){if(Array.isArray(a)||(a=[a]),0===a.length)return void(this.selectedFileListArray.length>0&&(this.selectedFileListArray=[],this.selectedFileListSubject.next(this.selectedFileListArray)));let M=!1;for(const E of a){const W=this.selectedFileListArray.findIndex(v=>v.name===E.name);E.selected?-1===W&&(this.selectedFileListArray.push({name:E.name}),M=!0):W>-1&&(this.selectedFileListArray.splice(W,1),M=!0)}M&&this.selectedFileListSubject.next(this.selectedFileListArray)}}return l.\u0275fac=function(a){return new(a||l)(D.LFG(e.p))},l.\u0275prov=D.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},446:(ee,F,t)=>{"use strict";t.d(F,{p:()=>l});var g=t(7165),O=t(463),e=t(1990),D=t(2986),P=t(5879);let l=(()=>{class y{constructor(M,E){this.preferencesService=M,this.urlQueryParamsService=E;const W=this.urlQueryParamsService.getAndDeleteParam(g.RT.UPLOAD_PATH);W&&(this.lastFolderPath=W.split("/").filter(v=>v.length>0))}get preferences(){return this.preferencesService.getItem(g.Ye.UPLOAD)||e.p0}set preferences(M){this.preferencesService.setItem(g.Ye.UPLOAD,M)}get lastFolderPath(){return(this.preferences.lastPath||e.p0.lastPath).filter(M=>M.length>0)}set lastFolderPath(M){const E=this.preferences;E.lastPath=M,this.preferences=E}get layoutOptions(){const M=e.p0.layout,E=this.preferences.layout;return E&&0===Object.keys(M).filter(W=>!E.hasOwnProperty(W)).length?E:M}set layoutOptions(M){const E=this.preferences;E.layout=M,this.preferences=E}get uploader(){const M=this.preferences.uploader||e.p0.uploader;return!M.checkImage.active&&Date.now()-M.checkImage.time>6048e5&&(M.checkImage.active=!0,this.uploader=M),M.hasOwnProperty("showLinkModal")||(M.showLinkModal=!1),M}set uploader(M){const E=this.preferences;E.uploader=M,this.preferences=E}}return y.\u0275fac=function(M){return new(M||y)(P.LFG(O.y),P.LFG(D.J))},y.\u0275prov=P.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})()},658:(ee,F,t)=>{"use strict";t.d(F,{C:()=>j});var g=t(1413),O=t(5861),e=t(2907),D=t(4036),P=t(5172),l=t(9054),y=t(5571),a=t(5983),M=t(1990),E=t(446),W=t(4004),v=t(5879),m=t(9862);let j=(()=>{class k{constructor(A,f,d,U){this.graphqlService=A,this.uploadCacheService=f,this.uploadPreferencesService=d,this.http=U}get cache(){return this.uploadCacheService}get preferences(){return this.uploadPreferencesService}setGqlIdHeader(){this.graphqlService.safeSetGlobalHeader(e._o.HeaderKeys.UUID,(0,W.Z)())}removeGqlIdHeader(){this.graphqlService.removeGlobalHeader(e._o.HeaderKeys.UUID)}getGqlIdHeader(){return this.graphqlService.getGlobalHeader(e._o.HeaderKeys.UUID)||""}getFileList(A,f){var d=this;return(0,O.Z)(function*(){const U=d.uploadCacheService.getItem(A);if(U)return U;const p=(yield d.graphqlService.query({query:y.ex,variables:{scope:f,target:A.join("/")}})).data.uploadEntitiesListToken,h=yield d.sendRequest(p),L={files:h.files.map(w=>{const Z=(0,l.Tb)(w.url);return(0,g.Z)((0,g.Z)({},w),{time:1e3*w.time,filename:Z.filename,ext:Z.ext,isImage:(0,l.Or)(Z.ext),embedUrl:`${w.url}?t=${w.time}`,type:P.VC.FILE})}),folders:h.folders.map(w=>(0,g.Z)((0,g.Z)({},w),{},{type:P.VC.FOLDER}))};return d.uploadCacheService.setItem(A,L),L})()}createDirectory(A,f){var d=this;return(0,O.Z)(function*(){const U=(yield d.graphqlService.mutate({mutation:y.xJ,variables:{scope:f,target:A.join("/")}})).data.uploadEntitiesCreateDirectoryToken;return yield d.sendRequest(U)})()}moveRenameEntity(A,f,d,U,p){var h=this;return(0,O.Z)(function*(){U||(U=d);const T=(yield h.graphqlService.mutate({mutation:y.r2,variables:{scope:p,source:(A.length?`${A.join("/")}/`:"")+d,target:(f.length?`${f.join("/")}/`:"")+U}})).data.uploadEntitiesMoveToken,L=yield h.sendRequest(T);return(0,g.Z)((0,g.Z)({},L),{},{time:1e3*L.time})})()}deleteEntity(A,f,d){var U=this;return(0,O.Z)(function*(){const p=(yield U.graphqlService.mutate({mutation:y.vO,variables:{scope:d,target:(A.length?`${A.join("/")}/`:"")+f}})).data.uploadEntitiesDeleteToken;return yield U.sendRequest(p),!0})()}getHostToken(A,f,d){var U=this;return(0,O.Z)(function*(){return(yield U.graphqlService.query({query:y.AD,variables:{scope:d,target:(A.length?`${A.join("/")}/`:"")+f}})).data.uploadEntitiesHostToken})()}sendRequest(A){var f=this;return(0,O.Z)(function*(){return(yield(0,D.z)(f.http.post(M.C7,JSON.stringify({payload:A}),{headers:{"Content-Type":"application/json"}}))).success})()}subscribeForChanges(A,f){var d=this;return(0,O.Z)(function*(){return yield d.graphqlService.subscribe({query:y.mH,variables:{scope:f}},U=>{var p;if(null===(p=U.data)||void 0===p||!p.uploadEntities)return;const h=JSON.parse(U.data.uploadEntities.eventMessage);!h.payload.customHeaders||!h.payload.customHeaders.hasOwnProperty(e._o.HeaderKeys.UUID)||h.payload.customHeaders[e._o.HeaderKeys.UUID]===d.getGqlIdHeader()||A({type:U.data.uploadEntities.eventType,message:h})})})()}}return k.\u0275fac=function(A){return new(A||k)(v.LFG(e.Jk),v.LFG(a.B),v.LFG(E.p),v.LFG(m.eN))},k.\u0275prov=v.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})()},9054:(ee,F,t)=>{"use strict";t.d(F,{$H:()=>A,JN:()=>W,LZ:()=>m,Lv:()=>y,Or:()=>K,Tb:()=>P,jL:()=>k,lY:()=>a,ok:()=>d,rQ:()=>U,rc:()=>f,zO:()=>l});var g=t(5861),O=t(1413),e=t(5172),D=t(1990);function P(p){let h=p;if(p.indexOf("/")>-1){const Z=p.split("/");h=Z[Z.length-1]}const T=h.replace(/\?.*$/,"").split("."),L=T.length>1?T[T.length-1].toLowerCase():"",w=decodeURIComponent(T.slice(0,-1).join("."));return{ext:L,filename:w,name:L?`${w}.${L}`:""}}function l(p,h={}){const T=P(p),L=Date.now();return(0,O.Z)({name:T.name,size:0,time:L,url:p,ext:T.ext,filename:T.filename,isImage:K(T.ext),embedUrl:`${p}?t=${L}`,type:e.VC.FILE},h)}function y(p){let h=p;h.endsWith("/")&&(h=h.slice(0,-1));const T=h.split("/");return{name:decodeURIComponent(T[T.length-1])}}function a(p){return{name:y(p).name,url:p,type:e.VC.FOLDER}}function M(p){return E.apply(this,arguments)}function E(){return(E=(0,g.Z)(function*(p){const h=new FileReader,T=new Promise(L=>h.addEventListener("load",()=>L(h.result)));return h.readAsDataURL(p),T})).apply(this,arguments)}function W(p){return v.apply(this,arguments)}function v(){return(v=(0,g.Z)(function*(p){const h=new DataView(yield p.arrayBuffer());if(2303741511===h.getUint32(0)&&218765834===h.getUint32(4)){if(-1===[4,6].indexOf(h.getUint8(25)))return!1;const L=Object.assign(new Image,{src:yield M(p)});yield new Promise(Q=>L.addEventListener("load",()=>Q(!0)));const w=Object.assign(document.createElement("canvas"),{width:L.width,height:L.height}).getContext("2d");if(!w)return!1;w.imageSmoothingEnabled=!1,w.drawImage(L,0,0);const Z=null==w?void 0:w.getImageData(0,0,L.width,L.height);if(Z)for(let Q=0;Q<Z.data.length;Q+=4)if(Z.data[Q+3]<255)return!0}return!1})).apply(this,arguments)}function m(p){return j.apply(this,arguments)}function j(){return(j=(0,g.Z)(function*(p){const h=Object.assign(new Image,{src:yield M(p)});return yield new Promise(T=>h.addEventListener("load",()=>T(!0))),h})).apply(this,arguments)}function k(p){return p.map(h=>({name:h.name,ext:h.ext,type:e.VC.FILE,url:h.url,embedUrl:h.embedUrl,isImage:h.isImage}))}function K(p,h=[]){return["png","apng","jpeg","jpg","jpe","gif","svg","webp"].includes(p)&&!h.includes(p)}function A(p){return K(p,["gif","svg"])}function f(p,h,T,L=[],w=""){let Z=(0,O.Z)({},D.xt);const Q=p.trim();Z.invalidLength=0===Q.length;const q=(Q+w).replace(/\s{2,}/g," ");return Z.alreadyUsed=h!==Q&&L.includes(q),Z.invalidStartOrEnd=/(^(\s|\.))|((\s|\.)$)/.test(p),Z.invalidCharacter=!(T===e.VC.FILE?D.Mi.test(p):D.er.test(p)),Z}function d(p,h){return p.join("/")===h.join("/")}function U(p){let h=[],T=[];for(const L of p)L.type===e.VC.FILE?h.push(L):T.push(L);return{[e.VC.FILE]:h,[e.VC.FOLDER]:T}}},4887:(ee,F,t)=>{"use strict";t.d(F,{q:()=>k});var g=t(5861),O=t(1413),e=t(4315),D=t.n(e),P=t(9054),l=t(9862),y=t(8645),a=t(1687),M=t(9773),E=t(1990),W=t(5487),v=function(K){return K[K.ORIENTATION=0]="ORIENTATION",K[K.CAMERA_MODEL=1]="CAMERA_MODEL",K}(v||{});class m{static findApp1Marker(A){const f=new DataView(A),d=new Set([65498,65497,65476,65474,65472,65499,65501]);for(let U=0;U<A.byteLength-2;U+=2){const p=f.getUint16(U);if(65505===p)return{offset:U,size:f.getUint16(U+2),little:18761==f.getUint16(U+8,!1)};if(d.has(p))break}}static stripAndReturnExif(A){return(0,g.Z)(function*(){const f=yield A.arrayBuffer(),d=m.findApp1Marker(f);return d?{file:new File([f.slice(0,d.offset),f.slice(d.offset+d.size+2)],A.name,{type:A.type,lastModified:A.lastModified}),exif:f.slice(d.offset,d.offset+d.size)}:{file:A}})()}static checkExifTagValue(A,f){const d=new DataView(A);if(1165519206!==d.getUint32(4,!1))return;const U=18761===d.getUint16(10,!1);let p=10;p+=d.getUint32(p+4,U);const h=d.getUint16(p,U);p+=2;for(let T=0;T<h;T++){const L=d.getUint16(p+12*T,U);if(f===v.ORIENTATION&&274===L)return d.getUint16(p+12*T+8,U);if(f===v.CAMERA_MODEL&&272===L){const w=d.getUint32(p+12*T+4,U),Z=d.getUint32(p+12*T+8,U),Q=new Uint8Array(A,Z,w),q=Array.from(Q);return String.fromCharCode.apply(null,q)}}}}var j=t(5879);let k=(()=>{class K{constructor(f,d){this.http=f,this.uploadObservablesService=d,this.requestSubscriptions=[],this.uploaderOptionsObject={compress:!0,openLinkModalAfterUpload:!1}}get uploaderOptions(){return(0,O.Z)({},this.uploaderOptionsObject)}set uploaderOptions(f){this.uploaderOptionsObject=(0,O.Z)({},f)}compressFileIfNeeded(f,d={},U=!1){return(0,g.Z)(function*(){let p=["image/png","image/jpeg"],h=(0,O.Z)({strict:!0,checkOrientation:!0,quality:.8,convertSize:1},d);const T=void 0!==h.width||void 0!==h.height;T&&(p.push("image/webp"),h.resize="cover",h.strict=d.strict||!1);const L=f.type.toLowerCase();return f.size<=1e6&&!T&&!U||-1===p.indexOf(f.type.toLowerCase())?f:("image/png"===L&&(yield(0,P.JN)(f))&&(h.convertSize=1/0),new Promise((w,Z)=>{new(D())(f,(0,O.Z)((0,O.Z)({},h),{},{success:Q=>{const q=Q instanceof Blob?new File([Q],f.name,{type:f.type,lastModified:f.lastModified}):f;w(q)},error:Z}))}))})()}getDimensionsForForcedResize(f){return(0,g.Z)(function*(){const U=yield(0,P.LZ)(f),p=U.width>U.height?"width":"height";if(U[p]>1e3)return{[p]:1e3}})()}orientAndCompressFileIfNeeded(f){var d=this;return(0,g.Z)(function*(){if(-1===["image/jpeg"].indexOf(f.type.toLowerCase()))return{file:f,compressorCheck:!1};const p=yield m.stripAndReturnExif(f),h=p.file;if(p.exif){if(void 0!==m.checkExifTagValue(p.exif,v.CAMERA_MODEL)){const Z=yield d.getDimensionsForForcedResize(f);if(Z)return{file:yield d.compressFileIfNeeded(f,(0,O.Z)({strict:!0,quality:.7},Z)),compressorCheck:!0}}if(1!==m.checkExifTagValue(p.exif,v.ORIENTATION))return{file:yield d.compressFileIfNeeded(f,{},!0),compressorCheck:!0}}return{file:h,compressorCheck:!1}})()}upload(f,d,U,p=!1){const h=new y.x,T=new FormData;T.append("payload",U),T.append("upload",f,f.name),p&&T.append("allowOverwrite","1");const L=this.http.request(new l.aW("POST",E.C7,T,{reportProgress:!0,responseType:"json"}));return this.requestSubscriptions.push(L.subscribe({next:w=>{if(w.type===l.dt.UploadProgress){if(!w.total||(d.progress=Math.round(50*w.loaded/w.total)+20,d.progress<70))return;(0,a.F)(1e3).pipe((0,M.R)(h.asObservable())).subscribe(()=>{if(d.progress<95){const q=Math.round(8*Math.random()+8);d.progress+q>95?d.progress=95:d.progress+=q}})}else if(w instanceof l.Zn){var Z,Q;if(d.progress=100,d.completed=!0,null!==(Z=w.body)&&void 0!==Z&&Z.error||null===(Q=w.body)||void 0===Q||!Q.success)d.error=!0,this.uploadObservablesService.pushUploadingFileError(d);else{d.file.url=w.body.success.url,d.file.time=Date.now(),d.file.embedUrl=`${d.file.url}?t=${d.file.time}`;const q=(0,P.Tb)(d.file.url);d.file.name=q.name,d.file.filename=q.filename}h.next(),h.complete()}},error:()=>{d.error=!0,this.uploadObservablesService.pushUploadingFileError(d),h.next(),h.complete()}})),h.asObservable()}clearPendingRequests(){for(const f of this.requestSubscriptions)f.unsubscribe();this.requestSubscriptions=[]}}return K.\u0275fac=function(f){return new(f||K)(j.LFG(l.eN),j.LFG(W.r))},K.\u0275prov=j.Yz7({token:K,factory:K.\u0275fac,providedIn:"root"}),K})()},4315:function(ee){ee.exports=function(){"use strict";function F(_,r){var s=Object.keys(_);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(_);r&&(c=c.filter(function(x){return Object.getOwnPropertyDescriptor(_,x).enumerable})),s.push.apply(s,c)}return s}function t(_){for(var r=1;r<arguments.length;r++){var s=null!=arguments[r]?arguments[r]:{};r%2?F(Object(s),!0).forEach(function(c){D(_,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(s)):F(Object(s)).forEach(function(c){Object.defineProperty(_,c,Object.getOwnPropertyDescriptor(s,c))})}return _}function O(_,r){for(var s=0;s<r.length;s++){var c=r[s];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(_,y(c.key),c)}}function D(_,r,s){return(r=y(r))in _?Object.defineProperty(_,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):_[r]=s,_}function P(){return P=Object.assign?Object.assign.bind():function(_){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(_[c]=s[c])}return _},P.apply(this,arguments)}function y(_){var r=function l(_,r){if("object"!=typeof _||null===_)return _;var s=_[Symbol.toPrimitive];if(void 0!==s){var c=s.call(_,r||"default");if("object"!=typeof c)return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(_)}(_,"string");return"symbol"==typeof r?r:String(r)}var _,r,s,c,x,b,H,N,a={exports:{}};_=a,typeof window>"u"||(r=window,s=r.HTMLCanvasElement&&r.HTMLCanvasElement.prototype,c=r.Blob&&function(){try{return!!new Blob}catch(S){return!1}}(),x=c&&r.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(S){return!1}}(),b=r.BlobBuilder||r.WebKitBlobBuilder||r.MozBlobBuilder||r.MSBlobBuilder,H=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,N=(c||b)&&r.atob&&r.ArrayBuffer&&r.Uint8Array&&function(S){var R,J,$,te,V,o,I,n,u;if(!(R=S.match(H)))throw new Error("invalid data URI");for(J=R[2]?R[1]:"text/plain"+(R[3]||";charset=US-ASCII"),$=!!R[4],te=S.slice(R[0].length),V=$?atob(te):decodeURIComponent(te),o=new ArrayBuffer(V.length),I=new Uint8Array(o),n=0;n<V.length;n+=1)I[n]=V.charCodeAt(n);return c?new Blob([x?I:o],{type:J}):((u=new b).append(o),u.getBlob(J))},r.HTMLCanvasElement&&!s.toBlob&&(s.mozGetAsFile?s.toBlob=function(S,R,J){var $=this;setTimeout(function(){S(J&&s.toDataURL&&N?N($.toDataURL(R,J)):$.mozGetAsFile("blob",R))})}:s.toDataURL&&N&&(s.toBlob=s.msToBlob?function(S,R,J){var $=this;setTimeout(function(){S((R&&"image/png"!==R||J)&&s.toDataURL&&N?N($.toDataURL(R,J)):$.msToBlob(R))})}:function(S,R,J){var $=this;setTimeout(function(){S(N($.toDataURL(R,J)))})})),_.exports?_.exports=N:r.dataURLtoBlob=N);var M=a.exports,W={strict:!0,checkOrientation:!0,retainExif:!1,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},m=typeof window<"u"&&typeof window.document<"u"?window:{},j=function(r){return r>0&&r<1/0},k=Array.prototype.slice;function K(_){return Array.from?Array.from(_):k.call(_)}var A=/^image\/.+$/;function f(_){return A.test(_)}var U=String.fromCharCode;var h=m.btoa;function T(_,r){for(var s=[],x=new Uint8Array(_);x.length>0;)s.push(U.apply(null,K(x.subarray(0,8192)))),x=x.subarray(8192);return"data:".concat(r,";base64,").concat(h(s.join("")))}function L(_){var s,r=new DataView(_);try{var c,x,b;if(255===r.getUint8(0)&&216===r.getUint8(1))for(var H=r.byteLength,N=2;N+1<H;){if(255===r.getUint8(N)&&225===r.getUint8(N+1)){x=N;break}N+=1}if(x){var R=x+10;if("Exif"===function p(_,r,s){var x,c="";for(s+=r,x=r;x<s;x+=1)c+=U(_.getUint8(x));return c}(r,x+4,4)){var J=r.getUint16(R);if(((c=18761===J)||19789===J)&&42===r.getUint16(R+2,c)){var $=r.getUint32(R+4,c);$>=8&&(b=R+$)}}}if(b){var V,o,te=r.getUint16(b,c);for(o=0;o<te;o+=1)if(274===r.getUint16(V=b+12*o+2,c)){s=r.getUint16(V+=8,c),r.setUint16(V,1,c);break}}}catch(I){s=1}return s}var Z=/\.\d*(?:0|9){12}\d*$/;function Q(_){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return Z.test(_)?Math.round(_*r)/r:_}function q(_){var r=_.aspectRatio,s=_.height,c=_.width,x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",b=j(c),H=j(s);if(b&&H){var N=s*r;("contain"===x||"none"===x)&&N>c||"cover"===x&&N<c?s=c/r:c=s*r}else b?s=c/r:H&&(c=s*r);return{width:c,height:s}}var me=m.ArrayBuffer,ue=m.FileReader,oe=m.URL||m.webkitURL,ve=/\.\w+$/,Ee=m.Compressor,Oe=function(){function _(r,s){(function g(_,r){if(!(_ instanceof r))throw new TypeError("Cannot call a class as a function")})(this,_),this.file=r,this.exif=[],this.image=new Image,this.options=t(t({},W),s),this.aborted=!1,this.result=null,this.init()}return function e(_,r,s){return r&&O(_.prototype,r),s&&O(_,s),Object.defineProperty(_,"prototype",{writable:!1}),_}(_,[{key:"init",value:function(){var s=this,c=this.file,x=this.options;if(function(r){return!(typeof Blob>"u")&&(r instanceof Blob||"[object Blob]"===Object.prototype.toString.call(r))}(c)){var b=c.type;if(f(b))if(oe&&ue){me||(x.checkOrientation=!1,x.retainExif=!1);var H="image/jpeg"===b,N=H&&x.checkOrientation,S=H&&x.retainExif;if(!oe||N||S){var R=new ue;this.reader=R,R.onload=function(J){var te=J.target.result,V={},o=1;N&&(o=L(te))>1&&P(V,function w(_){var r=0,s=1,c=1;switch(_){case 2:s=-1;break;case 3:r=-180;break;case 4:c=-1;break;case 5:r=90,c=-1;break;case 6:r=90;break;case 7:r=90,s=-1;break;case 8:r=-90}return{rotate:r,scaleX:s,scaleY:c}}(o)),S&&(s.exif=function he(_){for(var r=K(new Uint8Array(_)),s=r.length,c=[],x=0;x+3<s;){var b=r[x],H=r[x+1];if(255===b&&218===H)break;if(255===b&&216===H)x+=2;else{var S=x+(256*r[x+2]+r[x+3])+2,R=r.slice(x,S);c.push(R),x=S}}return c.reduce(function(J,$){return 255===$[0]&&225===$[1]?J.concat($):J},[])}(te)),V.url=N||S?!oe||o>1?T(te,b):oe.createObjectURL(c):te,s.load(V)},R.onabort=function(){s.fail(new Error("Aborted to read the image with FileReader."))},R.onerror=function(){s.fail(new Error("Failed to read the image with FileReader."))},R.onloadend=function(){s.reader=null},N||S?R.readAsArrayBuffer(c):R.readAsDataURL(c)}else this.load({url:oe.createObjectURL(c)})}else this.fail(new Error("The current browser does not support image compression."));else this.fail(new Error("The first argument must be an image File or Blob object."))}else this.fail(new Error("The first argument must be a File or Blob object."))}},{key:"load",value:function(s){var c=this,x=this.file,b=this.image;b.onload=function(){c.draw(t(t({},s),{},{naturalWidth:b.naturalWidth,naturalHeight:b.naturalHeight}))},b.onabort=function(){c.fail(new Error("Aborted to load the image."))},b.onerror=function(){c.fail(new Error("Failed to load the image."))},m.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(m.navigator.userAgent)&&(b.crossOrigin="anonymous"),b.alt=x.name,b.src=s.url}},{key:"draw",value:function(s){var c=this,x=s.naturalWidth,b=s.naturalHeight,H=s.rotate,N=void 0===H?0:H,S=s.scaleX,R=void 0===S?1:S,J=s.scaleY,$=void 0===J?1:J,te=this.file,V=this.image,o=this.options,I=document.createElement("canvas"),n=I.getContext("2d"),u=Math.abs(N)%180==90,i=("contain"===o.resize||"cover"===o.resize)&&j(o.width)&&j(o.height),C=Math.max(o.maxWidth,0)||1/0,B=Math.max(o.maxHeight,0)||1/0,G=Math.max(o.minWidth,0)||0,ne=Math.max(o.minHeight,0)||0,re=x/b,X=o.width,Y=o.height;if(u){var ae=[B,C];C=ae[0],B=ae[1];var z=[ne,G];G=z[0],ne=z[1];var se=[Y,X];X=se[0],Y=se[1]}i&&(re=X/Y);var ie=q({aspectRatio:re,width:C,height:B},"contain");C=ie.width,B=ie.height;var le=q({aspectRatio:re,width:G,height:ne},"cover");if(G=le.width,ne=le.height,i){var de=q({aspectRatio:re,width:X,height:Y},o.resize);X=de.width,Y=de.height}else{var ge=q({aspectRatio:re,width:X,height:Y}),Pe=ge.width;X=void 0===Pe?x:Pe;var be=ge.height;Y=void 0===be?b:be}var Fe=-(X=Math.floor(Q(Math.min(Math.max(X,G),C))))/2,We=-(Y=Math.floor(Q(Math.min(Math.max(Y,ne),B))))/2,Be=X,je=Y,Me=[];if(i){var ye,Ue,De=q({aspectRatio:re,width:x,height:b},{contain:"cover",cover:"contain"}[o.resize]);Me.push((x-(ye=De.width))/2,(b-(Ue=De.height))/2,ye,Ue)}if(Me.push(Fe,We,Be,je),u){var Ae=[Y,X];X=Ae[0],Y=Ae[1]}I.width=X,I.height=Y,f(o.mimeType)||(o.mimeType=te.type);var Ie="transparent";te.size>o.convertSize&&o.convertTypes.indexOf(o.mimeType)>=0&&(o.mimeType="image/jpeg");var Le="image/jpeg"===o.mimeType;if(Le&&(Ie="#fff"),n.fillStyle=Ie,n.fillRect(0,0,X,Y),o.beforeDraw&&o.beforeDraw.call(this,n,I),!this.aborted&&(n.save(),n.translate(X/2,Y/2),n.rotate(N*Math.PI/180),n.scale(R,$),n.drawImage.apply(n,[V].concat(Me)),n.restore(),o.drew&&o.drew.call(this,n,I),!this.aborted)){var Se=function(pe){if(!c.aborted){var Re=function(_e){return c.done({naturalWidth:x,naturalHeight:b,result:_e})};if(pe&&Le&&o.retainExif&&c.exif&&c.exif.length>0){var we=function(_e){return Re(M(T(function fe(_,r){var s=K(new Uint8Array(_));if(255!==s[2]||224!==s[3])return _;var x=[255,216].concat(r,s.slice(4+(256*s[4]+s[5])));return new Uint8Array(x)}(_e,c.exif),o.mimeType)))};if(pe.arrayBuffer)pe.arrayBuffer().then(we).catch(function(){c.fail(new Error("Failed to read the compressed image with Blob.arrayBuffer()."))});else{var ce=new ue;c.reader=ce,ce.onload=function(xe){we(xe.target.result)},ce.onabort=function(){c.fail(new Error("Aborted to read the compressed image with FileReader."))},ce.onerror=function(){c.fail(new Error("Failed to read the compressed image with FileReader."))},ce.onloadend=function(){c.reader=null},ce.readAsArrayBuffer(pe)}}else Re(pe)}};I.toBlob?I.toBlob(Se,o.mimeType,o.quality):Se(M(I.toDataURL(o.mimeType,o.quality)))}}},{key:"done",value:function(s){var c=s.naturalWidth,x=s.naturalHeight,b=s.result,H=this.file,N=this.image,S=this.options;if(oe&&0===N.src.indexOf("blob:")&&oe.revokeObjectURL(N.src),b)if(S.strict&&!S.retainExif&&b.size>H.size&&S.mimeType===H.type&&!(S.width>c||S.height>x||S.minWidth>c||S.minHeight>x||S.maxWidth<c||S.maxHeight<x))b=H;else{var R=new Date;b.lastModified=R.getTime(),b.lastModifiedDate=R,b.name=H.name,b.name&&b.type!==H.type&&(b.name=b.name.replace(ve,function d(_){var r=f(_)?_.substr(6):"";return"jpeg"===r&&(r="jpg"),".".concat(r)}(b.type)))}else b=H;this.result=b,S.success&&S.success.call(this,b)}},{key:"fail",value:function(s){var c=this.options;if(!c.error)throw s;c.error.call(this,s)}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],[{key:"noConflict",value:function(){return window.Compressor=Ee,_}},{key:"setDefaults",value:function(s){P(W,s)}}]),_}();return Oe}()},1687:(ee,F,t)=>{"use strict";t.d(F,{F:()=>e});var g=t(6321),O=t(4825);function e(D=0,P=g.z){return D<0&&(D=0),(0,O.H)(D,D,P)}},4004:(ee,F,t)=>{"use strict";t.d(F,{Z:()=>W});const O={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let e;const D=new Uint8Array(16);function P(){if(!e&&(e=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!e))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(D)}const l=[];for(let v=0;v<256;++v)l.push((v+256).toString(16).slice(1));const W=function E(v,m,j){if(O.randomUUID&&!m&&!v)return O.randomUUID();const k=(v=v||{}).random||(v.rng||P)();if(k[6]=15&k[6]|64,k[8]=63&k[8]|128,m){j=j||0;for(let K=0;K<16;++K)m[j+K]=k[K];return m}return function y(v,m=0){return(l[v[m+0]]+l[v[m+1]]+l[v[m+2]]+l[v[m+3]]+"-"+l[v[m+4]]+l[v[m+5]]+"-"+l[v[m+6]]+l[v[m+7]]+"-"+l[v[m+8]]+l[v[m+9]]+"-"+l[v[m+10]]+l[v[m+11]]+l[v[m+12]]+l[v[m+13]]+l[v[m+14]]+l[v[m+15]]).toLowerCase()}(k)}}}]);