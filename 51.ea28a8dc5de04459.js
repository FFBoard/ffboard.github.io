"use strict";(self.webpackChunkboard=self.webpackChunkboard||[]).push([[51],{4704:(se,H,y)=>{y.d(H,{d:()=>D});var p=y(4650),e=y(4006),x=y(699),v=y(8244),F=y(6378),E=y(6212);const I=["app-custom-form",""],j=[[["","buttons",""]]],A=["[buttons]"];let D=(()=>{class V{constructor(S,d,C){this.formlyJsonschema=S,this.customFormSchemaService=d,this.toastService=C,this.model={},this.validateSchema=!1,this.enableModelChangeEvent=!1,this.defaultModel={},this.cancelEvent=new p.vpe,this.submitEvent=new p.vpe,this.validityChangeEvent=new p.vpe,this.modelChangeEvent=new p.vpe,this.form=new e.nJ({}),this.fields=[],this.options={},this.isFormCurrentlyValid=!0}ngOnInit(){this.createFields()}ngOnChanges(S){S.schema&&!S.schema.firstChange&&this.createFields()}createFields(){this.customFormSchemaService.isObject(this.schema)||(this.schema={}),this.validateSchema&&this.customFormSchemaService.validateSchema(this.schema),this.fields=[this.formlyJsonschema.toFieldConfig(this.schema)]}showFieldValidation(){this.cycleFields(this.fields)}showFieldValidationWithMessage(){this.showFieldValidation(),this.toastService.show({content:"Tutti i campi sono stati <strong>validati</strong>: quelli con errore sono evidenziati da un <strong>bordo rosso</strong>!"})}cycleFields(S){S.forEach(d=>{this.forceValidation(d),d.fieldGroup&&this.cycleFields(d.fieldGroup)})}forceValidation(S){S.validation||(S.validation={}),S.validation.show=!0}reset(){this.options.resetModel&&this.options.resetModel(this.defaultModel)}cancel(){this.cancelEvent.emit()}submit(){!this.form.valid||(this.log(),this.submitEvent.emit(this.model))}onModelChange(S){this.enableModelChangeEvent&&this.modelChangeEvent.emit(S||{}),this.form.valid!==this.isFormCurrentlyValid&&this.validityChangeEvent.emit(this.isFormCurrentlyValid=this.form.valid)}log(){}}return V.\u0275fac=function(S){return new(S||V)(p.Y36(x.c),p.Y36(v.B),p.Y36(F.k))},V.\u0275cmp=p.Xpm({type:V,selectors:[["","app-custom-form",""]],inputs:{schema:"schema",model:"model",validateSchema:"validateSchema",enableModelChangeEvent:"enableModelChangeEvent",defaultModel:"defaultModel"},outputs:{cancelEvent:"cancelEvent",submitEvent:"submitEvent",validityChangeEvent:"validityChangeEvent",modelChangeEvent:"modelChangeEvent"},features:[p.TTD],attrs:I,ngContentSelectors:A,decls:3,vars:5,consts:[[3,"formGroup","ngSubmit"],[3,"model","fields","form","options","modelChange"]],template:function(S,d){1&S&&(p.F$t(j),p.TgZ(0,"form",0),p.NdJ("ngSubmit",function(){return d.submit()}),p.TgZ(1,"formly-form",1),p.NdJ("modelChange",function(b){return d.onModelChange(b)}),p.qZA(),p.Hsn(2),p.qZA()),2&S&&(p.Q6J("formGroup",d.form),p.xp6(1),p.Q6J("model",d.model)("fields",d.fields)("form",d.form)("options",d.options))},dependencies:[E.T7,e._Y,e.JL,e.sg]}),V})()},3492:(se,H,y)=>{y.d(H,{I:()=>gn});var p=y(6895),e=y(4650),x=y(6212),v=y(4006);function F(o,s){1&o&&(e.TgZ(0,"span",9),e._uU(1,"*"),e.qZA())}function E(o,s){if(1&o&&(e.TgZ(0,"label",7),e._uU(1),e.YNc(2,F,2,0,"span",8),e.qZA()),2&o){const t=e.oxw(2);e.uIk("for",t.id),e.xp6(1),e.hij(" ",t.props.label," "),e.xp6(1),e.Q6J("ngIf",t.props.required&&!0!==t.props.hideRequiredMarker)}}function I(o,s){if(1&o&&e.YNc(0,E,3,3,"label",6),2&o){const t=e.oxw();e.Q6J("ngIf",t.props.label&&!0!==t.props.hideLabel)}}function j(o,s){if(1&o&&(e.ynx(0),e.GkF(1,10),e.BQk()),2&o){e.oxw();const t=e.MAs(1);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function A(o,s){}function D(o,s){if(1&o&&(e.ynx(0),e.GkF(1,10),e.BQk()),2&o){e.oxw();const t=e.MAs(1);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function V(o,s){if(1&o&&(e.TgZ(0,"div",11),e._UZ(1,"formly-validation-message",12),e.qZA()),2&o){const t=e.oxw();e.Udp("display","block"),e.xp6(1),e.Q6J("field",t.field)}}function T(o,s){if(1&o&&(e.TgZ(0,"small",13),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.props.description)}}const S=["fieldTypeTemplate"];let d=(()=>{class o extends x.n2{}return o.\u0275fac=function(){let s;return function(a){return(s||(s=e.n5z(o)))(a||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-wrapper-form-field"]],features:[e.qOj],decls:9,vars:8,consts:[["labelTemplate",""],[1,"mb-3"],[4,"ngIf"],["fieldComponent",""],["class","invalid-feedback",3,"display",4,"ngIf"],["class","form-text text-muted",4,"ngIf"],["class","form-label",4,"ngIf"],[1,"form-label"],["aria-hidden","true",4,"ngIf"],["aria-hidden","true"],[3,"ngTemplateOutlet"],[1,"invalid-feedback"],[3,"field"],[1,"form-text","text-muted"]],template:function(t,a){1&t&&(e.YNc(0,I,1,1,"ng-template",null,0,e.W1O),e.TgZ(2,"div",1),e.YNc(3,j,2,1,"ng-container",2),e.YNc(4,A,0,0,"ng-template",null,3,e.W1O),e.YNc(6,D,2,1,"ng-container",2),e.YNc(7,V,2,3,"div",4),e.YNc(8,T,2,1,"small",5),e.qZA()),2&t&&(e.xp6(2),e.ekj("form-floating","floating"===a.props.labelPosition)("has-error",a.showError),e.xp6(1),e.Q6J("ngIf","floating"!==a.props.labelPosition),e.xp6(3),e.Q6J("ngIf","floating"===a.props.labelPosition),e.xp6(1),e.Q6J("ngIf",a.showError),e.xp6(1),e.Q6J("ngIf",a.props.description))},dependencies:[x.M2,p.O5,p.tP],encapsulation:2}),o})(),C=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[p.ez,v.UX,x.X0.forChild({wrappers:[{name:"form-field",component:d}]})]]}),o})(),b=(()=>{class o extends x.fS{constructor(t){super(),this.hostContainerRef=t}set content(t){t&&this.hostContainerRef&&this.hostContainerRef.createEmbeddedView(t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.s_b,8))},o.\u0275dir=e.lG2({type:o,viewQuery:function(t,a){if(1&t&&e.Gf(S,7),2&t){let m;e.iGM(m=e.CRH())&&(a.content=m.first)}},features:[e.qOj]}),o})();function M(o,s){if(1&o&&e._UZ(0,"input",3),2&o){const t=e.oxw(2);e.ekj("is-invalid",t.showError),e.Q6J("type",t.type)("formControl",t.formControl)("formlyAttributes",t.field)}}function h(o,s){if(1&o&&e._UZ(0,"input",4),2&o){const t=e.oxw(2);e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("formlyAttributes",t.field)}}function _(o,s){if(1&o&&(e.YNc(0,M,1,5,"input",1),e.YNc(1,h,1,4,"ng-template",null,2,e.W1O)),2&o){const t=e.MAs(2),a=e.oxw();e.Q6J("ngIf","number"!==a.type)("ngIfElse",t)}}let P=(()=>{class o extends b{get type(){return this.props.type||"text"}}return o.\u0275fac=function(){let s;return function(a){return(s||(s=e.n5z(o)))(a||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-input"]],features:[e.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],["class","form-control",3,"type","formControl","formlyAttributes","is-invalid",4,"ngIf","ngIfElse"],["numberTmp",""],[1,"form-control",3,"type","formControl","formlyAttributes"],["type","number",1,"form-control",3,"formControl","formlyAttributes"]],template:function(t,a){1&t&&e.YNc(0,_,3,2,"ng-template",null,0,e.W1O)},dependencies:[p.O5,v.Fj,v.JJ,v.oH,x.JD,v.wV],encapsulation:2,changeDetection:0}),o})(),w=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[p.ez,v.UX,C,x.X0.forChild({types:[{name:"input",component:P,wrappers:["form-field"]},{name:"string",extends:"input"},{name:"number",extends:"input",defaultOptions:{props:{type:"number"}}},{name:"integer",extends:"input",defaultOptions:{props:{type:"number"}}}]})]]}),o})();function R(o,s){if(1&o&&(e.TgZ(0,"textarea",1),e._uU(1,"      "),e.qZA()),2&o){const t=e.oxw();e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("cols",t.props.cols)("rows",t.props.rows)("formlyAttributes",t.field)}}let Z=(()=>{class o extends b{constructor(){super(...arguments),this.defaultOptions={props:{cols:1,rows:1}}}}return o.\u0275fac=function(){let s;return function(a){return(s||(s=e.n5z(o)))(a||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-textarea"]],features:[e.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],[1,"form-control",3,"formControl","cols","rows","formlyAttributes"]],template:function(t,a){1&t&&e.YNc(0,R,2,6,"ng-template",null,0,e.W1O)},dependencies:[v.Fj,v.JJ,v.oH,x.JD],encapsulation:2,changeDetection:0}),o})(),N=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[p.ez,v.UX,C,x.X0.forChild({types:[{name:"textarea",component:Z,wrappers:["form-field"]}]})]]}),o})();var k=y(9751),L=y(1135),K=y(4004),G=y(9300),ie=y(8505);let X=(()=>{class o{transform(t,a){return t instanceof k.y?this.dispose():t=this.observableOf(t,a),t.pipe((0,K.U)(m=>this.transformOptions(m,a)))}ngOnDestroy(){this.dispose()}transformOptions(t,a){const m=this.transformSelectProps(a),O=[],Q={};return t?.forEach(z=>{const W=this.transformOption(z,m);if(W.group){const de=Q[W.label];void 0===de?Q[W.label]=O.push(W)-1:W.group.forEach(Me=>O[de].group.push(Me))}else O.push(W)}),O}transformOption(t,a){const m=a.groupProp(t);return Array.isArray(m)?{label:a.labelProp(t),group:m.map(O=>this.transformOption(O,a))}:(t={label:a.labelProp(t),value:a.valueProp(t),disabled:!!a.disabledProp(t)},m?{label:m,group:[t]}:t)}transformSelectProps(t){const a=t?.props||t?.templateOptions||{},m=O=>"function"==typeof O?O:Q=>Q[O];return{groupProp:m(a.groupProp||"group"),labelProp:m(a.labelProp||"label"),valueProp:m(a.valueProp||"value"),disabledProp:m(a.disabledProp||"disabled")}}dispose(){this._options&&(this._options.complete(),this._options=null),this._subscription&&(this._subscription.unsubscribe(),this._subscription=null)}observableOf(t,a){return this.dispose(),a&&a.options&&a.options.fieldChanges&&(this._subscription=a.options.fieldChanges.pipe((0,G.h)(({property:m,type:O,field:Q})=>"expressionChanges"===O&&(0===m.indexOf("templateOptions.options")||0===m.indexOf("props.options"))&&Q===a&&Array.isArray(Q.props.options)&&!!this._options),(0,ie.b)(()=>this._options.next(a.props.options))).subscribe()),this._options=new L.X(t),this._options.asObservable()}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275pipe=e.Yjl({name:"formlySelectOptions",type:o,pure:!0}),o})(),te=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({}),o})();function oe(o,s){if(1&o&&(e.TgZ(0,"div",2),e._UZ(1,"input",3),e.TgZ(2,"label",4),e._uU(3),e.qZA()()),2&o){const t=s.$implicit,a=s.index,m=e.oxw(2);e.ekj("form-check-inline","inline"===m.props.formCheck),e.xp6(1),e.ekj("is-invalid",m.showError),e.Q6J("id",m.id+"_"+a)("name",m.field.name||m.id)("value",t.value)("formControl",t.disabled?m.disabledControl:m.formControl)("formlyAttributes",m.field),e.uIk("value",t.value),e.xp6(1),e.Q6J("for",m.id+"_"+a),e.xp6(1),e.hij(" ",t.label," ")}}function ue(o,s){if(1&o&&(e.YNc(0,oe,4,12,"div",1),e.ALo(1,"async"),e.ALo(2,"formlySelectOptions")),2&o){const t=e.oxw();e.Q6J("ngForOf",e.lcZ(1,1,e.xi3(2,3,t.props.options,t.field)))}}let Ee=(()=>{class o extends b{constructor(){super(...arguments),this.defaultOptions={props:{formCheck:"default"}}}get disabledControl(){return new v.NI({value:this.formControl.value,disabled:!0})}}return o.\u0275fac=function(){let s;return function(a){return(s||(s=e.n5z(o)))(a||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-radio"]],features:[e.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],["class","form-check",3,"form-check-inline",4,"ngFor","ngForOf"],[1,"form-check"],["type","radio",1,"form-check-input",3,"id","name","value","formControl","formlyAttributes"],[1,"form-check-label",3,"for"]],template:function(t,a){1&t&&e.YNc(0,ue,3,6,"ng-template",null,0,e.W1O)},dependencies:[p.sg,v._,v.Fj,v.JJ,v.oH,x.JD,p.Ov,X],encapsulation:2,changeDetection:0}),o})(),fe=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[p.ez,v.UX,C,te,x.X0.forChild({types:[{name:"radio",component:Ee,wrappers:["form-field"]}]})]]}),o})();function we(o,s){1&o&&(e.TgZ(0,"span",6),e._uU(1,"*"),e.qZA())}function ee(o,s){if(1&o&&(e.TgZ(0,"label",4),e._uU(1),e.YNc(2,we,2,0,"span",5),e.qZA()),2&o){const t=e.oxw(2);e.Q6J("for",t.id),e.xp6(1),e.hij(" ",t.props.label," "),e.xp6(1),e.Q6J("ngIf",t.props.required&&!0!==t.props.hideRequiredMarker)}}const Ae=function(o,s){return{"form-check-inline":o,"form-switch":s}};function q(o,s){if(1&o&&(e.TgZ(0,"div",1),e._UZ(1,"input",2),e.YNc(2,ee,3,3,"label",3),e.qZA()),2&o){const t=e.oxw();e.Q6J("ngClass",e.WLB(9,Ae,"inline"===t.props.formCheck||"inline-switch"===t.props.formCheck,"switch"===t.props.formCheck||"inline-switch"===t.props.formCheck)),e.xp6(1),e.ekj("is-invalid",t.showError)("position-static","nolabel"===t.props.formCheck),e.Q6J("indeterminate",t.props.indeterminate&&null==t.formControl.value)("formControl",t.formControl)("formlyAttributes",t.field),e.xp6(1),e.Q6J("ngIf","nolabel"!==t.props.formCheck)}}let B=(()=>{class o extends b{constructor(){super(...arguments),this.defaultOptions={props:{indeterminate:!0,hideLabel:!0,formCheck:"default"}}}}return o.\u0275fac=function(){let s;return function(a){return(s||(s=e.n5z(o)))(a||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-checkbox"]],features:[e.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],[1,"form-check",3,"ngClass"],["type","checkbox",1,"form-check-input",3,"indeterminate","formControl","formlyAttributes"],["class","form-check-label",3,"for",4,"ngIf"],[1,"form-check-label",3,"for"],["aria-hidden","true",4,"ngIf"],["aria-hidden","true"]],template:function(t,a){1&t&&e.YNc(0,q,3,12,"ng-template",null,0,e.W1O)},dependencies:[p.mk,v.Wl,v.JJ,v.oH,x.JD,p.O5],encapsulation:2,changeDetection:0}),o})(),he=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[p.ez,v.UX,C,x.X0.forChild({types:[{name:"checkbox",component:B,wrappers:["form-field"]},{name:"boolean",extends:"checkbox"}]})]]}),o})();const Y=function(o,s){return{"form-check-inline":o,"form-switch":s}};function xe(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",2)(1,"input",3),e.NdJ("change",function(m){const Q=e.CHM(t).$implicit,z=e.oxw(2);return e.KtG(z.onChange(Q.value,m.target.checked))}),e.qZA(),e.TgZ(2,"label",4),e._uU(3),e.qZA()()}if(2&o){const t=s.$implicit,a=s.index,m=e.oxw(2);e.Q6J("ngClass",e.WLB(8,Y,"inline"===m.props.formCheck||"inline-switch"===m.props.formCheck,"switch"===m.props.formCheck||"inline-switch"===m.props.formCheck)),e.xp6(1),e.Q6J("id",m.id+"_"+a)("value",t.value)("checked",m.isChecked(t))("formlyAttributes",m.field)("disabled",m.formControl.disabled||t.disabled),e.xp6(1),e.Q6J("for",m.id+"_"+a),e.xp6(1),e.hij(" ",t.label," ")}}function ve(o,s){if(1&o&&(e.YNc(0,xe,4,11,"div",1),e.ALo(1,"async"),e.ALo(2,"formlySelectOptions")),2&o){const t=e.oxw();e.Q6J("ngForOf",e.lcZ(1,1,e.xi3(2,3,t.props.options,t.field)))}}let le=(()=>{class o extends b{constructor(){super(...arguments),this.defaultOptions={props:{formCheck:"default"}}}onChange(t,a){this.formControl.markAsDirty(),this.formControl.patchValue("array"===this.props.type?a?[...this.formControl.value||[],t]:[...this.formControl.value||[]].filter(m=>m!==t):{...this.formControl.value,[t]:a}),this.formControl.markAsTouched()}isChecked(t){const a=this.formControl.value;return a&&("array"===this.props.type?-1!==a.indexOf(t.value):a[t.value])}}return o.\u0275fac=function(){let s;return function(a){return(s||(s=e.n5z(o)))(a||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-multicheckbox"]],features:[e.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],["class","form-check",3,"ngClass",4,"ngFor","ngForOf"],[1,"form-check",3,"ngClass"],["type","checkbox",1,"form-check-input",3,"id","value","checked","formlyAttributes","disabled","change"],[1,"form-check-label",3,"for"]],template:function(t,a){1&t&&e.YNc(0,ve,3,6,"ng-template",null,0,e.W1O)},dependencies:[p.sg,p.mk,x.JD,p.Ov,X],encapsulation:2,changeDetection:0}),o})(),ne=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[p.ez,v.UX,C,te,x.X0.forChild({types:[{name:"multicheckbox",component:le,wrappers:["form-field"]}]})]]}),o})();var ae=y(5698);function ge(o,s){if(1&o&&(e.TgZ(0,"option",8),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("ngValue",t.value)("disabled",t.disabled),e.xp6(1),e.hij(" ",t.label," ")}}function be(o,s){if(1&o&&(e.TgZ(0,"option",8),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("ngValue",t.value)("disabled",t.disabled),e.xp6(1),e.hij(" ",t.label," ")}}function _e(o,s){if(1&o&&(e.TgZ(0,"optgroup",9),e.YNc(1,be,2,3,"option",10),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("label",t.label),e.xp6(1),e.Q6J("ngForOf",t.group)}}function ce(o,s){if(1&o&&(e.ynx(0),e.YNc(1,ge,2,3,"option",6),e.YNc(2,_e,2,2,"ng-template",null,7,e.W1O),e.BQk()),2&o){const t=s.$implicit,a=e.MAs(3);e.xp6(1),e.Q6J("ngIf",!t.group)("ngIfElse",a)}}function Ce(o,s){if(1&o&&(e.ynx(0),e.YNc(1,ce,4,2,"ng-container",5),e.BQk()),2&o){const t=s.ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}function ke(o,s){if(1&o&&(e.TgZ(0,"select",3),e.YNc(1,Ce,2,1,"ng-container",4),e.ALo(2,"async"),e.ALo(3,"formlySelectOptions"),e.qZA()),2&o){const t=e.oxw(2);e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("compareWith",t.props.compareWith)("formlyAttributes",t.field),e.xp6(1),e.Q6J("ngIf",e.lcZ(2,6,e.xi3(3,8,t.props.options,t.field)))}}function ye(o,s){if(1&o&&(e.TgZ(0,"option",13),e._uU(1),e.qZA()),2&o){const t=e.oxw(3);e.Q6J("ngValue",void 0),e.xp6(1),e.Oqu(t.props.placeholder)}}function Fe(o,s){if(1&o&&(e.TgZ(0,"option",8),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("ngValue",t.value)("disabled",t.disabled),e.xp6(1),e.hij(" ",t.label," ")}}function De(o,s){if(1&o&&(e.TgZ(0,"option",8),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("ngValue",t.value)("disabled",t.disabled),e.xp6(1),e.hij(" ",t.label," ")}}function Ie(o,s){if(1&o&&(e.TgZ(0,"optgroup",9),e.YNc(1,De,2,3,"option",10),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("label",t.label),e.xp6(1),e.Q6J("ngForOf",t.group)}}function pe(o,s){if(1&o&&(e.ynx(0),e.YNc(1,Fe,2,3,"option",6),e.YNc(2,Ie,2,2,"ng-template",null,7,e.W1O),e.BQk()),2&o){const t=s.$implicit,a=e.MAs(3);e.xp6(1),e.Q6J("ngIf",!t.group)("ngIfElse",a)}}function Pe(o,s){if(1&o&&(e.ynx(0),e.YNc(1,pe,4,2,"ng-container",5),e.BQk()),2&o){const t=s.ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}function Se(o,s){if(1&o&&(e.TgZ(0,"select",11),e.YNc(1,ye,2,2,"option",12),e.YNc(2,Pe,2,1,"ng-container",4),e.ALo(3,"async"),e.ALo(4,"formlySelectOptions"),e.qZA()),2&o){const t=e.oxw(2);e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("compareWith",t.props.compareWith)("formlyAttributes",t.field),e.xp6(1),e.Q6J("ngIf",t.props.placeholder),e.xp6(1),e.Q6J("ngIf",e.lcZ(3,7,e.xi3(4,9,t.props.options,t.field)))}}function Je(o,s){if(1&o&&(e.YNc(0,ke,4,11,"select",1),e.YNc(1,Se,5,12,"ng-template",null,2,e.W1O)),2&o){const t=e.MAs(2),a=e.oxw();e.Q6J("ngIf",a.props.multiple)("ngIfElse",t)}}let Le=(()=>{class o extends b{constructor(t,a){super(a),this.ngZone=t,this.defaultOptions={props:{compareWith:(m,O)=>m===O}}}set selectAccessor(t){if(!t)return;const a=t.writeValue.bind(t);null===t._getOptionId(t.value)&&a(t.value),t.writeValue=m=>{const O=t._idCounter;a(m),null===m&&this.ngZone.onStable.asObservable().pipe((0,ae.q)(1)).subscribe(()=>{O!==t._idCounter&&null===t._getOptionId(m)&&-1!==t._elementRef.nativeElement.selectedIndex&&a(m)})}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.R0b),e.Y36(e.s_b))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-select"]],viewQuery:function(t,a){if(1&t&&e.Gf(v.EJ,5),2&t){let m;e.iGM(m=e.CRH())&&(a.selectAccessor=m.first)}},features:[e.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],["class","form-select","multiple","",3,"formControl","compareWith","is-invalid","formlyAttributes",4,"ngIf","ngIfElse"],["singleSelect",""],["multiple","",1,"form-select",3,"formControl","compareWith","formlyAttributes"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngValue","disabled",4,"ngIf","ngIfElse"],["optgroup",""],[3,"ngValue","disabled"],[3,"label"],[3,"ngValue","disabled",4,"ngFor","ngForOf"],[1,"form-select",3,"formControl","compareWith","formlyAttributes"],[3,"ngValue",4,"ngIf"],[3,"ngValue"]],template:function(t,a){1&t&&e.YNc(0,Je,3,2,"ng-template",null,0,e.W1O)},dependencies:[p.O5,v.K7,v.JJ,v.oH,x.JD,p.sg,v.YN,v.Kr,v.EJ,p.Ov,X],encapsulation:2,changeDetection:0}),o})(),je=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[p.ez,v.UX,C,te,x.X0.forChild({types:[{name:"select",component:Le,wrappers:["form-field"]},{name:"enum",extends:"select"}]})]]}),o})();const Ue=["fieldTypeTemplate"];function Ze(o,s){if(1&o&&e._UZ(0,"i",7),2&o){const t=e.oxw(3);e.Q6J("ngClass",t.props.addonLeft.class)}}function Qe(o,s){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Oqu(t.props.addonLeft.text)}}function Re(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",4),e.NdJ("click",function(m){e.CHM(t);const O=e.oxw(2);return e.KtG(O.addonLeftClick(m))}),e.YNc(1,Ze,1,1,"i",5),e.YNc(2,Qe,2,1,"span",6),e.qZA()}if(2&o){const t=e.oxw(2);e.ekj("input-group-btn",t.props.addonLeft.onClick),e.xp6(1),e.Q6J("ngIf",t.props.addonLeft.class),e.xp6(1),e.Q6J("ngIf",t.props.addonLeft.text)}}function Ve(o,s){if(1&o&&e._UZ(0,"i",7),2&o){const t=e.oxw(3);e.Q6J("ngClass",t.props.addonRight.class)}}function Be(o,s){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Oqu(t.props.addonRight.text)}}function Oe(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",4),e.NdJ("click",function(m){e.CHM(t);const O=e.oxw(2);return e.KtG(O.addonRightClick(m))}),e.YNc(1,Ve,1,1,"i",5),e.YNc(2,Be,2,1,"span",6),e.qZA()}if(2&o){const t=e.oxw(2);e.ekj("input-group-btn",t.props.addonRight.onClick),e.xp6(1),e.Q6J("ngIf",t.props.addonRight.class),e.xp6(1),e.Q6J("ngIf",t.props.addonRight.text)}}function Ne(o,s){if(1&o&&(e.TgZ(0,"div",1),e.YNc(1,Re,3,4,"div",2),e.GkF(2,null,3),e.YNc(4,Oe,3,4,"div",2),e.qZA()),2&o){const t=e.oxw();e.ekj("has-validation",t.showError),e.xp6(1),e.Q6J("ngIf",t.props.addonLeft),e.xp6(3),e.Q6J("ngIf",t.props.addonRight)}}let c=(()=>{class o extends x.n2{constructor(t){super(),this.hostContainerRef=t}set content(t){t&&this.hostContainerRef&&this.hostContainerRef.createEmbeddedView(t)}addonRightClick(t){this.props.addonRight.onClick?.(this.field,t)}addonLeftClick(t){this.props.addonLeft.onClick?.(this.field,t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.s_b))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-wrapper-addons"]],viewQuery:function(t,a){if(1&t&&e.Gf(Ue,7),2&t){let m;e.iGM(m=e.CRH())&&(a.content=m.first)}},features:[e.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],[1,"input-group"],["class","input-group-text",3,"input-group-btn","click",4,"ngIf"],["fieldComponent",""],[1,"input-group-text",3,"click"],[3,"ngClass",4,"ngIf"],[4,"ngIf"],[3,"ngClass"]],template:function(t,a){1&t&&e.YNc(0,Ne,5,4,"ng-template",null,0,e.W1O)},dependencies:[p.O5,p.mk],styles:["formly-wrapper-form-field .input-group-btn{cursor:pointer}\n"],encapsulation:2}),o})();function i(o){!o.props||o.wrappers&&-1!==o.wrappers.indexOf("addons")||(o.props.addonLeft||o.props.addonRight)&&(o.wrappers=[...o.wrappers||[],"addons"])}let n=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[p.ez,v.UX,x.X0.forChild({wrappers:[{name:"addons",component:c}],extensions:[{name:"addons",extension:{postPopulate:i}}]})]]}),o})(),r=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[C,w,N,fe,he,ne,je,n]]}),o})();var l=y(1481);let u=(()=>{class o{constructor(t){this.domSanitizer=t,this.validBBCodes=[{regstring:"\\[b](.+?)\\[/b]",replacement:"<strong>$1</strong>"},{regstring:"\\[i](.+?)\\[/i]",replacement:"<em>$1</em>"},{regstring:"\\[u](.+?)\\[/u]",replacement:"<u>$1</u>"},{regstring:"\\[ul](.+?)\\[/ul]",replacement:"<ul>$1</ul>"},{regstring:"\\[ol](.+?)\\[/ol]",replacement:"<ol>$1</ol>"},{regstring:"\\[li](.+?)\\[/li]",replacement:"<li>$1</li>"},{regstring:"\\[br]",replacement:"<br>"}];for(const a of this.validBBCodes)a.regexp=new RegExp(a.regstring,"gim")}parseBBCode(t){t=t.replace(/</gi,"&lt;").replace(/>/gi,"&gt;"),t=this.domSanitizer.sanitize(e.q3G.HTML,t)||"";for(const a of this.validBBCodes)t=t.replace(a.regexp,a.replacement);return t}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(l.H7))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function f(o,s){1&o&&e.GkF(0)}const g=function(o,s){return{$implicit:o,props:s}};function J(o,s){if(1&o&&(e.ynx(0),e.YNc(1,f,1,0,"ng-container",8),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngTemplateOutlet",t.customLabelTemplate)("ngTemplateOutletContext",e.WLB(2,g,t.id,t.props))}}function U(o,s){1&o&&(e.TgZ(0,"span",11),e._uU(1," *"),e.qZA())}function $(o,s){if(1&o&&(e.TgZ(0,"div"),e._UZ(1,"label",9),e.YNc(2,U,2,0,"span",10),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("innerHTML",t.parsedLabel,e.oJD),e.uIk("for",t.id),e.xp6(1),e.Q6J("ngIf",t.props.required&&!0!==t.props.hideRequiredMarker)}}function Te(o,s){if(1&o&&e.YNc(0,$,3,3,"div",2),2&o){const t=e.oxw(2);e.Q6J("ngIf",t.props.label&&!0!==t.props.hideLabel)}}function re(o,s){if(1&o&&(e.YNc(0,J,2,5,"ng-container",6),e.YNc(1,Te,1,1,"ng-template",null,7,e.W1O)),2&o){const t=e.MAs(2),a=e.oxw();e.Q6J("ngIf",a.hasCustomLabelTemplate)("ngIfElse",t)}}function Ke(o,s){if(1&o&&(e.ynx(0),e.GkF(1,12),e.BQk()),2&o){e.oxw();const t=e.MAs(1);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function ze(o,s){}function Xe(o,s){if(1&o&&(e.ynx(0),e.GkF(1,12),e.BQk()),2&o){e.oxw();const t=e.MAs(1);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function et(o,s){if(1&o&&(e.TgZ(0,"div",13),e._UZ(1,"formly-validation-message",14),e.qZA()),2&o){const t=e.oxw();e.Udp("display","block"),e.xp6(1),e.Q6J("field",t.field)}}function tt(o,s){if(1&o&&e._UZ(0,"div",15),2&o){const t=e.oxw();e.Q6J("innerHTML",t.parsedDescription,e.oJD)}}let ot=(()=>{class o extends x.n2{constructor(t){super(),this.customFormUtilsService=t,this.hasCustomLabelTemplate=!1,this.parsedDescription="",this.parsedLabel=""}ngOnInit(){this.hasCustomLabelTemplate=!(!this.props.customLabelTemplate||!this.props.customLabelTemplate.elementRef),this.parsedDescription=this.props.description?this.customFormUtilsService.parseBBCode(this.props.description):"",this.parsedLabel=!this.hasCustomLabelTemplate&&this.props.label?this.customFormUtilsService.parseBBCode(this.props.label):""}get customLabelTemplate(){return this.props.customLabelTemplate}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-custom-wrapper-form-field"]],features:[e.qOj],decls:9,vars:8,consts:[["labelTemplate",""],[1,"mb-3"],[4,"ngIf"],["fieldComponent",""],["class","invalid-feedback",3,"display",4,"ngIf"],["class","form-text text-muted",3,"innerHTML",4,"ngIf"],[4,"ngIf","ngIfElse"],["stringLabel",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"form-label",3,"innerHTML"],["aria-hidden","true",4,"ngIf"],["aria-hidden","true"],[3,"ngTemplateOutlet"],[1,"invalid-feedback"],[3,"field"],[1,"form-text","text-muted",3,"innerHTML"]],template:function(t,a){1&t&&(e.YNc(0,re,3,2,"ng-template",null,0,e.W1O),e.TgZ(2,"div",1),e.YNc(3,Ke,2,1,"ng-container",2),e.YNc(4,ze,0,0,"ng-template",null,3,e.W1O),e.YNc(6,Xe,2,1,"ng-container",2),e.YNc(7,et,2,3,"div",4),e.YNc(8,tt,1,1,"div",5),e.qZA()),2&t&&(e.xp6(2),e.ekj("form-floating","floating"===a.props.labelPosition)("has-error",a.showError),e.xp6(1),e.Q6J("ngIf","floating"!==a.props.labelPosition),e.xp6(3),e.Q6J("ngIf","floating"===a.props.labelPosition),e.xp6(1),e.Q6J("ngIf",a.showError),e.xp6(1),e.Q6J("ngIf",a.parsedDescription))},dependencies:[p.O5,p.tP,x.M2],encapsulation:2}),o})();var Ye=y(5174);function nt(o,s){1&o&&e.GkF(0)}function it(o,s){if(1&o&&(e.ynx(0),e._UZ(1,"div",13),e.TgZ(2,"div",14),e._uU(3,"("),e.YNc(4,nt,1,0,"ng-container",15),e._uU(5,")"),e.qZA(),e.BQk()),2&o){const t=e.oxw(),a=e.MAs(15);e.xp6(1),e.Q6J("innerHTML",t.parsedTitle,e.oJD),e.xp6(3),e.Q6J("ngTemplateOutlet",a)}}function rt(o,s){1&o&&e.GkF(0)}function st(o,s){if(1&o&&(e.TgZ(0,"div",16),e._uU(1," Lista di "),e.YNc(2,rt,1,0,"ng-container",15),e.qZA()),2&o){e.oxw();const t=e.MAs(15);e.xp6(2),e.Q6J("ngTemplateOutlet",t)}}function lt(o,s){if(1&o&&e._UZ(0,"div",17),2&o){const t=e.oxw();e.Q6J("innerHTML",t.parsedDescription,e.oJD)}}const at=function(o){return{"mt-3":o}};function ct(o,s){if(1&o&&(e.TgZ(0,"div",18),e._UZ(1,"formly-validation-message",19),e.qZA()),2&o){const t=e.oxw();e.Q6J("ngClass",e.VKq(2,at,t.parsedDescription.length)),e.xp6(1),e.Q6J("field",t.field)}}function pt(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"li")(1,"div",30),e.NdJ("click",function(){e.CHM(t);const m=e.oxw().index,O=e.oxw(2);return e.KtG(O.move(m,m-1))}),e._uU(2,"arrow_circle_up"),e.qZA()()}2&o&&(e.xp6(1),e.Q6J("disableOnTouchDevice",!0))}const Ge=function(o){return{"ms-1":o}};function dt(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"li",31)(1,"div",32),e.NdJ("click",function(){e.CHM(t);const m=e.oxw().index,O=e.oxw(2);return e.KtG(O.move(m,m+1))}),e._uU(2,"arrow_circle_down"),e.qZA()()}if(2&o){const t=e.oxw().first;e.Q6J("ngClass",e.VKq(2,Ge,!t)),e.xp6(1),e.Q6J("disableOnTouchDevice",!0)}}function ut(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"li",31)(1,"div",33),e.NdJ("click",function(){e.CHM(t);const m=e.oxw().index,O=e.oxw(2);return e.KtG(O.remove(m))}),e._uU(2,"highlight_off"),e.qZA()()}if(2&o){const t=e.oxw(),m=t.last;e.Q6J("ngClass",e.VKq(2,Ge,!(t.first&&m))),e.xp6(1),e.Q6J("disableOnTouchDevice",!0)}}const mt=function(o){return{"mb-3":o}},He=function(o){return{"has-error":o}};function ft(o,s){if(1&o&&(e.TgZ(0,"li",22)(1,"fieldset",23)(2,"legend",24)(3,"div",25)(4,"div",26),e._uU(5),e.qZA(),e.TgZ(6,"ul",27),e.YNc(7,pt,3,1,"li",28),e.YNc(8,dt,3,4,"li",29),e.YNc(9,ut,3,4,"li",29),e.qZA()()(),e._UZ(10,"formly-field",19),e.qZA()()),2&o){const t=s.$implicit,a=s.index,m=s.first,O=s.last;e.Q6J("ngClass",e.VKq(7,mt,!O)),e.xp6(1),e.Q6J("ngClass",e.VKq(9,He,null==t.formControl?null:t.formControl.invalid)),e.xp6(4),e.hij("#",a+1,""),e.xp6(2),e.Q6J("ngIf",!m),e.xp6(1),e.Q6J("ngIf",!O),e.xp6(1),e.Q6J("ngIf",t.props&&!1!==t.props.removable),e.xp6(1),e.Q6J("field",t)}}function ht(o,s){if(1&o&&(e.TgZ(0,"ul",20),e.YNc(1,ft,11,11,"li",21),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.field.fieldGroup)}}const gt=function(o){return{"d-none d-md-inline":o}};function _t(o,s){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA(),e.TgZ(2,"span",31),e._uU(3),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.field.fieldGroup?t.field.fieldGroup.length:0),e.xp6(1),e.Q6J("ngClass",e.VKq(3,gt,t.props.label)),e.xp6(1),e.hij(" element",t.field.fieldGroup&&1===t.field.fieldGroup.length?"o":"i","")}}const yt=function(){return[10,10]},Ft=function(o){return{placement:"top-end",offset:o}};let xt=(()=>{class o extends x.hv{constructor(t){super(),this.customFormUtilsService=t,this.parsedTitle="",this.parsedDescription=""}ngOnInit(){this.parsedDescription=this.props.description?this.customFormUtilsService.parseBBCode(this.props.description):"",this.parsedTitle=this.props.label?this.customFormUtilsService.parseBBCode(this.props.label):""}get maxLengthExceeded(){return this.props.maxItems&&this.model&&this.model.length>=this.props.maxItems}move(t,a){const m=this.model[t];this.remove(t),this.add(a,m)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-array"]],features:[e.qOj],decls:16,vars:14,consts:[[1,"rounded","px-3","pb-3","pt-2","mb-3","formly-fieldset",3,"ngClass"],[1,"legend-reset","pb-1","px-2","mb-0","mw-100"],[1,"d-flex","align-items-center","mw-100"],[4,"ngIf","ngIfElse"],["nolabel",""],["class","mb-2 text-justify",3,"innerHTML",4,"ngIf"],["class","alert alert-danger formly-field-array-error text-center","role","alert",3,"ngClass",4,"ngIf"],["class","list-unstyled mb-3",4,"ngIf"],[1,"d-flex","flex-row-reverse"],["appTippy","Hai aggiunto il numero massimo di elementi!",3,"disableInstance","tippyProps"],["type","button",1,"btn","btn-primary","d-flex","align-items-center",3,"disabled","click"],[1,"material-icons"],["itemscount",""],[1,"fs-xl","text-truncate","mw-100",3,"innerHTML"],[1,"ms-2","fs-reset","lh-1","fst-italic","list-counter","text-nowrap"],[4,"ngTemplateOutlet"],[1,"fs-xl","text-truncate","mw-10"],[1,"mb-2","text-justify",3,"innerHTML"],["role","alert",1,"alert","alert-danger","formly-field-array-error","text-center",3,"ngClass"],[3,"field"],[1,"list-unstyled","mb-3"],["class","item",3,"ngClass",4,"ngFor","ngForOf"],[1,"item",3,"ngClass"],[1,"rounded","formly-fieldset","dashed","show-success","px-3",3,"ngClass"],[1,"legend-reset","ms-auto","mb-0","px-2"],[1,"d-flex","align-items-center"],[1,"fs-xl","ms-1"],[1,"ms-2","mb-0","item-icons","list-unstyled","d-flex","align-items-center"],[4,"ngIf"],[3,"ngClass",4,"ngIf"],["appTippy","Sposta in alto",1,"d-block","material-icons","cursor-pointer",3,"disableOnTouchDevice","click"],[3,"ngClass"],["appTippy","Sposta in basso",1,"d-block","material-icons","cursor-pointer",3,"disableOnTouchDevice","click"],["appTippy","Rimuovi",1,"d-block","material-icons","cursor-pointer","text-danger",3,"disableOnTouchDevice","click"]],template:function(t,a){if(1&t&&(e.TgZ(0,"fieldset",0)(1,"legend",1)(2,"div",2),e.YNc(3,it,6,2,"ng-container",3),e.YNc(4,st,3,1,"ng-template",null,4,e.W1O),e.qZA()(),e.YNc(6,lt,1,1,"div",5),e.YNc(7,ct,2,4,"div",6),e.YNc(8,ht,2,1,"ul",7),e.TgZ(9,"div",8)(10,"div",9)(11,"button",10),e.NdJ("click",function(){return!a.maxLengthExceeded&&a.add()}),e.TgZ(12,"span",11),e._uU(13,"add"),e.qZA()()()(),e.YNc(14,_t,4,5,"ng-template",null,12,e.W1O),e.qZA()),2&t){const m=e.MAs(5);e.Q6J("ngClass",e.VKq(9,He,a.formControl.invalid)),e.xp6(3),e.Q6J("ngIf",a.parsedTitle)("ngIfElse",m),e.xp6(3),e.Q6J("ngIf",a.parsedDescription),e.xp6(1),e.Q6J("ngIf",a.showError&&a.formControl.errors),e.xp6(1),e.Q6J("ngIf",a.field.fieldGroup&&a.field.fieldGroup.length),e.xp6(2),e.Q6J("disableInstance",!a.maxLengthExceeded)("tippyProps",e.VKq(12,Ft,e.DdM(11,yt))),e.xp6(1),e.Q6J("disabled",a.maxLengthExceeded)}},dependencies:[p.mk,p.sg,p.O5,p.tP,x.cw,x.M2,Ye.$],styles:["legend[_ngcontent-%COMP%]   .list-counter[_ngcontent-%COMP%]{padding-top:.175rem}legend[_ngcontent-%COMP%]   .item-icons[_ngcontent-%COMP%]{padding-top:.1rem}"]}),o})();function vt(o,s){if(1&o&&e._UZ(0,"label",4),2&o){const t=e.oxw();e.Q6J("for",t.id)("innerHTML",t.parsedTitle,e.oJD)}}function bt(o,s){1&o&&(e.TgZ(0,"span",5),e._uU(1," *"),e.qZA())}const Ct=function(o,s){return{"form-check-inline":o,"form-switch":s}};let Ot=(()=>{class o extends b{constructor(t){super(),this.customFormUtilsService=t,this.defaultOptions={props:{indeterminate:!0,hideLabel:!0,formCheck:"default"}},this.parsedTitle=""}ngOnInit(){this.props.label&&"nolabel"!==this.props.formCheck&&(this.parsedTitle=this.customFormUtilsService.parseBBCode(this.props.label))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-custom-checkbox"]],features:[e.qOj],decls:4,vars:13,consts:[[1,"form-check",3,"ngClass"],["type","checkbox",1,"form-check-input",3,"indeterminate","formControl","formlyAttributes"],["class","form-check-label",3,"for","innerHTML",4,"ngIf"],["aria-hidden","true",4,"ngIf"],[1,"form-check-label",3,"for","innerHTML"],["aria-hidden","true"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"input",1),e.YNc(2,vt,1,2,"label",2),e.YNc(3,bt,2,0,"span",3),e.qZA()),2&t&&(e.Q6J("ngClass",e.WLB(10,Ct,"inline"===a.props.formCheck||"inline-switch"===a.props.formCheck,"switch"===a.props.formCheck||"inline-switch"===a.props.formCheck)),e.xp6(1),e.ekj("is-invalid",a.showError)("position-static","nolabel"===a.props.formCheck),e.Q6J("indeterminate",a.props.indeterminate&&null==a.formControl.value)("formControl",a.formControl)("formlyAttributes",a.field),e.xp6(1),e.Q6J("ngIf",a.parsedTitle),e.xp6(1),e.Q6J("ngIf",a.props.required&&!0!==a.props.hideRequiredMarker))},dependencies:[p.mk,p.O5,x.JD,v.Wl,v.JJ,v.oH],encapsulation:2,changeDetection:0}),o})();var Tt=y(1460);const Mt=["editor"];let wt=(()=>{class o{constructor(t,a){this.ngZone=t,this.monacoPathConfig=a,this.isMonacoLoaded$=new L.X(!1),this._monacoPath="assets/monaco-editor/min/vs",window.monacoEditorAlreadyInitialized?t.run(()=>this.isMonacoLoaded$.next(!0)):(window.monacoEditorAlreadyInitialized=!0,this.monacoPathConfig&&(this.monacoPath=this.monacoPathConfig),this.loadMonaco())}set monacoPath(t){t&&(this._monacoPath=t)}loadMonaco(){const t=()=>{let Q=this._monacoPath;window.amdRequire=window.require;const z=!!this.nodeRequire,W=Q.includes("http");z&&(window.require=this.nodeRequire,W||(Q=window.require("path").resolve(window.__dirname,this._monacoPath))),window.amdRequire.config({paths:{vs:Q}}),window.amdRequire(["vs/editor/editor.main"],()=>{this.ngZone.run(()=>this.isMonacoLoaded$.next(!0))},de=>console.error("Error loading monaco-editor: ",de))};if(window.amdRequire)return t();window.require&&(this.addElectronFixScripts(),this.nodeRequire=window.require);const O=document.createElement("script");O.type="text/javascript",O.src=`${this._monacoPath}/loader.js`,O.addEventListener("load",t),document.body.appendChild(O)}addElectronFixScripts(){const t=document.createElement("script"),a=document.createTextNode("self.module = undefined;"),m=document.createTextNode("self.process.browser = true;");t.appendChild(a),t.appendChild(m),document.body.appendChild(t)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(e.R0b),e.LFG("MONACO_PATH",8))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),At=(()=>{class o{constructor(t){this.monacoLoader=t,this.init=new e.vpe,this.onTouched=()=>{},this.onErrorStatusChange=()=>{},this.propagateChange=()=>{}}get model(){return this.editor&&this.editor.getModel()}get modelMarkers(){return this.model&&monaco.editor.getModelMarkers({resource:this.model.uri})}ngOnInit(){this.monacoLoader.isMonacoLoaded$.pipe((0,G.h)(t=>t),(0,ae.q)(1)).subscribe(()=>{this.initEditor()})}ngOnChanges(t){if(this.editor&&t.options&&!t.options.firstChange){const{language:a,theme:m,...O}=t.options.currentValue,{language:Q,theme:z}=t.options.previousValue;Q!==a&&monaco.editor.setModelLanguage(this.editor.getModel(),this.options&&this.options.language?this.options.language:"text"),z!==m&&monaco.editor.setTheme(m),this.editor.updateOptions(O)}if(this.editor&&t.uri){const a=t.uri.currentValue,m=t.uri.previousValue;if(m&&!a||!m&&a||a&&m&&a.path!==m.path){const O=this.editor.getValue();let Q;this.modelUriInstance&&this.modelUriInstance.dispose(),a&&(Q=monaco.editor.getModels().find(z=>z.uri.path===a.path)),this.modelUriInstance=Q||monaco.editor.createModel(O,this.options.language||"text",this.uri),this.editor.setModel(this.modelUriInstance)}}}writeValue(t){this.value=t,this.editor&&t?this.editor.setValue(t):this.editor&&this.editor.setValue("")}registerOnChange(t){this.propagateChange=t}registerOnTouched(t){this.onTouched=t}validate(){return this.parsedError?{monaco:{value:this.parsedError.split("|")}}:null}registerOnValidatorChange(t){this.onErrorStatusChange=t}initEditor(){const t={value:[this.value].join("\n"),language:"text",automaticLayout:!0,scrollBeyondLastLine:!1,theme:"vc"};this.editor=monaco.editor.create(this.editorContent.nativeElement,this.options?{...t,...this.options}:t),this.registerEditorListeners(),this.init.emit(this.editor)}registerEditorListeners(){this.editor.onDidChangeModelContent(()=>{this.propagateChange(this.editor.getValue())}),this.editor.onDidChangeModelDecorations(()=>{const t=this.modelMarkers.map(({message:m})=>m).join("|");this.parsedError!==t&&(this.parsedError=t,this.onErrorStatusChange())}),this.editor.onDidBlurEditorText(()=>{this.onTouched()})}ngOnDestroy(){this.editor&&this.editor.dispose()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(wt))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ngx-monaco-editor"]],viewQuery:function(t,a){if(1&t&&e.Gf(Mt,7),2&t){let m;e.iGM(m=e.CRH())&&(a.editorContent=m.first)}},inputs:{options:"options",uri:"uri"},outputs:{init:"init"},features:[e._Bn([{provide:v.JU,useExisting:(0,e.Gpc)(()=>o),multi:!0},{provide:v.Cf,useExisting:(0,e.Gpc)(()=>o),multi:!0}]),e.TTD],decls:4,vars:0,consts:[["fxFlex","",1,"editor-container"],["container",""],[1,"monaco-editor"],["editor",""]],template:function(t,a){1&t&&(e.TgZ(0,"div",0,1),e._UZ(2,"div",2,3),e.qZA())},styles:[".monaco-editor[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0}.editor-container[_ngcontent-%COMP%]{overflow:hidden;position:relative;display:table;width:100%;height:100%;min-width:0}"],changeDetection:0}),o})(),kt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[]]}),o})();function Dt(o,s){if(1&o&&(e.ynx(0),e.TgZ(1,"textarea",2),e._uU(2,"            "),e.qZA(),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("cols",1)("rows",10)("formlyAttributes",t.field)}}function It(o,s){1&o&&(e.ynx(0),e.TgZ(1,"p",4),e._UZ(2,"span",5),e.qZA(),e.BQk())}function Pt(o,s){if(1&o&&e._UZ(0,"ngx-monaco-editor",6),2&o){const t=e.oxw(2);e.Udp("height",t.editorHeight),e.Q6J("options",t.editorOptions)("formControl",t.formControl)}}function St(o,s){if(1&o&&(e.YNc(0,It,3,0,"ng-container",0),e.YNc(1,Pt,1,4,"ng-template",null,3,e.W1O)),2&o){const t=e.MAs(2),a=e.oxw();e.Q6J("ngIf",a.loading)("ngIfElse",t)}}let Jt=(()=>{class o extends x.fS{constructor(){super(...arguments),this.touchDevice=Tt.eX,this.editorOptions={theme:"vs-dark",language:"json"},this.loading=!0,this.editorHeight="350px"}ngOnInit(){this.touchDevice||(this.field.props.editorOptions&&(this.field.props.editorOptions.height&&(this.editorHeight=this.field.props.editorOptions.height,delete this.field.props.editorOptions.height),this.editorOptions={...this.editorOptions,...this.field.props.editorOptions}),this.loading=!1)}}return o.\u0275fac=function(){let s;return function(a){return(s||(s=e.n5z(o)))(a||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-code-editor-type"]],features:[e.qOj],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["notTouchDevice",""],[1,"form-control",3,"formControl","cols","rows","formlyAttributes"],["codeEditor",""],[1,"placeholder-glow"],[1,"placeholder","col-12","placeholder-lg"],[1,"d-block","formly-code-editor",3,"options","formControl"]],template:function(t,a){if(1&t&&(e.YNc(0,Dt,3,6,"ng-container",0),e.YNc(1,St,3,2,"ng-template",null,1,e.W1O)),2&t){const m=e.MAs(2);e.Q6J("ngIf",a.touchDevice)("ngIfElse",m)}},dependencies:[p.O5,x.JD,v.Fj,v.JJ,At,v.oH],encapsulation:2}),o})();var me=y(5861),qe=y(9209);function Lt(o,s){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",4),e.NdJ("click",function(){e.CHM(t);const m=e.oxw();return e.KtG(m.formControl.setValue(void 0))}),e._uU(2,"highlight_off"),e.qZA(),e.BQk()}}function jt(o,s){1&o&&(e.ynx(0),e.TgZ(1,"p",5),e._UZ(2,"span",6),e.qZA(),e.BQk())}function Ut(o,s){if(1&o&&e._UZ(0,"option",10),2&o){const t=s.$implicit;e.Q6J("ngValue",t.id||t.name)("innerText",t.name)}}function Zt(o,s){if(1&o&&(e.ynx(0),e.TgZ(1,"select",8),e.YNc(2,Ut,1,2,"option",9),e.qZA(),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("formlyAttributes",t.field),e.xp6(1),e.Q6J("ngForOf",t.groupsList)}}function Qt(o,s){if(1&o&&e._UZ(0,"option",10),2&o){const t=s.$implicit;e.Q6J("ngValue",t.id||t.name)("innerText",t.name)}}function Rt(o,s){if(1&o&&(e.TgZ(0,"select",11),e.YNc(1,Qt,1,2,"option",9),e.qZA()),2&o){const t=e.oxw(2);e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("formlyAttributes",t.field),e.xp6(1),e.Q6J("ngForOf",t.groupsList)}}function Vt(o,s){if(1&o&&(e.YNc(0,Zt,3,5,"ng-container",2),e.YNc(1,Rt,2,5,"ng-template",null,7,e.W1O)),2&o){const t=e.MAs(2),a=e.oxw();e.Q6J("ngIf",a.field.props.multiple)("ngIfElse",t)}}const Bt=function(o){return{"no-label":o}};let Nt=(()=>{class o extends x.fS{constructor(t){super(),this.forumService=t,this.loading=!0,this.groupsList=[]}ngOnInit(){var t=this;return(0,me.Z)(function*(){t.field.defaultValue=void 0,t.field.props.hasOwnProperty("multiple")||(t.field.props.multiple=!0),t.groupsList=(yield t.forumService.getGroups()).sort((a,m)=>a.name.localeCompare(m.name)),t.field.props.keepGroupsWithoutId||(t.groupsList=t.groupsList.filter(a=>a.id>0)),t.loading=!1,t.field.formControl.updateValueAndValidity()})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(qe._))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-forum-groups"]],features:[e.qOj],decls:5,vars:6,consts:[[1,"position-relative","wrapper",3,"ngClass"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["formSelect",""],[1,"reset-icon","position-absolute","cursor-pointer","d-block","material-icons","text-danger",3,"click"],[1,"placeholder-glow"],[1,"placeholder","col-12","placeholder-lg"],["single",""],["multiple","",1,"form-select",3,"formControl","formlyAttributes"],[3,"ngValue","innerText",4,"ngFor","ngForOf"],[3,"ngValue","innerText"],[1,"form-select",3,"formControl","formlyAttributes"]],template:function(t,a){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,Lt,3,0,"ng-container",1),e.YNc(2,jt,3,0,"ng-container",2),e.YNc(3,Vt,3,2,"ng-template",null,3,e.W1O),e.qZA()),2&t){const m=e.MAs(4);e.Q6J("ngClass",e.VKq(4,Bt,!a.props.label)),e.xp6(1),e.Q6J("ngIf",!a.props.label||void 0!==a.formControl.value),e.xp6(1),e.Q6J("ngIf",a.loading)("ngIfElse",m)}},dependencies:[p.mk,p.sg,p.O5,x.JD,v.YN,v.Kr,v.EJ,v.K7,v.JJ,v.oH],styles:[".reset-icon[_ngcontent-%COMP%]{right:0}.wrapper[_ngcontent-%COMP%]:not(.no-label)   .reset-icon[_ngcontent-%COMP%]{top:calc(-24px - .45rem)}.no-label[_ngcontent-%COMP%]{padding-top:calc(24px + .45rem)}.no-label[_ngcontent-%COMP%]   .reset-icon[_ngcontent-%COMP%]{top:0}"]}),o})();function Yt(o,s){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",4),e.NdJ("click",function(){e.CHM(t);const m=e.oxw();return e.KtG(m.formControl.setValue(void 0))}),e._uU(2,"highlight_off"),e.qZA(),e.BQk()}}function Gt(o,s){1&o&&(e.ynx(0),e.TgZ(1,"p",5),e._UZ(2,"span",6),e.qZA(),e.BQk())}function Ht(o,s){if(1&o&&(e.ynx(0),e._UZ(1,"option",10),e.BQk()),2&o){const t=s.$implicit;e.xp6(1),e.Q6J("ngValue",t.id)("innerHTML"," - "+t.name,e.oJD)}}function qt(o,s){if(1&o&&(e.ynx(0),e.YNc(1,Ht,2,2,"ng-container",9),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.subsections)}}function Wt(o,s){if(1&o&&(e.ynx(0),e._UZ(1,"option",10),e.YNc(2,qt,2,1,"ng-container",1),e.BQk()),2&o){const t=s.$implicit;e.xp6(1),e.Q6J("ngValue",t.id)("innerHTML",t.name,e.oJD),e.xp6(1),e.Q6J("ngIf",t.subsections&&t.subsections.length)}}function $t(o,s){if(1&o&&(e.ynx(0),e._UZ(1,"option",10),e.BQk()),2&o){const t=s.$implicit;e.xp6(1),e.Q6J("ngValue",t)("innerHTML"," -- Sezione ristretta -- #"+t,e.oJD)}}function Kt(o,s){if(1&o&&(e.ynx(0),e.YNc(1,$t,2,2,"ng-container",9),e.BQk()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.restrictedOrDeletedSections)}}function zt(o,s){if(1&o&&(e.ynx(0),e.TgZ(1,"select",8),e.YNc(2,Wt,3,3,"ng-container",9),e.YNc(3,Kt,2,1,"ng-container",1),e.qZA(),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("formlyAttributes",t.field),e.xp6(1),e.Q6J("ngForOf",t.sectionsList),e.xp6(1),e.Q6J("ngIf",t.restrictedOrDeletedSections.length>0)}}function Xt(o,s){if(1&o&&(e.ynx(0),e._UZ(1,"option",10),e.BQk()),2&o){const t=s.$implicit;e.xp6(1),e.Q6J("ngValue",t.id)("innerHTML"," - "+t.name,e.oJD)}}function eo(o,s){if(1&o&&(e.ynx(0),e.YNc(1,Xt,2,2,"ng-container",9),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.subsections)}}function to(o,s){if(1&o&&(e.ynx(0),e._UZ(1,"option",10),e.YNc(2,eo,2,1,"ng-container",1),e.BQk()),2&o){const t=s.$implicit;e.xp6(1),e.Q6J("ngValue",t.id)("innerHTML",t.name,e.oJD),e.xp6(1),e.Q6J("ngIf",t.subsections&&t.subsections.length)}}function oo(o,s){if(1&o&&(e.ynx(0),e._UZ(1,"option",10),e.BQk()),2&o){const t=s.$implicit;e.xp6(1),e.Q6J("ngValue",t)("innerHTML"," -- Sezione ristretta -- #"+t,e.oJD)}}function no(o,s){if(1&o&&(e.ynx(0),e.YNc(1,oo,2,2,"ng-container",9),e.BQk()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.restrictedOrDeletedSections)}}function io(o,s){if(1&o&&(e.TgZ(0,"select",11),e.YNc(1,to,3,3,"ng-container",9),e.YNc(2,no,2,1,"ng-container",1),e.qZA()),2&o){const t=e.oxw(2);e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("formlyAttributes",t.field),e.xp6(1),e.Q6J("ngForOf",t.sectionsList),e.xp6(1),e.Q6J("ngIf",t.restrictedOrDeletedSections.length>0)}}function ro(o,s){if(1&o&&(e.YNc(0,zt,4,6,"ng-container",2),e.YNc(1,io,3,6,"ng-template",null,7,e.W1O)),2&o){const t=e.MAs(2),a=e.oxw();e.Q6J("ngIf",a.field.props.multiple)("ngIfElse",t)}}const so=function(o){return{"no-label":o}};let lo=(()=>{class o extends x.fS{constructor(t){super(),this.forumService=t,this.loading=!0,this.sectionsList=[],this.restrictedOrDeletedSections=[]}ngOnInit(){var t=this;return(0,me.Z)(function*(){t.field.defaultValue=void 0,t.field.props.hasOwnProperty("multiple")||(t.field.props.multiple=!0),t.restrictedOrDeletedSections=Array.isArray(t.field.formControl.value)?[...t.field.formControl.value]:[];const a=yield t.forumService.getSections();t.sectionsList=a.map(m=>{const O=t.restrictedOrDeletedSections.indexOf(m.id);return O>-1&&t.restrictedOrDeletedSections.splice(O,1),{...m,subsections:t.flattenSubsections(m)}}),t.loading=!1,t.field.formControl.updateValueAndValidity()})()}flattenSubsections(t){let a=[],m=-1;if(t.subsections&&t.subsections.length)for(const O of t.subsections)m=this.restrictedOrDeletedSections.indexOf(O.id),m>-1&&this.restrictedOrDeletedSections.splice(m,1),a.push(O),O.subsections&&(a=[...a,...this.flattenSubsections(O)]);return a}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(qe._))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-forum-sections"]],features:[e.qOj],decls:5,vars:6,consts:[[1,"position-relative","wrapper",3,"ngClass"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["formSelect",""],[1,"reset-icon","position-absolute","cursor-pointer","d-block","material-icons","text-danger",3,"click"],[1,"placeholder-glow"],[1,"placeholder","col-12","placeholder-lg"],["single",""],["multiple","",1,"form-select",3,"formControl","formlyAttributes"],[4,"ngFor","ngForOf"],[3,"ngValue","innerHTML"],[1,"form-select",3,"formControl","formlyAttributes"]],template:function(t,a){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,Yt,3,0,"ng-container",1),e.YNc(2,Gt,3,0,"ng-container",2),e.YNc(3,ro,3,2,"ng-template",null,3,e.W1O),e.qZA()),2&t){const m=e.MAs(4);e.Q6J("ngClass",e.VKq(4,so,!a.props.label)),e.xp6(1),e.Q6J("ngIf",!a.props.label||void 0!==a.formControl.value),e.xp6(1),e.Q6J("ngIf",a.loading)("ngIfElse",m)}},dependencies:[p.mk,p.sg,p.O5,x.JD,v.YN,v.Kr,v.EJ,v.K7,v.JJ,v.oH],styles:[".reset-icon[_ngcontent-%COMP%]{right:0}.wrapper[_ngcontent-%COMP%]:not(.no-label)   .reset-icon[_ngcontent-%COMP%]{top:calc(-24px - .45rem)}.no-label[_ngcontent-%COMP%]{padding-top:calc(24px + .45rem)}.no-label[_ngcontent-%COMP%]   .reset-icon[_ngcontent-%COMP%]{top:0}"]}),o})();var ao=y(7579),co=y(8372),po=y(1884),uo=y(6451),mo=y(3900),fo=y(9646);let We=(()=>{class o{transform(t){let a=document.createElement("TEXTAREA");return a.innerHTML=t,a.value}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275pipe=e.Yjl({name:"decodeHtmlEntitites",type:o,pure:!0}),o})();var ho=y(5044),go=y(6787),_o=y(3138),yo=y(6378),Fo=y(9985),xo=y(4029),$e=y(651),vo=y(2931);function bo(o,s){1&o&&(e.TgZ(0,"span",8),e._uU(1,"*"),e.qZA())}function Co(o,s){if(1&o&&(e.TgZ(0,"legend",5)(1,"label",6),e._uU(2),e.YNc(3,bo,2,0,"span",7),e.qZA()()),2&o){const t=e.oxw();e.xp6(1),e.s9C("for",t.id),e.xp6(1),e.hij(" ",t.props.label," "),e.xp6(1),e.Q6J("ngIf",t.props.required)}}function Oo(o,s){1&o&&e.GkF(0)}function To(o,s){if(1&o&&e._UZ(0,"div",9),2&o){const t=e.oxw();e.Q6J("innerHTML",t.parsedDescription,e.oJD)}}function Mo(o,s){1&o&&(e.TgZ(0,"div",16)(1,"span",17),e._uU(2,"Loading..."),e.qZA()())}function Eo(o,s){if(1&o&&(e.TgZ(0,"div",18),e._UZ(1,"formly-validation-message",19),e.qZA()),2&o){const t=e.oxw(2);e.Udp("display","block"),e.xp6(1),e.Q6J("field",t.field)}}function wo(o,s){1&o&&e._UZ(0,"app-loader",20)}function Ao(o,s){1&o&&e._UZ(0,"div",25),2&o&&e.Q6J("innerText","Nessun utente inserito!")}function ko(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"li")(1,"a",28)(2,"div",29),e.NdJ("click",function(m){const Q=e.CHM(t).$implicit,z=e.oxw(4);return e.KtG(z.removeUser(Q,m))}),e.TgZ(3,"div",30),e._uU(4,"remove"),e.qZA()(),e._UZ(5,"img",31),e.ALo(6,"uploadsreplace"),e.qZA(),e._UZ(7,"a",32),e.qZA()}if(2&o){const t=s.$implicit,a=e.oxw(4);e.Gre("d-flex flex-column align-items-center user-",a.circuit,""),e.xp6(1),e.Q6J("href",a.baseUrl+t.uid.substring(2),e.LSH),e.xp6(1),e.Q6J("disableOnTouchDevice",!0),e.xp6(3),e.s9C("alt",t.nickname+"'s avatar"),e.Q6J("src",e.lcZ(6,9,t.avatar),e.LSH),e.xp6(2),e.Q6J("innerHTML",t.nickname,e.oJD)("href",a.baseUrl+t.uid.substring(2),e.LSH)}}function Do(o,s){if(1&o&&(e.TgZ(0,"ul",26),e.YNc(1,ko,8,11,"li",27),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.selectedUsers)}}const Io=function(o){return{"empty-list":o}};function Po(o,s){if(1&o&&(e.TgZ(0,"fieldset",21)(1,"legend",22),e._uU(2,"Lista utenti"),e.qZA(),e.YNc(3,Ao,1,1,"div",23),e.YNc(4,Do,2,1,"ng-template",null,24,e.W1O),e.qZA()),2&o){const t=e.MAs(5),a=e.oxw(2);e.Q6J("ngClass",e.VKq(3,Io,0===a.selectedUsers.length)),e.xp6(3),e.Q6J("ngIf",0===a.selectedUsers.length)("ngIfElse",t)}}function So(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",10)(1,"input",11),e.NdJ("ngModelChange",function(m){e.CHM(t);const O=e.oxw();return e.KtG(O.inputValue=m)})("selectItem",function(m){e.CHM(t);const O=e.oxw();return e.KtG(O.selectUser(m))})("focus",function(m){e.CHM(t);const O=e.oxw();return e.KtG(O.focus.next(m.target.value))}),e.qZA(),e.YNc(2,Mo,3,0,"div",12),e.qZA(),e.YNc(3,Eo,2,3,"div",13),e.YNc(4,wo,1,0,"app-loader",14),e.YNc(5,Po,6,5,"ng-template",null,15,e.W1O)}if(2&o){const t=e.MAs(6),a=e.oxw();e.xp6(1),e.ekj("is-invalid",a.showError),e.Q6J("ngModel",a.inputValue)("formlyAttributes",a.field)("ngbTypeahead",a.search)("editable",!1)("inputFormatter",a.inputFormatter)("resultFormatter",a.outputFormatter),e.xp6(1),e.Q6J("ngIf",a.searching),e.xp6(1),e.Q6J("ngIf",a.showError),e.xp6(1),e.Q6J("ngIf",a.loading)("ngIfElse",t)}}let Jo=(()=>{class o extends x.fS{constructor(t,a,m,O,Q,z){if(super(),this.userService=t,this.globalsService=a,this.changeDetectorRef=m,this.toastService=O,this.customFormUtilsService=Q,this.decodeHtmlEntitiesPipe=z,this.inputValue="",this.selectedUsers=[],this.loading=!0,this.searching=!1,this.focus=new ao.x,this.parsedDescription="",this.formlyFieldValues=[],this.lastSearchedValueWithoutResult="",this.outputFormatter=W=>W?W.nickname.indexOf("&")>-1?this.decodeHtmlEntitiesPipe.transform(W.nickname):W.nickname:"",this.search=W=>{const de=W.pipe((0,co.b)(1e3),(0,po.x)());return(0,uo.T)(de,this.focus).pipe((0,ie.b)(()=>this.setSearching(!0)),(0,mo.w)(Me=>Me.length<3?(0,fo.of)([]):this.getUsers(Me)),(0,ie.b)(()=>this.setSearching(!1)))},this.circuit=this.globalsService.credentials?.site.short||"",!this.circuit)throw new Error("Missing credentials!");this.baseUrl=ho.hD[this.circuit]+"/?act=Profile&MID="}ngOnInit(){var t=this;return(0,me.Z)(function*(){t.parsedDescription=t.props.description?t.customFormUtilsService.parseBBCode(t.props.description):"",t.formlyFieldValues=Array.isArray(t.formControl.value)?t.formControl.value:Array.isArray(t.field.defaultValue)?t.field.defaultValue:[],yield t.getSelectedUsersFromApi(),t.loading=!1,t.formControl.updateValueAndValidity(),t.formControl.registerOnChange(()=>{t.formControlChangeCallback()})})()}inputFormatter(t){return t.nickname}getUsers(t){var a=this;return(0,me.Z)(function*(){if(a.lastSearchedValueWithoutResult&&0===t.indexOf(a.lastSearchedValueWithoutResult))return[];const m=yield a.userService.searchUserByName(t);return 0===m.length&&(a.lastSearchedValueWithoutResult=t),m})()}setSearching(t){this.searching=t,this.changeDetectorRef.detectChanges()}selectUser(t){const a=t.item,m=Number(a.uid.substring(2));if(this.formlyFieldValues.includes(m))return this.toastService.show({content:`L'utente <strong>${a.nickname}</strong> \xe8 gi\xe0 stato aggiunto alla lista!`}),void(this.inputValue="");this.formlyFieldValues.push(m),this.selectedUsers.push(a),t.preventDefault(),this.inputValue="",this.formControl.setValue([...this.formlyFieldValues])}removeUser(t,a){a.preventDefault(),a.stopPropagation();const m=Number(t.uid.substring(2));this.formlyFieldValues=this.formlyFieldValues.filter(O=>O!==m),this.selectedUsers=this.selectedUsers.filter(O=>O.uid!==t.uid),this.formControl.setValue([...this.formlyFieldValues])}formControlChangeCallback(){var t=this;return(0,me.Z)(function*(){if(!Array.isArray(t.formControl.value))return;let a=!1;if(t.formControl.value.length!==t.formlyFieldValues.length)a=!0;else for(const m of t.formControl.value)if(!t.formlyFieldValues.includes(m)){a=!0;break}a&&(t.formlyFieldValues=t.formControl.value,t.loading=!0,t.changeDetectorRef.detectChanges(),yield t.getSelectedUsersFromApi(),t.loading=!1,t.changeDetectorRef.detectChanges())})()}getSelectedUsersFromApi(){var t=this;return(0,me.Z)(function*(){t.selectedUsers=0!==t.formlyFieldValues.length?(yield t.userService.getDetailsFromUids(t.formlyFieldValues.map(a=>t.circuit+a))).sort((a,m)=>a.nickname>m.nickname?1:m.nickname>a.nickname?-1:0):[]})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(go.K),e.Y36(_o.d),e.Y36(e.sBO),e.Y36(yo.k),e.Y36(u),e.Y36(We))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-forum-users"]],features:[e._Bn([We]),e.qOj],decls:6,vars:5,consts:[[1,"mb-3","rounded","px-3","pt-2","pb-3","formly-fieldset"],["class","legend-reset fs-reset mb-0 px-2 mw-100 lh-1 py-1",4,"ngIf"],[4,"ngTemplateOutlet"],["class","form-text text-muted",3,"innerHTML",4,"ngIf"],["fieldContet",""],[1,"legend-reset","fs-reset","mb-0","px-2","mw-100","lh-1","py-1"],[1,"form-label","mb-0","mw-100","text-truncate",3,"for"],["aria-hidden","true",4,"ngIf"],["aria-hidden","true"],[1,"form-text","text-muted",3,"innerHTML"],[1,"position-relative"],["type","text","container","body",1,"form-control",3,"ngModel","formlyAttributes","ngbTypeahead","editable","inputFormatter","resultFormatter","ngModelChange","selectItem","focus"],["class","spinner-border spinner-border-sm text-primary position-absolute","role","status",4,"ngIf"],["class","invalid-feedback",3,"display",4,"ngIf"],["message","Recupero utenti","class","d-block mt-3",4,"ngIf","ngIfElse"],["userList",""],["role","status",1,"spinner-border","spinner-border-sm","text-primary","position-absolute"],[1,"visually-hidden"],[1,"invalid-feedback"],[3,"field"],["message","Recupero utenti",1,"d-block","mt-3"],[1,"formly-user-list-container","rounded","px-3","pt-2","mb-3","mt-2",3,"ngClass"],[1,"legend-reset","fs-reset","mb-0","px-2","pb-1"],["class","alert alert-primary text-center mb-0 fw-bold",3,"innerText",4,"ngIf","ngIfElse"],["noEmpty",""],[1,"alert","alert-primary","text-center","mb-0","fw-bold",3,"innerText"],[1,"formly-user-list","list-unstyled","mb-0","d-grid","px-2"],[3,"class",4,"ngFor","ngForOf"],["target","_blank",1,"avatar-container","rounded-circle","d-block","position-relative",3,"href"],["appTippy","Rimuovi",1,"remove-user","alert","alert-danger","position-absolute","cursor-pointer","mb-0","py-0","px-1",3,"disableOnTouchDevice","click"],[1,"material-icons","d-block","fs-reset"],["appImage","",1,"d-block","image-cover","rounded-circle",3,"src","alt"],["target","_blank",1,"d-block","fw-bold","mt-1","nickname","text-truncate","mw-100",3,"innerHTML","href"]],template:function(t,a){if(1&t&&(e.TgZ(0,"fieldset",0),e.YNc(1,Co,4,3,"legend",1),e.YNc(2,Oo,1,0,"ng-container",2),e.YNc(3,To,1,1,"div",3),e.qZA(),e.YNc(4,So,7,12,"ng-template",null,4,e.W1O)),2&t){const m=e.MAs(5);e.ekj("has-error",a.formControl.invalid),e.xp6(1),e.Q6J("ngIf",a.props.label),e.xp6(1),e.Q6J("ngTemplateOutlet",m),e.xp6(1),e.Q6J("ngIf",a.parsedDescription)}},dependencies:[p.mk,p.sg,p.O5,p.tP,x.JD,x.M2,v.Fj,v.JJ,v.On,Fo.t,xo.R,$e.dR,Ye.$,vo.g],styles:[".spinner-border[_ngcontent-%COMP%]{top:calc(50% - 8px);right:10px}fieldset.formly-user-list-container[_ngcontent-%COMP%]{border:1px dashed var(--bs-gray-500)}fieldset.formly-user-list-container[_ngcontent-%COMP%]:not(.empty-list){padding-bottom:.75rem}fieldset.formly-user-list-container.empty-list[_ngcontent-%COMP%]{padding-bottom:1rem}.formly-user-list[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(60px,1fr));gap:1rem}.formly-user-list[_ngcontent-%COMP%]   .remove-user[_ngcontent-%COMP%]{top:0;left:-8px}.formly-user-list[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{width:60px;height:60px;border:2px solid}.formly-user-list[_ngcontent-%COMP%]   .user-ff[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{border-color:#58a72e}.formly-user-list[_ngcontent-%COMP%]   .user-ff[_ngcontent-%COMP%]   .nickname[_ngcontent-%COMP%]{color:#58a72e!important}.formly-user-list[_ngcontent-%COMP%]   .user-fc[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{border-color:#0082cd}.formly-user-list[_ngcontent-%COMP%]   .user-fc[_ngcontent-%COMP%]   .nickname[_ngcontent-%COMP%]{color:#0082cd!important}.formly-user-list[_ngcontent-%COMP%]   .user-bf[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{border-color:#e67f22}.formly-user-list[_ngcontent-%COMP%]   .user-bf[_ngcontent-%COMP%]   .nickname[_ngcontent-%COMP%]{color:#e67f22!important}@media (min-width: 960px){.formly-user-list[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(75px,1fr));gap:1.5rem}.formly-user-list[_ngcontent-%COMP%]   .remove-user[_ngcontent-%COMP%]{top:4px}.formly-user-list[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{width:75px;height:75px}}"]}),o})();function Lo(o,s){if(1&o&&(e.TgZ(0,"legend"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.props.label)}}function jo(o,s){if(1&o&&e._UZ(0,"p",5),2&o){const t=e.oxw();e.Q6J("innerHTML",t.parsedDescription,e.oJD)}}function Uo(o,s){if(1&o&&(e.TgZ(0,"div",6),e._UZ(1,"formly-validation-message",7),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("field",t.field)}}function Zo(o,s){1&o&&e._UZ(0,"formly-field",7),2&o&&e.Q6J("field",s.$implicit)}let Qo=(()=>{class o extends x.fS{constructor(t){super(),this.customForumUtilsService=t,this.parsedDescription=""}ngOnInit(){this.props.description&&(this.parsedDescription=this.customForumUtilsService.parseBBCode(this.props.description))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-multi-schema"]],features:[e.qOj],decls:5,vars:4,consts:[[1,"pt-3","px-3","rounded","border","mt-2"],[4,"ngIf"],[3,"innerHTML",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],[3,"field",4,"ngFor","ngForOf"],[3,"innerHTML"],["role","alert",1,"alert","alert-danger"],[3,"field"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Lo,2,1,"legend",1),e.YNc(2,jo,1,1,"p",2),e.YNc(3,Uo,2,1,"div",3),e.YNc(4,Zo,1,1,"formly-field",4),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",a.props.label),e.xp6(1),e.Q6J("ngIf",a.parsedDescription),e.xp6(1),e.Q6J("ngIf",a.showError&&a.formControl.errors),e.xp6(1),e.Q6J("ngForOf",a.field.fieldGroup))},dependencies:[p.sg,p.O5,x.cw,x.M2],encapsulation:2}),o})();function Ro(o,s){if(1&o&&(e.TgZ(0,"legend",6),e._UZ(1,"div",7),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("innerHTML",t.parsedTitle,e.oJD)}}function Vo(o,s){1&o&&e.GkF(0)}const Bo=function(o){return{"has-error":o}};function No(o,s){if(1&o&&(e.TgZ(0,"fieldset",3),e.YNc(1,Ro,2,1,"legend",4),e.YNc(2,Vo,1,0,"ng-container",5),e.qZA()),2&o){const t=e.oxw(),a=e.MAs(4);e.Q6J("ngClass",e.VKq(3,Bo,t.formControl.invalid)),e.xp6(1),e.Q6J("ngIf",t.parsedTitle),e.xp6(1),e.Q6J("ngTemplateOutlet",a)}}function Yo(o,s){if(1&o&&e._UZ(0,"div",10),2&o){const t=e.oxw(2);e.Q6J("innerHTML",t.parsedTitle,e.oJD)}}function Go(o,s){1&o&&e.GkF(0)}function Ho(o,s){if(1&o&&(e.TgZ(0,"div",8),e.YNc(1,Yo,1,1,"div",9),e.YNc(2,Go,1,0,"ng-container",5),e.qZA()),2&o){const t=e.oxw(),a=e.MAs(4);e.xp6(1),e.Q6J("ngIf",t.parsedTitle),e.xp6(1),e.Q6J("ngTemplateOutlet",a)}}function qo(o,s){if(1&o&&e._UZ(0,"p",14),2&o){const t=e.oxw(2);e.Q6J("innerHTML",t.parsedDescription,e.oJD)}}function Wo(o,s){if(1&o&&(e.TgZ(0,"div",15),e._UZ(1,"formly-validation-message",16),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("field",t.field)}}function $o(o,s){1&o&&e._UZ(0,"formly-field",16),2&o&&e.Q6J("field",s.$implicit)}function Ko(o,s){if(1&o&&(e.YNc(0,qo,1,1,"p",11),e.YNc(1,Wo,2,1,"div",12),e.YNc(2,$o,1,1,"formly-field",13)),2&o){const t=e.oxw();e.Q6J("ngIf",t.parsedDescription),e.xp6(1),e.Q6J("ngIf",t.showError&&t.formControl.errors),e.xp6(1),e.Q6J("ngForOf",t.field.fieldGroup)}}let zo=(()=>{class o extends x.fS{constructor(t){super(),this.customFormUtilsService=t,this.parsedTitle="",this.parsedDescription=""}ngOnInit(){this.parsedDescription=this.props.description?this.customFormUtilsService.parseBBCode(this.props.description):"",this.parsedTitle=this.props.label?this.customFormUtilsService.parseBBCode(this.props.label):""}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-object"]],features:[e.qOj],decls:5,vars:2,consts:[["class","px-3 mb-3 pt-1 rounded formly-fieldset",3,"ngClass",4,"ngIf","ngIfElse"],["noFieldset",""],["objectFieldContent",""],[1,"px-3","mb-3","pt-1","rounded","formly-fieldset",3,"ngClass"],["class","legend-reset fs-xl px-2 mb-0 pb-1 mw-100 d-flex align-items-center",4,"ngIf"],[4,"ngTemplateOutlet"],[1,"legend-reset","fs-xl","px-2","mb-0","pb-1","mw-100","d-flex","align-items-center"],[1,"mw-100","text-truncate",3,"innerHTML"],[1,"mb-3"],["class","h4",3,"innerHTML",4,"ngIf"],[1,"h4",3,"innerHTML"],["class","text-justify mt-2",3,"innerHTML",4,"ngIf"],["class","alert alert-danger formly-field-object-error text-center","role","alert",4,"ngIf"],[3,"field",4,"ngFor","ngForOf"],[1,"text-justify","mt-2",3,"innerHTML"],["role","alert",1,"alert","alert-danger","formly-field-object-error","text-center"],[3,"field"]],template:function(t,a){if(1&t&&(e.YNc(0,No,3,5,"fieldset",0),e.YNc(1,Ho,3,2,"ng-template",null,1,e.W1O),e.YNc(3,Ko,3,3,"ng-template",null,2,e.W1O)),2&t){const m=e.MAs(2);e.Q6J("ngIf",a.props.fieldsetTemplate)("ngIfElse",m)}},dependencies:[p.mk,p.sg,p.O5,p.tP,x.cw,x.M2],encapsulation:2}),o})(),Xo=(()=>{class o extends x.fS{constructor(){super(...arguments),this.defaultOptions={props:{cols:1,rows:10}}}}return o.\u0275fac=function(){let s;return function(a){return(s||(s=e.n5z(o)))(a||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-textarea"]],features:[e.qOj],decls:2,vars:6,consts:[[1,"form-control",3,"formControl","cols","rows","formlyAttributes"]],template:function(t,a){1&t&&(e.TgZ(0,"textarea",0),e._uU(1,"    "),e.qZA()),2&t&&(e.ekj("is-invalid",a.showError),e.Q6J("formControl",a.formControl)("cols",a.props.cols)("rows",a.props.rows)("formlyAttributes",a.field))},dependencies:[x.JD,v.Fj,v.JJ,v.oH],encapsulation:2,changeDetection:0}),o})();var en=y(3204),tn=y(6818);function rn(o,s){return`Questo campo deve avere almeno ${s.props.minLength} caratteri`}function sn(o,s){return`Questo campo pu\xf2 avere al massimo ${s.props.maxLength} caratteri`}function ln(o,s){return`Questo campo deve avere un valore minimo di ${s.props.min}`}function an(o,s){return`Questo campo pu\xf2 avere un valore massimo di ${s.props.max}`}function cn(){return"Il campo non rispetta lo schema richiesto"}function pn(o,s){return`Questo campo deve avere almeno ${s.props.minItems} element${1===s.props.minItems?"o":"i"}!`}function dn(o,s){return`Questo campo pu\xf2 avere al massimo ${s.props.maxItems} element${1===s.props.maxItems?"o":"i"}!`}function un(o,s){return`Questo campo deve essere un multiplo di ${s.props.step}`}var mn=y(5254),fn=y(1599);let hn=(()=>{class o extends x.fS{constructor(){super(...arguments),this.defaultOptions={props:{label:""}}}}return o.\u0275fac=function(){let s;return function(a){return(s||(s=e.n5z(o)))(a||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-label"]],features:[e.qOj],decls:2,vars:1,template:function(t,a){1&t&&(e.TgZ(0,"h5"),e._uU(1),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",a.props.label,""))},encapsulation:2,changeDetection:0}),o})(),gn=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[p.ez,r,x.X0.forRoot({extras:{renderFormlyFieldElement:!1},wrappers:[{name:"form-field",component:ot}],validationMessages:[{name:"required",message:"Compila questo campo!"},{name:"minLength",message:rn},{name:"maxLength",message:sn},{name:"min",message:ln},{name:"max",message:an},{name:"minItems",message:pn},{name:"maxItems",message:dn},{name:"multipleOf",message:un},{name:"pattern",message:cn},{name:"uniqueItems",message:"Non possono esserci elementi uguali fra loro!"}],types:[{name:"array",component:xt},{name:"code-editor",component:Jt,wrappers:["form-field"]},{name:"object",component:zo},{name:"textarea",component:Xo},{name:"forum-groups",component:Nt,wrappers:["form-field"]},{name:"forum-sections",component:lo,wrappers:["form-field"]},{name:"label",component:hn},{name:"forum-users",component:Jo},{name:"multischema",component:Qo},{name:"boolean",component:Ot,wrappers:["form-field"]}]}),v.u5,en.$,tn.q,kt,$e.ZS,v.UX,mn.G,fn.g]}),o})()},6335:(se,H,y)=>{y.d(H,{b:()=>I});var p=y(4650),e=y(6895),x=y(5174);const v=function(j){return{inactive:j}},F=function(){return{placement:"bottom"}};function E(j,A){if(1&j){const D=p.EpF();p.TgZ(0,"li",11),p.NdJ("click",function(){p.CHM(D);const T=p.oxw();return p.KtG(T.save())}),p.TgZ(1,"div",12),p._uU(2,"check_circle"),p.qZA()()}if(2&j){const D=p.oxw();p.Q6J("ngClass",p.VKq(4,v,!D.isFormValid))("appTippy",D.isFormValid?"Salva":"Il form non \xe8 valido!")("tippyProps",p.DdM(6,F))("disableOnTouchDevice",!0)}}let I=(()=>{class j{constructor(D){this.viewportScroller=D,this.buttonsId="",this.isFormValid=!1,this.hasForm=!0,this.cancelEvent=new p.vpe,this.saveEvent=new p.vpe,this.tipsEvent=new p.vpe}ngOnInit(){}scrollToPageTop(){this.viewportScroller.scrollToPosition([0,0])}scrollToButtons(){this.buttonsId&&this.viewportScroller.scrollToAnchor(this.buttonsId)}cancel(){this.cancelEvent.emit()}save(){this.saveEvent.emit()}tipsClick(){this.tipsEvent.emit()}}return j.\u0275fac=function(D){return new(D||j)(p.Y36(e.EM))},j.\u0275cmp=p.Xpm({type:j,selectors:[["app-script-form-utilities"]],inputs:{buttonsId:"buttonsId",isFormValid:"isFormValid",hasForm:"hasForm"},outputs:{cancelEvent:"cancelEvent",saveEvent:"saveEvent",tipsEvent:"tipsEvent"},decls:15,vars:16,consts:[[1,"utilities","position-fixed","border-start","bg-white","shadow-sm","d-none","d-xl-block","fixed-scroll"],[1,"list-unstyled","mb-0","d-flex","flex-column","align-items-center"],["appTippy","Vai in cima",3,"tippyProps","disableOnTouchDevice","click"],[1,"d-block","material-icons-outlined","text-primary"],["appTippy","Suggerimenti",3,"tippyProps","disableOnTouchDevice","click"],[1,"d-block","material-icons-outlined","text-indigo"],["appTippy","Vai ai pulsanti",3,"ngClass","tippyProps","disableOnTouchDevice","click"],[1,"d-block","material-icons-outlined","text-warning"],["appTippy","Annulla",3,"tippyProps","disableOnTouchDevice","click"],[1,"d-block","material-icons-outlined","text-danger"],[3,"ngClass","appTippy","tippyProps","disableOnTouchDevice","click",4,"ngIf"],[3,"ngClass","appTippy","tippyProps","disableOnTouchDevice","click"],[1,"d-block","material-icons-outlined","text-success"]],template:function(D,V){1&D&&(p.TgZ(0,"div",0)(1,"ul",1)(2,"li",2),p.NdJ("click",function(){return V.scrollToPageTop()}),p.TgZ(3,"div",3),p._uU(4,"arrow_circle_up"),p.qZA()(),p.TgZ(5,"li",4),p.NdJ("click",function(){return V.tipsClick()}),p.TgZ(6,"div",5),p._uU(7,"lightbulb_circle"),p.qZA()(),p.TgZ(8,"li",6),p.NdJ("click",function(){return V.scrollToButtons()}),p.TgZ(9,"div",7),p._uU(10,"build_circle"),p.qZA()(),p.TgZ(11,"li",8),p.NdJ("click",function(){return V.cancel()}),p.TgZ(12,"div",9),p._uU(13,"cancel"),p.qZA()(),p.YNc(14,E,3,7,"li",10),p.qZA()()),2&D&&(p.xp6(2),p.Q6J("tippyProps",p.DdM(10,F))("disableOnTouchDevice",!0),p.xp6(3),p.Q6J("tippyProps",p.DdM(11,F))("disableOnTouchDevice",!0),p.xp6(3),p.Q6J("ngClass",p.VKq(12,v,0===V.buttonsId.length))("tippyProps",p.DdM(14,F))("disableOnTouchDevice",!0),p.xp6(3),p.Q6J("tippyProps",p.DdM(15,F))("disableOnTouchDevice",!0),p.xp6(3),p.Q6J("ngIf",V.hasForm))},dependencies:[e.mk,e.O5,x.$],styles:[".utilities[_ngcontent-%COMP%]{right:0;top:0;bottom:0;padding-top:calc(64px + 1.5rem)}.utilities[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{width:75px}li[_ngcontent-%COMP%]{margin:.5rem 0;transition:opacity .2s}li.inactive[_ngcontent-%COMP%]{opacity:.5}li[_ngcontent-%COMP%]:not(.inactive){cursor:pointer}.material-icons-outlined[_ngcontent-%COMP%]{font-size:36px}"]}),j})()},9130:(se,H,y)=>{y.d(H,{M:()=>v});var p=y(6895),e=y(5254),x=y(4650);let v=(()=>{class F{}return F.\u0275fac=function(I){return new(I||F)},F.\u0275mod=x.oAB({type:F}),F.\u0275inj=x.cJS({imports:[p.ez,e.G]}),F})()},5109:(se,H,y)=>{y.d(H,{Bc:()=>e,Lc:()=>v,O9:()=>I,UD:()=>F,Wf:()=>j,lw:()=>E});var p=y(2300);const e=/^https:\/\/[^?]+[^?\/]+\.js(\?.+)?$/,x=/^https?:\/\/[^?]+[^?\/]+\.js(\?.+)?$/,v=/^https:\/\/[^?]+[^?\/]+\.css(\?.+)?$/,F={type:"object",required:["name","js","tab","script_type","settings_schema"],properties:{name:{type:"string",title:"Nome:"},sdesc:{type:"string",title:"Descrizione:",description:"Una descrizione accattivante incentiva gli utenti ad installare lo script!",default:""},public_link:{type:"string",title:"Link alla guida:",description:"Una guida completa \xe8 fondamentale per mostrare tutte le potenzialit\xe0 dello script!",default:"",widget:{formlyConfig:{validators:{pattern:{expression:A=>!A.value||/^https:\/\/(.+?)\.(forumfree\.it|forumcommunity\.net|blogfree\.net)\/\?t=(\d+)(#entry(\d+))?$/.test(A.value),message:(A,D)=>`"${D.formControl?.value}" non \xe8 un valido link alla guida!`}}}}},preview:{type:"string",title:"Link all'anteprima (jpg, png, gif o webp):",description:"Un'anteprima perfetta riesce a mostrare in pochi secondi il funzionamento dello script!",default:"",widget:{formlyConfig:{validators:{pattern:{expression:A=>!A.value||/^https:\/\/(.+?)\.(jpg|png|gif|webp)$/.test(A.value),message:(A,D)=>`"${D.formControl?.value}" non \xe8 un valido link all'anteprima!`}}}}},tab:{type:"string",title:"Tab:",oneOf:[{}],default:""},js:{type:"string",title:"Link del file javascript:",widget:{formlyConfig:{validators:{pattern:{expression:A=>!A.value||e.test(A.value),message:(A,D)=>`"${D.formControl?.value}" non \xe8 un file javascript valido!`}}}}},js_beta:{type:["string","null"],title:"Link del file javascript per la versione beta (caricata solo per il dev):",widget:{formlyConfig:{validators:{pattern:{expression:A=>!A.value||x.test(A.value),message:(A,D)=>`"${D.formControl?.value}" non \xe8 un file javascript valido!`}}}}},js_pos:{type:"number",title:"Posizione in cui verr\xe0 importato il file js:",oneOf:[{}],default:7},script_type:{type:"number",title:"Tipo:",oneOf:[{title:"Script per forum",const:p.AV.FORUM},{title:"Script per utenti (profilo o userscript)",const:p.AV.USER},{title:"Script per entrambi",const:p.AV.ALL}],default:0},js_admin:{type:"array",title:"File js/css per le impostazioni (opzionali)",description:"Si tratta di una lista di file js o css che saranno eseguiti (nell'ordine in cui sono inseriti) in un iframe sopra le impostazioni dello script.",uniqueItems:!0,items:{type:"string",title:"Link del file:",widget:{formlyConfig:{validators:{pattern:{expression:A=>!A.value||e.test(A.value)||v.test(A.value),message:(A,D)=>`"${D.formControl?.value}" non \xe8 un file valido!`}}}}}},webhook:{type:"object",title:"Impostazioni webhook (opzionali)",description:"Se lo desideri, puoi indicare un url che verr\xe0 chiamato (richiesta [i]POST[/i]) ogni volta che si verifica [i]l'evento abilitato[/i] dai checkbox seguenti, avente come payload le informazioni riguardanti l'evento (ad esempio nel caso di modifica delle impostazioni dello script verranno inviate le impostazioni dello script stesso).",widget:{formlyConfig:{props:{fieldsetTemplate:!0}}},properties:{url:{type:["string","null"],title:"Link al webhook:",widget:{formlyConfig:{validators:{pattern:{expression:A=>{if(null===A.value)return!0;let D;try{D=new URL(A.value)}catch{return!1}return"http:"===D.protocol||"https:"===D.protocol},message:(A,D)=>`"${D.formControl?.value}" non \xe8 un link valido!`}}}}},script_settings:{type:"boolean",title:"Chiama il webhook quando vengono salvate le impostazioni",default:!1},script_manage:{type:"boolean",title:"Chiama il webhook quando lo script viene installato o disinstallato",default:!1}}},libs:{type:"array",uniqueItems:!0,title:"Librerie e framework da importare:",default:[-1],items:{type:"number",oneOf:[{title:"------",const:-1}]}},deps:{type:"array",uniqueItems:!0,title:"Script richiesti per l'installazione:",default:[-1],items:{type:"number",oneOf:[{title:"------",const:-1}]}},settings_schema:{type:"code-editor",title:"Schema JSON per le opzioni:",default:"{}",widget:{formlyConfig:{props:{editorOptions:{height:"500px"}}}}},html_head:{type:"code-editor",title:"Codice HTML che sar\xe0 mostrato nel tag HEAD (anche sul layout FFMobile):",description:"In questo campo \xe8 possibile inserire degli stili usando il tag <style>",default:"",widget:{formlyConfig:{props:{editorOptions:{language:"html"}}}}},layouts:{type:"object",title:"Compatibilit\xe0",description:"Se uno script non \xe8 compatibile con un determinato layout, in automatico [i]non[/i] verr\xe0 eseguito sui forum che possiedono tale layout.",widget:{formlyConfig:{props:{fieldsetTemplate:!0}}},properties:{quirks:{type:"boolean",title:"Compatibile con il layout Quirks",default:!1},standard:{type:"boolean",title:"Compatibile con il layout Standard",default:!0},ffmobile:{type:"boolean",title:"Compatibile con il layout FFMobile",default:!0},responsive:{type:"boolean",title:"Compatibile con il layout Responsive",default:!1}}},hidden_script:{type:"boolean",title:"Nascondi lo script dalla lista (test o script privati)",default:!1}}},E={name:"",public_link:"",sdesc:"",preview:"",js:"",js_beta:null,tab:"ffb",js_pos:7,js_admin:[],script_type:0,libs:[-1],deps:[-1],settings_default:{},settings_schema:"{}",html_head:"",hidden_script:!1,demo:!1,webhook:{url:null,script_settings:!1,script_manage:!1},layouts:{quirks:!1,standard:!0,ffmobile:!0,responsive:!1}},I=[{title:"[Open] Font Awesome 4.7.0",link:"https://ffb.forumfree.net:4999/nicoxys/libs/fontawesome-4.7.0.css"},{title:"[Open] Font Awesome 5.7.0",link:"https://ffb.forumfree.net:4999/nicoxys/libs/fontawesome-5.7.0.css"},{title:"[Open] Twitter API",link:"https://platform.twitter.com/widgets.js"},{title:"[Open] AngularJS 1.7.7",link:"https://ffb.forumfree.net:4999/nicoxys/libs/angularjs-1.7.7.js"},{title:"[Open] ReactJS (w/ dom) 16.8.2",link:"https://ffb.forumfree.net:4999/nicoxys/libs/reactjs-16.8.2.js"},{title:"[Open] Popper 2.5.2",link:"https://ffb.forumfree.net:4999/nicoxys/libs/popper-2.5.2.js"},{title:"[Open] Tippy 6.2.6",link:"https://ffb.forumfree.net:4999/nicoxys/libs/tippy-6.2.6.js"},{title:"[Open] Vue.js 2.6.6",link:"https://ffb.forumfree.net:4999/nicoxys/libs/vuejs-2.6.6.js"},{title:"[Open] Mustache 3.0.1",link:"https://ffb.forumfree.net:4999/nicoxys/libs/mustache-3.0.1.js"},{title:"[Open] Handlebars 4.7.3",link:"https://ffb.forumfree.net:4999/nicoxys/libs/handlebars-4.7.3.js"},{title:"[Open] Timeago",link:"https://ffb.forumfree.net:4999/nicoxys/libs/jquery.timeago.js"},{title:"[Open] RxJS 6.5.1",link:"https://ffb.forumfree.net:4999/nicoxys/libs/rxjs-6.5.1.js"},{title:"[Open] ChartJs 2.7.2",link:"https://ffb.forumfree.net:4999/nicoxys/libs/chartjs-2.7.2.js"},{title:"[Open] Apollo Client",link:"https://ffb.forumfree.net:4999/nicoxys/libs/apollo-client-2.6.10.js"},{title:"[Private - All] Crediti in fondo al forum",link:"https://ffb.forumfree.net:4999/nicoxys/private/credits.js"},{tab:p.tr.FFB,title:"[Private - FFBoard] FFUpload",link:"https://ffb.forumfree.net:4999/nicoxys/libs/ffupload.js"},{tab:p.tr.FFB,title:"[Private - FFBoard] HelloBox",link:"https://ffb.forumfree.net:4999/nicoxys/forum/hellobox.js"}],j=[{title:"Codice HTML che sar\xe0 mostrato nel tag HEAD",position:"html_head"},{title:"[Start] Codice HTML che sar\xe0 mostrato in CIMA a tutte le pagine",position:"html_top_start"},{title:"[End] Codice HTML che sar\xe0 mostrato in CIMA a tutte le pagine",position:"html_top_end"},{title:"[Start] Codice HTML che sar\xe0 mostrato in tutte le pagine sotto il logo del sito",position:"html_logo_start"},{title:"[End] Codice HTML che sar\xe0 mostrato in tutte le pagine sotto il logo del sito",position:"html_logo_end"},{title:"[Start] Codice HTML che sar\xe0 mostrato nella homepage del sito",position:"html_home_start"},{title:"[End] Codice HTML che sar\xe0 mostrato nella homepage del sito",position:"html_home_end"},{title:"Codice HTML che sar\xe0 mostrato sopra le pubblicit\xe0",position:"html_ads_start"},{title:"[Start] Codice HTML che sar\xe0 mostrato in FONDO a tutte le pagine",position:"html_bottom_start"},{title:"[End] Codice HTML che sar\xe0 mostrato in FONDO a tutte le pagine",position:"html_bottom_end"}]},8244:(se,H,y)=>{y.d(H,{B:()=>e});var p=y(4650);let e=(()=>{class x{constructor(){this.allowedProps={$ref:{validator:this.isString},anyOf:{validator:this.validateAnyOf},default:{validator:this.isNestedOfPrimitives},definitions:null,description:null,enum:{validator:this.validateEnum},items:{child:"allProps"},maximum:null,maxItems:null,maxLength:null,minimum:null,minItems:null,minLength:null,multipleOf:null,oneOf:{validator:this.validateOneOf},properties:null,required:{validator:this.validateRequired},title:null,type:{validator:this.isNestedOfPrimitives},uniqueItems:null,widget:{child:{formlyConfig:{child:{props:{child:{placeholder:{validator:this.isString},multiple:{validator:this.isBoolean},pattern:{validator:this.isString},type:{validator:function(F){return"hidden"===F}},minLength:{validator:this.isNumber},maxLength:{validator:this.isNumber},rows:{validator:this.isNumber},keepGroupsWithoutId:{validator:this.isBoolean},fieldsetTemplate:{validator:this.isBoolean}}},type:{validator:function(F){return"radio"===F}}}}}}},this.fieldListKeys=["properties","definitions"]}validateSchema(F){!this.isObject(F)||((!F.hasOwnProperty("type")||!F.hasOwnProperty("properties")||"object"!==F.type)&&(F.type="object",F.properties={}),this.validate(F))}validate(F,E){E||(E=this.allowedProps);for(const[I,j]of Object.entries(F))if(E.hasOwnProperty(I)){if(E[I]?.hasOwnProperty("validator"))E[I].validator.call(this,j)||delete F[I];else if(this.fieldListKeys.includes(I))for(const A of Object.keys(F[I]))this.validate(F[I][A]);else if(!this.isPrimitive(j)){if(!E[I]?.hasOwnProperty("child")||!this.isObject(j)){delete F[I];continue}this.validate(F[I],"allProps"===E[I].child?this.allowedProps:E[I].child)}}else delete F[I]}isObject(F){return null!=F&&"object"==typeof F&&!Array.isArray(F)}isPrimitive(F){return this.isString(F)||this.isNumber(F)||this.isBoolean(F)||null==F}isString(F){return"string"==typeof F}isBoolean(F){return"boolean"==typeof F}isNumber(F){return"number"==typeof F}validateRequired(F){if(!Array.isArray(F))return!1;for(const E of F)if(!this.isString(E))return!1;return!0}validateEnum(F){if(!Array.isArray(F))return!1;for(const E of F)if(!this.isString(E)&&!this.isNumber(E))return!1;return!0}validateOneOf(F){if(Array.isArray(F)&&F[0]?.hasOwnProperty("const")){for(const E of F){if(!this.isObject(E))return!1;this.validate(E,{const:null,title:null})}return!0}return this.validateAnyOf(F)}validateAnyOf(F){if(!Array.isArray(F))return!1;for(const E of F){if(!this.isObject(E))return!1;this.validate(E)}return!0}isNestedOfPrimitives(F){if(this.isPrimitive(F))return!0;if(Array.isArray(F)||this.isObject(F)){for(const E of Object.values(F))if(!this.isNestedOfPrimitives(E))return!1;return!0}return!1}}return x.\u0275fac=function(F){return new(F||x)},x.\u0275prov=p.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})()},699:(se,H,y)=>{y.d(H,{c:()=>V});var p=y(4650),e=y(4006),x=y(6212),v=y(8505);function E(T){return""===T||null==T}function I(T){return null!=T&&"object"==typeof T&&!Array.isArray(T)}function j(T){return Number.isInteger?Number.isInteger(T):"number"==typeof T&&Math.floor(T)===T}function A(T){return"object"==typeof T&&(T.hasOwnProperty("const")||T.enum&&1===T.enum.length)}function D(T){if(!T.fieldGroup)return(0,x._S)(T)&&void 0!==(0,x.Hl)(T)?1:0;const S=T.fieldGroup.reduce((d,C)=>D(C)+d,0);if(0===S&&(0,x._S)(T)){const d=(0,x.Hl)(T);if(null===d||void 0!==d&&(T.fieldArray&&Array.isArray(d)||!T.fieldArray&&I(d)))return 1}return S}let V=(()=>{class T{toFieldConfig(d,C){return this._toFieldConfig(d,{schema:d,...C||{}})}_toFieldConfig(d,{key:C,...b}){d=this.resolveSchema(d,b);const M=this.guessSchemaType(d);let h={type:M[0],defaultValue:d.default,props:{label:d.title,readonly:d.readOnly,description:d.description}};switch(null!=C&&(h.key=C),!b.ignoreDefault&&(d.readOnly||b.readOnly)&&(h.props.disabled=!0,b={...b,readOnly:!0}),b.resetOnHide&&(h.resetOnHide=!0),C&&b.strict&&this.addValidator(h,"type",(_,P)=>{const w=(0,x.Hl)(P);if(null!=w)switch(h.type){case"string":return"string"==typeof w;case"integer":return j(w);case"number":return"number"==typeof w;case"object":return I(w);case"array":return Array.isArray(w)}return!0}),!1===b.shareFormControl&&(h.shareFormControl=!1),b.ignoreDefault&&delete h.defaultValue,this.addValidator(h,"type",{schemaType:M,expression:({value:_})=>{if(void 0===_||null===_&&-1!==M.indexOf("null"))return!0;switch(M[0]){case"null":return null===typeof _;case"string":return"string"==typeof _;case"integer":return j(_);case"number":return"number"==typeof _;case"object":return I(_);case"array":return Array.isArray(_)}return!0}}),h.type){case"number":case"integer":h.parsers=[_=>E(_)?void 0:Number(_)],d.hasOwnProperty("minimum")&&(h.props.min=d.minimum),d.hasOwnProperty("maximum")&&(h.props.max=d.maximum),d.hasOwnProperty("exclusiveMinimum")&&(h.props.exclusiveMinimum=d.exclusiveMinimum,this.addValidator(h,"exclusiveMinimum",({value:_})=>E(_)||_>d.exclusiveMinimum)),d.hasOwnProperty("exclusiveMaximum")&&(h.props.exclusiveMaximum=d.exclusiveMaximum,this.addValidator(h,"exclusiveMaximum",({value:_})=>E(_)||_<d.exclusiveMaximum)),d.hasOwnProperty("multipleOf")&&(h.props.step=d.multipleOf,this.addValidator(h,"multipleOf",({value:_})=>{if(E(_)||"number"!=typeof _||0===_||d.multipleOf<=0)return!0;const P=Math.pow(10,function F(T){if(!isFinite(T))return 0;let S=1,d=0;for(;Math.round(T*S)/S!==T;)S*=10,d++;return d}(d.multipleOf));return Math.round(_*P)%Math.round(d.multipleOf*P)==0}));break;case"string":h.parsers=[_=>(-1!==M.indexOf("null")?_=E(_)?null:_:h.props.required||(_=""===_?void 0:_),_)],["minLength","maxLength","pattern"].forEach(_=>{d.hasOwnProperty(_)&&(h.props[_]=d[_])});break;case"object":{h.fieldGroup||(h.fieldGroup=[]);const{propDeps:_,schemaDeps:P}=this.resolveDependencies(d);Object.keys(d.properties||{}).forEach(w=>{const R=Array.isArray(d.required)&&-1!==d.required.indexOf(w),Z=this._toFieldConfig(d.properties[w],{...b,key:w,isOptional:b.isOptional||!R});if(h.fieldGroup.push(Z),(R||_[w])&&(Z.expressions={...Z.expressions||{},"props.required":N=>{let k=N.parent;const L=N.fieldGroup&&null!=N.key?k.model:N.model;for(;null==k.key&&k.parent;)k=k.parent;return!!(L||k&&k.props&&k.props.required)&&(!(!Array.isArray(d.required)||-1===d.required.indexOf(w))||_[w]&&N.model&&_[w].some(G=>!E(N.model[G])))}}),P[w]){const N=L=>L.hasOwnProperty("const")?L.const:L.enum[0],k=P[w].oneOf;k&&k.every(L=>L.properties&&L.properties[w]&&A(L.properties[w]))?k.forEach(L=>{const{[w]:K,...G}=L.properties;h.fieldGroup.push({...this._toFieldConfig({...L,properties:G},{...b,resetOnHide:!0}),expressions:{hide:ie=>!ie.model||N(K)!==ie.model[w]}})}):h.fieldGroup.push({...this._toFieldConfig(P[w],b),expressions:{hide:L=>!L.model||E(L.model[w])}})}}),d.oneOf&&h.fieldGroup.push(this.resolveMultiSchema("oneOf",d.oneOf,{...b,shareFormControl:!1})),d.anyOf&&h.fieldGroup.push(this.resolveMultiSchema("anyOf",d.anyOf,b));break}case"array":d.hasOwnProperty("minItems")&&(h.props.minItems=d.minItems,this.addValidator(h,"minItems",(_,P)=>{const w=(0,x.Hl)(P);return E(w)||w.length>=d.minItems}),!b.isOptional&&d.minItems>0&&void 0===h.defaultValue&&(h.defaultValue=Array.from(new Array(d.minItems)))),d.hasOwnProperty("maxItems")&&(h.props.maxItems=d.maxItems,this.addValidator(h,"maxItems",(_,P)=>{const w=(0,x.Hl)(P);return E(w)||w.length<=d.maxItems})),d.hasOwnProperty("uniqueItems")&&(h.props.uniqueItems=d.uniqueItems,this.addValidator(h,"uniqueItems",(_,P)=>{const w=(0,x.Hl)(P);return!(!E(w)&&d.uniqueItems)||Array.from(new Set(w.map(Z=>JSON.stringify(Z)))).length===w.length})),d.items&&!Array.isArray(d.items)&&(d.items=this.resolveSchema(d.items,b)),this.isEnum(d)||(h.fieldArray=_=>{if(!Array.isArray(d.items)){const Z=d.items?this._toFieldConfig(d.items,b):{};return Z.props&&(Z.props.required=!0),Z}const P=_.fieldGroup?_.fieldGroup.length:0,w=d.items[P]?d.items[P]:d.additionalItems,R=w?this._toFieldConfig(w,b):{};return R.props&&(R.props.required=!0),d.items[P]&&(R.props.removable=!1),R})}return d.hasOwnProperty("const")&&(h.props.const=d.const,this.addValidator(h,"const",({value:_})=>_===d.const),h.type||(h.defaultValue=d.const)),this.isEnum(d)&&(h.props.multiple="array"===h.type,h.type="enum",h.props.options=this.toEnumOptions(d)),d.oneOf&&!h.type&&(delete h.key,h.fieldGroup=[this.resolveMultiSchema("oneOf",d.oneOf,{...b,key:C,shareFormControl:!1})]),d.oneOf&&!h.type&&(delete h.key,h.fieldGroup=[this.resolveMultiSchema("oneOf",d.oneOf,{...b,key:C,shareFormControl:!1})]),d.widget?.formlyConfig&&(h=this.mergeFields(h,d.widget.formlyConfig)),h.templateOptions=h.props,b.map?b.map(h,d):h}resolveSchema(d,C){return d&&d.$ref&&(d=this.resolveDefinition(d,C)),d&&d.allOf&&(d=this.resolveAllOf(d,C)),d}resolveAllOf({allOf:d,...C},b){if(!d.length)throw Error(`allOf array can not be empty ${d}.`);return d.reduce((M,h)=>(h=this.resolveSchema(h,b),M.required&&h.required&&(M.required=[...M.required,...h.required]),h.uniqueItems&&(M.uniqueItems=h.uniqueItems),["maxLength","maximum","exclusiveMaximum","maxItems","maxProperties"].forEach(_=>{!E(M[_])&&!E(h[_])&&(M[_]=M[_]<h[_]?M[_]:h[_])}),["minLength","minimum","exclusiveMinimum","minItems","minProperties"].forEach(_=>{!E(M[_])&&!E(h[_])&&(M[_]=M[_]>h[_]?M[_]:h[_])}),(0,x.Du)(M,h)),C)}resolveMultiSchema(d,C,b){return{type:"multischema",fieldGroup:[{type:"enum",defaultValue:-1,props:{multiple:"anyOf"===d,options:C.map((M,h)=>({label:M.title,value:h,disabled:M.readOnly}))},hooks:{onInit:M=>M.formControl.valueChanges.pipe((0,v.b)(()=>M.options.detectChanges(M.parent)))}},{fieldGroup:C.map((M,h)=>({...this._toFieldConfig(M,{...b,resetOnHide:!0}),expressions:{hide:(_,P)=>{const w=_.parent.parent.fieldGroup[0].formControl;if(-1===w.value||P){let R=_.parent.fieldGroup.map((Z,N)=>[Z,N,this.isFieldValid(Z,N,C,b)]).sort(([Z,,N],[k,,L])=>{if(N!==L)return L?1:-1;const K=D(Z),G=D(k);return K===G&&Z.props.disabled===k.props.disabled?0:G>K?1:-1}).map(([,Z])=>Z);if("anyOf"===d){const Z=R.filter(N=>D(_.parent.fieldGroup[N]));R=Z.length>0?Z:[R[0]||0]}R=R.length>0?R:[0],w.setValue("anyOf"===d?R:R[0])}return Array.isArray(w.value)?-1===w.value.indexOf(h):w.value!==h}}}))}]}}resolveDefinition(d,C){const[b,M]=d.$ref.split("#/");if(b)throw Error(`Remote schemas for ${d.$ref} not supported yet.`);const h=M?M.split("/").reduce((_,P)=>_?.hasOwnProperty(P)?_[P]:null,C.schema):null;if(!h)throw Error(`Cannot find a definition for ${d.$ref}.`);return h.$ref?this.resolveDefinition(h,C):{...h,...["title","description","default","widget"].reduce((_,P)=>(d.hasOwnProperty(P)&&(_[P]=d[P]),_),{})}}resolveDependencies(d){const C={},b={};return Object.keys(d.dependencies||{}).forEach(M=>{const h=d.dependencies[M];Array.isArray(h)?h.forEach(_=>{C[_]?C[_].push(M):C[_]=[M]}):b[M]=h}),{propDeps:C,schemaDeps:b}}guessSchemaType(d){const C=d?.type;return!C&&d?.properties?["object"]:Array.isArray(C)?1===C.length?C:2===C.length&&-1!==C.indexOf("null")?C.sort(b=>"null"==b?1:-1):C:C?[C]:[]}addValidator(d,C,b){d.validators=d.validators||{},d.validators[C]=b}isEnum(d){return!!d.enum||d.anyOf&&d.anyOf.every(A)||d.oneOf&&d.oneOf.every(A)||d.uniqueItems&&d.items&&!Array.isArray(d.items)&&this.isEnum(d.items)}toEnumOptions(d){if(d.enum)return d.enum.map(b=>({value:b,label:b}));const C=b=>{const M=b.hasOwnProperty("const")?b.const:b.enum[0],h={value:M,label:b.title||M};return b.readOnly&&(h.disabled=!0),h};return d.anyOf?d.anyOf.map(C):d.oneOf?d.oneOf.map(C):this.toEnumOptions(d.items)}isFieldValid(d,C,b,M){d._schemasFields||(Object.defineProperty(d,"_schemasFields",{enumerable:!1,writable:!0,configurable:!0}),d._schemasFields={});let h=d._schemasFields[C];const _=d.model?(0,x.kg)(d.model):d.fieldArray?[]:{};return h?(h.model=_,d.options.build(h)):h=d._schemasFields[C]=d.options.build({form:Array.isArray(_)?new e.Oe([]):new e.cw({}),fieldGroup:[this._toFieldConfig(b[C],{...M,resetOnHide:!0,ignoreDefault:!0,map:null,strict:!0})],model:_,options:{}}),h.form.valid}mergeFields(d,C){for(let b in C){const M="templateOptions"===b?"props":b;I(d[M])&&I(C[b])?d[M]=this.mergeFields(d[M],C[b]):null!=C[b]&&(d[M]=C[b])}return d}}return T.\u0275fac=function(d){return new(d||T)},T.\u0275prov=p.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})()},6212:(se,H,y)=>{y.d(H,{Du:()=>te,Hl:()=>X,JD:()=>Ie,M2:()=>Se,T7:()=>De,X0:()=>Ne,_S:()=>k,cw:()=>Fe,fS:()=>pe,hv:()=>Je,kg:()=>q,n2:()=>Le});var p=y(4650),e=y(4006),x=y(5191),v=y(6451),F=y(9646),E=y(9751),I=y(7579),j=y(1884),A=y(8675),D=y(8372),V=y(9300),T=y(3900),S=y(5698),d=y(8505),C=y(4004),b=y(6895),M=y(1481);const h=["container"];function _(c,i){}function P(c,i){1&c&&p._UZ(0,"formly-field",1),2&c&&p.Q6J("field",i.$implicit)}const w=["*"],R=["fieldComponent"];function N(c,i,n){if(i.id)return i.id;let r=i.type;return!r&&i.template&&(r="template"),r instanceof p.DyG&&(r=r.prototype.constructor.name),[c,r,i.key,n].join("_")}function k(c){return!oe(c.key)&&""!==c.key}function L(c){if(!k(c))return[];if(c._keyPath?.key!==c.key){let i=[];if("string"==typeof c.key){const n=-1===c.key.indexOf("[")?c.key:c.key.replace(/\[(\w+)\]/g,".$1");i=-1!==n.indexOf(".")?n.split("."):[n]}else i=Array.isArray(c.key)?c.key.slice(0):[`${c.key}`];B(c,"_keyPath",{key:c.key,path:i})}return c._keyPath.path.slice(0)}const K=["required","pattern","minLength","maxLength","min","max"];function G(c,i){let n=L(c);if(0===n.length)return;let r=c;for(;r.parent;)r=r.parent,n=[...L(r),...n];if(void 0===i&&c.resetOnHide){const l=n.pop();delete n.reduce((f,g)=>f[g]||{},r.model)[l]}else!function ie(c,i,n){for(let r=0;r<i.length-1;r++){const l=i[r];(!c[l]||!ee(c[l]))&&(c[l]=/^\d+$/.test(i[r+1])?[]:{}),c=c[l]}c[i[i.length-1]]=q(n)}(r.model,n,i)}function X(c){let i=c.parent?c.parent.model:c.model;for(const n of L(c)){if(!i)return i;i=i[n]}return i}function te(c,...i){return i.forEach(n=>{for(const r in n)oe(c[r])||Ee(c[r])?c[r]=q(n[r]):we(c[r],n[r])&&te(c[r],n[r])}),c}function oe(c){return null==c}function ue(c){return void 0===c}function Ee(c){return""===c}function fe(c){return"function"==typeof c}function we(c,i){return ee(c)&&ee(i)&&Object.getPrototypeOf(c)===Object.getPrototypeOf(i)&&!(Array.isArray(c)||Array.isArray(i))}function ee(c){return null!=c&&"object"==typeof c}function q(c){if(!ee(c)||(0,x.b)(c)||c instanceof p.Rgc||c.changingThisBreaksApplicationSecurity||-1!==["RegExp","FileList","File","Blob"].indexOf(c.constructor.name))return c;if(c instanceof Set)return new Set(c);if(c instanceof Map)return new Map(c);if(c._isAMomentObject&&fe(c.clone))return c.clone();if(c instanceof e.TO)return null;if(c instanceof Date)return new Date(c.getTime());if(Array.isArray(c))return c.slice(0).map(r=>q(r));const i=Object.getPrototypeOf(c);let n=Object.create(i);return n=Object.setPrototypeOf(n,i),Object.keys(c).reduce((r,l)=>{const u=Object.getOwnPropertyDescriptor(c,l);return u.get?Object.defineProperty(r,l,u):r[l]=q(c[l]),r},n)}function B(c,i,n){Object.defineProperty(c,i,{enumerable:!1,writable:!0,configurable:!0}),c[i]=n}function he(c,i,n){let r=[];const l=()=>{r.forEach(f=>f()),r=[]},u=Y(c,i,({firstChange:f,currentValue:g})=>{!f&&n(),l(),ee(g)&&"Object"===g.constructor.name&&Object.keys(g).forEach(J=>{r.push(he(c,[...i,J],n))})});return()=>{u.unsubscribe(),l()}}function Y(c,i,n){c._observers||B(c,"_observers",{});let r=c;for(let g=0;g<i.length-1;g++)(!r[i[g]]||!ee(r[i[g]]))&&(r[i[g]]=/^\d+$/.test(i[g+1])?[]:{}),r=r[i[g]];const l=i[i.length-1],u=i.join(".");c._observers[u]||(c._observers[u]={value:r[l],onChange:[]});const f=c._observers[u];if(r[l]!==f.value&&(f.value=r[l]),-1===f.onChange.indexOf(n)&&(f.onChange.push(n),n({currentValue:f.value,firstChange:!0}),f.onChange.length>=1)){const{enumerable:g}=Object.getOwnPropertyDescriptor(r,l)||{enumerable:!0};Object.defineProperty(r,l,{enumerable:g,configurable:!0,get:()=>f.value,set:J=>{if(J!==f.value){const U=f.value;f.value=J,f.onChange.forEach($=>$({previousValue:U,currentValue:J,firstChange:!1}))}}})}return{setValue(g){f.value=g},unsubscribe(){f.onChange=f.onChange.filter(g=>g!==n),0===f.onChange.length&&delete c._observers[u]}}}function xe(c,i){if(i=Array.isArray(i)?i.join("."):i,c.fieldGroup)for(let n=0,r=c.fieldGroup.length;n<r;n++){const l=c.fieldGroup[n],u=Array.isArray(l.key)?l.key.join("."):l.key;if(u===i)return l;if(l.fieldGroup&&(oe(u)||0===i.indexOf(`${u}.`))){const f=xe(l,oe(u)?i:i.slice(u.length+1));if(f)return f}}}function ve(c){c._componentRefs?.forEach(i=>{i instanceof p.UuU?i.injector.get(p.sBO).markForCheck():i.markForCheck()})}const le=new p.OlP("FORMLY_CONFIG");let ne=(()=>{class c{constructor(){this.types={},this.validators={},this.wrappers={},this.messages={},this.extras={checkExpressionOn:"modelChange",lazyRender:!0,resetFieldOnHide:!0,renderFormlyFieldElement:!0,showError:n=>n.formControl?.invalid&&(n.formControl?.touched||n.options.parentForm?.submitted||!!n.field.validation?.show)},this.extensions={},this.presets={},this.extensionsByPriority={}}addConfig(n){n.types&&n.types.forEach(r=>this.setType(r)),n.validators&&n.validators.forEach(r=>this.setValidator(r)),n.wrappers&&n.wrappers.forEach(r=>this.setWrapper(r)),n.validationMessages&&n.validationMessages.forEach(r=>this.addValidatorMessage(r.name,r.message)),n.extensions&&this.setSortedExtensions(n.extensions),n.extras&&(this.extras={...this.extras,...n.extras}),n.presets&&(this.presets={...this.presets,...n.presets.reduce((r,l)=>({...r,[l.name]:l.config}),{})})}setType(n){Array.isArray(n)?n.forEach(r=>this.setType(r)):(this.types[n.name]||(this.types[n.name]={name:n.name}),["component","extends","defaultOptions","wrappers"].forEach(r=>{n.hasOwnProperty(r)&&(this.types[n.name][r]=n[r])}))}getType(n,r=!1){if(n instanceof p.DyG)return{component:n,name:n.prototype.constructor.name};if(!this.types[n]){if(r)throw new Error(`[Formly Error] The type "${n}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return null}return this.mergeExtendedType(n),this.types[n]}getMergedField(n={}){const r=this.getType(n.type);if(!r)return;r.defaultOptions&&te(n,r.defaultOptions);const l=r.extends&&this.getType(r.extends).defaultOptions;l&&te(n,l),n?.optionsTypes&&n.optionsTypes.forEach(f=>{const g=this.getType(f).defaultOptions;g&&te(n,g)});const u=this.resolveFieldTypeRef(n);u?.instance?.defaultOptions&&te(n,u.instance.defaultOptions),!n.wrappers&&r.wrappers&&(n.wrappers=[...r.wrappers])}resolveFieldTypeRef(n={}){const r=this.getType(n.type);if(!r)return null;if(!r.component||r._componentRef)return r._componentRef;const{_viewContainerRef:l,_injector:u}=n.options;if(!l||!u)return null;const f=l.createComponent(r.component,{injector:u});B(r,"_componentRef",f);try{f.destroy()}catch(g){console.error(`An error occurred while destroying the Formly component type "${n.type}"`,g)}return r._componentRef}setWrapper(n){this.wrappers[n.name]=n,n.types&&n.types.forEach(r=>{this.setTypeWrapper(r,n.name)})}getWrapper(n){if(n instanceof p.DyG)return{component:n,name:n.prototype.constructor.name};if(!this.wrappers[n])throw new Error(`[Formly Error] The wrapper "${n}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return this.wrappers[n]}setTypeWrapper(n,r){this.types[n]||(this.types[n]={}),this.types[n].wrappers||(this.types[n].wrappers=[]),-1===this.types[n].wrappers.indexOf(r)&&this.types[n].wrappers.push(r)}setValidator(n){this.validators[n.name]=n}getValidator(n){if(!this.validators[n])throw new Error(`[Formly Error] The validator "${n}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return this.validators[n]}addValidatorMessage(n,r){this.messages[n]=r}getValidatorMessage(n){return this.messages[n]}setSortedExtensions(n){n.forEach(r=>{const l=r.priority??1;this.extensionsByPriority[l]={...this.extensionsByPriority[l],[r.name]:r.extension}}),this.extensions=Object.keys(this.extensionsByPriority).map(Number).sort((r,l)=>r-l).reduce((r,l)=>({...r,...this.extensionsByPriority[l]}),{})}mergeExtendedType(n){if(!this.types[n].extends)return;const r=this.getType(this.types[n].extends);this.types[n].component||(this.types[n].component=r.component),this.types[n].wrappers||(this.types[n].wrappers=r.wrappers)}}return c.\u0275fac=function(n){return new(n||c)},c.\u0275prov=p.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),ae=(()=>{class c{constructor(n,r,l,u){this.config=n,this.injector=r,this.viewContainerRef=l,this.parentForm=u}buildForm(n,r=[],l,u){this.build({fieldGroup:r,model:l,form:n,options:u})}build(n){if(!this.config.extensions.core)throw new Error("NgxFormly: missing `forRoot()` call. use `forRoot()` when registering the `FormlyModule`.");n.parent?this._build(n):(this._setOptions(n),function Z(c,i){const n=c._updateTreeValidity.bind(c);c._updateTreeValidity=()=>{},i(),c._updateTreeValidity=n}(n.form,()=>{this._build(n);const r=n.options;r.checkExpressions?.(n,!0),r.detectChanges?.(n)}))}_build(n){if(!n)return;const r=Object.values(this.config.extensions);r.forEach(l=>l.prePopulate?.(n)),r.forEach(l=>l.onPopulate?.(n)),n.fieldGroup?.forEach(l=>this._build(l)),r.forEach(l=>l.postPopulate?.(n))}_setOptions(n){n.form=n.form||new e.cw({}),n.model=n.model||{},n.options=n.options||{};const r=n.options;r._viewContainerRef||B(r,"_viewContainerRef",this.viewContainerRef),r._injector||B(r,"_injector",this.injector),r.build||(r._buildForm=()=>{console.warn("Formly: 'options._buildForm' is deprecated since v6.0, use 'options.build' instead."),this.build(n)},r.build=(l=n)=>(this.build(l),l)),!r.parentForm&&this.parentForm&&(B(r,"parentForm",this.parentForm),Y(r,["parentForm","submitted"],({firstChange:l})=>{l||(r.checkExpressions(n),r.detectChanges(n))}))}}return c.\u0275fac=function(n){return new(n||c)(p.LFG(ne),p.LFG(p.zs3),p.LFG(p.s_b,8),p.LFG(e.sg,8))},c.\u0275prov=p.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();function ge(c,i=!1){const n=c.formControl,r=n._fields?n._fields.indexOf(c):-1;-1!==r&&n._fields.splice(r,1);const l=n.parent;if(!l)return;const u={emitEvent:i};if(l instanceof e.Oe){const f=l.controls.findIndex(g=>g===n);-1!==f&&l.removeAt(f,u)}else if(l instanceof e.cw){const f=L(c),g=f[f.length-1];l.get([g])===n&&l.removeControl(g,u)}n.setParent(null)}function be(c){return c.formControl?c.formControl:!1===c.shareFormControl?null:c.form?.get(L(c))}function _e(c,i,n=!1){if((i=i||c.formControl)._fields||B(i,"_fields",[]),-1===i._fields.indexOf(c)&&i._fields.push(c),!c.formControl&&i){B(c,"formControl",i),i.setValidators(null),i.setAsyncValidators(null),c.props.disabled=!!c.props.disabled;const g=Y(c,["props","disabled"],({firstChange:J,currentValue:U})=>{J||(U?c.formControl.disable():c.formControl.enable())});i instanceof e.NI&&i.registerOnDisabledChange(g.setValue)}if(!c.form||!k(c))return;let r=c.form;const l=L(c),u=X(c);(!oe(i.value)||!oe(u))&&i.value!==u&&i instanceof e.NI&&i.patchValue(u);for(let g=0;g<l.length-1;g++){const J=l[g];r.get([J])||r.setControl(J,new e.cw({}),{emitEvent:n}),r=r.get([J])}const f=l[l.length-1];!c._hide&&r.get([f])!==i&&r.setControl(f,i,{emitEvent:n})}function ce(c,i=!1){const n=c.status,r=c.value;c.updateValueAndValidity({emitEvent:!1,onlySelf:i}),n!==c.status&&c.statusChanges.emit(c.status),r!==c.value&&c.valueChanges.emit(c.value)}function Ce(c){delete c?._fields,c.setValidators(null),c.setAsyncValidators(null),(c instanceof e.cw||c instanceof e.Oe)&&Object.values(c.controls).forEach(i=>Ce(i))}let ke=(()=>{class c{constructor(n){this.ref=n}ngOnChanges(){this.name=this.name||"formly-group"}}return c.\u0275fac=function(n){return new(n||c)(p.Y36(p.Rgc))},c.\u0275dir=p.lG2({type:c,selectors:[["","formlyTemplate",""]],inputs:{name:["formlyTemplate","name"]},features:[p.TTD]}),c})(),ye=(()=>{class c{}return c.\u0275fac=function(n){return new(n||c)},c.\u0275prov=p.Yz7({token:c,factory:c.\u0275fac}),c})(),Fe=(()=>{class c{constructor(n,r,l,u,f){this.config=n,this.renderer=r,this._elementRef=l,this.hostContainerRef=u,this.form=f,this.hostObservers=[],this.componentRefs=[],this.hooksObservers=[],this.detectFieldBuild=!1,this.valueChangesUnsubscribe=()=>{}}get containerRef(){return this.config.extras.renderFormlyFieldElement?this.viewContainerRef:this.hostContainerRef}get elementRef(){return this.config.extras.renderFormlyFieldElement?this._elementRef:this.componentRefs?.[0]instanceof p.UuU?this.componentRefs[0].location:null}ngAfterContentInit(){this.triggerHook("afterContentInit")}ngAfterViewInit(){this.triggerHook("afterViewInit")}ngDoCheck(){this.detectFieldBuild&&this.field&&this.field.options&&this.render()}ngOnInit(){this.triggerHook("onInit")}ngOnChanges(n){this.triggerHook("onChanges",n)}ngOnDestroy(){this.resetRefs(this.field),this.hostObservers.forEach(n=>n.unsubscribe()),this.hooksObservers.forEach(n=>n()),this.valueChangesUnsubscribe(),this.triggerHook("onDestroy")}renderField(n,r,l=[]){if(this.containerRef===n&&(this.resetRefs(this.field),this.containerRef.clear(),l=this.field?.wrappers),l?.length>0){const[u,...f]=l,{component:g}=this.config.getWrapper(u),J=n.createComponent(g);this.attachComponentRef(J,r),Y(J.instance,["fieldComponent"],({currentValue:U,previousValue:$,firstChange:Te})=>{if(U){if($&&$._lContainer===U._lContainer)return;const re=$?$.detach():null;re&&!re.destroyed?U.insert(re):this.renderField(U,r,f),!Te&&J.changeDetectorRef.detectChanges()}})}else if(r?.type){const u=this.form?.templates?.find(g=>g.name===r.type);let f;if(u)f=n.createEmbeddedView(u.ref,{$implicit:r});else{const{component:g}=this.config.getType(r.type,!0);f=n.createComponent(g)}this.attachComponentRef(f,r)}}triggerHook(n,r){if(("onInit"===n||"onChanges"===n&&r.field&&!r.field.firstChange)&&(this.valueChangesUnsubscribe=this.fieldChanges(this.field)),this.field?.hooks?.[n]&&(!r||r.field)){const l=this.field.hooks[n](this.field);if((0,x.b)(l)&&-1!==["onInit","afterContentInit","afterViewInit"].indexOf(n)){const u=l.subscribe();this.hooksObservers.push(()=>u.unsubscribe())}}"onChanges"===n&&r.field&&(this.resetRefs(r.field.previousValue),this.render())}attachComponentRef(n,r){this.componentRefs.push(n),r._componentRefs.push(n),n instanceof p.UuU&&Object.assign(n.instance,{field:r})}render(){if(this.field){if(!this.field.options)return void(this.detectFieldBuild=!0);this.detectFieldBuild=!1,this.hostObservers.forEach(n=>n.unsubscribe()),this.hostObservers=[Y(this.field,["hide"],({firstChange:n,currentValue:r})=>{const l=this.containerRef;!1===this.config.extras.lazyRender?(n&&this.renderField(l,this.field),(!n||n&&r)&&this.elementRef&&this.renderer.setStyle(this.elementRef.nativeElement,"display",r?"none":"")):r?(l.clear(),this.field.className&&this.renderer.removeAttribute(this.elementRef.nativeElement,"class")):(this.renderField(l,this.field),this.field.className&&this.renderer.setAttribute(this.elementRef.nativeElement,"class",this.field.className)),!n&&this.field.options.detectChanges(this.field)}),Y(this.field,["className"],({firstChange:n,currentValue:r})=>{(!n||n&&r)&&(!this.config.extras.lazyRender||!0!==this.field.hide)&&this.elementRef&&this.renderer.setAttribute(this.elementRef.nativeElement,"class",r)}),...["touched","pristine","status"].map(n=>Y(this.field,["formControl",n],({firstChange:r})=>!r&&ve(this.field)))]}}resetRefs(n){n&&(n._componentRefs?n._componentRefs=n._componentRefs.filter(r=>-1===this.componentRefs.indexOf(r)):B(this.field,"_componentRefs",[])),this.componentRefs=[]}fieldChanges(n){if(this.valueChangesUnsubscribe(),!n)return()=>{};const r=[he(n,["props"],()=>n.options.detectChanges(n)),he(n.options,["formState"],()=>n.options.detectChanges(n))];for(const l of Object.keys(n._expressions)){const u=Y(n,["_expressions",l],({currentValue:f,previousValue:g})=>{g?.subscription&&(g.subscription.unsubscribe(),g.subscription=null),(0,x.b)(f.value$)&&(f.subscription=f.value$.subscribe())});r.push(()=>{n._expressions[l]?.subscription&&n._expressions[l].subscription.unsubscribe(),u.unsubscribe()})}for(const l of[["template"],["fieldGroupClassName"],["validation","show"]]){const u=Y(n,l,({firstChange:f})=>!f&&n.options.detectChanges(n));r.push(()=>u.unsubscribe())}if(n.formControl&&!n.fieldGroup){const l=n.formControl;let u=l.valueChanges.pipe((0,j.x)((U,$)=>!(U!==$||Array.isArray(U)||ee(U))));l.value!==X(n)&&(u=u.pipe((0,A.O)(l.value)));const{updateOn:f,debounce:g}=n.modelOptions;(!f||"change"===f)&&g?.default>0&&(u=l.valueChanges.pipe((0,D.b)(g.default)));const J=u.subscribe(U=>{l._fields?.length>1&&l instanceof e.NI&&l.patchValue(U,{emitEvent:!1,onlySelf:!0}),n.parsers?.forEach($=>U=$(U)),U===n.formControl.value?(k(n)&&G(n,U),n.options.fieldChanges.next({value:U,field:n,type:"valueChanges"})):n.formControl.setValue(U)});r.push(()=>J.unsubscribe())}return()=>r.forEach(l=>l())}}return c.\u0275fac=function(n){return new(n||c)(p.Y36(ne),p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(p.s_b),p.Y36(ye,8))},c.\u0275cmp=p.Xpm({type:c,selectors:[["formly-field"]],viewQuery:function(n,r){if(1&n&&p.Gf(h,7,p.s_b),2&n){let l;p.iGM(l=p.CRH())&&(r.viewContainerRef=l.first)}},inputs:{field:"field"},features:[p.TTD],decls:2,vars:0,consts:[["container",""]],template:function(n,r){1&n&&p.YNc(0,_,0,0,"ng-template",null,0,p.W1O)},styles:["[_nghost-%COMP%]:empty{display:none}"]}),c})(),De=(()=>{class c{constructor(n,r,l,u){this.builder=n,this.config=r,this.ngZone=l,this.fieldTemplates=u,this.modelChange=new p.vpe,this.field={type:"formly-group"},this._modelChangeValue={},this.valueChangesUnsubscribe=()=>{}}set form(n){this.field.form=n}get form(){return this.field.form}set model(n){this.setField({model:n})}get model(){return this.field.model}set fields(n){this.setField({fieldGroup:n})}get fields(){return this.field.fieldGroup}set options(n){this.setField({options:n})}get options(){return this.field.options}set templates(n){this.fieldTemplates.templates=n}ngDoCheck(){"changeDetectionCheck"===this.config.extras.checkExpressionOn&&this.checkExpressionChange()}ngOnChanges(n){n.fields&&this.form&&Ce(this.form),(n.fields||n.form||n.model&&this._modelChangeValue!==n.model.currentValue)&&(this.valueChangesUnsubscribe(),this.builder.build(this.field),this.valueChangesUnsubscribe=this.valueChanges())}ngOnDestroy(){this.valueChangesUnsubscribe()}checkExpressionChange(){this.field.options.checkExpressions?.(this.field)}valueChanges(){this.valueChangesUnsubscribe();const n=this.field.options.fieldChanges.pipe((0,V.h)(({field:r,type:l})=>k(r)&&"valueChanges"===l),(0,T.w)(()=>this.ngZone.onStable.asObservable().pipe((0,S.q)(1)))).subscribe(()=>this.ngZone.runGuarded(()=>{this.checkExpressionChange(),this.modelChange.emit(this._modelChangeValue=q(this.model))}));return()=>n.unsubscribe()}setField(n){this.config.extras.immutable?this.field={...this.field,...q(n)}:Object.keys(n).forEach(r=>this.field[r]=n[r])}}return c.\u0275fac=function(n){return new(n||c)(p.Y36(ae),p.Y36(ne),p.Y36(p.R0b),p.Y36(ye))},c.\u0275cmp=p.Xpm({type:c,selectors:[["formly-form"]],contentQueries:function(n,r,l){if(1&n&&p.Suo(l,ke,4),2&n){let u;p.iGM(u=p.CRH())&&(r.templates=u)}},inputs:{form:"form",model:"model",fields:"fields",options:"options"},outputs:{modelChange:"modelChange"},features:[p._Bn([ae,ye]),p.TTD],decls:1,vars:1,consts:[[3,"field"]],template:function(n,r){1&n&&p._UZ(0,"formly-field",0),2&n&&p.Q6J("field",r.field)},dependencies:[Fe],encapsulation:2,changeDetection:0}),c})(),Ie=(()=>{class c{constructor(n,r,l){this.renderer=n,this.elementRef=r,this.uiAttributesCache={},this.uiEvents={listeners:[],events:["click","keyup","keydown","keypress","focus","blur","change"],callback:(u,f)=>{switch(u){case"focus":return this.onFocus(f);case"blur":return this.onBlur(f);case"change":return this.onChange(f);default:return this.props[u](this.field,f)}}},this.document=l}get props(){return this.field.props||{}}get fieldAttrElements(){return this.field?._elementRefs||[]}ngOnChanges(n){n.field&&(this.field.name&&this.setAttribute("name",this.field.name),this.uiEvents.listeners.forEach(r=>r()),this.uiEvents.events.forEach(r=>{(this.props?.[r]||-1!==["focus","blur","change"].indexOf(r))&&this.uiEvents.listeners.push(this.renderer.listen(this.elementRef.nativeElement,r,l=>this.uiEvents.callback(r,l)))}),this.props?.attributes&&Y(this.field,["props","attributes"],({currentValue:r,previousValue:l})=>{l&&Object.keys(l).forEach(u=>this.removeAttribute(u)),r&&Object.keys(r).forEach(u=>{null!=r[u]&&this.setAttribute(u,r[u])})}),this.detachElementRef(n.field.previousValue),this.attachElementRef(n.field.currentValue),1===this.fieldAttrElements.length&&(!this.id&&this.field.id&&this.setAttribute("id",this.field.id),this.focusObserver=Y(this.field,["focus"],({currentValue:r})=>{this.toggleFocus(r)}))),n.id&&this.setAttribute("id",this.id)}ngDoCheck(){if(!this.uiAttributes){const n=this.elementRef.nativeElement;this.uiAttributes=[...K,"tabindex","placeholder","readonly","disabled","step"].filter(r=>!n.hasAttribute||!n.hasAttribute(r))}this.uiAttributes.forEach(n=>{const r=this.props[n];this.uiAttributesCache[n]!==r&&(!this.props.attributes||!this.props.attributes.hasOwnProperty(n.toLowerCase()))&&(this.uiAttributesCache[n]=r,r||0===r?this.setAttribute(n,!0===r?n:`${r}`):this.removeAttribute(n))})}ngOnDestroy(){this.uiEvents.listeners.forEach(n=>n()),this.detachElementRef(this.field),this.focusObserver?.unsubscribe()}toggleFocus(n){const r=this.fieldAttrElements?this.fieldAttrElements[0]:null;if(!r||!r.nativeElement.focus)return;const l=!!this.document.activeElement&&this.fieldAttrElements.some(({nativeElement:u})=>this.document.activeElement===u||u.contains(this.document.activeElement));n&&!l?Promise.resolve().then(()=>r.nativeElement.focus()):!n&&l&&Promise.resolve().then(()=>r.nativeElement.blur())}onFocus(n){this.focusObserver?.setValue(!0),this.props.focus?.(this.field,n)}onBlur(n){this.focusObserver?.setValue(!1),this.props.blur?.(this.field,n)}onHostChange(n){n instanceof Event||this.onChange(n)}onChange(n){this.props.change?.(this.field,n),this.field.formControl?.markAsDirty()}attachElementRef(n){!n||(-1===n._elementRefs?.indexOf(this.elementRef)?n._elementRefs.push(this.elementRef):B(n,"_elementRefs",[this.elementRef]))}detachElementRef(n){const r=n?._elementRefs?this.fieldAttrElements.indexOf(this.elementRef):-1;-1!==r&&n._elementRefs.splice(r,1)}setAttribute(n,r){this.renderer.setAttribute(this.elementRef.nativeElement,n,r)}removeAttribute(n){this.renderer.removeAttribute(this.elementRef.nativeElement,n)}}return c.\u0275fac=function(n){return new(n||c)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(b.K0))},c.\u0275dir=p.lG2({type:c,selectors:[["","formlyAttributes",""]],hostBindings:function(n,r){1&n&&p.NdJ("change",function(u){return r.onHostChange(u)})},inputs:{field:["formlyAttributes","field"],id:"id"},features:[p.TTD]}),c})(),pe=(()=>{class c{get model(){return this.field.model}get form(){return this.field.form}get options(){return this.field.options}get key(){return this.field.key}get formControl(){return this.field.formControl}get props(){return this.field.props||{}}get to(){return this.props}get showError(){return this.options.showError(this)}get id(){return this.field.id}get formState(){return this.options.formState||{}}}return c.\u0275fac=function(n){return new(n||c)},c.\u0275dir=p.lG2({type:c,inputs:{field:"field"}}),c})(),Pe=(()=>{class c extends pe{}return c.\u0275fac=function(){let i;return function(r){return(i||(i=p.n5z(c)))(r||c)}}(),c.\u0275cmp=p.Xpm({type:c,selectors:[["formly-group"]],hostVars:2,hostBindings:function(n,r){2&n&&p.Tol(r.field.fieldGroupClassName||"")},features:[p.qOj],ngContentSelectors:w,decls:2,vars:1,consts:[[3,"field",4,"ngFor","ngForOf"],[3,"field"]],template:function(n,r){1&n&&(p.F$t(),p.YNc(0,P,1,1,"formly-field",0),p.Hsn(1)),2&n&&p.Q6J("ngForOf",r.field.fieldGroup)},dependencies:[Fe,b.sg],encapsulation:2,changeDetection:0}),c})(),Se=(()=>{class c{constructor(n){this.config=n}ngOnChanges(){const n=K.map(r=>`templateOptions.${r}`);this.errorMessage$=(0,v.T)(this.field.formControl.statusChanges,this.field.options?this.field.options.fieldChanges.pipe((0,V.h)(({field:r,type:l,property:u})=>r===this.field&&"expressionChanges"===l&&(-1!==u.indexOf("validation")||-1!==n.indexOf(u)))):(0,F.of)(null)).pipe((0,A.O)(null),(0,T.w)(()=>(0,x.b)(this.errorMessage)?this.errorMessage:(0,F.of)(this.errorMessage)))}get errorMessage(){const n=this.field.formControl;for(const r in n.errors)if(n.errors.hasOwnProperty(r)){let l=this.config.getValidatorMessage(r);if(ee(n.errors[r])){if(n.errors[r].errorPath)return;n.errors[r].message&&(l=n.errors[r].message)}return this.field.validation?.messages?.[r]&&(l=this.field.validation.messages[r]),this.field.validators?.[r]?.message&&(l=this.field.validators[r].message),this.field.asyncValidators?.[r]?.message&&(l=this.field.asyncValidators[r].message),"function"==typeof l?l(n.errors[r],this.field):l}}}return c.\u0275fac=function(n){return new(n||c)(p.Y36(ne))},c.\u0275cmp=p.Xpm({type:c,selectors:[["formly-validation-message"]],inputs:{field:"field"},features:[p.TTD],decls:2,vars:3,template:function(n,r){1&n&&(p._uU(0),p.ALo(1,"async")),2&n&&p.Oqu(p.lcZ(1,1,r.errorMessage$))},dependencies:[b.Ov],encapsulation:2,changeDetection:0}),c})(),Je=(()=>{class c extends pe{onPopulate(n){!n.formControl&&k(n)&&_e(n,be(n)||new e.Oe([],{updateOn:n.modelOptions.updateOn})),n.fieldGroup=n.fieldGroup||[];const r=Array.isArray(n.model)?n.model.length:0;if(n.fieldGroup.length>r)for(let l=n.fieldGroup.length-1;l>=r;--l)ge(n.fieldGroup[l],!0),n.fieldGroup.splice(l,1);for(let l=n.fieldGroup.length;l<r;l++){const u={...q("function"==typeof n.fieldArray?n.fieldArray(n):n.fieldArray),key:`${l}`};n.fieldGroup.push(u)}}add(n,r,{markAsDirty:l}={markAsDirty:!0}){n=n??this.field.fieldGroup.length,this.model||G(this.field,[]),this.model.splice(n,0,r?q(r):void 0),this._build(),l&&this.formControl.markAsDirty()}remove(n,{markAsDirty:r}={markAsDirty:!0}){this.model.splice(n,1);const l=this.field.fieldGroup[n];this.field.fieldGroup.splice(n,1),this.field.fieldGroup.forEach((u,f)=>u.key=`${f}`),ge(l,!0),this._build(),r&&this.formControl.markAsDirty()}_build(){(this.field.formControl._fields??[this.field]).forEach(r=>this.options.build(r)),this.options.fieldChanges.next({field:this.field,value:X(this.field),type:"valueChanges"})}}return c.\u0275fac=function(){let i;return function(r){return(i||(i=p.n5z(c)))(r||c)}}(),c.\u0275dir=p.lG2({type:c,features:[p.qOj]}),c})(),Le=(()=>{class c extends pe{set _staticContent(n){this.fieldComponent=n}}return c.\u0275fac=function(){let i;return function(r){return(i||(i=p.n5z(c)))(r||c)}}(),c.\u0275dir=p.lG2({type:c,viewQuery:function(n,r){if(1&n&&(p.Gf(R,5,p.s_b),p.Gf(R,7,p.s_b)),2&n){let l;p.iGM(l=p.CRH())&&(r.fieldComponent=l.first),p.iGM(l=p.CRH())&&(r._staticContent=l.first)}},features:[p.qOj]}),c})(),je=(()=>{class c extends pe{constructor(n){super(),this.sanitizer=n,this.innerHtml={}}get template(){return this.field&&this.field.template!==this.innerHtml.template&&(this.innerHtml={template:this.field.template,content:this.props.safeHtml?this.sanitizer.bypassSecurityTrustHtml(this.field.template):this.field.template}),this.innerHtml.content}}return c.\u0275fac=function(n){return new(n||c)(p.Y36(M.H7))},c.\u0275cmp=p.Xpm({type:c,selectors:[["formly-template"]],features:[p.qOj],decls:1,vars:1,consts:[[3,"innerHtml"]],template:function(n,r){1&n&&p._UZ(0,"div",0),2&n&&p.Q6J("innerHtml",r.template,p.oJD)},encapsulation:2,changeDetection:0}),c})();class Qe{onPopulate(i){if(i._expressions)return;B(i,"_expressions",{}),Y(i,["hide"],({currentValue:r,firstChange:l})=>{B(i,"_hide",!!r),(!l||l&&!0===r)&&(i.props.hidden=r,i.options._hiddenFieldsForCheck.push(i))}),i.hideExpression&&Y(i,["hideExpression"],({currentValue:r})=>{i._expressions.hide=this.parseExpressions(i,"hide","boolean"==typeof r?()=>r:r)});const n=(r,l)=>{"string"==typeof l||fe(l)?i._expressions[r]=this.parseExpressions(i,r,l):l instanceof E.y&&(i._expressions[r]={value$:l.pipe((0,d.b)(u=>{this.evalExpr(i,r,u),i.options.detectChanges(i)}))})};i.expressions=i.expressions||{};for(const r of Object.keys(i.expressions))Y(i,["expressions",r],({currentValue:l})=>{n(r,fe(l)?(...u)=>l(i,u[3]):l)});i.expressionProperties=i.expressionProperties||{};for(const r of Object.keys(i.expressionProperties))Y(i,["expressionProperties",r],({currentValue:l})=>n(r,l))}postPopulate(i){if(!i.parent&&!i.options.checkExpressions){let n=!1;i.options.checkExpressions=(r,l)=>{if(n)return;n=!0;const u=this.checkExpressions(r,l),f=i.options;f._hiddenFieldsForCheck.sort(g=>g.hide?-1:1).forEach(g=>this.changeHideState(g,g.hide,!l)),f._hiddenFieldsForCheck=[],u&&(this.checkExpressions(i),i.options&&i.options.detectChanges&&i.options.detectChanges(i)),n=!1},i.options._checkField=(r,l)=>{console.warn("Formly: 'options._checkField' is deprecated since v6.0, use 'options.checkExpressions' instead."),i.options.checkExpressions(r,l)}}}parseExpressions(i,n,r){let l,u;if(i.parent&&["hide","props.disabled"].includes(n)){const f=g=>"hide"===n?g.hide:g.props.disabled;l=()=>{let g=i.parent;for(;g.parent&&!f(g);)g=g.parent;return f(g)}}return"string"==typeof(r=r||(()=>!1))&&(r=function Ue(c,i){try{return Function(...i,`return ${c};`)}catch(n){console.error(n)}}(r,["model","formState","field"])),{callback:f=>{try{const g=function Ze(c,i,n){return"function"==typeof c?c.apply(i,n):!!c}(l?(...J)=>l(i)||r(...J):r,{field:i},[i.model,i.options.formState,i,f]);return!(!f&&(u===g||ee(g)&&!(0,x.b)(g)&&JSON.stringify(g)===JSON.stringify(u))||(u=g,this.evalExpr(i,n,g),0))}catch(g){throw g.message=`[Formly Error] [Expression "${n}"] ${g.message}`,g}}}}checkExpressions(i,n=!1){if(!i)return!1;let r=!1;if(i._expressions)for(const l of Object.keys(i._expressions))i._expressions[l].callback?.(n)&&(r=!0);return i.fieldGroup?.forEach(l=>this.checkExpressions(l,n)&&(r=!0)),r}changeDisabledState(i,n){i.fieldGroup&&i.fieldGroup.filter(r=>!r._expressions.hasOwnProperty("props.disabled")).forEach(r=>this.changeDisabledState(r,n)),k(i)&&i.props.disabled!==n&&(i.props.disabled=n)}changeHideState(i,n,r){if(i.fieldGroup&&i.fieldGroup.filter(l=>!l._expressions.hide).forEach(l=>this.changeHideState(l,n,r)),i.formControl&&k(i)){B(i,"_hide",!(!n&&!i.hide));const l=i.formControl;l._fields?.length>1&&ce(l),!0!==n||l._fields&&!l._fields.every(u=>!!u._hide)?!1===n&&(i.resetOnHide&&!ue(i.defaultValue)&&ue(X(i))&&G(i,i.defaultValue),_e(i,void 0,!0),i.resetOnHide&&i.fieldArray&&i.fieldGroup?.length!==i.model?.length&&i.options.build(i)):(ge(i,!0),r&&i.resetOnHide&&(G(i,void 0),i.formControl.reset({value:void 0,disabled:i.formControl.disabled}),i.options.fieldChanges.next({value:void 0,field:i,type:"valueChanges"}),i.fieldGroup&&i.formControl instanceof e.Oe&&(i.fieldGroup.length=0)))}i.options.fieldChanges&&i.options.fieldChanges.next({field:i,type:"hidden",value:n})}evalExpr(i,n,r){try{let l=i;const u=this._evalExpressionPath(i,n),f=u.length-1;for(let g=0;g<f;g++)l=l[u[g]];l[u[f]]=r}catch(l){throw l.message=`[Formly Error] [Expression "${n}"] ${l.message}`,l}if(["templateOptions.disabled","props.disabled"].includes(n)&&k(i)&&this.changeDisabledState(i,r),0===n.indexOf("model.")){const l=n.replace(/^model\./,""),u=i?.key===l?i.formControl:i.form.get(l);u&&(!oe(u.value)||!oe(r))&&u.value!==r&&u.patchValue(r)}this.emitExpressionChanges(i,n,r)}emitExpressionChanges(i,n,r){!i.options.fieldChanges||i.options.fieldChanges.next({field:i,type:"expressionChanges",property:n,value:r})}_evalExpressionPath(i,n){if(i._expressions[n]&&i._expressions[n].paths)return i._expressions[n].paths;let r=[];return-1===n.indexOf("[")?r=n.split("."):n.split(/[[\]]{1,2}/).filter(l=>l).forEach(l=>{const u=l.match(/['|"](.*?)['|"]/);u?r.push(u[1]):r.push(...l.split(".").filter(f=>f))}),i._expressions[n]&&(i._expressions[n].paths=r),r}}class Re{constructor(i){this.config=i}onPopulate(i){this.initFieldValidation(i,"validators"),this.initFieldValidation(i,"asyncValidators")}initFieldValidation(i,n){const r=[];if("validators"===n&&!(i.hasOwnProperty("fieldGroup")&&!k(i))&&r.push(this.getPredefinedFieldValidation(i)),i[n])for(const l of Object.keys(i[n]))"validation"===l?r.push(...i[n].validation.map(u=>this.wrapNgValidatorFn(i,u))):r.push(this.wrapNgValidatorFn(i,i[n][l],l));B(i,"_"+n,r)}getPredefinedFieldValidation(i){let n=[];return K.forEach(r=>Y(i,["props",r],({currentValue:l,firstChange:u})=>{n=n.filter(f=>f!==r),null!=l&&!1!==l&&n.push(r),!u&&i.formControl&&ce(i.formControl)})),r=>0===n.length?null:e.kI.compose(n.map(l=>()=>{const u=i.props[l];switch(l){case"required":return e.kI.required(r);case"pattern":return e.kI.pattern(u)(r);case"minLength":const f=e.kI.minLength(u)(r),g=this.config.getValidatorMessage("minlength")||i.validation?.messages?.minlength?"minlength":"minLength";return f?{[g]:f.minlength}:null;case"maxLength":const J=e.kI.maxLength(u)(r),U=this.config.getValidatorMessage("maxlength")||i.validation?.messages?.maxlength?"maxlength":"maxLength";return J?{[U]:J.maxlength}:null;case"min":return e.kI.min(u)(r);case"max":return e.kI.max(u)(r);default:return null}}))(r)}wrapNgValidatorFn(i,n,r){let l;if("string"==typeof n&&(l=q(this.config.getValidator(n))),"object"==typeof n&&n.name&&(l=q(this.config.getValidator(n.name)),n.options&&(l.options=n.options)),"object"==typeof n&&n.expression){const{expression:u,...f}=n;l={name:r,validation:u,options:Object.keys(f).length>0?f:null}}return"function"==typeof n&&(l={name:r,validation:n}),u=>{const f=l.validation(u,i,l.options);return function Ae(c){return!!c&&"function"==typeof c.then}(f)?f.then(g=>this.handleAsyncResult(i,r?!!g:g,l)):(0,x.b)(f)?f.pipe((0,C.U)(g=>this.handleAsyncResult(i,r?!!g:g,l))):this.handleResult(i,r?!!f:f,l)}}handleAsyncResult(i,n,r){return i.options.detectChanges(i),this.handleResult(i,n,r)}handleResult(i,n,{name:r,options:l}){"boolean"==typeof n&&(n=n?null:{[r]:l||!0});const u=i.formControl;return u?._childrenErrors?.[r]?.(),ee(n)&&Object.keys(n).forEach(f=>{const g=n[f].errorPath?n[f].errorPath:l?.errorPath,J=g?i.formControl.get(g):null;if(J){const{errorPath:U,...$}=n[f];J.setErrors({...J.errors||{},[f]:$}),!u._childrenErrors&&B(u,"_childrenErrors",{}),u._childrenErrors[f]=()=>{const{[f]:Te,...re}=J.errors||{};J.setErrors(0===Object.keys(re).length?null:re)}}}),n}}class Ve{prePopulate(i){this.root||(this.root=i),i.parent&&Object.defineProperty(i,"form",{get:()=>i.parent.formControl,configurable:!0})}onPopulate(i){i.hasOwnProperty("fieldGroup")&&!k(i)?B(i,"formControl",i.form):this.addFormControl(i)}postPopulate(i){if(this.root===i&&(this.root=null,this.setValidators(i)&&i.parent)){let r=i.parent;for(;r;)(k(r)||!r.parent)&&ce(r.formControl,!0),r=r.parent}}addFormControl(i){let n=be(i);if(!n){const r={updateOn:i.modelOptions.updateOn};if(i.fieldGroup)n=new e.cw({},r);else{const l=k(i)?X(i):i.defaultValue;n=new e.NI({value:l,disabled:!1},{...r,initialValueIsDefault:!0})}}_e(i,n)}setValidators(i,n=!1){!1===n&&k(i)&&i.props?.disabled&&(n=!0);let r=!1;if(i.fieldGroup?.forEach(l=>l&&this.setValidators(l,n)&&(r=!0)),k(i)||!i.parent||!k(i)&&!i.fieldGroup){const{formControl:l}=i;if(l&&(k(i)&&l instanceof e.NI&&(n&&l.enabled&&(l.disable({emitEvent:!1,onlySelf:!0}),r=!0),!n&&l.disabled&&(l.enable({emitEvent:!1,onlySelf:!0}),r=!0)),(null===l.validator||null===l.asyncValidator)&&(l.setValidators(()=>{const u=e.kI.compose(this.mergeValidators(i,"_validators"));return u?u(l):null}),l.setAsyncValidators(()=>{const u=e.kI.composeAsync(this.mergeValidators(i,"_asyncValidators"));return u?u(l):(0,F.of)(null)}),r=!0),r)){ce(l,!0);let u=l.parent;for(let f=1;f<L(i).length;f++)u&&(ce(u,!0),u=u.parent)}}return r}mergeValidators(i,n){const r=[],l=i.formControl;return l?._fields?.length>1?l._fields.filter(u=>!u._hide).forEach(u=>r.push(...u[n])):i[n]&&r.push(...i[n]),i.fieldGroup&&i.fieldGroup.filter(u=>u?.fieldGroup&&!k(u)).forEach(u=>r.push(...this.mergeValidators(u,n))),r}}class Be{constructor(i){this.config=i,this.formId=0}prePopulate(i){const n=i.parent;this.initRootOptions(i),this.initFieldProps(i),n&&(Object.defineProperty(i,"options",{get:()=>n.options,configurable:!0}),Object.defineProperty(i,"model",{get:()=>k(i)&&i.fieldGroup?X(i):n.model,configurable:!0})),Object.defineProperty(i,"get",{value:r=>xe(i,r),configurable:!0}),this.getFieldComponentInstance(i).prePopulate?.(i)}onPopulate(i){this.initFieldOptions(i),this.getFieldComponentInstance(i).onPopulate?.(i),i.fieldGroup&&i.fieldGroup.forEach((n,r)=>{n&&(Object.defineProperty(n,"parent",{get:()=>i,configurable:!0}),Object.defineProperty(n,"index",{get:()=>r,configurable:!0})),this.formId++})}postPopulate(i){this.getFieldComponentInstance(i).postPopulate?.(i)}initFieldProps(i){i.props??(i.props=i.templateOptions),Object.defineProperty(i,"templateOptions",{get:()=>i.props,set:n=>i.props=n,configurable:!0})}initRootOptions(i){if(i.parent)return;const n=i.options;i.options.formState=i.options.formState||{},n.showError||(n.showError=this.config.extras.showError),n.fieldChanges||B(n,"fieldChanges",new I.x),n._hiddenFieldsForCheck||(n._hiddenFieldsForCheck=[]),n._markForCheck=r=>{console.warn("Formly: 'options._markForCheck' is deprecated since v6.0, use 'options.detectChanges' instead."),n.detectChanges(r)},n.detectChanges=r=>{r._componentRefs&&(r.options.checkExpressions(r),ve(r)),r.fieldGroup?.forEach(l=>l&&n.detectChanges(l))},n.resetModel=r=>{r=q(r??n._initialModel),i.model&&(Object.keys(i.model).forEach(l=>delete i.model[l]),Object.assign(i.model,r||{})),n.build(i),i.form.reset(i.model),n.parentForm&&n.parentForm.control===i.formControl&&(n.parentForm.submitted=!1)},n.updateInitialValue=r=>n._initialModel=q(r??i.model),i.options.updateInitialValue()}initFieldOptions(i){if(te(i,{id:N(`formly_${this.formId}`,i,i.index),hooks:{},modelOptions:{},validation:{messages:{}},props:i.type&&k(i)?{label:"",placeholder:"",disabled:!1}:{}}),this.config.extras.resetFieldOnHide&&!1!==i.resetOnHide&&(i.resetOnHide=!0),"formly-template"!==i.type&&(i.template||i.expressions?.template||i.expressionProperties?.template)&&(i.type="formly-template"),!i.type&&i.fieldGroup&&(i.type="formly-group"),i.type&&this.config.getMergedField(i),k(i)&&!ue(i.defaultValue)&&ue(X(i))){const n=l=>l.hide||l.expressions?.hide||l.hideExpression;let r=!i.resetOnHide||!n(i);if(!n(i)&&i.resetOnHide){let l=i.parent;for(;l&&!n(l);)l=l.parent;r=!l||!n(l)}r&&G(i,i.defaultValue)}i.wrappers=i.wrappers||[]}getFieldComponentInstance(i){const n=()=>{let r=this.config.resolveFieldTypeRef(i);const l=i._componentRefs?.slice(-1)[0];return l instanceof p.UuU&&l?.componentType===r?.componentType&&(r=l),r?.instance};return i._proxyInstance||B(i,"_proxyInstance",new Proxy({},{get:(r,l)=>n()?.[l],set:(r,l,u)=>n()[l]=u})),i._proxyInstance}}function Oe(c){return{types:[{name:"formly-group",component:Pe},{name:"formly-template",component:je}],extensions:[{name:"core",extension:new Be(c),priority:-250},{name:"field-validation",extension:new Re(c),priority:-200},{name:"field-form",extension:new Ve,priority:-150},{name:"field-expression",extension:new Qe,priority:-100}]}}let Ne=(()=>{class c{constructor(n,r=[]){!r||r.forEach(l=>n.addConfig(l))}static forRoot(n={}){return{ngModule:c,providers:[{provide:le,multi:!0,useFactory:Oe,deps:[ne]},{provide:le,useValue:n,multi:!0},ne,ae]}}static forChild(n={}){return{ngModule:c,providers:[{provide:le,multi:!0,useFactory:Oe,deps:[ne]},{provide:le,useValue:n,multi:!0},ae]}}}return c.\u0275fac=function(n){return new(n||c)(p.LFG(ne),p.LFG(le,8))},c.\u0275mod=p.oAB({type:c}),c.\u0275inj=p.cJS({imports:[[b.ez]]}),c})()}}]);