"use strict";(self.webpackChunkpages=self.webpackChunkpages||[]).push([[795],{7980:(M,v,o)=>{o.d(v,{w:()=>p});var g=o(1413),f=o(5861),i=o(9212),c=o(9093),h=o(4004),r=o(8645),_=o(9773),O=o(836),E=o(2438),x=o(1410),y=o(2721),e=o(6593),s=o(6814);const u=["iframe"],a=(d,m)=>({"scroll-sandbox":d,"reset-padding":m});let p=(()=>{var d;class m{constructor(t,n,b){this.domSanitizer=t,this.globalsService=n,this.postMessageService=b,this.head="",this.body="",this.bodyClass=[],this.initData={},this.resetMainPadding=!1,this.loadEvent=new i.vpe,this.sandboxId=(0,h.Z)(),this.iframeAutoHeight=!0,this.iframeHeight=0,this.componentDestroyed=new r.x,this.bsCssLink=window.location.origin+"/assets/css/bootstrap.css"}loaded(){this.iframeContent&&this.loadEvent.emit(!0)}ngOnInit(){var t=this;return(0,f.Z)(function*(){var n;const b=t.globalsService.forum?Object.assign({},t.globalsService.forum):void 0;b&&delete b.admin,t.initData=(0,g.Z)({[y.Tu.FORUM]:b,[y.Tu.USER]:null===(n=t.globalsService.credentials)||void 0===n?void 0:n.user},t.initData),t.iframeContent=t.domSanitizer.bypassSecurityTrustResourceUrl(URL.createObjectURL(new Blob(['<!DOCTYPE html>\n                    <html lang="it">\n                        <head>\n                            <title></title>\n                            <link rel="stylesheet" href="'.concat(t.bsCssLink,"\"></link>\n                            <script>\n                                window.initData = JSON.parse(decodeURIComponent('").concat(encodeURIComponent(JSON.stringify(t.initData)),"'));\n                                window.sandboxHeightMode = 'auto';\n                            <\/script>\n                            ").concat(t.head,"\n                        </head>\n                        <body").concat(t.bodyClass.length?' class="'+t.bodyClass.join(" ")+'"':"",">\n                            ").concat(t.body,'\n                        <script>\n                            (() => {\n                                parent.postMessage({\n                                    id: "').concat(t.sandboxId,"\",\n                                    sandboxHeightMode: window.sandboxHeightMode\n                                }, \"*\");\n\n                                if (window.sandboxHeightMode !== 'auto') {\n                                    return;\n                                }\n\n                                document.body.style.overflow = 'hidden';\n\n                                let lastSandboxHeight = 0; \n                                const resizeObserver = new ResizeObserver((entries, observer) => {\n                                    for (const entry of entries) {\n                                        if (entry.target.nodeName === 'BODY' && lastSandboxHeight !== entry.contentRect.height) {\n                                            lastSandboxHeight = entry.contentRect.height;\n                                            parent.postMessage({\n                                                id: \"").concat(t.sandboxId,'",\n                                                sandboxHeight: entry.contentRect.height\n                                            }, "*");\n                                        }\n                                    }\n                                })\n                                resizeObserver.observe(document.body)\n                            })();\n                        <\/script>\n                        </body>\n                    </html>')],{type:"text/html"}))),t.setSubscriptions()})()}setSubscriptions(){this.globalsService.forumObservable.pipe((0,_.R)(this.componentDestroyed)).subscribe(t=>{const n=Object.assign({},t);null==n||delete n.admin,this.postMessageService.sendToSandbox(this.iframe.nativeElement,y.Yt.FORUM,{forum:n})}),this.globalsService.profileObservable.pipe((0,O.T)(1),(0,_.R)(this.componentDestroyed)).subscribe(t=>{this.postMessageService.sendToSandbox(this.iframe.nativeElement,y.Yt.USER,{profile:t})})}ngAfterViewInit(){this.eventsObservable&&this.eventsObservable.pipe((0,_.R)(this.componentDestroyed)).subscribe(t=>{this.postMessageService.sendToSandbox(this.iframe.nativeElement,t.eventType,t.eventContent)}),(0,E.R)(window,"message").pipe((0,_.R)(this.componentDestroyed)).subscribe(t=>{t.data.id===this.sandboxId&&(t.data.sandboxHeightMode&&(this.iframeAutoHeight="scroll"!==t.data.sandboxHeightMode),void 0!==t.data.sandboxHeight&&(this.iframeHeight=Number(t.data.sandboxHeight)))})}ngOnDestroy(){this.componentDestroyed.next(),this.componentDestroyed.complete()}}return(d=m).\u0275fac=function(t){return new(t||d)(i.Y36(e.H7),i.Y36(x.d),i.Y36(c.F))},d.\u0275cmp=i.Xpm({type:d,selectors:[["app-sandbox"]],viewQuery:function(t,n){if(1&t&&i.Gf(u,5),2&t){let b;i.iGM(b=i.CRH())&&(n.iframe=b.first)}},inputs:{head:"head",body:"body",bodyClass:"bodyClass",eventsObservable:"eventsObservable",initData:"initData",resetMainPadding:"resetMainPadding"},outputs:{loadEvent:"loadEvent"},decls:2,vars:7,consts:[["sandbox","allow-forms allow-scripts allow-popups-to-escape-sandbox allow-popups allow-downloads",3,"ngClass","src","load"],["iframe",""]],template:function(t,n){1&t&&(i.TgZ(0,"iframe",0,1),i.NdJ("load",function(){return n.loaded()}),i.qZA()),2&t&&(i.Udp("height",n.iframeHeight+"px"),i.Q6J("ngClass",i.WLB(4,a,!n.iframeAutoHeight,n.resetMainPadding))("src",n.iframeContent,i.uOi))},dependencies:[s.mk],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex-grow:1}iframe[_ngcontent-%COMP%]{margin:0;padding:0;display:block;border:0;height:auto;min-height:0;min-width:100%}iframe.scroll-sandbox[_ngcontent-%COMP%]{flex-grow:1}.reset-padding[_ngcontent-%COMP%]{margin-bottom:-1rem}@media (min-width: 768px){.reset-padding[_ngcontent-%COMP%]{margin:0 -1rem -1rem}}@media (min-width: 960px){.reset-padding[_ngcontent-%COMP%]{margin:0 -1.5rem -1.5rem}}"]}),m})()},1874:(M,v,o)=>{o.d(v,{i:()=>i});var g=o(6814),f=o(9212);let i=(()=>{var c;class h{}return(c=h).\u0275fac=function(_){return new(_||c)},c.\u0275mod=f.oAB({type:c}),c.\u0275inj=f.cJS({imports:[g.ez]}),h})()},857:(M,v,o)=>{o.d(v,{By:()=>h,Kw:()=>f,VA:()=>c,pr:()=>i,u_:()=>g});const g={allowParams:/^https:\/\/[^?]+[^?/]+\.js(\?.+)?$/,disallowParams:/^https:\/\/[^?]+[^?/]+\.js$/},f={allowParams:/^https?:\/\/[^?]+[^?/]+\.js(\?.+)?$/,disallowParams:/^https?:\/\/[^?]+[^?/]+\.js$/},i={allowParams:/^https:\/\/[^?]+[^?/]+\.css(\?.+)?$/,disallowParams:/^https:\/\/[^?]+[^?/]+\.css$/},c=[{title:"[Private - All] Crediti in fondo al forum",link:"https://ffb.forumfree.net:4999/nicoxys/private/credits.js"},{title:"[Open] Timeago",link:"https://ffb.forumfree.net:4999/nicoxys/libs/jquery.timeago.js"},{title:"[Open] Font Awesome 4.7.0",link:"https://ffb.forumfree.net:4999/nicoxys/libs/fontawesome-4.7.0.css"},{title:"[Open] Font Awesome 5.7.0",link:"https://ffb.forumfree.net:4999/nicoxys/libs/fontawesome-5.7.0.css"},{title:"[Open] Font Awesome 6.2.1",link:"https://img.forumfree.net/fontawesome/6.2.1/css/all.min.css"},{title:"[Open] ReactJS (w/ dom) 16.8.2",link:"https://ffb.forumfree.net:4999/nicoxys/libs/reactjs-16.8.2.js"},{title:"[Open] Popper 2.5.2",link:"https://ffb.forumfree.net:4999/nicoxys/libs/popper-2.5.2.js"},{title:"[Open] Tippy 6.2.6",link:"https://ffb.forumfree.net:4999/nicoxys/libs/tippy-6.2.6.js"},{title:"[Open] Mustache 3.0.1",link:"https://ffb.forumfree.net:4999/nicoxys/libs/mustache-3.0.1.js"},{title:"[Open] Handlebars 4.7.3",link:"https://ffb.forumfree.net:4999/nicoxys/libs/handlebars-4.7.3.js"},{title:"[Open] Twitter API",link:"https://platform.twitter.com/widgets.js"}],h=[{title:"Codice HTML che sar\xe0 mostrato nel tag HEAD",const:"html_head"},{title:"[Start] Codice HTML che sar\xe0 mostrato in CIMA a tutte le pagine",const:"html_top_start"},{title:"[End] Codice HTML che sar\xe0 mostrato in CIMA a tutte le pagine",const:"html_top_end"},{title:"[Start] Codice HTML che sar\xe0 mostrato in tutte le pagine sotto il logo del sito",const:"html_logo_start"},{title:"[End] Codice HTML che sar\xe0 mostrato in tutte le pagine sotto il logo del sito",const:"html_logo_end"},{title:"[Start] Codice HTML che sar\xe0 mostrato nella homepage del sito",const:"html_home_start"},{title:"[End] Codice HTML che sar\xe0 mostrato nella homepage del sito",const:"html_home_end"},{title:"Codice HTML che sar\xe0 mostrato sopra le pubblicit\xe0",const:"html_ads_start"},{title:"[Start] Codice HTML che sar\xe0 mostrato in FONDO a tutte le pagine",const:"html_bottom_start"},{title:"[End] Codice HTML che sar\xe0 mostrato in FONDO a tutte le pagine",const:"html_bottom_end"}]},137:(M,v,o)=>{o.d(v,{s:()=>y});var g=o(857),f=o(8645),i=o(4664),c=o(2096),h=o(9212),r=o(7398),_=o(9315),E=o(9862);let x=(()=>{var e;class s{constructor(a){this.http=a}getContentFromUrls(a){const p=a.map(d=>this.http.get(d,{responseType:"text"}).pipe((0,r.U)(m=>({source:m,resource:d}))));return(0,_.D)([...p,(0,c.of)({source:"",resource:""})]).pipe((0,i.w)(d=>{d=d.filter(t=>""!==t.resource);const m=[],l=[];return d.forEach(t=>{const n=function O(e){const s={head:"",body:""},a=(new DOMParser).parseFromString(e.source,"text/html"),p=a.querySelector("head"),d=a.querySelector("body"),m=a.querySelector("base");if(m){const l=m.getAttribute("href")||"",t=a.querySelectorAll("head link, head img, head script, body link, body script, body img"),n=new URL(e.resource).origin;t.forEach(b=>{const C="LINK"===b.tagName?"href":"src",D=b.getAttribute(C);if(D&&!D.startsWith("http")){let S="".concat(D);D.startsWith(l)||(S="".concat(l).concat(S)),S.startsWith("http")||(S="".concat(n,"/").concat(S)),b.setAttribute(C,S)}}),m.href="".concat(n).concat(l.startsWith("/")?"":"/").concat(l),m.target="_blank"}return p&&(["meta","title"].forEach(l=>{p.querySelectorAll(l).forEach(n=>n.remove())}),s.head=p.innerHTML),d&&(s.body=d.innerHTML),s}(t);n.head&&m.push(n.head),n.body&&l.push(n.body)}),(0,c.of)({headData:m,bodyData:l})}))}}return(e=s).\u0275fac=function(a){return new(a||e)(h.LFG(E.eN))},e.\u0275prov=h.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),s})(),y=(()=>{var e;class s{constructor(a){this.sandboxService=a}create(a,p={}){const d=new f.x,m=a.value.filter(l=>!g.u_.allowParams.test(l)&&!g.pr.allowParams.test(l));return this.sandboxService.getContentFromUrls(m).pipe((0,i.w)(l=>(0,c.of)({eventSubject:d,eventObservable:d.asObservable(),loading:!0,initData:p,headData:[...a.value.map(t=>g.u_.allowParams.test(t)?"<script src='".concat(t,"'><\/script>"):g.pr.allowParams.test(t)?'<link rel="stylesheet" type="text/css" href="'.concat(t,'">'):""),...l.headData].join(""),bodyData:[...l.bodyData].join("")})))}}return(e=s).\u0275fac=function(a){return new(a||e)(h.LFG(x))},e.\u0275prov=h.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),s})()},4004:(M,v,o)=>{o.d(v,{Z:()=>y});const f={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let i;const c=new Uint8Array(16);function h(){if(!i&&(i=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!i))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(c)}const r=[];for(let e=0;e<256;++e)r.push((e+256).toString(16).slice(1));const y=function x(e,s,u){if(f.randomUUID&&!s&&!e)return f.randomUUID();const a=(e=e||{}).random||(e.rng||h)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,s){u=u||0;for(let p=0;p<16;++p)s[u+p]=a[p];return s}return function _(e,s=0){return r[e[s+0]]+r[e[s+1]]+r[e[s+2]]+r[e[s+3]]+"-"+r[e[s+4]]+r[e[s+5]]+"-"+r[e[s+6]]+r[e[s+7]]+"-"+r[e[s+8]]+r[e[s+9]]+"-"+r[e[s+10]]+r[e[s+11]]+r[e[s+12]]+r[e[s+13]]+r[e[s+14]]+r[e[s+15]]}(a)}}}]);