"use strict";(self.webpackChunkpages=self.webpackChunkpages||[]).push([[639],{9485:(wt,Y,p)=>{p.d(Y,{d:()=>Lt});var F=p(5861),Z=p(4464),t=p(7165),U=p(8413),a=p(5879),A=p(6814),j=p(9473),I=p(4020),X=p(1088),R=p(8247),H=p(3602);function nt(d,v){1&d&&a.GkF(0)}function K(d,v){1&d&&a.GkF(0)}const st=function(d,v,c){return{$implicit:d,sub:v,link:c}};function rt(d,v){if(1&d&&(a.TgZ(0,"li",11),a.YNc(1,K,1,0,"ng-container",6),a.qZA()),2&d){const c=v.$implicit;a.oxw(3);const _=a.MAs(6);a.xp6(1),a.Q6J("ngTemplateOutlet",_)("ngTemplateOutletContext",a.kEZ(2,st,c.name,c.domain,c.link))}}function k(d,v){if(1&d&&(a.ynx(0),a.YNc(1,rt,2,6,"li",10),a.BQk()),2&d){const c=v.$implicit;a.xp6(1),a.Q6J("ngForOf",c)}}const Q=function(d,v){return{$implicit:d,type:"forum",deleted:v}};function dt(d,v){if(1&d&&(a.TgZ(0,"fieldset",5),a.YNc(1,nt,1,0,"ng-container",6),a.TgZ(2,"cdk-virtual-scroll-viewport",7)(3,"ul",8),a.YNc(4,k,2,1,"ng-container",9),a.ALo(5,"arrayChunk"),a.qZA()()()),2&d){const c=a.oxw(),_=a.MAs(4);a.xp6(1),a.Q6J("ngTemplateOutlet",_)("ngTemplateOutletContext",a.WLB(7,Q,c.forums.length,c.forumsWithDeletedCount-c.forums.length)),a.xp6(1),a.Q6J("itemSize",78),a.xp6(2),a.Q6J("cdkVirtualForOf",a.xi3(5,4,c.forums,c.itemsPerRow))}}function ut(d,v){1&d&&a.GkF(0)}function ht(d,v){1&d&&a.GkF(0)}function E(d,v){if(1&d&&(a.TgZ(0,"li",11),a.YNc(1,ht,1,0,"ng-container",6),a.ALo(2,"titlecase"),a.qZA()),2&d){const c=v.$implicit;a.oxw(3);const _=a.MAs(6);a.xp6(1),a.Q6J("ngTemplateOutlet",_)("ngTemplateOutletContext",a.kEZ(4,st,c.name,a.lcZ(2,2,c.site)+" id: "+c.id,c.link))}}function mt(d,v){if(1&d&&(a.ynx(0),a.YNc(1,E,3,8,"li",10),a.BQk()),2&d){const c=v.$implicit;a.xp6(1),a.Q6J("ngForOf",c)}}const ft=function(d){return{"mt-3":d}},gt=function(d,v,c){return{$implicit:d,type:v,deleted:c}};function _t(d,v){if(1&d&&(a.TgZ(0,"fieldset",12),a.YNc(1,ut,1,0,"ng-container",6),a.TgZ(2,"cdk-virtual-scroll-viewport",7)(3,"ul",8),a.YNc(4,mt,2,1,"ng-container",9),a.ALo(5,"arrayChunk"),a.qZA()()()),2&d){const c=a.oxw(),_=a.MAs(4);a.Q6J("ngClass",a.VKq(8,ft,c.forums.length>0)),a.xp6(1),a.Q6J("ngTemplateOutlet",_)("ngTemplateOutletContext",a.kEZ(10,gt,c.users.length,"utent"+(1===c.users.length?"e":"i"),c.usersWithDeletedCount-c.users.length)),a.xp6(1),a.Q6J("itemSize",78),a.xp6(2),a.Q6J("cdkVirtualForOf",a.xi3(5,5,c.users,c.itemsPerRow))}}function ot(d,v){if(1&d&&(a.TgZ(0,"legend",13)(1,"div",14),a._UZ(2,"div",15)(3,"div",16),a.qZA()()),2&d){const c=v.$implicit,_=v.type,O=v.deleted;a.xp6(2),a.Q6J("innerText",c+" "+_),a.xp6(1),a.Q6J("innerText","("+O+" cancellat"+(1===O?"o":"i")+")")}}function vt(d,v){if(1&d&&(a.TgZ(0,"a",17),a._UZ(1,"div",18)(2,"div",19),a.qZA()),2&d){const c=v.$implicit,_=v.sub;a.Q6J("href",v.link,a.LSH),a.xp6(1),a.Q6J("innerHTML",c,a.oJD),a.xp6(1),a.Q6J("innerHTML",_,a.oJD)}}const Ct=function(d){return{"touch-device":d}},xt=function(d){return{height:d}};let yt=(()=>{class d{constructor(c){this.breakpointObserver=c,this.forums=[],this.users=[],this.forumsWithDeletedCount=0,this.usersWithDeletedCount=0,this.touchDevice=I.eX,this.itemsPerRow=1,this.wrapperStyleHeight="",this.breakpoints={W_992_I_1:"(max-width: 991.98px)",W_1200_I_2:"(min-width: 992px) and (max-width: 1199.98px)",W_MAX_I_4:"(min-width:1200px)"},this.itemsPerRowMap=new Map([[this.breakpoints.W_992_I_1,1],[this.breakpoints.W_1200_I_2,2],[this.breakpoints.W_MAX_I_4,4]])}ngOnInit(){this.breakpointObserverSubscription=this.breakpointObserver.observe(Object.values(this.breakpoints)).subscribe(c=>{for(const O of Object.keys(c.breakpoints))if(c.breakpoints[O]){var _;this.itemsPerRow=null!==(_=this.itemsPerRowMap.get(O))&&void 0!==_?_:1;const L=Math.ceil(this.forums.length/this.itemsPerRow),V=Math.ceil(this.users.length/this.itemsPerRow),W=L>0&&V>0,bt=Math.max(0,78*L-16)+Math.max(0,78*V-16)+35*(W?2:1);this.wrapperStyleHeight=`calc(${bt}px + ${2+(W?4:1.5)}rem)`}})}ngOnDestroy(){var c;null===(c=this.breakpointObserverSubscription)||void 0===c||c.unsubscribe()}}return d.\u0275fac=function(c){return new(c||d)(a.Y36(X.Yg))},d.\u0275cmp=a.Xpm({type:d,selectors:[["app-details-list"]],inputs:{forums:"forums",users:"users",forumsWithDeletedCount:"forumsWithDeletedCount",usersWithDeletedCount:"usersWithDeletedCount"},decls:7,vars:8,consts:[["cdkVirtualScrollingElement","",1,"wrapper","overflow-auto","mh-100","p-3","w-100",3,"ngClass","ngStyle"],["class","border rounded p-3 pt-2",4,"ngIf"],["class","border rounded p-3 pt-2",3,"ngClass",4,"ngIf"],["legend",""],["listItem",""],[1,"border","rounded","p-3","pt-2"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"v-scroll",3,"itemSize"],[1,"list-unstyled","mb-0"],[4,"cdkVirtualFor","cdkVirtualForOf"],["class","min-w-0 list-item rounded",4,"ngFor","ngForOf"],[1,"min-w-0","list-item","rounded"],[1,"border","rounded","p-3","pt-2",3,"ngClass"],[1,"legend-reset","pb-1","px-2","mb-0","mx-auto"],[1,"d-flex","flex-row","flex-wrap","align-items-center","justify-content-center"],[1,"mx-1","fs-xl",3,"innerText"],[1,"mx-1","fs-reset","lh-1","fst-italic","deleted-items",3,"innerText"],["target","_blank",1,"text-center","d-block","bg-light","border","px-3","py-2","rounded","mw-100",3,"href"],[1,"text-uppercase","text-primary","text-truncate",3,"innerHTML"],[1,"text-muted","fs-xs","text-truncate",3,"innerHTML"]],template:function(c,_){1&c&&(a.TgZ(0,"div",0),a.YNc(1,dt,6,10,"fieldset",1),a.YNc(2,_t,6,14,"fieldset",2),a.qZA(),a.YNc(3,ot,4,2,"ng-template",null,3,a.W1O),a.YNc(5,vt,3,3,"ng-template",null,4,a.W1O)),2&c&&(a.Q6J("ngClass",a.VKq(4,Ct,_.touchDevice))("ngStyle",a.VKq(6,xt,_.wrapperStyleHeight)),a.xp6(1),a.Q6J("ngIf",_.forums.length>0),a.xp6(1),a.Q6J("ngIf",_.users.length>0))},dependencies:[A.mk,A.sg,A.O5,A.tP,A.PC,R.xd,R.x0,R.N7,R.j8,H.K,A.rS],styles:["fieldset[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:grid;row-gap:16px}.v-scroll[_ngcontent-%COMP%]{margin-bottom:-16px!important}.v-scroll[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-bottom:16px!important}.wrapper[_ngcontent-%COMP%]:not(.touch-device)   .list-item[_ngcontent-%COMP%]{transition:box-shadow .2s;box-shadow:none}.wrapper[_ngcontent-%COMP%]:not(.touch-device)   .list-item[_ngcontent-%COMP%]:hover{box-shadow:0 .5rem 1rem #00000026}.wrapper[_ngcontent-%COMP%]:not(.touch-device)   .v-scroll[_ngcontent-%COMP%]{margin-left:-1rem!important;margin-right:-1rem!important}.wrapper[_ngcontent-%COMP%]:not(.touch-device)   .v-scroll[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:1rem!important;padding-right:1rem!important}legend[_ngcontent-%COMP%]{height:33px}legend[_ngcontent-%COMP%]   .deleted-items[_ngcontent-%COMP%]{padding-top:.175rem}.list-item[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{height:62px}@media (min-width: 576px){fieldset[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(250px,1fr));column-gap:16px}}"]}),d})();const St=["modal"];function Tt(d,v){1&d&&a._UZ(0,"app-loader",7)}function Mt(d,v){if(1&d&&(a.ynx(0),a._UZ(1,"app-details-list",8),a.BQk()),2&d){const c=a.oxw(3);a.xp6(1),a.Q6J("forums",c.forums)("users",c.users)("forumsWithDeletedCount",c.scriptWithStats.stats.forums.length)("usersWithDeletedCount",c.scriptWithStats.stats.users.length)}}function Ot(d,v){if(1&d&&a.YNc(0,Mt,2,4,"ng-container",2),2&d){const c=a.oxw(2);a.Q6J("ngIf",c.scriptWithStats)}}function Dt(d,v){if(1&d&&(a.ynx(0),a.YNc(1,Tt,1,0,"app-loader",5),a.YNc(2,Ot,1,1,"ng-template",null,6,a.W1O),a.BQk()),2&d){const c=a.MAs(3),_=a.oxw();a.xp6(1),a.Q6J("ngIf",_.loading)("ngIfElse",c)}}const It=function(){return["d-flex","p-0"]};let Lt=(()=>{class d{constructor(c){this.scriptDevService=c,this.opened=!1,this.modalTitle="",this.loading=!0,this.users=[],this.forums=[],this.forumsAndUsersCount=0}ngOnInit(){var c=this;return(0,F.Z)(function*(){yield c.setData(),c.loading=!1})()}ngOnChanges(c){var _=this;return(0,F.Z)(function*(){var O;c.scriptWithStats&&!c.scriptWithStats.firstChange&&(_.loading=!0,_.forums=[],_.users=[],_.forumsAndUsersCount=0,_.modalTitle=`Dettagli dello script <em>${(null===(O=_.scriptWithStats)||void 0===O?void 0:O.script.name)||""}</em>`,yield _.setData(),_.loading=!1)})()}open(){this.opened=!0,this.modalComponentRef.open()}onHidden(){this.opened=!1}setData(){var c=this;return(0,F.Z)(function*(){if(!c.scriptWithStats)return;c.forumsAndUsersCount=c.scriptWithStats.stats.forums.length+c.scriptWithStats.stats.users.length;const[_,O]=yield c.scriptDevService.getScriptStatsDetails(c.scriptWithStats.stats);c.forums=O.sort((L,V)=>L.domain.localeCompare(V.domain)).map(L=>({domain:L.domain,link:`https://${L.domain}`,name:L.domain.split(".")[0]})),c.users=_.sort((L,V)=>L.nickname.localeCompare(V.nickname)).map(L=>{const V=L.uid.substring(0,2),W=L.uid.substring(2);return{name:L.nickname,id:W,site:t.AW[V].split(".")[0],link:`${t.hD[V]}/?act=Profile&MID=${W}`}})})()}}return d.\u0275fac=function(c){return new(c||d)(a.Y36(U.N))},d.\u0275cmp=a.Xpm({type:d,selectors:[["app-script-dev-stats-details"]],viewQuery:function(c,_){if(1&c&&a.Gf(St,5),2&c){let O;a.iGM(O=a.CRH())&&(_.modalComponentRef=O.first)}},inputs:{scriptWithStats:"scriptWithStats"},features:[a.TTD],decls:5,vars:5,consts:[["size","xl",3,"title","bodyClass","hidden"],["modal",""],[4,"ngIf"],["footer",""],[1,"me-auto",3,"innerHTML"],["message","Recupero dei dettagli","class","d-flex align-items-center justify-content-center w-100 p-3",4,"ngIf","ngIfElse"],["details",""],["message","Recupero dei dettagli",1,"d-flex","align-items-center","justify-content-center","w-100","p-3"],[1,"d-block","w-100",3,"forums","users","forumsWithDeletedCount","usersWithDeletedCount"]],template:function(c,_){1&c&&(a.TgZ(0,"app-modal",0,1),a.NdJ("hidden",function(){return _.onHidden()}),a.YNc(2,Dt,4,2,"ng-container",2),a.ynx(3,3),a._UZ(4,"div",4),a.BQk(),a.qZA()),2&c&&(a.Q6J("title",_.modalTitle)("bodyClass",a.DdM(4,It)),a.xp6(2),a.Q6J("ngIf",_.opened),a.xp6(2),a.Q6J("innerHTML",_.forumsAndUsersCount+" "+(1===_.forumsAndUsersCount?"installazione totale":"installazioni totali"),a.oJD))},dependencies:[A.O5,j.R,Z.z,yt]}),d})()},8934:(wt,Y,p)=>{p.d(Y,{a:()=>j});var F=p(3746),Z=p(6814),t=p(1394),U=p(4610),a=p(8247),A=p(5879);let j=(()=>{class I{}return I.\u0275fac=function(R){return new(R||I)},I.\u0275mod=A.oAB({type:I}),I.\u0275inj=A.cJS({imports:[F.P,Z.ez,t.q,U.z,a.Cl]}),I})()},3639:(wt,Y,p)=>{p.r(Y),p.d(Y,{ScriptDevModule:()=>Re});var F=p(9090),Z=p(6814),t=p(5879),U=function(){return U=Object.assign||function(r){for(var s,e=1,i=arguments.length;e<i;e++)for(var n in s=arguments[e])Object.prototype.hasOwnProperty.call(s,n)&&(r[n]=s[n]);return r},U.apply(this,arguments)},a=function(){function r(s,e,i){var n=this;this.endVal=e,this.options=i,this.version="2.6.2",this.defaults={startVal:0,decimalPlaces:0,duration:2,useEasing:!0,useGrouping:!0,useIndianSeparators:!1,smartEasingThreshold:999,smartEasingAmount:333,separator:",",decimal:".",prefix:"",suffix:"",enableScrollSpy:!1,scrollSpyDelay:200,scrollSpyOnce:!1},this.finalEndVal=null,this.useEasing=!0,this.countDown=!1,this.error="",this.startVal=0,this.paused=!0,this.once=!1,this.count=function(o){n.startTime||(n.startTime=o);var l=o-n.startTime;n.remaining=n.duration-l,n.frameVal=n.useEasing?n.countDown?n.startVal-n.easingFn(l,0,n.startVal-n.endVal,n.duration):n.easingFn(l,n.startVal,n.endVal-n.startVal,n.duration):n.startVal+l/n.duration*(n.endVal-n.startVal),n.frameVal=(n.countDown?n.frameVal<n.endVal:n.frameVal>n.endVal)?n.endVal:n.frameVal,n.frameVal=Number(n.frameVal.toFixed(n.options.decimalPlaces)),n.printValue(n.frameVal),l<n.duration?n.rAF=requestAnimationFrame(n.count):null!==n.finalEndVal?n.update(n.finalEndVal):n.options.onCompleteCallback&&n.options.onCompleteCallback()},this.formatNumber=function(o){var l,h,m,g,f=o<0?"-":"";l=Math.abs(o).toFixed(n.options.decimalPlaces);var u=(l+="").split(".");if(h=u[0],m=u.length>1?n.options.decimal+u[1]:"",n.options.useGrouping){g="";for(var C=3,x=0,D=0,T=h.length;D<T;++D)n.options.useIndianSeparators&&4===D&&(C=2,x=1),0!==D&&x%C==0&&(g=n.options.separator+g),x++,g=h[T-D-1]+g;h=g}return n.options.numerals&&n.options.numerals.length&&(h=h.replace(/[0-9]/g,function(y){return n.options.numerals[+y]}),m=m.replace(/[0-9]/g,function(y){return n.options.numerals[+y]})),f+n.options.prefix+h+m+n.options.suffix},this.easeOutExpo=function(o,l,h,m){return h*(1-Math.pow(2,-10*o/m))*1024/1023+l},this.options=U(U({},this.defaults),i),this.formattingFn=this.options.formattingFn?this.options.formattingFn:this.formatNumber,this.easingFn=this.options.easingFn?this.options.easingFn:this.easeOutExpo,this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.endVal=this.validateValue(e),this.options.decimalPlaces=Math.max(this.options.decimalPlaces),this.resetDuration(),this.options.separator=String(this.options.separator),this.useEasing=this.options.useEasing,""===this.options.separator&&(this.options.useGrouping=!1),this.el="string"==typeof s?document.getElementById(s):s,this.el?this.printValue(this.startVal):this.error="[CountUp] target is null or undefined",typeof window<"u"&&this.options.enableScrollSpy&&(this.error?console.error(this.error,s):(window.onScrollFns=window.onScrollFns||[],window.onScrollFns.push(function(){return n.handleScroll(n)}),window.onscroll=function(){window.onScrollFns.forEach(function(o){return o()})},this.handleScroll(this)))}return r.prototype.handleScroll=function(s){if(s&&window&&!s.once){var e=window.innerHeight+window.scrollY,i=s.el.getBoundingClientRect(),n=i.top+window.pageYOffset,o=i.top+i.height+window.pageYOffset;o<e&&o>window.scrollY&&s.paused?(s.paused=!1,setTimeout(function(){return s.start()},s.options.scrollSpyDelay),s.options.scrollSpyOnce&&(s.once=!0)):(window.scrollY>o||n>e)&&!s.paused&&s.reset()}},r.prototype.determineDirectionAndSmartEasing=function(){var s=this.finalEndVal?this.finalEndVal:this.endVal;this.countDown=this.startVal>s,Math.abs(s-this.startVal)>this.options.smartEasingThreshold&&this.options.useEasing?(this.finalEndVal=s,this.endVal=s+(this.countDown?1:-1)*this.options.smartEasingAmount,this.duration=this.duration/2):(this.endVal=s,this.finalEndVal=null),this.useEasing=null===this.finalEndVal&&this.options.useEasing},r.prototype.start=function(s){this.error||(s&&(this.options.onCompleteCallback=s),this.duration>0?(this.determineDirectionAndSmartEasing(),this.paused=!1,this.rAF=requestAnimationFrame(this.count)):this.printValue(this.endVal))},r.prototype.pauseResume=function(){this.paused?(this.startTime=null,this.duration=this.remaining,this.startVal=this.frameVal,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count)):cancelAnimationFrame(this.rAF),this.paused=!this.paused},r.prototype.reset=function(){cancelAnimationFrame(this.rAF),this.paused=!0,this.resetDuration(),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.printValue(this.startVal)},r.prototype.update=function(s){cancelAnimationFrame(this.rAF),this.startTime=null,this.endVal=this.validateValue(s),this.endVal!==this.frameVal&&(this.startVal=this.frameVal,null==this.finalEndVal&&this.resetDuration(),this.finalEndVal=null,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count))},r.prototype.printValue=function(s){var e;if(this.el){var i=this.formattingFn(s);null!==(e=this.options.plugin)&&void 0!==e&&e.render?this.options.plugin.render(this.el,i):"INPUT"===this.el.tagName?this.el.value=i:"text"===this.el.tagName||"tspan"===this.el.tagName?this.el.textContent=i:this.el.innerHTML=i}},r.prototype.ensureNumber=function(s){return"number"==typeof s&&!isNaN(s)},r.prototype.validateValue=function(s){var e=Number(s);return this.ensureNumber(e)?e:(this.error="[CountUp] invalid start or end value: ".concat(s),null)},r.prototype.resetDuration=function(){this.startTime=null,this.duration=1e3*Number(this.options.duration),this.remaining=this.duration},r}();let A=(()=>{class r{constructor(e,i,n){this.el=e,this.zone=i,this.platformId=n,this.options={},this.reanimateOnClick=!0,this.complete=new t.vpe}onClick(){this.reanimateOnClick&&this.animate()}ngOnChanges(e){if(!(0,Z.NF)(this.platformId))return;const{options:i,endVal:n}=e;void 0!==(null==n?void 0:n.currentValue)?void 0!==this.countUp?this.zone.runOutsideAngular(()=>{this.countUp.update(this.endVal)}):this.initAndRun():void 0!==(null==i?void 0:i.currentValue)&&this.initAndRun()}animate(){this.zone.runOutsideAngular(()=>{this.countUp.reset(),this.countUp.start(()=>{this.zone.run(()=>{this.complete.emit()})})})}initAndRun(){this.zone.runOutsideAngular(()=>{this.countUp=new a(this.el.nativeElement,this.endVal,this.options),this.options.enableScrollSpy||this.animate()})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(t.Lbi))},r.\u0275dir=t.lG2({type:r,selectors:[["","countUp",""]],hostBindings:function(e,i){1&e&&t.NdJ("click",function(){return i.onClick()})},inputs:{endVal:["countUp","endVal"],options:"options",reanimateOnClick:"reanimateOnClick"},outputs:{complete:"complete"},features:[t.TTD]}),r})(),j=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[]]}),r})();var I=p(6223),X=p(1394),R=p(4610),H=p(3946),nt=p(4618),K=p(8109),st=p(9537),rt=p(1413),k=p(5861),Q=p(1088),dt=p(1410),ut=p(8413),ht=p(9121),E=p(3729),mt=p(5245),ft=p(3285),gt=p(2438),_t=p(3620),ot=p(7165);const vt=["app-script-dev-info",""];function Ct(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"div",17),t.NdJ("chartInit",function(n){t.CHM(e);const o=t.oxw(2);return t.KtG(o.onChartInit(n))}),t.qZA()}if(2&r){const e=t.oxw(2);t.Q6J("options",e.chartOptions)("autoResize",!1)}}function xt(r,s){if(1&r&&(t.TgZ(0,"div",12)(1,"div",13),t._uU(2," settings "),t.qZA(),t.TgZ(3,"div",14),t._uU(4,"Migliori script per utilizzo"),t.qZA(),t.TgZ(5,"div",15),t.YNc(6,Ct,1,2,"div",16),t.qZA()()),2&r){const e=t.oxw();t.xp6(6),t.Q6J("ngIf",e.showChart)}}function yt(r,s){1&r&&(t.TgZ(0,"span"),t._uU(1,"Cliccando sul numero di installazioni, viene visualizzato un modal contenente i dettagli di tutti i siti e gli account che utilizzano lo script. Le tre icone finali consentono rispettivamente di cancellare la cache, aggiornare le impostazioni e rimuovere definitivamente lo script. "),t.qZA())}function St(r,s){if(1&r&&t._UZ(0,"option",22),2&r){const e=s.$implicit;t.Q6J("ngValue",e.scriptId)("innerText",e.name)}}function Tt(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"div")(1,"small",18),t._uU(2," Oltre agli script creati, \xe8 possibile modificare uno script selezionandolo dal seguente elenco: "),t.qZA(),t.TgZ(3,"select",19),t.NdJ("ngModelChange",function(n){t.CHM(e);const o=t.oxw();return t.KtG(o.additionalScriptSelected=n)})("change",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.goToSettings())}),t._UZ(4,"option",20),t.YNc(5,St,1,2,"option",21),t.qZA()()}if(2&r){const e=t.oxw();t.xp6(3),t.Q6J("ngModel",e.additionalScriptSelected),t.xp6(1),t.Q6J("ngValue",0),t.xp6(1),t.Q6J("ngForOf",e.additionalScriptsToManage)}}function Mt(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"div",23),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.filterModel="",t.KtG(n.filterKeyup())}),t._uU(1," clear "),t.qZA()}}const Ot=function(r){return{"d-none d-sm-block":r}},Dt=function(r){return{"mb-0":r}},It=function(){return["settings/add"]};let Lt=(()=>{class r{constructor(e,i){this.router=e,this.ngZone=i,this.scriptWithStats=[],this.scriptPermissions={},this.scriptList=[],this.smallScreen=!0,this.loading=!0,this.filterEvent=new t.vpe,this.additionalScriptsToManage=[],this.additionalScriptSelected=0,this.filterModel="",this.showChart=!1,this.chartOptions={grid:{top:30,bottom:30,right:"2%",left:"5%"},xAxis:{type:"category",data:[],show:!1},yAxis:{type:"value",minInterval:50},tooltip:{show:!0,trigger:"axis",axisPointer:{type:"none"},borderWidth:1,borderColor:"var(--ei-border-color)",textStyle:{color:"inherit"}},series:{data:[],name:"Installazioni",type:"bar",label:{position:"inside",show:!0},color:"rgba(72, 100, 254, 0.85)",emphasis:{itemStyle:{color:"rgba(114,138,255,0.85)"}},itemStyle:{borderRadius:[7,7,0,0]}}},this.filterEmitted=""}ngOnInit(){var e=this;return(0,k.Z)(function*(){e.loading||(yield e.setData())})()}ngOnChanges(e){var i=this;return(0,k.Z)(function*(){e.loading&&!e.loading.firstChange&&!e.loading.currentValue&&(yield i.setData())})()}setData(){var e=this;return(0,k.Z)(function*(){if(e.additionalScriptsToManage=[],e.showChart=!1,e.scriptWithStats.length>0){let i=[];Object.values(e.scriptPermissions).forEach(n=>{if(n.manage&&e.scriptWithStats.findIndex(o=>o.script.scriptId===n.scriptId)<0){const o=e.scriptList.find(l=>l.scriptId===n.scriptId);o&&i.push(o)}}),e.additionalScriptsToManage=i.sort((n,o)=>n.name>o.name?1:o.name>n.name?-1:0)}e.createChartData(),e.showChart=!0,e.setResizeChartEvent()})()}createChartData(){const e=this.scriptWithStats.slice(0).sort((i,n)=>n.stats.entities.length-i.stats.entities.length).slice(0,10);this.chartOptions.series.data=e.map(i=>i.stats.entities.length),this.chartOptions.xAxis.data=e.map(i=>i.script.name)}onChartInit(e){this.echartsInstance=e}setResizeChartEvent(){this.ngZone.runOutsideAngular(()=>{this.resizeWindowEventSubscription=(0,gt.R)(window,"resize").pipe((0,_t.b)(200)).subscribe(()=>{this.echartsInstance&&!this.echartsInstance.isDisposed()&&this.echartsInstance.resize()})})}goToSettings(){var e=this;return(0,k.Z)(function*(){yield e.router.navigate([ot.B2.SCRIPT_DEV_SETTINGS,e.additionalScriptSelected])})()}filterKeyup(){const e=this.filterModel.trim();e!==this.filterEmitted&&(this.filterEmitted=e,this.filterEvent.emit(this.filterEmitted))}ngOnDestroy(){var e;null===(e=this.resizeWindowEventSubscription)||void 0===e||e.unsubscribe()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(K.F0),t.Y36(t.R0b))},r.\u0275cmp=t.Xpm({type:r,selectors:[["","app-script-dev-info",""]],inputs:{scriptWithStats:"scriptWithStats",scriptPermissions:"scriptPermissions",scriptList:"scriptList",smallScreen:"smallScreen",loading:"loading"},outputs:{filterEvent:"filterEvent"},features:[t.TTD],attrs:vt,decls:21,vars:13,consts:[["class","flat-container px-3 pt-3 position-relative d-flex flex-column overflow-hidden",4,"ngIf"],[1,"flat-container","px-3","px-md-4","py-3","tips",3,"ngClass"],[1,"text-justify","d-none","d-sm-block",3,"ngClass"],[4,"ngIf"],[1,"d-flex","utilities"],[1,"input-group","position-relative"],[1,"input-group-text"],["for","custom-filter",1,"d-block","material-icons-outlined","text-muted","cursor-pointer"],["class","material-icons d-block icon-small text-danger position-absolute reset-custom-filter cursor-pointer",3,"click",4,"ngIf"],["type","text","placeholder","Filtra...","id","custom-filter",1,"form-control",3,"ngModel","ngModelChange","keyup"],[1,"d-block","new-script","btn","btn-primary","flex-shrink-0",3,"routerLink"],[1,"d-none","d-sm-inline"],[1,"flat-container","px-3","pt-3","position-relative","d-flex","flex-column","overflow-hidden"],[1,"material-icons","chart-icon","d-block","position-absolute"],[1,"mb-0","h5"],[1,"position-relative","flex-grow-1","chart-container"],["echarts","","class","d-block h-100",3,"options","autoResize","chartInit",4,"ngIf"],["echarts","",1,"d-block","h-100",3,"options","autoResize","chartInit"],[1,"d-block","mb-2","text-justify"],[1,"form-select","form-select-sm","mb-0",3,"ngModel","ngModelChange","change"],["selected","",3,"ngValue"],[3,"ngValue","innerText",4,"ngFor","ngForOf"],[3,"ngValue","innerText"],[1,"material-icons","d-block","icon-small","text-danger","position-absolute","reset-custom-filter","cursor-pointer",3,"click"]],template:function(e,i){1&e&&(t.YNc(0,xt,7,1,"div",0),t.TgZ(1,"div")(2,"div",1)(3,"p",2),t._uU(4," Tramite questo pannello \xe8 possibile gestire e visualizzare le statistiche dei "),t.TgZ(5,"em"),t._uU(6,"propri script"),t.qZA(),t._uU(7,". La tabella con l'elenco dei propri script fornisce le principali informazioni su ogni script inserito. "),t.YNc(8,yt,2,0,"span",3),t.qZA(),t.YNc(9,Tt,6,3,"div",3),t.qZA(),t.TgZ(10,"div",4)(11,"div",5)(12,"div",6)(13,"label",7),t._uU(14,"filter_alt"),t.qZA()(),t.YNc(15,Mt,2,0,"div",8),t.TgZ(16,"input",9),t.NdJ("ngModelChange",function(o){return i.filterModel=o})("keyup",function(){return i.filterKeyup()}),t.qZA()(),t.TgZ(17,"a",10),t._uU(18," Nuovo "),t.TgZ(19,"span",11),t._uU(20,"script"),t.qZA()()()()),2&e&&(t.Q6J("ngIf",!i.smallScreen),t.xp6(2),t.Q6J("ngClass",t.VKq(8,Ot,0===i.additionalScriptsToManage.length)),t.xp6(1),t.Q6J("ngClass",t.VKq(10,Dt,0===i.additionalScriptsToManage.length)),t.xp6(5),t.Q6J("ngIf",0===i.additionalScriptsToManage.length),t.xp6(1),t.Q6J("ngIf",i.additionalScriptsToManage.length>0),t.xp6(6),t.Q6J("ngIf",i.filterModel.trim().length>0),t.xp6(1),t.Q6J("ngModel",i.filterModel),t.xp6(1),t.Q6J("routerLink",t.DdM(12,It)))},dependencies:[Z.mk,Z.sg,Z.O5,I.YN,I.Kr,I.Fj,I.EJ,I.JJ,I.On,nt._w,K.rH],styles:["#custom-filter[_ngcontent-%COMP%]{padding-right:calc(.5rem + 26px)}.reset-custom-filter[_ngcontent-%COMP%]{top:calc(50% - 10px);right:5px;z-index:6}.chart-container[_ngcontent-%COMP%]{min-height:150px}.chart-icon[_ngcontent-%COMP%]{right:0;top:0;transform:translate(40%,-40%) rotate(46deg);font-size:8rem;opacity:.2;animation:_ngcontent-%COMP%_chart-icon-animation 1s 1}@keyframes _ngcontent-%COMP%_chart-icon-animation{0%{transform:translate(40%,-40%) rotate(46deg)}to{transform:translate(40%,-40%) rotate(406deg)}}.tips[_ngcontent-%COMP%]{margin-bottom:1rem}.utilities[_ngcontent-%COMP%]{margin:0 1rem}.utilities[_ngcontent-%COMP%]   .new-script[_ngcontent-%COMP%]{margin-left:1rem}.utilities[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%], .utilities[_ngcontent-%COMP%]   .new-script[_ngcontent-%COMP%]{box-shadow:0 .125rem .25rem #00000013}@media (min-width: 768px){.utilities[_ngcontent-%COMP%]{margin:0}}@media (min-width: 960px){.tips[_ngcontent-%COMP%]{margin-bottom:1.5rem}.utilities[_ngcontent-%COMP%]   .new-script[_ngcontent-%COMP%]{margin-left:1.5rem}}"]}),r})();var d=p(1378),v=p(4020),c=p(8055),_=p(6988),O=p(9485),L=p(5661),V=p(9473),W=p(8595);const bt=["cacheModal"],Jt=["installationModal"],Nt=["deletionModal"],Ft=["app-script-dev-list",""];function Qt(r,s){1&r&&(t.TgZ(0,"li",18),t._UZ(1,"app-loader",19),t.qZA())}function Wt(r,s){1&r&&(t.TgZ(0,"li",22)(1,"div",23),t._uU(2," Nessuno script trovato! "),t.qZA()())}function zt(r,s){if(1&r&&t._UZ(0,"div",46),2&r){const e=s.$implicit;t.Q6J("ngClass",e?"text-success":"text-danger")("innerText",e?"assignment_turned_in":"highlight_off")}}function Bt(r,s){1&r&&t._UZ(0,"div",47),2&r&&t.Q6J("innerText","Forum")}const Yt=function(r){return{"mt-2":r}};function Ht(r,s){if(1&r&&t._UZ(0,"div",48),2&r){const e=t.oxw().$implicit,i=t.oxw(3);t.Q6J("ngClass",t.VKq(2,Yt,e.script.type===i.scriptType.ALL))("innerText","Utenti")}}function Kt(r,s){1&r&&t.GkF(0)}const Gt=function(r){return{"border-bottom":r}},qt=function(r){return{focus:r}},$t=function(r,s){return[r,s]},jt=function(r,s){return{"cursor-pointer":r,"text-reset":s}},Xt=function(r){return{"cache-pending":r}},te=function(r){return{placement:r}},ee=function(r,s,e){return{$implicit:r,f:s,scriptId:e}},ie=function(r){return{"del-pending":r}},ne=function(){return[10,10]},se=function(r,s){return{placement:r,offset:s}},At=function(r){return["settings",r]};function re(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"li",25),t._UZ(1,"div",26),t.TgZ(2,"div",27),t._UZ(3,"a",28)(4,"div",29),t.qZA(),t._UZ(5,"div",30),t.YNc(6,zt,1,2,"div",31),t.TgZ(7,"div",32),t.YNc(8,Bt,1,1,"div",33),t.YNc(9,Ht,1,4,"div",34),t.qZA(),t.TgZ(10,"a",35),t.NdJ("click",function(){const o=t.CHM(e).$implicit,l=t.oxw(3);return t.KtG(l.installationNumberClick(o))}),t.qZA(),t.TgZ(11,"div")(12,"div",36)(13,"a",37),t.NdJ("click",function(){const o=t.CHM(e).$implicit,l=t.oxw(3);return t.KtG(l.cacheIconClick(o))}),t._uU(14,"sync"),t.qZA(),t.YNc(15,Kt,1,0,"ng-container",38),t.TgZ(16,"a",39),t.NdJ("click",function(){const o=t.CHM(e).$implicit,l=t.oxw(3);return t.KtG(l.deleteScript(o))}),t._uU(17,"delete "),t.qZA()(),t.TgZ(18,"div",40)(19,"div",41),t._uU(20," more_vert "),t.qZA(),t.TgZ(21,"div",42)(22,"a",43),t.NdJ("click",function(){const o=t.CHM(e).$implicit,l=t.oxw(3);return t.KtG(l.installationNumberClick(o))}),t.TgZ(23,"div",44),t._uU(24," poll "),t.qZA(),t.TgZ(25,"div"),t._uU(26,"Installazioni"),t.qZA()(),t.TgZ(27,"a",43),t.NdJ("click",function(){const o=t.CHM(e).$implicit,l=t.oxw(3);return t.KtG(l.cacheIconClick(o))}),t.TgZ(28,"div",44),t._uU(29," sync "),t.qZA(),t.TgZ(30,"div"),t._uU(31,"Aggiorna cache"),t.qZA()(),t.TgZ(32,"a",45)(33,"div",44),t._uU(34," settings "),t.qZA(),t.TgZ(35,"div"),t._uU(36,"Impostazioni"),t.qZA()(),t.TgZ(37,"a",43),t.NdJ("click",function(){const o=t.CHM(e).$implicit,l=t.oxw(3);return t.KtG(l.deleteScript(o))}),t.TgZ(38,"div",44),t._uU(39," delete "),t.qZA(),t.TgZ(40,"div"),t._uU(41,"Cancella script"),t.qZA()()()()()()}if(2&r){const e=s.$implicit,i=s.first,n=s.last,o=t.oxw(3),l=t.MAs(23);t.Q6J("ngClass",t.VKq(23,Gt,!n)),t.xp6(1),t.Q6J("innerText",e.script.scriptId),t.xp6(2),t.Q6J("routerLink",e.script.type===o.scriptType.USER||e.script.type===o.scriptType.ALL?o.paths.SCRIPT_USER:o.paths.SCRIPT_FORUM)("queryParams",t.VKq(25,qt,e.script.scriptId))("innerText",e.script.name),t.xp6(1),t.Q6J("innerText",e.script.description||"Nessuna descrizione"),t.xp6(1),t.Q6J("ngClass",e.script.hidden?"badge-red":"badge-green")("innerText",e.script.hidden?"Privato":"Pubblico"),t.xp6(1),t.Q6J("ngForOf",t.WLB(27,$t,e.script.faqLink,e.script.preview)),t.xp6(2),t.Q6J("ngIf",e.script.type===o.scriptType.FORUM||e.script.type===o.scriptType.ALL),t.xp6(1),t.Q6J("ngIf",e.script.type===o.scriptType.USER||e.script.type===o.scriptType.ALL),t.xp6(1),t.Q6J("ngClass",t.WLB(30,jt,e.stats.entities.length>0,0===e.stats.entities.length))("innerText",e.stats.entities.length),t.xp6(3),t.Q6J("ngClass",t.VKq(33,Xt,o.cachePendingId===e.script.scriptId))("tippyProps",t.VKq(35,te,i?"bottom":"top"))("disableOnTouchDevice",!0),t.xp6(2),t.Q6J("ngTemplateOutlet",l)("ngTemplateOutletContext",t.kEZ(37,ee,!(e.script.hidden||e.script.description.length&&e.script.preview&&e.script.faqLink),i,e.script.scriptId)),t.xp6(1),t.Q6J("ngClass",t.VKq(41,ie,o.deletionPending))("tippyProps",t.WLB(44,se,i?"bottom-end":"top-end",t.DdM(43,ne)))("disableOnTouchDevice",!0)("disableInstance",o.deletionPending),t.xp6(16),t.Q6J("routerLink",t.VKq(47,At,e.script.scriptId))}}function oe(r,s){if(1&r&&t.YNc(0,re,42,49,"li",24),2&r){const e=t.oxw(2);t.Q6J("ngForOf",e.scriptWithStats)}}function ae(r,s){if(1&r&&(t.YNc(0,Wt,3,0,"li",20),t.YNc(1,oe,1,1,"ng-template",null,21,t.W1O)),2&r){const e=t.MAs(2),i=t.oxw();t.Q6J("ngIf",0===i.scriptWithStats.length)("ngIfElse",e)}}const le=function(r){return{"edit-required text-danger":r}},ce=function(){return[42,10]},pe=function(r,s,e){return{placement:r,offset:s,theme:e}};function de(r,s){if(1&r&&(t.TgZ(0,"a",49)(1,"div",50),t._uU(2,"settings"),t.qZA()()),2&r){const e=s.$implicit,i=s.f,n=s.scriptId,o=t.oxw();t.Q6J("routerLink",t.VKq(5,At,n))("ngClass",t.VKq(7,le,e))("appTippy",e?o.tippySettingsAlertMessage:o.tippySettingsMessage)("tippyProps",t.kEZ(10,pe,i?"bottom-end":"top-end",t.DdM(9,ce),e?"popover":""))("disableOnTouchDevice",!0)}}const ue=function(r){return{"touch-device":r}};let he=(()=>{class r{constructor(e){this.toastService=e,this.scriptWithStats=[],this.loading=!0,this.deletionScriptEvent=new t.vpe,this.scriptType=E.AV,this.isTouch=v.eX,this.paths=ot.B2,this.tippySettingsAlertMessage="La descrizione, l'anteprima e la guida sono essenziali per comprendere il corretto funzionamento dello script e per metterlo in evidenza agli utenti. Clicca sull'icona per modificare le impostazioni dello script e accertati di aver inserito questi elementi!",this.tippySettingsMessage="Modifica le impostazioni",this.sortOption="title",this.sortValue=1,this.currentCacheScript={id:"0",name:""},this.currentDeletionScript={id:"0",name:""},this.deletionPending=!1,this.compareFns={title:(i,n,o)=>o*i.script.name.localeCompare(n.script.name),installations:(i,n,o)=>o*(i.stats.entities.length>n.stats.entities.length?1:-1),status:(i,n,o)=>o*(i.script.hidden&&!n.script.hidden?1:!i.script.hidden&&n.script.hidden?-1:0),guide:(i,n,o)=>o*(i.script.faqLink&&!n.script.faqLink?-1:!i.script.faqLink&&n.script.faqLink?1:0),preview:(i,n,o)=>o*(i.script.preview&&!n.script.preview?-1:!i.script.preview&&n.script.preview?1:0),type:(i,n,o)=>o*([E.AV.FORUM,E.AV.USER].includes(i.script.type)&&![E.AV.FORUM,E.AV.USER].includes(n.script.type)?-1:![E.AV.FORUM,E.AV.USER].includes(i.script.type)&&[E.AV.FORUM,E.AV.USER].includes(n.script.type)?1:0)}}ngOnInit(){}setSortOption(e){this.sortOption===e?this.sortValue=-this.sortValue:(this.sortOption=e,this.sortValue="installations"===e?-1:1),this.sortList(e)}sortList(e){this.compareFns.hasOwnProperty(e)&&this.scriptWithStats.sort((i,n)=>this.compareFns[e](i,n,this.sortValue))}cacheIconClick(e){void 0===this.cachePendingId?(this.currentCacheScript={id:e.script.scriptId,name:e.script.name},this.cacheModalRef.open()):this.toastService.advice(d.V.REQUEST_PENDING)}installationNumberClick(e){0!==e.stats.entities.length&&(this.currentInstallationScript=e,this.installationModalRef.open())}setCachePendingId(e){this.cachePendingId=e}deleteScript(e){this.deletionPending?this.toastService.advice(d.V.REQUEST_PENDING):e.script.childIdList.length>0?this.toastService.show({content:`Questo script \xe8 richiesto da altri script (ID <strong>${e.script.childIdList.join(", ")}</strong>).<br>Prima di cancellarlo, elimina le dipendenze!`,level:d.m.WARNING}):(this.currentDeletionScript={id:e.script.scriptId,name:e.script.name},this.deletionModalRef.open())}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(L.k))},r.\u0275cmp=t.Xpm({type:r,selectors:[["","app-script-dev-list",""]],viewQuery:function(e,i){if(1&e&&(t.Gf(bt,5),t.Gf(Jt,5),t.Gf(Nt,5)),2&e){let n;t.iGM(n=t.CRH())&&(i.cacheModalRef=n.first),t.iGM(n=t.CRH())&&(i.installationModalRef=n.first),t.iGM(n=t.CRH())&&(i.deletionModalRef=n.first)}},inputs:{scriptWithStats:"scriptWithStats",loading:"loading"},outputs:{deletionScriptEvent:"deletionScriptEvent"},attrs:Ft,decls:30,vars:16,consts:[[1,"list-unstyled","mb-0","position-relative",3,"ngClass"],[1,"header","bg-dark","text-light","text-uppercase","fw-bold","d-flex","d-md-grid","align-items-center","py-3"],[1,"d-none","d-xl-block"],[1,"title","w-100","sortable",3,"ngClass","click"],[1,"d-none","d-md-inline"],[1,"d-md-none"],[1,"d-none","d-md-block","sortable",3,"ngClass","click"],[1,"d-none","d-xxl-block","sortable",3,"ngClass","click"],[1,"d-none","d-xl-block","sortable",3,"ngClass","click"],["class","loader py-3",4,"ngIf","ngIfElse"],["content",""],["settingsIcon",""],[3,"scriptName","scriptId","cachePendingEvent"],["cacheModal",""],[3,"scriptWithStats"],["installationModal",""],[3,"scriptName","scriptId","deletionPendingEvent","deletionScriptEvent"],["deletionModal",""],[1,"loader","py-3"],["message","Recupero lista script"],["class","empty p-3",4,"ngIf","ngIfElse"],["list",""],[1,"empty","p-3"],[1,"alert","alert-primary","text-center","mb-0"],["class","item d-flex d-md-grid align-items-center position-relative",3,"ngClass",4,"ngFor","ngForOf"],[1,"item","d-flex","d-md-grid","align-items-center","position-relative",3,"ngClass"],[1,"d-none","d-xl-block","mx-auto",3,"innerText"],[1,"title","d-flex","flex-column","min-w-0","mw-100","me-auto","pe-md-0"],[1,"d-block","me-auto","fw-bold","text-truncate","mw-100",3,"routerLink","queryParams","innerText"],[1,"fs-sm","text-muted","text-truncate","mw-100",3,"innerText"],[1,"badge","flat-badge","mx-auto","d-none","d-md-flex",3,"ngClass","innerText"],["class","material-icons-outlined d-none d-xxl-block mx-auto",3,"ngClass","innerText",4,"ngFor","ngForOf"],[1,"mx-auto","d-none","d-md-block"],["class","badge flat-badge badge-blue",3,"innerText",4,"ngIf"],["class","badge flat-badge badge-indigo",3,"ngClass","innerText",4,"ngIf"],[1,"d-none","d-xl-block","mx-auto",3,"ngClass","innerText","click"],[1,"d-none","d-md-flex","align-items-center","justify-content-center","utilities"],["role","button","appTippy","Aggiorna la cache",1,"d-block","material-icons-outlined","me-2",3,"ngClass","tippyProps","disableOnTouchDevice","click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["role","button","appTippy","Cancella lo script",1,"d-block","material-icons-outlined","ms-2",3,"ngClass","tippyProps","disableOnTouchDevice","disableInstance","click"],["ngbDropdown","","placement","left auto","display","dynamic",1,"d-md-none","dropdown-no-caret","utility-dropdown"],["ngbDropdownToggle","",1,"d-block","material-icons","cursor-pointer"],["ngbDropdownMenu","",1,"dropdown-material-icons"],["role","button",1,"dropdown-item","d-flex","align-items-center",3,"click"],[1,"material-icons-outlined","d-block"],[1,"dropdown-item","d-flex","align-items-center",3,"routerLink"],[1,"material-icons-outlined","d-none","d-xxl-block","mx-auto",3,"ngClass","innerText"],[1,"badge","flat-badge","badge-blue",3,"innerText"],[1,"badge","flat-badge","badge-indigo",3,"ngClass","innerText"],[1,"d-block",3,"routerLink","ngClass","appTippy","tippyProps","disableOnTouchDevice"],[1,"d-block","material-icons-outlined","m-icon"]],template:function(e,i){if(1&e&&(t.TgZ(0,"ul",0)(1,"li",1)(2,"div",2),t._uU(3,"#"),t.qZA(),t.TgZ(4,"div",3),t.NdJ("click",function(){return i.setSortOption("title")}),t.TgZ(5,"span",4),t._uU(6,"Titolo"),t.qZA(),t.TgZ(7,"span",5),t._uU(8,"Lista script"),t.qZA()(),t.TgZ(9,"div",6),t.NdJ("click",function(){return i.setSortOption("status")}),t._uU(10," Status "),t.qZA(),t.TgZ(11,"div",7),t.NdJ("click",function(){return i.setSortOption("guide")}),t._uU(12," Guida "),t.qZA(),t.TgZ(13,"div",7),t.NdJ("click",function(){return i.setSortOption("preview")}),t._uU(14," Preview "),t.qZA(),t.TgZ(15,"div",6),t.NdJ("click",function(){return i.setSortOption("type")}),t._uU(16," Tipo "),t.qZA(),t.TgZ(17,"div",8),t.NdJ("click",function(){return i.setSortOption("installations")}),t._uU(18," Uso "),t.qZA()(),t.YNc(19,Qt,2,0,"li",9),t.YNc(20,ae,3,2,"ng-template",null,10,t.W1O),t.qZA(),t.YNc(22,de,3,14,"ng-template",null,11,t.W1O),t.TgZ(24,"app-script-dev-cache",12,13),t.NdJ("cachePendingEvent",function(o){return i.setCachePendingId(o)}),t.qZA(),t._UZ(26,"app-script-dev-stats-details",14,15),t.TgZ(28,"app-script-dev-deletion",16,17),t.NdJ("deletionPendingEvent",function(o){return i.deletionPending=void 0!==o})("deletionScriptEvent",function(){return i.deletionScriptEvent.emit(!0)}),t.qZA()),2&e){const n=t.MAs(21);t.Q6J("ngClass",t.VKq(14,ue,i.isTouch)),t.xp6(4),t.Q6J("ngClass","title"===i.sortOption?i.sortValue>0?"asc":"desc":""),t.xp6(5),t.Q6J("ngClass","status"===i.sortOption?i.sortValue>0?"asc":"desc":""),t.xp6(2),t.Q6J("ngClass","guide"===i.sortOption?i.sortValue>0?"asc":"desc":""),t.xp6(2),t.Q6J("ngClass","preview"===i.sortOption?i.sortValue>0?"asc":"desc":""),t.xp6(2),t.Q6J("ngClass","type"===i.sortOption?i.sortValue>0?"asc":"desc":""),t.xp6(2),t.Q6J("ngClass","installations"===i.sortOption?i.sortValue>0?"asc":"desc":""),t.xp6(2),t.Q6J("ngIf",i.loading)("ngIfElse",n),t.xp6(5),t.Q6J("scriptName",i.currentCacheScript.name)("scriptId",i.currentCacheScript.id),t.xp6(2),t.Q6J("scriptWithStats",i.currentInstallationScript),t.xp6(2),t.Q6J("scriptName",i.currentDeletionScript.name)("scriptId",i.currentDeletionScript.id)}},dependencies:[Z.mk,Z.sg,Z.O5,Z.tP,V.R,H.jt,H.iD,H.Vi,K.rH,c.s,_.F,O.d,W.$],styles:['ul[_ngcontent-%COMP%]:not(.touch-device)   li[_ngcontent-%COMP%]:not(.header):not(.loader):not(.empty){background-color:#fff}ul[_ngcontent-%COMP%]:not(.touch-device)   li[_ngcontent-%COMP%]:not(.header):not(.loader):not(.empty):hover{background-color:rgb(var(--ei-light-rgb))}ul[_ngcontent-%COMP%]:not(.touch-device)   .utilities[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(.edit-required):not(.cache-pending):not(.del-pending){opacity:.5;transition:opacity .2s}ul[_ngcontent-%COMP%]:not(.touch-device)   .utilities[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(.edit-required):not(.cache-pending):not(.del-pending):hover{opacity:1}.utilities[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(.edit-required){color:inherit}li[_ngcontent-%COMP%]:not(.loader):not(.empty){padding-left:.75rem;padding-right:.5rem}li[_ngcontent-%COMP%]:not(.loader):not(.empty):not(.header)   .title[_ngcontent-%COMP%]{padding-top:1.25rem;padding-bottom:1.25rem;padding-right:.5rem}.sortable[_ngcontent-%COMP%]{position:relative;cursor:pointer}.sortable[_ngcontent-%COMP%]:before, .sortable[_ngcontent-%COMP%]:after{transition:opacity .2s;position:absolute;right:0;width:0;height:0;content:"";opacity:.4;border-right:4px solid transparent;border-left:4px solid transparent}.sortable[_ngcontent-%COMP%]:before{bottom:4px;border-top:4px solid #fff}.sortable[_ngcontent-%COMP%]:after{top:4px;border-bottom:4px solid #fff}.sortable.asc[_ngcontent-%COMP%]:after{opacity:1}.sortable.desc[_ngcontent-%COMP%]:before{opacity:1}.sortable[_ngcontent-%COMP%]:not(.asc):not(.desc):hover:before, .sortable[_ngcontent-%COMP%]:not(.asc):not(.desc):hover:after{opacity:.6}@media (min-width: 576px){li[_ngcontent-%COMP%]:not(.loader){padding-left:1rem;padding-right:.75rem}}@media (min-width: 768px){li[_ngcontent-%COMP%]:not(.loader){grid-template-columns:3fr repeat(3,1fr);padding-left:4%}li[_ngcontent-%COMP%]:not(.loader).header > div[_ngcontent-%COMP%]:not(.title){text-align:center}}@media (min-width: 1200px){li[_ngcontent-%COMP%]:not(.loader){grid-template-columns:8% 40% repeat(4,13%);padding-left:0;padding-right:0}}@media (min-width: 1400px){li[_ngcontent-%COMP%]:not(.loader){grid-template-columns:5% 41% repeat(6,9%)}}.edit-required[_ngcontent-%COMP%]   .m-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rotation 2s infinite}.cache-pending[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fullRotation 1s linear infinite}.del-pending[_ngcontent-%COMP%], .del-pending[_ngcontent-%COMP%]:hover{opacity:.1!important;cursor:initial!important}@keyframes _ngcontent-%COMP%_rotation{50%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_fullRotation{0%{transform:rotate(0)}to{transform:rotate(-360deg)}}']}),r})();const me=["app-script-dev-stats",""];let fe=(()=>{class r{constructor(){this.scriptCreated=0,this.totalInstall=0,this.userInstall=0,this.forumInstall=0,this.countOptions={separator:"."}}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["","app-script-dev-stats",""]],inputs:{scriptCreated:"scriptCreated",totalInstall:"totalInstall",userInstall:"userInstall",forumInstall:"forumInstall"},attrs:me,decls:32,vars:11,consts:[[1,"flat-container","d-flex","align-items-center"],[1,"fw-normal","lh-1","text-success",3,"countUp","reanimateOnClick"],[1,"text-muted","fs-xs","text-uppercase"],[1,"d-block","material-icons-outlined","text-success"],[1,"fw-normal","lh-1","text-primary",3,"countUp","options","reanimateOnClick"],[1,"d-block","material-icons","text-primary"],[1,"fw-normal","lh-1","text-indigo",3,"countUp","options","reanimateOnClick"],[1,"d-block","material-icons","text-indigo"],[1,"fw-normal","lh-1","text-danger",3,"countUp","options","reanimateOnClick"],[1,"d-block","material-icons-outlined","text-danger"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div")(2,"h2",1),t._uU(3," 0 "),t.qZA(),t.TgZ(4,"div",2),t._uU(5,"script creati"),t.qZA()(),t.TgZ(6,"div",3),t._uU(7," integration_instructions "),t.qZA()(),t.TgZ(8,"div",0)(9,"div")(10,"h2",4),t._uU(11," 0 "),t.qZA(),t.TgZ(12,"div",2),t._uU(13,"installazioni"),t.qZA()(),t.TgZ(14,"div",5),t._uU(15,"speed"),t.qZA()(),t.TgZ(16,"div",0)(17,"div")(18,"h2",6),t._uU(19," 0 "),t.qZA(),t.TgZ(20,"div",2),t._uU(21,"forum unici"),t.qZA()(),t.TgZ(22,"div",7),t._uU(23,"public"),t.qZA()(),t.TgZ(24,"div",0)(25,"div")(26,"h2",8),t._uU(27," 0 "),t.qZA(),t.TgZ(28,"div",2),t._uU(29,"utenti unici"),t.qZA()(),t.TgZ(30,"div",9),t._uU(31,"people_alt"),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("countUp",i.scriptCreated)("reanimateOnClick",!1),t.xp6(8),t.Q6J("countUp",i.totalInstall)("options",i.countOptions)("reanimateOnClick",!1),t.xp6(8),t.Q6J("countUp",i.forumInstall)("options",i.countOptions)("reanimateOnClick",!1),t.xp6(8),t.Q6J("countUp",i.userInstall)("options",i.countOptions)("reanimateOnClick",!1))},dependencies:[A],styles:[".flat-container[_ngcontent-%COMP%]{padding:2rem}.flat-container[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{letter-spacing:.2em}.flat-container[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%], .flat-container[_ngcontent-%COMP%]   .material-icons-outlined[_ngcontent-%COMP%]{font-size:35px;margin-left:auto}"]}),r})(),ge=(()=>{class r{constructor(e,i,n,o,l,h){this.globalsService=e,this.scriptDevService=i,this.scriptListService=n,this.breakpointObserver=o,this.scriptFilterService=l,this.viewportScroller=h,this.scriptWithStatsList=[],this.fullScriptWithStatsList=[],this.totalInstall=0,this.userInstall=[],this.forumInstall=[],this.lessThanMediumScreenSize=!1,this.scriptPermissions={},this.scriptFullList=[],this.loading=!0;const m=this.globalsService.credentials;if(!m)throw new Error("Missing credentials!");this.ffuid=m.user.ffuid,this.lessThanMediumScreenSize=this.breakpointObserver.isMatched([Q.u3.XSmall,Q.u3.Small])}ngOnInit(){var e=this;return(0,k.Z)(function*(){e.breakpointSubscription=e.breakpointObserver.observe([Q.u3.XSmall,Q.u3.Small]).subscribe(i=>{e.lessThanMediumScreenSize=i.matches}),yield e.setData()})()}setData(){var e=this;return(0,k.Z)(function*(){e.loading=!0;const[i,n]=yield Promise.all([e.scriptListService.getScriptsByAuthor(e.ffuid),e.scriptDevService.getStats()]);[e.scriptPermissions,e.scriptFullList]=yield Promise.all([e.scriptListService.getScriptPermissions(),e.scriptListService.getAllScripts()]);let o=[],l=0,h=[],m=[];i.forEach(g=>{let f=n.filter(x=>x.scriptId===g.scriptId)[0],u=[],C=[];f||(f={scriptId:g.scriptId,entities:[]}),l+=f.entities.length,f.entities.forEach(x=>{x.targetType===E.D7.USER?(C.push(x.targetId),h.includes(x.targetId)||h.push(x.targetId)):(u.push(x.targetId),m.includes(x.targetId)||m.push(x.targetId))}),o.push({script:g,stats:(0,rt.Z)((0,rt.Z)({},f),{forums:u,users:C})})}),e.scriptWithStatsList=e.fullScriptWithStatsList=o.sort((g,f)=>g.script.name>f.script.name?1:f.script.name>g.script.name?-1:0),e.totalInstall=l,e.userInstall=h,e.forumInstall=m,e.loading=!1})()}filterList(e){if(0===e.length)return void(this.scriptWithStatsList=this.fullScriptWithStatsList);let i=this.scriptFilterService.createKeywordsRegex(e);this.scriptWithStatsList=this.fullScriptWithStatsList.filter(n=>n.script.name.match(i)||n.script.description.match(i))}refresh(){var e=this;return(0,k.Z)(function*(){e.viewportScroller.scrollToPosition([0,0]),yield e.setData()})()}ngOnDestroy(){var e;null===(e=this.breakpointSubscription)||void 0===e||e.unsubscribe()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(dt.d),t.Y36(ut.N),t.Y36(ht.o),t.Y36(Q.Yg),t.Y36(mt.v),t.Y36(Z.EM))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-script-dev"]],decls:5,vars:11,consts:[["pageTitle","Sviluppo script"],["app-script-dev-stats","",1,"stats","d-grid",3,"scriptCreated","totalInstall","userInstall","forumInstall"],[1,"page-container"],["app-script-dev-info","",1,"info","d-grid",3,"scriptWithStats","scriptPermissions","scriptList","smallScreen","loading","filterEvent"],["app-script-dev-list","",1,"list","flat-container","overflow-hidden",3,"scriptWithStats","loading","deletionScriptEvent"]],template:function(e,i){1&e&&(t._UZ(0,"app-breadcrumb",0)(1,"div",1),t.TgZ(2,"div",2)(3,"div",3),t.NdJ("filterEvent",function(o){return i.filterList(o)}),t.qZA(),t.TgZ(4,"div",4),t.NdJ("deletionScriptEvent",function(){return i.refresh()}),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("scriptCreated",i.fullScriptWithStatsList.length)("totalInstall",i.totalInstall)("userInstall",i.userInstall.length)("forumInstall",i.forumInstall.length),t.xp6(2),t.Q6J("scriptWithStats",i.fullScriptWithStatsList)("scriptPermissions",i.scriptPermissions)("scriptList",i.scriptFullList)("smallScreen",i.lessThanMediumScreenSize)("loading",i.loading),t.xp6(1),t.Q6J("scriptWithStats",i.scriptWithStatsList)("loading",i.loading))},dependencies:[ft.L,Lt,he,fe],styles:[".page-container[_ngcontent-%COMP%], .list[_ngcontent-%COMP%]{margin-top:1rem}.stats[_ngcontent-%COMP%], .info[_ngcontent-%COMP%]{row-gap:1rem}@media (min-width: 768px){.stats[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);column-gap:1rem}}@media (min-width: 960px){.page-container[_ngcontent-%COMP%], .list[_ngcontent-%COMP%]{margin-top:1.5rem}.stats[_ngcontent-%COMP%], .info[_ngcontent-%COMP%]{column-gap:1.5rem;row-gap:1.5rem}}@media (min-width: 1400px){.stats[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}.info[_ngcontent-%COMP%]{grid-template-columns:3fr 2fr}}"]}),r})();var _e=p(232),ve=p(8934),Ce=p(3038),xe=p(7230),ye=p(7963),Se=p(591),Te=p(4027),Me=p(5230),Et=p(8783),P=p(4404),Oe=p(4311),De=p(7481),tt=p(6695),G=p(4301),at=p(3066),Pt=p(3825),Ie=p(1240);function Vt(r,s,e){var i=Ie.qW.createCanvas(),n=s.getWidth(),o=s.getHeight(),l=i.style;return l&&(l.position="absolute",l.left="0",l.top="0",l.width=n+"px",l.height=o+"px",i.setAttribute("data-zr-dom-id",r)),i.width=n*e,i.height=o*e,i}const Zt=function(r){function s(e,i,n){var l,o=r.call(this)||this;o.motionBlur=!1,o.lastFrameAlpha=.7,o.dpr=1,o.virtual=!1,o.config={},o.incremental=!1,o.zlevel=0,o.maxRepaintRectCount=5,o.__dirty=!0,o.__firstTimePaint=!0,o.__used=!1,o.__drawIndex=0,o.__startIndex=0,o.__endIndex=0,o.__prevStartIndex=null,o.__prevEndIndex=null,n=n||Et.KL,"string"==typeof e?l=Vt(e,i,n):P.isObject(e)&&(e=(l=e).id),o.id=e,o.dom=l;var h=l.style;return h&&(P.disableUserSelect(l),l.onselectstart=function(){return!1},h.padding="0",h.margin="0",h.borderWidth="0"),o.painter=i,o.dpr=n,o}return(0,Oe.ZT)(s,r),s.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},s.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},s.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},s.prototype.setUnpainted=function(){this.__firstTimePaint=!0},s.prototype.createBackBuffer=function(){var e=this.dpr;this.domBack=Vt("back-"+this.id,this.painter,e),this.ctxBack=this.domBack.getContext("2d"),1!==e&&this.ctxBack.scale(e,e)},s.prototype.createRepaintRects=function(e,i,n,o){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var y,l=[],h=this.maxRepaintRectCount,m=!1,g=new at.Z(0,0,0,0);function f(S){if(S.isFinite()&&!S.isZero())if(0===l.length)(b=new at.Z(0,0,0,0)).copy(S),l.push(b);else{for(var J=!1,ct=1/0,et=0,N=0;N<l.length;++N){var w=l[N];if(w.intersect(S)){var q=new at.Z(0,0,0,0);q.copy(w),q.union(S),l[N]=q,J=!0;break}if(m){g.copy(S),g.union(w);var pt=g.width*g.height-S.width*S.height-w.width*w.height;pt<ct&&(ct=pt,et=N)}}var b;m&&(l[et].union(S),J=!0),J||((b=new at.Z(0,0,0,0)).copy(S),l.push(b)),m||(m=l.length>=h)}}for(var u=this.__startIndex;u<this.__endIndex;++u)if(C=e[u]){var x=C.shouldBePainted(n,o,!0,!0);(D=C.__isRendered&&(C.__dirty&Pt.YV||!x)?C.getPrevPaintRect():null)&&f(D);var T=x&&(C.__dirty&Pt.YV||!C.__isRendered)?C.getPaintRect():null;T&&f(T)}for(u=this.__prevStartIndex;u<this.__prevEndIndex;++u){var C,D;x=(C=i[u]).shouldBePainted(n,o,!0,!0),!C||x&&C.__zr||!C.__isRendered||(D=C.getPrevPaintRect())&&f(D)}do{for(y=!1,u=0;u<l.length;)if(l[u].isZero())l.splice(u,1);else{for(var M=u+1;M<l.length;)l[u].intersect(l[M])?(y=!0,l[u].union(l[M]),l.splice(M,1)):M++;u++}}while(y);return this._paintRects=l,l},s.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},s.prototype.resize=function(e,i){var n=this.dpr,o=this.dom,l=o.style,h=this.domBack;l&&(l.width=e+"px",l.height=i+"px"),o.width=e*n,o.height=i*n,h&&(h.width=e*n,h.height=i*n,1!==n&&this.ctxBack.scale(n,n))},s.prototype.clear=function(e,i,n){var o=this.dom,l=this.ctx,h=o.width,m=o.height;i=i||this.clearColor;var g=this.motionBlur&&!e,f=this.lastFrameAlpha,u=this.dpr,C=this;g&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(o,0,0,h/u,m/u));var x=this.domBack;function D(T,y,M,S){if(l.clearRect(T,y,M,S),i&&"transparent"!==i){var b=void 0;P.isGradientObject(i)?(b=(i.global||i.__width===M&&i.__height===S)&&i.__canvasGradient||(0,tt.ZF)(l,i,{x:0,y:0,width:M,height:S}),i.__canvasGradient=b,i.__width=M,i.__height=S):P.isImagePatternObject(i)&&(i.scaleX=i.scaleX||u,i.scaleY=i.scaleY||u,b=(0,G.RZ)(l,i,{dirty:function(){C.setUnpainted(),C.__painter.refresh()}})),l.save(),l.fillStyle=b||i,l.fillRect(T,y,M,S),l.restore()}g&&(l.save(),l.globalAlpha=f,l.drawImage(x,T,y,M,S),l.restore())}!n||g?D(0,0,h,m):n.length&&P.each(n,function(T){D(T.x*u,T.y*u,T.width*u,T.height*u)})},s}(De.Z);var be=p(5962),Pe=p(8519),z=314159;const Ve=function(){function r(s,e,i,n){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var o=!s.nodeName||"CANVAS"===s.nodeName.toUpperCase();this._opts=i=P.extend({},i||{}),this.dpr=i.devicePixelRatio||Et.KL,this._singleCanvas=o,this.root=s,s.style&&(P.disableUserSelect(s),s.innerHTML=""),this.storage=e;var h=this._zlevelList;this._prevDisplayList=[];var m=this._layers;if(o){var f=s,u=f.width,C=f.height;null!=i.width&&(u=i.width),null!=i.height&&(C=i.height),this.dpr=i.devicePixelRatio||1,f.width=u*this.dpr,f.height=C*this.dpr,this._width=u,this._height=C;var x=new Zt(f,this,this.dpr);x.__builtin__=!0,x.initContext(),m[z]=x,x.zlevel=z,h.push(z),this._domRoot=s}else{this._width=(0,tt.ap)(s,0,i),this._height=(0,tt.ap)(s,1,i);var g=this._domRoot=function Ae(r,s){var e=document.createElement("div");return e.style.cssText=["position:relative","width:"+r+"px","height:"+s+"px","padding:0","margin:0","border-width:0"].join(";")+";",e}(this._width,this._height);s.appendChild(g)}}return r.prototype.getType=function(){return"canvas"},r.prototype.isSingleCanvas=function(){return this._singleCanvas},r.prototype.getViewportRoot=function(){return this._domRoot},r.prototype.getViewportRootOffset=function(){var s=this.getViewportRoot();if(s)return{offsetLeft:s.offsetLeft||0,offsetTop:s.offsetTop||0}},r.prototype.refresh=function(s){var e=this.storage.getDisplayList(!0),i=this._prevDisplayList,n=this._zlevelList;this._redrawId=Math.random(),this._paintList(e,i,s,this._redrawId);for(var o=0;o<n.length;o++){var h=this._layers[n[o]];!h.__builtin__&&h.refresh&&h.refresh(0===o?this._backgroundColor:null)}return this._opts.useDirtyRect&&(this._prevDisplayList=e.slice()),this},r.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},r.prototype._paintHoverList=function(s){var e=s.length,i=this._hoverlayer;if(i&&i.clear(),e){for(var o,n={inHover:!0,viewWidth:this._width,viewHeight:this._height},l=0;l<e;l++){var h=s[l];h.__inHover&&(i||(i=this._hoverlayer=this.getLayer(1e5)),o||(o=i.ctx).save(),(0,G.Dm)(o,h,n,l===e-1))}o&&o.restore()}},r.prototype.getHoverLayer=function(){return this.getLayer(1e5)},r.prototype.paintOne=function(s,e){(0,G.RV)(s,e)},r.prototype._paintList=function(s,e,i,n){if(this._redrawId===n){i=i||!1,this._updateLayerStatus(s);var o=this._doPaintList(s,e,i),l=o.finished,h=o.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),h&&this._paintHoverList(s),l)this.eachLayer(function(g){g.afterBrush&&g.afterBrush()});else{var m=this;(0,be.Z)(function(){m._paintList(s,e,i,n)})}}},r.prototype._compositeManually=function(){var s=this.getLayer(z).ctx,e=this._domRoot.width,i=this._domRoot.height;s.clearRect(0,0,e,i),this.eachBuiltinLayer(function(n){n.virtual&&s.drawImage(n.dom,0,0,e,i)})},r.prototype._doPaintList=function(s,e,i){for(var n=this,o=[],l=this._opts.useDirtyRect,h=0;h<this._zlevelList.length;h++){var g=this._layers[this._zlevelList[h]];g.__builtin__&&g!==this._hoverlayer&&(g.__dirty||i)&&o.push(g)}for(var f=!0,u=!1,C=function(T){var y=o[T],M=y.ctx,S=l&&y.createRepaintRects(s,e,x._width,x._height),b=i?y.__startIndex:y.__drawIndex,J=!i&&y.incremental&&Date.now,ct=J&&Date.now(),et=y.zlevel===x._zlevelList[0]?x._backgroundColor:null;if(y.__startIndex===y.__endIndex)y.clear(!1,et,S);else if(b===y.__startIndex){var N=s[b];(!N.incremental||!N.notClear||i)&&y.clear(!1,et,S)}-1===b&&(console.error("For some unknown reason. drawIndex is -1"),b=y.__startIndex);var w,q=function(pt){var Ut={inHover:!1,allClipped:!1,prevEl:null,viewWidth:n._width,viewHeight:n._height};for(w=b;w<y.__endIndex;w++){var Rt=s[w];if(Rt.__inHover&&(u=!0),n._doPaintEl(Rt,y,l,pt,Ut,w===y.__endIndex-1),J&&Date.now()-ct>15)break}Ut.prevElClipPaths&&M.restore()};if(S)if(0===S.length)w=y.__endIndex;else for(var $=x.dpr,it=0;it<S.length;++it){var B=S[it];M.save(),M.beginPath(),M.rect(B.x*$,B.y*$,B.width*$,B.height*$),M.clip(),q(B),M.restore()}else M.save(),q(),M.restore();y.__drawIndex=w,y.__drawIndex<y.__endIndex&&(f=!1)},x=this,D=0;D<o.length;D++)C(D);return Pe.Z.wxa&&P.each(this._layers,function(T){T&&T.ctx&&T.ctx.draw&&T.ctx.draw()}),{finished:f,needsRefreshHover:u}},r.prototype._doPaintEl=function(s,e,i,n,o,l){var h=e.ctx;if(i){var m=s.getPaintRect();(!n||m&&m.intersect(n))&&((0,G.Dm)(h,s,o,l),s.setPrevPaintRect(m))}else(0,G.Dm)(h,s,o,l)},r.prototype.getLayer=function(s,e){this._singleCanvas&&!this._needsManuallyCompositing&&(s=z);var i=this._layers[s];return i||((i=new Zt("zr_"+s,this,this.dpr)).zlevel=s,i.__builtin__=!0,this._layerConfig[s]?P.merge(i,this._layerConfig[s],!0):this._layerConfig[s-.01]&&P.merge(i,this._layerConfig[s-.01],!0),e&&(i.virtual=e),this.insertLayer(s,i),i.initContext()),i},r.prototype.insertLayer=function(s,e){var i=this._layers,n=this._zlevelList,o=n.length,l=this._domRoot,h=null,m=-1;if(!i[s]&&function we(r){return!(!r||!r.__builtin__&&("function"!=typeof r.resize||"function"!=typeof r.refresh))}(e)){if(o>0&&s>n[0]){for(m=0;m<o-1&&!(n[m]<s&&n[m+1]>s);m++);h=i[n[m]]}if(n.splice(m+1,0,s),i[s]=e,!e.virtual)if(h){var g=h.dom;g.nextSibling?l.insertBefore(e.dom,g.nextSibling):l.appendChild(e.dom)}else l.firstChild?l.insertBefore(e.dom,l.firstChild):l.appendChild(e.dom);e.__painter=this}},r.prototype.eachLayer=function(s,e){for(var i=this._zlevelList,n=0;n<i.length;n++){var o=i[n];s.call(e,this._layers[o],o)}},r.prototype.eachBuiltinLayer=function(s,e){for(var i=this._zlevelList,n=0;n<i.length;n++){var o=i[n],l=this._layers[o];l.__builtin__&&s.call(e,l,o)}},r.prototype.eachOtherLayer=function(s,e){for(var i=this._zlevelList,n=0;n<i.length;n++){var o=i[n],l=this._layers[o];l.__builtin__||s.call(e,l,o)}},r.prototype.getLayers=function(){return this._layers},r.prototype._updateLayerStatus=function(s){function e(u){o&&(o.__endIndex!==u&&(o.__dirty=!0),o.__endIndex=u)}if(this.eachBuiltinLayer(function(u,C){u.__dirty=u.__used=!1}),this._singleCanvas)for(var i=1;i<s.length;i++)if((n=s[i]).zlevel!==s[i-1].zlevel||n.incremental){this._needsManuallyCompositing=!0;break}var h,m,o=null,l=0;for(m=0;m<s.length;m++){var n,g=(n=s[m]).zlevel,f=void 0;h!==g&&(h=g,l=0),n.incremental?((f=this.getLayer(g+.001,this._needsManuallyCompositing)).incremental=!0,l=1):f=this.getLayer(g+(l>0?.01:0),this._needsManuallyCompositing),f.__builtin__||P.logError("ZLevel "+g+" has been used by unkown layer "+f.id),f!==o&&(f.__used=!0,f.__startIndex!==m&&(f.__dirty=!0),f.__startIndex=m,f.__drawIndex=f.incremental?-1:m,e(m),o=f),n.__dirty&Pt.YV&&!n.__inHover&&(f.__dirty=!0,f.incremental&&f.__drawIndex<0&&(f.__drawIndex=m))}e(m),this.eachBuiltinLayer(function(u,C){!u.__used&&u.getElementCount()>0&&(u.__dirty=!0,u.__startIndex=u.__endIndex=u.__drawIndex=0),u.__dirty&&u.__drawIndex<0&&(u.__drawIndex=u.__startIndex)})},r.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},r.prototype._clearLayer=function(s){s.clear()},r.prototype.setBackgroundColor=function(s){this._backgroundColor=s,P.each(this._layers,function(e){e.setUnpainted()})},r.prototype.configLayer=function(s,e){if(e){var i=this._layerConfig;i[s]?P.merge(i[s],e,!0):i[s]=e;for(var n=0;n<this._zlevelList.length;n++){var o=this._zlevelList[n];o!==s&&o!==s+.01||P.merge(this._layers[o],i[s],!0)}}},r.prototype.delLayer=function(s){var e=this._layers,i=this._zlevelList,n=e[s];n&&(n.dom.parentNode.removeChild(n.dom),delete e[s],i.splice(P.indexOf(i,s),1))},r.prototype.resize=function(s,e){if(this._domRoot.style){var i=this._domRoot;i.style.display="none";var n=this._opts,o=this.root;if(null!=s&&(n.width=s),null!=e&&(n.height=e),s=(0,tt.ap)(o,0,n),e=(0,tt.ap)(o,1,n),i.style.display="",this._width!==s||e!==this._height){for(var l in i.style.width=s+"px",i.style.height=e+"px",this._layers)this._layers.hasOwnProperty(l)&&this._layers[l].resize(s,e);this.refresh(!0)}this._width=s,this._height=e}else{if(null==s||null==e)return;this._width=s,this._height=e,this.getLayer(z).resize(s,e)}return this},r.prototype.clearLayer=function(s){var e=this._layers[s];e&&e.clear()},r.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},r.prototype.getRenderedCanvas=function(s){if(this._singleCanvas&&!this._compositeManually)return this._layers[z].dom;var e=new Zt("image",this,(s=s||{}).pixelRatio||this.dpr);e.initContext(),e.clear(!1,s.backgroundColor||this._backgroundColor);var i=e.ctx;if(s.pixelRatio<=this.dpr){this.refresh();var n=e.dom.width,o=e.dom.height;this.eachLayer(function(u){u.__builtin__?i.drawImage(u.dom,0,0,n,o):u.renderToCanvas&&(i.save(),u.renderToCanvas(i),i.restore())})}else for(var l={inHover:!1,viewWidth:this._width,viewHeight:this._height},h=this.storage.getDisplayList(!0),m=0,g=h.length;m<g;m++)(0,G.Dm)(i,h[m],l,m===g-1);return e.dom},r.prototype.getWidth=function(){return this._width},r.prototype.getHeight=function(){return this._height},r}();xe.D([Te.N,Me.N,Se.N,function ke(r){r.registerPainter("canvas",Ve)}]);const Ue=[{path:"",component:ge},{path:"settings",loadChildren:()=>Promise.all([p.e(835),p.e(592),p.e(104)]).then(p.bind(p,7104)).then(r=>r.ScriptDevSettingsModule),data:{title:"Settings"}}];let Re=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[F.w,Z.ez,j,I.u5,X.q,R.z,H.XC,nt.Ns.forRoot({echarts:ye}),K.Bz.forChild(Ue),st.U,_e.a,ve.a,Ce.G]}),r})()}}]);