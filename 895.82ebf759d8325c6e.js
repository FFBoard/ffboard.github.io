"use strict";(self.webpackChunkpages=self.webpackChunkpages||[]).push([[895],{7429:(ee,G,h)=>{h.d(G,{d:()=>U});var y=h(9212),Q=h(9300);let g=(()=>{var V;class j{constructor(){this.allowedProps={$ref:{validator:this.isString},anyOf:{validator:this.validateAnyOf},default:{validator:this.isNestedOfPrimitives},definitions:null,description:null,enum:{validator:this.validateEnum},items:{child:"allProps"},maximum:null,maxItems:null,maxLength:null,minimum:null,minItems:null,minLength:null,multipleOf:null,oneOf:{validator:this.validateOneOf},properties:null,required:{validator:this.validateRequired},title:null,type:{validator:this.isNestedOfPrimitives},uniqueItems:null,widget:{child:{formlyConfig:{child:{props:{child:{placeholder:{validator:this.isString},multiple:{validator:this.isBoolean},pattern:{validator:this.isString},type:{validator:function(a){return"hidden"===a}},minLength:{validator:this.isNumber},maxLength:{validator:this.isNumber},rows:{validator:this.isNumber},keepGroupsWithoutId:{validator:this.isBoolean},fieldsetTemplate:{validator:this.isBoolean},startDate:{child:{year:null,month:null,day:null}},endDate:{child:{year:null,month:null,day:null}},minDate:{child:{year:null,month:null,day:null}},maxDate:{child:{year:null,month:null,day:null}},selectDomain:{validator:this.isBoolean},resetButton:{validator:this.isBoolean},height:{validator:this.isString}}},type:{validator:function(a){return"radio"===a}}}}}}},this.fieldListKeys=["properties","definitions"]}validateSchema(a){this.isObject(a)&&((!(0,Q.o8)(a,"type")||!(0,Q.o8)(a,"properties")||"object"!==a.type)&&(a.type="object",a.properties={}),this.validate(a))}validate(a,x){x||(x=this.allowedProps);for(const[p,S]of Object.entries(a))if((0,Q.o8)(x,p)){if((0,Q.o8)(x[p]||{},"validator"))x[p].validator.call(this,S)||delete a[p];else if(this.fieldListKeys.includes(p))for(const r of Object.keys(a[p]))this.validate(a[p][r]);else if(!this.isPrimitive(S)){if(!(0,Q.o8)(x[p]||{},"child")||!this.isObject(S)){delete a[p];continue}this.validate(a[p],"allProps"===x[p].child?this.allowedProps:x[p].child)}}else delete a[p]}isObject(a){return null!=a&&"object"==typeof a&&!Array.isArray(a)}isPrimitive(a){return this.isString(a)||this.isNumber(a)||this.isBoolean(a)||null==a}isString(a){return"string"==typeof a}isBoolean(a){return"boolean"==typeof a}isNumber(a){return"number"==typeof a}validateRequired(a){if(!Array.isArray(a))return!1;for(const x of a)if(!this.isString(x))return!1;return!0}validateEnum(a){if(!Array.isArray(a))return!1;for(const x of a)if(!this.isString(x)&&!this.isNumber(x))return!1;return!0}validateOneOf(a){if(Array.isArray(a)&&(0,Q.o8)(a[0]||{},"const")){for(const x of a){if(!this.isObject(x))return!1;this.validate(x,{const:null,title:null})}return!0}return this.validateAnyOf(a)}validateAnyOf(a){if(!Array.isArray(a))return!1;for(const x of a){if(!this.isObject(x))return!1;this.validate(x)}return!0}isNestedOfPrimitives(a){if(this.isPrimitive(a))return!0;if(Array.isArray(a)||this.isObject(a)){for(const x of Object.values(a))if(!this.isNestedOfPrimitives(x))return!1;return!0}return!1}}return(V=j).\u0275fac=function(a){return new(a||V)},V.\u0275prov=y.Yz7({token:V,factory:V.\u0275fac,providedIn:"root"}),j})();var w=h(6223),e=h(1993),P=h(5661),q=h(336),R=h(5545);const $=["app-custom-form",""],B=[[["","buttons",""]]],L=["[buttons]"];let U=(()=>{var V;class j{constructor(a,x,p,S){this.formlyJsonschema=a,this.customFormSchemaService=x,this.toastService=p,this.destroyRef=S,this.model={},this.validateSchema=!1,this.enableModelChangeEvent=!1,this.defaultModel={},this.showFieldValidationOnInit=!1,this.cancelEvent=new y.vpe,this.submitEvent=new y.vpe,this.validityChangeEvent=new y.vpe,this.modelChangeEvent=new y.vpe,this.form=new w.nJ({}),this.fields=[],this.options={},this.isFormCurrentlyValid=!0}ngAfterViewInit(){this.validityChangeEvent.emit(this.isFormCurrentlyValid=this.form.valid)}ngOnInit(){this.createFields(),this.form.statusChanges.pipe((0,e.sL)(this.destroyRef)).subscribe(()=>{this.form.valid!==this.isFormCurrentlyValid&&this.validityChangeEvent.emit(this.isFormCurrentlyValid=this.form.valid)})}ngOnChanges(a){a.schema&&!a.schema.firstChange&&this.createFields()}createFields(){this.customFormSchemaService.isObject(this.schema)||(this.schema={}),this.validateSchema&&this.customFormSchemaService.validateSchema(this.schema),this.fields=[this.formlyJsonschema.toFieldConfig(this.schema)],this.showFieldValidationOnInit&&this.showFieldValidation()}showFieldValidation(){this.cycleFields(this.fields)}showFieldValidationWithMessage(){this.showFieldValidation(),this.toastService.show({content:"Tutti i campi sono stati <strong>validati</strong>: quelli con errore sono evidenziati da un <strong>bordo rosso</strong>!"})}cycleFields(a){a.forEach(x=>{this.forceValidation(x),x.fieldGroup&&this.cycleFields(x.fieldGroup)})}forceValidation(a){a.validation||(a.validation={}),a.validation.show=!0}reset(){this.options.resetModel&&this.options.resetModel({})}cancel(){this.cancelEvent.emit()}submit(){this.form.valid&&(this.log(),this.submitEvent.emit(this.model))}onModelChange(a){this.enableModelChangeEvent&&this.modelChangeEvent.emit(a||{})}log(){}}return(V=j).\u0275fac=function(a){return new(a||V)(y.Y36(q.c),y.Y36(g),y.Y36(P.k),y.Y36(y.ktI))},V.\u0275cmp=y.Xpm({type:V,selectors:[["","app-custom-form",""]],inputs:{schema:"schema",model:"model",validateSchema:"validateSchema",enableModelChangeEvent:"enableModelChangeEvent",defaultModel:"defaultModel",showFieldValidationOnInit:"showFieldValidationOnInit"},outputs:{cancelEvent:"cancelEvent",submitEvent:"submitEvent",validityChangeEvent:"validityChangeEvent",modelChangeEvent:"modelChangeEvent"},features:[y.TTD],attrs:$,ngContentSelectors:L,decls:3,vars:5,consts:[[3,"formGroup","ngSubmit"],[3,"model","fields","form","options","modelChange"]],template:function(a,x){1&a&&(y.F$t(B),y.TgZ(0,"form",0),y.NdJ("ngSubmit",function(){return x.submit()}),y.TgZ(1,"formly-form",1),y.NdJ("modelChange",function(S){return x.onModelChange(S)}),y.qZA(),y.Hsn(2),y.qZA()),2&a&&(y.Q6J("formGroup",x.form),y.xp6(),y.Q6J("model",x.model)("fields",x.fields)("form",x.form)("options",x.options))},dependencies:[R.T7,w._Y,w.JL,w.sg]}),j})()},6687:(ee,G,h)=>{h.d(G,{I:()=>St});var y=h(6814),Q=h(7905),g=h(9300),w=h(5545),e=h(9212),P=h(8595);function q(t,s){1&t&&e.GkF(0)}function R(t,s){if(1&t&&(e.ynx(0),e._UZ(1,"div",13),e.TgZ(2,"div",14),e._uU(3," ("),e.YNc(4,q,1,0,"ng-container",15),e._uU(5,") "),e.qZA(),e.BQk()),2&t){const n=e.oxw(),o=e.MAs(15);e.xp6(),e.Q6J("innerHTML",n.parsedTitle,e.oJD),e.xp6(3),e.Q6J("ngTemplateOutlet",o)}}function $(t,s){1&t&&e.GkF(0)}function B(t,s){if(1&t&&(e.TgZ(0,"div",16),e._uU(1," Lista di "),e.YNc(2,$,1,0,"ng-container",15),e.qZA()),2&t){e.oxw();const n=e.MAs(15);e.xp6(2),e.Q6J("ngTemplateOutlet",n)}}function L(t,s){if(1&t&&e._UZ(0,"div",17),2&t){const n=e.oxw();e.Q6J("innerHTML",n.parsedDescription,e.oJD)}}const U=t=>({"mt-3":t});function V(t,s){if(1&t&&(e.TgZ(0,"div",18),e._UZ(1,"formly-validation-message",19),e.qZA()),2&t){const n=e.oxw();e.Q6J("ngClass",e.VKq(2,U,n.parsedDescription.length)),e.xp6(),e.Q6J("field",n.field)}}function j(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"li")(1,"div",30),e.NdJ("click",function(){e.CHM(n);const i=e.oxw().index,l=e.oxw(2);return e.KtG(l.move(i,i-1))}),e._uU(2," arrow_circle_up "),e.qZA()()}2&t&&(e.xp6(),e.Q6J("disableOnTouchDevice",!0))}const k=t=>({"ms-1":t});function a(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"li",31)(1,"div",32),e.NdJ("click",function(){e.CHM(n);const i=e.oxw().index,l=e.oxw(2);return e.KtG(l.move(i,i+1))}),e._uU(2," arrow_circle_down "),e.qZA()()}if(2&t){const n=e.oxw().first;e.Q6J("ngClass",e.VKq(2,k,!n)),e.xp6(),e.Q6J("disableOnTouchDevice",!0)}}function x(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"li",31)(1,"div",33),e.NdJ("click",function(){e.CHM(n);const i=e.oxw().index,l=e.oxw(2);return e.KtG(l.remove(i))}),e._uU(2," highlight_off "),e.qZA()()}if(2&t){const n=e.oxw();e.Q6J("ngClass",e.VKq(2,k,!(n.first&&n.last))),e.xp6(),e.Q6J("disableOnTouchDevice",!0)}}const p=t=>({"mb-3":t}),S=t=>({"has-error":t});function r(t,s){if(1&t&&(e.TgZ(0,"li",22)(1,"fieldset",23)(2,"legend",24)(3,"div",25)(4,"div",26),e._uU(5),e.qZA(),e.TgZ(6,"ul",27),e.YNc(7,j,3,1,"li",28)(8,a,3,4,"li",29)(9,x,3,4,"li",29),e.qZA()()(),e._UZ(10,"formly-field",19),e.qZA()()),2&t){const n=s.$implicit,o=s.index,i=s.first,l=s.last;e.Q6J("ngClass",e.VKq(7,p,!l)),e.xp6(),e.Q6J("ngClass",e.VKq(9,S,null==n.formControl?null:n.formControl.invalid)),e.xp6(4),e.hij("#",o+1,""),e.xp6(2),e.Q6J("ngIf",!i),e.xp6(),e.Q6J("ngIf",!l),e.xp6(),e.Q6J("ngIf",n.props&&!1!==n.props.removable),e.xp6(),e.Q6J("field",n)}}function _(t,s){if(1&t&&(e.TgZ(0,"ul",20),e.YNc(1,r,11,11,"li",21),e.qZA()),2&t){const n=e.oxw();e.xp6(),e.Q6J("ngForOf",n.field.fieldGroup)}}const T=t=>({"d-none d-md-inline":t});function O(t,s){if(1&t&&(e.TgZ(0,"span"),e._uU(1),e.qZA(),e.TgZ(2,"span",31),e._uU(3),e.qZA()),2&t){const n=e.oxw();e.xp6(),e.Oqu(n.field.fieldGroup?n.field.fieldGroup.length:0),e.xp6(),e.Q6J("ngClass",e.VKq(3,T,n.props.label)),e.xp6(),e.hij(" element",n.field.fieldGroup&&1===n.field.fieldGroup.length?"o":"i","")}}const v=()=>[10,10],f=t=>({placement:"top-end",offset:t});let F=(()=>{var t;class s extends w.hv{constructor(o){super(),this.customFormUtilsService=o,this.parsedTitle="",this.parsedDescription=""}ngOnInit(){this.parsedDescription=this.props.description?this.customFormUtilsService.parseBBCode(this.props.description):"",this.parsedTitle=this.props.label?this.customFormUtilsService.parseBBCode(this.props.label):""}get maxLengthExceeded(){return this.props.maxItems&&this.model&&this.model.length>=this.props.maxItems}move(o,i){const l=this.model[o];this.remove(o),this.add(i,l)}}return(t=s).\u0275fac=function(o){return new(o||t)(e.Y36(g.d6))},t.\u0275cmp=e.Xpm({type:t,selectors:[["formly-field-array"]],features:[e.qOj],decls:16,vars:14,consts:[[1,"rounded","px-3","pb-3","pt-2","mb-3","formly-fieldset",3,"ngClass"],[1,"legend-reset","pb-1","px-2","mb-0","mw-100"],[1,"d-flex","align-items-center","mw-100"],[4,"ngIf","ngIfElse"],["nolabel",""],["class","mb-2 text-justify",3,"innerHTML",4,"ngIf"],["class","alert alert-danger formly-field-array-error text-center","role","alert",3,"ngClass",4,"ngIf"],["class","list-unstyled mb-3",4,"ngIf"],[1,"d-flex","flex-row-reverse"],["appTippy","Hai aggiunto il numero massimo di elementi!",3,"disableInstance","tippyProps"],["type","button",1,"btn","btn-primary","d-flex","align-items-center",3,"disabled","click"],[1,"material-icons"],["itemscount",""],[1,"fs-lg","text-truncate","mw-100",3,"innerHTML"],[1,"ms-2","fs-reset","lh-1","fst-italic","list-counter","text-nowrap"],[4,"ngTemplateOutlet"],[1,"fs-xl","text-truncate","mw-10"],[1,"mb-2","text-justify",3,"innerHTML"],["role","alert",1,"alert","alert-danger","formly-field-array-error","text-center",3,"ngClass"],[3,"field"],[1,"list-unstyled","mb-3"],["class","item",3,"ngClass",4,"ngFor","ngForOf"],[1,"item",3,"ngClass"],[1,"rounded","formly-fieldset","dashed","show-success","px-3",3,"ngClass"],[1,"legend-reset","ms-auto","mb-0","px-2"],[1,"d-flex","align-items-center"],[1,"fs-xl","ms-1"],[1,"ms-2","mb-0","item-icons","list-unstyled","d-flex","align-items-center"],[4,"ngIf"],[3,"ngClass",4,"ngIf"],["appTippy","Sposta in alto",1,"d-block","material-icons","cursor-pointer",3,"disableOnTouchDevice","click"],[3,"ngClass"],["appTippy","Sposta in basso",1,"d-block","material-icons","cursor-pointer",3,"disableOnTouchDevice","click"],["appTippy","Rimuovi",1,"d-block","material-icons","cursor-pointer","text-danger",3,"disableOnTouchDevice","click"]],template:function(o,i){if(1&o&&(e.TgZ(0,"fieldset",0)(1,"legend",1)(2,"div",2),e.YNc(3,R,6,2,"ng-container",3)(4,B,3,1,"ng-template",null,4,e.W1O),e.qZA()(),e.YNc(6,L,1,1,"div",5)(7,V,2,4,"div",6)(8,_,2,1,"ul",7),e.TgZ(9,"div",8)(10,"div",9)(11,"button",10),e.NdJ("click",function(){return!i.maxLengthExceeded&&i.add()}),e.TgZ(12,"span",11),e._uU(13,"add"),e.qZA()()()(),e.YNc(14,O,4,5,"ng-template",null,12,e.W1O),e.qZA()),2&o){const l=e.MAs(5);e.Q6J("ngClass",e.VKq(9,S,i.formControl.invalid)),e.xp6(3),e.Q6J("ngIf",i.parsedTitle)("ngIfElse",l),e.xp6(3),e.Q6J("ngIf",i.parsedDescription),e.xp6(),e.Q6J("ngIf",i.showError&&i.formControl.errors),e.xp6(),e.Q6J("ngIf",i.field.fieldGroup&&i.field.fieldGroup.length),e.xp6(2),e.Q6J("disableInstance",!i.maxLengthExceeded)("tippyProps",e.VKq(12,f,e.DdM(11,v))),e.xp6(),e.Q6J("disabled",i.maxLengthExceeded)}},dependencies:[y.mk,y.sg,y.O5,y.tP,w.cw,w.M2,P.$],styles:["legend[_ngcontent-%COMP%]   .item-icons[_ngcontent-%COMP%]{padding-top:.1rem}"]}),s})();var d=h(1413),c=h(4020),m=h(6223),C=h(91),D=h(2181),Z=h(8180),I=h(5619);const b=["language","theme"],J=["editor"];let K=(()=>{class t{constructor(n,o){this.ngZone=n,this.monacoPathConfig=o,this.isMonacoLoaded$=new I.X(!1),this._monacoPath="assets/monaco-editor/min/vs",window.monacoEditorAlreadyInitialized?n.run(()=>this.isMonacoLoaded$.next(!0)):(window.monacoEditorAlreadyInitialized=!0,this.monacoPathConfig&&(this.monacoPath=this.monacoPathConfig),this.loadMonaco())}set monacoPath(n){n&&(this._monacoPath=n)}loadMonaco(){const n=()=>{let u=this._monacoPath;window.amdRequire=window.require;const E=!!this.nodeRequire,A=u.includes("http");E&&(window.require=this.nodeRequire,A||(u=window.require("path").resolve(window.__dirname,this._monacoPath))),window.amdRequire.config({paths:{vs:u}}),window.amdRequire(["vs/editor/editor.main"],()=>{this.ngZone.run(()=>this.isMonacoLoaded$.next(!0))},M=>console.error("Error loading monaco-editor: ",M))};if(window.amdRequire)return n();window.require&&(this.addElectronFixScripts(),this.nodeRequire=window.require);const l=document.createElement("script");l.type="text/javascript",l.src="".concat(this._monacoPath,"/loader.js"),l.addEventListener("load",n),document.body.appendChild(l)}addElectronFixScripts(){const n=document.createElement("script"),o=document.createTextNode("self.module = undefined;"),i=document.createTextNode("self.process.browser = true;");n.appendChild(o),n.appendChild(i),document.body.appendChild(n)}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(e.R0b),e.LFG("MONACO_PATH",8))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ae=(()=>{class t{constructor(n){this.monacoLoader=n,this.init=new e.vpe,this.onTouched=()=>{},this.onErrorStatusChange=()=>{},this.propagateChange=()=>{}}get model(){return this.editor&&this.editor.getModel()}get modelMarkers(){return this.model&&monaco.editor.getModelMarkers({resource:this.model.uri})}ngOnInit(){this.monacoLoader.isMonacoLoaded$.pipe((0,D.h)(n=>n),(0,Z.q)(1)).subscribe(()=>{this.initEditor()})}ngOnChanges(n){if(this.editor&&n.options&&!n.options.firstChange){const o=n.options.currentValue,{language:i,theme:l}=o,u=(0,C.Z)(o,b),{language:E,theme:A}=n.options.previousValue;E!==i&&monaco.editor.setModelLanguage(this.editor.getModel(),this.options&&this.options.language?this.options.language:"text"),A!==l&&monaco.editor.setTheme(l),this.editor.updateOptions(u)}if(this.editor&&n.uri){const o=n.uri.currentValue,i=n.uri.previousValue;if(i&&!o||!i&&o||o&&i&&o.path!==i.path){const l=this.editor.getValue();let u;this.modelUriInstance&&this.modelUriInstance.dispose(),o&&(u=monaco.editor.getModels().find(E=>E.uri.path===o.path)),this.modelUriInstance=u||monaco.editor.createModel(l,this.options.language||"text",this.uri),this.editor.setModel(this.modelUriInstance)}}}writeValue(n){this.value=n,this.editor&&n?this.editor.setValue(n):this.editor&&this.editor.setValue("")}registerOnChange(n){this.propagateChange=n}registerOnTouched(n){this.onTouched=n}validate(){return this.parsedError?{monaco:{value:this.parsedError.split("|")}}:null}registerOnValidatorChange(n){this.onErrorStatusChange=n}initEditor(){const n={value:[this.value].join("\n"),language:"text",automaticLayout:!0,scrollBeyondLastLine:!1,theme:"vc"};this.editor=monaco.editor.create(this.editorContent.nativeElement,this.options?(0,d.Z)((0,d.Z)({},n),this.options):n),this.registerEditorListeners(),this.init.emit(this.editor)}registerEditorListeners(){this.editor.onDidChangeModelContent(()=>{this.propagateChange(this.editor.getValue())}),this.editor.onDidChangeModelDecorations(()=>{const n=this.modelMarkers.map(({message:i})=>i).join("|");this.parsedError!==n&&(this.parsedError=n,this.onErrorStatusChange())}),this.editor.onDidBlurEditorText(()=>{this.onTouched()})}ngOnDestroy(){this.editor&&this.editor.dispose()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(K))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ngx-monaco-editor"]],viewQuery:function(n,o){if(1&n&&e.Gf(J,7),2&n){let i;e.iGM(i=e.CRH())&&(o.editorContent=i.first)}},inputs:{options:"options",uri:"uri"},outputs:{init:"init"},features:[e._Bn([{provide:m.JU,useExisting:(0,e.Gpc)(()=>t),multi:!0},{provide:m.Cf,useExisting:(0,e.Gpc)(()=>t),multi:!0}]),e.TTD],decls:4,vars:0,consts:[["fxFlex","",1,"editor-container"],["container",""],[1,"monaco-editor"],["editor",""]],template:function(n,o){1&n&&(e.TgZ(0,"div",0,1),e._UZ(2,"div",2,3),e.qZA())},styles:[".monaco-editor[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0}.editor-container[_ngcontent-%COMP%]{overflow:hidden;position:relative;display:table;width:100%;height:100%;min-width:0}"],changeDetection:0}),t})(),de=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[]]}),t})();function ce(t,s){if(1&t&&(e.ynx(0),e.TgZ(1,"textarea",2),e._uU(2,"            "),e.qZA(),e.BQk()),2&t){const n=e.oxw();e.xp6(),e.ekj("is-invalid",n.showError),e.Q6J("formControl",n.formControl)("cols",1)("rows",10)("formlyAttributes",n.field)}}function me(t,s){1&t&&(e.ynx(0),e.TgZ(1,"p",4),e._UZ(2,"span",5),e.qZA(),e.BQk())}function pe(t,s){if(1&t&&e._UZ(0,"ngx-monaco-editor",6),2&t){const n=e.oxw(2);e.Udp("height",n.editorHeight),e.Q6J("options",n.editorOptions)("formControl",n.formControl)}}function ue(t,s){if(1&t&&e.YNc(0,me,3,0,"ng-container",0)(1,pe,1,4,"ng-template",null,3,e.W1O),2&t){const n=e.MAs(2),o=e.oxw();e.Q6J("ngIf",o.loading)("ngIfElse",n)}}let fe=(()=>{var t;class s extends w.fS{constructor(){super(...arguments),this.touchDevice=c.b1,this.editorOptions={theme:"vs-dark",language:"json"},this.loading=!0,this.editorHeight="350px"}ngOnInit(){this.touchDevice||(this.field.props.editorOptions&&(this.field.props.editorOptions.height&&(this.editorHeight=this.field.props.editorOptions.height,delete this.field.props.editorOptions.height),this.editorOptions=(0,d.Z)((0,d.Z)({},this.editorOptions),this.field.props.editorOptions)),this.loading=!1)}}return(t=s).\u0275fac=(()=>{let n;return function(i){return(n||(n=e.n5z(t)))(i||t)}})(),t.\u0275cmp=e.Xpm({type:t,selectors:[["formly-code-editor-type"]],features:[e.qOj],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["notTouchDevice",""],[1,"form-control",3,"formControl","cols","rows","formlyAttributes"],["codeEditor",""],[1,"placeholder-glow"],[1,"placeholder","col-12","placeholder-lg"],[1,"d-block","formly-code-editor",3,"options","formControl"]],template:function(o,i){if(1&o&&e.YNc(0,ce,3,6,"ng-container",0)(1,ue,3,2,"ng-template",null,1,e.W1O),2&o){const l=e.MAs(2);e.Q6J("ngIf",i.touchDevice)("ngIfElse",l)}},dependencies:[y.O5,w.JD,m.Fj,m.JJ,m.oH,ae],encapsulation:2}),s})();var N=h(5861),z=h(8784);function he(t,s){1&t&&(e.ynx(0),e.TgZ(1,"p",3),e._UZ(2,"span",4),e.qZA(),e.BQk())}function ge(t,s){if(1&t&&e._UZ(0,"option",8),2&t){const n=s.$implicit;e.Q6J("ngValue",n.id||n.name)("innerText",n.name)}}function _e(t,s){if(1&t&&(e.ynx(0),e.TgZ(1,"select",6),e.YNc(2,ge,1,2,"option",7),e.qZA(),e.BQk()),2&t){const n=e.oxw(2);e.xp6(),e.ekj("is-invalid",n.showError),e.Q6J("formControl",n.formControl)("formlyAttributes",n.field),e.xp6(),e.Q6J("ngForOf",n.groupsList)}}function ye(t,s){if(1&t&&e._UZ(0,"option",8),2&t){const n=s.$implicit;e.Q6J("ngValue",n.id||n.name)("innerText",n.name)}}function ve(t,s){if(1&t&&(e.TgZ(0,"select",9),e.YNc(1,ye,1,2,"option",7),e.qZA()),2&t){const n=e.oxw(2);e.ekj("is-invalid",n.showError),e.Q6J("formControl",n.formControl)("formlyAttributes",n.field),e.xp6(),e.Q6J("ngForOf",n.groupsList)}}function Ce(t,s){if(1&t&&e.YNc(0,_e,3,5,"ng-container",1)(1,ve,2,5,"ng-template",null,5,e.W1O),2&t){const n=e.MAs(2),o=e.oxw();e.Q6J("ngIf",o.field.props.multiple)("ngIfElse",n)}}const Fe=t=>({"no-label":t});let xe=(()=>{var t;class s extends w.fS{constructor(o,i){super(),this.forumService=o,this.changeDetectorRef=i,this.loading=!0,this.groupsList=[]}prePopulate(o){o.props||(o.props={}),o.props.resetButton=!0}ngOnInit(){var o=this;return(0,N.Z)(function*(){o.field.defaultValue=void 0,(0,g.o8)(o.field.props,"multiple")||(o.field.props.multiple=!0),o.groupsList=(yield o.forumService.getGroups()).sort((i,l)=>i.name.localeCompare(l.name)),o.field.props.keepGroupsWithoutId||(o.groupsList=o.groupsList.filter(i=>i.id>0)),o.loading=!1,o.field.formControl.updateValueAndValidity(),o.changeDetectorRef.detectChanges()})()}}return(t=s).\u0275fac=function(o){return new(o||t)(e.Y36(z._),e.Y36(e.sBO))},t.\u0275cmp=e.Xpm({type:t,selectors:[["formly-field-forum-groups"]],features:[e.qOj],decls:4,vars:5,consts:[[1,"position-relative","wrapper",3,"ngClass"],[4,"ngIf","ngIfElse"],["formSelect",""],[1,"placeholder-glow"],[1,"placeholder","col-12","placeholder-lg"],["single",""],["multiple","",1,"form-select",3,"formControl","formlyAttributes"],[3,"ngValue","innerText",4,"ngFor","ngForOf"],[3,"ngValue","innerText"],[1,"form-select",3,"formControl","formlyAttributes"]],template:function(o,i){if(1&o&&(e.TgZ(0,"div",0),e.YNc(1,he,3,0,"ng-container",1)(2,Ce,3,2,"ng-template",null,2,e.W1O),e.qZA()),2&o){const l=e.MAs(3);e.Q6J("ngClass",e.VKq(3,Fe,!i.props.label)),e.xp6(),e.Q6J("ngIf",i.loading)("ngIfElse",l)}},dependencies:[y.mk,y.sg,y.O5,w.JD,m.YN,m.Kr,m.EJ,m.K7,m.JJ,m.oH],encapsulation:2}),s})();var Te=h(1410),te=h(8645);const Oe=[{value:g.ig.FORUMFREE,placeholder:"ForumFree"},{value:g.ig.FORUMCOMMUNITY,placeholder:"ForumCommunity"},{value:g.ig.BLOGFREE,placeholder:"BlogFree"}];function Ee(t,s){if(1&t&&e._UZ(0,"option",2),2&t){const n=s.$implicit;e.Q6J("ngValue",n.value)("innerText",n.placeholder)}}let Me=(()=>{var t;class s{constructor(){this.model=g.ig.FORUMFREE,this.modelChange=new e.vpe,this.options=Oe}}return(t=s).\u0275fac=function(o){return new(o||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-domain-select"]],inputs:{model:"model"},outputs:{modelChange:"modelChange"},decls:2,vars:2,consts:[[1,"form-select",3,"ngModel","ngModelChange"],[3,"ngValue","innerText",4,"ngFor","ngForOf"],[3,"ngValue","innerText"]],template:function(o,i){1&o&&(e.TgZ(0,"select",0),e.NdJ("ngModelChange",function(u){return i.model=u})("ngModelChange",function(u){return i.modelChange.emit(u)}),e.YNc(1,Ee,1,2,"option",1),e.qZA()),2&o&&(e.Q6J("ngModel",i.model),e.xp6(),e.Q6J("ngForOf",i.options))},dependencies:[y.sg,m.YN,m.Kr,m.EJ,m.JJ,m.On],encapsulation:2}),s})();var ne=h(7827),be=h(9473),we=h(7357);function Se(t,s){1&t&&(e.TgZ(0,"div",4),e._UZ(1,"app-loader",5),e.qZA())}function Ae(t,s){1&t&&e._UZ(0,"div",8),2&t&&e.Q6J("innerText","Nessun elemento inserito!")}function Ze(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"li")(1,"a",11)(2,"div",12),e.NdJ("click",function(i){const u=e.CHM(n).index,E=e.oxw(3);return e.KtG(E.remove(u,i))}),e.TgZ(3,"div",13),e._uU(4," remove "),e.qZA()(),e._UZ(5,"img",14),e.ALo(6,"uploadsreplace"),e.qZA(),e._UZ(7,"a",15),e.qZA()}if(2&t){const n=s.$implicit,o=e.oxw(3);e.Gre("d-flex flex-column align-items-center item-",n.type,""),e.xp6(),e.Q6J("href",n.link,e.LSH),e.xp6(),e.Q6J("disableOnTouchDevice",!0),e.xp6(3),e.s9C("alt",n.title),e.Q6J("src",o.lazyImagePlaceholder,e.LSH)("lazyLoad",e.lcZ(6,12,n.image))("offset",100)("errorImage",o.defaultImage),e.xp6(2),e.Q6J("innerHTML",n.title,e.oJD)("href",n.link,e.LSH)}}function Ie(t,s){if(1&t&&(e.TgZ(0,"ul",9),e.YNc(1,Ze,8,14,"li",10),e.qZA()),2&t){const n=e.oxw(2);e.xp6(),e.Q6J("ngForOf",n.list)}}function De(t,s){if(1&t&&e.YNc(0,Ae,1,1,"div",6)(1,Ie,2,1,"ng-template",null,7,e.W1O),2&t){const n=e.MAs(2),o=e.oxw();e.Q6J("ngIf",0===o.list.length)("ngIfElse",n)}}const Le=t=>({"empty-list":t});let Je=(()=>{var t;class s{constructor(){this.list=[],this.defaultImage="/assets/default_avatar.png",this.loading=!0,this.removeEvent=new e.vpe,this.lazyImagePlaceholder=c.Qi}remove(o,i){i.preventDefault(),i.stopPropagation();const l=this.list[o].id;this.list.splice(o,1),this.list=[...this.list],this.removeEvent.emit(l)}}return(t=s).\u0275fac=function(o){return new(o||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-formly-typeahead-content"]],inputs:{list:"list",listTitle:"listTitle",defaultImage:"defaultImage",loading:"loading"},outputs:{removeEvent:"removeEvent"},decls:5,vars:6,consts:[[1,"formly-list-container","rounded","px-3","pt-2","mt-2",3,"ngClass"],[1,"legend-reset","fs-reset","mb-0","px-2","pb-1",3,"innerText"],["class","d-flex justify-content-center",4,"ngIf","ngIfElse"],["content",""],[1,"d-flex","justify-content-center"],["message","Recupero dei dati"],["class","text-center mb-0 px-1 pb-1 fst-italic",3,"innerText",4,"ngIf","ngIfElse"],["noEmpty",""],[1,"text-center","mb-0","px-1","pb-1","fst-italic",3,"innerText"],[1,"formly-list","list-unstyled","mb-0","d-grid","px-2"],[3,"class",4,"ngFor","ngForOf"],["target","_blank",1,"preview","rounded-circle","d-block","position-relative",3,"href"],["appTippy","Rimuovi",1,"remove-btn","alert","alert-danger","position-absolute","cursor-pointer","mb-0","py-0","px-1",3,"disableOnTouchDevice","click"],[1,"material-icons","d-block","fs-reset"],[1,"d-block","image-cover","rounded-circle",3,"src","lazyLoad","offset","errorImage","alt"],["target","_blank",1,"d-block","fw-bold","mt-1","item-title","text-truncate","mw-100",3,"innerHTML","href"]],template:function(o,i){if(1&o&&(e.TgZ(0,"fieldset",0),e._UZ(1,"legend",1),e.YNc(2,Se,2,0,"div",2)(3,De,3,2,"ng-template",null,3,e.W1O),e.qZA()),2&o){const l=e.MAs(4);e.Q6J("ngClass",e.VKq(4,Le,0===i.list.length)),e.xp6(),e.Q6J("innerText",i.listTitle),e.xp6(),e.Q6J("ngIf",i.loading)("ngIfElse",l)}},dependencies:[y.mk,y.sg,y.O5,ne.z1,be.R,P.$,we.g],styles:[".formly-list-container[_ngcontent-%COMP%]{border:1px dashed var(--bs-gray-500)}.formly-list-container[_ngcontent-%COMP%]:not(.empty-list){padding-bottom:.75rem}.formly-list-container.empty-list[_ngcontent-%COMP%]{padding-bottom:1rem}.formly-list[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(60px,1fr));gap:1rem}.formly-list[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]{top:0;left:-8px}.formly-list[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{width:60px;height:60px;border:2px solid}.formly-list[_ngcontent-%COMP%]   .item-ff[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{border-color:#58a72e}.formly-list[_ngcontent-%COMP%]   .item-ff[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]{color:#58a72e!important}.formly-list[_ngcontent-%COMP%]   .item-fc[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{border-color:#0082cd}.formly-list[_ngcontent-%COMP%]   .item-fc[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]{color:#0082cd!important}.formly-list[_ngcontent-%COMP%]   .item-bf[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{border-color:#e67f22}.formly-list[_ngcontent-%COMP%]   .item-bf[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]{color:#e67f22!important}@media (min-width: 960px){.formly-list[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(75px,1fr));gap:1.5rem}.formly-list[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]{top:4px}.formly-list[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{width:75px;height:75px}}"]}),s})();var Ve=h(1378),Pe=h(3620),je=h(3997),Ue=h(3019),oe=h(9397),ke=h(4664),Ne=h(2096),Ge=h(1993),qe=h(5661),X=h(8726);function Re(t,s){1&t&&(e.TgZ(0,"span",8),e._uU(1,"*"),e.qZA())}function $e(t,s){if(1&t&&(e.TgZ(0,"legend",5)(1,"label",6),e._uU(2),e.YNc(3,Re,2,0,"span",7),e.qZA()()),2&t){const n=e.oxw();e.xp6(),e.Q6J("for",n.field.id),e.xp6(),e.hij(" ",n.props.label," "),e.xp6(),e.Q6J("ngIf",n.props.required)}}function Be(t,s){1&t&&e.GkF(0)}function Ye(t,s){1&t&&e.GkF(0)}function He(t,s){if(1&t&&e._UZ(0,"div",9),2&t){const n=e.oxw();e.Q6J("innerHTML",n.parsedDescription,e.oJD)}}function Ke(t,s){1&t&&(e.TgZ(0,"div",16)(1,"span",17),e._uU(2,"Loading..."),e.qZA()())}function We(t,s){1&t&&e.GkF(0)}function ze(t,s){if(1&t&&(e.ynx(0),e.TgZ(1,"div",18),e.YNc(2,We,1,0,"ng-container",2),e.qZA(),e.BQk()),2&t){const n=e.oxw(2);e.xp6(2),e.Q6J("ngTemplateOutlet",n.additionalInputsTemplate)}}function Xe(t,s){if(1&t&&(e.TgZ(0,"div",19),e._UZ(1,"formly-validation-message",20),e.qZA()),2&t){const n=e.oxw(2);e.Udp("display","block"),e.xp6(),e.Q6J("field",n.field)}}function et(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"div",10)(1,"div",11)(2,"input",12),e.NdJ("ngModelChange",function(i){e.CHM(n);const l=e.oxw();return e.KtG(l.inputValue=i)})("selectItem",function(i){e.CHM(n);const l=e.oxw();return e.KtG(l.selectEntity(i))})("focus",function(i){e.CHM(n);const l=e.oxw();return e.KtG(l.focusSubject.next(i.target.value))}),e.qZA(),e.YNc(3,Ke,3,0,"div",13),e.qZA(),e.YNc(4,ze,3,1,"ng-container",14),e.qZA(),e.YNc(5,Xe,2,3,"div",15)}if(2&t){const n=e.oxw();e.xp6(2),e.ekj("is-invalid",n.showError),e.Q6J("ngModel",n.inputValue)("formlyAttributes",n.field)("ngbTypeahead",n.search)("editable",!1)("inputFormatter",n.inputFormatter)("resultFormatter",n.resultFormatter),e.xp6(),e.Q6J("ngIf",n.searching),e.xp6(),e.Q6J("ngIf",n.additionalInputsTemplate),e.xp6(),e.Q6J("ngIf",n.showError)}}let tt=(()=>{var t;class s{constructor(o,i,l,u){this.customFormUtilsService=o,this.changeDetectorRef=i,this.toastService=l,this.destroyRef=u,this.showError=!1,this.updateListEvent=new e.vpe,this.populateListEvent=new e.vpe,this.inputValue="",this.inputFormatter=E=>E.name,this.focusSubject=new te.x,this.searching=!1,this.formlyFieldValues=[],this.singleSearch=!1,this.search=E=>{const A=E.pipe((0,Pe.b)(700),(0,je.x)());return(0,Ue.T)(A,this.focusSubject).pipe((0,oe.b)(()=>this.setSearching(!0)),(0,ke.w)(M=>M.length<3?(0,Ne.of)([]):this.searchFunction(M)),(0,oe.b)(()=>this.setSearching(!1)))}}ngOnInit(){this.formControl=this.field.formControl,this.props=this.field.props,this.singleSearch=!1===this.props.multiple,this.parsedDescription=this.props.description?this.customFormUtilsService.parseBBCode(this.props.description):void 0,this.formlyFieldValues=Array.isArray(this.formControl.value)?this.formControl.value:Array.isArray(this.field.defaultValue)?this.field.defaultValue:[],this.singleSearch&&(this.formlyFieldValues=this.formlyFieldValues.slice(0,1)),this.populateListEvent.emit(this.formlyFieldValues),this.formControl.updateValueAndValidity(),this.removeItemObservable.pipe((0,Ge.sL)(this.destroyRef)).subscribe(o=>{const i=this.formlyFieldValues.indexOf(o);i>-1&&(this.formlyFieldValues.splice(i,1),this.formControl.setValue([...this.formlyFieldValues]))})}resultFormatter(o){return o.name.indexOf("&")>-1?function Qe(t){const s=document.createElement("TEXTAREA");return s.innerHTML=t,s.value}(o.name):o.name}setSearching(o){this.searching=o,this.changeDetectorRef.detectChanges()}selectEntity(o){const i=o.item;let l;if(o.preventDefault(),this.formlyFieldValues.includes(i.id))return this.toastService.show({content:"L'elemento <strong>".concat(i.name,"</strong> \xe8 gi\xe0 ").concat(this.singleSearch?"selezionato":"stato aggiunto alla lista","!"),level:Ve.m.ERROR}),void(this.inputValue="");this.singleSearch&&(l=this.formlyFieldValues,this.formlyFieldValues=[]),this.formlyFieldValues.push(i.id),this.updateListEvent.emit({removed:l,selected:i}),this.inputValue="",this.updateFieldValue()}updateFieldValue(){this.formControl.setValue([...this.formlyFieldValues])}}return(t=s).\u0275fac=function(o){return new(o||t)(e.Y36(g.d6),e.Y36(e.sBO),e.Y36(qe.k),e.Y36(e.ktI))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-formly-typeahead"]],inputs:{field:"field",showError:"showError",removeItemObservable:"removeItemObservable",searchFunction:"searchFunction",resultsTemplate:"resultsTemplate",additionalInputsTemplate:"additionalInputsTemplate"},outputs:{updateListEvent:"updateListEvent",populateListEvent:"populateListEvent"},decls:7,vars:6,consts:[[1,"mb-3","rounded","px-3","pt-2","pb-3","formly-fieldset"],["class","legend-reset fs-reset mb-0 px-2 mw-100 lh-1 py-1",4,"ngIf"],[4,"ngTemplateOutlet"],["class","form-text text-muted",3,"innerHTML",4,"ngIf"],["typeaheadTemplate",""],[1,"legend-reset","fs-reset","mb-0","px-2","mw-100","lh-1","py-1"],[1,"form-label","mb-0","mw-100","text-truncate",3,"for"],["aria-hidden","true",4,"ngIf"],["aria-hidden","true"],[1,"form-text","text-muted",3,"innerHTML"],[1,"d-flex","flex-column","flex-sm-row"],[1,"position-relative","flex-grow-1"],["type","text","placeholder","Cerca...","container","body",1,"form-control",3,"ngModel","formlyAttributes","ngbTypeahead","editable","inputFormatter","resultFormatter","ngModelChange","selectItem","focus"],["class","spinner-border spinner-border-sm text-primary position-absolute","role","status",4,"ngIf"],[4,"ngIf"],["class","invalid-feedback",3,"display",4,"ngIf"],["role","status",1,"spinner-border","spinner-border-sm","text-primary","position-absolute"],[1,"visually-hidden"],[1,"ms-sm-3","mt-3","mt-sm-0"],[1,"invalid-feedback"],[3,"field"]],template:function(o,i){if(1&o&&(e.TgZ(0,"fieldset",0),e.YNc(1,$e,4,3,"legend",1)(2,Be,1,0,"ng-container",2)(3,Ye,1,0,"ng-container",2)(4,He,1,1,"div",3),e.qZA(),e.YNc(5,et,6,11,"ng-template",null,4,e.W1O)),2&o){const l=e.MAs(6);e.ekj("has-error",i.formControl.invalid),e.xp6(),e.Q6J("ngIf",i.props.label),e.xp6(),e.Q6J("ngTemplateOutlet",l),e.xp6(),e.Q6J("ngTemplateOutlet",i.resultsTemplate),e.xp6(),e.Q6J("ngIf",i.parsedDescription)}},dependencies:[y.O5,y.tP,w.JD,w.M2,m.Fj,m.JJ,m.On,X.dR],styles:[".spinner-border[_ngcontent-%COMP%]{top:calc(50% - 8px);right:10px}"],changeDetection:0}),s})();function nt(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"app-formly-typeahead-content",3),e.NdJ("removeEvent",function(i){e.CHM(n);const l=e.oxw();return e.KtG(l.removeItemSubject.next(i))}),e.qZA()}if(2&t){const n=e.oxw();e.Q6J("listTitle",n.listTitle)("list",n.list)("loading",n.loading)("defaultImage",n.defaultThumb)}}function ot(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"app-domain-select",4),e.NdJ("modelChange",function(i){e.CHM(n);const l=e.oxw();return e.KtG(l.selectedDomain=i)}),e.qZA()}if(2&t){const n=e.oxw();e.Q6J("model",n.selectedDomain)}}let ie=(()=>{var t;class s{constructor(o,i){var u,l=this;this.globalsService=o,this.changeDetectorRef=i,this.showError=!1,this.listTitle="",this.defaultThumb="/assets/default_avatar.png",this.removeItemSubject=new te.x,this.list=[],this.hasDomainSelect=!1,this.loading=!0,this.lastResults=[],this.search=function(){var E=(0,N.Z)(function*(A){return l.lastDomain===l.selectedDomain&&l.lastSearchedValueWithoutResult&&A.startsWith(l.lastSearchedValueWithoutResult)?[]:(l.lastDomain=l.selectedDomain,l.lastResults=yield l.searchFunction(A,(0,g.vV)(l.selectedDomain)),l.lastSearchedValueWithoutResult=l.lastResults.length?void 0:A,l.lastResults.map(le=>({id:le.id,name:le.title})))});return function(A){return E.apply(this,arguments)}}(),this.selectedDomain=this.lastDomain=(null===(u=this.globalsService.credentials)||void 0===u?void 0:u.site.domain)||g.ig.FORUMFREE}ngOnInit(){this.hasDomainSelect=!0===this.field.props.selectDomain}populateListEvent(o){var i=this;return(0,N.Z)(function*(){i.list=(yield i.populateFunction(o)).sort((l,u)=>l.title.localeCompare(u.title)),i.loading=!1,i.changeDetectorRef.detectChanges()})()}updateListEvent(o){const i=this.lastResults.find(l=>l.id===o.selected.id);i&&(this.list=[...o.removed?this.list.filter(l=>{var u;return!(null!==(u=o.removed)&&void 0!==u&&u.includes(l.id))}):this.list,this.createEntityFunction(i)])}}return(t=s).\u0275fac=function(o){return new(o||t)(e.Y36(Te.d),e.Y36(e.sBO))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-formly-forum-typeahead"]],inputs:{field:"field",showError:"showError",listTitle:"listTitle",defaultThumb:"defaultThumb",searchFunction:"searchFunction",populateFunction:"populateFunction",createEntityFunction:"createEntityFunction"},decls:5,vars:6,consts:[[3,"field","showError","removeItemObservable","searchFunction","resultsTemplate","additionalInputsTemplate","populateListEvent","updateListEvent"],["contentList",""],["circuitSelect",""],[3,"listTitle","list","loading","defaultImage","removeEvent"],[3,"model","modelChange"]],template:function(o,i){if(1&o&&(e.TgZ(0,"app-formly-typeahead",0),e.NdJ("populateListEvent",function(u){return i.populateListEvent(u)})("updateListEvent",function(u){return i.updateListEvent(u)}),e.qZA(),e.YNc(1,nt,1,4,"ng-template",null,1,e.W1O)(3,ot,1,1,"ng-template",null,2,e.W1O)),2&o){const l=e.MAs(2),u=e.MAs(4);e.Q6J("field",i.field)("showError",i.showError)("removeItemObservable",i.removeItemSubject)("searchFunction",i.search)("resultsTemplate",l)("additionalInputsTemplate",i.hasDomainSelect?u:void 0)}},dependencies:[Me,Je,tt],encapsulation:2,changeDetection:0}),s})(),it=(()=>{var t;class s extends w.fS{constructor(o){var i;super(),i=this,this.forumService=o,this.defaultThumb="/assets/default_forum.jpg",this.listTitle="",this.search=function(){var l=(0,N.Z)(function*(u,E){const A=(0,g.$t)(E);return A?(yield i.forumService.searchForumByName(u,E)).map(M=>({id:"".concat(A.shortdomain).concat(M.id),title:M.domain,preview:M.preview})):[]});return function(u,E){return l.apply(this,arguments)}}(),this.populateList=function(){var l=(0,N.Z)(function*(u){const E=yield i.forumService.getForumDetailsFromCids(u),A=(0,g.tX)(u,E.map(M=>M.cid));return[...E.map(M=>i.generateTypeaheadContentEntity(M.cid,M.domain,M.preview)),...A.map(M=>i.generateTypeaheadContentEntity(M,M,i.defaultThumb,!0))]});return function(u){return l.apply(this,arguments)}}(),this.searchToTypeaheadContentEntity=l=>this.generateTypeaheadContentEntity(l.id,l.title,l.preview)}ngOnInit(){this.listTitle=!1===this.field.props.multiple?"Forum selezionato":"Lista forum"}generateTypeaheadContentEntity(o,i,l,u=!1){const E=(0,g.$t)(o);if(!E)throw new Error("Invalid cid ".concat(o,"!"));return{id:o,title:i,image:l,type:E.shortdomain,link:"https://"+(u?"".concat(E.domain,"/?cid=").concat(E.id):"".concat(i,".").concat(E.domain))}}}return(t=s).\u0275fac=function(o){return new(o||t)(e.Y36(z._))},t.\u0275cmp=e.Xpm({type:t,selectors:[["formly-field-forum-list"]],features:[e.qOj],decls:1,vars:7,consts:[[3,"field","showError","listTitle","defaultThumb","searchFunction","populateFunction","createEntityFunction"]],template:function(o,i){1&o&&e._UZ(0,"app-formly-forum-typeahead",0),2&o&&e.Q6J("field",i.field)("showError",i.showError)("listTitle",i.listTitle)("defaultThumb",i.defaultThumb)("searchFunction",i.search)("populateFunction",i.populateList)("createEntityFunction",i.searchToTypeaheadContentEntity)},dependencies:[ie],encapsulation:2,changeDetection:0}),s})();function rt(t,s){1&t&&(e.ynx(0),e.TgZ(1,"p",3),e._UZ(2,"span",4),e.qZA(),e.BQk())}function st(t,s){if(1&t&&(e.ynx(0),e._UZ(1,"option",9),e.BQk()),2&t){const n=s.$implicit;e.xp6(),e.Q6J("ngValue",n.id)("innerHTML"," - "+n.name,e.oJD)}}function lt(t,s){if(1&t&&(e.ynx(0),e.YNc(1,st,2,2,"ng-container",7),e.BQk()),2&t){const n=e.oxw().$implicit;e.xp6(),e.Q6J("ngForOf",n.subsections)}}function at(t,s){if(1&t&&(e.ynx(0),e._UZ(1,"option",9),e.YNc(2,lt,2,1,"ng-container",8),e.BQk()),2&t){const n=s.$implicit;e.xp6(),e.Q6J("ngValue",n.id)("innerHTML",n.name,e.oJD),e.xp6(),e.Q6J("ngIf",n.subsections&&n.subsections.length)}}function dt(t,s){if(1&t&&(e.ynx(0),e._UZ(1,"option",9),e.BQk()),2&t){const n=s.$implicit;e.xp6(),e.Q6J("ngValue",n)("innerHTML"," -- Sezione ristretta -- #"+n,e.oJD)}}function ct(t,s){if(1&t&&(e.ynx(0),e.YNc(1,dt,2,2,"ng-container",7),e.BQk()),2&t){const n=e.oxw(3);e.xp6(),e.Q6J("ngForOf",n.restrictedOrDeletedSections)}}function mt(t,s){if(1&t&&(e.ynx(0),e.TgZ(1,"select",6),e.YNc(2,at,3,3,"ng-container",7)(3,ct,2,1,"ng-container",8),e.qZA(),e.BQk()),2&t){const n=e.oxw(2);e.xp6(),e.ekj("is-invalid",n.showError),e.Q6J("formControl",n.formControl)("formlyAttributes",n.field),e.xp6(),e.Q6J("ngForOf",n.sectionsList),e.xp6(),e.Q6J("ngIf",n.restrictedOrDeletedSections.length>0)}}function pt(t,s){if(1&t&&(e.ynx(0),e._UZ(1,"option",9),e.BQk()),2&t){const n=s.$implicit;e.xp6(),e.Q6J("ngValue",n.id)("innerHTML"," - "+n.name,e.oJD)}}function ut(t,s){if(1&t&&(e.ynx(0),e.YNc(1,pt,2,2,"ng-container",7),e.BQk()),2&t){const n=e.oxw().$implicit;e.xp6(),e.Q6J("ngForOf",n.subsections)}}function ft(t,s){if(1&t&&(e.ynx(0),e._UZ(1,"option",9),e.YNc(2,ut,2,1,"ng-container",8),e.BQk()),2&t){const n=s.$implicit;e.xp6(),e.Q6J("ngValue",n.id)("innerHTML",n.name,e.oJD),e.xp6(),e.Q6J("ngIf",n.subsections&&n.subsections.length)}}function ht(t,s){if(1&t&&(e.ynx(0),e._UZ(1,"option",9),e.BQk()),2&t){const n=s.$implicit;e.xp6(),e.Q6J("ngValue",n)("innerHTML"," -- Sezione ristretta -- #"+n,e.oJD)}}function gt(t,s){if(1&t&&(e.ynx(0),e.YNc(1,ht,2,2,"ng-container",7),e.BQk()),2&t){const n=e.oxw(3);e.xp6(),e.Q6J("ngForOf",n.restrictedOrDeletedSections)}}function _t(t,s){if(1&t&&(e.TgZ(0,"select",10),e.YNc(1,ft,3,3,"ng-container",7)(2,gt,2,1,"ng-container",8),e.qZA()),2&t){const n=e.oxw(2);e.ekj("is-invalid",n.showError),e.Q6J("formControl",n.formControl)("formlyAttributes",n.field),e.xp6(),e.Q6J("ngForOf",n.sectionsList),e.xp6(),e.Q6J("ngIf",n.restrictedOrDeletedSections.length>0)}}function yt(t,s){if(1&t&&e.YNc(0,mt,4,6,"ng-container",1)(1,_t,3,6,"ng-template",null,5,e.W1O),2&t){const n=e.MAs(2),o=e.oxw();e.Q6J("ngIf",o.field.props.multiple)("ngIfElse",n)}}const vt=t=>({"no-label":t});let Ct=(()=>{var t;class s extends w.fS{constructor(o,i){super(),this.forumService=o,this.changeDetectorRef=i,this.loading=!0,this.sectionsList=[],this.restrictedOrDeletedSections=[]}prePopulate(o){o.props||(o.props={}),o.props.resetButton=!0}ngOnInit(){var o=this;return(0,N.Z)(function*(){o.field.defaultValue=void 0,(0,g.o8)(o.field.props,"multiple")||(o.field.props.multiple=!0),o.restrictedOrDeletedSections=Array.isArray(o.field.formControl.value)?[...o.field.formControl.value]:[];const i=yield o.forumService.getSections();o.sectionsList=i.map(l=>{const u=o.restrictedOrDeletedSections.indexOf(l.id);return u>-1&&o.restrictedOrDeletedSections.splice(u,1),(0,d.Z)((0,d.Z)({},l),{subsections:o.flattenSubsections(l)})}),o.loading=!1,o.field.formControl.updateValueAndValidity(),o.changeDetectorRef.detectChanges()})()}flattenSubsections(o){let i=[],l=-1;if(o.subsections&&o.subsections.length)for(const u of o.subsections)l=this.restrictedOrDeletedSections.indexOf(u.id),l>-1&&this.restrictedOrDeletedSections.splice(l,1),i.push(u),u.subsections&&(i=[...i,...this.flattenSubsections(u)]);return i}}return(t=s).\u0275fac=function(o){return new(o||t)(e.Y36(z._),e.Y36(e.sBO))},t.\u0275cmp=e.Xpm({type:t,selectors:[["formly-field-forum-sections"]],features:[e.qOj],decls:4,vars:5,consts:[[1,"position-relative","wrapper",3,"ngClass"],[4,"ngIf","ngIfElse"],["formSelect",""],[1,"placeholder-glow"],[1,"placeholder","col-12","placeholder-lg"],["single",""],["multiple","",1,"form-select",3,"formControl","formlyAttributes"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngValue","innerHTML"],[1,"form-select",3,"formControl","formlyAttributes"]],template:function(o,i){if(1&o&&(e.TgZ(0,"div",0),e.YNc(1,rt,3,0,"ng-container",1)(2,yt,3,2,"ng-template",null,2,e.W1O),e.qZA()),2&o){const l=e.MAs(3);e.Q6J("ngClass",e.VKq(3,vt,!i.props.label)),e.xp6(),e.Q6J("ngIf",i.loading)("ngIfElse",l)}},dependencies:[y.mk,y.sg,y.O5,w.JD,m.YN,m.Kr,m.EJ,m.K7,m.JJ,m.oH],encapsulation:2}),s})();var Ft=h(8418);let xt=(()=>{var t;class s extends w.fS{constructor(o){var i;super(),i=this,this.userService=o,this.defaultThumb="/assets/default_avatar.png",this.listTitle="",this.search=function(){var l=(0,N.Z)(function*(u,E){return(yield i.userService.searchUserByName(u,E)).map(A=>({id:A.uid,title:A.nickname,preview:A.avatar}))});return function(u,E){return l.apply(this,arguments)}}(),this.populateList=function(){var l=(0,N.Z)(function*(u){const E=yield i.userService.getDetailsFromUids(u),A=(0,g.tX)(u,E.map(M=>M.uid));return[...E.map(M=>i.generateTypeaheadContentEntity(M.uid,M.nickname,M.avatar)),...A.map(M=>i.generateTypeaheadContentEntity(M,M,i.defaultThumb))]});return function(u){return l.apply(this,arguments)}}(),this.searchToTypeaheadContentEntity=l=>this.generateTypeaheadContentEntity(l.id,l.title,l.preview)}ngOnInit(){this.listTitle=!1===this.field.props.multiple?"Utente selezionato":"Lista utenti"}generateTypeaheadContentEntity(o,i,l){const u=o.substring(0,2),E=(0,g.A)(u);if(!E)throw new Error("Invalid uid ".concat(o,"!"));return{id:o,title:i,image:l,type:u,link:"".concat(E,"/?act=Profile&MID=").concat(o.substring(2))}}}return(t=s).\u0275fac=function(o){return new(o||t)(e.Y36(Ft.K))},t.\u0275cmp=e.Xpm({type:t,selectors:[["formly-field-forum-users"]],features:[e.qOj],decls:1,vars:7,consts:[[3,"field","showError","listTitle","defaultThumb","searchFunction","populateFunction","createEntityFunction"]],template:function(o,i){1&o&&e._UZ(0,"app-formly-forum-typeahead",0),2&o&&e.Q6J("field",i.field)("showError",i.showError)("listTitle",i.listTitle)("defaultThumb",i.defaultThumb)("searchFunction",i.search)("populateFunction",i.populateList)("createEntityFunction",i.searchToTypeaheadContentEntity)},dependencies:[ie],encapsulation:2,changeDetection:0}),s})(),Tt=(()=>{var t;class s extends w.fS{constructor(){super(...arguments),this.defaultOptions={props:{label:""}}}}return(t=s).\u0275fac=(()=>{let n;return function(i){return(n||(n=e.n5z(t)))(i||t)}})(),t.\u0275cmp=e.Xpm({type:t,selectors:[["formly-field-label"]],features:[e.qOj],decls:2,vars:1,template:function(o,i){1&o&&(e.TgZ(0,"h5"),e._uU(1),e.qZA()),2&o&&(e.xp6(),e.Oqu(i.props.label))},encapsulation:2,changeDetection:0}),s})(),Ot=(()=>{var t;class s{}return(t=s).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[y.ez,m.u5]}),s})();var re=h(3038),se=h(5063);let Et=(()=>{var t;class s{}return(t=s).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[y.ez,ne.mZ,Q.q,re.G,se.g]}),s})(),Mt=(()=>{var t;class s{}return(t=s).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[y.ez,w.X0.forChild(),m.u5,X.ZS]}),s})(),bt=(()=>{var t;class s{}return(t=s).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[y.ez,Ot,w.X0.forChild(),m.u5,m.UX,Et,Mt]}),s})();var wt=h(4295);let St=(()=>{var t;class s{}return(t=s).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[y.ez,Q.Vy,Q.d3,bt,w.X0.forChild({types:[{name:"array",component:F},{name:"code-editor",component:fe,wrappers:["form-field"]},{name:"forum-groups",component:xe,wrappers:["form-field"]},{name:"forum-sections",component:Ct,wrappers:["form-field"]},{name:"label",component:Tt},{name:"forum-users",component:xt},{name:"forum-list",component:it}]}),m.u5,wt.$,Q.q,de,X.ZS,re.G,se.g]}),s})()},336:(ee,G,h)=>{h.d(G,{c:()=>x});var y=h(9376),Q=h(91),g=h(1413),w=h(9212),e=h(6223),P=h(5545),q=h(9397);const R=["key","isOptional"],$=["allOf"];function L(p){return""===p||null==p}function U(p){return null!=p&&"object"==typeof p&&!Array.isArray(p)}function j(p){return"object"==typeof p&&(p.hasOwnProperty("const")||p.enum&&1===p.enum.length)}function a(p){if(!p.fieldGroup)return(0,P._S)(p)&&void 0!==(0,P.Hl)(p)?1:0;const S=p.fieldGroup.reduce((r,_)=>a(_)+r,0);if(0===S&&(0,P._S)(p)){const r=(0,P.Hl)(p);if(null===r||void 0!==r&&(p.fieldArray&&Array.isArray(r)||!p.fieldArray&&U(r)))return 1}return S}let x=(()=>{class p{toFieldConfig(r,_){return r=(0,P.kg)(r),this._toFieldConfig(r,(0,g.Z)({schema:r},_||{}))}_toFieldConfig(r,_){var T;let{key:O,isOptional:v}=_,f=(0,Q.Z)(_,R);r=this.resolveSchema(r,f);const F=this.guessSchemaType(r);let d={type:F[0],defaultValue:r.default,props:{label:r.title,readonly:r.readOnly,description:r.description}};if(null!=O&&(d.key=O),!f.ignoreDefault&&(r.readOnly||f.readOnly)&&(d.props.disabled=!0,f=(0,g.Z)((0,g.Z)({},f),{},{readOnly:!0})),f.resetOnHide&&(d.resetOnHide=!0),!1===f.shareFormControl&&(d.shareFormControl=!1),void 0===d.defaultValue&&1===F.length&&!1===v)switch(F[0]){case"null":d.defaultValue=null;break;case"string":d.defaultValue="";break;case"object":d.defaultValue={};break;case"array":d.defaultValue=r.minItems>0?Array.from(new Array(r.minItems)):[]}switch(f.ignoreDefault&&delete d.defaultValue,this.addValidator(d,"type",{schemaType:F,expression:({value:c})=>{if(void 0===c||null===c&&-1!==F.indexOf("null"))return!0;switch(F[0]){case"null":return null===typeof c;case"string":return"string"==typeof c;case"integer":return function V(p){return Number.isInteger?Number.isInteger(p):"number"==typeof p&&Math.floor(p)===p}(c);case"number":return"number"==typeof c;case"object":return U(c);case"array":return Array.isArray(c)}return!0}}),d.type){case"number":case"integer":d.parsers=[(c,m)=>{if(c=function k(p){if(""===p||void 0===p)return;if(null===p)return null;if("number"==typeof p)return p;const S=parseFloat(p);return isNaN(S)?p:S}(c),null===c&&m){const C=typeof document<"u"&&m.id?document.querySelector("#".concat(m.id)):void 0;C&&!C.validity.badInput&&(c=void 0),c!==m.formControl.value&&m.formControl.setValue(c,{emitModelToViewChange:!1})}return c}],r.hasOwnProperty("minimum")&&(d.props.min=r.minimum),r.hasOwnProperty("maximum")&&(d.props.max=r.maximum),r.hasOwnProperty("exclusiveMinimum")&&(d.props.exclusiveMinimum=r.exclusiveMinimum,this.addValidator(d,"exclusiveMinimum",({value:c})=>L(c)||c>r.exclusiveMinimum)),r.hasOwnProperty("exclusiveMaximum")&&(d.props.exclusiveMaximum=r.exclusiveMaximum,this.addValidator(d,"exclusiveMaximum",({value:c})=>L(c)||c<r.exclusiveMaximum)),r.hasOwnProperty("multipleOf")&&(d.props.step=r.multipleOf,this.addValidator(d,"multipleOf",({value:c})=>{if(L(c)||"number"!=typeof c||0===c||r.multipleOf<=0)return!0;const m=Math.pow(10,function B(p){if(!isFinite(p))return 0;let S=1,r=0;for(;Math.round(p*S)/S!==p;)S*=10,r++;return r}(r.multipleOf));return Math.round(c*m)%Math.round(r.multipleOf*m)==0}));break;case"string":d.parsers=[(c,m)=>(-1!==F.indexOf("null")?c=L(c)?null:c:m&&!m.props.required&&(c=""===c?void 0:c),c)],["minLength","maxLength","pattern"].forEach(c=>{r.hasOwnProperty(c)&&(d.props[c]=r[c])});break;case"object":{d.fieldGroup||(d.fieldGroup=[]);const{propDeps:c,schemaDeps:m}=this.resolveDependencies(r);Object.keys(r.properties||{}).forEach(C=>{const D=Array.isArray(r.required)&&-1!==r.required.indexOf(C),Z=this._toFieldConfig(r.properties[C],(0,g.Z)((0,g.Z)({},f),{},{key:C,isOptional:v||!D}));if(d.fieldGroup.push(Z),(D||c[C])&&(Z.expressions=(0,g.Z)((0,g.Z)({},Z.expressions||{}),{},{"props.required":I=>{let b=I.parent;const J=I.fieldGroup&&null!=I.key?b.model:I.model;for(;null==b.key&&b.parent;)b=b.parent;return!!(J||b&&b.props&&b.props.required)&&(!(!Array.isArray(r.required)||-1===r.required.indexOf(C))||c[C]&&I.model&&c[C].some(H=>!L(I.model[H])))}})),m[C]){const I=J=>J.hasOwnProperty("const")?J.const:J.enum[0],b=m[C].oneOf;b&&b.every(J=>J.properties&&J.properties[C]&&j(J.properties[C]))?b.forEach(J=>{const Y=J.properties,{[C]:H}=Y,W=(0,Q.Z)(Y,[C].map(y.Z));d.fieldGroup.push((0,g.Z)((0,g.Z)({},this._toFieldConfig((0,g.Z)((0,g.Z)({},J),{},{properties:W}),(0,g.Z)((0,g.Z)({},f),{},{shareFormControl:!1,resetOnHide:!0}))),{},{expressions:{hide:K=>!K.model||I(H)!==K.model[C]}}))}):d.fieldGroup.push((0,g.Z)((0,g.Z)({},this._toFieldConfig(m[C],f)),{},{expressions:{hide:J=>!J.model||L(J.model[C])}}))}}),r.oneOf&&d.fieldGroup.push(this.resolveMultiSchema("oneOf",r.oneOf,(0,g.Z)((0,g.Z)({},f),{},{shareFormControl:!1}))),r.anyOf&&d.fieldGroup.push(this.resolveMultiSchema("anyOf",r.anyOf,f));break}case"array":r.hasOwnProperty("minItems")&&(d.props.minItems=r.minItems,this.addValidator(d,"minItems",({value:c})=>L(c)||c.length>=r.minItems),!v&&r.minItems>0&&void 0===d.defaultValue&&(d.defaultValue=Array.from(new Array(r.minItems)))),r.hasOwnProperty("maxItems")&&(d.props.maxItems=r.maxItems,this.addValidator(d,"maxItems",({value:c})=>L(c)||c.length<=r.maxItems)),r.hasOwnProperty("uniqueItems")&&(d.props.uniqueItems=r.uniqueItems,this.addValidator(d,"uniqueItems",({value:c})=>!(!L(c)&&r.uniqueItems)||Array.from(new Set(c.map(C=>JSON.stringify(C,(D,Z)=>U(Z)?Object.keys(Z).sort().reduce((I,b)=>(I[b]=Z[b],I),{}):Z)))).length===c.length)),r.items&&!Array.isArray(r.items)&&(r.items=this.resolveSchema(r.items,f)),this.isEnum(r)||(d.fieldArray=c=>{const m=c.fieldGroup?c.fieldGroup.length:0,C=r.items;if(!Array.isArray(C)){if(!C)return{};const I=C.oneOf||C.anyOf,b=this._toFieldConfig(C,(0,g.Z)((0,g.Z)({},f),{},I?{key:"".concat(m),isOptional:!1}:{isOptional:!1}));return I&&!(0,P._S)(b)&&(b.key=null),b}const D=C[m]?C[m]:r.additionalItems,Z=D?this._toFieldConfig(D,f):{};return Z.props&&(Z.props.required=!0),C[m]&&(Z.props.removable=!1),Z})}if(r.hasOwnProperty("const")&&(d.props.const=r.const,this.addValidator(d,"const",({value:c})=>c===r.const),d.type||(d.defaultValue=r.const)),this.isEnum(r)){const c=this.toEnumOptions(r),m="array"===d.type;d.type="enum",d.props.multiple=m,d.props.options=c;const C=c.map(D=>D.value);this.addValidator(d,"enum",({value:D})=>void 0===D||(m?!!Array.isArray(D)&&D.every(Z=>C.includes(Z)):C.includes(D)))}return r.oneOf&&!d.type&&(delete d.key,d.fieldGroup=[this.resolveMultiSchema("oneOf",r.oneOf,(0,g.Z)((0,g.Z)({},f),{},{key:O,shareFormControl:!1}))]),r.anyOf&&!d.type&&(delete d.key,d.fieldGroup=[this.resolveMultiSchema("oneOf",r.anyOf,(0,g.Z)((0,g.Z)({},f),{},{key:O,shareFormControl:!1}))]),null!==(T=r.widget)&&void 0!==T&&T.formlyConfig&&(d=this.mergeFields(d,r.widget.formlyConfig)),d.templateOptions=d.props,f.map?f.map(d,r):d}resolveSchema(r,_){return r&&r.$ref&&(r=this.resolveDefinition(r,_)),r&&r.allOf&&(r=this.resolveAllOf(r,_)),r}resolveAllOf(r,_){let{allOf:T}=r,O=(0,Q.Z)(r,$);if(!T.length)throw Error("allOf array can not be empty ".concat(T,"."));return T.reduce((v,f)=>(f=this.resolveSchema(f,_),v.required&&f.required&&(v.required=[...v.required,...f.required]),f.uniqueItems&&(v.uniqueItems=f.uniqueItems),["maxLength","maximum","exclusiveMaximum","maxItems","maxProperties"].forEach(F=>{!L(v[F])&&!L(f[F])&&(v[F]=v[F]<f[F]?v[F]:f[F])}),["minLength","minimum","exclusiveMinimum","minItems","minProperties"].forEach(F=>{!L(v[F])&&!L(f[F])&&(v[F]=v[F]>f[F]?v[F]:f[F])}),(0,P.Du)(v,f)),O)}resolveMultiSchema(r,_,T){return{type:"multischema",fieldGroup:[{type:"enum",defaultValue:-1,props:{multiple:"anyOf"===r,options:_.map((O,v)=>({label:O.title,value:v,disabled:O.readOnly}))},hooks:{onInit:O=>O.formControl.valueChanges.pipe((0,q.b)(()=>O.options.detectChanges(O.parent)))}},{fieldGroup:_.map((O,v)=>(0,g.Z)((0,g.Z)({},this._toFieldConfig(O,(0,g.Z)((0,g.Z)({},T),{},{resetOnHide:!0}))),{},{expressions:{hide:(f,F)=>{const d=f.parent.parent.fieldGroup[0].formControl;if(-1===d.value||F){let c=f.parent.fieldGroup.map((m,C)=>[m,C,this.isFieldValid(m,C,_,T)]).sort(([m,,C],[D,,Z])=>{if(C!==Z)return Z?1:-1;const I=a(m),b=a(D);return I===b&&m.props.disabled===D.props.disabled?0:b>I?1:-1}).map(([,m])=>m);if("anyOf"===r){const m=c.filter(C=>a(f.parent.fieldGroup[C]));c=m.length>0?m:[c[0]||0]}c=c.length>0?c:[0],d.setValue("anyOf"===r?c:c[0])}return Array.isArray(d.value)?-1===d.value.indexOf(v):d.value!==v}}}))}]}}resolveDefinition(r,_){const[T,O]=r.$ref.split("#/");if(T)throw Error("Remote schemas for ".concat(r.$ref," not supported yet."));const v=O?O.split("/").reduce((f,F)=>null!=f&&f.hasOwnProperty(F)?f[F]:null,_.schema):null;if(!v)throw Error("Cannot find a definition for ".concat(r.$ref,"."));return v.$ref?this.resolveDefinition(v,_):(0,g.Z)((0,g.Z)({},v),["title","description","default","widget"].reduce((f,F)=>(r.hasOwnProperty(F)&&(f[F]=r[F]),f),{}))}resolveDependencies(r){const _={},T={};return Object.keys(r.dependencies||{}).forEach(O=>{const v=r.dependencies[O];Array.isArray(v)?v.forEach(f=>{_[f]?_[f].push(O):_[f]=[O]}):T[O]=v}),{propDeps:_,schemaDeps:T}}guessSchemaType(r){const _=null==r?void 0:r.type;return!_&&null!=r&&r.properties?["object"]:Array.isArray(_)?1===_.length?_:2===_.length&&-1!==_.indexOf("null")?_.sort(T=>"null"==T?1:-1):_:_?[_]:[]}addValidator(r,_,T){r.validators=r.validators||{},r.validators[_]=T}isEnum(r){return!!r.enum||r.anyOf&&r.anyOf.every(j)||r.oneOf&&r.oneOf.every(j)||r.uniqueItems&&r.items&&!Array.isArray(r.items)&&this.isEnum(r.items)}toEnumOptions(r){if(r.enum)return r.enum.map(T=>({value:T,label:T}));const _=T=>{const O=T.hasOwnProperty("const")?T.const:T.enum[0],v={value:O,label:T.title||O};return T.readOnly&&(v.disabled=!0),v};return r.anyOf?r.anyOf.map(_):r.oneOf?r.oneOf.map(_):this.toEnumOptions(r.items)}isFieldValid(r,_,T,O){const v=T[_];v._field||Object.defineProperty(v,"_field",{enumerable:!1,writable:!0,configurable:!0});let f=v._field,F=r.model?r.model:r.fieldArray?[]:{};return r.model&&(0,P._S)(r)&&(F={[Array.isArray(r.key)?r.key.join("."):r.key]:(0,P.Hl)(r)}),F=(0,P.kg)(F),f?(f.model=F,r.options.build(f)):f=v._field=r.options.build({form:Array.isArray(F)?new e.Oe([]):new e.cw({}),fieldGroup:[this._toFieldConfig(v,(0,g.Z)((0,g.Z)({},O),{},{resetOnHide:!0,ignoreDefault:!0,map:null}))],model:F,options:{}}),f.form.valid}mergeFields(r,_){for(let T in _){const O="templateOptions"===T?"props":T;U(r[O])&&U(_[T])?r[O]=this.mergeFields(r[O],_[T]):null!=_[T]&&(r[O]=_[T])}return r}}return p.\u0275fac=function(r){return new(r||p)},p.\u0275prov=w.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()}}]);