(self.webpackChunkpages=self.webpackChunkpages||[]).push([[70],{5851:(ee,W,t)=>{"use strict";t.d(W,{B:()=>Y});var h=t(5861),y=t(1378),e=t(5879),T=t(2438),C=t(4036),a=t(9054),I=t(4020),P=t(148),c=t(9093),v=t(7621),O=t(1990),m=t(5661),U=t(5172),D=t(3845),K=t(4887),j=t(5487),V=t(658),A=t(9515),_=t(6814),p=t(6223),d=t(9473),E=t(554),M=t(4464),L=t(4228);const H=["fileInput"];function S(i,F){1&i&&(e.O4$(),e.TgZ(0,"svg",31),e._UZ(1,"path",32)(2,"path",33),e.qZA())}const k=function(){return["text-primary"]};function te(i,F){1&i&&e._UZ(0,"app-logo",34),2&i&&e.Q6J("svgClass",e.DdM(2,k))("responsive",!1)}function ie(i,F){1&i&&(e._UZ(0,"span",38),e.ALo(1,"translate")),2&i&&e.Q6J("innerHTML",e.lcZ(1,1,"COMPONENTS.UPLOADER.DESCRIPTION.DESKTOP"),e.oJD)}function me(i,F){1&i&&(e._UZ(0,"span",38),e.ALo(1,"translate")),2&i&&e.Q6J("innerHTML",e.lcZ(1,1,"COMPONENTS.UPLOADER.DESCRIPTION.TOUCH"),e.oJD)}const ve=function(i){return{"fw-bold fs-md-lg":i}},pe=function(i){return{"text-decoration-underline":i}};function oe(i,F){if(1&i){const f=e.EpF();e.TgZ(0,"div",35),e.YNc(1,ie,2,3,"span",36),e.YNc(2,me,2,3,"span",36),e.TgZ(3,"span",37),e.NdJ("click",function(r){e.CHM(f);const l=e.oxw(2),B=e.MAs(23);return e.KtG(l.toggleRemoteUrlForm(r,B))}),e._uU(4),e.ALo(5,"translate"),e.qZA()()}if(2&i){const f=e.oxw(2);e.Q6J("ngClass",e.VKq(7,ve,!f.isWidget)),e.xp6(1),e.Q6J("ngIf",!f.touchDevice),e.xp6(1),e.Q6J("ngIf",f.touchDevice),e.xp6(1),e.Q6J("ngClass",e.VKq(9,pe,f.isWidget)),e.xp6(1),e.Oqu(e.lcZ(5,5,"COMPONENTS.UPLOADER.DESCRIPTION.REMOTE_URL"))}}function Ee(i,F){1&i&&e.GkF(0)}function Oe(i,F){if(1&i){const f=e.EpF();e.TgZ(0,"div",39),e.YNc(1,Ee,1,0,"ng-container",17),e.TgZ(2,"button",40),e.NdJ("click",function(r){e.CHM(f);const l=e.oxw(2);return e.KtG(l.handleRemoteUrlUpload(r))}),e.O4$(),e.TgZ(3,"svg",41),e._UZ(4,"path",42),e.qZA()(),e.kcU(),e.TgZ(5,"button",43),e.NdJ("click",function(r){e.CHM(f);const l=e.oxw(2);return e.KtG(l.toggleRemoteUrlForm(r))}),e.O4$(),e.TgZ(6,"svg",41),e._UZ(7,"path",44),e.qZA()()()}if(2&i){const f=e.oxw(2),u=e.MAs(34);e.xp6(1),e.Q6J("ngTemplateOutlet",u),e.xp6(1),e.Q6J("disabled",0===f.remoteUrl.length||!f.isRemoteUrlValid)}}function Me(i,F){if(1&i&&(e.ynx(0),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"em",45),e.ALo(5,"arrayJoin"),e.BQk()),2&i){const f=e.oxw(2);e.xp6(2),e.hij("",e.lcZ(3,2,"COMPONENTS.UPLOADER.PATH.LONG")," "),e.xp6(2),e.Q6J("innerText",f.currentFolderPath.length?e.xi3(5,4,f.currentFolderPath,"/"):"root")}}function g(i,F){if(1&i&&(e._UZ(0,"div",50),e.ALo(1,"arrayJoin"),e.ALo(2,"slice")),2&i){const f=e.oxw(3);e.Q6J("innerText",e.xi3(1,1,e.Dn7(2,4,f.currentFolderPath,0,-1),"/"))}}function n(i,F){if(1&i&&(e.TgZ(0,"div",46)(1,"div",47),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,g,3,8,"div",48),e._UZ(5,"div",49),e.ALo(6,"arrayJoin"),e.ALo(7,"slice"),e.qZA()),2&i){const f=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,3,"COMPONENTS.UPLOADER.PATH.SHORT")," "),e.xp6(2),e.Q6J("ngIf",f.currentFolderPath.length>1),e.xp6(1),e.Q6J("innerText",(f.currentFolderPath.length>1?"/":"")+(f.currentFolderPath.length?e.xi3(6,5,e.xi3(7,8,f.currentFolderPath,f.currentFolderPath.length-1),"/"):"root"))}}const o=function(){return{bottom:0,left:0}};function s(i,F){if(1&i){const f=e.EpF();e.ynx(0),e.TgZ(1,"a",51),e.NdJ("click",function(){e.CHM(f);const r=e.oxw(2);return e.KtG(r.openInfoModal.emit())}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",52),e.NdJ("click",function(){e.CHM(f),e.oxw(2);const r=e.MAs(7);return e.KtG(r.open())}),e._uU(5," settings "),e.qZA(),e.TgZ(6,"div",53),e.NdJ("click",function(r){e.CHM(f);const l=e.oxw(2),B=e.MAs(23);return e.KtG(l.toggleRemoteUrlForm(r,B))}),e._uU(7," add_link "),e.qZA(),e.BQk()}2&i&&(e.xp6(1),e.Q6J("ngStyle",e.DdM(4,o)),e.xp6(1),e.Oqu(e.lcZ(3,2,"COMPONENTS.UPLOADER.INFO")))}const x=function(i,F,f){return{"cursor-pointer":i,"py-4 px-3 px-sm-4":F,"p-2 pb-3":f}},b=function(i,F,f){return{"my-2":i,"mb-2":F,"mw-100 mt-1":f}};function J(i,F){if(1&i){const f=e.EpF();e.ynx(0),e.TgZ(1,"div",22,23),e.NdJ("dragenter",function(){e.CHM(f);const r=e.MAs(2),l=e.oxw();return e.KtG(l.setDragOverEvent(r))})("drop",function(r){e.CHM(f);const l=e.oxw();return e.KtG(l.handleDropEvent(r))})("click",function(){e.CHM(f);const r=e.oxw(),l=e.MAs(2);return e.KtG(!r.isWaitingRemoteUrl&&l.click())}),e.YNc(3,S,3,0,"svg",24),e.YNc(4,te,1,3,"ng-template",null,25,e.W1O),e.YNc(6,oe,6,11,"div",26),e.YNc(7,Oe,8,2,"div",27),e.TgZ(8,"div",28),e.YNc(9,Me,6,7,"ng-container",3),e.YNc(10,n,8,11,"ng-template",null,29,e.W1O),e.qZA()(),e.YNc(12,s,8,5,"ng-container",30),e.BQk()}if(2&i){const f=e.MAs(5),u=e.MAs(11),r=e.oxw();e.xp6(1),e.Q6J("ngClass",e.kEZ(9,x,!r.loading&&!r.isWaitingRemoteUrl,!r.isWidget,r.isWidget)),e.xp6(2),e.Q6J("ngIf",!r.isWidget)("ngIfElse",f),e.xp6(3),e.Q6J("ngIf",!r.isWidget||!r.isWaitingRemoteUrl),e.xp6(1),e.Q6J("ngIf",r.isWidget&&r.isWaitingRemoteUrl),e.xp6(1),e.Q6J("ngClass",e.kEZ(13,b,!r.isWidget&&!r.touchDevice,!r.isWidget&&r.touchDevice,r.isWidget)),e.xp6(1),e.Q6J("ngIf",!r.isWidget)("ngIfElse",u),e.xp6(3),e.Q6J("ngIf",!r.isWidget)}}const Z=function(i,F){return{"p-4":i,"p-2":F}};function R(i,F){if(1&i&&(e.TgZ(0,"div",54),e.O4$(),e.TgZ(1,"svg",55),e._UZ(2,"path",56),e.qZA(),e.kcU(),e._UZ(3,"app-loader",57),e.TgZ(4,"div",58),e._uU(5),e.ALo(6,"translate"),e.qZA()()),2&i){const f=e.oxw();e.Q6J("ngClass",e.WLB(6,Z,!f.isWidget,f.isWidget)),e.xp6(3),e.Q6J("onlyMessage",!0)("message",f.loadingMessage),e.xp6(2),e.hij(" ",e.lcZ(6,4,"COMPONENTS.UPLOADER.LOADING.SUBTEXT")," ")}}function w(i,F){1&i&&e.GkF(0)}const G=function(i){return{"fs-reset":i}};function $(i,F){if(1&i){const f=e.EpF();e.TgZ(0,"input",59,60),e.NdJ("ngModelChange",function(r){e.CHM(f);const l=e.oxw();return e.KtG(l.remoteUrl=r)})("ngModelChange",function(){e.CHM(f);const r=e.MAs(1),l=e.oxw();return e.KtG(l.isRemoteUrlValid=!r.invalid)}),e.ALo(2,"translate"),e.qZA()}if(2&i){const f=e.oxw();e.Q6J("placeholder",e.lcZ(2,4,"COMPONENTS.UPLOADER.REMOTE_URL_INPUT_PLACEHOLDER"))("ngClass",e.VKq(6,G,f.isWidget))("ngModel",f.remoteUrl)("pattern","^https?://[^.]+\\.(.+)")}}const re=function(i,F){return{uploading:i,"widget flex-grow-1 min-w-0":F}};let Y=(()=>{var i;class F{constructor(u,r,l,B,N,z,ne,X,q){this.postMessageService=u,this.uploadService=r,this.uploadObservablesService=l,this.uploaderService=B,this.toastService=N,this.renderer=z,this.ngZone=ne,this.translateService=X,this.proxyService=q,this.loading=!0,this.currentFolderPath=[],this.isWidget=!1,this.fileUploadedEvent=new e.vpe,this.openInfoModal=new e.vpe,this.isUploading=!1,this.loadingMessage="",this.touchDevice=I.eX,this.isWaitingRemoteUrl=!1,this.remoteUrl="",this.isRemoteUrlValid=!1,this.dragOverEvent=!1,this.checkingFileMessage="",this.options=this.uploaderService.uploaderOptions;const se=this.uploadService.preferences.uploader;se.checkImage.active||(this.options.compress=!1),se.showLinkModal&&(this.options.openLinkModalAfterUpload=!0),this.uploaderService.uploaderOptions=this.options}ngOnInit(){var u=this;return(0,h.Z)(function*(){u.handleClipboardPasteEvent(),u.handleExternalUpload(),u.checkingFileMessage=u.translateService.instant("COMPONENTS.UPLOADER.LOADING.MESSAGE.CHECK"),u.loadingMessage=u.checkingFileMessage})()}handleClipboardPasteEvent(){var u=this;this.clipboardPasteEventSubscription=(0,T.R)(document.body,"paste").subscribe(function(){var r=(0,h.Z)(function*(l){if(u.isWidget&&u.isWaitingRemoteUrl||!u.canUpload())return;const B=Array.from((l.clipboardData||l.originalEvent.clipboardData).items);let N=[];for(const z of B)if(0===z.type.indexOf("image")){const ne=z.getAsFile();ne&&N.push(ne)}N.length>0?yield u.preUpload(N):u.reset()});return function(l){return r.apply(this,arguments)}}())}handleExternalUpload(){var u=this;this.startExternalUploadSubscription=this.uploadObservablesService.startUploadObservable.subscribe(function(){var r=(0,h.Z)(function*(l){if(l){if(!u.canUpload())return;yield u.preUpload([l.file],l.options)}else u.fileInputRef.nativeElement.click()});return function(l){return r.apply(this,arguments)}}())}handleSelectionEvent(u){var r=this;return(0,h.Z)(function*(){if(!r.canUpload())return;const l=u.target;if(l.files&&l.files.length){const B=Array.from(l.files);return l.value="",r.preUpload(B)}r.reset()})()}handleDropEvent(u){var r=this;return(0,h.Z)(function*(){var l;if(u.preventDefault(),u.stopPropagation(),u.stopImmediatePropagation(),!r.canUpload())return;const B=null!==(l=u.dataTransfer)&&void 0!==l&&l.files?Array.from(u.dataTransfer.files):[];if(B.length)return r.preUpload(B);r.reset()})()}handleRemoteUrlUpload(u,r){var l=this;return(0,h.Z)(function*(){if(!l.isRemoteUrlValid||0===l.remoteUrl.length||!l.canUpload())return;const B=l.remoteUrl;l.loadingMessage=l.translateService.instant("COMPONENTS.UPLOADER.LOADING.MESSAGE.GETTING_REMOTE_FILE"),l.toggleRemoteUrlForm(u,r);const N=(0,a.Tb)(B);if(!N.ext||-1===O.O8.findIndex(ne=>-1!==ne.ext.indexOf(N.ext)))return l.handleErrors([N.name],[]),void l.reset();const z=yield l.proxyService.get(B);return z?l.preUpload([new File([z],N.name,{type:z.type,lastModified:Date.now()})]):(l.toastService.show({content:"Errore nel recupero dell'immagine dall'url!",level:y.m.ERROR}),l.postMessageService.send(P.l.UPLOAD_ERROR,{filename:N.name,error:D.S.REMOTE_URL_RESPONSE}),void l.reset())})()}saveOptions(u=!0){this.uploaderService.uploaderOptions=this.options,u&&this.savePreferences()}savePreferences(){this.uploadService.preferences.uploader={checkImage:{active:this.options.compress,time:Date.now()},showLinkModal:this.options.openLinkModalAfterUpload}}setDragOverEvent(u){this.dragOverEvent||(this.dragOverEvent=!0,this.ngZone.runOutsideAngular(()=>{this.renderer.listen(u,"dragover",r=>{r.preventDefault()})}))}canUpload(){return!this.loading&&!this.isUploading&&(this.isUploading=!0,this.dragOverEvent=!1,!0)}reset(){this.isUploading=!1,this.loadingMessage=this.checkingFileMessage,this.postMessageService.send(P.l.UPLOAD_END,{}),this.options.allowOverwrite=!1,this.saveOptions(!1)}preUpload(u,r){var l=this;return(0,h.Z)(function*(){const B=[...l.currentFolderPath];let N=[],z=[],ne=[],X=[];r?r.allowOverwrite=r.allowOverwrite||!1:(r=l.uploaderService.uploaderOptions).allowOverwrite=!1;for(let Q=0;Q<u.length;Q++){const ce=yield l.uploaderService.orientAndCompressFileIfNeeded(u[Q]),ae=ce.compressorCheck?ce.file:r.compress?yield l.uploaderService.compressFileIfNeeded(u[Q],r.imageDimensions?{width:r.imageDimensions.width,height:r.imageDimensions.height}:{}):u[Q];if(ae){const ue=(0,a.Tb)(ae.name),_e=O.O8.find(fe=>-1!==fe.ext.indexOf(ue.ext));if(!_e){ne.push(ae.name);continue}if(ae.size>_e.maxSize){X.push(ae.name);continue}N.push({file:{name:ae.name,size:ae.size,time:0,url:"",ext:ue.ext,filename:ue.filename,isImage:(0,a.Or)(ue.ext),embedUrl:"",type:U.VC.FILE},progress:0,completed:!1}),z.push(ae)}}if(l.handleErrors(ne,X),0===z.length)return void l.reset();const q=l.translateService.instant("COMPONENTS.UPLOADER.LOADING.MESSAGE.UPLOADING",{total:z.length}),se=l.translateService.instant("COMPONENTS.UPLOADER.LOADING.MESSAGE.CREATING_PACKAGE",{total:z.length});l.uploadObservablesService.pushUploadingFileQueue(N);for(let Q=0;Q<z.length;++Q){l.loadingMessage=se;const ce=yield l.uploadService.getHostToken(B,z[Q].name);N[Q].progress+=20,l.loadingMessage=q.replace("{{current}}",`${Q+1}`),yield(0,C.z)(l.uploaderService.upload(z[Q],N[Q],ce,r.allowOverwrite))}l.uploadObservablesService.pushUploadingFileQueue([]);const le=N.filter(Q=>!Q.error).map(Q=>Q.file);le.length>0&&(l.fileUploadedEvent.emit({list:le,rewrite:r.allowOverwrite,destPath:B}),l.postMessageService.send(P.l.UPLOAD_SUCCESS,{fileList:le.map(Q=>({filename:Q.name,isImage:Q.isImage,url:Q.url}))}),r.openLinkModalAfterUpload&&l.uploadObservablesService.pushAction({name:U.In.FILE_SHOW_LINKS,payload:{entities:(0,a.jL)(le)}})),l.reset()})()}handleErrors(u,r){if(0!==u.length||0!==r.length){if(!this.isWidget)return void this.toastService.show({content:this.createToastMessage(u,r),level:y.m.ERROR});[[D.S.UNSUPPORTED,u],[D.S.OVERSIZED,r]].forEach(l=>{l[1].forEach(B=>{this.postMessageService.send(P.l.UPLOAD_ERROR,{filename:B,error:l[0]})})})}}createToastMessage(u,r){let l=[];return u.length&&l.push(u.length>1?`I file <strong>${u.join(", ")}</strong> hanno un formato non supportato!`:`Il file <strong>${u[0]}</strong> ha un formato non supportato!`),r.length&&l.push(r.length>1?`I file <strong>${r.join(", ")}</strong> sono troppo pesanti!`:`Il file <strong>${r[0]}</strong> \xe8 troppo pesante!`),l.join("<br><br>")}toggleRemoteUrlForm(u,r){u.stopPropagation(),this.isWidget||(this.isWaitingRemoteUrl?null==r||r.close():null==r||r.open()),this.resetRemoteUrlForm(!this.isWaitingRemoteUrl)}resetRemoteUrlForm(u){this.isWaitingRemoteUrl=u,this.remoteUrl=""}ngOnDestroy(){var u;null===(u=this.startExternalUploadSubscription)||void 0===u||u.unsubscribe(),this.clipboardPasteEventSubscription.unsubscribe(),this.uploaderService.clearPendingRequests()}}return(i=F).\u0275fac=function(u){return new(u||i)(e.Y36(c.F),e.Y36(V.C),e.Y36(j.r),e.Y36(K.q),e.Y36(m.k),e.Y36(e.Qsj),e.Y36(e.R0b),e.Y36(A.sK),e.Y36(v.y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-uploader"]],viewQuery:function(u,r){if(1&u&&e.Gf(H,5),2&u){let l;e.iGM(l=e.CRH())&&(r.fileInputRef=l.first)}},inputs:{loading:"loading",currentFolderPath:"currentFolderPath",isWidget:"isWidget"},outputs:{fileUploadedEvent:"fileUploadedEvent",openInfoModal:"openInfoModal"},decls:35,vars:37,consts:[[1,"uploader","rounded","position-relative",3,"ngClass"],["type","file",1,"d-none",3,"multiple","disabled","change"],["fileInput",""],[4,"ngIf","ngIfElse"],["uploading",""],[3,"title"],["optionsModal",""],[3,"innerHtml"],[1,"mb-1","list-unstyled"],[1,"form-check","form-switch"],["type","checkbox","role","switch","id","speed-upload",1,"form-check-input",3,"ngModel","ngModelChange"],["for","speed-upload",1,"form-check-label","me-auto",3,"innerHTML"],["type","checkbox","role","switch","id","show-link-modal",1,"form-check-input",3,"ngModel","ngModelChange"],["for","show-link-modal",1,"form-check-label","me-auto",3,"innerHTML"],["size","md",3,"title","disableCloseButton","hidden"],["remoteUrlModal",""],[1,"mb-2",3,"innerHTML"],[4,"ngTemplateOutlet"],["footer",""],["type","button",1,"btn","btn-secondary",3,"innerText","click"],["type","button",1,"btn","btn-primary",3,"disabled","innerText","click"],["remoteUrlInput",""],[1,"rounded","upload-area",3,"ngClass","dragenter","drop","click"],["uploadArea",""],["xmlns","http://www.w3.org/2000/svg","width","64","height","64","fill","currentColor","viewBox","0 0 16 16",4,"ngIf","ngIfElse"],["appLogo",""],["class","description text-center",3,"ngClass",4,"ngIf"],["class","input-group input-group-sm remote-url-form justify-content-center mb-1",4,"ngIf"],[1,"small","text-center",3,"ngClass"],["widgetFolder",""],[4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","64","height","64","fill","currentColor","viewBox","0 0 16 16"],["fill-rule","evenodd","d","M7.646 5.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 6.707V10.5a.5.5 0 0 1-1 0V6.707L6.354 7.854a.5.5 0 1 1-.708-.708l2-2z"],["d","M4.406 3.342A5.53 5.53 0 0 1 8 2c2.69 0 4.923 2 5.166 4.579C14.758 6.804 16 8.137 16 9.773 16 11.569 14.502 13 12.687 13H3.781C1.708 13 0 11.366 0 9.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383zm.653.757c-.757.653-1.153 1.44-1.153 2.056v.448l-.445.049C2.064 6.805 1 7.952 1 9.318 1 10.785 2.23 12 3.781 12h8.906C13.98 12 15 10.988 15 9.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 4.825 10.328 3 8 3a4.53 4.53 0 0 0-2.941 1.1z"],["svgSize","xl","subtext","Upload",1,"d-block","my-auto","py-1",3,"svgClass","responsive"],[1,"description","text-center",3,"ngClass"],[3,"innerHTML",4,"ngIf"],[1,"ms-1","remote-url-btn","fst-italic","cursor-pointer",3,"ngClass","click"],[3,"innerHTML"],[1,"input-group","input-group-sm","remote-url-form","justify-content-center","mb-1"],[1,"input-group-text","bg-light",3,"disabled","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 16 16"],["d","M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"],[1,"input-group-text","bg-light",3,"click"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],[1,"text-break",3,"innerText"],[1,"d-flex","min-w-0"],[1,"me-1"],["class","fst-italic text-truncate mw-100",3,"innerText",4,"ngIf"],[1,"fst-italic","text-nowrap",3,"innerText"],[1,"fst-italic","text-truncate","mw-100",3,"innerText"],[1,"fs-xs","fst-italic","d-block","px-2","py-1","text-reset","cursor-pointer","position-absolute",3,"ngStyle","click"],[1,"material-icons-outlined","d-block","cursor-pointer","fs-xl","position-absolute","icon","options-icon",3,"click"],[1,"material-icons-outlined","d-block","cursor-pointer","fs-xl","position-absolute","icon","remote-url-icon",3,"click"],[1,"p-4","rounded",3,"ngClass"],["xmlns","http://www.w3.org/2000/svg","width","64","height","64","viewBox","0 0 16 16",1,"overflow-visible"],["d","M 4.406 3.342 A 5.53 5.53 0 0 1 8 2 c 2.69 0 4.923 2 5.166 4.579 C 14.758 6.804 16 8.137 16 9.773 C 16 11.569 14.502 13 12.687 13 H 3.781 C 1.708 13 0 11.366 0 9.318 c 0 -1.763 1.266 -3.223 2.942 -3.593 c 0.143 -0.863 0.698 -1.723 1.464 -2.383 z",1,"cloud"],[3,"onlyMessage","message"],[1,"small","text-center"],["type","text","required","",1,"form-control",3,"placeholder","ngClass","ngModel","pattern","ngModelChange"],["input","ngModel"]],template:function(u,r){if(1&u){const l=e.EpF();e.TgZ(0,"div",0)(1,"input",1,2),e.NdJ("change",function(N){return r.handleSelectionEvent(N)}),e.qZA(),e.YNc(3,J,13,17,"ng-container",3),e.YNc(4,R,7,9,"ng-template",null,4,e.W1O),e.qZA(),e.TgZ(6,"app-modal",5,6),e.ALo(8,"translate"),e._UZ(9,"div",7),e.ALo(10,"translate"),e.TgZ(11,"ul",8)(12,"li")(13,"div",9)(14,"input",10),e.NdJ("ngModelChange",function(N){return r.options.compress=N})("ngModelChange",function(){return r.saveOptions()}),e.qZA(),e._UZ(15,"label",11),e.ALo(16,"translate"),e.qZA()(),e.TgZ(17,"li")(18,"div",9)(19,"input",12),e.NdJ("ngModelChange",function(N){return r.options.openLinkModalAfterUpload=N})("ngModelChange",function(){return r.saveOptions()}),e.qZA(),e._UZ(20,"label",13),e.ALo(21,"translate"),e.qZA()()()(),e.TgZ(22,"app-modal",14,15),e.NdJ("hidden",function(){return r.resetRemoteUrlForm(!1)}),e.ALo(24,"translate"),e._UZ(25,"p",16),e.ALo(26,"translate"),e.YNc(27,w,1,0,"ng-container",17),e.ynx(28,18),e.TgZ(29,"button",19),e.NdJ("click",function(){e.CHM(l);const N=e.MAs(23);return e.KtG(N.close())}),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"button",20),e.NdJ("click",function(N){e.CHM(l);const z=e.MAs(23);return e.KtG(r.handleRemoteUrlUpload(N,z))}),e.ALo(32,"translate"),e.qZA(),e.BQk(),e.qZA(),e.YNc(33,$,3,8,"ng-template",null,21,e.W1O)}if(2&u){const l=e.MAs(5),B=e.MAs(34);e.Q6J("ngClass",e.WLB(34,re,r.isUploading,r.isWidget)),e.xp6(1),e.Q6J("multiple",!0)("disabled",r.loading||r.isUploading),e.xp6(2),e.Q6J("ngIf",!r.isUploading)("ngIfElse",l),e.xp6(3),e.Q6J("title",e.lcZ(8,18,"COMPONENTS.UPLOADER.SETTINGS_MODAL.TITLE")),e.xp6(3),e.Q6J("innerHtml",e.lcZ(10,20,"COMPONENTS.UPLOADER.SETTINGS_MODAL.CONTENT.DESCRIPTION"),e.oJD),e.xp6(5),e.Q6J("ngModel",r.options.compress),e.xp6(1),e.Q6J("innerHTML",e.lcZ(16,22,"COMPONENTS.UPLOADER.SETTINGS_MODAL.CONTENT.COMPRESS_SWITCH"),e.oJD),e.xp6(4),e.Q6J("ngModel",r.options.openLinkModalAfterUpload),e.xp6(1),e.Q6J("innerHTML",e.lcZ(21,24,"COMPONENTS.UPLOADER.SETTINGS_MODAL.CONTENT.SHOW_LINK_SWITCH"),e.oJD),e.xp6(2),e.Q6J("title",e.lcZ(24,26,"COMPONENTS.UPLOADER.REMOTE_URL_MODAL.TITLE"))("disableCloseButton",!0),e.xp6(3),e.Q6J("innerHTML",e.lcZ(26,28,"COMPONENTS.UPLOADER.REMOTE_URL_MODAL.CONTENT"),e.oJD),e.xp6(2),e.Q6J("ngTemplateOutlet",B),e.xp6(2),e.Q6J("innerText",e.lcZ(30,30,"SHARED.CANCEL")),e.xp6(2),e.Q6J("disabled",0===r.remoteUrl.length||!r.isRemoteUrlValid)("innerText",e.lcZ(32,32,"COMPONENTS.UPLOADER.REMOTE_URL_MODAL.UPLOAD_BTN"))}},dependencies:[_.mk,_.O5,_.tP,_.PC,p.Fj,p.Wl,p.JJ,p.Q7,p.c5,p.On,d.R,E.R,M.z,L.J,_.OU,A.X$],styles:[".uploader[_ngcontent-%COMP%]:not(.widget){margin:0 1rem;border:2px dashed #4864fe;box-shadow:0 .125rem .25rem #00000013;color:#2036ad;height:100%}.uploader[_ngcontent-%COMP%]:not(.widget):not(.uploading)   svg[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bubble 4s linear infinite}.uploader[_ngcontent-%COMP%]:not(.widget).uploading   svg[_ngcontent-%COMP%]   path.cloud[_ngcontent-%COMP%]{stroke:#2036ad}.uploader[_ngcontent-%COMP%]:not(.widget)   .description[_ngcontent-%COMP%]{max-width:350px}.uploader.widget.uploading[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path.cloud[_ngcontent-%COMP%]{stroke:#4864fe}.uploader[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(.icon){height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.uploader.uploading[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path.cloud[_ngcontent-%COMP%]{fill:none;stroke-linecap:round;stroke-dasharray:50;stroke-dashoffset:100;animation:_ngcontent-%COMP%_draw 3.5s linear infinite}.uploader[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{top:5px;opacity:.7;transition:opacity .2s}.uploader[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:hover{opacity:1}.uploader[_ngcontent-%COMP%]   .options-icon[_ngcontent-%COMP%]{right:5px}.uploader[_ngcontent-%COMP%]   .remote-url-icon[_ngcontent-%COMP%]{right:30px}.upload-area.cursor-pointer[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(app-logo):not(.description), .upload-area.cursor-pointer[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(.remote-url-btn){pointer-events:none}.remote-url-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{max-width:300px}.remote-url-form[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{opacity:.5}@media (min-width: 768px){.uploader[_ngcontent-%COMP%]:not(.widget){margin:initial}}@keyframes _ngcontent-%COMP%_bubble{6%{transform:scale(1.3,.8)}9%{transform:scale(.8,1.3) translateY(-.5rem)}12%{transform:scale(1)}}@keyframes _ngcontent-%COMP%_draw{0%{stroke-dashoffset:100}to{stroke-dashoffset:0}}"]}),F})()},529:(ee,W,t)=>{"use strict";t.d(W,{M:()=>c});var h=t(4243),y=t(6814),e=t(6223),T=t(8876),C=t(2740),a=t(4610),I=t(9515),P=t(5879);let c=(()=>{var v;class O{}return(v=O).\u0275fac=function(U){return new(U||v)},v.\u0275mod=P.oAB({type:v}),v.\u0275inj=P.cJS({imports:[h.r,y.ez,e.u5,T.q,C.h,a.z,I.aw.forChild()]}),O})()},3845:(ee,W,t)=>{"use strict";t.d(W,{S:()=>h});var h=function(y){return y.UNSUPPORTED="unsupported",y.OVERSIZED="oversized",y.REMOTE_URL_RESPONSE="remote-url-response",y.UPLOAD_FAILED="upload-failed",y}(h||{})},4243:(ee,W,t)=>{"use strict";t.d(W,{r:()=>e});var h=t(6814),y=t(5879);let e=(()=>{var T;class C{}return(T=C).\u0275fac=function(I){return new(I||T)},T.\u0275mod=y.oAB({type:T}),T.\u0275inj=y.cJS({imports:[h.ez]}),C})()},4228:(ee,W,t)=>{"use strict";t.d(W,{J:()=>y});var h=t(5879);let y=(()=>{var e;class T{transform(a,I){return a.join(I)}}return(e=T).\u0275fac=function(a){return new(a||e)},e.\u0275pipe=h.Yjl({name:"arrayJoin",type:e,pure:!0}),T})()},5172:(ee,W,t)=>{"use strict";t.d(W,{In:()=>h,Ky:()=>C,VC:()=>y,c5:()=>T,gG:()=>e});var h=function(a){return a.FILE_SHOW_LINKS="fileLinks",a.FILE_EDIT="fileEdit",a.DELETE="delete",a.RENAME="rename",a.MOVE="move",a}(h||{}),y=function(a){return a.FILE="file",a.FOLDER="folder",a}(y||{}),e=function(a){return a.FILENAME="filename",a.SIZE="size",a.TIME="time",a.EXTENSION="ext",a}(e||{}),T=function(a){return a.GRID="grid",a.LIST="list",a}(T||{}),C=function(a){return a.W_768_I_1="(max-width: 767.98px)",a.W_933_I_2="(min-width: 768px) and (max-width: 933.98px)",a.W_960_I_3="(min-width: 934px) and (max-width: 959.98px)",a.W_1226_I_2="(min-width: 960px) and (max-width: 1225.98px)",a.W_1540_I_3="(min-width: 1226px) and (max-width: 1539.98px)",a.W_1854_I_4="(min-width: 1540px) and (max-width: 1853.98px)",a.W_2168_I_5="(min-width: 1854px) and (max-width: 2167.98px)",a.W_2482_I_6="(min-width: 2168px) and (max-width: 2481.98px)",a.W_2796_I_7="(min-width: 2482px) and (max-width: 2795.98px)",a.W_3110_I_8="(min-width: 2796px) and (max-width: 3109.98px)",a.W_3424_I_9="(min-width: 3110px) and (max-width: 3423.98px)",a.W_3738_I_10="(min-width: 3424px)",a}(C||{})},1990:(ee,W,t)=>{"use strict";t.d(W,{C7:()=>T,Mi:()=>C,O8:()=>y,er:()=>a,p0:()=>e,xt:()=>I});var h=t(5172);const y=[{ext:["png","apng"],maxSize:15},{ext:["jpeg","jpg","jpe"],maxSize:10},{ext:["gif"],maxSize:15},{ext:["bmp"],maxSize:10},{ext:["webp","webm"],maxSize:10},{ext:["psd","xcf"],maxSize:150},{ext:["svg"],maxSize:30}].map(P=>(P.maxSize*=1048576,P)),e={lastPath:[],layout:{asc:!0,orderBy:h.gG.FILENAME,type:h.c5.GRID},uploader:{checkImage:{time:0,active:!0},showLinkModal:!1}},T="https://upload.forumfree.net/api/",C=/^(?:(?![\t\r\n])[a-zA-Z0-9_\-.\s])*$/,a=/^(?:(?![\t\r\n])[a-zA-Z0-9_\-\s])*$/,I={invalidLength:!1,alreadyUsed:!1,invalidStartOrEnd:!1,invalidCharacter:!1}},7621:(ee,W,t)=>{"use strict";t.d(W,{y:()=>v});var h=t(5861),y=t(2907),e=t(708),T=t(8180),C=t(4664),a=t(2096),I=t(6306),P=t(5879),c=t(9862);let v=(()=>{var O;class m{constructor(D,K){this.http=D,this.endpointsService=K}get(D){var K=this;return(0,h.Z)(function*(){const j=K.sendRequest(D);return yield(0,e.n)(j)})()}sendRequest(D){return this.getUrlContent(D).pipe((0,T.q)(1),(0,C.w)(K=>(0,a.of)(K)),(0,I.K)(()=>this.getUrlContentWithProxy(D)))}getUrlContent(D){return this.http.get(D,{responseType:"blob"})}getUrlContentWithProxy(D){return this.http.get(this.endpointsService.get(y.jQ.PROXY,y.ph.COMMON),{headers:{[y._o.HeaderKeys.TOKEN_TYPE]:y.s9.ACCESS,"x-remote-url":D},responseType:"blob"}).pipe((0,T.q)(1),(0,I.K)(()=>(0,a.of)(void 0)))}}return(O=m).\u0275fac=function(D){return new(D||O)(P.LFG(c.eN),P.LFG(y.oz))},O.\u0275prov=P.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),m})()},5983:(ee,W,t)=>{"use strict";t.d(W,{B:()=>T});var h=t(5172),y=t(1410),e=t(5879);let T=(()=>{var C;class a{constructor(P){this.globalsService=P,this.ffuid="",this.cache={},this.profileSubscription=this.globalsService.profileObservable.subscribe(c=>{this.ffuid=c?c.user.ffuid:""})}getItem(P){const c=this.createKey(P);if(this.cache.hasOwnProperty(c))return this.cache[c]}setItem(P,c){this.cache[this.createKey(P)]=c}removeItem(P){const c=this.createKey(P);if(this.cache.hasOwnProperty(c)){if(this.cache[c].folders.length)for(const v of this.cache[c].folders)this.removeItem([...P,v.name]);return delete this.cache[c],!0}return!1}getEntities(P,c){let v={};const O=this.createKey(P);if(!this.cache.hasOwnProperty(O))return v;for(const m of c){const U=(m.type===h.VC.FILE?this.cache[O].files:this.cache[O].folders).find(D=>D.name===m.name);U&&(v[U.name]=U)}return v}addEntities(P,c,v=h.VC.FILE){const O=this.createKey(P);return!!this.cache.hasOwnProperty(O)&&(Array.isArray(c)||(c=[c]),v===h.VC.FILE?this.cache[O].files.unshift(...c):this.cache[O].folders.unshift(...c),!0)}removeEntities(P,c,v=h.VC.FILE){if(Array.isArray(c)||(c=[c]),v===h.VC.FOLDER)for(const D of c)this.removeItem([...P,D]);const O=this.createKey(P);if(!this.cache.hasOwnProperty(O))return[];const m=v===h.VC.FILE?"files":"folders";let U=[];for(const D of c){const K=this.cache[O][m].findIndex(j=>j.name===D);K>-1&&(this.cache[O][m].splice(K,1),U.push(D))}return U}refactorFolderContent(P,c){const v=this.createKey(P);if(!this.cache.hasOwnProperty(v))return!1;c.endsWith("/")||(c+="/");for(const O of this.cache[v].folders)O.url=c+O.name;for(const O of this.cache[v].files)O.url=O.embedUrl=c+O.name,O.time=Date.now();return!0}createKey(P){return`${this.ffuid}/${P.join("/")}`}ngOnDestroy(){this.profileSubscription.unsubscribe()}}return(C=a).\u0275fac=function(P){return new(P||C)(e.LFG(y.d))},C.\u0275prov=e.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),a})()},5571:(ee,W,t)=>{"use strict";t.d(W,{AD:()=>y,It:()=>a,ex:()=>h,mH:()=>I,r2:()=>T,vO:()=>C,xJ:()=>e});const h="\nquery UploadEntitiesListToken($scope: String, $target: String!) {\n    uploadEntitiesListToken(scope: $scope, target: $target)\n}",y="\nquery UploadEntitiesHostToken($scope: String, $target: String!) {\n    uploadEntitiesHostToken(scope: $scope, target: $target)\n}",e="\nquery UploadEntitiesCreateDirectoryToken($scope: String, $target: String!) {\n    uploadEntitiesCreateDirectoryToken(scope: $scope, target: $target)\n}",T="\nquery UploadEntitiesMoveToken($scope: String, $source: String!, $target: String!) {\n    uploadEntitiesMoveToken(scope: $scope, source: $source, target: $target)\n}",C="\nquery UploadEntitiesDeleteToken($scope: String, $target: String!) {\n    uploadEntitiesDeleteToken(scope: $scope, target: $target)\n}",a="\nquery UploadHistoryAvailableDateRange {\n    uploadHistoryAvailableDateRange {\n        start\n        end\n    }\n}",I="\nsubscription UploadEntities($scope: String) {\n    uploadEntities(scope: $scope) {\n        eventMessage\n        eventType\n        user {\n            avatar\n            host\n            id\n            nickname\n        }\n    }\n}"},5487:(ee,W,t)=>{"use strict";t.d(W,{r:()=>C});var h=t(8645),y=t(5619),e=t(446),T=t(5879);let C=(()=>{var a;class I{constructor(c){this.uploadPreferencesService=c,this.selectedFileListArray=[],this.actionSubject=new h.x,this.uploadingFileQueueSubject=new h.x,this.uploadingFileErrorSubject=new h.x,this.currentFolderPathSubject=new h.x,this.layoutOptionsSubject=new h.x,this.renameEntitySubject=new h.x,this.entityPendingSubject=new h.x,this.deleteFileSubject=new h.x,this.uploadedFileSubject=new h.x,this.draggedFileListSubject=new h.x,this.startUploadSubject=new h.x,this.startMoveSubject=new h.x,this.selectedFileListSubject=new y.X(this.selectedFileListArray)}get actionObservable(){return this.actionSubject.asObservable()}pushAction(c){this.actionSubject.next(c)}get layoutOptionsObservable(){return this.layoutOptionsSubject.asObservable()}pushLayoutOptions(c){this.uploadPreferencesService.layoutOptions=c,this.layoutOptionsSubject.next(c)}get currentFolderPathObservable(){return this.currentFolderPathSubject.asObservable()}pushCurrentFolderPath(c){this.uploadPreferencesService.lastFolderPath=c,this.currentFolderPathSubject.next(c)}get uploadingFileQueueObservable(){return this.uploadingFileQueueSubject.asObservable()}pushUploadingFileQueue(c){this.uploadingFileQueueSubject.next(c)}get uploadingFileErrorObservable(){return this.uploadingFileErrorSubject.asObservable()}pushUploadingFileError(c){this.uploadingFileErrorSubject.next(c)}get renameEntityObservable(){return this.renameEntitySubject.asObservable()}pushRenameEntity(c){this.renameEntitySubject.next(c)}get entityPendingObservable(){return this.entityPendingSubject.asObservable()}pushEntityPending(c){this.entityPendingSubject.next(c)}get deleteFileObservable(){return this.deleteFileSubject.asObservable()}pushDeleteFile(c){this.deleteFileSubject.next(c)}get uploadedFileObservable(){return this.uploadedFileSubject.asObservable()}pushUploadedFile(c){this.uploadedFileSubject.next(c)}get draggedFileListObservable(){return this.draggedFileListSubject.asObservable()}pushDraggedFileList(c){this.draggedFileListSubject.next(c)}get startUploadObservable(){return this.startUploadSubject.asObservable()}pushStartUpload(c){this.startUploadSubject.next(c)}get startMoveObservable(){return this.startMoveSubject.asObservable()}pushStartMove(c){this.startMoveSubject.next(c)}get selectedFileListObservable(){return this.selectedFileListSubject.asObservable()}pushSelectedFile(c){if(Array.isArray(c)||(c=[c]),0===c.length)return void(this.selectedFileListArray.length>0&&(this.selectedFileListArray=[],this.selectedFileListSubject.next(this.selectedFileListArray)));let v=!1;for(const O of c){const m=this.selectedFileListArray.findIndex(U=>U.name===O.name);O.selected?-1===m&&(this.selectedFileListArray.push({name:O.name}),v=!0):m>-1&&(this.selectedFileListArray.splice(m,1),v=!0)}v&&this.selectedFileListSubject.next(this.selectedFileListArray)}}return(a=I).\u0275fac=function(c){return new(c||a)(T.LFG(e.p))},a.\u0275prov=T.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),I})()},446:(ee,W,t)=>{"use strict";t.d(W,{p:()=>a});var h=t(7165),y=t(463),e=t(1990),T=t(2986),C=t(5879);let a=(()=>{var I;class P{constructor(v,O){this.preferencesService=v,this.urlQueryParamsService=O;const m=this.urlQueryParamsService.getAndDeleteParam(h.RT.UPLOAD_PATH);m&&(this.lastFolderPath=m.split("/").filter(U=>U.length>0))}get preferences(){return this.preferencesService.getItem(h.Ye.UPLOAD)||e.p0}set preferences(v){this.preferencesService.setItem(h.Ye.UPLOAD,v)}get lastFolderPath(){return(this.preferences.lastPath||e.p0.lastPath).filter(v=>v.length>0)}set lastFolderPath(v){const O=this.preferences;O.lastPath=v,this.preferences=O}get layoutOptions(){const v=e.p0.layout,O=this.preferences.layout;return O&&0===Object.keys(v).filter(m=>!O.hasOwnProperty(m)).length?O:v}set layoutOptions(v){const O=this.preferences;O.layout=v,this.preferences=O}get uploader(){const v=this.preferences.uploader||e.p0.uploader;return!v.checkImage.active&&Date.now()-v.checkImage.time>6048e5&&(v.checkImage.active=!0,this.uploader=v),v.hasOwnProperty("showLinkModal")||(v.showLinkModal=!1),v}set uploader(v){const O=this.preferences;O.uploader=v,this.preferences=O}}return(I=P).\u0275fac=function(v){return new(v||I)(C.LFG(y.y),C.LFG(T.J))},I.\u0275prov=C.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),P})()},658:(ee,W,t)=>{"use strict";t.d(W,{C:()=>D});var h=t(1413),y=t(5861),e=t(2907),T=t(4036),C=t(5172),a=t(9054),I=t(5571),P=t(5983),c=t(1990),v=t(446),O=t(4004),m=t(5879),U=t(9862);let D=(()=>{var K;class j{constructor(A,_,p,d){this.graphqlService=A,this.uploadCacheService=_,this.uploadPreferencesService=p,this.http=d}get cache(){return this.uploadCacheService}get preferences(){return this.uploadPreferencesService}setGqlIdHeader(){this.graphqlService.safeSetGlobalHeader(e._o.HeaderKeys.UUID,(0,O.Z)())}removeGqlIdHeader(){this.graphqlService.removeGlobalHeader(e._o.HeaderKeys.UUID)}getGqlIdHeader(){return this.graphqlService.getGlobalHeader(e._o.HeaderKeys.UUID)||""}getFileList(A,_){var p=this;return(0,y.Z)(function*(){const d=p.uploadCacheService.getItem(A);if(d)return d;const E=(yield p.graphqlService.query({query:I.ex,variables:{scope:_,target:A.join("/")}})).data.uploadEntitiesListToken,M=yield p.sendRequest(E),H={files:M.files.map(S=>{const k=(0,a.Tb)(S.url);return(0,h.Z)((0,h.Z)({},S),{time:1e3*S.time,filename:k.filename,ext:k.ext,isImage:(0,a.Or)(k.ext),embedUrl:`${S.url}?t=${S.time}`,type:C.VC.FILE})}),folders:M.folders.map(S=>(0,h.Z)((0,h.Z)({},S),{},{type:C.VC.FOLDER}))};return p.uploadCacheService.setItem(A,H),H})()}createDirectory(A,_){var p=this;return(0,y.Z)(function*(){const d=(yield p.graphqlService.mutate({mutation:I.xJ,variables:{scope:_,target:A.join("/")}})).data.uploadEntitiesCreateDirectoryToken;return yield p.sendRequest(d)})()}moveRenameEntity(A,_,p,d,E){var M=this;return(0,y.Z)(function*(){d||(d=p);const L=(yield M.graphqlService.mutate({mutation:I.r2,variables:{scope:E,source:(A.length?`${A.join("/")}/`:"")+p,target:(_.length?`${_.join("/")}/`:"")+d}})).data.uploadEntitiesMoveToken,H=yield M.sendRequest(L);return(0,h.Z)((0,h.Z)({},H),{},{time:1e3*H.time})})()}deleteEntity(A,_,p){var d=this;return(0,y.Z)(function*(){const E=(yield d.graphqlService.mutate({mutation:I.vO,variables:{scope:p,target:(A.length?`${A.join("/")}/`:"")+_}})).data.uploadEntitiesDeleteToken;return yield d.sendRequest(E),!0})()}getHostToken(A,_,p){var d=this;return(0,y.Z)(function*(){return(yield d.graphqlService.query({query:I.AD,variables:{scope:p,target:(A.length?`${A.join("/")}/`:"")+_}})).data.uploadEntitiesHostToken})()}sendRequest(A){var _=this;return(0,y.Z)(function*(){return(yield(0,T.z)(_.http.post(c.C7,JSON.stringify({payload:A}),{headers:{"Content-Type":"application/json"}}))).success})()}subscribeForChanges(A,_){var p=this;return(0,y.Z)(function*(){return yield p.graphqlService.subscribe({query:I.mH,variables:{scope:_}},d=>{var E;if(null===(E=d.data)||void 0===E||!E.uploadEntities)return;const M=JSON.parse(d.data.uploadEntities.eventMessage);!M.payload.customHeaders||!M.payload.customHeaders.hasOwnProperty(e._o.HeaderKeys.UUID)||M.payload.customHeaders[e._o.HeaderKeys.UUID]===p.getGqlIdHeader()||A({type:d.data.uploadEntities.eventType,message:M})})})()}}return(K=j).\u0275fac=function(A){return new(A||K)(m.LFG(e.Jk),m.LFG(P.B),m.LFG(v.p),m.LFG(U.eN))},K.\u0275prov=m.Yz7({token:K,factory:K.\u0275fac,providedIn:"root"}),j})()},9054:(ee,W,t)=>{"use strict";t.d(W,{$H:()=>V,JN:()=>O,LZ:()=>U,Lv:()=>I,Or:()=>j,Tb:()=>C,jL:()=>K,lY:()=>P,ok:()=>_,rQ:()=>p,rc:()=>A,zO:()=>a});var h=t(5861),y=t(1413),e=t(5172),T=t(1990);function C(d){let E=d;if(d.indexOf("/")>-1){const S=d.split("/");E=S[S.length-1]}const M=E.replace(/\?.*$/,"").split("."),L=M.length>1?M[M.length-1].toLowerCase():"",H=decodeURIComponent(M.slice(0,-1).join("."));return{ext:L,filename:H,name:L?`${H}.${L}`:""}}function a(d,E={}){const M=C(d),L=Date.now();return(0,y.Z)({name:M.name,size:0,time:L,url:d,ext:M.ext,filename:M.filename,isImage:j(M.ext),embedUrl:`${d}?t=${L}`,type:e.VC.FILE},E)}function I(d){let E=d;E.endsWith("/")&&(E=E.slice(0,-1));const M=E.split("/");return{name:decodeURIComponent(M[M.length-1])}}function P(d){return{name:I(d).name,url:d,type:e.VC.FOLDER}}function c(d){return v.apply(this,arguments)}function v(){return(v=(0,h.Z)(function*(d){const E=new FileReader,M=new Promise(L=>E.addEventListener("load",()=>L(E.result)));return E.readAsDataURL(d),M})).apply(this,arguments)}function O(d){return m.apply(this,arguments)}function m(){return(m=(0,h.Z)(function*(d){const E=new DataView(yield d.arrayBuffer());if(2303741511===E.getUint32(0)&&218765834===E.getUint32(4)){if(-1===[4,6].indexOf(E.getUint8(25)))return!1;const L=Object.assign(new Image,{src:yield c(d)});yield new Promise(k=>L.addEventListener("load",()=>k(!0)));const H=Object.assign(document.createElement("canvas"),{width:L.width,height:L.height}).getContext("2d");if(!H)return!1;H.imageSmoothingEnabled=!1,H.drawImage(L,0,0);const S=null==H?void 0:H.getImageData(0,0,L.width,L.height);if(S)for(let k=0;k<S.data.length;k+=4)if(S.data[k+3]<255)return!0}return!1})).apply(this,arguments)}function U(d){return D.apply(this,arguments)}function D(){return(D=(0,h.Z)(function*(d){const E=Object.assign(new Image,{src:yield c(d)});return yield new Promise(M=>E.addEventListener("load",()=>M(!0))),E})).apply(this,arguments)}function K(d){return d.map(E=>({name:E.name,ext:E.ext,type:e.VC.FILE,url:E.url,embedUrl:E.embedUrl,isImage:E.isImage}))}function j(d,E=[]){return["png","apng","jpeg","jpg","jpe","gif","svg","webp"].includes(d)&&!E.includes(d)}function V(d){return j(d,["gif","svg"])}function A(d,E,M,L=[],H=""){let S=(0,y.Z)({},T.xt);const k=d.trim();S.invalidLength=0===k.length;const te=(k+H).replace(/\s{2,}/g," ");return S.alreadyUsed=E!==k&&L.includes(te),S.invalidStartOrEnd=/(^(\s|\.))|((\s|\.)$)/.test(d),S.invalidCharacter=!(M===e.VC.FILE?T.Mi.test(d):T.er.test(d)),S}function _(d,E){return d.join("/")===E.join("/")}function p(d){let E=[],M=[];for(const L of d)L.type===e.VC.FILE?E.push(L):M.push(L);return{[e.VC.FILE]:E,[e.VC.FOLDER]:M}}},4887:(ee,W,t)=>{"use strict";t.d(W,{q:()=>K});var h=t(5861),y=t(1413),e=t(4315),T=t.n(e),C=t(9054),a=t(9862),I=t(8645),P=t(1687),c=t(9773),v=t(1990),O=t(5487),m=function(j){return j[j.ORIENTATION=0]="ORIENTATION",j[j.CAMERA_MODEL=1]="CAMERA_MODEL",j}(m||{});class U{static findApp1Marker(V){const A=new DataView(V),_=new Set([65498,65497,65476,65474,65472,65499,65501]);for(let p=0;p<V.byteLength-2;p+=2){const d=A.getUint16(p);if(65505===d)return{offset:p,size:A.getUint16(p+2),little:18761==A.getUint16(p+8,!1)};if(_.has(d))break}}static stripAndReturnExif(V){return(0,h.Z)(function*(){const A=yield V.arrayBuffer(),_=U.findApp1Marker(A);return _?{file:new File([A.slice(0,_.offset),A.slice(_.offset+_.size+2)],V.name,{type:V.type,lastModified:V.lastModified}),exif:A.slice(_.offset,_.offset+_.size)}:{file:V}})()}static checkExifTagValue(V,A){const _=new DataView(V);if(1165519206!==_.getUint32(4,!1))return;const p=18761===_.getUint16(10,!1);let d=10;d+=_.getUint32(d+4,p);const E=_.getUint16(d,p);d+=2;for(let M=0;M<E;M++){const L=_.getUint16(d+12*M,p);if(A===m.ORIENTATION&&274===L)return _.getUint16(d+12*M+8,p);if(A===m.CAMERA_MODEL&&272===L){const H=_.getUint32(d+12*M+4,p),S=_.getUint32(d+12*M+8,p),k=new Uint8Array(V,S,H),te=Array.from(k);return String.fromCharCode.apply(null,te)}}}}var D=t(5879);let K=(()=>{var j;class V{constructor(_,p){this.http=_,this.uploadObservablesService=p,this.requestSubscriptions=[],this.uploaderOptionsObject={compress:!0,openLinkModalAfterUpload:!1}}get uploaderOptions(){return(0,y.Z)({},this.uploaderOptionsObject)}set uploaderOptions(_){this.uploaderOptionsObject=(0,y.Z)({},_)}compressFileIfNeeded(_,p={},d=!1){return(0,h.Z)(function*(){let E=["image/png","image/jpeg"],M=(0,y.Z)({strict:!0,checkOrientation:!0,quality:.8,convertSize:1},p);const L=void 0!==M.width||void 0!==M.height;L&&(E.push("image/webp"),M.resize="cover",M.strict=p.strict||!1);const H=_.type.toLowerCase();return _.size<=1e6&&!L&&!d||-1===E.indexOf(_.type.toLowerCase())?_:("image/png"===H&&(yield(0,C.JN)(_))&&(M.convertSize=1/0),new Promise((S,k)=>{new(T())(_,(0,y.Z)((0,y.Z)({},M),{},{success:te=>{const ie=te instanceof Blob?new File([te],_.name,{type:_.type,lastModified:_.lastModified}):_;S(ie)},error:k}))}))})()}getDimensionsForForcedResize(_){return(0,h.Z)(function*(){const d=yield(0,C.LZ)(_),E=d.width>d.height?"width":"height";if(d[E]>1e3)return{[E]:1e3}})()}orientAndCompressFileIfNeeded(_){var p=this;return(0,h.Z)(function*(){if(-1===["image/jpeg"].indexOf(_.type.toLowerCase()))return{file:_,compressorCheck:!1};const E=yield U.stripAndReturnExif(_),M=E.file;if(E.exif){if(void 0!==U.checkExifTagValue(E.exif,m.CAMERA_MODEL)){const k=yield p.getDimensionsForForcedResize(_);if(k)return{file:yield p.compressFileIfNeeded(_,(0,y.Z)({strict:!0,quality:.7},k)),compressorCheck:!0}}if(1!==U.checkExifTagValue(E.exif,m.ORIENTATION))return{file:yield p.compressFileIfNeeded(_,{},!0),compressorCheck:!0}}return{file:M,compressorCheck:!1}})()}upload(_,p,d,E=!1){const M=new I.x,L=new FormData;L.append("payload",d),L.append("upload",_,_.name),E&&L.append("allowOverwrite","1");const H=this.http.request(new a.aW("POST",v.C7,L,{reportProgress:!0,responseType:"json"}));return this.requestSubscriptions.push(H.subscribe({next:S=>{if(S.type===a.dt.UploadProgress){if(!S.total||(p.progress=Math.round(50*S.loaded/S.total)+20,p.progress<70))return;(0,P.F)(1e3).pipe((0,c.R)(M.asObservable())).subscribe(()=>{if(p.progress<95){const ie=Math.round(8*Math.random()+8);p.progress+ie>95?p.progress=95:p.progress+=ie}})}else if(S instanceof a.Zn){var k,te;if(p.progress=100,p.completed=!0,null!==(k=S.body)&&void 0!==k&&k.error||null===(te=S.body)||void 0===te||!te.success)p.error=!0,this.uploadObservablesService.pushUploadingFileError(p);else{p.file.url=S.body.success.url,p.file.time=Date.now(),p.file.embedUrl=`${p.file.url}?t=${p.file.time}`;const ie=(0,C.Tb)(p.file.url);p.file.name=ie.name,p.file.filename=ie.filename}M.next(),M.complete()}},error:()=>{p.error=!0,this.uploadObservablesService.pushUploadingFileError(p),M.next(),M.complete()}})),M.asObservable()}clearPendingRequests(){for(const _ of this.requestSubscriptions)_.unsubscribe();this.requestSubscriptions=[]}}return(j=V).\u0275fac=function(_){return new(_||j)(D.LFG(a.eN),D.LFG(O.r))},j.\u0275prov=D.Yz7({token:j,factory:j.\u0275fac,providedIn:"root"}),V})()},4315:function(ee){ee.exports=function(){"use strict";function W(g,n){var o=Object.keys(g);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(g);n&&(s=s.filter(function(x){return Object.getOwnPropertyDescriptor(g,x).enumerable})),o.push.apply(o,s)}return o}function t(g){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?W(Object(o),!0).forEach(function(s){T(g,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(o)):W(Object(o)).forEach(function(s){Object.defineProperty(g,s,Object.getOwnPropertyDescriptor(o,s))})}return g}function y(g,n){for(var o=0;o<n.length;o++){var s=n[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(g,I(s.key),s)}}function T(g,n,o){return(n=I(n))in g?Object.defineProperty(g,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):g[n]=o,g}function C(){return C=Object.assign?Object.assign.bind():function(g){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(g[s]=o[s])}return g},C.apply(this,arguments)}function I(g){var n=function a(g,n){if("object"!=typeof g||null===g)return g;var o=g[Symbol.toPrimitive];if(void 0!==o){var s=o.call(g,n||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(g)}(g,"string");return"symbol"==typeof n?n:String(n)}var g,n,o,s,x,b,J,Z,P={exports:{}};g=P,typeof window>"u"||(n=window,o=n.HTMLCanvasElement&&n.HTMLCanvasElement.prototype,s=n.Blob&&function(){try{return!!new Blob}catch(R){return!1}}(),x=s&&n.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(R){return!1}}(),b=n.BlobBuilder||n.WebKitBlobBuilder||n.MozBlobBuilder||n.MSBlobBuilder,J=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,Z=(s||b)&&n.atob&&n.ArrayBuffer&&n.Uint8Array&&function(R){var w,G,$,re,Y,i,F,f,u;if(!(w=R.match(J)))throw new Error("invalid data URI");for(G=w[2]?w[1]:"text/plain"+(w[3]||";charset=US-ASCII"),$=!!w[4],re=R.slice(w[0].length),Y=$?atob(re):decodeURIComponent(re),i=new ArrayBuffer(Y.length),F=new Uint8Array(i),f=0;f<Y.length;f+=1)F[f]=Y.charCodeAt(f);return s?new Blob([x?F:i],{type:G}):((u=new b).append(i),u.getBlob(G))},n.HTMLCanvasElement&&!o.toBlob&&(o.mozGetAsFile?o.toBlob=function(R,w,G){var $=this;setTimeout(function(){R(G&&o.toDataURL&&Z?Z($.toDataURL(w,G)):$.mozGetAsFile("blob",w))})}:o.toDataURL&&Z&&(o.toBlob=o.msToBlob?function(R,w,G){var $=this;setTimeout(function(){R((w&&"image/png"!==w||G)&&o.toDataURL&&Z?Z($.toDataURL(w,G)):$.msToBlob(w))})}:function(R,w,G){var $=this;setTimeout(function(){R(Z($.toDataURL(w,G)))})})),g.exports?g.exports=Z:n.dataURLtoBlob=Z);var c=P.exports,O={strict:!0,checkOrientation:!0,retainExif:!1,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},U=typeof window<"u"&&typeof window.document<"u"?window:{},D=function(n){return n>0&&n<1/0},K=Array.prototype.slice;function j(g){return Array.from?Array.from(g):K.call(g)}var V=/^image\/.+$/;function A(g){return V.test(g)}var p=String.fromCharCode;var E=U.btoa;function M(g,n){for(var o=[],x=new Uint8Array(g);x.length>0;)o.push(p.apply(null,j(x.subarray(0,8192)))),x=x.subarray(8192);return"data:".concat(n,";base64,").concat(E(o.join("")))}function L(g){var o,n=new DataView(g);try{var s,x,b;if(255===n.getUint8(0)&&216===n.getUint8(1))for(var J=n.byteLength,Z=2;Z+1<J;){if(255===n.getUint8(Z)&&225===n.getUint8(Z+1)){x=Z;break}Z+=1}if(x){var w=x+10;if("Exif"===function d(g,n,o){var x,s="";for(o+=n,x=n;x<o;x+=1)s+=p(g.getUint8(x));return s}(n,x+4,4)){var G=n.getUint16(w);if(((s=18761===G)||19789===G)&&42===n.getUint16(w+2,s)){var $=n.getUint32(w+4,s);$>=8&&(b=w+$)}}}if(b){var Y,i,re=n.getUint16(b,s);for(i=0;i<re;i+=1)if(274===n.getUint16(Y=b+12*i+2,s)){o=n.getUint16(Y+=8,s),n.setUint16(Y,1,s);break}}}catch(F){o=1}return o}var S=/\.\d*(?:0|9){12}\d*$/;function k(g){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return S.test(g)?Math.round(g*n)/n:g}function te(g){var n=g.aspectRatio,o=g.height,s=g.width,x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",b=D(s),J=D(o);if(b&&J){var Z=o*n;("contain"===x||"none"===x)&&Z>s||"cover"===x&&Z<s?o=s/n:s=o*n}else b?o=s/n:J&&(s=o*n);return{width:s,height:o}}var ve=U.ArrayBuffer,pe=U.FileReader,oe=U.URL||U.webkitURL,Ee=/\.\w+$/,Oe=U.Compressor,Me=function(){function g(n,o){(function h(g,n){if(!(g instanceof n))throw new TypeError("Cannot call a class as a function")})(this,g),this.file=n,this.exif=[],this.image=new Image,this.options=t(t({},O),o),this.aborted=!1,this.result=null,this.init()}return function e(g,n,o){return n&&y(g.prototype,n),o&&y(g,o),Object.defineProperty(g,"prototype",{writable:!1}),g}(g,[{key:"init",value:function(){var o=this,s=this.file,x=this.options;if(function(n){return!(typeof Blob>"u")&&(n instanceof Blob||"[object Blob]"===Object.prototype.toString.call(n))}(s)){var b=s.type;if(A(b))if(oe&&pe){ve||(x.checkOrientation=!1,x.retainExif=!1);var J="image/jpeg"===b,Z=J&&x.checkOrientation,R=J&&x.retainExif;if(!oe||Z||R){var w=new pe;this.reader=w,w.onload=function(G){var re=G.target.result,Y={},i=1;Z&&(i=L(re))>1&&C(Y,function H(g){var n=0,o=1,s=1;switch(g){case 2:o=-1;break;case 3:n=-180;break;case 4:s=-1;break;case 5:n=90,s=-1;break;case 6:n=90;break;case 7:n=90,o=-1;break;case 8:n=-90}return{rotate:n,scaleX:o,scaleY:s}}(i)),R&&(o.exif=function ie(g){for(var n=j(new Uint8Array(g)),o=n.length,s=[],x=0;x+3<o;){var b=n[x],J=n[x+1];if(255===b&&218===J)break;if(255===b&&216===J)x+=2;else{var R=x+(256*n[x+2]+n[x+3])+2,w=n.slice(x,R);s.push(w),x=R}}return s.reduce(function(G,$){return 255===$[0]&&225===$[1]?G.concat($):G},[])}(re)),Y.url=Z||R?!oe||i>1?M(re,b):oe.createObjectURL(s):re,o.load(Y)},w.onabort=function(){o.fail(new Error("Aborted to read the image with FileReader."))},w.onerror=function(){o.fail(new Error("Failed to read the image with FileReader."))},w.onloadend=function(){o.reader=null},Z||R?w.readAsArrayBuffer(s):w.readAsDataURL(s)}else this.load({url:oe.createObjectURL(s)})}else this.fail(new Error("The current browser does not support image compression."));else this.fail(new Error("The first argument must be an image File or Blob object."))}else this.fail(new Error("The first argument must be a File or Blob object."))}},{key:"load",value:function(o){var s=this,x=this.file,b=this.image;b.onload=function(){s.draw(t(t({},o),{},{naturalWidth:b.naturalWidth,naturalHeight:b.naturalHeight}))},b.onabort=function(){s.fail(new Error("Aborted to load the image."))},b.onerror=function(){s.fail(new Error("Failed to load the image."))},U.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(U.navigator.userAgent)&&(b.crossOrigin="anonymous"),b.alt=x.name,b.src=o.url}},{key:"draw",value:function(o){var s=this,x=o.naturalWidth,b=o.naturalHeight,J=o.rotate,Z=void 0===J?0:J,R=o.scaleX,w=void 0===R?1:R,G=o.scaleY,$=void 0===G?1:G,re=this.file,Y=this.image,i=this.options,F=document.createElement("canvas"),f=F.getContext("2d"),u=Math.abs(Z)%180==90,r=("contain"===i.resize||"cover"===i.resize)&&D(i.width)&&D(i.height),l=Math.max(i.maxWidth,0)||1/0,B=Math.max(i.maxHeight,0)||1/0,N=Math.max(i.minWidth,0)||0,z=Math.max(i.minHeight,0)||0,ne=x/b,X=i.width,q=i.height;if(u){var se=[B,l];l=se[0],B=se[1];var le=[z,N];N=le[0],z=le[1];var Q=[q,X];X=Q[0],q=Q[1]}r&&(ne=X/q);var ce=te({aspectRatio:ne,width:l,height:B},"contain");l=ce.width,B=ce.height;var ae=te({aspectRatio:ne,width:N,height:z},"cover");if(N=ae.width,z=ae.height,r){var ue=te({aspectRatio:ne,width:X,height:q},i.resize);X=ue.width,q=ue.height}else{var _e=te({aspectRatio:ne,width:X,height:q}),fe=_e.width;X=void 0===fe?x:fe;var be=_e.height;q=void 0===be?b:be}var Fe=-(X=Math.floor(k(Math.min(Math.max(X,N),l))))/2,We=-(q=Math.floor(k(Math.min(Math.max(q,z),B))))/2,Be=X,je=q,ye=[];if(r){var Ue,xe,De=te({aspectRatio:ne,width:x,height:b},{contain:"cover",cover:"contain"}[i.resize]);ye.push((x-(Ue=De.width))/2,(b-(xe=De.height))/2,Ue,xe)}if(ye.push(Fe,We,Be,je),u){var Ae=[q,X];X=Ae[0],q=Ae[1]}F.width=X,F.height=q,A(i.mimeType)||(i.mimeType=re.type);var Ie="transparent";re.size>i.convertSize&&i.convertTypes.indexOf(i.mimeType)>=0&&(i.mimeType="image/jpeg");var Le="image/jpeg"===i.mimeType;if(Le&&(Ie="#fff"),f.fillStyle=Ie,f.fillRect(0,0,X,q),i.beforeDraw&&i.beforeDraw.call(this,f,F),!this.aborted&&(f.save(),f.translate(X/2,q/2),f.rotate(Z*Math.PI/180),f.scale(w,$),f.drawImage.apply(f,[Y].concat(ye)),f.restore(),i.drew&&i.drew.call(this,f,F),!this.aborted)){var Se=function(ge){if(!s.aborted){var Re=function(he){return s.done({naturalWidth:x,naturalHeight:b,result:he})};if(ge&&Le&&i.retainExif&&s.exif&&s.exif.length>0){var we=function(he){return Re(c(M(function me(g,n){var o=j(new Uint8Array(g));if(255!==o[2]||224!==o[3])return g;var x=[255,216].concat(n,o.slice(4+(256*o[4]+o[5])));return new Uint8Array(x)}(he,s.exif),i.mimeType)))};if(ge.arrayBuffer)ge.arrayBuffer().then(we).catch(function(){s.fail(new Error("Failed to read the compressed image with Blob.arrayBuffer()."))});else{var de=new pe;s.reader=de,de.onload=function(Pe){we(Pe.target.result)},de.onabort=function(){s.fail(new Error("Aborted to read the compressed image with FileReader."))},de.onerror=function(){s.fail(new Error("Failed to read the compressed image with FileReader."))},de.onloadend=function(){s.reader=null},de.readAsArrayBuffer(ge)}}else Re(ge)}};F.toBlob?F.toBlob(Se,i.mimeType,i.quality):Se(c(F.toDataURL(i.mimeType,i.quality)))}}},{key:"done",value:function(o){var s=o.naturalWidth,x=o.naturalHeight,b=o.result,J=this.file,Z=this.image,R=this.options;if(oe&&0===Z.src.indexOf("blob:")&&oe.revokeObjectURL(Z.src),b)if(R.strict&&!R.retainExif&&b.size>J.size&&R.mimeType===J.type&&!(R.width>s||R.height>x||R.minWidth>s||R.minHeight>x||R.maxWidth<s||R.maxHeight<x))b=J;else{var w=new Date;b.lastModified=w.getTime(),b.lastModifiedDate=w,b.name=J.name,b.name&&b.type!==J.type&&(b.name=b.name.replace(Ee,function _(g){var n=A(g)?g.substr(6):"";return"jpeg"===n&&(n="jpg"),".".concat(n)}(b.type)))}else b=J;this.result=b,R.success&&R.success.call(this,b)}},{key:"fail",value:function(o){var s=this.options;if(!s.error)throw o;s.error.call(this,o)}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],[{key:"noConflict",value:function(){return window.Compressor=Oe,g}},{key:"setDefaults",value:function(o){C(O,o)}}]),g}();return Me}()},1687:(ee,W,t)=>{"use strict";t.d(W,{F:()=>e});var h=t(6321),y=t(4825);function e(T=0,C=h.z){return T<0&&(T=0),(0,y.H)(T,T,C)}},4004:(ee,W,t)=>{"use strict";t.d(W,{Z:()=>O});const y={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let e;const T=new Uint8Array(16);function C(){if(!e&&(e=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!e))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(T)}const a=[];for(let m=0;m<256;++m)a.push((m+256).toString(16).slice(1));const O=function v(m,U,D){if(y.randomUUID&&!U&&!m)return y.randomUUID();const K=(m=m||{}).random||(m.rng||C)();if(K[6]=15&K[6]|64,K[8]=63&K[8]|128,U){D=D||0;for(let j=0;j<16;++j)U[D+j]=K[j];return U}return function I(m,U=0){return a[m[U+0]]+a[m[U+1]]+a[m[U+2]]+a[m[U+3]]+"-"+a[m[U+4]]+a[m[U+5]]+"-"+a[m[U+6]]+a[m[U+7]]+"-"+a[m[U+8]]+a[m[U+9]]+"-"+a[m[U+10]]+a[m[U+11]]+a[m[U+12]]+a[m[U+13]]+a[m[U+14]]+a[m[U+15]]}(K)}}}]);