(self.webpackChunkpages=self.webpackChunkpages||[]).push([[747],{6747:(Ae,_e,q)=>{"use strict";q.r(_e),q.d(_e,{LoginModule:()=>R});var K=q(6814),$=q(5213),J=q(7228),te=q(7535),ie=q(5861),G=q(1378),W=q(4020),ae=q(1410),ne=q(9888),ee=q(9018),N=q(463),L=q(7165),F=q(8372),H=q(5661),V=q(2986),t=q(5879),he=q(8109),pe=q(1698),Ce=q(9344),xe=q(7219),ue=q(4929),de=q(554);const Me=["app-login-header",""];let ye=(()=>{class x{constructor(){this.appName=W.lW}ngOnInit(){}}return x.\u0275fac=function(d){return new(d||x)},x.\u0275cmp=t.Xpm({type:x,selectors:[["","app-login-header",""]],attrs:Me,decls:4,vars:2,consts:[[1,"mb-3","d-flex"],["svgSize","xl",3,"responsive"],[1,"mb-2"]],template:function(d,C){1&d&&(t.TgZ(0,"h1",0),t._UZ(1,"app-logo",1),t.qZA(),t.TgZ(2,"p",2),t._uU(3),t.qZA()),2&d&&(t.xp6(1),t.Q6J("responsive",!1),t.xp6(2),t.hij(" ",C.appName," \xe8 un progetto gratuito creato per raccogliere e offrire i principali servizi aggiuntivi disponibili per i siti e gli account dei circuiti Forumfree, Forumcommunity e Blogfree. Scritto principalmente in typescript, Easy Innovation sfrutta le potenzialit\xe0 offerte dal celebre pacchetto per sviluppo web Angular al fine di garantire un'esperienza di navigazione fluida, immediata e intuitiva. Dopo aver selezionato un profilo con cui effettuare il login, si viene indirizzati nell'apposita area del sito in cui \xe8 possibile usufruire delle funzioni messe a disposizione per forum, blog e utenti, tra cui EasyScript e la gestione degli Admin degli Script!\n"))},dependencies:[de.R],styles:["p[_ngcontent-%COMP%]{text-align:justify}"]}),x})();var se=q(1345),b=q(4725),y=q(4464);const _=["loginModal"];let v=(()=>{class x{constructor(d){this.endpointsService=d,this.supportLink=W.Ll,this.redirects={forumfree:"",forumcommunity:"",blogfree:""}}ngOnInit(){this.redirects={forumfree:this.endpointsService.get(se.jQ.LOGIN,se.G9.REDIRECT,se.P3.HTTPS),forumcommunity:this.endpointsService.get(se.jQ.LOGIN,se.G9.REDIRECT,se.P3.HTTPS,L.AW.fc),blogfree:this.endpointsService.get(se.jQ.LOGIN,se.G9.REDIRECT,se.P3.HTTPS,L.AW.bf)}}open(){this.loginModalRef.open()}}return x.\u0275fac=function(d){return new(d||x)(t.Y36(b.o))},x.\u0275cmp=t.Xpm({type:x,selectors:[["app-login-modal"]],viewQuery:function(d,C){if(1&d&&t.Gf(_,5),2&d){let z;t.iGM(z=t.CRH())&&(C.loginModalRef=z.first)}},decls:80,vars:4,consts:[["title","Cookie di terze parti"],["loginModal",""],["href","https://accounts.forumfree.it/?act=Login","target","_blank"],["href","https://accounts.forumcommunity.net/?act=Login","target","_blank"],["href","https://accounts.blogfree.net/?act=Login","target","_blank"],[1,"fst-italic"],[1,"mb-0"],[1,"d-flex","my-3","flex-wrap","justify-content-evenly"],["target","_self",1,"d-block","my-2","py-2","px-3","rounded","ff-btn",3,"href"],["target","_self",1,"d-block","my-2","py-2","px-3","rounded","fc-btn",3,"href"],["target","_self",1,"d-block","my-2","py-2","px-3","rounded","bf-btn",3,"href"],[1,"mb-1"],["href","https://support.google.com/chrome/answer/95647#zippy=%2Cconsentire-o-bloccare-i-cookie","target","_blank"],["href","https://support.mozilla.org/it/kb/cookie-terze-parti-protezione-antitracciamento","target","_blank"],["href","https://support.apple.com/it-it/guide/safari/sfri11471/mac","target","_blank"],["href","https://help.opera.com/latest/web-preferences/#cookies","target","_blank"],["target","_blank",3,"href"]],template:function(d,C){1&d&&(t.TgZ(0,"app-modal",0,1)(2,"p"),t._uU(3," In determinate occasioni e con alcuni browser \xe8 possibile che vengano riscontrate delle difficolt\xe0 nell'effettuare l'accesso con l'account desiderato in quanto quest'ultimo non \xe8 disponibile per la selezione. In questi casi, \xe8 innanzitutto necessario controllare di essere "),t.TgZ(4,"strong"),t._uU(5,"effettivamente loggati"),t.qZA(),t._uU(6," nel circuito a cui appartiene l'account con cui si vorrebbe accedere. In caso negativo, occorre recarsi sulla pagina di login di "),t.TgZ(7,"a",2),t._uU(8,"Forumfree"),t.qZA(),t._uU(9,", "),t.TgZ(10,"a",3),t._uU(11,"Forumcommunity"),t.qZA(),t._uU(12," o "),t.TgZ(13,"a",4),t._uU(14,"Blogfree"),t.qZA(),t._uU(15," ed eseguire l'accesso."),t._UZ(16,"br"),t._uU(17," Se, al contrario, l'account risulta correttamente loggato sul circuito di appartenenza, come primo tentativo viene consigliato di "),t.TgZ(18,"strong"),t._uU(19,"ricaricare semplicemente la pagina"),t.qZA(),t._uU(20,": infatti, pu\xf2 accadere che, per un momentaneo carico eccessivo sul server, il recupero della lista degli account fallisca. Se ci\xf2 non dovesse risultare sufficiente, \xe8 possibile seguire una delle due soluzioni descritte di seguito. "),t.qZA(),t.TgZ(21,"h6",5),t._uU(22,"Cookie di terze parti"),t.qZA(),t.TgZ(23,"p",6),t._uU(24," L'attuale metodo di autenticazione si basa sui cookie. \xc8 quindi necessario che, quando viene eseguita una richiesta al server, "),t.TgZ(25,"strong"),t._uU(26,"i cookie di Forumfree, Forumcommunity e Blogfree siano disponibili"),t.qZA(),t._uU(27,". Alcuni browser, per\xf2, tendono a bloccare di default l'invio dei cookie del sito di destinazione se il dominio di partenza \xe8 differente. Purtroppo, con gli strumenti che Forumfree al momento offre agli sviluppatori, il problema non \xe8 di immediata soluzione."),t._UZ(28,"br"),t._uU(29," In primo luogo, \xe8 possibile provare a "),t.TgZ(30,"strong"),t._uU(31,"selezionare il circuito"),t.qZA(),t._uU(32," a cui appartiene l'account con cui si vorrebbe accedere dai seguenti pulsanti: "),t.qZA(),t.TgZ(33,"div",7)(34,"a",8),t._uU(35,"Forumfree"),t.qZA(),t.TgZ(36,"a",9),t._uU(37,"Forumcommunity"),t.qZA(),t.TgZ(38,"a",10),t._uU(39,"Blogfree"),t.qZA()(),t.TgZ(40,"p"),t._uU(41," Cliccando su uno di questi, si verr\xe0 indirizzati a una pagina su Forumfree, Forumcommunity e Blogfree e, in seguito, subito indietro alla pagina di login di Easy Innovation. Se l'operazione dovesse avere successo, si dovrebbe riuscire a entrare nel sito. "),t.qZA(),t.TgZ(42,"h6",5),t._uU(43,"Abilitazione dei cookie di terze parti"),t.qZA(),t.TgZ(44,"p",11),t._uU(45," Una seconda alternativa riguarda "),t.TgZ(46,"strong"),t._uU(47,"l'abilitazione dei cookie di terze parti"),t.qZA(),t._uU(48,". Si tratta di cookie creati da altri siti che interagiscono con i siti visitati mediante alcuni elementi, quali le immagini. A seconda del browser, \xe8 possibile abilitare i cookie solo di alcuni specifici siti, al fine di proteggere maggiormente la privacy dell'utente. Di seguito vengono riportate le istruzioni da seguire per i principali browser attualmente in uso: "),t.qZA(),t.TgZ(49,"ul",11)(50,"li")(51,"a",12),t._uU(52," Google Chrome "),t.qZA()(),t.TgZ(53,"li")(54,"a",13),t._uU(55," Mozilla Firefox "),t.qZA()(),t.TgZ(56,"li")(57,"a",14),t._uU(58," Apple Safari "),t.qZA()(),t.TgZ(59,"li"),t._uU(60," Microsoft Edge: tramite la pagina in "),t.TgZ(61,"em"),t._uU(62,"Impostazioni"),t.qZA(),t._uU(63," > "),t.TgZ(64,"em"),t._uU(65,"Cookie e autorizzazioni sito"),t.qZA(),t._uU(66," > "),t.TgZ(67,"em"),t._uU(68,"Gestisci ed elimina cookie e dati del sito"),t.qZA(),t._uU(69," > "),t.TgZ(70,"em"),t._uU(71,"Blocca cookie di terze parti"),t.qZA()(),t.TgZ(72,"li")(73,"a",15),t._uU(74," Opera "),t.qZA()()(),t.TgZ(75,"p"),t._uU(76," In caso di difficolt\xe0, \xe8 possibile richiedere supporto aprendo una discussione nella "),t.TgZ(77,"a",16),t._uU(78,"sezione dedicata"),t.qZA(),t._uU(79,". "),t.qZA()()),2&d&&(t.xp6(34),t.Q6J("href",C.redirects.forumfree,t.LSH),t.xp6(2),t.Q6J("href",C.redirects.forumcommunity,t.LSH),t.xp6(2),t.Q6J("href",C.redirects.blogfree,t.LSH),t.xp6(39),t.Q6J("href",C.supportLink,t.LSH))},dependencies:[y.z],styles:[".ff-btn[_ngcontent-%COMP%], .fc-btn[_ngcontent-%COMP%], .bf-btn[_ngcontent-%COMP%]{color:#fff;transition:background-color .2s}.ff-btn[_ngcontent-%COMP%]{background-color:#58a72e}.ff-btn[_ngcontent-%COMP%]:hover{background-color:#4d9328}.ff-btn[_ngcontent-%COMP%]:active{background-color:#458224}.fc-btn[_ngcontent-%COMP%]{background-color:#0082cd}.fc-btn[_ngcontent-%COMP%]:hover{background-color:#0072b4}.fc-btn[_ngcontent-%COMP%]:active{background-color:#0065a0}.bf-btn[_ngcontent-%COMP%]{background-color:#e67f22}.bf-btn[_ngcontent-%COMP%]:hover{background-color:#d16f18}.bf-btn[_ngcontent-%COMP%]:active{background-color:#b96315}"]}),x})();var g=q(8277),w=q(8595),P=q(7291);const S=["app-login-profile",""];function O(x,k){if(1&x&&(t.TgZ(0,"div",4)(1,"div",5),t._UZ(2,"img",6),t.ALo(3,"uploadsreplace"),t._UZ(4,"div",7),t.qZA()()),2&x){const d=t.oxw();t.xp6(2),t.s9C("src",t.lcZ(3,3,d.profile.user.avatar),t.LSH),t.s9C("alt",d.profile.user.nickname+"'s "+d.profile.site.name+" avatar"),t.Q6J("nameDynamicReplace",d.profile.user.nickname)}}const X=function(){return{animation:"shift-away"}};function h(x,k){if(1&x&&(t._UZ(0,"a",8),t.ALo(1,"titlecase")),2&x){const d=t.oxw();t.Q6J("href",d.redirectLink,t.LSH)("target",d.jwtRedirect?"_self":"_blank")("appTippy","Effettua il login con "+t.lcZ(1,5,d.profile.site.name)+"!")("tippyProps",t.DdM(7,X))("disableOnTouchDevice",!0)}}function e(x,k){if(1&x&&t._UZ(0,"div",9),2&x){const d=t.oxw();t.Q6J("innerHTML",d.profile.user.nickname,t.oJD)}}const r=function(x,k){return{logged:x,"touch-device":k}};let n=(()=>{class x{constructor(d){this.loginService=d,this.loggedProfiles=0,this.failedAttempts=[],this.isTouch=W.eX,this.redirectLink="",this.jwtRedirect=!1}ngOnInit(){if(0!==this.loggedProfiles||this.failedAttempts.includes(this.profile.site.domain))this.redirectLink=`https://accounts.${this.profile.site.domain}/?act=Login`;else{const d=this.loginService.redirect;this.redirectLink=`https://script.${this.profile.site.domain}/i/jwt-redirect`,d!==L.B2.HOME&&(this.redirectLink+=`?params=${encodeURIComponent(JSON.stringify({path:d}))}`),this.jwtRedirect=!0}}}return x.\u0275fac=function(d){return new(d||x)(t.Y36(ee.r))},x.\u0275cmp=t.Xpm({type:x,selectors:[["","app-login-profile",""]],inputs:{profile:"profile",loggedProfiles:"loggedProfiles",failedAttempts:"failedAttempts"},attrs:S,decls:5,vars:10,consts:[[3,"ngClass"],["class","avatar rounded-circle",4,"ngIf","ngIfElse"],["loginRedirect",""],["class","name mt-sm-2 ms-sm-0 ms-2 text-center text-truncate fw-bold",3,"innerHTML",4,"ngIf"],[1,"avatar","rounded-circle"],[1,"card-flipper","position-relative","w-100","h-100"],["appImage","",1,"card-front","d-block","rounded-circle","image-cover",3,"nameDynamicReplace","src","alt"],[1,"card-back","w-100","h-100","rounded-circle","d-none","d-lg-block"],["tabindex","0",1,"d-block","avatar","rounded-circle",3,"href","target","appTippy","tippyProps","disableOnTouchDevice"],[1,"name","mt-sm-2","ms-sm-0","ms-2","text-center","text-truncate","fw-bold",3,"innerHTML"]],template:function(d,C){if(1&d&&(t.TgZ(0,"div",0),t.YNc(1,O,5,5,"div",1),t.YNc(2,h,2,8,"ng-template",null,2,t.W1O),t.YNc(4,e,1,1,"div",3),t.qZA()),2&d){const z=t.MAs(3);t.Gre("user user-",C.profile.site.short," d-flex flex-sm-column align-items-center justify-content-center"),t.Q6J("ngClass",t.WLB(7,r,C.profile.user.id>0,C.isTouch)),t.xp6(1),t.Q6J("ngIf",C.profile.user.id>0)("ngIfElse",z),t.xp6(3),t.Q6J("ngIf",C.profile.user.id>0)}},dependencies:[K.mk,K.O5,g.t,w.$,K.rS,P.g],styles:[".logged[_ngcontent-%COMP%]{cursor:pointer}.avatar[_ngcontent-%COMP%]{width:75px;height:75px;background-repeat:no-repeat;background-position:50% 50%;background-size:40px}.name[_ngcontent-%COMP%]{width:100px}.user-ff[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{color:#58a72e;background-color:#58a72e}.user-ff[_ngcontent-%COMP%]:not(.logged)   .avatar[_ngcontent-%COMP%]{background-image:url(/assets/icon-ff-50.jpg)}.user-fc[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{color:#0082cd;background-color:#0082cd}.user-fc[_ngcontent-%COMP%]:not(.logged)   .avatar[_ngcontent-%COMP%]{background-image:url(/assets/icon-fc-50.jpg)}.user-bf[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{color:#e67f22;background-color:#e67f22}.user-bf[_ngcontent-%COMP%]:not(.logged)   .avatar[_ngcontent-%COMP%]{background-image:url(/assets/icon-bf-50.jpg)}.user.touch-device.logged[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{border:3px solid}.user.touch-device.logged.user-ff[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{color:#58a72e}.user.touch-device.logged.user-fc[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{color:#0082cd}.user.touch-device.logged.user-bf[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{color:#e67f22}.user[_ngcontent-%COMP%]:not(.touch-device).logged   .avatar[_ngcontent-%COMP%]{border:2px solid}.user[_ngcontent-%COMP%]:not(.touch-device)   .name[_ngcontent-%COMP%]{transition:color .4s}.user[_ngcontent-%COMP%]:not(.touch-device)   .card-flipper[_ngcontent-%COMP%]{transition:.4s;transform-style:preserve-3d}.user[_ngcontent-%COMP%]:not(.touch-device)   .card-front[_ngcontent-%COMP%], .user[_ngcontent-%COMP%]:not(.touch-device)   .card-back[_ngcontent-%COMP%]{-webkit-backface-visibility:hidden;backface-visibility:hidden;position:absolute;top:0;left:0}.user[_ngcontent-%COMP%]:not(.touch-device)   .card-front[_ngcontent-%COMP%]{z-index:2;transform:rotateY(0)}.user[_ngcontent-%COMP%]:not(.touch-device)   .card-back[_ngcontent-%COMP%]{transform:rotateY(180deg);background-repeat:no-repeat;background-position:50% 50%}.user[_ngcontent-%COMP%]:not(.touch-device).logged:hover   .card-flipper[_ngcontent-%COMP%]{transform:rotateY(180deg)}.user[_ngcontent-%COMP%]:not(.touch-device).user-ff.logged:hover   .name[_ngcontent-%COMP%]{color:#58a72e}.user[_ngcontent-%COMP%]:not(.touch-device).user-ff.logged   .card-back[_ngcontent-%COMP%]{background-color:#58a72e;background-image:url(/assets/icon-ff-50.jpg)}.user[_ngcontent-%COMP%]:not(.touch-device).user-fc.logged:hover   .name[_ngcontent-%COMP%]{color:#0082cd}.user[_ngcontent-%COMP%]:not(.touch-device).user-fc.logged   .card-back[_ngcontent-%COMP%]{background-color:#0082cd;background-image:url(/assets/icon-fc-50.jpg)}.user[_ngcontent-%COMP%]:not(.touch-device).user-bf.logged:hover   .name[_ngcontent-%COMP%]{color:#e67f22}.user[_ngcontent-%COMP%]:not(.touch-device).user-bf.logged   .card-back[_ngcontent-%COMP%]{background-color:#e67f22;background-image:url(/assets/icon-bf-50.jpg)}@media (min-width: 576px){.avatar[_ngcontent-%COMP%]{width:100px;height:100px;background-size:initial}.name[_ngcontent-%COMP%]{width:150px}}"]}),x})();var a=q(1413),l=q(149),c=q.n(l),p=q(4004),i=q(6347);const o=["canvas"],u=["modal"];let f=(()=>{class x{constructor(d,C){this.graphqlService=d,this.loginService=C,this.loginQrEvent=new t.vpe,this.uuid=(0,p.Z)()}ngAfterViewInit(){const d=new URL(window.location.href);new(c())({width:250,height:250,margin:5,data:`${d.protocol}//${d.host}/settings?qr-login=${this.uuid}`,image:"/assets/easy-innovation-logo.svg",dotsOptions:{color:"#4b579a",type:"rounded"},backgroundOptions:{color:"#ffffff"},imageOptions:{crossOrigin:"anonymous",margin:3}}).append(this.canvas.nativeElement)}open(){this.graphqlService.subscribe({query:"\nsubscription securityLoginQr($listener: String!) {\n    securityLoginQr(listener: $listener) {\n        eventMessage\n        user {\n            host\n            id\n            nickname\n            avatar\n        }\n    }\n}",variables:{listener:this.uuid}},d=>{this.onNext(d)}).then(d=>{this.unsubscribeFunction&&this.unsubscribeFunction(),this.unsubscribeFunction=d}),this.modalComponent.open()}onModalHidden(){this.unsubscribeFunction&&this.unsubscribeFunction()}onNext(d){var C;const z=null===(C=d.data)||void 0===C?void 0:C.securityLoginQr;if(!z)return;const j=this.loginService.createProfileFromJwtResponse({host:z.user.host,user:(0,a.Z)({},z.user)});this.loginQrEvent.emit({refreshToken:z.refreshToken,refreshTokenId:z.refreshTokenId,accessToken:"",profile:j}),this.modalComponent.close()}ngOnDestroy(){this.unsubscribeFunction&&this.unsubscribeFunction()}}return x.\u0275fac=function(d){return new(d||x)(t.Y36(i.J),t.Y36(ee.r))},x.\u0275cmp=t.Xpm({type:x,selectors:[["app-login-qr-modal"]],viewQuery:function(d,C){if(1&d&&(t.Gf(o,5),t.Gf(u,5)),2&d){let z;t.iGM(z=t.CRH())&&(C.canvas=z.first),t.iGM(z=t.CRH())&&(C.modalComponent=z.first)}},outputs:{loginQrEvent:"loginQrEvent"},decls:16,vars:1,consts:[["title","Login tramite QR Code",3,"hidden"],["modal",""],[1,"text-center"],["canvas",""]],template:function(d,C){1&d&&(t.TgZ(0,"app-modal",0,1),t.NdJ("hidden",function(){return C.onModalHidden()}),t.TgZ(2,"ol")(3,"li"),t._uU(4,"Apri l'app fotocamera integrata del telefono o tablet."),t.qZA(),t.TgZ(5,"li"),t._uU(6,"Inquadra il QR Code."),t.qZA(),t.TgZ(7,"li"),t._uU(8,"Tocca il banner che compare sul telefono o tablet."),t.qZA(),t.TgZ(9,"li"),t._uU(10,"Segui le istruzioni sullo schermo per terminare l'accesso."),t.qZA()(),t._UZ(11,"div",2,3),t.TgZ(13,"p",2)(14,"small",2),t._uU(15),t.qZA()()()),2&d&&(t.xp6(15),t.hij("Codice di verifica: ",C.uuid,""))},dependencies:[y.z]}),x})();function M(x,k){1&x&&t._UZ(0,"app-loader",13)}function A(x,k){if(1&x){const d=t.EpF();t.TgZ(0,"div",19)(1,"strong"),t._uU(2,"Non risulti loggato in alcun account!"),t.qZA(),t._UZ(3,"br"),t._uU(4," Se ritieni che sia un errore, prova a ricaricare la pagina oppure a seguire "),t.TgZ(5,"a",20),t.NdJ("click",function(){t.CHM(d),t.oxw(2);const z=t.MAs(13);return t.KtG(z.open())}),t._uU(6,"questi consigli"),t.qZA(),t._uU(7," e vedere se il problema si risolve! "),t.qZA()}}const m=function(x,k){return{"mx-sm-auto":x,"mb-4 mb-sm-0":k}};function T(x,k){if(1&x){const d=t.EpF();t.TgZ(0,"li",21),t.NdJ("click",function(){const j=t.CHM(d).$implicit,ce=t.oxw(3);return t.KtG(ce.clickProfileEvent(j))}),t.qZA()}if(2&x){const d=k.$implicit,C=k.first,z=k.last,j=t.oxw(3);t.Q6J("ngClass",t.WLB(4,m,C||z,!z))("profile",d)("loggedProfiles",j.loggedProfiles)("failedAttempts",j.failedAttempts)}}function D(x,k){if(1&x){const d=t.EpF();t.YNc(0,A,8,0,"div",14),t.TgZ(1,"ul",15),t.YNc(2,T,1,7,"li",16),t.qZA(),t.TgZ(3,"div",17),t._uU(4,"Proseguendo accetti i "),t.TgZ(5,"a",18),t.NdJ("click",function(){t.CHM(d);const z=t.oxw(2);return t.KtG(z.openTosModal())}),t._uU(6,"Termini di Servizio"),t.qZA(),t._uU(7),t.qZA()}if(2&x){const d=t.oxw(2);t.Q6J("ngIf",0===d.loggedProfiles),t.xp6(2),t.Q6J("ngForOf",d.profiles),t.xp6(5),t.hij(" di ",d.appName,"")}}function I(x,k){if(1&x){const d=t.EpF();t.ynx(0),t.TgZ(1,"div",1)(2,"main",2),t._UZ(3,"div",3),t.TgZ(4,"div",4)(5,"div",5),t.NdJ("click",function(){t.CHM(d);const z=t.MAs(15);return t.KtG(z.open())}),t._uU(6,"qr_code_scanner"),t.qZA(),t.TgZ(7,"div",6),t._uU(8,"Scegli l'account Forumfree, Forumcommunity o Blogfree con cui accedere!"),t.qZA(),t.YNc(9,M,1,0,"app-loader",7),t.YNc(10,D,8,3,"ng-template",null,8,t.W1O),t.qZA()(),t._UZ(12,"app-login-modal",null,9),t.TgZ(14,"app-login-qr-modal",10,11),t.NdJ("loginQrEvent",function(z){t.CHM(d);const j=t.oxw();return t.KtG(j.saveProfileTokensEvent(z))}),t.qZA(),t._UZ(16,"app-footer",12),t.qZA(),t.BQk()}if(2&x){const d=t.MAs(11),C=t.oxw();t.xp6(1),t.ekj("embedded",C.window!==C.window.parent),t.xp6(8),t.Q6J("ngIf",0===C.profiles.length)("ngIfElse",d),t.xp6(7),t.Q6J("subscribeToToggleTosModalSubject",!0)}}const Z=[{path:"",component:(()=>{class x{constructor(d,C,z,j,ce,fe,le,oe,be,ge,Se,ve,me){this.router=d,this.loginService=C,this.globalsService=z,this.activatedRoute=j,this.toastService=ce,this.titleCasePipe=fe,this.tosService=le,this.urlQueryParamsService=oe,this.preferencesService=be,this.profileService=ge,this.loadingBarService=Se,this.window=ve,this.localStorageService=me,this.profiles=[],this.render=!1,this.loggedProfiles=0,this.failedAttempts=[],this.appName=W.lW,W.wS&&this.loadingBarService.useRef("http").disable()}clickProfileEvent(d){var C=this;return(0,ie.Z)(function*(){if(d.user.id<1)return;const z=yield C.loginService.getProfileWithTokens(d.site.domain);z.refreshToken.length<1||(yield C.saveProfileTokensEvent(z))})()}saveProfileTokensEvent(d){var C=this;return(0,ie.Z)(function*(){C.globalsService.refreshToken={value:d.refreshToken,id:d.refreshTokenId},C.globalsService.accessToken=d.accessToken,d.refreshToken||(C.loginService.loggedWithOnlyAccessToken=!0),yield C.setProfileAndNavigate(d.profile)})()}setProfileAndNavigate(d){var C=this;return(0,ie.Z)(function*(){C.globalsService.credentials=d;const z=C.loginService.redirect;C.loginService.redirect=void 0,C.loginService.loggedInCurrentSession=!0,yield C.router.navigateByUrl(z)})()}ngOnInit(){var d=this;return(0,ie.Z)(function*(){const C=d.activatedRoute.snapshot.data[L.RT.PROFILE];yield d.logout(C&&C.success&&C.data&&!C.data.refreshToken);const z=d.urlQueryParamsService.getAndDeleteParam(L.RT.REDIRECT_PATH);if(z&&(d.loginService.redirect=z),C)if(C.success){if(C.data.profile)return void(yield d.saveProfileTokensEvent(C.data));const fe=C.data.refreshToken,le=C.data.accessToken;let oe;if(fe){d.globalsService.refreshToken={value:fe,id:C.data.refreshTokenId};try{const be=yield d.profileService.generateAccessToken();d.globalsService.accessToken=be.token,oe=be.info}catch(be){}}else le&&(d.globalsService.accessToken=le,oe=yield d.loginService.getProfileFromAccessToken(le),oe||(yield d.invalidateOldSession()));if(oe)return void(yield d.setProfileAndNavigate(d.loginService.createProfileFromJwtResponse({host:oe.host,user:{id:oe.id,avatar:oe.avatar,nickname:oe.nickname,roles:oe.roles}})))}else C.domain&&(d.showToast(C.domain),d.failedAttempts.push(C.domain));d.render=!0;const j=Object.values(L.AW),ce=yield Promise.all(j.map(fe=>d.loginService.getProfile(fe)));d.loggedProfiles=ce.filter(fe=>fe.user.id>0).length,d.profiles=ce})()}logout(d){var C=this;return(0,ie.Z)(function*(){d||(yield C.invalidateOldSession()),C.globalsService.credentials=void 0,C.globalsService.forum=void 0,C.globalsService.accessToken=void 0,C.loginService.loggedWithOnlyAccessToken=!1,C.preferencesService.resetItemsOnProfileChange(),C.localStorageService.removeItem(L.dR.PROFILE)})()}invalidateOldSession(){var d=this;return(0,ie.Z)(function*(){d.globalsService.refreshToken&&(yield d.profileService.invalidateSession()),d.globalsService.refreshToken=void 0})()}showToast(d){this.toastService.show({content:`Non risulti loggato su ${this.titleCasePipe.transform(d.split(".")[0])}, prova ad effettuare l'accesso dal <a href="https://accounts.${d}/?act=Login" target="_blank">portale dedicato</a> e a ricaricare la pagina!`,level:G.m.ERROR})}openTosModal(){this.tosService.toggleModal(!0)}}return x.\u0275fac=function(d){return new(d||x)(t.Y36(he.F0),t.Y36(ee.r),t.Y36(ae.d),t.Y36(he.gz),t.Y36(H.k),t.Y36(K.rS),t.Y36(pe.F),t.Y36(V.J),t.Y36(N.y),t.Y36(F.H),t.Y36(Ce.dL),t.Y36(Window),t.Y36(ne.n))},x.\u0275cmp=t.Xpm({type:x,selectors:[["ng-component"]],features:[t._Bn([K.rS])],decls:1,vars:1,consts:[[4,"ngIf"],[1,"wrapper"],[1,"shadow-sm","d-flex","flex-column","mx-auto","mb-5"],["app-login-header","",1,"login-info","text-white","p-4"],[1,"login-form","p-4","bg-white","d-flex","flex-column","justify-content-center","position-relative"],[1,"material-icons-outlined","p-3","position-absolute","cursor-pointer","qr-code-icon",3,"click"],[1,"text-center","mb-4","px-4"],["message","Caricamento profili",4,"ngIf","ngIfElse"],["profileList",""],["loginModal",""],[3,"loginQrEvent"],["loginQrModal",""],[3,"subscribeToToggleTosModalSubject"],["message","Caricamento profili"],["class","alert alert-primary text-center",4,"ngIf"],[1,"user-list","list-unstyled","d-flex","flex-column","flex-sm-row","mb-0"],["app-login-profile","",3,"ngClass","profile","loggedProfiles","failedAttempts","click",4,"ngFor","ngForOf"],[1,"text-center","small","text-muted","mt-3"],["role","button",1,"tos-modal-btn",3,"click"],[1,"alert","alert-primary","text-center"],["role","button",1,"text-decoration-underline","fw-bold",3,"click"],["app-login-profile","",3,"ngClass","profile","loggedProfiles","failedAttempts","click"]],template:function(d,C){1&d&&t.YNc(0,I,17,5,"ng-container",0),2&d&&t.Q6J("ngIf",C.render)},dependencies:[K.mk,K.sg,K.O5,xe.c,ue.R,ye,v,n,f],styles:["[_nghost-%COMP%]{display:flex;min-height:100vh}.wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-basis:100%;background-image:url(/assets/back-pattern.png)}.wrapper.embedded[_ngcontent-%COMP%]{display:none}main[_ngcontent-%COMP%]{max-width:992px}.login-info[_ngcontent-%COMP%]{background-color:#4b579a}.login-form[_ngcontent-%COMP%]{min-height:228px}.alert.alert-primary[_ngcontent-%COMP%]{margin-bottom:2rem}.qr-code-icon[_ngcontent-%COMP%]{right:0;top:0}@media (min-width: 768px){main[_ngcontent-%COMP%]{margin-top:5rem}}@media (min-width: 768px){.login-info[_ngcontent-%COMP%]{border-top-left-radius:.25rem;border-top-right-radius:.25rem}.login-form[_ngcontent-%COMP%]{border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem}}"]}),x})()}];let U=(()=>{class x{}return x.\u0275fac=function(d){return new(d||x)},x.\u0275mod=t.oAB({type:x}),x.\u0275inj=t.cJS({imports:[he.Bz.forChild(Z),he.Bz]}),x})();var E=q(2740),B=q(4610),re=q(3038),Y=q(5778);let R=(()=>{class x{}return x.\u0275fac=function(d){return new(d||x)},x.\u0275mod=t.oAB({type:x}),x.\u0275inj=t.cJS({providers:[{provide:Window,useValue:window}],imports:[K.ez,$._,J.$,te.q,U,E.h,B.z,re.G,Y.g]}),x})()},149:Ae=>{self,Ae.exports=(()=>{var _e={192:($,J)=>{var te,ie,G=function(){var W=function(b,y){var _=b,v=F[y],g=null,w=0,P=null,S=[],O={},X=function(i,s){g=function(o){for(var u=new Array(o),f=0;f<o;f+=1){u[f]=new Array(o);for(var M=0;M<o;M+=1)u[f][M]=null}return u}(w=4*_+17),h(0,0),h(w-7,0),h(0,w-7),r(),e(),a(i,s),_>=7&&n(i),null==P&&(P=c(_,v,S)),l(P,s)},h=function(i,s){for(var o=-1;o<=7;o+=1)if(!(i+o<=-1||w<=i+o))for(var u=-1;u<=7;u+=1)s+u<=-1||w<=s+u||(g[i+o][s+u]=0<=o&&o<=6&&(0==u||6==u)||0<=u&&u<=6&&(0==o||6==o)||2<=o&&o<=4&&2<=u&&u<=4)},e=function(){for(var i=8;i<w-8;i+=1)null==g[i][6]&&(g[i][6]=i%2==0);for(var s=8;s<w-8;s+=1)null==g[6][s]&&(g[6][s]=s%2==0)},r=function(){for(var i=H.getPatternPosition(_),s=0;s<i.length;s+=1)for(var o=0;o<i.length;o+=1){var u=i[s],f=i[o];if(null==g[u][f])for(var M=-2;M<=2;M+=1)for(var A=-2;A<=2;A+=1)g[u+M][f+A]=-2==M||2==M||-2==A||2==A||0==M&&0==A}},n=function(i){for(var s=H.getBCHTypeNumber(_),o=0;o<18;o+=1){var u=!i&&1==(s>>o&1);g[Math.floor(o/3)][o%3+w-8-3]=u}for(o=0;o<18;o+=1)u=!i&&1==(s>>o&1),g[o%3+w-8-3][Math.floor(o/3)]=u},a=function(i,s){for(var u=H.getBCHTypeInfo(v<<3|s),f=0;f<15;f+=1){var M=!i&&1==(u>>f&1);f<6?g[f][8]=M:f<8?g[f+1][8]=M:g[w-15+f][8]=M}for(f=0;f<15;f+=1)M=!i&&1==(u>>f&1),f<8?g[8][w-f-1]=M:f<9?g[8][15-f-1+1]=M:g[8][15-f-1]=M;g[w-8][8]=!i},l=function(i,s){for(var o=-1,u=w-1,f=7,M=0,A=H.getMaskFunction(s),m=w-1;m>0;m-=2)for(6==m&&(m-=1);;){for(var T=0;T<2;T+=1)if(null==g[u][m-T]){var D=!1;M<i.length&&(D=1==(i[M]>>>f&1)),A(u,m-T)&&(D=!D),g[u][m-T]=D,-1==(f-=1)&&(M+=1,f=7)}if((u+=o)<0||w<=u){u-=o,o=-o;break}}},c=function(i,s,o){for(var u=he.getRSBlocks(i,s),f=pe(),M=0;M<o.length;M+=1){var A=o[M];f.put(A.getMode(),4),f.put(A.getLength(),H.getLengthInBits(A.getMode(),i)),A.write(f)}var m=0;for(M=0;M<u.length;M+=1)m+=u[M].dataCount;if(f.getLengthInBits()>8*m)throw"code length overflow. ("+f.getLengthInBits()+">"+8*m+")";for(f.getLengthInBits()+4<=8*m&&f.put(0,4);f.getLengthInBits()%8!=0;)f.putBit(!1);for(;!(f.getLengthInBits()>=8*m||(f.put(236,8),f.getLengthInBits()>=8*m));)f.put(17,8);return function(T,D){for(var I=0,Q=0,Z=0,U=new Array(D.length),E=new Array(D.length),B=0;B<D.length;B+=1){var re=D[B].dataCount,Y=D[B].totalCount-re;Q=Math.max(Q,re),Z=Math.max(Z,Y),U[B]=new Array(re);for(var R=0;R<U[B].length;R+=1)U[B][R]=255&T.getBuffer()[R+I];I+=re;var x=H.getErrorCorrectPolynomial(Y),k=t(U[B],x.getLength()-1).mod(x);for(E[B]=new Array(x.getLength()-1),R=0;R<E[B].length;R+=1){var d=R+k.getLength()-E[B].length;E[B][R]=d>=0?k.getAt(d):0}}var C=0;for(R=0;R<D.length;R+=1)C+=D[R].totalCount;var z=new Array(C),j=0;for(R=0;R<Q;R+=1)for(B=0;B<D.length;B+=1)R<U[B].length&&(z[j]=U[B][R],j+=1);for(R=0;R<Z;R+=1)for(B=0;B<D.length;B+=1)R<E[B].length&&(z[j]=E[B][R],j+=1);return z}(f,u)};O.addData=function(i,s){var o=null;switch(s=s||"Byte"){case"Numeric":o=Ce(i);break;case"Alphanumeric":o=xe(i);break;case"Byte":o=ue(i);break;case"Kanji":o=de(i);break;default:throw"mode:"+s}S.push(o),P=null},O.isDark=function(i,s){if(i<0||w<=i||s<0||w<=s)throw i+","+s;return g[i][s]},O.getModuleCount=function(){return w},O.make=function(){if(_<1){for(var i=1;i<40;i++){for(var s=he.getRSBlocks(i,v),o=pe(),u=0;u<S.length;u++){var f=S[u];o.put(f.getMode(),4),o.put(f.getLength(),H.getLengthInBits(f.getMode(),i)),f.write(o)}var M=0;for(u=0;u<s.length;u++)M+=s[u].dataCount;if(o.getLengthInBits()<=8*M)break}_=i}X(!1,function(){for(var A=0,m=0,T=0;T<8;T+=1){X(!0,T);var D=H.getLostPoint(O);(0==T||A>D)&&(A=D,m=T)}return m}())},O.createTableTag=function(i,s){i=i||2;var o="";o+='<table style="',o+=" border-width: 0px; border-style: none;",o+=" border-collapse: collapse;",o+=" padding: 0px; margin: "+(s=void 0===s?4*i:s)+"px;",o+='">',o+="<tbody>";for(var u=0;u<O.getModuleCount();u+=1){o+="<tr>";for(var f=0;f<O.getModuleCount();f+=1)o+='<td style="',o+=" border-width: 0px; border-style: none;",o+=" border-collapse: collapse;",o+=" padding: 0px; margin: 0px;",o+=" width: "+i+"px;",o+=" height: "+i+"px;",o+=" background-color: ",o+=O.isDark(u,f)?"#000000":"#ffffff",o+=";",o+='"/>';o+="</tr>"}return(o+="</tbody>")+"</table>"},O.createSvgTag=function(i,s,o,u){var f={};"object"==typeof arguments[0]&&(i=(f=arguments[0]).cellSize,s=f.margin,o=f.alt,u=f.title),i=i||2,s=void 0===s?4*i:s,(o="string"==typeof o?{text:o}:o||{}).text=o.text||null,o.id=o.text?o.id||"qrcode-description":null,(u="string"==typeof u?{text:u}:u||{}).text=u.text||null,u.id=u.text?u.id||"qrcode-title":null;var M,A,m,T,D=O.getModuleCount()*i+2*s,I="";for(T="l"+i+",0 0,"+i+" -"+i+",0 0,-"+i+"z ",I+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',I+=f.scalable?"":' width="'+D+'px" height="'+D+'px"',I+=' viewBox="0 0 '+D+" "+D+'" ',I+=' preserveAspectRatio="xMinYMin meet"',I+=u.text||o.text?' role="img" aria-labelledby="'+p([u.id,o.id].join(" ").trim())+'"':"",I+=">",I+=u.text?'<title id="'+p(u.id)+'">'+p(u.text)+"</title>":"",I+=o.text?'<description id="'+p(o.id)+'">'+p(o.text)+"</description>":"",I+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',I+='<path d="',A=0;A<O.getModuleCount();A+=1)for(m=A*i+s,M=0;M<O.getModuleCount();M+=1)O.isDark(A,M)&&(I+="M"+(M*i+s)+","+m+T);return(I+='" stroke="transparent" fill="black"/>')+"</svg>"},O.createDataURL=function(i,s){i=i||2,s=void 0===s?4*i:s;var o=O.getModuleCount()*i+2*s,u=s,f=o-s;return se(o,o,function(M,A){if(u<=M&&M<f&&u<=A&&A<f){var m=Math.floor((M-u)/i),T=Math.floor((A-u)/i);return O.isDark(T,m)?0:1}return 1})},O.createImgTag=function(i,s,o){i=i||2,s=void 0===s?4*i:s;var u=O.getModuleCount()*i+2*s,f="";return f+="<img",f+=' src="',f+=O.createDataURL(i,s),f+='"',f+=' width="',f+=u,f+='"',f+=' height="',f+=u,f+='"',o&&(f+=' alt="',f+=p(o),f+='"'),f+"/>"};var p=function(i){for(var s="",o=0;o<i.length;o+=1){var u=i.charAt(o);switch(u){case"<":s+="&lt;";break;case">":s+="&gt;";break;case"&":s+="&amp;";break;case'"':s+="&quot;";break;default:s+=u}}return s};return O.createASCII=function(i,s){if((i=i||1)<2)return function(U){U=void 0===U?2:U;var E,B,re,Y,R,x=1*O.getModuleCount()+2*U,k=U,d=x-U,C={"\u2588\u2588":"\u2588","\u2588 ":"\u2580"," \u2588":"\u2584","  ":" "},z={"\u2588\u2588":"\u2580","\u2588 ":"\u2580"," \u2588":" ","  ":" "},j="";for(E=0;E<x;E+=2){for(re=Math.floor((E-k)/1),Y=Math.floor((E+1-k)/1),B=0;B<x;B+=1)R="\u2588",k<=B&&B<d&&k<=E&&E<d&&O.isDark(re,Math.floor((B-k)/1))&&(R=" "),k<=B&&B<d&&k<=E+1&&E+1<d&&O.isDark(Y,Math.floor((B-k)/1))?R+=" ":R+="\u2588",j+=U<1&&E+1>=d?z[R]:C[R];j+="\n"}return x%2&&U>0?j.substring(0,j.length-x-1)+Array(x+1).join("\u2580"):j.substring(0,j.length-1)}(s);i-=1,s=void 0===s?2*i:s;var o,u,f,M,A=O.getModuleCount()*i+2*s,m=s,T=A-s,D=Array(i+1).join("\u2588\u2588"),I=Array(i+1).join("  "),Q="",Z="";for(o=0;o<A;o+=1){for(f=Math.floor((o-m)/i),Z="",u=0;u<A;u+=1)M=1,m<=u&&u<T&&m<=o&&o<T&&O.isDark(f,Math.floor((u-m)/i))&&(M=0),Z+=M?D:I;for(f=0;f<i;f+=1)Q+=Z+"\n"}return Q.substring(0,Q.length-1)},O.renderTo2dContext=function(i,s){s=s||2;for(var o=O.getModuleCount(),u=0;u<o;u++)for(var f=0;f<o;f++)i.fillStyle=O.isDark(u,f)?"black":"white",i.fillRect(u*s,f*s,s,s)},O};W.stringToBytes=(W.stringToBytesFuncs={default:function(b){for(var y=[],_=0;_<b.length;_+=1){var v=b.charCodeAt(_);y.push(255&v)}return y}}).default,W.createStringToBytes=function(b,y){var _=function(){for(var g=ye(b),w=function(){var e=g.read();if(-1==e)throw"eof";return e},P=0,S={};;){var O=g.read();if(-1==O)break;var X=w(),h=w()<<8|w();S[String.fromCharCode(O<<8|X)]=h,P+=1}if(P!=y)throw P+" != "+y;return S}(),v="?".charCodeAt(0);return function(g){for(var w=[],P=0;P<g.length;P+=1){var S=g.charCodeAt(P);if(S<128)w.push(S);else{var O=_[g.charAt(P)];"number"==typeof O?(255&O)==O?w.push(O):(w.push(O>>>8),w.push(255&O)):w.push(v)}}return w}};var ae,N,L,F={L:1,M:0,Q:3,H:2},H=(ae=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],1335,7973,L=function(b){for(var y=0;0!=b;)y+=1,b>>>=1;return y},(N={}).getBCHTypeInfo=function(b){for(var y=b<<10;L(y)-L(1335)>=0;)y^=1335<<L(y)-L(1335);return 21522^(b<<10|y)},N.getBCHTypeNumber=function(b){for(var y=b<<12;L(y)-L(7973)>=0;)y^=7973<<L(y)-L(7973);return b<<12|y},N.getPatternPosition=function(b){return ae[b-1]},N.getMaskFunction=function(b){switch(b){case 0:return function(y,_){return(y+_)%2==0};case 1:return function(y,_){return y%2==0};case 2:return function(y,_){return _%3==0};case 3:return function(y,_){return(y+_)%3==0};case 4:return function(y,_){return(Math.floor(y/2)+Math.floor(_/3))%2==0};case 5:return function(y,_){return y*_%2+y*_%3==0};case 6:return function(y,_){return(y*_%2+y*_%3)%2==0};case 7:return function(y,_){return(y*_%3+(y+_)%2)%2==0};default:throw"bad maskPattern:"+b}},N.getErrorCorrectPolynomial=function(b){for(var y=t([1],0),_=0;_<b;_+=1)y=y.multiply(t([1,V.gexp(_)],0));return y},N.getLengthInBits=function(b,y){if(1<=y&&y<10)switch(b){case 1:return 10;case 2:return 9;case 4:case 8:return 8;default:throw"mode:"+b}else if(y<27)switch(b){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw"mode:"+b}else{if(!(y<41))throw"type:"+y;switch(b){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw"mode:"+b}}},N.getLostPoint=function(b){for(var y=b.getModuleCount(),_=0,v=0;v<y;v+=1)for(var g=0;g<y;g+=1){for(var w=0,P=b.isDark(v,g),S=-1;S<=1;S+=1)if(!(v+S<0||y<=v+S))for(var O=-1;O<=1;O+=1)g+O<0||y<=g+O||0==S&&0==O||P==b.isDark(v+S,g+O)&&(w+=1);w>5&&(_+=3+w-5)}for(v=0;v<y-1;v+=1)for(g=0;g<y-1;g+=1){var X=0;b.isDark(v,g)&&(X+=1),b.isDark(v+1,g)&&(X+=1),b.isDark(v,g+1)&&(X+=1),b.isDark(v+1,g+1)&&(X+=1),0!=X&&4!=X||(_+=3)}for(v=0;v<y;v+=1)for(g=0;g<y-6;g+=1)b.isDark(v,g)&&!b.isDark(v,g+1)&&b.isDark(v,g+2)&&b.isDark(v,g+3)&&b.isDark(v,g+4)&&!b.isDark(v,g+5)&&b.isDark(v,g+6)&&(_+=40);for(g=0;g<y;g+=1)for(v=0;v<y-6;v+=1)b.isDark(v,g)&&!b.isDark(v+1,g)&&b.isDark(v+2,g)&&b.isDark(v+3,g)&&b.isDark(v+4,g)&&!b.isDark(v+5,g)&&b.isDark(v+6,g)&&(_+=40);var h=0;for(g=0;g<y;g+=1)for(v=0;v<y;v+=1)b.isDark(v,g)&&(h+=1);return _+Math.abs(100*h/y/y-50)/5*10},N),V=function(){for(var b=new Array(256),y=new Array(256),_=0;_<8;_+=1)b[_]=1<<_;for(_=8;_<256;_+=1)b[_]=b[_-4]^b[_-5]^b[_-6]^b[_-8];for(_=0;_<255;_+=1)y[b[_]]=_;return{glog:function(v){if(v<1)throw"glog("+v+")";return y[v]},gexp:function(v){for(;v<0;)v+=255;for(;v>=256;)v-=255;return b[v]}}}();function t(b,y){if(void 0===b.length)throw b.length+"/"+y;var _=function(){for(var g=0;g<b.length&&0==b[g];)g+=1;for(var w=new Array(b.length-g+y),P=0;P<b.length-g;P+=1)w[P]=b[P+g];return w}(),v={getAt:function(g){return _[g]},getLength:function(){return _.length},multiply:function(g){for(var w=new Array(v.getLength()+g.getLength()-1),P=0;P<v.getLength();P+=1)for(var S=0;S<g.getLength();S+=1)w[P+S]^=V.gexp(V.glog(v.getAt(P))+V.glog(g.getAt(S)));return t(w,0)},mod:function(g){if(v.getLength()-g.getLength()<0)return v;for(var w=V.glog(v.getAt(0))-V.glog(g.getAt(0)),P=new Array(v.getLength()),S=0;S<v.getLength();S+=1)P[S]=v.getAt(S);for(S=0;S<g.getLength();S+=1)P[S]^=V.gexp(V.glog(g.getAt(S))+w);return t(P,0).mod(g)}};return v}var b,y,he=(b=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],y=function(v,g){var w={};return w.totalCount=v,w.dataCount=g,w},{getRSBlocks:function(v,g){var w=function(n,a){switch(a){case F.L:return b[4*(n-1)+0];case F.M:return b[4*(n-1)+1];case F.Q:return b[4*(n-1)+2];case F.H:return b[4*(n-1)+3];default:return}}(v,g);if(void 0===w)throw"bad rs block @ typeNumber:"+v+"/errorCorrectionLevel:"+g;for(var P=w.length/3,S=[],O=0;O<P;O+=1)for(var X=w[3*O+0],h=w[3*O+1],e=w[3*O+2],r=0;r<X;r+=1)S.push(y(h,e));return S}}),pe=function(){var b=[],y=0,_={getBuffer:function(){return b},getAt:function(v){var g=Math.floor(v/8);return 1==(b[g]>>>7-v%8&1)},put:function(v,g){for(var w=0;w<g;w+=1)_.putBit(1==(v>>>g-w-1&1))},getLengthInBits:function(){return y},putBit:function(v){var g=Math.floor(y/8);b.length<=g&&b.push(0),v&&(b[g]|=128>>>y%8),y+=1}};return _},Ce=function(b){var y=b,_={getMode:function(){return 1},getLength:function(w){return y.length},write:function(w){for(var P=y,S=0;S+2<P.length;)w.put(v(P.substring(S,S+3)),10),S+=3;S<P.length&&(P.length-S==1?w.put(v(P.substring(S,S+1)),4):P.length-S==2&&w.put(v(P.substring(S,S+2)),7))}},v=function(w){for(var P=0,S=0;S<w.length;S+=1)P=10*P+g(w.charAt(S));return P},g=function(w){if("0"<=w&&w<="9")return w.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+w};return _},xe=function(b){var y=b,_={getMode:function(){return 2},getLength:function(g){return y.length},write:function(g){for(var w=y,P=0;P+1<w.length;)g.put(45*v(w.charAt(P))+v(w.charAt(P+1)),11),P+=2;P<w.length&&g.put(v(w.charAt(P)),6)}},v=function(g){if("0"<=g&&g<="9")return g.charCodeAt(0)-"0".charCodeAt(0);if("A"<=g&&g<="Z")return g.charCodeAt(0)-"A".charCodeAt(0)+10;switch(g){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+g}};return _},ue=function(b){var y=W.stringToBytes(b);return{getMode:function(){return 4},getLength:function(_){return y.length},write:function(_){for(var v=0;v<y.length;v+=1)_.put(y[v],8)}}},de=function(b){var y=W.stringToBytesFuncs.SJIS;if(!y)throw"sjis not supported.";!function(v,g){var w=y("\u53cb");if(2!=w.length||38726!=(w[0]<<8|w[1]))throw"sjis not supported."}();var _=y(b);return{getMode:function(){return 8},getLength:function(v){return~~(_.length/2)},write:function(v){for(var g=_,w=0;w+1<g.length;){var P=(255&g[w])<<8|255&g[w+1];if(33088<=P&&P<=40956)P-=33088;else{if(!(57408<=P&&P<=60351))throw"illegal char at "+(w+1)+"/"+P;P-=49472}v.put(P=192*(P>>>8&255)+(255&P),13),w+=2}if(w<g.length)throw"illegal char at "+(w+1)}}},Me=function(){var b=[],y={writeByte:function(_){b.push(255&_)},writeShort:function(_){y.writeByte(_),y.writeByte(_>>>8)},writeBytes:function(_,v,g){v=v||0,g=g||_.length;for(var w=0;w<g;w+=1)y.writeByte(_[w+v])},writeString:function(_){for(var v=0;v<_.length;v+=1)y.writeByte(_.charCodeAt(v))},toByteArray:function(){return b},toString:function(){var _="";_+="[";for(var v=0;v<b.length;v+=1)v>0&&(_+=","),_+=b[v];return _+"]"}};return y},ye=function(b){var y=b,_=0,v=0,g=0,w={read:function(){for(;g<8;){if(_>=y.length){if(0==g)return-1;throw"unexpected end of file./"+g}var S=y.charAt(_);if(_+=1,"="==S)return g=0,-1;S.match(/^\s$/)||(v=v<<6|P(S.charCodeAt(0)),g+=6)}var O=v>>>g-8&255;return g-=8,O}},P=function(S){if(65<=S&&S<=90)return S-65;if(97<=S&&S<=122)return S-97+26;if(48<=S&&S<=57)return S-48+52;if(43==S)return 62;if(47==S)return 63;throw"c:"+S};return w},se=function(b,y,_){for(var v=function(h,e){var r=h,n=e,a=new Array(h*e),l={setPixel:function(i,s,o){a[s*r+i]=o},write:function(i){i.writeString("GIF87a"),i.writeShort(r),i.writeShort(n),i.writeByte(128),i.writeByte(0),i.writeByte(0),i.writeByte(0),i.writeByte(0),i.writeByte(0),i.writeByte(255),i.writeByte(255),i.writeByte(255),i.writeString(","),i.writeShort(0),i.writeShort(0),i.writeShort(r),i.writeShort(n),i.writeByte(0);var s=c(2);i.writeByte(2);for(var o=0;s.length-o>255;)i.writeByte(255),i.writeBytes(s,o,255),o+=255;i.writeByte(s.length-o),i.writeBytes(s,o,s.length-o),i.writeByte(0),i.writeString(";")}},c=function(i){for(var s=1<<i,o=1+(1<<i),u=i+1,f=p(),M=0;M<s;M+=1)f.add(String.fromCharCode(M));f.add(String.fromCharCode(s)),f.add(String.fromCharCode(o));var A,m,T,D=Me(),I=(A=D,m=0,T=0,{write:function(E,B){if(E>>>B)throw"length over";for(;m+B>=8;)A.writeByte(255&(E<<m|T)),B-=8-m,E>>>=8-m,T=0,m=0;T|=E<<m,m+=B},flush:function(){m>0&&A.writeByte(T)}});I.write(s,u);var Q=0,Z=String.fromCharCode(a[Q]);for(Q+=1;Q<a.length;){var U=String.fromCharCode(a[Q]);Q+=1,f.contains(Z+U)?Z+=U:(I.write(f.indexOf(Z),u),f.size()<4095&&(f.size()==1<<u&&(u+=1),f.add(Z+U)),Z=U)}return I.write(f.indexOf(Z),u),I.write(o,u),I.flush(),D.toByteArray()},p=function(){var i={},s=0,o={add:function(u){if(o.contains(u))throw"dup key:"+u;i[u]=s,s+=1},size:function(){return s},indexOf:function(u){return i[u]},contains:function(u){return void 0!==i[u]}};return o};return l}(b,y),g=0;g<y;g+=1)for(var w=0;w<b;w+=1)v.setPixel(w,g,_(w,g));var P=Me();v.write(P);for(var S=function(){var h=0,e=0,r=0,n="",a={},l=function(p){n+=String.fromCharCode(c(63&p))},c=function(p){if(!(p<0)){if(p<26)return 65+p;if(p<52)return p-26+97;if(p<62)return p-52+48;if(62==p)return 43;if(63==p)return 47}throw"n:"+p};return a.writeByte=function(p){for(h=h<<8|255&p,e+=8,r+=1;e>=6;)l(h>>>e-6),e-=6},a.flush=function(){if(e>0&&(l(h<<6-e),h=0,e=0),r%3!=0)for(var p=3-r%3,i=0;i<p;i+=1)n+="="},a.toString=function(){return n},a}(),O=P.toByteArray(),X=0;X<O.length;X+=1)S.writeByte(O[X]);return S.flush(),"data:image/gif;base64,"+S};return W}();G.stringToBytesFuncs["UTF-8"]=function(W){return function(ae){for(var ne=[],ee=0;ee<ae.length;ee++){var N=ae.charCodeAt(ee);N<128?ne.push(N):N<2048?ne.push(192|N>>6,128|63&N):N<55296||N>=57344?ne.push(224|N>>12,128|N>>6&63,128|63&N):(ee++,N=65536+((1023&N)<<10|1023&ae.charCodeAt(ee)),ne.push(240|N>>18,128|N>>12&63,128|N>>6&63,128|63&N))}return ne}(W)},void 0===(ie="function"==typeof(te=function(){return G})?te.apply(J,[]):te)||($.exports=ie)},676:($,J,te)=>{"use strict";te.d(J,{default:()=>X});var ie=function(){return(ie=Object.assign||function(h){for(var e,r=1,n=arguments.length;r<n;r++)for(var a in e=arguments[r])Object.prototype.hasOwnProperty.call(e,a)&&(h[a]=e[a]);return h}).apply(this,arguments)},W=function(h){return!!h&&"object"==typeof h&&!Array.isArray(h)};function ae(h){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(!e.length)return h;var n=e.shift();return void 0!==n&&W(h)&&W(n)?(h=ie({},h),Object.keys(n).forEach(function(a){var l=h[a],c=n[a];h[a]=Array.isArray(l)&&Array.isArray(c)?c:W(l)&&W(c)?ae(Object.assign({},l),c):c}),ae.apply(void 0,function(){for(var h=0,e=0,r=arguments.length;e<r;e++)h+=arguments[e].length;var n=Array(h),a=0;for(e=0;e<r;e++)for(var l=arguments[e],c=0,p=l.length;c<p;c++,a++)n[a]=l[c];return n}([h],e))):h}function ne(h,e){var r=document.createElement("a");r.download=e,r.href=h,document.body.appendChild(r),r.click(),document.body.removeChild(r)}function ee(h){return e=this,void 0,a=function(){return function(l,c){var p,i,s,o,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:f(0),throw:f(1),return:f(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function f(M){return function(A){return function(m){if(p)throw new TypeError("Generator is already executing.");for(;u;)try{if(p=1,i&&(s=2&m[0]?i.return:m[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,m[1])).done)return s;switch(i=0,s&&(m=[2&m[0],s.value]),m[0]){case 0:case 1:s=m;break;case 4:return u.label++,{value:m[1],done:!1};case 5:u.label++,i=m[1],m=[0];continue;case 7:m=u.ops.pop(),u.trys.pop();continue;default:if(!((s=(s=u.trys).length>0&&s[s.length-1])||6!==m[0]&&2!==m[0])){u=0;continue}if(3===m[0]&&(!s||m[1]>s[0]&&m[1]<s[3])){u.label=m[1];break}if(6===m[0]&&u.label<s[1]){u.label=s[1],s=m;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(m);break}s[2]&&u.ops.pop(),u.trys.pop();continue}m=c.call(l,u)}catch(T){m=[6,T],i=0}finally{p=s=0}if(5&m[0])throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}([M,A])}}}(this,function(l){return[2,new Promise(function(c){var p=new XMLHttpRequest;p.onload=function(){var i=new FileReader;i.onloadend=function(){c(i.result)},i.readAsDataURL(p.response)},p.open("GET",h),p.responseType="blob",p.send()})]})},new((n=void 0)||(n=Promise))(function(l,c){function p(o){try{s(a.next(o))}catch(u){c(u)}}function i(o){try{s(a.throw(o))}catch(u){c(u)}}function s(o){var u;o.done?l(o.value):(u=o.value,u instanceof n?u:new n(function(f){f(u)})).then(p,i)}s((a=a.apply(e,[])).next())});var e,n,a}const N={L:.07,M:.15,Q:.25,H:.3};var L=function(){return(L=Object.assign||function(h){for(var e,r=1,n=arguments.length;r<n;r++)for(var a in e=arguments[r])Object.prototype.hasOwnProperty.call(e,a)&&(h[a]=e[a]);return h}).apply(this,arguments)};const F=function(){function h(e){var n=e.type;this._svg=e.svg,this._type=n}return h.prototype.draw=function(e,r,n,a){var l;switch(this._type){case"dots":l=this._drawDot;break;case"classy":l=this._drawClassy;break;case"classy-rounded":l=this._drawClassyRounded;break;case"rounded":l=this._drawRounded;break;case"extra-rounded":l=this._drawExtraRounded;break;default:l=this._drawSquare}l.call(this,{x:e,y:r,size:n,getNeighbor:a})},h.prototype._rotateFigure=function(e){var r,l=e.size,c=e.rotation,p=void 0===c?0:c,i=e.x+l/2,s=e.y+l/2;(0,e.draw)(),null===(r=this._element)||void 0===r||r.setAttribute("transform","rotate("+180*p/Math.PI+","+i+","+s+")")},h.prototype._basicDot=function(e){var r=this,n=e.size,a=e.x,l=e.y;this._rotateFigure(L(L({},e),{draw:function(){r._element=document.createElementNS("http://www.w3.org/2000/svg","circle"),r._element.setAttribute("cx",String(a+n/2)),r._element.setAttribute("cy",String(l+n/2)),r._element.setAttribute("r",String(n/2))}}))},h.prototype._basicSquare=function(e){var r=this,n=e.size,a=e.x,l=e.y;this._rotateFigure(L(L({},e),{draw:function(){r._element=document.createElementNS("http://www.w3.org/2000/svg","rect"),r._element.setAttribute("x",String(a)),r._element.setAttribute("y",String(l)),r._element.setAttribute("width",String(n)),r._element.setAttribute("height",String(n))}}))},h.prototype._basicSideRounded=function(e){var r=this,n=e.size,a=e.x,l=e.y;this._rotateFigure(L(L({},e),{draw:function(){r._element=document.createElementNS("http://www.w3.org/2000/svg","path"),r._element.setAttribute("d","M "+a+" "+l+"v "+n+"h "+n/2+"a "+n/2+" "+n/2+", 0, 0, 0, 0 "+-n)}}))},h.prototype._basicCornerRounded=function(e){var r=this,n=e.size,a=e.x,l=e.y;this._rotateFigure(L(L({},e),{draw:function(){r._element=document.createElementNS("http://www.w3.org/2000/svg","path"),r._element.setAttribute("d","M "+a+" "+l+"v "+n+"h "+n+"v "+-n/2+"a "+n/2+" "+n/2+", 0, 0, 0, "+-n/2+" "+-n/2)}}))},h.prototype._basicCornerExtraRounded=function(e){var r=this,n=e.size,a=e.x,l=e.y;this._rotateFigure(L(L({},e),{draw:function(){r._element=document.createElementNS("http://www.w3.org/2000/svg","path"),r._element.setAttribute("d","M "+a+" "+l+"v "+n+"h "+n+"a "+n+" "+n+", 0, 0, 0, "+-n+" "+-n)}}))},h.prototype._basicCornersRounded=function(e){var r=this,n=e.size,a=e.x,l=e.y;this._rotateFigure(L(L({},e),{draw:function(){r._element=document.createElementNS("http://www.w3.org/2000/svg","path"),r._element.setAttribute("d","M "+a+" "+l+"v "+n/2+"a "+n/2+" "+n/2+", 0, 0, 0, "+n/2+" "+n/2+"h "+n/2+"v "+-n/2+"a "+n/2+" "+n/2+", 0, 0, 0, "+-n/2+" "+-n/2)}}))},h.prototype._drawDot=function(e){this._basicDot({x:e.x,y:e.y,size:e.size,rotation:0})},h.prototype._drawSquare=function(e){this._basicSquare({x:e.x,y:e.y,size:e.size,rotation:0})},h.prototype._drawRounded=function(e){var r=e.x,n=e.y,a=e.size,l=e.getNeighbor,c=l?+l(-1,0):0,p=l?+l(1,0):0,i=l?+l(0,-1):0,s=l?+l(0,1):0,o=c+p+i+s;if(0!==o)if(o>2||c&&p||i&&s)this._basicSquare({x:r,y:n,size:a,rotation:0});else{if(2===o){var u=0;return c&&i?u=Math.PI/2:i&&p?u=Math.PI:p&&s&&(u=-Math.PI/2),void this._basicCornerRounded({x:r,y:n,size:a,rotation:u})}if(1===o)return u=0,i?u=Math.PI/2:p?u=Math.PI:s&&(u=-Math.PI/2),void this._basicSideRounded({x:r,y:n,size:a,rotation:u})}else this._basicDot({x:r,y:n,size:a,rotation:0})},h.prototype._drawExtraRounded=function(e){var r=e.x,n=e.y,a=e.size,l=e.getNeighbor,c=l?+l(-1,0):0,p=l?+l(1,0):0,i=l?+l(0,-1):0,s=l?+l(0,1):0,o=c+p+i+s;if(0!==o)if(o>2||c&&p||i&&s)this._basicSquare({x:r,y:n,size:a,rotation:0});else{if(2===o){var u=0;return c&&i?u=Math.PI/2:i&&p?u=Math.PI:p&&s&&(u=-Math.PI/2),void this._basicCornerExtraRounded({x:r,y:n,size:a,rotation:u})}if(1===o)return u=0,i?u=Math.PI/2:p?u=Math.PI:s&&(u=-Math.PI/2),void this._basicSideRounded({x:r,y:n,size:a,rotation:u})}else this._basicDot({x:r,y:n,size:a,rotation:0})},h.prototype._drawClassy=function(e){var r=e.x,n=e.y,a=e.size,l=e.getNeighbor,c=l?+l(-1,0):0,p=l?+l(1,0):0,i=l?+l(0,-1):0,s=l?+l(0,1):0;c+p+i+s!==0?c||i?p||s?this._basicSquare({x:r,y:n,size:a,rotation:0}):this._basicCornerRounded({x:r,y:n,size:a,rotation:Math.PI/2}):this._basicCornerRounded({x:r,y:n,size:a,rotation:-Math.PI/2}):this._basicCornersRounded({x:r,y:n,size:a,rotation:Math.PI/2})},h.prototype._drawClassyRounded=function(e){var r=e.x,n=e.y,a=e.size,l=e.getNeighbor,c=l?+l(-1,0):0,p=l?+l(1,0):0,i=l?+l(0,-1):0,s=l?+l(0,1):0;c+p+i+s!==0?c||i?p||s?this._basicSquare({x:r,y:n,size:a,rotation:0}):this._basicCornerExtraRounded({x:r,y:n,size:a,rotation:Math.PI/2}):this._basicCornerExtraRounded({x:r,y:n,size:a,rotation:-Math.PI/2}):this._basicCornersRounded({x:r,y:n,size:a,rotation:Math.PI/2})},h}();var H=function(){return(H=Object.assign||function(h){for(var e,r=1,n=arguments.length;r<n;r++)for(var a in e=arguments[r])Object.prototype.hasOwnProperty.call(e,a)&&(h[a]=e[a]);return h}).apply(this,arguments)};const V=function(){function h(e){var n=e.type;this._svg=e.svg,this._type=n}return h.prototype.draw=function(e,r,n,a){var l;switch(this._type){case"square":l=this._drawSquare;break;case"extra-rounded":l=this._drawExtraRounded;break;default:l=this._drawDot}l.call(this,{x:e,y:r,size:n,rotation:a})},h.prototype._rotateFigure=function(e){var r,l=e.size,c=e.rotation,p=void 0===c?0:c,i=e.x+l/2,s=e.y+l/2;(0,e.draw)(),null===(r=this._element)||void 0===r||r.setAttribute("transform","rotate("+180*p/Math.PI+","+i+","+s+")")},h.prototype._basicDot=function(e){var r=this,n=e.size,a=e.x,l=e.y,c=n/7;this._rotateFigure(H(H({},e),{draw:function(){r._element=document.createElementNS("http://www.w3.org/2000/svg","path"),r._element.setAttribute("clip-rule","evenodd"),r._element.setAttribute("d","M "+(a+n/2)+" "+l+"a "+n/2+" "+n/2+" 0 1 0 0.1 0zm 0 "+c+"a "+(n/2-c)+" "+(n/2-c)+" 0 1 1 -0.1 0Z")}}))},h.prototype._basicSquare=function(e){var r=this,n=e.size,a=e.x,l=e.y,c=n/7;this._rotateFigure(H(H({},e),{draw:function(){r._element=document.createElementNS("http://www.w3.org/2000/svg","path"),r._element.setAttribute("clip-rule","evenodd"),r._element.setAttribute("d","M "+a+" "+l+"v "+n+"h "+n+"v "+-n+"zM "+(a+c)+" "+(l+c)+"h "+(n-2*c)+"v "+(n-2*c)+"h "+(2*c-n)+"z")}}))},h.prototype._basicExtraRounded=function(e){var r=this,a=e.x,l=e.y,c=e.size/7;this._rotateFigure(H(H({},e),{draw:function(){r._element=document.createElementNS("http://www.w3.org/2000/svg","path"),r._element.setAttribute("clip-rule","evenodd"),r._element.setAttribute("d","M "+a+" "+(l+2.5*c)+"v "+2*c+"a "+2.5*c+" "+2.5*c+", 0, 0, 0, "+2.5*c+" "+2.5*c+"h "+2*c+"a "+2.5*c+" "+2.5*c+", 0, 0, 0, "+2.5*c+" "+2.5*-c+"v "+-2*c+"a "+2.5*c+" "+2.5*c+", 0, 0, 0, "+2.5*-c+" "+2.5*-c+"h "+-2*c+"a "+2.5*c+" "+2.5*c+", 0, 0, 0, "+2.5*-c+" "+2.5*c+"M "+(a+2.5*c)+" "+(l+c)+"h "+2*c+"a "+1.5*c+" "+1.5*c+", 0, 0, 1, "+1.5*c+" "+1.5*c+"v "+2*c+"a "+1.5*c+" "+1.5*c+", 0, 0, 1, "+1.5*-c+" "+1.5*c+"h "+-2*c+"a "+1.5*c+" "+1.5*c+", 0, 0, 1, "+1.5*-c+" "+1.5*-c+"v "+-2*c+"a "+1.5*c+" "+1.5*c+", 0, 0, 1, "+1.5*c+" "+1.5*-c)}}))},h.prototype._drawDot=function(e){this._basicDot({x:e.x,y:e.y,size:e.size,rotation:e.rotation})},h.prototype._drawSquare=function(e){this._basicSquare({x:e.x,y:e.y,size:e.size,rotation:e.rotation})},h.prototype._drawExtraRounded=function(e){this._basicExtraRounded({x:e.x,y:e.y,size:e.size,rotation:e.rotation})},h}();var t=function(){return(t=Object.assign||function(h){for(var e,r=1,n=arguments.length;r<n;r++)for(var a in e=arguments[r])Object.prototype.hasOwnProperty.call(e,a)&&(h[a]=e[a]);return h}).apply(this,arguments)};const he=function(){function h(e){var n=e.type;this._svg=e.svg,this._type=n}return h.prototype.draw=function(e,r,n,a){("square"===this._type?this._drawSquare:this._drawDot).call(this,{x:e,y:r,size:n,rotation:a})},h.prototype._rotateFigure=function(e){var r,l=e.size,c=e.rotation,p=void 0===c?0:c,i=e.x+l/2,s=e.y+l/2;(0,e.draw)(),null===(r=this._element)||void 0===r||r.setAttribute("transform","rotate("+180*p/Math.PI+","+i+","+s+")")},h.prototype._basicDot=function(e){var r=this,n=e.size,a=e.x,l=e.y;this._rotateFigure(t(t({},e),{draw:function(){r._element=document.createElementNS("http://www.w3.org/2000/svg","circle"),r._element.setAttribute("cx",String(a+n/2)),r._element.setAttribute("cy",String(l+n/2)),r._element.setAttribute("r",String(n/2))}}))},h.prototype._basicSquare=function(e){var r=this,n=e.size,a=e.x,l=e.y;this._rotateFigure(t(t({},e),{draw:function(){r._element=document.createElementNS("http://www.w3.org/2000/svg","rect"),r._element.setAttribute("x",String(a)),r._element.setAttribute("y",String(l)),r._element.setAttribute("width",String(n)),r._element.setAttribute("height",String(n))}}))},h.prototype._drawDot=function(e){this._basicDot({x:e.x,y:e.y,size:e.size,rotation:e.rotation})},h.prototype._drawSquare=function(e){this._basicSquare({x:e.x,y:e.y,size:e.size,rotation:e.rotation})},h}(),pe="circle";var Ce=function(h,e,r,n){return new(r||(r=Promise))(function(a,l){function c(s){try{i(n.next(s))}catch(o){l(o)}}function p(s){try{i(n.throw(s))}catch(o){l(o)}}function i(s){var o;s.done?a(s.value):(o=s.value,o instanceof r?o:new r(function(u){u(o)})).then(c,p)}i((n=n.apply(h,e||[])).next())})},xe=function(h,e){var r,n,a,l,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:p(0),throw:p(1),return:p(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function p(i){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;c;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return c.label++,{value:o[1],done:!1};case 5:c.label++,n=o[1],o=[0];continue;case 7:o=c.ops.pop(),c.trys.pop();continue;default:if(!((a=(a=c.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){c=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){c.label=o[1];break}if(6===o[0]&&c.label<a[1]){c.label=a[1],a=o;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(o);break}a[2]&&c.ops.pop(),c.trys.pop();continue}o=e.call(h,c)}catch(u){o=[6,u],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([i,s])}}},ue=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],de=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]];const Me=function(){function h(e){this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("width",String(e.width)),this._element.setAttribute("height",String(e.height)),this._defs=document.createElementNS("http://www.w3.org/2000/svg","defs"),this._element.appendChild(this._defs),this._options=e}return Object.defineProperty(h.prototype,"width",{get:function(){return this._options.width},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"height",{get:function(){return this._options.height},enumerable:!1,configurable:!0}),h.prototype.getElement=function(){return this._element},h.prototype.drawQR=function(e){return Ce(this,void 0,void 0,function(){var r,n,a,l,c,p,u,f=this;return xe(this,function(M){switch(M.label){case 0:return r=e.getModuleCount(),n=Math.min(this._options.width,this._options.height)-2*this._options.margin,a=this._options.shape===pe?n/Math.sqrt(2):n,l=Math.floor(a/r),c={hideXDots:0,hideYDots:0,width:0,height:0},this._qr=e,this._options.image?[4,this.loadImage()]:[3,2];case 1:if(M.sent(),!this._image)return[2];p=this._options,u=Math.floor(p.imageOptions.imageSize*N[p.qrOptions.errorCorrectionLevel]*r*r),c=function(A){var m=A.originalHeight,T=A.originalWidth,D=A.maxHiddenDots,I=A.maxHiddenAxisDots,Q=A.dotSize,Z={x:0,y:0},U={x:0,y:0};if(m<=0||T<=0||D<=0||Q<=0)return{height:0,width:0,hideYDots:0,hideXDots:0};var E=m/T;return Z.x=Math.floor(Math.sqrt(D/E)),Z.x<=0&&(Z.x=1),I&&I<Z.x&&(Z.x=I),Z.x%2==0&&Z.x--,U.x=Z.x*Q,Z.y=1+2*Math.ceil((Z.x*E-1)/2),U.y=Math.round(U.x*E),(Z.y*Z.x>D||I&&I<Z.y)&&(I&&I<Z.y?(Z.y=I,Z.y%2==0&&Z.x--):Z.y-=2,U.y=Z.y*Q,Z.x=1+2*Math.ceil((Z.y/E-1)/2),U.x=Math.round(U.y/E)),{height:U.y,width:U.x,hideYDots:Z.y,hideXDots:Z.x}}({originalWidth:this._image.width,originalHeight:this._image.height,maxHiddenDots:u,maxHiddenAxisDots:r-14,dotSize:l}),M.label=2;case 2:return this.drawBackground(),this.drawDots(function(A,m){var T,D,I,Q,Z,U;return!(f._options.imageOptions.hideBackgroundDots&&A>=(r-c.hideXDots)/2&&A<(r+c.hideXDots)/2&&m>=(r-c.hideYDots)/2&&m<(r+c.hideYDots)/2||null!==(T=ue[A])&&void 0!==T&&T[m]||null!==(D=ue[A-r+7])&&void 0!==D&&D[m]||null!==(I=ue[A])&&void 0!==I&&I[m-r+7]||null!==(Q=de[A])&&void 0!==Q&&Q[m]||null!==(Z=de[A-r+7])&&void 0!==Z&&Z[m]||null!==(U=de[A])&&void 0!==U&&U[m-r+7])}),this.drawCorners(),this._options.image?[4,this.drawImage({width:c.width,height:c.height,count:r,dotSize:l})]:[3,4];case 3:M.sent(),M.label=4;case 4:return[2]}})})},h.prototype.drawBackground=function(){var e,r,n,l=this._options;if(this._element){var c=null===(e=l.backgroundOptions)||void 0===e?void 0:e.gradient,p=null===(r=l.backgroundOptions)||void 0===r?void 0:r.color;if((c||p)&&this._createColor({options:c,color:p,additionalRotation:0,x:0,y:0,height:l.height,width:l.width,name:"background-color"}),null===(n=l.backgroundOptions)||void 0===n?void 0:n.round){var i=Math.min(l.width,l.height),s=document.createElementNS("http://www.w3.org/2000/svg","rect");this._backgroundClipPath=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._backgroundClipPath.setAttribute("id","clip-path-background-color"),this._defs.appendChild(this._backgroundClipPath),s.setAttribute("x",String((l.width-i)/2)),s.setAttribute("y",String((l.height-i)/2)),s.setAttribute("width",String(i)),s.setAttribute("height",String(i)),s.setAttribute("rx",String(i/2*l.backgroundOptions.round)),this._backgroundClipPath.appendChild(s)}}},h.prototype.drawDots=function(e){var r,n,a=this;if(!this._qr)throw"QR code is not defined";var l=this._options,c=this._qr.getModuleCount();if(c>l.width||c>l.height)throw"The canvas is too small.";var p=Math.min(l.width,l.height)-2*l.margin,i=l.shape===pe?p/Math.sqrt(2):p,s=Math.floor(i/c),o=Math.floor((l.width-c*s)/2),u=Math.floor((l.height-c*s)/2),f=new F({svg:this._element,type:l.dotsOptions.type});this._dotsClipPath=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._dotsClipPath.setAttribute("id","clip-path-dot-color"),this._defs.appendChild(this._dotsClipPath),this._createColor({options:null===(r=l.dotsOptions)||void 0===r?void 0:r.gradient,color:l.dotsOptions.color,additionalRotation:0,x:0,y:0,height:l.height,width:l.width,name:"dot-color"});for(var M=function(Y){for(var R=function(k){return e&&!e(Y,k)?"continue":null!==(n=A._qr)&&void 0!==n&&n.isDark(Y,k)?(f.draw(o+Y*s,u+k*s,s,function(d,C){return!(Y+d<0||k+C<0||Y+d>=c||k+C>=c)&&!(e&&!e(Y+d,k+C))&&!!a._qr&&a._qr.isDark(Y+d,k+C)}),void(f._element&&A._dotsClipPath&&A._dotsClipPath.appendChild(f._element))):"continue"},x=0;x<c;x++)R(x)},A=this,m=0;m<c;m++)M(m);if(l.shape===pe){var T=Math.floor((p/s-c)/2),D=c+2*T,I=o-T*s,Q=u-T*s,Z=[],U=Math.floor(D/2);for(m=0;m<D;m++){Z[m]=[];for(var E=0;E<D;E++)Z[m][E]=m>=T-1&&m<=D-T&&E>=T-1&&E<=D-T||Math.sqrt((m-U)*(m-U)+(E-U)*(E-U))>U?0:this._qr.isDark(E-2*T<0?E:E>=c?E-2*T:E-T,m-2*T<0?m:m>=c?m-2*T:m-T)?1:0}var B=function(Y){for(var R=function(k){if(!Z[Y][k])return"continue";f.draw(I+Y*s,Q+k*s,s,function(d,C){var z;return!(null===(z=Z[Y+d])||void 0===z||!z[k+C])}),f._element&&re._dotsClipPath&&re._dotsClipPath.appendChild(f._element)},x=0;x<D;x++)R(x)},re=this;for(m=0;m<D;m++)B(m)}},h.prototype.drawCorners=function(){var e=this;if(!this._qr)throw"QR code is not defined";var n=this._options;if(!this._element)throw"Element code is not defined";var a=this._qr.getModuleCount(),l=Math.min(n.width,n.height)-2*n.margin,c=n.shape===pe?l/Math.sqrt(2):l,p=Math.floor(c/a),i=7*p,s=3*p,o=Math.floor((n.width-a*p)/2),u=Math.floor((n.height-a*p)/2);[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach(function(f){var M,A,m,T,D,I,Q,Z,U,E,B,re,Y=f[0],R=f[1],x=f[2],k=o+Y*p*(a-7),d=u+R*p*(a-7),C=e._dotsClipPath,z=e._dotsClipPath;if((!(null===(M=n.cornersSquareOptions)||void 0===M)&&M.gradient||!(null===(A=n.cornersSquareOptions)||void 0===A)&&A.color)&&((C=document.createElementNS("http://www.w3.org/2000/svg","clipPath")).setAttribute("id","clip-path-corners-square-color-"+Y+"-"+R),e._defs.appendChild(C),e._cornersSquareClipPath=e._cornersDotClipPath=z=C,e._createColor({options:null===(m=n.cornersSquareOptions)||void 0===m?void 0:m.gradient,color:null===(T=n.cornersSquareOptions)||void 0===T?void 0:T.color,additionalRotation:x,x:k,y:d,height:i,width:i,name:"corners-square-color-"+Y+"-"+R})),null===(D=n.cornersSquareOptions)||void 0===D?void 0:D.type){var j=new V({svg:e._element,type:n.cornersSquareOptions.type});j.draw(k,d,i,x),j._element&&C&&C.appendChild(j._element)}else for(var ce=new F({svg:e._element,type:n.dotsOptions.type}),fe=function(ge){for(var Se=function(me){if(null===(I=ue[ge])||void 0===I||!I[me])return"continue";ce.draw(k+ge*p,d+me*p,p,function(Pe,ke){var we;return!(null===(we=ue[ge+Pe])||void 0===we||!we[me+ke])}),ce._element&&C&&C.appendChild(ce._element)},ve=0;ve<ue[ge].length;ve++)Se(ve)},le=0;le<ue.length;le++)fe(le);if((!(null===(Q=n.cornersDotOptions)||void 0===Q)&&Q.gradient||!(null===(Z=n.cornersDotOptions)||void 0===Z)&&Z.color)&&((z=document.createElementNS("http://www.w3.org/2000/svg","clipPath")).setAttribute("id","clip-path-corners-dot-color-"+Y+"-"+R),e._defs.appendChild(z),e._cornersDotClipPath=z,e._createColor({options:null===(U=n.cornersDotOptions)||void 0===U?void 0:U.gradient,color:null===(E=n.cornersDotOptions)||void 0===E?void 0:E.color,additionalRotation:x,x:k+2*p,y:d+2*p,height:s,width:s,name:"corners-dot-color-"+Y+"-"+R})),null===(B=n.cornersDotOptions)||void 0===B?void 0:B.type){var oe=new he({svg:e._element,type:n.cornersDotOptions.type});oe.draw(k+2*p,d+2*p,s,x),oe._element&&z&&z.appendChild(oe._element)}else{ce=new F({svg:e._element,type:n.dotsOptions.type});var be=function(ge){for(var Se=function(me){if(null===(re=de[ge])||void 0===re||!re[me])return"continue";ce.draw(k+ge*p,d+me*p,p,function(Pe,ke){var we;return!(null===(we=de[ge+Pe])||void 0===we||!we[me+ke])}),ce._element&&z&&z.appendChild(ce._element)},ve=0;ve<de[ge].length;ve++)Se(ve)};for(le=0;le<de.length;le++)be(le)}})},h.prototype.loadImage=function(){var e=this;return new Promise(function(r,n){var a=e._options,l=new Image;if(!a.image)return n("Image is not defined");"string"==typeof a.imageOptions.crossOrigin&&(l.crossOrigin=a.imageOptions.crossOrigin),e._image=l,l.onload=function(){r()},l.src=a.image})},h.prototype.drawImage=function(e){var r=e.width,n=e.height,a=e.count,l=e.dotSize;return Ce(this,void 0,void 0,function(){var c,p,i,s,o,u,f,M,A;return xe(this,function(m){switch(m.label){case 0:return c=this._options,p=Math.floor((c.width-a*l)/2),i=Math.floor((c.height-a*l)/2),s=p+c.imageOptions.margin+(a*l-r)/2,o=i+c.imageOptions.margin+(a*l-n)/2,u=r-2*c.imageOptions.margin,f=n-2*c.imageOptions.margin,(M=document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("x",String(s)),M.setAttribute("y",String(o)),M.setAttribute("width",u+"px"),M.setAttribute("height",f+"px"),[4,ee(c.image||"")];case 1:return A=m.sent(),M.setAttribute("href",A||""),this._element.appendChild(M),[2]}})})},h.prototype._createColor=function(e){var r=e.options,n=e.color,a=e.additionalRotation,l=e.x,c=e.y,p=e.height,i=e.width,s=e.name,o=i>p?i:p,u=document.createElementNS("http://www.w3.org/2000/svg","rect");if(u.setAttribute("x",String(l)),u.setAttribute("y",String(c)),u.setAttribute("height",String(p)),u.setAttribute("width",String(i)),u.setAttribute("clip-path","url('#clip-path-"+s+"')"),r){var f;if("radial"===r.type)(f=document.createElementNS("http://www.w3.org/2000/svg","radialGradient")).setAttribute("id",s),f.setAttribute("gradientUnits","userSpaceOnUse"),f.setAttribute("fx",String(l+i/2)),f.setAttribute("fy",String(c+p/2)),f.setAttribute("cx",String(l+i/2)),f.setAttribute("cy",String(c+p/2)),f.setAttribute("r",String(o/2));else{var M=((r.rotation||0)+a)%(2*Math.PI),A=(M+2*Math.PI)%(2*Math.PI),m=l+i/2,T=c+p/2,D=l+i/2,I=c+p/2;A>=0&&A<=.25*Math.PI||A>1.75*Math.PI&&A<=2*Math.PI?(m-=i/2,T-=p/2*Math.tan(M),D+=i/2,I+=p/2*Math.tan(M)):A>.25*Math.PI&&A<=.75*Math.PI?(T-=p/2,m-=i/2/Math.tan(M),I+=p/2,D+=i/2/Math.tan(M)):A>.75*Math.PI&&A<=1.25*Math.PI?(m+=i/2,T+=p/2*Math.tan(M),D-=i/2,I-=p/2*Math.tan(M)):A>1.25*Math.PI&&A<=1.75*Math.PI&&(T+=p/2,m+=i/2/Math.tan(M),I-=p/2,D-=i/2/Math.tan(M)),(f=document.createElementNS("http://www.w3.org/2000/svg","linearGradient")).setAttribute("id",s),f.setAttribute("gradientUnits","userSpaceOnUse"),f.setAttribute("x1",String(Math.round(m))),f.setAttribute("y1",String(Math.round(T))),f.setAttribute("x2",String(Math.round(D))),f.setAttribute("y2",String(Math.round(I)))}r.colorStops.forEach(function(Q){var Z=Q.offset,U=Q.color,E=document.createElementNS("http://www.w3.org/2000/svg","stop");E.setAttribute("offset",100*Z+"%"),E.setAttribute("stop-color",U),f.appendChild(E)}),u.setAttribute("fill","url('#"+s+"')"),this._defs.appendChild(f)}else n&&u.setAttribute("fill",n);this._element.appendChild(u)},h}(),ye="canvas";for(var se={},b=0;b<=40;b++)se[b]=b;const y={type:ye,shape:"square",width:300,height:300,data:"",margin:0,qrOptions:{typeNumber:se[0],mode:void 0,errorCorrectionLevel:"Q"},imageOptions:{hideBackgroundDots:!0,imageSize:.4,crossOrigin:void 0,margin:0},dotsOptions:{type:"square",color:"#000"},backgroundOptions:{round:0,color:"#fff"}};var _=function(){return(_=Object.assign||function(h){for(var e,r=1,n=arguments.length;r<n;r++)for(var a in e=arguments[r])Object.prototype.hasOwnProperty.call(e,a)&&(h[a]=e[a]);return h}).apply(this,arguments)};function v(h){var e=_({},h);if(!e.colorStops||!e.colorStops.length)throw"Field 'colorStops' is required in gradient";return e.rotation=e.rotation?Number(e.rotation):0,e.colorStops=e.colorStops.map(function(r){return _(_({},r),{offset:Number(r.offset)})}),e}function g(h){var e=_({},h);return e.width=Number(e.width),e.height=Number(e.height),e.margin=Number(e.margin),e.imageOptions=_(_({},e.imageOptions),{hideBackgroundDots:!!e.imageOptions.hideBackgroundDots,imageSize:Number(e.imageOptions.imageSize),margin:Number(e.imageOptions.margin)}),e.margin>Math.min(e.width,e.height)&&(e.margin=Math.min(e.width,e.height)),e.dotsOptions=_({},e.dotsOptions),e.dotsOptions.gradient&&(e.dotsOptions.gradient=v(e.dotsOptions.gradient)),e.cornersSquareOptions&&(e.cornersSquareOptions=_({},e.cornersSquareOptions),e.cornersSquareOptions.gradient&&(e.cornersSquareOptions.gradient=v(e.cornersSquareOptions.gradient))),e.cornersDotOptions&&(e.cornersDotOptions=_({},e.cornersDotOptions),e.cornersDotOptions.gradient&&(e.cornersDotOptions.gradient=v(e.cornersDotOptions.gradient))),e.backgroundOptions&&(e.backgroundOptions=_({},e.backgroundOptions),e.backgroundOptions.gradient&&(e.backgroundOptions.gradient=v(e.backgroundOptions.gradient))),e}var w=te(192),P=te.n(w),S=function(h,e,r,n){return new(r||(r=Promise))(function(a,l){function c(s){try{i(n.next(s))}catch(o){l(o)}}function p(s){try{i(n.throw(s))}catch(o){l(o)}}function i(s){var o;s.done?a(s.value):(o=s.value,o instanceof r?o:new r(function(u){u(o)})).then(c,p)}i((n=n.apply(h,e||[])).next())})},O=function(h,e){var r,n,a,l,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:p(0),throw:p(1),return:p(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function p(i){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;c;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return c.label++,{value:o[1],done:!1};case 5:c.label++,n=o[1],o=[0];continue;case 7:o=c.ops.pop(),c.trys.pop();continue;default:if(!((a=(a=c.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){c=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){c.label=o[1];break}if(6===o[0]&&c.label<a[1]){c.label=a[1],a=o;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(o);break}a[2]&&c.ops.pop(),c.trys.pop();continue}o=e.call(h,c)}catch(u){o=[6,u],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([i,s])}}};const X=function(){function h(e){this._options=e?g(ae(y,e)):y,this.update()}return h._clearContainer=function(e){e&&(e.innerHTML="")},h.prototype._setupSvg=function(){var e=this;if(this._qr){var r=new Me(this._options);this._svg=r.getElement(),this._svgDrawingPromise=r.drawQR(this._qr).then(function(){var n;e._svg&&(null===(n=e._extension)||void 0===n||n.call(e,r.getElement(),e._options))})}},h.prototype._setupCanvas=function(){var e,r=this;this._qr&&(this._canvas=document.createElement("canvas"),this._canvas.width=this._options.width,this._canvas.height=this._options.height,this._setupSvg(),this._canvasDrawingPromise=null===(e=this._svgDrawingPromise)||void 0===e?void 0:e.then(function(){if(r._svg){var n=r._svg,a=(new XMLSerializer).serializeToString(n),l="data:image/svg+xml;base64,"+btoa(a),c=new Image;return new Promise(function(p){c.onload=function(){var i,s;null===(s=null===(i=r._canvas)||void 0===i?void 0:i.getContext("2d"))||void 0===s||s.drawImage(c,0,0),p()},c.src=l})}}))},h.prototype._getElement=function(e){return void 0===e&&(e="png"),S(this,void 0,void 0,function(){return O(this,function(r){switch(r.label){case 0:if(!this._qr)throw"QR code is empty";return"svg"!==e.toLowerCase()?[3,2]:(this._svg&&this._svgDrawingPromise||this._setupSvg(),[4,this._svgDrawingPromise]);case 1:return r.sent(),[2,this._svg];case 2:return this._canvas&&this._canvasDrawingPromise||this._setupCanvas(),[4,this._canvasDrawingPromise];case 3:return r.sent(),[2,this._canvas]}})})},h.prototype.update=function(e){h._clearContainer(this._container),this._options=e?g(ae(this._options,e)):this._options,this._options.data&&(this._qr=P()(this._options.qrOptions.typeNumber,this._options.qrOptions.errorCorrectionLevel),this._qr.addData(this._options.data,this._options.qrOptions.mode||function(r){switch(!0){case/^[0-9]*$/.test(r):return"Numeric";case/^[0-9A-Z $%*+\-./:]*$/.test(r):return"Alphanumeric";default:return"Byte"}}(this._options.data)),this._qr.make(),this._options.type===ye?this._setupCanvas():this._setupSvg(),this.append(this._container))},h.prototype.append=function(e){if(e){if("function"!=typeof e.appendChild)throw"Container should be a single DOM node";this._options.type===ye?this._canvas&&e.appendChild(this._canvas):this._svg&&e.appendChild(this._svg),this._container=e}},h.prototype.applyExtension=function(e){if(!e)throw"Extension function should be defined.";this._extension=e,this.update()},h.prototype.deleteExtension=function(){this._extension=void 0,this.update()},h.prototype.getRawData=function(e){return void 0===e&&(e="png"),S(this,void 0,void 0,function(){var r,n,a;return O(this,function(l){switch(l.label){case 0:if(!this._qr)throw"QR code is empty";return[4,this._getElement(e)];case 1:return(r=l.sent())?"svg"===e.toLowerCase()?(n=new XMLSerializer,a=n.serializeToString(r),[2,new Blob(['<?xml version="1.0" standalone="no"?>\r\n'+a],{type:"image/svg+xml"})]):[2,new Promise(function(c){return r.toBlob(c,"image/"+e,1)})]:[2,null]}})})},h.prototype.download=function(e){return S(this,void 0,void 0,function(){var r,n,a,l,c;return O(this,function(p){switch(p.label){case 0:if(!this._qr)throw"QR code is empty";return r="png",n="qr","string"==typeof e?(r=e,console.warn("Extension is deprecated as argument for 'download' method, please pass object { name: '...', extension: '...' } as argument")):"object"==typeof e&&null!==e&&(e.name&&(n=e.name),e.extension&&(r=e.extension)),[4,this._getElement(r)];case 1:return(a=p.sent())?("svg"===r.toLowerCase()?(l=new XMLSerializer,c='<?xml version="1.0" standalone="no"?>\r\n'+(c=l.serializeToString(a)),ne("data:image/svg+xml;charset=utf-8,"+encodeURIComponent(c),n+".svg")):ne(a.toDataURL("image/"+r),n+"."+r),[2]):[2]}})})},h}()}},q={};function K($){if(q[$])return q[$].exports;var J=q[$]={exports:{}};return _e[$](J,J.exports,K),J.exports}return K.n=$=>{var J=$&&$.__esModule?()=>$.default:()=>$;return K.d(J,{a:J}),J},K.d=($,J)=>{for(var te in J)K.o(J,te)&&!K.o($,te)&&Object.defineProperty($,te,{enumerable:!0,get:J[te]})},K.o=($,J)=>Object.prototype.hasOwnProperty.call($,J),K(676)})().default},4004:(Ae,_e,q)=>{"use strict";q.d(_e,{Z:()=>N});const $={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let J;const te=new Uint8Array(16);function ie(){if(!J&&(J=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!J))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return J(te)}const G=[];for(let L=0;L<256;++L)G.push((L+256).toString(16).slice(1));const N=function ee(L,F,H){if($.randomUUID&&!F&&!L)return $.randomUUID();const V=(L=L||{}).random||(L.rng||ie)();if(V[6]=15&V[6]|64,V[8]=63&V[8]|128,F){H=H||0;for(let t=0;t<16;++t)F[H+t]=V[t];return F}return function W(L,F=0){return(G[L[F+0]]+G[L[F+1]]+G[L[F+2]]+G[L[F+3]]+"-"+G[L[F+4]]+G[L[F+5]]+"-"+G[L[F+6]]+G[L[F+7]]+"-"+G[L[F+8]]+G[L[F+9]]+"-"+G[L[F+10]]+G[L[F+11]]+G[L[F+12]]+G[L[F+13]]+G[L[F+14]]+G[L[F+15]]).toLowerCase()}(V)}}}]);