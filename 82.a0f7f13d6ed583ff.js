"use strict";(self.webpackChunkpages=self.webpackChunkpages||[]).push([[82],{6082:(pt,V,C)=>{C.r(V),C.d(V,{UploadModule:()=>hc});var U=C(9090),E=C(6814),B=C(7157),z=C(1394),A=C(4041),T=C(6223),O=C(3946),N=C(4618),s=C(5879);let F=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[E.ez]}),e})();var Q=C(8109),q=C(3038);let lt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[E.ez,q.G]}),e})(),$r=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[E.ez]}),e})();var Kr=C(4295),Ea=C(7827),qr=C(5778);let ti=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[E.ez,Kr.$,Ea.mZ,qr.g]}),e})();var bt=C(5861),Gt=C(3564),ye=C(4020),ei=C(5571),ai=C(5362);let ni=(()=>{class e{constructor(t){this.graphqlService=t,this.dayCache={}}getAvailableDateRange(){var t=this;return(0,bt.Z)(function*(){return(yield t.graphqlService.query({query:ei.It})).data.uploadHistoryAvailableDateRange})()}getRangeData(t){var a=this;return(0,bt.Z)(function*(){let r=[];const i=t.filter(o=>!a.dayCache.hasOwnProperty(o)||(r.push(a.dayCache[o]),!1));if(i.length>0){const o=yield a.sendDataRequest(i);for(const[l,u]of Object.values(o).entries())a.dayCache[i[l]]={date:new Date(i[l]),periodActiveUsers:u.periodActiveUsers,periodTopTotalFileCount:JSON.parse(u.periodTopTotalFileCount),periodTopTotalSize:JSON.parse(u.periodTopTotalSize),storageUsed:JSON.parse(u.storageUsed),toDateActiveUsers:u.toDateActiveUsers,toDateTopTotalFileCount:JSON.parse(u.toDateTopTotalFileCount),toDateTopTotalSize:JSON.parse(u.toDateTopTotalSize)},r.push(a.dayCache[i[l]])}return r})()}sendDataRequest(t){var a=this;return(0,bt.Z)(function*(){const r=ai.IO(t.map((i,o)=>({operation:{name:"uploadHistory",alias:`uploadHistory${o}`},variables:{[`date${o}`]:{name:"date",type:"String!",value:i}},fields:["storageUsed","periodActiveUsers","periodTopTotalSize","periodTopTotalFileCount","toDateActiveUsers","toDateTopTotalSize","toDateTopTotalFileCount"]})));return(yield a.graphqlService.query({query:r.query,variables:r.variables})).data})()}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(Gt.Jk))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var ri=C(3285),Fa=C(9473),ii=C(7429);function oi(e,n){if(1&e){const t=s.EpF();s.ynx(0),s.TgZ(1,"div",1),s._uU(2,"Statistiche giornaliere"),s.qZA(),s.TgZ(3,"div",2)(4,"div",3,4),s.NdJ("modelChangeEvent",function(r){s.CHM(t);const i=s.MAs(5),o=s.oxw();return s.KtG(i.valid&&o.modelChange(r))}),s.qZA()(),s.BQk()}if(2&e){const t=s.oxw();s.xp6(4),s.Q6J("schema",t.formlySchema)("model",t.formlyModel)("enableModelChangeEvent",!0)}}let si=(()=>{class e{constructor(){this.modelChangeEvent=new s.vpe,this.formlyModel={}}ngOnInit(){this.formlySchema={type:"object",properties:{range:{type:"datepicker-range",title:"Periodo da visualizzare:",widget:{formlyConfig:{props:{minDate:this.availableRange.start,maxDate:this.availableRange.end,startDate:-7,endDate:-1,maxLength:30}}}},useRangeAsGlobal:{type:"boolean",title:"Usa la data di fine periodo per le statistiche globali",default:!1}}}}modelChange(t){this.modelChangeEvent.emit(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-upload-datepicker"]],inputs:{availableRange:"availableRange"},outputs:{modelChangeEvent:"modelChangeEvent"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"fv-small-caps","mb-2"],[1,"flat-container","px-3","pt-3","pb-0"],["app-custom-form","",3,"schema","model","enableModelChangeEvent","modelChangeEvent"],["form",""]],template:function(t,a){1&t&&s.YNc(0,oi,6,3,"ng-container",0),2&t&&s.Q6J("ngIf",a.formlySchema)},dependencies:[E.O5,ii.d],styles:["[_nghost-%COMP%]{display:block;margin:1rem 0}@media (min-width: 960px){[_nghost-%COMP%]{display:block;margin:1.5rem 0}}"]}),e})();var Se=C(1088),be=C(8863),Bt=C(1413);function Ee(e=!1){return{show:!0,itemSize:20,emphasis:{iconStyle:{borderColor:"var(--ei-primary)"}},feature:(0,Bt.Z)((0,Bt.Z)({},{saveAsImage:{title:""}}),e?{dataZoom:{show:!0,yAxisIndex:!1}}:{})}}function Va(e="Caricamento"){return{text:`${e}...`,color:"var(--ei-primary)",textColor:"inherit",zlevel:2,lineWidth:3,fontFamily:"inherit",maskColor:"rgba(255, 255, 255, 0.95)",fontSize:14}}function Tt(e,n){return e.reduce((t,a)=>t+a[n],0)}function ne(e){return Math.round(100*e*100)/100}var Jt=C(3200);function Ga(e,n){return{tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985",formatter:t=>"y"===t.axisDimension?(0,Jt.o)(t.value):t.value}},valueFormatter:t=>(0,Jt.o)(t)},legend:{show:n.length>1,data:n.map(t=>t.name),width:"80%",align:"left",left:0},grid:{left:"3%",right:"4%",bottom:"3%",top:n.length>1?70:60,containLabel:!0},toolbox:Ee(!0),xAxis:{type:"category",boundaryGap:!1,data:e},yAxis:{type:"value",axisLabel:{formatter:t=>(0,Jt.o)(t)}},series:n.map(t=>(0,Bt.Z)((0,Bt.Z)({},{type:"line",emphasis:{focus:"series"},name:t.name,data:t.data}),n.length>1?{}:{areaStyle:{opacity:.3}}))}}var Ba=C(8645);function Ja(e,n,t=!0){return{toolbox:Ee(),grid:{containLabel:!1},tooltip:{trigger:"item",textStyle:{color:"inherit"}},legend:(0,Bt.Z)((0,Bt.Z)({},t?{show:!1}:{orient:"vertical",right:"2%",top:"middle"}),{},{formatter:a=>a.toUpperCase()}),dataset:[{source:e}],series:[{name:"Spazio occupato",type:"pie",radius:["45%","90%"],avoidLabelOverlap:!0,itemStyle:{borderRadius:10,borderColor:"#FFF",borderWidth:5},label:{show:!1,position:"inside",formatter:"{d}%"},emphasis:{label:{show:!0}},startAngle:0,tooltip:{valueFormatter:a=>(0,be.t)(a)},markPoint:{tooltip:{show:!0},label:{show:!0,formatter:a=>a.value,color:"black",fontSize:25,fontWeight:"bold"},data:[{name:"Totale",value:n,symbol:"circle",itemStyle:{color:"transparent"},x:"50%",y:"50%"}]}}]}}var ui=C(2438),ci=C(9773),pi=C(3620);let Ha=(()=>{class e{constructor(t){this.ngZone=t}setResizeChartEvent(t,a){this.ngZone.runOutsideAngular(()=>{(0,ui.R)(window,"resize").pipe((0,ci.R)(a),(0,pi.b)(500)).subscribe(()=>{t&&!t.isDisposed()&&t.resize()})})}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(s.R0b))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Qa=C(8595);function fi(e,n){if(1&e&&(s._UZ(0,"div",4),s.ALo(1,"date")),2&e){const t=s.oxw();s.Q6J("ngClass",t.trend.value<0?"alert-danger":"alert-success")("innerText",(t.trend.value>0?"+"+t.trend.value:t.trend.value)+"%")("appTippy","Rispetto al "+s.xi3(1,3,t.trend.date,"dd/MM/YY"))}}let Wa=(()=>{class e{constructor(){this.value="",this.description="",this.color="default",this.colorClasses={green:"text-success",blue:"text-primary",indigo:"text-indigo",red:"text-danger",default:"text-reset"}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-simple-stat-container"]],inputs:{value:"value",description:"description",color:"color",trend:"trend"},decls:4,vars:4,consts:[[1,"flat-container","p-3","d-flex","flex-column","justify-content-center","align-items-center","h-100","position-relative"],["class","position-absolute alert border-0 px-1 py-0 trend fs-xs cursor-pointer",3,"ngClass","innerText","appTippy",4,"ngIf"],[1,"h2","fw-normal","lh-1","text-center",3,"ngClass","innerText"],[1,"desc","text-muted","fs-xs","text-uppercase","text-center",3,"innerText"],[1,"position-absolute","alert","border-0","px-1","py-0","trend","fs-xs","cursor-pointer",3,"ngClass","innerText","appTippy"]],template:function(t,a){1&t&&(s.TgZ(0,"div",0),s.YNc(1,fi,2,6,"div",1),s._UZ(2,"div",2)(3,"div",3),s.qZA()),2&t&&(s.xp6(1),s.Q6J("ngIf",a.trend),s.xp6(1),s.Q6J("ngClass",a.colorClasses[a.color])("innerText",a.value),s.xp6(1),s.Q6J("innerText",a.description))},dependencies:[E.mk,E.O5,Qa.$,E.uU],styles:["[_nghost-%COMP%]{display:block;height:100%}.desc[_ngcontent-%COMP%]{letter-spacing:.2em}.trend[_ngcontent-%COMP%]{top:.5rem;right:.5rem}"]}),e})();function hi(e,n){if(1&e&&s._UZ(0,"div",4),2&e){const t=s.oxw(2);s.Q6J("innerText",t.statTitle)("ngClass",t.hideTitleOnSmallScreen?"d-none d-sm-block":void 0)}}function di(e,n){if(1&e&&(s.TgZ(0,"div",2),s.YNc(1,hi,1,2,"div",3),s.Hsn(2,1),s.qZA()),2&e){const t=s.oxw();s.xp6(1),s.Q6J("ngIf",t.statTitle)}}const vi=["*",[["","title",""]]],gi=["*","[title]"];let Fe=(()=>{class e{constructor(){this.statTitle="",this.hasTitle=!0,this.hideTitleOnSmallScreen=!1}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-stat-container"]],inputs:{statTitle:"statTitle",hasTitle:"hasTitle",hideTitleOnSmallScreen:"hideTitleOnSmallScreen"},ngContentSelectors:gi,decls:3,vars:1,consts:[[1,"d-flex","flex-column","flat-container","px-3","pb-3","h-100"],["class","d-flex mb-1 px-md-1 justify-content-center align-items-center",4,"ngIf"],[1,"d-flex","mb-1","px-md-1","justify-content-center","align-items-center"],["class","fv-small-caps fs-xl fw-500",3,"innerText","ngClass",4,"ngIf"],[1,"fv-small-caps","fs-xl","fw-500",3,"innerText","ngClass"]],template:function(t,a){1&t&&(s.F$t(vi),s.TgZ(0,"div",0),s.YNc(1,di,3,1,"div",1),s.Hsn(2),s.qZA()),2&t&&(s.xp6(1),s.Q6J("ngIf",a.hasTitle))},dependencies:[E.mk,E.O5],styles:["[_nghost-%COMP%]{display:block;height:100%}.flat-container[_ngcontent-%COMP%]{padding-top:.75rem}"]}),e})();var mi=C(1990),Ve=C(9010);let Ge=(()=>{class e{transform(t){return(0,Jt.o)(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=s.Yjl({name:"localeString",type:e,pure:!0}),e})();function yi(e,n){1&e&&s.GkF(0)}function Si(e,n){1&e&&s.GkF(0)}function bi(e,n){1&e&&s.GkF(0)}function Ti(e,n){1&e&&(s.ynx(0),s.TgZ(1,"th",8),s._uU(2,"Unit\xe0"),s.qZA(),s.TgZ(3,"th",8),s._uU(4,"%"),s.qZA(),s.BQk())}function xi(e,n){1&e&&s.GkF(0)}function Ci(e,n){1&e&&s.GkF(0)}function Ai(e,n){1&e&&s.GkF(0)}function _i(e,n){if(1&e&&(s.TgZ(0,"tr"),s._UZ(1,"td",9)(2,"td",9),s.ALo(3,"formatBytes"),s._UZ(4,"td",9)(5,"td",9),s.ALo(6,"localeString"),s._UZ(7,"td",9)(8,"td",9),s.ALo(9,"formatBytes"),s._UZ(10,"td",9),s.ALo(11,"formatBytes"),s._UZ(12,"td",9),s.qZA()),2&e){const t=n.$implicit;s.xp6(1),s.Q6J("innerText",t.ext),s.xp6(1),s.Q6J("innerText",s.lcZ(3,8,t.size.abs)),s.xp6(2),s.Q6J("innerText",t.size.perc),s.xp6(1),s.Q6J("innerText",s.lcZ(6,10,t.count.abs)),s.xp6(2),s.Q6J("innerText",t.count.perc),s.xp6(1),s.Q6J("innerText",s.lcZ(9,12,t.avgSize.abs)),s.xp6(2),s.Q6J("innerText",s.lcZ(11,14,t.avgSize.max)),s.xp6(2),s.Q6J("innerText",t.avgSize.perc)}}function Di(e,n){1&e&&s.GkF(0)}function Oi(e,n){1&e&&(s.O4$(),s.TgZ(0,"svg",13),s._UZ(1,"path",14)(2,"path",15)(3,"path",16),s.qZA())}function Mi(e,n){1&e&&(s.O4$(),s.TgZ(0,"svg",13),s._UZ(1,"path",14)(2,"path",15)(3,"path",17),s.qZA())}function wi(e,n){if(1&e&&(s.ynx(0),s.YNc(1,Di,1,0,"ng-container",10),s.YNc(2,Oi,4,0,"svg",11),s.YNc(3,Mi,4,0,"ng-template",null,12,s.W1O),s.BQk()),2&e){const t=s.MAs(4),a=s.oxw(2);s.xp6(1),s.Q6J("ngIf",a.tableSortCriteria.asc),s.xp6(1),s.Q6J("ngIf",a.tableSortCriteria.asc)("ngIfElse",t)}}function Pi(e,n){if(1&e&&s.YNc(0,wi,5,3,"ng-container",10),2&e){const t=n.$implicit,a=s.oxw();s.Q6J("ngIf",t===a.tableSortCriteria.type)}}const Ii=function(){return{$implicit:"ext"}},Zi=function(){return{$implicit:"size-abs"}},Li=function(){return{$implicit:"count-abs"}},Ni=function(){return[]},ki=function(){return{$implicit:"avgSize-abs"}},zi=function(){return{$implicit:"avgSize-max"}},Ui=function(){return{$implicit:"avgSize-perc"}};let ja=(()=>{class e{constructor(){this.storageData=[],this.totalSize=1,this.totalFileCount=1,this.tableContent=[],this.tableSortCriteria={type:"",asc:!1}}ngOnChanges(t){t.storageData&&(this.tableSortCriteria={type:"",asc:!1},this.setTableContent(),this.sortTableContent(this.tableContent,"size-abs"))}setTableContent(){this.tableContent=this.storageData.map(t=>{var a;const r=t.count?t.size/t.count:0,i=(null===(a=mi.O8.find(o=>o.ext.includes(t.ext)))||void 0===a?void 0:a.maxSize)||0;return{ext:t.ext,size:{abs:t.size,perc:this.totalSize?ne(t.size/this.totalSize):0},count:{abs:t.count,perc:this.totalFileCount?ne(t.count/this.totalFileCount):0},avgSize:{abs:r,max:i,perc:i&&r?ne(r/i):0}}})}sortTableContent(t,a){if(this.tableSortCriteria.type===a)return this.tableSortCriteria.asc=!this.tableSortCriteria.asc,void t.reverse();this.tableSortCriteria.type=a;const r=a.split("-"),i=r.slice(1);let o=!1,l=t[0][r[0]];for(const u of i)l=l[u];o=!isNaN(Number(l)),this.tableSortCriteria.asc=!o,t.sort((u,c)=>{let p=u[r[0]],d=c[r[0]];for(const h of i)p=p[h],d=d[h];return o?d-p:p.localeCompare(d)})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-upload-stat-file-table"]],inputs:{storageData:"storageData",totalSize:"totalSize",totalFileCount:"totalFileCount"},features:[s.TTD],decls:35,vars:21,consts:[[1,"table","table-striped","table-bordered","text-center","mb-0"],["scope","col","rowspan","2",1,"align-middle","cursor-pointer",3,"click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["scope","col","colspan","2",1,"cursor-pointer",3,"click"],["scope","col","colspan","3",1,"cursor-pointer",3,"click"],[4,"ngFor","ngForOf"],["scope","col",1,"cursor-pointer",3,"click"],["sortIcon",""],["scope","col"],[3,"innerText"],[4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","fill","currentColor","viewBox","0 0 16 16","class","ms-2",4,"ngIf","ngIfElse"],["desc",""],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","fill","currentColor","viewBox","0 0 16 16",1,"ms-2"],["d","M12.438 1.668V7H11.39V2.684h-.051l-1.211.859v-.969l1.262-.906h1.046z"],["fill-rule","evenodd","d","M11.36 14.098c-1.137 0-1.708-.657-1.762-1.278h1.004c.058.223.343.45.773.45.824 0 1.164-.829 1.133-1.856h-.059c-.148.39-.57.742-1.261.742-.91 0-1.72-.613-1.72-1.758 0-1.148.848-1.835 1.973-1.835 1.09 0 2.063.636 2.063 2.687 0 1.867-.723 2.848-2.145 2.848zm.062-2.735c.504 0 .933-.336.933-.972 0-.633-.398-1.008-.94-1.008-.52 0-.927.375-.927 1 0 .64.418.98.934.98z"],["d","M4.5 2.5a.5.5 0 0 0-1 0v9.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L4.5 12.293V2.5z"],["d","M4.5 13.5a.5.5 0 0 1-1 0V3.707L2.354 4.854a.5.5 0 1 1-.708-.708l2-1.999.007-.007a.498.498 0 0 1 .7.006l2 2a.5.5 0 1 1-.707.708L4.5 3.707V13.5z"]],template:function(t,a){if(1&t&&(s.TgZ(0,"table",0)(1,"thead")(2,"tr")(3,"th",1),s.NdJ("click",function(){return a.sortTableContent(a.tableContent,"ext")}),s.TgZ(4,"span"),s._uU(5,"Tipo"),s.qZA(),s.YNc(6,yi,1,0,"ng-container",2),s.qZA(),s.TgZ(7,"th",3),s.NdJ("click",function(){return a.sortTableContent(a.tableContent,"size-abs")}),s.TgZ(8,"span"),s._uU(9,"Spazio"),s.qZA(),s.YNc(10,Si,1,0,"ng-container",2),s.qZA(),s.TgZ(11,"th",3),s.NdJ("click",function(){return a.sortTableContent(a.tableContent,"count-abs")}),s.TgZ(12,"span"),s._uU(13,"Numero"),s.qZA(),s.YNc(14,bi,1,0,"ng-container",2),s.qZA(),s.TgZ(15,"th",4),s.NdJ("click",function(){return a.sortTableContent(a.tableContent,"avgSize-abs")}),s._uU(16,"Peso medio"),s.qZA()(),s.TgZ(17,"tr"),s.YNc(18,Ti,5,0,"ng-container",5),s.TgZ(19,"th",6),s.NdJ("click",function(){return a.sortTableContent(a.tableContent,"avgSize-abs")}),s.TgZ(20,"span"),s._uU(21,"Unit\xe0"),s.qZA(),s.YNc(22,xi,1,0,"ng-container",2),s.qZA(),s.TgZ(23,"th",6),s.NdJ("click",function(){return a.sortTableContent(a.tableContent,"avgSize-max")}),s.TgZ(24,"span"),s._uU(25,"Max"),s.qZA(),s.YNc(26,Ci,1,0,"ng-container",2),s.qZA(),s.TgZ(27,"th",6),s.NdJ("click",function(){return a.sortTableContent(a.tableContent,"avgSize-perc")}),s.TgZ(28,"span"),s._uU(29,"%"),s.qZA(),s.YNc(30,Ai,1,0,"ng-container",2),s.qZA()()(),s.TgZ(31,"tbody"),s.YNc(32,_i,13,16,"tr",5),s.qZA()(),s.YNc(33,Pi,1,1,"ng-template",null,7,s.W1O)),2&t){const r=s.MAs(34);s.xp6(6),s.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",s.DdM(14,Ii)),s.xp6(4),s.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",s.DdM(15,Zi)),s.xp6(4),s.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",s.DdM(16,Li)),s.xp6(4),s.Q6J("ngForOf",s.DdM(17,Ni).constructor(2)),s.xp6(4),s.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",s.DdM(18,ki)),s.xp6(4),s.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",s.DdM(19,zi)),s.xp6(4),s.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",s.DdM(20,Ui)),s.xp6(2),s.Q6J("ngForOf",a.tableContent)}},dependencies:[E.sg,E.O5,E.tP,Ve.b,Ge],styles:["td[_ngcontent-%COMP%]{white-space:nowrap}@media (min-width: 768px){.table[_ngcontent-%COMP%]{table-layout:fixed}}"]}),e})();var Ri=C(8418),Ei=C(7165),Fi=C(7291);const Vi=function(e){return{"border-bottom":e}};function Gi(e,n){if(1&e&&(s.TgZ(0,"li",4)(1,"div",5),s._UZ(2,"img",6),s.ALo(3,"uploadsreplace"),s.qZA(),s.TgZ(4,"div",7)(5,"div",8),s._UZ(6,"a",9)(7,"div",10),s.qZA(),s._UZ(8,"div",11),s.qZA()()),2&e){const t=s.oxw(),a=t.$implicit,r=t.last;s.xp6(2),s.MGl("alt","",a.user.nickname,"'s avatar"),s.Q6J("lazyLoad",s.lcZ(3,9,a.user.avatar||"/assets/default_avatar.png"))("offset",100)("errorImage","/assets/default_avatar.png"),s.xp6(2),s.Q6J("ngClass",s.VKq(11,Vi,!r)),s.xp6(2),s.Q6J("href",a.user.link,s.LSH)("innerHTML",a.user.nickname,s.oJD),s.xp6(1),s.Q6J("innerText","ID: "+a.user.id),s.xp6(1),s.Q6J("innerHTML",a.value,s.oJD)}}function Bi(e,n){if(1&e&&(s.ynx(0),s.YNc(1,Gi,9,13,"li",3),s.BQk()),2&e){const t=n.$implicit;s.xp6(1),s.Q6J("ngIf",t.user)}}function Ji(e,n){if(1&e&&(s.TgZ(0,"ul",1),s.YNc(1,Bi,2,1,"ng-container",2),s.qZA()),2&e){const t=s.oxw();s.xp6(1),s.Q6J("ngForOf",t.tableData)}}let Hi=(()=>{class e{constructor(){this.data=[],this.tableData=[]}ngOnChanges(t){t.data&&(this.tableData=this.data.map(a=>{if(!a.user)return{value:a.value};const r=a.user.uid.substring(2),i=a.user.uid.substring(0,2);return{value:a.value,user:{nickname:a.user.nickname,avatar:a.user.avatar,ffuid:a.user.uid,id:Number(r),link:`${Ei.hD[i]}/?act=Profile&MID=${r}`}}}))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-stat-user-table"]],inputs:{data:"data"},features:[s.TTD],decls:1,vars:1,consts:[["class","list-unstyled mb-0",4,"ngIf"],[1,"list-unstyled","mb-0"],[4,"ngFor","ngForOf"],["class","d-flex align-items-center",4,"ngIf"],[1,"d-flex","align-items-center"],[1,"avatar","rounded-circle","me-3","border","flex-shrink-0"],["src","data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D",1,"rounded-circle","image-cover",3,"lazyLoad","offset","errorImage","alt"],[1,"info","d-flex","flex-grow-1","align-items-center","py-3","min-w-0",3,"ngClass"],[1,"user-info","me-auto","pe-2","d-flex","flex-column","flex-grow-1","align-items-start","min-w-0"],["target","_blank",1,"nickname","d-block","text-truncate","mw-100","fw-bold",3,"href","innerHTML"],[1,"text-muted","fs-xs",3,"innerText"],[1,"value","pe-1",3,"innerHTML"]],template:function(t,a){1&t&&s.YNc(0,Ji,2,1,"ul",0),2&t&&s.Q6J("ngIf",a.tableData.length>0)},dependencies:[E.mk,E.sg,E.O5,Ea.z1,Fi.g],styles:[".avatar[_ngcontent-%COMP%]{width:50px;height:50px}"]}),e})();function Qi(e,n){if(1&e&&(s.TgZ(0,"option",16),s._uU(1),s.qZA()),2&e){const t=n.$implicit,a=s.oxw(3);s.Q6J("value",t)("selected",a.daySelectValue===t),s.xp6(1),s.Oqu(t)}}function Wi(e,n){if(1&e){const t=s.EpF();s.TgZ(0,"select",14),s.NdJ("ngModelChange",function(r){s.CHM(t);const i=s.oxw(2);return s.KtG(i.daySelectValue=r)})("ngModelChange",function(){s.CHM(t);const r=s.oxw(2);return s.KtG(r.setData(r.daySelectValue,r.activeTab))}),s.YNc(1,Qi,2,3,"option",15),s.qZA()}if(2&e){const t=s.oxw(2);s.Q6J("ngModel",t.daySelectValue),s.xp6(1),s.Q6J("ngForOf",t.days)}}function ji(e,n){1&e&&s.GkF(0)}function Yi(e,n){if(1&e&&s.YNc(0,ji,1,0,"ng-container",17),2&e){s.oxw(2);const t=s.MAs(2);s.Q6J("ngTemplateOutlet",t)}}function Xi(e,n){1&e&&s.GkF(0)}function $i(e,n){if(1&e&&s.YNc(0,Xi,1,0,"ng-container",17),2&e){s.oxw(2);const t=s.MAs(2);s.Q6J("ngTemplateOutlet",t)}}function Ki(e,n){if(1&e){const t=s.EpF();s.TgZ(0,"app-stat-container",2),s.ynx(1,3),s.TgZ(2,"div",4),s.YNc(3,Wi,2,2,"select",5),s.TgZ(4,"div",6),s.NdJ("click",function(){s.CHM(t);const r=s.MAs(12);return s.KtG(r.select("file"))}),s.TgZ(5,"div",7),s._uU(6,"insert_drive_file"),s.qZA()(),s.TgZ(7,"div",8),s.NdJ("click",function(){s.CHM(t);const r=s.MAs(12);return s.KtG(r.select("size"))}),s.TgZ(8,"div",7),s._uU(9,"storage"),s.qZA()()(),s.BQk(),s.ynx(10),s.TgZ(11,"ul",9,10),s.NdJ("activeIdChange",function(r){s.CHM(t);const i=s.oxw();return s.KtG(i.activeTab=r)})("hidden",function(r){s.CHM(t);const i=s.oxw();return s.KtG(i.onHidden(r))}),s.TgZ(13,"li",11),s.YNc(14,Yi,1,1,"ng-template",12),s.qZA(),s.TgZ(15,"li",11),s.YNc(16,$i,1,1,"ng-template",12),s.qZA()(),s._UZ(17,"div",13),s.BQk(),s.qZA()}if(2&e){const t=s.MAs(12),a=s.oxw();s.Q6J("statTitle","Top utenti - "+("file"===a.activeTab?"File":"Spazio"))("hideTitleOnSmallScreen",a.days.length>1),s.xp6(3),s.Q6J("ngIf",a.days.length>1),s.xp6(1),s.Q6J("ngClass","file"===a.activeTab?"blue":"outline-blue")("disableOnTouchDevice",!0),s.xp6(3),s.Q6J("ngClass","size"===a.activeTab?"blue":"outline-blue")("disableOnTouchDevice",!0),s.xp6(4),s.Q6J("activeId",a.activeTab)("destroyOnHide",!1),s.xp6(2),s.Q6J("ngbNavItem","file"),s.xp6(2),s.Q6J("ngbNavItem","size"),s.xp6(2),s.Q6J("ngbNavOutlet",t)}}const qi=function(e){return{"pe-2":e}};function to(e,n){if(1&e&&s._UZ(0,"app-stat-user-table",20),2&e){const t=s.oxw(2);s.Q6J("ngClass",s.VKq(2,qi,!t.touchDevice))("data",t.listContent[t.activeDay][t.activeContent])}}function eo(e,n){1&e&&s._UZ(0,"app-loader",21)}function ao(e,n){if(1&e&&(s.YNc(0,to,1,4,"app-stat-user-table",18),s.YNc(1,eo,1,0,"ng-template",null,19,s.W1O)),2&e){const t=s.MAs(2),a=s.oxw();s.Q6J("ngIf",!a.loading)("ngIfElse",t)}}let Ya=(()=>{class e{constructor(t){this.userService=t,this.touchDevice=ye.eX,this.activeTab="file",this.activeDay="",this.activeContent="file",this.daySelectValue="",this.days=[],this.loading=!0,this.listContent={}}ngOnChanges(t){var a=this;return(0,bt.Z)(function*(){var r;t.data&&null!==(r=a.data)&&void 0!==r&&r.length&&(a.days=a.data.map(i=>i.day),a.daySelectValue=a.days[0],yield a.setData(a.days[0],"file"))})()}setData(t,a){var r=this;return(0,bt.Z)(function*(){if(!r.data)return;const i=r.data.find(o=>o.day===t);if(i&&(r.activeDay=t,r.activeTab=a,r.activeContent=a,!r.listContent.hasOwnProperty(t))){r.loading=!0;const o=yield r.userService.getDetailsFromUids([...Object.keys(i.size),...Object.keys(i.file)]);r.listContent[t]={size:Object.entries(i.size).map(l=>({value:(0,be.t)(l[1]),user:o.find(u=>u.uid===l[0])})),file:Object.entries(i.file).map(l=>({value:(0,Jt.o)(l[1]),user:o.find(u=>u.uid===l[0])}))},r.loading=!1}})()}onHidden(t){this.activeContent="file"===t?"size":"file"}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(Ri.K))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-upload-stat-top-users"]],inputs:{data:"data"},features:[s.TTD],decls:3,vars:1,consts:[[3,"statTitle","hideTitleOnSmallScreen",4,"ngIf"],["navContent",""],[3,"statTitle","hideTitleOnSmallScreen"],["title",""],[1,"ms-auto","d-flex"],["class","form-select form-select-sm me-2",3,"ngModel","ngModelChange",4,"ngIf"],["appTippy","Top per numero di file",1,"flat-icon","me-2","cursor-pointer",3,"ngClass","disableOnTouchDevice","click"],[1,"material-icons-outlined"],["appTippy","Top per spazio occupato",1,"flat-icon","cursor-pointer",3,"ngClass","disableOnTouchDevice","click"],["ngbNav","",3,"activeId","destroyOnHide","activeIdChange","hidden"],["topUsersNav","ngbNav"],[3,"ngbNavItem"],["ngbNavContent",""],[1,"mt-2",3,"ngbNavOutlet"],[1,"form-select","form-select-sm","me-2",3,"ngModel","ngModelChange"],[3,"value","selected",4,"ngFor","ngForOf"],[3,"value","selected"],[4,"ngTemplateOutlet"],["class","d-block",3,"ngClass","data",4,"ngIf","ngIfElse"],["loader",""],[1,"d-block",3,"ngClass","data"],["message","Recupero utenti",1,"d-block","mt-3"]],template:function(t,a){1&t&&(s.YNc(0,Ki,18,12,"app-stat-container",0),s.YNc(1,ao,3,2,"ng-template",null,1,s.W1O)),2&t&&s.Q6J("ngIf",a.data)},dependencies:[E.mk,E.sg,E.O5,E.tP,T.YN,T.Kr,T.EJ,T.JJ,T.On,Fa.R,O.uN,O.Pz,O.nv,O.Is,O.Dy,Fe,Hi,Qa.$],styles:["[_nghost-%COMP%]{display:block;height:100%}app-stat-user-table[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto}"]}),e})();const no=function(e){return{"pe-2":e}};let ro=(()=>{class e{constructor(t,a,r,i){this.dateAdapterService=t,this.dateFormatterService=a,this.breakpointObserver=r,this.eChartsService=i,this.chartLoading=!0,this.data=[],this.touchDevice=ye.eX,this.loadingOptions=Va(),this.totalSize=0,this.totalFileCount=0,this.totalUsers=0,this.totalSizeChartOptions=null,this.lineChartOptions=null,this.lineChartTitle="",this.lineChartType="size",this.lineChartDetails="splitted",this.usersChartOptions=null,this.topUsersPerDay=[],this.storageUsedInPeriod=[],this.xAxisLabels=[],this.storageSeries={total:[{name:"Spazio giornaliero",data:[]}],splitted:[]},this.fileCountSeries={total:[{name:"File giornalieri",data:[]}],splitted:[]},this.avgFileSizeSeries={total:[{name:"Peso medio",data:[]}],splitted:[]},this.usersSeries={name:"Utenti giornalieri",data:[]},this.smallDevice=!0,this.componentDestroyed=new Ba.x,this.smallDevice=this.breakpointObserver.isMatched([Se.u3.XSmall])}ngOnChanges(t){t.data&&t.data.currentValue.length&&(this.setLabelsAndTopUsers(),this.setLineChartsData(),this.setLineChartsOptions(),this.setTotalSizeChartOptions())}setLabelsAndTopUsers(){const t=[];this.xAxisLabels=this.data.slice(1).map(a=>{const r=this.dateFormatterService.formatShort(this.dateAdapterService.fromModel(a.date));return t.unshift({day:r,size:a.periodTopTotalSize,file:a.periodTopTotalFileCount}),r}),this.topUsersPerDay=t}setLineChartsData(){let t={},a={},r={},i={};for(const[u,c]of this.data.slice(1).entries()){this.usersSeries.data.push(c.periodActiveUsers),this.totalUsers+=c.periodActiveUsers,this.storageSeries.total[0].data.push(0),this.fileCountSeries.total[0].data.push(0),this.avgFileSizeSeries.total[0].data.push(0);for(const[p,d]of Object.entries(c.storageUsed)){var o,l;i.hasOwnProperty(p)||(i[p]={ext:p,count:0,size:0}),t.hasOwnProperty(p)||(t[p]={name:p,data:[],total:0});const h=d.size-((null===(o=this.data[u].storageUsed[p])||void 0===o?void 0:o.size)||0);t[p].data.push(Math.round(h/1048576)),t[p].total+=h,i[p].size+=h,this.storageSeries.total[0].data[u]+=Math.round(h/1048576),a.hasOwnProperty(p)||(a[p]={name:p,data:[],total:0});const f=d.count-((null===(l=this.data[u].storageUsed[p])||void 0===l?void 0:l.count)||0);a[p].data.push(f),a[p].total+=f,i[p].count+=f,this.fileCountSeries.total[0].data[u]+=f,r.hasOwnProperty(p)||(r[p]={name:p,data:[],total:0});const v=f?Math.round(100*h/f/1048576)/100:0;r[p].data.push(v),r[p].total+=v}this.avgFileSizeSeries.total[0].data[u]=this.storageSeries.total[0].data[u]/this.fileCountSeries.total[0].data[u]}this.storageSeries.splitted=Object.values(t).filter(u=>!u.data.every(c=>0===c)).sort((u,c)=>c.total-u.total),this.fileCountSeries.splitted=Object.values(a).filter(u=>!u.data.every(c=>0===c)).sort((u,c)=>c.total-u.total),this.avgFileSizeSeries.splitted=Object.values(r).filter(u=>!u.data.every(c=>0===c)).sort((u,c)=>c.total-u.total),this.storageUsedInPeriod=Object.values(i)}setLineChartsOptions(){this.lineChartOptions=this.getLineChartOption(),this.usersChartOptions=Ga(this.xAxisLabels,[this.usersSeries])}setTotalSizeChartOptions(){this.totalSize=Tt(this.storageUsedInPeriod,"size"),this.totalFileCount=Tt(this.storageUsedInPeriod,"count");const t=this.storageUsedInPeriod.sort((a,r)=>r.size-a.size).slice(0,4).map(a=>({name:a.ext,value:a.size}));t.push({name:"altre",value:this.totalSize-Tt(t,"value")}),this.totalSizeChartOptions=Ja(t,(0,be.t)(this.totalSize),this.smallDevice)}getLineChartOption(){let t;switch(this.lineChartType){case"size":t=this.storageSeries,this.lineChartTitle="Spazio giornaliero (MB)";break;case"file":t=this.fileCountSeries,this.lineChartTitle="File giornalieri";break;default:t=this.avgFileSizeSeries,this.lineChartTitle="Peso medio (MB)"}return Ga(this.xAxisLabels,t[this.lineChartDetails])}setResizeChartEvent(t){this.eChartsService.setResizeChartEvent(t,this.componentDestroyed)}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(Gt.z3),s.Y36(Gt.KN),s.Y36(Se.Yg),s.Y36(Ha))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-upload-daily-stats"]],inputs:{chartLoading:"chartLoading",data:"data"},features:[s.TTD],decls:46,vars:38,consts:[[1,"d-grid","charts-container","list-unstyled","mb-0"],[1,"col-span-md-100","col-span-xl-100","col-span-exl-40","row-span-exl-3"],["statTitle","Spazio occupato nel periodo"],["echarts","",1,"d-block",3,"options","autoResize","loading","loadingOpts","chartInit"],[1,"col-span-md-100","col-span-xl-70","row-span-xl-3","col-span-exl-40"],["statTitle","Utenti giornalieri"],["title",""],[1,"ms-auto","fs-sm"],[1,"col-span-xl-30","col-span-exl-20"],["description","File caricati","color","green",3,"value"],["description","Spazio occupato","color","blue",3,"value"],["description","Peso medio","color","red",3,"value"],[1,"col-span-md-100","col-span-xl-100","col-span-xxl-60","col-span-exl-70"],[3,"statTitle","hideTitleOnSmallScreen"],[1,"ms-auto","d-flex"],[1,"form-select","form-select-sm","me-2",3,"ngModel","ngModelChange"],["value","size",3,"selected"],["value","file"],["value","avg"],[1,"form-select","form-select-sm",3,"ngModel","ngModelChange"],["value","splitted",3,"selected"],["value","total"],["echarts","",1,"d-block","mt-3",3,"options","autoResize","loading","loadingOpts","chartInit"],[1,"col-span-md-100","col-span-xl-100","col-span-xxl-40","col-span-exl-30"],[3,"data"],[1,"col-span-md-100","col-span-xl-100"],[3,"hasTitle"],[1,"pt-1","overflow-auto","table-container",3,"ngClass"],[3,"storageData","totalSize","totalFileCount"]],template:function(t,a){1&t&&(s.TgZ(0,"ul",0)(1,"li",1)(2,"app-stat-container",2),s.ynx(3),s.TgZ(4,"div",3),s.NdJ("chartInit",function(i){return a.setResizeChartEvent(i)}),s.qZA(),s.BQk(),s.qZA()(),s.TgZ(5,"li",4)(6,"app-stat-container",5),s.ynx(7,6),s.TgZ(8,"div",7),s._uU(9),s.ALo(10,"localeString"),s.qZA(),s.BQk(),s.ynx(11),s.TgZ(12,"div",3),s.NdJ("chartInit",function(i){return a.setResizeChartEvent(i)}),s.qZA(),s.BQk(),s.qZA()(),s.TgZ(13,"li",8),s._UZ(14,"app-simple-stat-container",9),s.ALo(15,"localeString"),s.qZA(),s.TgZ(16,"li",8),s._UZ(17,"app-simple-stat-container",10),s.ALo(18,"formatBytes"),s.qZA(),s.TgZ(19,"li",8),s._UZ(20,"app-simple-stat-container",11),s.ALo(21,"formatBytes"),s.qZA(),s.TgZ(22,"li",12)(23,"app-stat-container",13),s.ynx(24,6),s.TgZ(25,"div",14)(26,"select",15),s.NdJ("ngModelChange",function(i){return a.lineChartType=i})("ngModelChange",function(){return a.lineChartOptions=a.getLineChartOption()}),s.TgZ(27,"option",16),s._uU(28,"Spazio (MB)"),s.qZA(),s.TgZ(29,"option",17),s._uU(30,"File"),s.qZA(),s.TgZ(31,"option",18),s._uU(32,"Peso medio (MB)"),s.qZA()(),s.TgZ(33,"select",19),s.NdJ("ngModelChange",function(i){return a.lineChartDetails=i})("ngModelChange",function(){return a.lineChartOptions=a.getLineChartOption()}),s.TgZ(34,"option",20),s._uU(35,"Singolo"),s.qZA(),s.TgZ(36,"option",21),s._uU(37,"Totale"),s.qZA()()(),s.BQk(),s.ynx(38),s.TgZ(39,"div",22),s.NdJ("chartInit",function(i){return a.setResizeChartEvent(i)}),s.qZA(),s.BQk(),s.qZA()(),s.TgZ(40,"li",23),s._UZ(41,"app-upload-stat-top-users",24),s.qZA(),s.TgZ(42,"li",25)(43,"app-stat-container",26)(44,"div",27),s._UZ(45,"app-upload-stat-file-table",28),s.qZA()()()()),2&t&&(s.xp6(4),s.Q6J("options",a.totalSizeChartOptions)("autoResize",!1)("loading",a.chartLoading)("loadingOpts",a.loadingOptions),s.xp6(5),s.hij("Totale: ",s.lcZ(10,28,a.totalUsers),""),s.xp6(3),s.Q6J("options",a.usersChartOptions)("autoResize",!1)("loading",a.chartLoading)("loadingOpts",a.loadingOptions),s.xp6(2),s.Q6J("value",s.lcZ(15,30,a.totalFileCount)),s.xp6(3),s.Q6J("value",s.lcZ(18,32,a.totalSize)),s.xp6(3),s.Q6J("value",s.lcZ(21,34,a.totalSize/a.totalFileCount)),s.xp6(3),s.Q6J("statTitle",a.lineChartTitle)("hideTitleOnSmallScreen",!0),s.xp6(3),s.Q6J("ngModel",a.lineChartType),s.xp6(1),s.Q6J("selected",!0),s.xp6(6),s.Q6J("ngModel",a.lineChartDetails),s.xp6(1),s.Q6J("selected",!0),s.xp6(5),s.Q6J("options",a.lineChartOptions)("autoResize",!1)("loading",a.chartLoading)("loadingOpts",a.loadingOptions),s.xp6(2),s.Q6J("data",a.topUsersPerDay),s.xp6(2),s.Q6J("hasTitle",!1),s.xp6(1),s.Q6J("ngClass",s.VKq(36,no,!a.touchDevice)),s.xp6(1),s.Q6J("storageData",a.storageUsedInPeriod)("totalSize",a.totalSize)("totalFileCount",a.totalFileCount))},dependencies:[E.mk,T.YN,T.Kr,T.EJ,T.JJ,T.On,N._w,Wa,Fe,ja,Ya,Ve.b,Ge],styles:[".charts-container[_ngcontent-%COMP%]{gap:1rem;grid-template-columns:1fr}.charts-container[_ngcontent-%COMP%]   [echarts][_ngcontent-%COMP%]{height:300px}.charts-container[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{min-width:0}.table-container[_ngcontent-%COMP%]{height:300px}@media (min-width: 768px){.charts-container[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}.col-span-md-100[_ngcontent-%COMP%]{grid-column:span 3}}@media (min-width: 960px){.charts-container[_ngcontent-%COMP%]{gap:1.5rem}}@media (min-width: 1200px){.charts-container[_ngcontent-%COMP%]{grid-template-columns:repeat(10,1fr)}.col-span-xl-100[_ngcontent-%COMP%]{grid-column:span 10}.col-span-xl-30[_ngcontent-%COMP%]{grid-column:span 3}.col-span-xl-70[_ngcontent-%COMP%]{grid-column:span 7}.row-span-xl-3[_ngcontent-%COMP%]{grid-row:span 3}.row-start-xl-2[_ngcontent-%COMP%]{grid-row-start:2}.row-start-xl-3[_ngcontent-%COMP%]{grid-row-start:3}}@media (min-width: 1400px){.col-span-xxl-60[_ngcontent-%COMP%]{grid-column:span 6}.col-span-xxl-40[_ngcontent-%COMP%]{grid-column:span 4}}@media (min-width: 1500px){.col-span-exl-20[_ngcontent-%COMP%]{grid-column:span 2}.col-span-exl-40[_ngcontent-%COMP%]{grid-column:span 4}.col-span-exl-30[_ngcontent-%COMP%]{grid-column:span 3}.col-span-exl-70[_ngcontent-%COMP%]{grid-column:span 7}.row-span-exl-3[_ngcontent-%COMP%]{grid-row:span 3}}"]}),e})();const io=function(e){return{"pe-2":e}};let oo=(()=>{class e{constructor(t,a,r,i){this.eChartsService=t,this.breakpointObserver=a,this.dateAdapterService=r,this.dateFormatterService=i,this.chartLoading=!0,this.touchDevice=ye.eX,this.smallDevice=!0,this.loadingOptions=Va(),this.totalSizeChartOptions=null,this.totalFileCountChartOptions=null,this.totalFileCount=0,this.totalSize=0,this.filesPerUser=0,this.sizePerUser=0,this.storageUsedAsArray={current:[],trend:[]},this.componentDestroyed=new Ba.x,this.smallDevice=this.breakpointObserver.isMatched([Se.u3.XSmall])}ngOnInit(){}ngOnChanges(t){var a=this;return(0,bt.Z)(function*(){t.data&&a.data&&(a.setStorageUsedAsArray(),a.setTotalSizeChart(),a.setTotalFileCountChart(),a.setSummaries(),a.setTopUsers())})()}setStorageUsedAsArray(){this.storageUsedAsArray.current=Object.entries(this.data.storageUsed).map(t=>({ext:t[0],count:t[1].count,size:t[1].size})),this.storageUsedAsArray.trend=Object.entries(this.trendData.storageUsed).map(t=>({ext:t[0],count:t[1].count,size:t[1].size}))}setSummaries(){this.filesPerUser=Math.round(this.totalFileCount/this.data.toDateActiveUsers);const t=Math.round(Tt(this.storageUsedAsArray.trend,"count")/this.trendData.toDateActiveUsers);this.filesPerUserTrend={value:ne((this.filesPerUser-t)/t),date:this.trendData.date},this.sizePerUser=this.totalSize/this.data.toDateActiveUsers;const a=Math.round(Tt(this.storageUsedAsArray.trend,"size")/this.trendData.toDateActiveUsers);this.sizePerUserTrend={value:ne((this.sizePerUser-a)/a),date:this.trendData.date}}setTotalSizeChart(){this.totalSize=Tt(this.storageUsedAsArray.current,"size");const t=this.storageUsedAsArray.current.sort((a,r)=>r.size-a.size).slice(0,4).map(a=>({name:a.ext,value:a.size}));t.push({name:"altre",value:this.totalSize-Tt(t,"value")}),this.totalSizeChartOptions=Ja(t,(0,be.t)(this.totalSize),this.smallDevice)}setTotalFileCountChart(){this.totalFileCount=Tt(this.storageUsedAsArray.current,"count");const t=this.storageUsedAsArray.current.sort((a,r)=>a.count-r.count).slice(-4);t.unshift({ext:"altre",count:this.totalFileCount-Tt(t,"count"),size:0}),this.totalFileCountChartOptions=function li(e,n,t){return{toolbox:Ee(),tooltip:{trigger:"axis",axisPointer:{type:"shadow"},borderWidth:1,borderColor:"var(--ei-border-color)",textStyle:{color:"inherit"},valueFormatter:a=>(0,Jt.o)(a)},legend:{show:!1},grid:{left:"3%",right:"4%",bottom:"3%",top:30,containLabel:!0},xAxis:{type:"value",boundaryGap:[0,.01],axisLabel:{show:!1}},yAxis:{type:"category",data:e,axisTick:{show:!1},axisLabel:{margin:15}},series:[{name:"Numero di file",type:"bar",data:t,itemStyle:{borderRadius:[0,5,5,0]},label:{position:"inside",show:!0,formatter:a=>Math.round(100*a.value/n*100)/100+"%"}}]}}(t.map(a=>a.ext),this.totalFileCount,t.map(a=>a.count))}setTopUsers(){const t=this.dateFormatterService.formatShort(this.dateAdapterService.fromModel(this.data.date));this.topUsersData=[{size:this.data.toDateTopTotalSize,file:this.data.toDateTopTotalFileCount,day:t}]}setResizeChartEvent(t){this.eChartsService.setResizeChartEvent(t,this.componentDestroyed)}ngOnDestroy(){this.componentDestroyed.next(),this.componentDestroyed.complete()}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(Ha),s.Y36(Se.Yg),s.Y36(Gt.z3),s.Y36(Gt.KN))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-upload-total-stats"]],inputs:{chartLoading:"chartLoading",data:"data",trendData:"trendData"},features:[s.TTD],decls:27,vars:28,consts:[[1,"d-grid","charts-container","list-unstyled","mb-0"],[1,"col-span-xl-30","col-span-exl-20"],["description","Utenti totali","color","green",3,"value"],[1,"col-span-xl-30","col-span-exl-20","row-start-xl-2"],["description","File per utente","color","blue",3,"trend","value"],[1,"col-span-xl-30","col-span-exl-20","row-start-xl-3"],["description","Spazio per utente","color","indigo",3,"trend","value"],[1,"col-span-md-100","col-span-xl-70","col-span-exl-40","row-span-xl-3"],["statTitle","Spazio occupato"],["echarts","",1,"d-block",3,"options","autoResize","loading","loadingOpts","chartInit"],[1,"col-span-md-100","col-span-xl-100","col-span-xxl-60","col-span-exl-40","row-span-exl-3"],["statTitle","File caricati"],["title",""],[1,"ms-auto","fs-sm"],[1,"col-span-md-100","col-span-xl-100","col-span-xxl-40","col-span-exl-30"],[3,"data"],[1,"col-span-md-100","col-span-xl-100","col-span-exl-70"],[3,"hasTitle"],[1,"pt-1","overflow-auto","table-container",3,"ngClass"],[3,"storageData","totalSize","totalFileCount"]],template:function(t,a){1&t&&(s.TgZ(0,"ul",0)(1,"li",1),s._UZ(2,"app-simple-stat-container",2),s.ALo(3,"localeString"),s.qZA(),s.TgZ(4,"li",3),s._UZ(5,"app-simple-stat-container",4),s.qZA(),s.TgZ(6,"li",5),s._UZ(7,"app-simple-stat-container",6),s.ALo(8,"formatBytes"),s.qZA(),s.TgZ(9,"li",7)(10,"app-stat-container",8),s.ynx(11),s.TgZ(12,"div",9),s.NdJ("chartInit",function(i){return a.setResizeChartEvent(i)}),s.qZA(),s.BQk(),s.qZA()(),s.TgZ(13,"li",10)(14,"app-stat-container",11),s.ynx(15,12),s.TgZ(16,"div",13),s._uU(17),s.ALo(18,"localeString"),s.qZA(),s.BQk(),s.ynx(19),s.TgZ(20,"div",9),s.NdJ("chartInit",function(i){return a.setResizeChartEvent(i)}),s.qZA(),s.BQk(),s.qZA()(),s.TgZ(21,"li",14),s._UZ(22,"app-upload-stat-top-users",15),s.qZA(),s.TgZ(23,"li",16)(24,"app-stat-container",17)(25,"div",18),s._UZ(26,"app-upload-stat-file-table",19),s.qZA()()()()),2&t&&(s.xp6(2),s.Q6J("value",s.lcZ(3,20,a.data.toDateActiveUsers)),s.xp6(3),s.Q6J("trend",a.filesPerUserTrend)("value",a.filesPerUser),s.xp6(2),s.Q6J("trend",a.sizePerUserTrend)("value",s.lcZ(8,22,a.sizePerUser)),s.xp6(5),s.Q6J("options",a.totalSizeChartOptions)("autoResize",!1)("loading",a.chartLoading)("loadingOpts",a.loadingOptions),s.xp6(5),s.hij("Totale: ",s.lcZ(18,24,a.totalFileCount),""),s.xp6(3),s.Q6J("options",a.totalFileCountChartOptions)("autoResize",!1)("loading",a.chartLoading)("loadingOpts",a.loadingOptions),s.xp6(2),s.Q6J("data",a.topUsersData),s.xp6(2),s.Q6J("hasTitle",!1),s.xp6(1),s.Q6J("ngClass",s.VKq(26,io,!a.touchDevice)),s.xp6(1),s.Q6J("storageData",a.storageUsedAsArray.current)("totalSize",a.totalSize)("totalFileCount",a.totalFileCount))},dependencies:[E.mk,N._w,Wa,Fe,ja,Ya,Ve.b,Ge],styles:[".table-container[_ngcontent-%COMP%]{min-height:100%}",".charts-container[_ngcontent-%COMP%]{gap:1rem;grid-template-columns:1fr}.charts-container[_ngcontent-%COMP%]   [echarts][_ngcontent-%COMP%]{height:300px}.charts-container[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{min-width:0}.table-container[_ngcontent-%COMP%]{height:300px}@media (min-width: 768px){.charts-container[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}.col-span-md-100[_ngcontent-%COMP%]{grid-column:span 3}}@media (min-width: 960px){.charts-container[_ngcontent-%COMP%]{gap:1.5rem}}@media (min-width: 1200px){.charts-container[_ngcontent-%COMP%]{grid-template-columns:repeat(10,1fr)}.col-span-xl-100[_ngcontent-%COMP%]{grid-column:span 10}.col-span-xl-30[_ngcontent-%COMP%]{grid-column:span 3}.col-span-xl-70[_ngcontent-%COMP%]{grid-column:span 7}.row-span-xl-3[_ngcontent-%COMP%]{grid-row:span 3}.row-start-xl-2[_ngcontent-%COMP%]{grid-row-start:2}.row-start-xl-3[_ngcontent-%COMP%]{grid-row-start:3}}@media (min-width: 1400px){.col-span-xxl-60[_ngcontent-%COMP%]{grid-column:span 6}.col-span-xxl-40[_ngcontent-%COMP%]{grid-column:span 4}}@media (min-width: 1500px){.col-span-exl-20[_ngcontent-%COMP%]{grid-column:span 2}.col-span-exl-40[_ngcontent-%COMP%]{grid-column:span 4}.col-span-exl-30[_ngcontent-%COMP%]{grid-column:span 3}.col-span-exl-70[_ngcontent-%COMP%]{grid-column:span 7}.row-span-exl-3[_ngcontent-%COMP%]{grid-row:span 3}}"]}),e})();const so=function(e){return{"touch-device":e}};function lo(e,n){if(1&e){const t=s.EpF();s.ynx(0),s.TgZ(1,"div",3),s._UZ(2,"app-upload-total-stats",4),s.TgZ(3,"app-upload-datepicker",5),s.NdJ("modelChangeEvent",function(r){s.CHM(t);const i=s.oxw();return s.KtG(i.rangeChangeEvent(r))}),s.qZA(),s._UZ(4,"app-upload-daily-stats",6),s.qZA(),s.BQk()}if(2&e){const t=s.oxw();s.xp6(1),s.Q6J("ngClass",s.VKq(7,so,t.touchDevice)),s.xp6(1),s.Q6J("data",t.globalStatsData.current)("trendData",t.globalStatsData.trend)("chartLoading",t.loading),s.xp6(1),s.Q6J("availableRange",t.availableRange),s.xp6(1),s.Q6J("data",t.data)("chartLoading",t.loading)}}function uo(e,n){1&e&&s._UZ(0,"app-loader",7)}let co=(()=>{class e{constructor(t,a,r){this.uploadStatsService=t,this.dateAdapterService=a,this.ngbCalendar=r,this.touchDevice=ye.eX,this.loading=!0}ngOnInit(){var t=this;return(0,bt.Z)(function*(){const a=yield t.uploadStatsService.getAvailableDateRange();t.availableRange={start:t.dateAdapterService.fromModel(new Date(a.start)),end:t.dateAdapterService.fromModel(new Date(a.end))};const r=t.ngbCalendar.getToday(),i=t.dateAdapterService.toModel(t.ngbCalendar.getPrev(r,"d",365)).toISOString(),o=yield t.getData([...t.rangeToStringArray(r,8),i]);t.todayData=o[o.length-1],t.oneYearFromTodayData=o[0],t.globalStatsData={current:t.todayData,trend:t.oneYearFromTodayData,useRange:!1},t.data=o.slice(1),t.loading=!1})()}rangeToStringArray(t,a){return[...Array(a+1)].map((r,i)=>{const o=this.ngbCalendar.getPrev(t,"d",i);return o.before(this.availableRange.start)||o.after(this.availableRange.end)?null:this.dateAdapterService.toModel(o).toISOString()}).filter(r=>null!==r)}getData(t){var a=this;return(0,bt.Z)(function*(){return(yield a.uploadStatsService.getRangeData(t)).sort((i,o)=>i.date.getTime()-o.date.getTime())})()}rangeChangeEvent(t){var a=this;return(0,bt.Z)(function*(){if(!t.range.start||!t.range.end)return;const r=a.dateAdapterService.toModel(t.range.start),i=a.dateAdapterService.toModel(t.range.end),o=r.getTime(),l=i.getTime();if(!a.data||o!==a.data[1].date.getTime()||l!==a.data[a.data.length-1].date.getTime()){a.loading=!0;const u=Math.round((l-o)/864e5);a.data=yield a.getData(a.rangeToStringArray(t.range.end,u+1)),a.loading=!1}if(t.useRangeAsGlobal!==a.globalStatsData.useRange||a.globalStatsData.useRange)if(a.globalStatsData.useRange=t.useRangeAsGlobal,a.globalStatsData.useRange){a.globalStatsData.current=a.data[a.data.length-1];const u=a.ngbCalendar.getPrev(t.range.end,"d",364);a.globalStatsData.trend=(yield a.getData([a.dateAdapterService.toModel(u.after(a.availableRange.start)?u:a.availableRange.start).toISOString()]))[0]}else a.globalStatsData.current=a.todayData,a.globalStatsData.trend=a.oneYearFromTodayData})()}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(ni),s.Y36(Gt.z3),s.Y36(O.vL))},e.\u0275cmp=s.Xpm({type:e,selectors:[["ng-component"]],decls:4,vars:2,consts:[["pageTitle","Statistiche Upload"],[4,"ngIf","ngIfElse"],["loader",""],[1,"overflow-hidden","page-container",3,"ngClass"],[3,"data","trendData","chartLoading"],[3,"availableRange","modelChangeEvent"],[3,"data","chartLoading"],["message","Recupero dei dati",1,"d-block","mt-5"]],template:function(t,a){if(1&t&&(s._UZ(0,"app-breadcrumb",0),s.YNc(1,lo,5,9,"ng-container",1),s.YNc(2,uo,1,0,"ng-template",null,2,s.W1O)),2&t){const r=s.MAs(3);s.xp6(1),s.Q6J("ngIf",a.data)("ngIfElse",r)}},dependencies:[ri.L,E.mk,E.O5,Fa.R,si,ro,oo],styles:[".page-container[_ngcontent-%COMP%]{margin-bottom:-10px;padding-bottom:10px}@media (min-width: 960px){.page-container[_ngcontent-%COMP%]:not(.touch-device){margin:-10px;padding:10px}}"]}),e})();var re=C(7230),po=C(7963),fo=C(591),ho=C(1101),tt=C(2862),ft=C(7436),g=C(4404),Te=2*Math.PI,Xa=Math.PI/180;function $a(e,n){return ft.ME(e.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})}function Ka(e,n){var t=$a(e,n),a=e.get("center"),r=e.get("radius");g.isArray(r)||(r=[0,r]);var p,d,i=(0,tt.GM)(t.width,n.getWidth()),o=(0,tt.GM)(t.height,n.getHeight()),l=Math.min(i,o),u=(0,tt.GM)(r[0],l/2),c=(0,tt.GM)(r[1],l/2),h=e.coordinateSystem;if(h){var f=h.dataToPoint(a);p=f[0]||0,d=f[1]||0}else g.isArray(a)||(a=[a,a]),p=(0,tt.GM)(a[0],i)+t.x,d=(0,tt.GM)(a[1],o)+t.y;return{cx:p,cy:d,r0:u,r:c}}function vo(e,n,t){n.eachSeriesByType(e,function(a){var r=a.getData(),i=r.mapDimension("value"),o=$a(a,t),l=Ka(a,t),u=l.cx,c=l.cy,p=l.r,d=l.r0,h=-a.get("startAngle")*Xa,f=a.get("minAngle")*Xa,v=0;r.each(i,function(P){!isNaN(P)&&v++});var m=r.getSum(i),y=Math.PI/(m||v)*2,S=a.get("clockwise"),b=a.get("roseType"),x=a.get("stillShowZeroSum"),_=r.getDataExtent(i);_[0]=0;var M=Te,D=0,w=h,I=S?1:-1;if(r.setLayout({viewRect:o,r:p}),r.each(i,function(P,R){var L;if(isNaN(P))r.setItemLayout(R,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:S,cx:u,cy:c,r0:d,r:b?NaN:p});else{(L="area"!==b?0===m&&x?y:P*y:Te/v)<f?(L=f,M-=f):D+=P;var k=w+I*L;r.setItemLayout(R,{angle:L,startAngle:w,endAngle:k,clockwise:S,cx:u,cy:c,r0:d,r:b?(0,tt.NU)(P,_,[d,p]):p}),w=k}}),M<Te&&v)if(M<=.001){var Z=Te/v;r.each(i,function(P,R){if(!isNaN(P)){var L=r.getItemLayout(R);L.angle=Z,L.startAngle=h+I*R*Z,L.endAngle=h+I*(R+1)*Z}})}else y=M/D,w=h,r.each(i,function(P,R){if(!isNaN(P)){var L=r.getItemLayout(R),k=L.angle===f?f:P*y;L.startAngle=w,L.endAngle=w+I*k,w+=I*k}})})}var H=C(8299),xt=C(2054),st=C(5271),qa=C(2459),tn=C(117),et=C(6499),xe=C(2752),en=C(7881),Ce=C(8673),mo=C(1508),yo=Math.PI/180;function an(e,n,t,a,r,i,o,l,u,c){if(!(e.length<2)){for(var h=e.length,f=0;f<h;f++)"outer"===e[f].position&&"labelLine"===e[f].labelAlignTo&&(e[f].linePoints[1][0]+=e[f].label.x-c,e[f].label.x=c);(0,mo.GI)(e,u,u+o)&&function d(m){for(var y={list:[],maxY:0},S={list:[],maxY:0},b=0;b<m.length;b++)if("none"===m[b].labelAlignTo){var x=m[b],_=x.label.y>t?S:y,M=Math.abs(x.label.y-t);if(M>=_.maxY){var D=x.label.x-n-x.len2*r,w=a+x.len,I=Math.abs(D)<w?Math.sqrt(M*M/(1-D*D/w/w)):w;_.rB=I,_.maxY=M}_.list.push(x)}p(y),p(S)}(e)}function p(m){for(var y=m.rB,S=y*y,b=0;b<m.list.length;b++){var x=m.list[b],_=Math.abs(x.label.y-t),M=a+x.len,D=M*M,w=Math.sqrt((1-Math.abs(_*_/S))*D),I=n+(w+x.len2)*r;nn(x,x.targetTextWidth-(I-x.label.x)*r,!0),x.label.x=I}}}function nn(e,n,t){if(void 0===t&&(t=!1),null==e.labelStyleWidth){var a=e.label,r=a.style,i=e.rect,o=r.backgroundColor,l=r.padding,u=l?l[1]+l[3]:0,c=r.overflow,p=i.width+(o?0:u);if(n<p||t){var d=i.height;if(c&&c.match("break")){a.setStyle("backgroundColor",null),a.setStyle("width",n-u);var h=a.getBoundingRect();a.setStyle("width",Math.ceil(h.width)),a.setStyle("backgroundColor",o)}else{var f=n-u;a.setStyle("width",n<p?f:t?f>e.unconstrainedWidth?null:f:null)}var m=a.getBoundingRect();i.width=m.width,i.height=m.height+((a.style.margin||0)+2.1),i.y-=(i.height-d)/2}}}function Be(e){return"center"===e.position}var yt=C(4258),Ae=C(2377),To=function(e){function n(t,a,r){var i=e.call(this)||this;i.z2=2;var o=new xt.ZP;return i.setTextContent(o),i.updateData(t,a,r,!0),i}return(0,H.ZT)(n,e),n.prototype.updateData=function(t,a,r,i){var o=this,l=t.hostModel,u=t.getItemModel(a),c=u.getModel("emphasis"),p=t.getItemLayout(a),d=(0,g.extend)((0,Ae.T)(u.getModel("itemStyle"),p,!0),p);if(isNaN(d.startAngle))o.setShape(d);else{if(i){o.setShape(d);var h=l.getShallow("animationType");l.ecModel.ssr?(st.KZ(o,{scaleX:0,scaleY:0},l,{dataIndex:a,isFrom:!0}),o.originX=d.cx,o.originY=d.cy):"scale"===h?(o.shape.r=p.r0,st.KZ(o,{shape:{r:p.r}},l,a)):null!=r?(o.setShape({startAngle:r,endAngle:r}),st.KZ(o,{shape:{startAngle:p.startAngle,endAngle:p.endAngle}},l,a)):(o.shape.endAngle=p.startAngle,st.D(o,{shape:{endAngle:p.endAngle}},l,a))}else(0,st.Zi)(o),st.D(o,{shape:d},l,a);o.useStyle(t.getItemVisual(a,"style")),(0,et.WO)(o,u);var f=(p.startAngle+p.endAngle)/2,v=l.get("selectedOffset"),m=Math.cos(f)*v,y=Math.sin(f)*v,S=u.getShallow("cursor");S&&o.attr("cursor",S),this._updateLabel(l,t,a),o.ensureState("emphasis").shape=(0,g.extend)({r:p.r+(c.get("scale")&&c.get("scaleSize")||0)},(0,Ae.T)(c.getModel("itemStyle"),p)),(0,g.extend)(o.ensureState("select"),{x:m,y,shape:(0,Ae.T)(u.getModel(["select","itemStyle"]),p)}),(0,g.extend)(o.ensureState("blur"),{shape:(0,Ae.T)(u.getModel(["blur","itemStyle"]),p)});var b=o.getTextGuideLine(),x=o.getTextContent();b&&(0,g.extend)(b.ensureState("select"),{x:m,y}),(0,g.extend)(x.ensureState("select"),{x:m,y}),(0,et.k5)(this,c.get("focus"),c.get("blurScope"),c.get("disabled"))}},n.prototype._updateLabel=function(t,a,r){var i=this,o=a.getItemModel(r),l=o.getModel("labelLine"),u=a.getItemVisual(r,"style"),c=u&&u.fill,p=u&&u.opacity;(0,yt.ni)(i,(0,yt.k3)(o),{labelFetcher:a.hostModel,labelDataIndex:r,inheritColor:c,defaultOpacity:p,defaultText:t.getFormattedLabel(r,"normal")||a.getName(r)});var d=i.getTextContent();i.setTextConfig({position:null,rotation:null}),d.attr({z2:10});var h=t.get(["label","position"]);if("outside"!==h&&"outer"!==h)i.removeTextGuideLine();else{var f=this.getTextGuideLine();f||(f=new qa.Z,this.setTextGuideLine(f)),(0,Ce.Iu)(this,(0,Ce.$x)(o),{stroke:c,opacity:(0,g.retrieve3)(l.get(["lineStyle","opacity"]),p,1)})}},n}(tn.C);const Co=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.ignoreLabelLineUpdate=!0,t}return(0,H.ZT)(n,e),n.prototype.render=function(t,a,r,i){var c,o=t.getData(),l=this._data,u=this.group;if(!l&&o.count()>0){for(var p=o.getItemLayout(0),d=1;isNaN(p&&p.startAngle)&&d<o.count();++d)p=o.getItemLayout(d);p&&(c=p.startAngle)}if(this._emptyCircleSector&&u.remove(this._emptyCircleSector),0===o.count()&&t.get("showEmptyCircle")){var h=new tn.C({shape:Ka(t,r)});h.useStyle(t.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=h,u.add(h)}o.diff(l).add(function(f){var v=new To(o,f,c);o.setItemGraphicEl(f,v),u.add(v)}).update(function(f,v){var m=l.getItemGraphicEl(v);m.updateData(o,f,c),m.off("click"),u.add(m),o.setItemGraphicEl(f,m)}).remove(function(f){var v=l.getItemGraphicEl(f);st.XD(v,t,f)}).execute(),function bo(e){var a,r,n=e.getData(),t=[],i=!1,o=(e.get("minShowLabelAngle")||0)*yo,l=n.getLayout("viewRect"),u=n.getLayout("r"),c=l.width,p=l.x,d=l.y,h=l.height;function f(D){D.ignore=!0}n.each(function(D){var w=n.getItemGraphicEl(D),I=w.shape,Z=w.getTextContent(),P=w.getTextGuideLine(),R=n.getItemModel(D),L=R.getModel("label"),k=L.get("position")||R.get(["emphasis","label","position"]),J=L.get("distanceToLabelLine"),X=L.get("alignTo"),j=(0,tt.GM)(L.get("edgeDistance"),c),it=L.get("bleedMargin"),Y=R.getModel("labelLine"),W=Y.get("length");W=(0,tt.GM)(W,c);var ut=Y.get("length2");if(ut=(0,tt.GM)(ut,c),Math.abs(I.endAngle-I.startAngle)<o)return(0,g.each)(Z.states,f),Z.ignore=!0,void(P&&((0,g.each)(P.states,f),P.ignore=!0));if(function v(D){if(!D.ignore)return!0;for(var w in D.states)if(!1===D.states[w].ignore)return!0;return!1}(Z)){var at,ht,nt,Pt,ct=(I.startAngle+I.endAngle)/2,$=Math.cos(ct),K=Math.sin(ct);a=I.cx,r=I.cy;var vt="inside"===k||"inner"===k;if("center"===k)at=I.cx,ht=I.cy,Pt="center";else{var It=(vt?(I.r+I.r0)/2*$:I.r*$)+a,qt=(vt?(I.r+I.r0)/2*K:I.r*K)+r;if(at=It+3*$,ht=qt+3*K,!vt){var Vt=It+$*(W+u-I.r),Ue=qt+K*(W+u-I.r),te=Vt+($<0?-1:1)*ut;at="edge"===X?$<0?p+j:p+c-j:te+($<0?-J:J),ht=Ue,nt=[[It,qt],[Vt,Ue],[te,Ue]]}Pt=vt?"center":"edge"===X?$>0?"right":"left":$>0?"left":"right"}var Zt=Math.PI,gt=0,Dt=L.get("rotate");if((0,g.isNumber)(Dt))gt=Dt*(Zt/180);else if("center"===k)gt=0;else if("radial"===Dt||!0===Dt)gt=$<0?-ct+Zt:-ct;else if("tangential"===Dt&&"outside"!==k&&"outer"!==k){var mt=Math.atan2($,K);mt<0&&(mt=2*Zt+mt),K>0&&(mt=Zt+mt),gt=mt-Zt}if(i=!!gt,Z.x=at,Z.y=ht,Z.rotation=gt,Z.setStyle({verticalAlign:"middle"}),vt){Z.setStyle({align:Pt});var Ra=Z.states.select;Ra&&(Ra.x+=Z.x,Ra.y+=Z.y)}else{var Lt=Z.getBoundingRect().clone();Lt.applyTransform(Z.getComputedTransform());var Xr=(Z.style.margin||0)+2.1;Lt.y-=Xr/2,Lt.height+=Xr,t.push({label:Z,labelLine:P,position:k,len:W,len2:ut,minTurnAngle:Y.get("minTurnAngle"),maxSurfaceAngle:Y.get("maxSurfaceAngle"),surfaceNormal:new en.Z($,K),linePoints:nt,textAlign:Pt,labelDistance:J,labelAlignTo:X,edgeDistance:j,bleedMargin:it,rect:Lt,unconstrainedWidth:Lt.width,labelStyleWidth:Z.style.width})}w.setTextConfig({inside:vt})}}),!i&&e.get("avoidLabelOverlap")&&function So(e,n,t,a,r,i,o,l){for(var u=[],c=[],p=Number.MAX_VALUE,d=-Number.MAX_VALUE,h=0;h<e.length;h++){var f=e[h].label;Be(e[h])||(f.x<n?(p=Math.min(p,f.x),u.push(e[h])):(d=Math.max(d,f.x),c.push(e[h])))}for(h=0;h<e.length;h++)if(!Be(v=e[h])&&v.linePoints){if(null!=v.labelStyleWidth)continue;f=v.label;var y,m=v.linePoints;v.targetTextWidth=y="edge"===v.labelAlignTo?f.x<n?m[2][0]-v.labelDistance-o-v.edgeDistance:o+r-v.edgeDistance-m[2][0]-v.labelDistance:"labelLine"===v.labelAlignTo?f.x<n?p-o-v.bleedMargin:o+r-d-v.bleedMargin:f.x<n?f.x-o-v.bleedMargin:o+r-f.x-v.bleedMargin,nn(v,y)}for(an(c,n,t,a,1,0,i,0,l,d),an(u,n,t,a,-1,0,i,0,l,p),h=0;h<e.length;h++){var v;if(!Be(v=e[h])&&v.linePoints){var b=(f=v.label).style.padding,M=v.rect.width+(f.style.backgroundColor?0:b?b[1]+b[3]:0),D=(m=v.linePoints)[1][0]-m[2][0];"edge"===v.labelAlignTo?m[2][0]=f.x<n?o+v.edgeDistance+M+v.labelDistance:o+r-v.edgeDistance-M-v.labelDistance:(m[2][0]=f.x<n?f.x+v.labelDistance:f.x-v.labelDistance,m[1][0]=m[2][0]+D),m[1][1]=m[2][1]=f.y}}}(t,a,r,u,c,h,p,d);for(var m=0;m<t.length;m++){var y=t[m],S=y.label,b=y.labelLine,x=isNaN(S.x)||isNaN(S.y);if(S){S.setStyle({align:y.textAlign}),x&&((0,g.each)(S.states,f),S.ignore=!0);var _=S.states.select;_&&(_.x+=S.x,_.y+=S.y)}if(b){var M=y.linePoints;x||!M?((0,g.each)(b.states,f),b.ignore=!0):((0,Ce.qK)(M,y.minTurnAngle),(0,Ce._A)(M,y.surfaceNormal,y.maxSurfaceAngle),b.setShape({points:M}),S.__hostTarget.textGuideLineConfig={anchor:new en.Z(M[0][0],M[0][1])})}}}(t),"expansion"!==t.get("animationTypeUpdate")&&(this._data=o)},n.prototype.dispose=function(){},n.prototype.containPoint=function(t,a){var i=a.getData().getItemLayout(0);if(i){var o=t[0]-i.cx,l=t[1]-i.cy,u=Math.sqrt(o*o+l*l);return u<=i.r&&u>=i.r0}},n.type="pie",n}(xe.Z);var Ao=C(2596),rn=C(6735),ot=C(6496),Do=C(9475);const Mo=function(){function e(n,t){this._getDataWithEncodedVisual=n,this._getRawData=t}return e.prototype.getAllNames=function(){var n=this._getRawData();return n.mapArray(n.getName)},e.prototype.containName=function(n){return this._getRawData().indexOfName(n)>=0},e.prototype.indexOfName=function(n){return this._getDataWithEncodedVisual().indexOfName(n)},e.prototype.getItemVisual=function(n,t){return this._getDataWithEncodedVisual().getItemVisual(n,t)},e}();var on=C(9740),wo=ot.Yf();const Io=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return(0,H.ZT)(n,e),n.prototype.init=function(t){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new Mo(g.bind(this.getData,this),g.bind(this.getRawData,this)),this._defaultLabelLine(t)},n.prototype.mergeOption=function(){e.prototype.mergeOption.apply(this,arguments)},n.prototype.getInitialData=function(){return function _o(e,n,t){n=(0,g.isArray)(n)&&{coordDimensions:n}||(0,g.extend)({encodeDefine:e.getEncode()},n);var a=e.getSource(),r=(0,Ao.Z)(a,n).dimensions,i=new rn.Z(r,e);return i.initData(a,t),i}(this,{coordDimensions:["value"],encodeDefaulter:g.curry(Do.Ss,this)})},n.prototype.getDataParams=function(t){var a=this.getData(),r=wo(a),i=r.seats;if(!i){var o=[];a.each(a.mapDimension("value"),function(u){o.push(u)}),i=r.seats=(0,tt.HD)(o,a.hostModel.get("percentPrecision"))}var l=e.prototype.getDataParams.call(this,t);return l.percent=i[t]||0,l.$vars.push("percent"),l},n.prototype._defaultLabelLine=function(t){ot.Cc(t,"labelLine",["show"]);var a=t.labelLine,r=t.emphasis.labelLine;a.show=a.show&&t.label.show,r.show=r.show&&t.emphasis.label.show},n.type="series.pie",n.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},n}(on.Z);var No=C(5982),Ht=C(4869),Ct=C(4271);const zo=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.type,t.hasSymbolVisual=!0,t}return(0,H.ZT)(n,e),n.prototype.getInitialData=function(t){return(0,No.Z)(null,this,{useEncodeDefaulter:!0})},n.prototype.getLegendIcon=function(t){var a=new Ct.Z,r=(0,Ht.th)("line",0,t.itemHeight/2,t.itemWidth,0,t.lineStyle.stroke,!1);a.add(r),r.setStyle(t.lineStyle);var i=this.getData().getVisual("symbol"),o=this.getData().getVisual("symbolRotate"),l="none"===i?"circle":i,u=.8*t.itemHeight,c=(0,Ht.th)(l,(t.itemWidth-u)/2,(t.itemHeight-u)/2,u,u,t.itemStyle.fill);return a.add(c),c.setStyle(t.itemStyle),c.rotation=("inherit"===t.iconRotate?o:t.iconRotate||0)*Math.PI/180,c.setOrigin([t.itemWidth/2,t.itemHeight/2]),l.indexOf("empty")>-1&&(c.style.stroke=c.style.fill,c.style.fill="#fff",c.style.lineWidth=2),a},n.type="series.line",n.dependencies=["grid","polar"],n.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},n}(on.Z);var At=C(4361),ie=C(9133),Je=C(23),He=C(1959);function Ro(e,n){this.parent.drift(e,n)}const Qe=function(e){function n(t,a,r,i){var o=e.call(this)||this;return o.updateData(t,a,r,i),o}return(0,H.ZT)(n,e),n.prototype._createSymbol=function(t,a,r,i,o){this.removeAll();var l=(0,Ht.th)(t,-1,-1,2,2,null,o);l.attr({z2:100,culling:!0,scaleX:i[0]/2,scaleY:i[1]/2}),l.drift=Ro,this._symbolType=t,this.add(l)},n.prototype.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(null,t)},n.prototype.getSymbolType=function(){return this._symbolType},n.prototype.getSymbolPath=function(){return this.childAt(0)},n.prototype.highlight=function(){(0,et.fD)(this.childAt(0))},n.prototype.downplay=function(){(0,et.Mh)(this.childAt(0))},n.prototype.setZ=function(t,a){var r=this.childAt(0);r.zlevel=t,r.z=a},n.prototype.setDraggable=function(t,a){var r=this.childAt(0);r.draggable=t,r.cursor=!a&&t?"move":r.cursor},n.prototype.updateData=function(t,a,r,i){this.silent=!1;var o=t.getItemVisual(a,"symbol")||"circle",l=t.hostModel,u=n.getSymbolSize(t,a),c=o!==this._symbolType,p=i&&i.disableAnimation;if(c){var d=t.getItemVisual(a,"symbolKeepAspect");this._createSymbol(o,t,a,u,d)}else{(h=this.childAt(0)).silent=!1;var f={scaleX:u[0]/2,scaleY:u[1]/2};p?h.attr(f):st.D(h,f,l,a),(0,st.Zi)(h)}if(this._updateCommon(t,a,u,r,i),c){var h=this.childAt(0);p||(f={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:h.style.opacity}},h.scaleX=h.scaleY=0,h.style.opacity=0,st.KZ(h,f,l,a))}p&&this.childAt(0).stopAnimation("leave")},n.prototype._updateCommon=function(t,a,r,i,o){var c,p,d,h,f,v,m,y,S,l=this.childAt(0),u=t.hostModel;if(i&&(c=i.emphasisItemStyle,p=i.blurItemStyle,d=i.selectItemStyle,h=i.focus,f=i.blurScope,m=i.labelStatesModels,y=i.hoverScale,S=i.cursorStyle,v=i.emphasisDisabled),!i||t.hasItemOption){var b=i&&i.itemModel?i.itemModel:t.getItemModel(a),x=b.getModel("emphasis");c=x.getModel("itemStyle").getItemStyle(),d=b.getModel(["select","itemStyle"]).getItemStyle(),p=b.getModel(["blur","itemStyle"]).getItemStyle(),h=x.get("focus"),f=x.get("blurScope"),v=x.get("disabled"),m=(0,yt.k3)(b),y=x.getShallow("scale"),S=b.getShallow("cursor")}var _=t.getItemVisual(a,"symbolRotate");l.attr("rotation",(_||0)*Math.PI/180||0);var M=(0,Ht.Cq)(t.getItemVisual(a,"symbolOffset"),r);M&&(l.x=M[0],l.y=M[1]),S&&l.attr("cursor",S);var D=t.getItemVisual(a,"style"),w=D.fill;if(l instanceof He.ZP){var I=l.style;l.useStyle((0,g.extend)({image:I.image,x:I.x,y:I.y,width:I.width,height:I.height},D))}else l.useStyle(l.__isEmptyBrush?(0,g.extend)({},D):D),l.style.decal=null,l.setColor(w,o&&o.symbolInnerColor),l.style.strokeNoScale=!0;var Z=t.getItemVisual(a,"liftZ"),P=this._z2;null!=Z?null==P&&(this._z2=l.z2,l.z2+=Z):null!=P&&(l.z2=P,this._z2=null);var R=o&&o.useNameLabel;(0,yt.ni)(l,m,{labelFetcher:u,labelDataIndex:a,defaultText:function L(X){return R?t.getName(X):(0,Je.H)(t,X)},inheritColor:w,defaultOpacity:D.opacity}),this._sizeX=r[0]/2,this._sizeY=r[1]/2;var k=l.ensureState("emphasis");k.style=c,l.ensureState("select").style=d,l.ensureState("blur").style=p;var J=null==y||!0===y?Math.max(1.1,3/this._sizeY):isFinite(y)&&y>0?+y:1;k.scaleX=this._sizeX*J,k.scaleY=this._sizeY*J,this.setSymbolScale(1),(0,et.k5)(this,h,f,v)},n.prototype.setSymbolScale=function(t){this.scaleX=this.scaleY=t},n.prototype.fadeOut=function(t,a,r){var i=this.childAt(0),o=(0,ie.A)(this).dataIndex,l=r&&r.animation;if(this.silent=i.silent=!0,r&&r.fadeLabel){var u=i.getTextContent();u&&st.bX(u,{style:{opacity:0}},a,{dataIndex:o,removeOpt:l,cb:function(){i.removeTextContent()}})}else i.removeTextContent();st.bX(i,{style:{opacity:0},scaleX:0,scaleY:0},a,{dataIndex:o,cb:t,removeOpt:l})},n.getSymbolSize=function(t,a){return(0,Ht.zp)(t.getItemVisual(a,"symbolSize"))},n}(Ct.Z);function We(e,n,t,a){return n&&!isNaN(n[0])&&!isNaN(n[1])&&!(a.isIgnore&&a.isIgnore(t))&&!(a.clipShape&&!a.clipShape.contain(n[0],n[1]))&&"none"!==e.getItemVisual(t,"symbol")}function sn(e){return null!=e&&!(0,g.isObject)(e)&&(e={isIgnore:e}),e||{}}function ln(e){var n=e.hostModel,t=n.getModel("emphasis");return{emphasisItemStyle:t.getModel("itemStyle").getItemStyle(),blurItemStyle:n.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:n.getModel(["select","itemStyle"]).getItemStyle(),focus:t.get("focus"),blurScope:t.get("blurScope"),emphasisDisabled:t.get("disabled"),hoverScale:t.get("scale"),labelStatesModels:(0,yt.k3)(n),cursorStyle:n.get("cursor")}}const un=function(){function e(n){this.group=new Ct.Z,this._SymbolCtor=n||Qe}return e.prototype.updateData=function(n,t){this._progressiveEls=null,t=sn(t);var a=this.group,r=n.hostModel,i=this._data,o=this._SymbolCtor,l=t.disableAnimation,u=ln(n),c={disableAnimation:l},p=t.getSymbolPoint||function(d){return n.getItemLayout(d)};i||a.removeAll(),n.diff(i).add(function(d){var h=p(d);if(We(n,h,d,t)){var f=new o(n,d,u,c);f.setPosition(h),n.setItemGraphicEl(d,f),a.add(f)}}).update(function(d,h){var f=i.getItemGraphicEl(h),v=p(d);if(We(n,v,d,t)){var m=n.getItemVisual(d,"symbol")||"circle",y=f&&f.getSymbolType&&f.getSymbolType();if(!f||y&&y!==m)a.remove(f),(f=new o(n,d,u,c)).setPosition(v);else{f.updateData(n,d,u,c);var S={x:v[0],y:v[1]};l?f.attr(S):st.D(f,S,r)}a.add(f),n.setItemGraphicEl(d,f)}else a.remove(f)}).remove(function(d){var h=i.getItemGraphicEl(d);h&&h.fadeOut(function(){a.remove(h)},r)}).execute(),this._getSymbolPoint=p,this._data=n},e.prototype.updateLayout=function(){var n=this,t=this._data;t&&t.eachItemGraphicEl(function(a,r){var i=n._getSymbolPoint(r);a.setPosition(i),a.markRedraw()})},e.prototype.incrementalPrepareUpdate=function(n){this._seriesScope=ln(n),this._data=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(n,t,a){function r(u){u.isGroup||(u.incremental=!0,u.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[],a=sn(a);for(var i=n.start;i<n.end;i++){var o=t.getItemLayout(i);if(We(t,o,i,a)){var l=new this._SymbolCtor(t,i,this._seriesScope);l.traverse(r),l.setPosition(o),this.group.add(l),t.setItemGraphicEl(i,l),this._progressiveEls.push(l)}}},e.prototype.eachRendered=function(n){At.traverseElements(this._progressiveEls||this.group,n)},e.prototype.remove=function(n){var t=this.group,a=this._data;a&&n?a.eachItemGraphicEl(function(r){r.fadeOut(function(){t.remove(r)},a.hostModel)}):t.removeAll()},e}();var oe=C(6018);function cn(e,n,t){var a=e.getBaseAxis(),r=e.getOtherAxis(a),i=function Fo(e,n){var t=0,a=e.scale.getExtent();return"start"===n?t=a[0]:"end"===n?t=a[1]:(0,g.isNumber)(n)&&!isNaN(n)?t=n:a[0]>0?t=a[0]:a[1]<0&&(t=a[1]),t}(r,t),o=a.dim,l=r.dim,u=n.mapDimension(l),c=n.mapDimension(o),p="x"===l||"radius"===l?1:0,d=(0,g.map)(e.dimensions,function(v){return n.mapDimension(v)}),h=!1,f=n.getCalculationInfo("stackResultDimension");return(0,oe.M)(n,d[0])&&(h=!0,d[0]=f),(0,oe.M)(n,d[1])&&(h=!0,d[1]=f),{dataDimsForPoint:d,valueStart:i,valueAxisDim:l,baseAxisDim:o,stacked:!!h,valueDim:u,baseDim:c,baseDataOffset:p,stackedOverDimension:n.getCalculationInfo("stackedOverDimension")}}function pn(e,n,t,a){var r=NaN;e.stacked&&(r=t.get(t.getCalculationInfo("stackedOverDimension"),a)),isNaN(r)&&(r=e.valueStart);var i=e.baseDataOffset,o=[];return o[i]=t.get(e.baseDim,a),o[1-i]=r,n.dataToPoint(o)}var Qt=C(3138),Bo=C(2920),se=C(5302),fn=C(857),_e=C(3645),Ot=Math.min,Mt=Math.max;function Nt(e,n){return isNaN(e)||isNaN(n)}function je(e,n,t,a,r,i,o,l,u){for(var c,p,d,h,f,v,m=t,y=0;y<a;y++){var S=n[2*m],b=n[2*m+1];if(m>=r||m<0)break;if(Nt(S,b)){if(u){m+=i;continue}break}if(m===t)e[i>0?"moveTo":"lineTo"](S,b),d=S,h=b;else{var x=S-c,_=b-p;if(x*x+_*_<.5){m+=i;continue}if(o>0){for(var M=m+i,D=n[2*M],w=n[2*M+1];D===S&&w===b&&y<a;)y++,D=n[2*(M+=i)],w=n[2*M+1],x=(S=n[2*(m+=i)])-c,_=(b=n[2*m+1])-p;var I=y+1;if(u)for(;Nt(D,w)&&I<a;)I++,D=n[2*(M+=i)],w=n[2*M+1];var Z=.5,P=0,R=0,L=void 0,k=void 0;if(I>=a||Nt(D,w))f=S,v=b;else{P=D-c,R=w-p;var J=S-c,X=D-S,j=b-p,it=w-b,Y=void 0,W=void 0;if("x"===l){var ut=P>0?1:-1;f=S-ut*(Y=Math.abs(J))*o,v=b,L=S+ut*(W=Math.abs(X))*o,k=b}else if("y"===l){var ct=R>0?1:-1;f=S,v=b-ct*(Y=Math.abs(j))*o,L=S,k=b+ct*(W=Math.abs(it))*o}else Y=Math.sqrt(J*J+j*j),f=S-P*o*(1-(Z=(W=Math.sqrt(X*X+it*it))/(W+Y))),v=b-R*o*(1-Z),k=b+R*o*Z,L=Ot(L=S+P*o*Z,Mt(D,S)),k=Ot(k,Mt(w,b)),L=Mt(L,Ot(D,S)),v=b-(R=(k=Mt(k,Ot(w,b)))-b)*Y/W,f=Ot(f=S-(P=L-S)*Y/W,Mt(c,S)),v=Ot(v,Mt(p,b)),L=S+(P=S-(f=Mt(f,Ot(c,S))))*W/Y,k=b+(R=b-(v=Mt(v,Ot(p,b))))*W/Y}e.bezierCurveTo(d,h,f,v,S,b),d=L,h=k}else e.lineTo(S,b)}c=S,p=b,m+=i}return y}var hn=function e(){this.smooth=0,this.smoothConstraint=!0},Jo=function(e){function n(t){var a=e.call(this,t)||this;return a.type="ec-polyline",a}return(0,H.ZT)(n,e),n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new hn},n.prototype.buildPath=function(t,a){var r=a.points,i=0,o=r.length/2;if(a.connectNulls){for(;o>0&&Nt(r[2*o-2],r[2*o-1]);o--);for(;i<o&&Nt(r[2*i],r[2*i+1]);i++);}for(;i<o;)i+=je(t,r,i,o,o,1,a.smooth,a.smoothMonotone,a.connectNulls)+1},n.prototype.getPointOn=function(t,a){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var l,u,i=this.path.data,o=fn.Z.CMD,c="x"===a,p=[],d=0;d<i.length;){var f=void 0,v=void 0,m=void 0,y=void 0,S=void 0,b=void 0,x=void 0;switch(i[d++]){case o.M:l=i[d++],u=i[d++];break;case o.L:if(f=i[d++],v=i[d++],(x=c?(t-l)/(f-l):(t-u)/(v-u))<=1&&x>=0){var _=c?(v-u)*x+u:(f-l)*x+l;return c?[t,_]:[_,t]}l=f,u=v;break;case o.C:f=i[d++],v=i[d++],m=i[d++],y=i[d++],S=i[d++],b=i[d++];var M=c?(0,_e.kD)(l,f,m,S,t,p):(0,_e.kD)(u,v,y,b,t,p);if(M>0)for(var D=0;D<M;D++){var w=p[D];if(w<=1&&w>=0)return _=c?(0,_e.af)(u,v,y,b,w):(0,_e.af)(l,f,m,S,w),c?[t,_]:[_,t]}l=S,u=b}}},n}(se.ZP),Ho=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return(0,H.ZT)(n,e),n}(hn),Qo=function(e){function n(t){var a=e.call(this,t)||this;return a.type="ec-polygon",a}return(0,H.ZT)(n,e),n.prototype.getDefaultShape=function(){return new Ho},n.prototype.buildPath=function(t,a){var r=a.points,i=a.stackedOnPoints,o=0,l=r.length/2,u=a.smoothMonotone;if(a.connectNulls){for(;l>0&&Nt(r[2*l-2],r[2*l-1]);l--);for(;o<l&&Nt(r[2*o],r[2*o+1]);o++);}for(;o<l;){var c=je(t,r,o,l,l,1,a.smooth,u,a.connectNulls);je(t,i,o+c-1,c,l,-1,a.stackedOnSmooth,u,a.connectNulls),o+=c+1,t.closePath()}},n}(se.ZP),dn=C(2277),Wo=C(2118),Ye=C(8597),Xe=C(2);function vn(e,n){if(e.length===n.length){for(var t=0;t<e.length;t++)if(e[t]!==n[t])return;return!0}}function gn(e){for(var n=1/0,t=1/0,a=-1/0,r=-1/0,i=0;i<e.length;){var o=e[i++],l=e[i++];isNaN(o)||(n=Math.min(o,n),a=Math.max(o,a)),isNaN(l)||(t=Math.min(l,t),r=Math.max(l,r))}return[[n,t],[a,r]]}function mn(e,n){var t=gn(e),a=t[0],r=t[1],i=gn(n),o=i[0],l=i[1];return Math.max(Math.abs(a[0]-o[0]),Math.abs(a[1]-o[1]),Math.abs(r[0]-l[0]),Math.abs(r[1]-l[1]))}function yn(e){return g.isNumber(e)?e:e?.5:0}function wt(e,n,t,a){var r=n.getBaseAxis(),i="x"===r.dim||"radius"===r.dim?0:1,o=[],l=0,u=[],c=[],p=[],d=[];if(a){for(l=0;l<e.length;l+=2)!isNaN(e[l])&&!isNaN(e[l+1])&&d.push(e[l],e[l+1]);e=d}for(l=0;l<e.length-2;l+=2)switch(p[0]=e[l+2],p[1]=e[l+3],c[0]=e[l],c[1]=e[l+1],o.push(c[0],c[1]),t){case"end":u[i]=p[i],u[1-i]=c[1-i],o.push(u[0],u[1]);break;case"middle":var f=[];u[i]=f[i]=(c[i]+p[i])/2,u[1-i]=c[1-i],f[1-i]=p[1-i],o.push(u[0],u[1]),o.push(f[0],f[1]);break;default:u[i]=c[i],u[1-i]=p[1-i],o.push(u[0],u[1])}return o.push(e[l++],e[l++]),o}function qo(e,n){return isNaN(e)||isNaN(n)}function Sn(e,n){return[e[2*n],e[2*n+1]]}function bn(e){if(e.get(["endLabel","show"]))return!0;for(var n=0;n<et.L1.length;n++)if(e.get([et.L1[n],"endLabel","show"]))return!0;return!1}function $e(e,n,t,a){if((0,Wo.H)(n,"cartesian2d")){var r=a.getModel("endLabel"),i=r.get("valueAnimation"),o=a.getData(),l={lastFrameIndex:0},u=bn(a)?function(f,v){e._endLabelOnDuring(f,v,o,l,i,r,n)}:null,c=n.getBaseAxis().isHorizontal(),p=(0,dn.ID)(n,t,a,function(){var f=e._endLabel;f&&t&&null!=l.originalX&&f.attr({x:l.originalX,y:l.originalY})},u);if(!a.get("clip",!0)){var d=p.shape,h=Math.max(d.width,d.height);c?(d.y-=h,d.height+=2*h):(d.x-=h,d.width+=2*h)}return u&&u(1,p),p}return(0,dn.X0)(n,t,a)}const rs=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return(0,H.ZT)(n,e),n.prototype.init=function(){var t=new Ct.Z,a=new un;this.group.add(a.group),this._symbolDraw=a,this._lineGroup=t},n.prototype.render=function(t,a,r){var i=this,o=t.coordinateSystem,l=this.group,u=t.getData(),c=t.getModel("lineStyle"),p=t.getModel("areaStyle"),d=u.getLayout("points")||[],h="polar"===o.type,f=this._coordSys,v=this._symbolDraw,m=this._polyline,y=this._polygon,S=this._lineGroup,b=!a.ssr&&t.isAnimationEnabled(),x=!p.isEmpty(),_=p.get("origin"),M=cn(o,u,_),D=x&&function jo(e,n,t){if(!t.valueDim)return[];for(var a=n.count(),r=(0,Qt.o)(2*a),i=0;i<a;i++){var o=pn(t,e,n,i);r[2*i]=o[0],r[2*i+1]=o[1]}return r}(o,u,M),w=t.get("showSymbol"),I=t.get("connectNulls"),Z=w&&!h&&function $o(e,n,t){var a=e.get("showAllSymbol"),r="auto"===a;if(!a||r){var i=t.getAxesByScale("ordinal")[0];if(i&&(!r||!function Ko(e,n){var t=e.getExtent(),a=Math.abs(t[1]-t[0])/e.scale.count();isNaN(a)&&(a=0);for(var r=n.count(),i=Math.max(1,Math.round(r/5)),o=0;o<r;o+=i)if(1.5*Qe.getSymbolSize(n,o)[e.isHorizontal()?1:0]>a)return!1;return!0}(i,n))){var o=n.mapDimension(i.dim),l={};return g.each(i.getViewLabels(),function(u){var c=i.scale.getRawOrdinalNumber(u.tickValue);l[c]=1}),function(u){return!l.hasOwnProperty(n.get(o,u))}}}}(t,u,o),P=this._data;P&&P.eachItemGraphicEl(function(nt,Pt){nt.__temp&&(l.remove(nt),P.setItemGraphicEl(Pt,null))}),w||v.remove(),l.add(S);var L,R=!h&&t.get("step");o&&o.getArea&&t.get("clip",!0)&&(null!=(L=o.getArea()).width?(L.x-=.1,L.y-=.1,L.width+=.2,L.height+=.2):L.r0&&(L.r0-=.5,L.r+=.5)),this._clipShapeForSymbol=L;var k=function Xo(e,n,t){var a=e.getVisual("visualMeta");if(a&&a.length&&e.count()&&"cartesian2d"===n.type){for(var r,i,o=a.length-1;o>=0;o--){var l=e.getDimensionInfo(a[o].dimension);if("x"===(r=l&&l.coordDim)||"y"===r){i=a[o];break}}if(i){var u=n.getAxis(r),c=g.map(i.stops,function(x){return{coord:u.toGlobalCoord(u.dataToCoord(x.value)),color:x.color}}),p=c.length,d=i.outerColors.slice();p&&c[0].coord>c[p-1].coord&&(c.reverse(),d.reverse());var h=function Yo(e,n){var r,i,t=[],a=e.length;function o(p,d,h){var f=p.coord;return{coord:h,color:(0,Xe.lerp)((h-f)/(d.coord-f),[p.color,d.color])}}for(var l=0;l<a;l++){var u=e[l],c=u.coord;if(c<0)r=u;else{if(c>n){i?t.push(o(i,u,n)):r&&t.push(o(r,u,0),o(r,u,n));break}r&&(t.push(o(r,u,0)),r=null),t.push(u),i=u}}return t}(c,"x"===r?t.getWidth():t.getHeight()),f=h.length;if(!f&&p)return c[0].coord<0?d[1]?d[1]:c[p-1].color:d[0]?d[0]:c[0].color;var m=h[0].coord-10,y=h[f-1].coord+10,S=y-m;if(S<.001)return"transparent";g.each(h,function(x){x.offset=(x.coord-m)/S}),h.push({offset:f?h[f-1].offset:.5,color:d[1]||"transparent"}),h.unshift({offset:f?h[0].offset:.5,color:d[0]||"transparent"});var b=new Bo.Z(0,0,0,0,h,!0);return b[r]=m,b[r+"2"]=y,b}}}(u,o,r)||u.getVisual("style")[u.getVisual("drawType")];if(m&&f.type===o.type&&R===this._step){x&&!y?y=this._newPolygon(d,D):y&&!x&&(S.remove(y),y=this._polygon=null),h||this._initOrUpdateEndLabel(t,o,(0,Ye.Lz)(k));var J=S.getClipPath();if(J){var X=$e(this,o,!1,t);st.KZ(J,{shape:X.shape},t)}else S.setClipPath($e(this,o,!0,t));w&&v.updateData(u,{isIgnore:Z,clipShape:L,disableAnimation:!0,getSymbolPoint:function(nt){return[d[2*nt],d[2*nt+1]]}}),(!vn(this._stackedOnPoints,D)||!vn(this._points,d))&&(b?this._doUpdateAnimation(u,D,o,r,R,_,I):(R&&(d=wt(d,o,R,I),D&&(D=wt(D,o,R,I))),m.setShape({points:d}),y&&y.setShape({points:d,stackedOnPoints:D})))}else w&&v.updateData(u,{isIgnore:Z,clipShape:L,disableAnimation:!0,getSymbolPoint:function(nt){return[d[2*nt],d[2*nt+1]]}}),b&&this._initSymbolLabelAnimation(u,o,L),R&&(d=wt(d,o,R,I),D&&(D=wt(D,o,R,I))),m=this._newPolyline(d),x?y=this._newPolygon(d,D):y&&(S.remove(y),y=this._polygon=null),h||this._initOrUpdateEndLabel(t,o,(0,Ye.Lz)(k)),S.setClipPath($e(this,o,!0,t));var j=t.getModel("emphasis"),it=j.get("focus"),Y=j.get("blurScope"),W=j.get("disabled");m.useStyle(g.defaults(c.getLineStyle(),{fill:"none",stroke:k,lineJoin:"bevel"})),(0,et.WO)(m,t,"lineStyle"),m.style.lineWidth>0&&"bolder"===t.get(["emphasis","lineStyle","width"])&&(m.getState("emphasis").style.lineWidth=+m.style.lineWidth+1),(0,ie.A)(m).seriesIndex=t.seriesIndex,(0,et.k5)(m,it,Y,W);var ct=yn(t.get("smooth")),$=t.get("smoothMonotone");if(m.setShape({smooth:ct,smoothMonotone:$,connectNulls:I}),y){var K=u.getCalculationInfo("stackedOnSeries"),at=0;y.useStyle(g.defaults(p.getAreaStyle(),{fill:k,opacity:.7,lineJoin:"bevel",decal:u.getVisual("style").decal})),K&&(at=yn(K.get("smooth"))),y.setShape({smooth:ct,stackedOnSmooth:at,smoothMonotone:$,connectNulls:I}),(0,et.WO)(y,t,"areaStyle"),(0,ie.A)(y).seriesIndex=t.seriesIndex,(0,et.k5)(y,it,Y,W)}var ht=function(nt){i._changePolyState(nt)};u.eachItemGraphicEl(function(nt){nt&&(nt.onHoverStateChange=ht)}),this._polyline.onHoverStateChange=ht,this._data=u,this._coordSys=o,this._stackedOnPoints=D,this._points=d,this._step=R,this._valueOrigin=_,t.get("triggerLineEvent")&&(this.packEventData(t,m),y&&this.packEventData(t,y))},n.prototype.packEventData=function(t,a){(0,ie.A)(a).eventData={componentType:"series",componentSubType:"line",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"line"}},n.prototype.highlight=function(t,a,r,i){var o=t.getData(),l=ot.gO(o,i);if(this._changePolyState("emphasis"),!(l instanceof Array)&&null!=l&&l>=0){var u=o.getLayout("points"),c=o.getItemGraphicEl(l);if(!c){var p=u[2*l],d=u[2*l+1];if(isNaN(p)||isNaN(d)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(p,d))return;var h=t.get("zlevel")||0,f=t.get("z")||0;(c=new Qe(o,l)).x=p,c.y=d,c.setZ(h,f);var v=c.getSymbolPath().getTextContent();v&&(v.zlevel=h,v.z=f,v.z2=this._polyline.z2+1),c.__temp=!0,o.setItemGraphicEl(l,c),c.stopSymbolAnimation(!0),this.group.add(c)}c.highlight()}else xe.Z.prototype.highlight.call(this,t,a,r,i)},n.prototype.downplay=function(t,a,r,i){var o=t.getData(),l=ot.gO(o,i);if(this._changePolyState("normal"),null!=l&&l>=0){var u=o.getItemGraphicEl(l);u&&(u.__temp?(o.setItemGraphicEl(l,null),this.group.remove(u)):u.downplay())}else xe.Z.prototype.downplay.call(this,t,a,r,i)},n.prototype._changePolyState=function(t){var a=this._polygon;(0,et.Gl)(this._polyline,t),a&&(0,et.Gl)(a,t)},n.prototype._newPolyline=function(t){var a=this._polyline;return a&&this._lineGroup.remove(a),a=new Jo({shape:{points:t},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(a),this._polyline=a,a},n.prototype._newPolygon=function(t,a){var r=this._polygon;return r&&this._lineGroup.remove(r),r=new Qo({shape:{points:t,stackedOnPoints:a},segmentIgnoreThreshold:2}),this._lineGroup.add(r),this._polygon=r,r},n.prototype._initSymbolLabelAnimation=function(t,a,r){var i,o,l=a.getBaseAxis(),u=l.inverse;"cartesian2d"===a.type?(i=l.isHorizontal(),o=!1):"polar"===a.type&&(i="angle"===l.dim,o=!0);var c=t.hostModel,p=c.get("animationDuration");g.isFunction(p)&&(p=p(null));var d=c.get("animationDelay")||0,h=g.isFunction(d)?d(null):d;t.eachItemGraphicEl(function(f,v){var m=f;if(m){var S=void 0,b=void 0,x=void 0;if(r)if(o){var _=r,M=a.pointToCoord([f.x,f.y]);i?(S=_.startAngle,b=_.endAngle,x=-M[1]/180*Math.PI):(S=_.r0,b=_.r,x=M[0])}else i?(S=r.x,b=r.x+r.width,x=f.x):(S=r.y+r.height,b=r.y,x=f.y);var w=b===S?0:(x-S)/(b-S);u&&(w=1-w);var I=g.isFunction(d)?d(v):p*w+h,Z=m.getSymbolPath(),P=Z.getTextContent();m.attr({scaleX:0,scaleY:0}),m.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:I}),P&&P.animateFrom({style:{opacity:0}},{duration:300,delay:I}),Z.disableLabelAnimation=!0}})},n.prototype._initOrUpdateEndLabel=function(t,a,r){var i=t.getModel("endLabel");if(bn(t)){var o=t.getData(),l=this._polyline,u=o.getLayout("points");if(!u)return l.removeTextContent(),void(this._endLabel=null);var c=this._endLabel;c||((c=this._endLabel=new xt.ZP({z2:200})).ignoreClip=!0,l.setTextContent(this._endLabel),l.disableLabelAnimation=!0);var p=function ts(e){for(var n=e.length/2;n>0&&qo(e[2*n-2],e[2*n-1]);n--);return n-1}(u);p>=0&&((0,yt.ni)(l,(0,yt.k3)(t,"endLabel"),{inheritColor:r,labelFetcher:t,labelDataIndex:p,defaultText:function(d,h,f){return null!=f?(0,Je.O)(o,f):(0,Je.H)(o,d)},enableTextSetter:!0},function as(e,n){var t=n.getBaseAxis(),a=t.isHorizontal(),r=t.inverse,i=a?r?"right":"left":"center",o=a?"middle":r?"top":"bottom";return{normal:{align:e.get("align")||i,verticalAlign:e.get("verticalAlign")||o}}}(i,a)),l.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},n.prototype._endLabelOnDuring=function(t,a,r,i,o,l,u){var c=this._endLabel,p=this._polyline;if(c){t<1&&null==i.originalX&&(i.originalX=c.x,i.originalY=c.y);var d=r.getLayout("points"),h=r.hostModel,f=h.get("connectNulls"),v=l.get("precision"),m=l.get("distance")||0,y=u.getBaseAxis(),S=y.isHorizontal(),b=y.inverse,x=a.shape,_=b?S?x.x:x.y+x.height:S?x.x+x.width:x.y,M=(S?m:0)*(b?-1:1),D=(S?0:-m)*(b?-1:1),w=S?"x":"y",I=function es(e,n,t){for(var i,o,a=e.length/2,r="x"===t?0:1,l=0,u=-1,c=0;c<a;c++)if(o=e[2*c+r],!isNaN(o)&&!isNaN(e[2*c+1-r])){if(0===c){i=o;continue}if(i<=n&&o>=n||i>=n&&o<=n){u=c;break}l=c,i=o}return{range:[l,u],t:(n-i)/(o-i)}}(d,_,w),Z=I.range,P=Z[1]-Z[0],R=void 0;if(P>=1){if(P>1&&!f){var L=Sn(d,Z[0]);c.attr({x:L[0]+M,y:L[1]+D}),o&&(R=h.getRawValue(Z[0]))}else{(L=p.getPointOn(_,w))&&c.attr({x:L[0]+M,y:L[1]+D});var k=h.getRawValue(Z[0]),J=h.getRawValue(Z[1]);o&&(R=ot.pk(r,v,k,J,I.t))}i.lastFrameIndex=Z[0]}else{var X=1===t||i.lastFrameIndex>0?Z[0]:0;L=Sn(d,X),o&&(R=h.getRawValue(X)),c.attr({x:L[0]+M,y:L[1]+D})}if(o){var j=(0,yt.qA)(c);"function"==typeof j.setLabelText&&j.setLabelText(R)}}},n.prototype._doUpdateAnimation=function(t,a,r,i,o,l,u){var c=this._polyline,p=this._polygon,d=t.hostModel,h=function Go(e,n,t,a,r,i,o,l){for(var u=function Vo(e,n){var t=[];return n.diff(e).add(function(a){t.push({cmd:"+",idx:a})}).update(function(a,r){t.push({cmd:"=",idx:r,idx1:a})}).remove(function(a){t.push({cmd:"-",idx:a})}).execute(),t}(e,n),c=[],p=[],d=[],h=[],f=[],v=[],m=[],y=cn(r,n,o),S=e.getLayout("points")||[],b=n.getLayout("points")||[],x=0;x<u.length;x++){var _=u[x],M=!0,D=void 0,w=void 0;switch(_.cmd){case"=":var I=S[D=2*_.idx],Z=S[D+1],P=b[w=2*_.idx1],R=b[w+1];(isNaN(I)||isNaN(Z))&&(I=P,Z=R),c.push(I,Z),p.push(P,R),d.push(t[D],t[D+1]),h.push(a[w],a[w+1]),m.push(n.getRawIndex(_.idx1));break;case"+":var L=_.idx,k=y.dataDimsForPoint,J=r.dataToPoint([n.get(k[0],L),n.get(k[1],L)]);w=2*L,c.push(J[0],J[1]),p.push(b[w],b[w+1]);var X=pn(y,r,n,L);d.push(X[0],X[1]),h.push(a[w],a[w+1]),m.push(n.getRawIndex(L));break;case"-":M=!1}M&&(f.push(_),v.push(v.length))}v.sort(function(ht,nt){return m[ht]-m[nt]});var j=c.length,it=(0,Qt.o)(j),Y=(0,Qt.o)(j),W=(0,Qt.o)(j),ut=(0,Qt.o)(j),ct=[];for(x=0;x<v.length;x++){var $=v[x],K=2*x,at=2*$;it[K]=c[at],it[K+1]=c[at+1],Y[K]=p[at],Y[K+1]=p[at+1],W[K]=d[at],W[K+1]=d[at+1],ut[K]=h[at],ut[K+1]=h[at+1],ct[x]=f[$]}return{current:it,next:Y,stackedOnCurrent:W,stackedOnNext:ut,status:ct}}(this._data,t,this._stackedOnPoints,a,this._coordSys,0,this._valueOrigin),f=h.current,v=h.stackedOnCurrent,m=h.next,y=h.stackedOnNext;if(o&&(f=wt(h.current,r,o,u),v=wt(h.stackedOnCurrent,r,o,u),m=wt(h.next,r,o,u),y=wt(h.stackedOnNext,r,o,u)),mn(f,m)>3e3||p&&mn(v,y)>3e3)return c.stopAnimation(),c.setShape({points:m}),void(p&&(p.stopAnimation(),p.setShape({points:m,stackedOnPoints:y})));c.shape.__points=h.current,c.shape.points=f;var S={shape:{points:m}};h.current!==f&&(S.shape.__points=h.next),c.stopAnimation(),st.D(c,S,d),p&&(p.setShape({points:f,stackedOnPoints:v}),p.stopAnimation(),st.D(p,{shape:{stackedOnPoints:y}},d),c.shape.points!==p.shape.points&&(p.shape.points=c.shape.points));for(var b=[],x=h.status,_=0;_<x.length;_++)if("="===x[_].cmd){var D=t.getItemGraphicEl(x[_].idx1);D&&b.push({el:D,ptIdx:_})}c.animators&&c.animators.length&&c.animators[0].during(function(){p&&p.dirtyShape();for(var w=c.shape.__points,I=0;I<b.length;I++){var Z=b[I].el,P=2*b[I].ptIdx;Z.x=w[P],Z.y=w[P+1],Z.markRedraw()}})},n.prototype.remove=function(t){var a=this.group,r=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),r&&r.eachItemGraphicEl(function(i,o){i.__temp&&(a.remove(i),r.setItemGraphicEl(o,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},n.type="line",n}(xe.Z);var is=C(3649),ss=C(3436),us=C(4027),Tn=C(2590),le=C(562);const Ke=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.type,t.layoutMode={type:"box",ignoreSize:!0},t}return(0,H.ZT)(n,e),n.prototype.init=function(t,a,r){this.mergeDefaultAndTheme(t,r),t.selected=t.selected||{},this._updateSelector(t)},n.prototype.mergeOption=function(t,a){e.prototype.mergeOption.call(this,t,a),this._updateSelector(t)},n.prototype._updateSelector=function(t){var a=t.selector,r=this.ecModel;!0===a&&(a=t.selector=["all","inverse"]),g.isArray(a)&&g.each(a,function(i,o){g.isString(i)&&(i={type:i}),a[o]=g.merge(i,function(e,n){return"all"===n?{type:"all",title:e.getLocaleModel().get(["legend","selector","all"])}:"inverse"===n?{type:"inverse",title:e.getLocaleModel().get(["legend","selector","inverse"])}:void 0}(r,i.type))})},n.prototype.optionUpdated=function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&"single"===this.get("selectedMode")){for(var a=!1,r=0;r<t.length;r++){var i=t[r].get("name");if(this.isSelected(i)){this.select(i),a=!0;break}}!a&&this.select(t[0].get("name"))}},n.prototype._updateData=function(t){var a=[],r=[];t.eachRawSeries(function(u){var p;if(r.push(u.name),u.legendVisualProvider){var h=u.legendVisualProvider.getAllNames();t.isSeriesFiltered(u)||(r=r.concat(h)),h.length?a=a.concat(h):p=!0}else p=!0;p&&(0,ot.yu)(u)&&a.push(u.name)}),this._availableNames=r;var i=this.get("data")||a,o=g.createHashMap(),l=g.map(i,function(u){return(g.isString(u)||g.isNumber(u))&&(u={name:u}),o.get(u.name)?null:(o.set(u.name,!0),new Tn.Z(u,this,this.ecModel))},this);this._data=g.filter(l,function(u){return!!u})},n.prototype.getData=function(){return this._data},n.prototype.select=function(t){var a=this.option.selected;"single"===this.get("selectedMode")&&g.each(this._data,function(o){a[o.get("name")]=!1}),a[t]=!0},n.prototype.unSelect=function(t){"single"!==this.get("selectedMode")&&(this.option.selected[t]=!1)},n.prototype.toggleSelected=function(t){var a=this.option.selected;a.hasOwnProperty(t)||(a[t]=!0),this[a[t]?"unSelect":"select"](t)},n.prototype.allSelect=function(){var a=this.option.selected;g.each(this._data,function(r){a[r.get("name",!0)]=!0})},n.prototype.inverseSelect=function(){var a=this.option.selected;g.each(this._data,function(r){var i=r.get("name",!0);a.hasOwnProperty(i)||(a[i]=!0),a[i]=!a[i]})},n.prototype.isSelected=function(t){var a=this.option.selected;return!(a.hasOwnProperty(t)&&!a[t])&&g.indexOf(this._availableNames,t)>=0},n.prototype.getOrient=function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},n.type="legend.plain",n.dependencies=["series"],n.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},n}(le.Z);var ue=C(2501);function xn(e,n){var t=Ye.MY(n.get("padding")),a=n.getItemStyle(["color","opacity"]);return a.fill=n.get("backgroundColor"),new ue.Z({shape:{x:e.x-t[3],y:e.y-t[0],width:e.width+t[1]+t[3],height:e.height+t[0]+t[2],r:n.get("borderRadius")},style:a,silent:!0,z2:-1})}var ce=C(907),hs=C(9128),Wt=g.curry,qe=g.each,De=Ct.Z;function Cn(e,n,t,a){ea(e,n,t,a),t.dispatchAction({type:"legendToggleSelect",name:null!=e?e:n}),ta(e,n,t,a)}function An(e){for(var t,n=e.getZr().storage.getDisplayList(),a=0,r=n.length;a<r&&!(t=n[a].states.emphasis);)a++;return t&&t.hoverLayer}function ta(e,n,t,a){An(t)||t.dispatchAction({type:"highlight",seriesName:e,name:n,excludeSeriesId:a})}function ea(e,n,t,a){An(t)||t.dispatchAction({type:"downplay",seriesName:e,name:n,excludeSeriesId:a})}const _n=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.type,t.newlineDisabled=!1,t}return(0,H.ZT)(n,e),n.prototype.init=function(){this.group.add(this._contentGroup=new De),this.group.add(this._selectorGroup=new De),this._isFirstRender=!0},n.prototype.getContentGroup=function(){return this._contentGroup},n.prototype.getSelectorGroup=function(){return this._selectorGroup},n.prototype.render=function(t,a,r){var i=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),t.get("show",!0)){var o=t.get("align"),l=t.get("orient");(!o||"auto"===o)&&(o="right"===t.get("left")&&"vertical"===l?"right":"left");var u=t.get("selector",!0),c=t.get("selectorPosition",!0);u&&(!c||"auto"===c)&&(c="horizontal"===l?"end":"start"),this.renderInner(o,t,a,r,u,l,c);var p=t.getBoxLayoutParams(),d={width:r.getWidth(),height:r.getHeight()},h=t.get("padding"),f=ft.ME(p,d,h),v=this.layoutInner(t,o,f,i,u,c),m=ft.ME(g.defaults({width:v.width,height:v.height},p),d,h);this.group.x=m.x-v.x,this.group.y=m.y-v.y,this.group.markRedraw(),this.group.add(this._backgroundEl=xn(v,t))}},n.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},n.prototype.renderInner=function(t,a,r,i,o,l,u){var c=this.getContentGroup(),p=g.createHashMap(),d=a.get("selectedMode"),h=[];r.eachRawSeries(function(f){!f.get("legendHoverLink")&&h.push(f.id)}),qe(a.getData(),function(f,v){var m=f.get("name");if(!this.newlineDisabled&&(""===m||"\n"===m)){var y=new De;return y.newline=!0,void c.add(y)}var S=r.getSeriesByName(m)[0];if(!p.get(m))if(S){var b=S.getData(),x=b.getVisual("legendLineStyle")||{},_=b.getVisual("legendIcon"),M=b.getVisual("style");this._createItem(S,m,v,f,a,t,x,M,_,d,i).on("click",Wt(Cn,m,null,i,h)).on("mouseover",Wt(ta,S.name,null,i,h)).on("mouseout",Wt(ea,S.name,null,i,h)),p.set(m,!0)}else r.eachRawSeries(function(w){if(!p.get(m)&&w.legendVisualProvider){var I=w.legendVisualProvider;if(!I.containName(m))return;var Z=I.indexOfName(m),P=I.getItemVisual(Z,"style"),R=I.getItemVisual(Z,"legendIcon"),L=(0,Xe.parse)(P.fill);L&&0===L[3]&&(L[3]=.2,P=g.extend(g.extend({},P),{fill:(0,Xe.stringify)(L,"rgba")})),this._createItem(w,m,v,f,a,t,{},P,R,d,i).on("click",Wt(Cn,null,m,i,h)).on("mouseover",Wt(ta,null,m,i,h)).on("mouseout",Wt(ea,null,m,i,h)),p.set(m,!0)}},this)},this),o&&this._createSelector(o,a,i,l,u)},n.prototype._createSelector=function(t,a,r,i,o){var l=this.getSelectorGroup();qe(t,function(c){var p=c.type,d=new xt.ZP({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){r.dispatchAction({type:"all"===p?"legendAllSelect":"legendInverseSelect"})}});l.add(d);var h=a.getModel("selectorLabel"),f=a.getModel(["emphasis","selectorLabel"]);(0,yt.ni)(d,{normal:h,emphasis:f},{defaultText:c.title}),(0,et.vF)(d)})},n.prototype._createItem=function(t,a,r,i,o,l,u,c,p,d,h){var f=t.visualDrawType,v=o.get("itemWidth"),m=o.get("itemHeight"),y=o.isSelected(a),S=i.get("symbolRotate"),b=i.get("symbolKeepAspect"),x=i.get("icon"),_=function vs(e,n,t,a,r,i,o){function l(y,S){"auto"===y.lineWidth&&(y.lineWidth=S.lineWidth>0?2:0),qe(y,function(b,x){"inherit"===y[x]&&(y[x]=S[x])})}var u=n.getModel("itemStyle"),c=u.getItemStyle(),p=0===e.lastIndexOf("empty",0)?"fill":"stroke",d=u.getShallow("decal");c.decal=d&&"inherit"!==d?(0,hs.I)(d,o):a.decal,"inherit"===c.fill&&(c.fill=a[r]),"inherit"===c.stroke&&(c.stroke=a[p]),"inherit"===c.opacity&&(c.opacity=("fill"===r?a:t).opacity),l(c,a);var h=n.getModel("lineStyle"),f=h.getLineStyle();if(l(f,t),"auto"===c.fill&&(c.fill=a.fill),"auto"===c.stroke&&(c.stroke=a.fill),"auto"===f.stroke&&(f.stroke=a.fill),!i){var v=n.get("inactiveBorderWidth");c.lineWidth="auto"===v?a.lineWidth>0&&c[p]?2:0:c.lineWidth,c.fill=n.get("inactiveColor"),c.stroke=n.get("inactiveBorderColor"),f.stroke=h.get("inactiveColor"),f.lineWidth=h.get("inactiveWidth")}return{itemStyle:c,lineStyle:f}}(p=x||p||"roundRect",i,u,c,f,y,h),M=new De,D=i.getModel("textStyle");if(!g.isFunction(t.getLegendIcon)||x&&"inherit"!==x){var w="inherit"===x&&t.getData().getVisual("symbol")?"inherit"===S?t.getData().getVisual("symbolRotate"):S:0;M.add(function gs(e){var n=e.icon||"roundRect",t=(0,Ht.th)(n,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill,e.symbolKeepAspect);return t.setStyle(e.itemStyle),t.rotation=(e.iconRotate||0)*Math.PI/180,t.setOrigin([e.itemWidth/2,e.itemHeight/2]),n.indexOf("empty")>-1&&(t.style.stroke=t.style.fill,t.style.fill="#fff",t.style.lineWidth=2),t}({itemWidth:v,itemHeight:m,icon:p,iconRotate:w,itemStyle:_.itemStyle,lineStyle:_.lineStyle,symbolKeepAspect:b}))}else M.add(t.getLegendIcon({itemWidth:v,itemHeight:m,icon:p,iconRotate:S,itemStyle:_.itemStyle,lineStyle:_.lineStyle,symbolKeepAspect:b}));var I="left"===l?v+5:-5,Z=l,P=o.get("formatter"),R=a;g.isString(P)&&P?R=P.replace("{name}",null!=a?a:""):g.isFunction(P)&&(R=P(a));var L=y?D.getTextColor():i.get("inactiveColor");M.add(new xt.ZP({style:(0,yt.Lr)(D,{text:R,x:I,y:m/2,fill:L,align:Z,verticalAlign:"middle"},{inheritColor:L})}));var k=new ue.Z({shape:M.getBoundingRect(),invisible:!0}),J=i.getModel("tooltip");return J.get("show")&&At.setTooltipConfig({el:k,componentModel:o,itemName:a,itemTooltipOption:J.option}),M.add(k),M.eachChild(function(X){X.silent=!0}),k.silent=!d,this.getContentGroup().add(M),(0,et.vF)(M),M.__legendDataIndex=r,M},n.prototype.layoutInner=function(t,a,r,i,o,l){var u=this.getContentGroup(),c=this.getSelectorGroup();ft.BZ(t.get("orient"),u,t.get("itemGap"),r.width,r.height);var p=u.getBoundingRect(),d=[-p.x,-p.y];if(c.markRedraw(),u.markRedraw(),o){ft.BZ("horizontal",c,t.get("selectorItemGap",!0));var h=c.getBoundingRect(),f=[-h.x,-h.y],v=t.get("selectorButtonGap",!0),m=t.getOrient().index,y=0===m?"width":"height",S=0===m?"height":"width",b=0===m?"y":"x";"end"===l?f[m]+=p[y]+v:d[m]+=h[y]+v,f[1-m]+=p[S]/2-h[S]/2,c.x=f[0],c.y=f[1],u.x=d[0],u.y=d[1];var x={x:0,y:0};return x[y]=p[y]+v+h[y],x[S]=Math.max(p[S],h[S]),x[b]=Math.min(0,h[b]+f[1-m]),x}return u.x=d[0],u.y=d[1],this.group.getBoundingRect()},n.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},n.type="legend.plain",n}(ce.Z);function ms(e){var n=e.findComponents({mainType:"legend"});n&&n.length&&e.filterSeries(function(t){for(var a=0;a<n.length;a++)if(!n[a].isSelected(t.name))return!1;return!0})}function pe(e,n,t){var i,a={},r="toggleSelected"===e;return t.eachComponent("legend",function(o){r&&null!=i?o[i?"select":"unSelect"](n.name):"allSelect"===e||"inverseSelect"===e?o[e]():(o[e](n.name),i=o.isSelected(n.name));var l=o.getData();(0,g.each)(l,function(u){var c=u.get("name");if("\n"!==c&&""!==c){var p=o.isSelected(c);a[c]=a.hasOwnProperty(c)?a[c]&&p:p}})}),"allSelect"===e||"inverseSelect"===e?{selected:a}:{name:n.name,selected:a}}function Dn(e){e.registerComponentModel(Ke),e.registerComponentView(_n),e.registerProcessor(e.PRIORITY.PROCESSOR.SERIES_FILTER,ms),e.registerSubTypeDefaulter("legend",function(){return"plain"}),function ys(e){e.registerAction("legendToggleSelect","legendselectchanged",(0,g.curry)(pe,"toggleSelected")),e.registerAction("legendAllSelect","legendselectall",(0,g.curry)(pe,"allSelect")),e.registerAction("legendInverseSelect","legendinverseselect",(0,g.curry)(pe,"inverseSelect")),e.registerAction("legendSelect","legendselected",(0,g.curry)(pe,"select")),e.registerAction("legendUnSelect","legendunselected",(0,g.curry)(pe,"unSelect"))}(e)}var On=C(7692);function Mn(e,n,t){var r=[1,1];r[e.getOrient().index]=0,(0,ft.dt)(n,t,{type:"box",ignoreSize:!!r})}const bs=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.type,t}return(0,H.ZT)(n,e),n.prototype.setScrollDataIndex=function(t){this.option.scrollDataIndex=t},n.prototype.init=function(t,a,r){var i=(0,ft.tE)(t);e.prototype.init.call(this,t,a,r),Mn(this,t,i)},n.prototype.mergeOption=function(t,a){e.prototype.mergeOption.call(this,t,a),Mn(this,this.option,t)},n.type="legend.scroll",n.defaultOption=(0,On.ZL)(Ke.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),n}(Ke);var wn=Ct.Z,aa=["width","height"],na=["x","y"];const xs=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.type,t.newlineDisabled=!0,t._currentIndex=0,t}return(0,H.ZT)(n,e),n.prototype.init=function(){e.prototype.init.call(this),this.group.add(this._containerGroup=new wn),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new wn)},n.prototype.resetInner=function(){e.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},n.prototype.renderInner=function(t,a,r,i,o,l,u){var c=this;e.prototype.renderInner.call(this,t,a,r,i,o,l,u);var p=this._controllerGroup,d=a.get("pageIconSize",!0),h=g.isArray(d)?d:[d,d];v("pagePrev",0);var f=a.getModel("pageTextStyle");function v(m,y){var S=m+"DataIndex",b=At.createIcon(a.get("pageIcons",!0)[a.getOrient().name][y],{onclick:g.bind(c._pageGo,c,S,a,i)},{x:-h[0]/2,y:-h[1]/2,width:h[0],height:h[1]});b.name=m,p.add(b)}p.add(new xt.ZP({name:"pageText",style:{text:"xx/xx",fill:f.getTextColor(),font:f.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),v("pageNext",1)},n.prototype.layoutInner=function(t,a,r,i,o,l){var u=this.getSelectorGroup(),c=t.getOrient().index,p=aa[c],d=na[c],h=aa[1-c],f=na[1-c];o&&ft.BZ("horizontal",u,t.get("selectorItemGap",!0));var v=t.get("selectorButtonGap",!0),m=u.getBoundingRect(),y=[-m.x,-m.y],S=g.clone(r);o&&(S[p]=r[p]-m[p]-v);var b=this._layoutContentAndController(t,i,S,c,p,h,f,d);if(o){if("end"===l)y[c]+=b[p]+v;else{var x=m[p]+v;y[c]-=x,b[d]-=x}b[p]+=m[p]+v,y[1-c]+=b[f]+b[h]/2-m[h]/2,b[h]=Math.max(b[h],m[h]),b[f]=Math.min(b[f],m[f]+y[1-c]),u.x=y[0],u.y=y[1],u.markRedraw()}return b},n.prototype._layoutContentAndController=function(t,a,r,i,o,l,u,c){var p=this.getContentGroup(),d=this._containerGroup,h=this._controllerGroup;ft.BZ(t.get("orient"),p,t.get("itemGap"),i?r.width:null,i?null:r.height),ft.BZ("horizontal",h,t.get("pageButtonItemGap",!0));var f=p.getBoundingRect(),v=h.getBoundingRect(),m=this._showController=f[o]>r[o],y=[-f.x,-f.y];a||(y[i]=p[c]);var S=[0,0],b=[-v.x,-v.y],x=g.retrieve2(t.get("pageButtonGap",!0),t.get("itemGap",!0));m&&("end"===t.get("pageButtonPosition",!0)?b[i]+=r[o]-v[o]:S[i]+=v[o]+x),b[1-i]+=f[l]/2-v[l]/2,p.setPosition(y),d.setPosition(S),h.setPosition(b);var M={x:0,y:0};if(M[o]=m?r[o]:f[o],M[l]=Math.max(f[l],v[l]),M[u]=Math.min(0,v[u]+b[1-i]),d.__rectSize=r[o],m){var D={x:0,y:0};D[o]=Math.max(r[o]-v[o]-x,0),D[l]=M[l],d.setClipPath(new ue.Z({shape:D})),d.__rectSize=D[o]}else h.eachChild(function(I){I.attr({invisible:!0,silent:!0})});var w=this._getPageInfo(t);return null!=w.pageIndex&&st.D(p,{x:w.contentPosition[0],y:w.contentPosition[1]},m?t:null),this._updatePageInfoView(t,w),M},n.prototype._pageGo=function(t,a,r){var i=this._getPageInfo(a)[t];null!=i&&r.dispatchAction({type:"legendScroll",scrollDataIndex:i,legendId:a.id})},n.prototype._updatePageInfoView=function(t,a){var r=this._controllerGroup;g.each(["pagePrev","pageNext"],function(p){var h=null!=a[p+"DataIndex"],f=r.childOfName(p);f&&(f.setStyle("fill",t.get(h?"pageIconColor":"pageIconInactiveColor",!0)),f.cursor=h?"pointer":"default")});var i=r.childOfName("pageText"),o=t.get("pageFormatter"),l=a.pageIndex,u=null!=l?l+1:0,c=a.pageCount;i&&o&&i.setStyle("text",g.isString(o)?o.replace("{current}",null==u?"":u+"").replace("{total}",null==c?"":c+""):o({current:u,total:c}))},n.prototype._getPageInfo=function(t){var a=t.get("scrollDataIndex",!0),r=this.getContentGroup(),i=this._containerGroup.__rectSize,o=t.getOrient().index,l=aa[o],u=na[o],c=this._findTargetItemIndex(a),p=r.children(),d=p[c],h=p.length,f=h?1:0,v={contentPosition:[r.x,r.y],pageCount:f,pageIndex:f-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!d)return v;var m=_(d);v.contentPosition[o]=-m.s;for(var y=c+1,S=m,b=m,x=null;y<=h;++y)(!(x=_(p[y]))&&b.e>S.s+i||x&&!M(x,S.s))&&(S=b.i>S.i?b:x)&&(null==v.pageNextDataIndex&&(v.pageNextDataIndex=S.i),++v.pageCount),b=x;for(y=c-1,S=m,b=m,x=null;y>=-1;--y)(!(x=_(p[y]))||!M(b,x.s))&&S.i<b.i&&(b=S,null==v.pagePrevDataIndex&&(v.pagePrevDataIndex=S.i),++v.pageCount,++v.pageIndex),S=x;return v;function _(D){if(D){var w=D.getBoundingRect(),I=w[u]+D[u];return{s:I,e:I+w[l],i:D.__legendDataIndex}}}function M(D,w){return D.e>=w&&D.s<=w+i}},n.prototype._findTargetItemIndex=function(t){return this._showController?(this.getContentGroup().eachChild(function(o,l){var u=o.__legendDataIndex;null==i&&null!=u&&(i=l),u===t&&(a=l)}),null!=a?a:i):0;var a,i},n.type="legend.scroll",n}(_n);function As(e){(0,re.D)(Dn),e.registerComponentModel(bs),e.registerComponentView(xs),function Cs(e){e.registerAction("legendScroll","legendscroll",function(n,t){var a=n.scrollDataIndex;null!=a&&t.eachComponent({mainType:"legend",subType:"scroll",query:n},function(r){r.setScrollDataIndex(a)})})}(e)}var Pn=C(8519),Os=C(5699),In=C(5735);function Oe(e){(0,ot.Cc)(e,"label",["show"])}var Me=(0,ot.Yf)(),Zn=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.type,t.createdBySelf=!1,t}return(0,H.ZT)(n,e),n.prototype.init=function(t,a,r){this.mergeDefaultAndTheme(t,r),this._mergeOption(t,r,!1,!0)},n.prototype.isAnimationEnabled=function(){if(Pn.Z.node)return!1;var t=this.__hostSeries;return this.getShallow("animation")&&t&&t.isAnimationEnabled()},n.prototype.mergeOption=function(t,a){this._mergeOption(t,a,!1,!1)},n.prototype._mergeOption=function(t,a,r,i){var o=this.mainType;r||a.eachSeries(function(l){var u=l.get(this.mainType,!0),c=Me(l)[o];u&&u.data?(c?c._mergeOption(u,a,!0):(i&&Oe(u),g.each(u.data,function(p){p instanceof Array?(Oe(p[0]),Oe(p[1])):Oe(p)}),c=this.createMarkerModelFromSeries(u,this,a),g.extend(c,{mainType:this.mainType,seriesIndex:l.seriesIndex,name:l.name,createdBySelf:!0}),c.__hostSeries=l),Me(l)[o]=c):Me(l)[o]=null},this)},n.prototype.formatTooltip=function(t,a,r){var i=this.getData(),o=this.getRawValue(t),l=i.getName(t);return(0,In.TX)("section",{header:this.name,blocks:[(0,In.TX)("nameValue",{name:l,value:o,noName:!l,noValue:null==o})]})},n.prototype.getData=function(){return this._data},n.prototype.setData=function(t){this._data=t},n.getMarkerModelFromSeries=function(t,a){return Me(t)[a]},n.type="marker",n.dependencies=["series","grid","polar","geo"],n}(le.Z);g.mixin(Zn,Os.X.prototype);const we=Zn,ws=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.type,t}return(0,H.ZT)(n,e),n.prototype.createMarkerModelFromSeries=function(t,a,r){return new n(t,a,r)},n.type="markPoint",n.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},n}(we);var Ln=C(8186);function Pe(e,n,t,a,r,i){var o=[],u=(0,oe.M)(n,a)?n.getCalculationInfo("stackResultDimension"):a,c=Nn(n,u,e),p=n.indicesOfNearest(u,c)[0];o[r]=n.get(t,p),o[i]=n.get(u,p);var d=n.get(a,p),h=tt.p8(n.get(a,p));return(h=Math.min(h,20))>=0&&(o[i]=+o[i].toFixed(h)),[o,d]}var ia={min:(0,g.curry)(Pe,"min"),max:(0,g.curry)(Pe,"max"),average:(0,g.curry)(Pe,"average"),median:(0,g.curry)(Pe,"median")};function Is(e,n){if(n){var t=e.getData(),a=e.coordinateSystem,r=a&&a.dimensions;if(!function Ps(e){return!isNaN(parseFloat(e.x))&&!isNaN(parseFloat(e.y))}(n)&&!(0,g.isArray)(n.coord)&&(0,g.isArray)(r)){var i=function Zs(e,n,t,a){var r={};return null!=e.valueIndex||null!=e.valueDim?(r.valueDataDim=null!=e.valueIndex?n.getDimension(e.valueIndex):e.valueDim,r.valueAxis=t.getAxis(function Ls(e,n){var t=e.getData().getDimensionInfo(n);return t&&t.coordDim}(a,r.valueDataDim)),r.baseAxis=t.getOtherAxis(r.valueAxis),r.baseDataDim=n.mapDimension(r.baseAxis.dim)):(r.baseAxis=a.getBaseAxis(),r.valueAxis=t.getOtherAxis(r.baseAxis),r.baseDataDim=n.mapDimension(r.baseAxis.dim),r.valueDataDim=n.mapDimension(r.valueAxis.dim)),r}(n,t,a,e);if((n=(0,g.clone)(n)).type&&ia[n.type]&&i.baseAxis&&i.valueAxis){var o=(0,g.indexOf)(r,i.baseAxis.dim),l=(0,g.indexOf)(r,i.valueAxis.dim),u=ia[n.type](t,i.baseDataDim,i.valueDataDim,o,l);n.coord=u[0],n.value=u[1]}else n.coord=[null!=n.xAxis?n.xAxis:n.radiusAxis,null!=n.yAxis?n.yAxis:n.angleAxis]}if(null!=n.coord&&(0,g.isArray)(r))for(var c=n.coord,p=0;p<2;p++)ia[c[p]]&&(c[p]=Nn(t,t.mapDimension(r[p]),c[p]));else n.coord=[];return n}}function Ns(e,n){return!(e&&e.containData&&n.coord&&!function ra(e){return!(isNaN(parseFloat(e.x))&&isNaN(parseFloat(e.y)))}(n))||e.containData(n.coord)}function Nn(e,n,t){if("average"===t){var a=0,r=0;return e.each(n,function(i,o){isNaN(i)||(a+=i,r++)}),a/r}return"median"===t?e.getMedian(n):e.getDataExtent(n)["max"===t?1:0]}var oa=(0,ot.Yf)();const Us=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.type,t}return(0,H.ZT)(n,e),n.prototype.init=function(){this.markerGroupMap=(0,g.createHashMap)()},n.prototype.render=function(t,a,r){var i=this,o=this.markerGroupMap;o.each(function(l){oa(l).keep=!1}),a.eachSeries(function(l){var u=we.getMarkerModelFromSeries(l,i.type);u&&i.renderSeries(l,u,a,r)}),o.each(function(l){!oa(l).keep&&i.group.remove(l.group)})},n.prototype.markKeep=function(t){oa(t).keep=!0},n.prototype.toggleBlurSeries=function(t,a){var r=this;(0,g.each)(t,function(i){var o=we.getMarkerModelFromSeries(i,r.type);o&&o.getData().eachItemGraphicEl(function(u){u&&(a?(0,et.SX)(u):(0,et.VP)(u))})})},n.type="marker",n}(ce.Z);var Rs=C(7248);function kn(e,n,t){var a=n.coordinateSystem;e.each(function(r){var o,i=e.getItemModel(r),l=tt.GM(i.get("x"),t.getWidth()),u=tt.GM(i.get("y"),t.getHeight());if(isNaN(l)||isNaN(u)){if(n.getMarkerPosition)o=n.getMarkerPosition(e.getValues(e.dimensions,r));else if(a){var c=e.get(a.dimensions[0],r),p=e.get(a.dimensions[1],r);o=a.dataToPoint([c,p])}}else o=[l,u];isNaN(l)||(o[0]=l),isNaN(u)||(o[1]=u),e.setItemLayout(r,o)})}const Vs=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.type,t}return(0,H.ZT)(n,e),n.prototype.updateTransform=function(t,a,r){a.eachSeries(function(i){var o=we.getMarkerModelFromSeries(i,"markPoint");o&&(kn(o.getData(),i,r),this.markerGroupMap.get(i.id).updateLayout())},this)},n.prototype.renderSeries=function(t,a,r,i){var o=t.coordinateSystem,l=t.id,u=t.getData(),c=this.markerGroupMap,p=c.get(l)||c.set(l,new un),d=function Fs(e,n,t){var a;a=e?(0,g.map)(e&&e.dimensions,function(l){var u=n.getData().getDimensionInfo(n.getData().mapDimension(l))||{};return(0,g.extend)((0,g.extend)({},u),{name:l,ordinalMeta:null})}):[{name:"value",type:"float"}];var r=new rn.Z(a,t),i=(0,g.map)(t.get("data"),(0,g.curry)(Is,n));e&&(i=(0,g.filter)(i,(0,g.curry)(Ns,e)));var o=function ks(e,n){return e?function(t,a,r,i){return(0,Ln.yQ)(i<2?t.coord&&t.coord[i]:t.value,n[i])}:function(t,a,r,i){return(0,Ln.yQ)(t.value,n[i])}}(!!e,a);return r.initData(i,null,o),r}(o,t,a);a.setData(d),kn(a.getData(),t,i),d.each(function(h){var f=d.getItemModel(h),v=f.getShallow("symbol"),m=f.getShallow("symbolSize"),y=f.getShallow("symbolRotate"),S=f.getShallow("symbolOffset"),b=f.getShallow("symbolKeepAspect");if((0,g.isFunction)(v)||(0,g.isFunction)(m)||(0,g.isFunction)(y)||(0,g.isFunction)(S)){var x=a.getRawValue(h),_=a.getDataParams(h);(0,g.isFunction)(v)&&(v=v(x,_)),(0,g.isFunction)(m)&&(m=m(x,_)),(0,g.isFunction)(y)&&(y=y(x,_)),(0,g.isFunction)(S)&&(S=S(x,_))}var M=f.getModel("itemStyle").getItemStyle(),D=(0,Rs.UL)(u,"color");M.fill||(M.fill=D),d.setItemVisual(h,{symbol:v,symbolSize:m,symbolRotate:y,symbolOffset:S,symbolKeepAspect:b,style:M})}),p.updateData(d),this.group.add(p.group),d.eachItemGraphicEl(function(h){h.traverse(function(f){(0,ie.A)(f).dataModel=a})}),this.markKeep(p),p.group.silent=a.get("silent")||t.get("silent")},n.type="markPoint",n}(Us);var Bs=C(5230),Js=C(2956),sa=C(528),Hs=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="dataset",t}return(0,H.ZT)(n,e),n.prototype.init=function(t,a,r){e.prototype.init.call(this,t,a,r),this._sourceManager=new sa.U(this),(0,sa.t)(this)},n.prototype.mergeOption=function(t,a){e.prototype.mergeOption.call(this,t,a),(0,sa.t)(this)},n.prototype.optionUpdated=function(){this._sourceManager.dirty()},n.prototype.getSourceManager=function(){return this._sourceManager},n.type="dataset",n.defaultOption={seriesLayoutBy:Js.fY},n}(le.Z),Qs=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="dataset",t}return(0,H.ZT)(n,e),n.type="dataset",n}(ce.Z),zn=["x","y","radius","angle","single"],js=["cartesian2d","polar","singleAxis"];function kt(e){return e+"Axis"}var la=function(){function e(){this.indexList=[],this.indexMap=[]}return e.prototype.add=function(n){this.indexMap[n]||(this.indexList.push(n),this.indexMap[n]=!0)},e}();function Un(e){var n={};return(0,g.each)(["start","end","startValue","endValue","throttle"],function(t){e.hasOwnProperty(t)&&(n[t]=e[t])}),n}const qs=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.type,t}return(0,H.ZT)(n,e),n.type="dataZoom.select",n}(function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.type,t._autoThrottle=!0,t._noTarget=!0,t._rangePropMode=["percent","percent"],t}return(0,H.ZT)(n,e),n.prototype.init=function(t,a,r){var i=Un(t);this.settledOption=i,this.mergeDefaultAndTheme(t,r),this._doInit(i)},n.prototype.mergeOption=function(t){var a=Un(t);(0,g.merge)(this.option,t,!0),(0,g.merge)(this.settledOption,a,!0),this._doInit(a)},n.prototype._doInit=function(t){var a=this.option;this._setDefaultThrottle(t),this._updateRangeUse(t);var r=this.settledOption;(0,g.each)([["start","startValue"],["end","endValue"]],function(i,o){"value"===this._rangePropMode[o]&&(a[i[0]]=r[i[0]]=null)},this),this._resetTarget()},n.prototype._resetTarget=function(){var t=this.get("orient",!0),a=this._targetAxisInfoMap=(0,g.createHashMap)();this._fillSpecifiedTargetAxis(a)?this._orient=t||this._makeAutoOrientByTargetAxis():(this._orient=t||"horizontal",this._fillAutoTargetAxisByOrient(a,this._orient)),this._noTarget=!0,a.each(function(i){i.indexList.length&&(this._noTarget=!1)},this)},n.prototype._fillSpecifiedTargetAxis=function(t){var a=!1;return(0,g.each)(zn,function(r){var i=this.getReferringComponents(kt(r),ot.iP);if(i.specified){a=!0;var o=new la;(0,g.each)(i.models,function(l){o.add(l.componentIndex)}),t.set(r,o)}},this),a},n.prototype._fillAutoTargetAxisByOrient=function(t,a){var r=this.ecModel,i=!0;if(i){var o="vertical"===a?"y":"x";u(r.findComponents({mainType:o+"Axis"}),o)}function u(c,p){var d=c[0];if(d){var h=new la;if(h.add(d.componentIndex),t.set(p,h),i=!1,"x"===p||"y"===p){var f=d.getReferringComponents("grid",ot.C6).models[0];f&&(0,g.each)(c,function(v){d.componentIndex!==v.componentIndex&&f===v.getReferringComponents("grid",ot.C6).models[0]&&h.add(v.componentIndex)})}}}i&&u(r.findComponents({mainType:"singleAxis",filter:function(p){return p.get("orient",!0)===a}}),"single"),i&&(0,g.each)(zn,function(c){if(i){var p=r.findComponents({mainType:kt(c),filter:function(h){return"category"===h.get("type",!0)}});if(p[0]){var d=new la;d.add(p[0].componentIndex),t.set(c,d),i=!1}}},this)},n.prototype._makeAutoOrientByTargetAxis=function(){var t;return this.eachTargetAxis(function(a){!t&&(t=a)},this),"y"===t?"vertical":"horizontal"},n.prototype._setDefaultThrottle=function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var a=this.ecModel.option;this.option.throttle=a.animation&&a.animationDurationUpdate>0?100:20}},n.prototype._updateRangeUse=function(t){var a=this._rangePropMode,r=this.get("rangeMode");(0,g.each)([["start","startValue"],["end","endValue"]],function(i,o){var l=null!=t[i[0]],u=null!=t[i[1]];l&&!u?a[o]="percent":!l&&u?a[o]="value":r?a[o]=r[o]:l&&(a[o]="percent")})},n.prototype.noTarget=function(){return this._noTarget},n.prototype.getFirstTargetAxisModel=function(){var t;return this.eachTargetAxis(function(a,r){null==t&&(t=this.ecModel.getComponent(kt(a),r))},this),t},n.prototype.eachTargetAxis=function(t,a){this._targetAxisInfoMap.each(function(r,i){(0,g.each)(r.indexList,function(o){t.call(a,i,o)})})},n.prototype.getAxisProxy=function(t,a){var r=this.getAxisModel(t,a);if(r)return r.__dzAxisProxy},n.prototype.getAxisModel=function(t,a){var r=this._targetAxisInfoMap.get(t);if(r&&r.indexMap[a])return this.ecModel.getComponent(kt(t),a)},n.prototype.setRawRange=function(t){var a=this.option,r=this.settledOption;(0,g.each)([["start","startValue"],["end","endValue"]],function(i){(null!=t[i[0]]||null!=t[i[1]])&&(a[i[0]]=r[i[0]]=t[i[0]],a[i[1]]=r[i[1]]=t[i[1]])},this),this._updateRangeUse(t)},n.prototype.setCalculatedRange=function(t){var a=this.option;(0,g.each)(["start","startValue","end","endValue"],function(r){a[r]=t[r]})},n.prototype.getPercentRange=function(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},n.prototype.getValueRange=function(t,a){if(null!=t||null!=a)return this.getAxisProxy(t,a).getDataValueWindow();var r=this.findRepresentativeAxisProxy();return r?r.getDataValueWindow():void 0},n.prototype.findRepresentativeAxisProxy=function(t){if(t)return t.__dzAxisProxy;for(var a,r=this._targetAxisInfoMap.keys(),i=0;i<r.length;i++)for(var o=r[i],l=this._targetAxisInfoMap.get(o),u=0;u<l.indexList.length;u++){var c=this.getAxisProxy(o,l.indexList[u]);if(c.hostedBy(this))return c;a||(a=c)}return a},n.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},n.prototype.getOrient=function(){return this._orient},n.type="dataZoom",n.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],n.defaultOption={z:4,filterMode:"filter",start:0,end:100},n}(le.Z)),al=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.type,t}return(0,H.ZT)(n,e),n.type="dataZoom.select",n}(function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.type,t}return(0,H.ZT)(n,e),n.prototype.render=function(t,a,r,i){this.dataZoomModel=t,this.ecModel=a,this.api=r},n.type="dataZoom",n}(ce.Z));function Rn(e,n,t,a,r,i){e=e||0;var o=t[1]-t[0];if(null!=r&&(r=jt(r,[0,o])),null!=i&&(i=Math.max(i,null!=r?r:0)),"all"===a){var l=Math.abs(n[1]-n[0]);l=jt(l,[0,o]),r=i=jt(l,[r,i]),a=0}n[0]=jt(n[0],t),n[1]=jt(n[1],t);var u=ua(n,a);n[a]+=e;var d,c=r||0,p=t.slice();return u.sign<0?p[0]+=c:p[1]-=c,n[a]=jt(n[a],p),d=ua(n,a),null!=r&&(d.sign!==u.sign||d.span<r)&&(n[1-a]=n[a]+u.sign*r),d=ua(n,a),null!=i&&d.span>i&&(n[1-a]=n[a]+d.sign*i),n}function ua(e,n){var t=e[n]-e[1-n];return{span:Math.abs(t),sign:t>0?-1:t<0?1:n?-1:1}}function jt(e,n){return Math.min(null!=n[1]?n[1]:1/0,Math.max(null!=n[0]?n[0]:-1/0,e))}var nl=C(4940),rl=C(612),Yt=g.each,En=tt.dt;const sl=function(){function e(n,t,a,r){this._dimName=n,this._axisIndex=t,this.ecModel=r,this._dataZoomModel=a}return e.prototype.hostedBy=function(n){return this._dataZoomModel===n},e.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},e.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},e.prototype.getTargetSeriesModels=function(){var n=[];return this.ecModel.eachSeries(function(t){if(function Ys(e){var n=e.get("coordinateSystem");return(0,g.indexOf)(js,n)>=0}(t)){var a=kt(this._dimName),r=t.getReferringComponents(a,ot.C6).models[0];r&&this._axisIndex===r.componentIndex&&n.push(t)}},this),n},e.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},e.prototype.getMinMaxSpan=function(){return g.clone(this._minMaxSpan)},e.prototype.calculateDataWindow=function(n){var c,t=this._dataExtent,r=this.getAxisModel().axis.scale,i=this._dataZoomModel.getRangePropMode(),o=[0,100],l=[],u=[];Yt(["start","end"],function(h,f){var v=n[h],m=n[h+"Value"];"percent"===i[f]?(null==v&&(v=o[f]),m=r.parse(tt.NU(v,o,t))):(c=!0,m=null==m?t[f]:r.parse(m),v=tt.NU(m,t,o)),u[f]=null==m||isNaN(m)?t[f]:m,l[f]=null==v||isNaN(v)?o[f]:v}),En(u),En(l);var p=this._minMaxSpan;function d(h,f,v,m,y){var S=y?"Span":"ValueSpan";Rn(0,h,v,"all",p["min"+S],p["max"+S]);for(var b=0;b<2;b++)f[b]=tt.NU(h[b],v,m,!0),y&&(f[b]=r.parse(f[b]))}return c?d(u,l,t,o,!1):d(l,u,o,t,!0),{valueWindow:u,percentWindow:l}},e.prototype.reset=function(n){if(n===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=function ol(e,n,t){var a=[1/0,-1/0];Yt(t,function(o){(0,nl.AH)(a,o.getData(),n)});var r=e.getAxisModel(),i=(0,rl.Qw)(r.axis.scale,r,a).calculate();return[i.min,i.max]}(this,this._dimName,t),this._updateMinMaxSpan();var a=this.calculateDataWindow(n.settledOption);this._valueWindow=a.valueWindow,this._percentWindow=a.percentWindow,this._setAxisModel()}},e.prototype.filterData=function(n,t){if(n===this._dataZoomModel){var a=this._dimName,r=this.getTargetSeriesModels(),i=n.get("filterMode"),o=this._valueWindow;"none"!==i&&Yt(r,function(u){var c=u.getData(),p=c.mapDimensionsAll(a);if(p.length){if("weakFilter"===i){var d=c.getStore(),h=g.map(p,function(f){return c.getDimensionIndex(f)},c);c.filterSelf(function(f){for(var v,m,y,S=0;S<p.length;S++){var b=d.get(h[S],f),x=!isNaN(b),_=b<o[0],M=b>o[1];if(x&&!_&&!M)return!0;x&&(y=!0),_&&(v=!0),M&&(m=!0)}return y&&v&&m})}else Yt(p,function(f){if("empty"===i)u.setData(c=c.map(f,function(m){return function l(u){return u>=o[0]&&u<=o[1]}(m)?m:NaN}));else{var v={};v[f]=o,c.selectRange(v)}});Yt(p,function(f){c.setApproximateExtent(o,f)})}})}},e.prototype._updateMinMaxSpan=function(){var n=this._minMaxSpan={},t=this._dataZoomModel,a=this._dataExtent;Yt(["min","max"],function(r){var i=t.get(r+"Span"),o=t.get(r+"ValueSpan");null!=o&&(o=this.getAxisModel().axis.scale.parse(o)),null!=o?i=tt.NU(a[0]+o,a,[0,100],!0):null!=i&&(o=tt.NU(i,[0,100],a,!0)-a[0]),n[r+"Span"]=i,n[r+"ValueSpan"]=o},this)},e.prototype._setAxisModel=function(){var n=this.getAxisModel(),t=this._percentWindow,a=this._valueWindow;if(t){var r=tt.M9(a,[0,500]);r=Math.min(r,20);var i=n.axis.scale.rawExtentInfo;0!==t[0]&&i.setDeterminedMinMax("min",+a[0].toFixed(r)),100!==t[1]&&i.setDeterminedMinMax("max",+a[1].toFixed(r)),i.freeze()}},e}(),ul={getTargetSeries:function(e){function n(r){e.eachComponent("dataZoom",function(i){i.eachTargetAxis(function(o,l){var u=e.getComponent(kt(o),l);r(o,l,u,i)})})}n(function(r,i,o,l){o.__dzAxisProxy=null});var t=[];n(function(r,i,o,l){o.__dzAxisProxy||(o.__dzAxisProxy=new sl(r,i,l,e),t.push(o.__dzAxisProxy))});var a=(0,g.createHashMap)();return(0,g.each)(t,function(r){(0,g.each)(r.getTargetSeriesModels(),function(i){a.set(i.uid,i)})}),a},overallReset:function(e,n){e.eachComponent("dataZoom",function(t){t.eachTargetAxis(function(a,r){t.getAxisProxy(a,r).reset(t)}),t.eachTargetAxis(function(a,r){t.getAxisProxy(a,r).filterData(t,n)})}),e.eachComponent("dataZoom",function(t){var a=t.findRepresentativeAxisProxy();if(a){var r=a.getDataPercentWindow(),i=a.getDataValueWindow();t.setCalculatedRange({start:r[0],end:r[1],startValue:i[0],endValue:i[1]})}})}};var Fn=!1;function pl(e){Fn||(Fn=!0,e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,ul),function cl(e){e.registerAction("dataZoom",function(n,t){var a=function Xs(e,n){var i,t=(0,g.createHashMap)(),a=[],r=(0,g.createHashMap)();e.eachComponent({mainType:"dataZoom",query:n},function(p){r.get(p.uid)||l(p)});do{i=!1,e.eachComponent("dataZoom",o)}while(i);function o(p){!r.get(p.uid)&&function u(p){var d=!1;return p.eachTargetAxis(function(h,f){var v=t.get(h);v&&v[f]&&(d=!0)}),d}(p)&&(l(p),i=!0)}function l(p){r.set(p.uid,!0),a.push(p),function c(p){p.eachTargetAxis(function(d,h){(t.get(d)||t.set(d,[]))[h]=!0})}(p)}return a}(t,n);(0,g.each)(a,function(r){r.setRawRange({start:n.start,end:n.end,startValue:n.startValue,endValue:n.endValue})})})}(e),e.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function fl(e){e.registerComponentModel(qs),e.registerComponentView(al),pl(e)}var dt=function e(){},Vn={};function fe(e,n){Vn[e]=n}function Gn(e){return Vn[e]}const dl=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.type,t}return(0,H.ZT)(n,e),n.prototype.optionUpdated=function(){e.prototype.optionUpdated.apply(this,arguments);var t=this.ecModel;g.each(this.option.feature,function(a,r){var i=Gn(r);i&&(i.getDefaultOption&&(i.defaultOption=i.getDefaultOption(t)),g.merge(a,i.defaultOption))})},n.type="toolbox",n.layoutMode={type:"box",ignoreSize:!0},n.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},n}(le.Z);var Bn=C(4981),Jn=C(8173);const ml=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return(0,H.ZT)(n,e),n.prototype.render=function(t,a,r,i){var o=this.group;if(o.removeAll(),t.get("show")){var l=+t.get("itemSize"),u="vertical"===t.get("orient"),c=t.get("feature")||{},p=this._features||(this._features={}),d=[];g.each(c,function(v,m){d.push(m)}),new Jn.Z(this._featureNames||[],d).add(h).update(h).remove(g.curry(h,null)).execute(),this._featureNames=d,function fs(e,n,t){var a=n.getBoxLayoutParams(),r=n.get("padding"),i={width:t.getWidth(),height:t.getHeight()},o=(0,ft.ME)(a,i,r);(0,ft.BZ)(n.get("orient"),e,n.get("itemGap"),o.width,o.height),(0,ft.p$)(e,a,i,r)}(o,t,r),o.add(xn(o.getBoundingRect(),t)),u||o.eachChild(function(v){var m=v.__title,y=v.ensureState("emphasis"),S=y.textConfig||(y.textConfig={}),b=v.getTextContent(),x=b&&b.ensureState("emphasis");if(x&&!g.isFunction(x)&&m){var _=x.style||(x.style={}),M=Bn.lP(m,xt.ZP.makeFont(_)),D=v.x+o.x,I=!1;v.y+o.y+l+M.height>r.getHeight()&&(S.position="top",I=!0);var Z=I?-5-M.height:l+10;D+M.width/2>r.getWidth()?(S.position=["100%",Z],_.align="right"):D-M.width/2<0&&(S.position=[0,Z],_.align="left")}})}function h(v,m){var _,y=d[v],S=d[m],b=c[y],x=new Tn.Z(b,t,t.ecModel);if(i&&null!=i.newTitle&&i.featureName===y&&(b.title=i.newTitle),y&&!S){if(function gl(e){return 0===e.indexOf("my")}(y))_={onclick:x.option.onclick,featureName:y};else{var M=Gn(y);if(!M)return;_=new M}p[y]=_}else if(!(_=p[S]))return;_.uid=(0,On.Kr)("toolbox-feature"),_.model=x,_.ecModel=a,_.api=r;var D=_ instanceof dt;y||!S?!x.get("show")||D&&_.unusable?D&&_.remove&&_.remove(a,r):(function f(v,m,y){var M,D,S=v.getModel("iconStyle"),b=v.getModel(["emphasis","iconStyle"]),x=m instanceof dt&&m.getIcons?m.getIcons():v.get("icon"),_=v.get("title")||{};g.isString(x)?(M={})[y]=x:M=x,g.isString(_)?(D={})[y]=_:D=_;var w=v.iconPaths={};g.each(M,function(I,Z){var P=At.createIcon(I,{},{x:-l/2,y:-l/2,width:l,height:l});P.setStyle(S.getItemStyle()),P.ensureState("emphasis").style=b.getItemStyle();var L=new xt.ZP({style:{text:D[Z],align:b.get("textAlign"),borderRadius:b.get("textBorderRadius"),padding:b.get("textPadding"),fill:null},ignore:!0});P.setTextContent(L),At.setTooltipConfig({el:P,componentModel:t,itemName:Z,formatterParamsExtra:{title:D[Z]}}),P.__title=D[Z],P.on("mouseover",function(){var k=b.getItemStyle(),J=u?null==t.get("right")&&"right"!==t.get("left")?"right":"left":null==t.get("bottom")&&"bottom"!==t.get("top")?"bottom":"top";L.setStyle({fill:b.get("textFill")||k.fill||k.stroke||"#000",backgroundColor:b.get("textBackgroundColor")}),P.setTextConfig({position:b.get("textPosition")||J}),L.ignore=!t.get("showTitle"),r.enterEmphasis(this)}).on("mouseout",function(){"emphasis"!==v.get(["iconStatus",Z])&&r.leaveEmphasis(this),L.hide()}),("emphasis"===v.get(["iconStatus",Z])?et.fD:et.Mh)(P),o.add(P),P.on("click",g.bind(m.onclick,m,a,r,Z)),w[Z]=P})}(x,_,y),x.setIconStatus=function(w,I){var Z=this.option,P=this.iconPaths;Z.iconStatus=Z.iconStatus||{},Z.iconStatus[w]=I,P[w]&&("emphasis"===I?et.fD:et.Mh)(P[w])},_ instanceof dt&&_.render&&_.render(x,a,r,i)):D&&_.dispose&&_.dispose(a,r)}},n.prototype.updateView=function(t,a,r,i){g.each(this._features,function(o){o instanceof dt&&o.updateView&&o.updateView(o.model,a,r,i)})},n.prototype.remove=function(t,a){g.each(this._features,function(r){r instanceof dt&&r.remove&&r.remove(t,a)}),this.group.removeAll()},n.prototype.dispose=function(t,a){g.each(this._features,function(r){r instanceof dt&&r.dispose&&r.dispose(t,a)})},n.type="toolbox",n}(ce.Z),Sl=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return(0,H.ZT)(n,e),n.prototype.onclick=function(t,a){var r=this.model,i=r.get("name")||t.get("title.0.text")||"echarts",o="svg"===a.getZr().painter.getType(),l=o?"svg":r.get("type",!0)||"png",u=a.getConnectedDataURL({type:l,backgroundColor:r.get("backgroundColor",!0)||t.get("backgroundColor")||"#fff",connectedBackgroundColor:r.get("connectedBackgroundColor"),excludeComponents:r.get("excludeComponents"),pixelRatio:r.get("pixelRatio")}),c=Pn.Z.browser;if((0,g.isFunction)(MouseEvent)&&(c.newEdge||!c.ie&&!c.edge)){var p=document.createElement("a");p.download=i+"."+l,p.target="_blank",p.href=u;var d=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});p.dispatchEvent(d)}else if(window.navigator.msSaveOrOpenBlob||o){var h=u.split(","),f=h[0].indexOf("base64")>-1,v=o?decodeURIComponent(h[1]):h[1];f&&(v=window.atob(v));var m=i+"."+l;if(window.navigator.msSaveOrOpenBlob){for(var y=v.length,S=new Uint8Array(y);y--;)S[y]=v.charCodeAt(y);var b=new Blob([S]);window.navigator.msSaveOrOpenBlob(b,m)}else{var x=document.createElement("iframe");document.body.appendChild(x);var _=x.contentWindow,M=_.document;M.open("image/svg+xml","replace"),M.write(v),M.close(),_.focus(),M.execCommand("SaveAs",!0,m),document.body.removeChild(x)}}else{var D=r.get("lang"),w='<body style="margin:0;"><img src="'+u+'" style="max-width:100%;" title="'+(D&&D[0]||"")+'" /></body>',I=window.open();I.document.write(w),I.document.title=i}},n.getDefaultOption=function(t){return{show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:t.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:t.getLocaleModel().get(["toolbox","saveAsImage","lang"])}},n}(dt);var Ie=C(2235),Hn="__ec_magicType_stack__",bl=[["line","bar"],["stack"]],Tl=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return(0,H.ZT)(n,e),n.prototype.getIcons=function(){var t=this.model,a=t.get("icon"),r={};return g.each(t.get("type"),function(i){a[i]&&(r[i]=a[i])}),r},n.getDefaultOption=function(t){return{show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:t.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}}},n.prototype.onclick=function(t,a,r){var i=this.model,o=i.get(["seriesIndex",r]);if(Qn[r]){var l={series:[]};g.each(bl,function(d){g.indexOf(d,r)>=0&&g.each(d,function(h){i.setIconStatus(h,"normal")})}),i.setIconStatus(r,"emphasis"),t.eachComponent({mainType:"series",query:null==o?null:{seriesIndex:o}},function(d){var v=Qn[r](d.subType,d.id,d,i);v&&(g.defaults(v,d.option),l.series.push(v));var m=d.coordinateSystem;if(m&&"cartesian2d"===m.type&&("line"===r||"bar"===r)){var y=m.getAxesByScale("ordinal")[0];if(y){var b=y.dim+"Axis",_=d.getReferringComponents(b,ot.C6).models[0].componentIndex;l[b]=l[b]||[];for(var M=0;M<=_;M++)l[b][_]=l[b][_]||{};l[b][_].boundaryGap="bar"===r}}});var c,p=r;"stack"===r&&(c=g.merge({stack:i.option.title.tiled,tiled:i.option.title.stack},i.option.title),"emphasis"!==i.get(["iconStatus",r])&&(p="tiled")),a.dispatchAction({type:"changeMagicType",currentType:p,newOption:l,newTitle:c,featureName:"magicType"})}},n}(dt),Qn={line:function(e,n,t,a){if("bar"===e)return g.merge({id:n,type:"line",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},a.get(["option","line"])||{},!0)},bar:function(e,n,t,a){if("line"===e)return g.merge({id:n,type:"bar",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},a.get(["option","bar"])||{},!0)},stack:function(e,n,t,a){var r=t.get("stack")===Hn;if("line"===e||"bar"===e)return a.setIconStatus("stack",r?"normal":"emphasis"),g.merge({id:n,stack:r?"":Hn},a.get(["option","stack"])||{},!0)}};Ie.zl({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(e,n){n.mergeOption(e.newOption)});const xl=Tl;var Wn=C(9520),Ze=new Array(60).join("-");function Al(e){var n=[];return g.each(e,function(t,a){var r=t.categoryAxis,o=t.valueAxis.dim,l=[" "].concat(g.map(t.series,function(f){return f.name})),u=[r.model.getCategories()];g.each(t.series,function(f){var v=f.getRawData();u.push(f.getRawData().mapArray(v.mapDimension(o),function(m){return m}))});for(var c=[l.join("\t")],p=0;p<u[0].length;p++){for(var d=[],h=0;h<u.length;h++)d.push(u[h][p]);c.push(d.join("\t"))}n.push(c.join("\n"))}),n.join("\n\n"+Ze+"\n\n")}function _l(e){return g.map(e,function(n){var t=n.getRawData(),a=[n.name],r=[];return t.each(t.dimensions,function(){for(var i=arguments.length,l=t.getName(arguments[i-1]),u=0;u<i-1;u++)r[u]=arguments[u];a.push((l?l+"\t":"")+r.join("\t"))}),a.join("\n")}).join("\n\n"+Ze+"\n\n")}function Le(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var ca=new RegExp("[\t]+","g");var Il=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return(0,H.ZT)(n,e),n.prototype.onclick=function(t,a){setTimeout(function(){a.dispatchAction({type:"hideTip"})});var r=a.getDom(),i=this.model;this._dom&&r.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",o.style.backgroundColor=i.get("backgroundColor")||"#fff";var l=document.createElement("h4"),u=i.get("lang")||[];l.innerHTML=u[0]||i.get("title"),l.style.cssText="margin:10px 20px",l.style.color=i.get("textColor");var c=document.createElement("div"),p=document.createElement("textarea");c.style.cssText="overflow:auto";var d=i.get("optionToContent"),h=i.get("contentToOption"),f=function Dl(e){var n=function Cl(e){var n={},t=[],a=[];return e.eachRawSeries(function(r){var i=r.coordinateSystem;if(!i||"cartesian2d"!==i.type&&"polar"!==i.type)t.push(r);else{var o=i.getBaseAxis();if("category"===o.type){var l=o.dim+"_"+o.index;n[l]||(n[l]={categoryAxis:o,valueAxis:i.getOtherAxis(o),series:[]},a.push({axisDim:o.dim,axisIndex:o.index})),n[l].series.push(r)}else t.push(r)}}),{seriesGroupByCategoryAxis:n,other:t,meta:a}}(e);return{value:g.filter([Al(n.seriesGroupByCategoryAxis),_l(n.other)],function(t){return!!t.replace(/[\n\t\s]/g,"")}).join("\n\n"+Ze+"\n\n"),meta:n.meta}}(t);if(g.isFunction(d)){var v=d(a.getOption());g.isString(v)?c.innerHTML=v:g.isDom(v)&&c.appendChild(v)}else{p.readOnly=i.get("readOnly");var m=p.style;m.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",m.color=i.get("textColor"),m.borderColor=i.get("textareaBorderColor"),m.backgroundColor=i.get("textareaColor"),p.value=f.value,c.appendChild(p)}var y=f.meta,S=document.createElement("div");S.style.cssText="position:absolute;bottom:5px;left:0;right:0";var b="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",x=document.createElement("div"),_=document.createElement("div");b+=";background-color:"+i.get("buttonColor"),b+=";color:"+i.get("buttonTextColor");var M=this;function D(){r.removeChild(o),M._dom=null}(0,Wn.Oo)(x,"click",D),(0,Wn.Oo)(_,"click",function(){if(null==h&&null!=d||null!=h&&null==d)D();else{var w;try{w=g.isFunction(h)?h(c,a.getOption()):function Pl(e,n){var t=e.split(new RegExp("\n*"+Ze+"\n*","g")),a={series:[]};return g.each(t,function(r,i){if(function Ol(e){if(e.slice(0,e.indexOf("\n")).indexOf("\t")>=0)return!0}(r)){var o=function Ml(e){for(var n=e.split(/\n+/g),t=Le(n.shift()).split(ca),a=[],r=g.map(t,function(u){return{name:u,data:[]}}),i=0;i<n.length;i++){var o=Le(n[i]).split(ca);a.push(o.shift());for(var l=0;l<o.length;l++)r[l]&&(r[l].data[i]=o[l])}return{series:r,categories:a}}(r),l=n[i],u=l.axisDim+"Axis";l&&(a[u]=a[u]||[],a[u][l.axisIndex]={data:o.categories},a.series=a.series.concat(o.series))}else o=function wl(e){for(var n=e.split(/\n+/g),t=Le(n.shift()),a=[],r=0;r<n.length;r++){var i=Le(n[r]);if(i){var o=i.split(ca),l="",u=void 0,c=!1;isNaN(o[0])?(c=!0,l=o[0],o=o.slice(1),a[r]={name:l,value:[]},u=a[r].value):u=a[r]=[];for(var p=0;p<o.length;p++)u.push(+o[p]);1===u.length&&(c?a[r].value=u[0]:a[r]=u[0])}}return{name:t,data:a}}(r),a.series.push(o)}),a}(p.value,y)}catch(I){throw D(),new Error("Data view format error "+I)}w&&a.dispatchAction({type:"changeDataView",newOption:w}),D()}}),x.innerHTML=u[1],_.innerHTML=u[2],_.style.cssText=x.style.cssText=b,!i.get("readOnly")&&S.appendChild(_),S.appendChild(x),o.appendChild(l),o.appendChild(c),o.appendChild(S),c.style.height=r.clientHeight-80+"px",r.appendChild(o),this._dom=o},n.prototype.remove=function(t,a){this._dom&&a.getDom().removeChild(this._dom)},n.prototype.dispose=function(t,a){this.remove(t,a)},n.getDefaultOption=function(t){return{show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:t.getLocaleModel().get(["toolbox","dataView","title"]),lang:t.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"}},n}(dt);function Zl(e,n){return g.map(e,function(t,a){var r=n&&n[a];if(g.isObject(r)&&!g.isArray(r)){g.isObject(t)&&!g.isArray(t)||(t={value:t});var o=null!=r.name&&null==t.name;return t=g.defaults(t,r),o&&delete t.name,t}return t})}Ie.zl({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(e,n){var t=[];g.each(e.newOption.series,function(a){var r=n.getSeriesByName(a.name)[0];if(r){var i=r.get("data");t.push({name:a.name,data:Zl(a.data,i)})}else t.push(g.extend({type:"scatter"},a))}),n.mergeOption(g.defaults({series:t},e.newOption))});const Ll=Il;var jn=g.each,Yn=(0,ot.Yf)();function pa(e){var n=Yn(e);return n.snapshots||(n.snapshots=[{}]),n.snapshots}var Rl=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return(0,H.ZT)(n,e),n.prototype.onclick=function(t,a){(function zl(e){Yn(e).snapshots=null})(t),a.dispatchAction({type:"restore",from:this.uid})},n.getDefaultOption=function(t){return{show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:t.getLocaleModel().get(["toolbox","restore","title"])}},n}(dt);Ie.zl({type:"restore",event:"restore",update:"prepareAndUpdate"},function(e,n){n.resetOption("recreate")});const El=Rl;var Fl=C(7481),Vl=C(9213),Xn="\0_ec_interaction_mutex";function fa(e){return e[Xn]||(e[Xn]={})}Ie.zl({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},g.noop);var zt=!0,he=Math.min,$t=Math.max,Jl=Math.pow,Hl=1e4,Ql=6,Wl=6,$n="globalPan",jl={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},Yl={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},Kn={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},Xl=0,$l=function(e){function n(t){var a=e.call(this)||this;return a._track=[],a._covers=[],a._handlers={},a._zr=t,a.group=new Ct.Z,a._uid="brushController_"+Xl++,(0,g.each)(ru,function(r,i){this._handlers[i]=(0,g.bind)(r,this)},a),a}return(0,H.ZT)(n,e),n.prototype.enableBrush=function(t){return this._brushType&&this._doDisableBrush(),t.brushType&&this._doEnableBrush(t),this},n.prototype._doEnableBrush=function(t){var a=this._zr;this._enableGlobalPan||function Gl(e,n,t){fa(e)[n]=t}(a,$n,this._uid),(0,g.each)(this._handlers,function(r,i){a.on(i,r)}),this._brushType=t.brushType,this._brushOption=(0,g.merge)((0,g.clone)(Kn),t,!0)},n.prototype._doDisableBrush=function(){var t=this._zr;(function Bl(e,n,t){var a=fa(e);a[n]===t&&(a[n]=null)})(t,$n,this._uid),(0,g.each)(this._handlers,function(a,r){t.off(r,a)}),this._brushType=this._brushOption=null},n.prototype.setPanels=function(t){if(t&&t.length){var a=this._panels={};(0,g.each)(t,function(r){a[r.panelId]=(0,g.clone)(r)})}else this._panels=null;return this},n.prototype.mount=function(t){this._enableGlobalPan=(t=t||{}).enableGlobalPan;var a=this.group;return this._zr.add(a),a.attr({x:t.x||0,y:t.y||0,rotation:t.rotation||0,scaleX:t.scaleX||1,scaleY:t.scaleY||1}),this._transform=a.getLocalTransform(),this},n.prototype.updateCovers=function(t){t=(0,g.map)(t,function(h){return(0,g.merge)((0,g.clone)(Kn),h,!0)});var r=this._covers,i=this._covers=[],o=this,l=this._creatingCover;return new Jn.Z(r,t,function c(h,f){return u(h.__brushOption,f)},u).add(p).update(p).remove(function d(h){r[h]!==l&&o.group.remove(r[h])}).execute(),this;function u(h,f){return(null!=h.id?h.id:"\0-brush-index-"+f)+"-"+h.brushType}function p(h,f){var v=t[h];if(null!=f&&r[f]===l)i[h]=r[f];else{var m=i[h]=null!=f?(r[f].__brushOption=v,r[f]):tr(o,qn(o,v));ha(o,m)}}},n.prototype.unmount=function(){return this.enableBrush(!1),ga(this),this._zr.remove(this.group),this},n.prototype.dispose=function(){this.unmount(),this.off()},n}(Fl.Z);function qn(e,n){var t=Ne[n.brushType].createCover(e,n);return t.__brushOption=n,ar(t,n),e.group.add(t),t}function tr(e,n){var t=da(n);return t.endCreating&&(t.endCreating(e,n),ar(n,n.__brushOption)),n}function er(e,n){var t=n.__brushOption;da(n).updateCoverShape(e,n,t.range,t)}function ar(e,n){var t=n.z;null==t&&(t=Hl),e.traverse(function(a){a.z=t,a.z2=t})}function ha(e,n){da(n).updateCommon(e,n),er(e,n)}function da(e){return Ne[e.__brushOption.brushType]}function va(e,n,t){var a=e._panels;if(!a)return zt;var r,i=e._transform;return(0,g.each)(a,function(o){o.isTargetByCursor(n,t,i)&&(r=o)}),r}function nr(e,n){var t=e._panels;if(!t)return zt;var a=n.__brushOption.panelId;return null!=a?t[a]:zt}function ga(e){var n=e._covers,t=n.length;return(0,g.each)(n,function(a){e.group.remove(a)},e),n.length=0,!!t}function Ut(e,n){var t=(0,g.map)(e._covers,function(a){var r=a.__brushOption,i=(0,g.clone)(r.range);return{brushType:r.brushType,panelId:r.panelId,range:i}});e.trigger("brush",{areas:t,isEnd:!!n.isEnd,removeOnClick:!!n.removeOnClick})}function rr(e){var n=e.length-1;return n<0&&(n=0),[e[0],e[n]]}function ir(e,n,t,a){var r=new Ct.Z;return r.add(new ue.Z({name:"main",style:ya(t),silent:!0,draggable:!0,cursor:"move",drift:(0,g.curry)(lr,e,n,r,["n","s","w","e"]),ondragend:(0,g.curry)(Ut,n,{isEnd:!0})})),(0,g.each)(a,function(i){r.add(new ue.Z({name:i.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:(0,g.curry)(lr,e,n,r,i),ondragend:(0,g.curry)(Ut,n,{isEnd:!0})}))}),r}function or(e,n,t,a){var r=a.brushStyle.lineWidth||0,i=$t(r,Wl),o=t[0][0],l=t[1][0],u=o-r/2,c=l-r/2,p=t[0][1],d=t[1][1],h=p-i+r/2,f=d-i+r/2,v=p-o,m=d-l,y=v+r,S=m+r;_t(e,n,"main",o,l,v,m),a.transformable&&(_t(e,n,"w",u,c,i,S),_t(e,n,"e",h,c,i,S),_t(e,n,"n",u,c,y,i),_t(e,n,"s",u,f,y,i),_t(e,n,"nw",u,c,i,i),_t(e,n,"ne",h,c,i,i),_t(e,n,"sw",u,f,i,i),_t(e,n,"se",h,f,i,i))}function ma(e,n){var t=n.__brushOption,a=t.transformable,r=n.childAt(0);r.useStyle(ya(t)),r.attr({silent:!a,cursor:a?"move":"default"}),(0,g.each)([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(i){var o=n.childOfName(i.join("")),l=1===i.length?Sa(e,i[0]):function tu(e,n){var t=[Sa(e,n[0]),Sa(e,n[1])];return("e"===t[0]||"w"===t[0])&&t.reverse(),t.join("")}(e,i);o&&o.attr({silent:!a,invisible:!a,cursor:a?Yl[l]+"-resize":null})})}function _t(e,n,t,a,r,i,o){var l=n.childOfName(t);l&&l.setShape(function au(e){var n=he(e[0][0],e[1][0]),t=he(e[0][1],e[1][1]);return{x:n,y:t,width:$t(e[0][0],e[1][0])-n,height:$t(e[0][1],e[1][1])-t}}(ba(e,n,[[a,r],[a+i,r+o]])))}function ya(e){return(0,g.defaults)({strokeNoScale:!0},e.brushStyle)}function sr(e,n,t,a){var r=[he(e,t),he(n,a)],i=[$t(e,t),$t(n,a)];return[[r[0],i[0]],[r[1],i[1]]]}function Sa(e,n){var r=At.transformDirection({w:"left",e:"right",n:"top",s:"bottom"}[n],function ql(e){return At.getTransform(e.group)}(e));return{left:"w",right:"e",top:"n",bottom:"s"}[r]}function lr(e,n,t,a,r,i){var o=t.__brushOption,l=e.toRectRange(o.range),u=ur(n,r,i);(0,g.each)(a,function(c){var p=jl[c];l[p[0]][p[1]]+=u[p[0]]}),o.range=e.fromRectRange(sr(l[0][0],l[1][0],l[0][1],l[1][1])),ha(n,t),Ut(n,{isEnd:!1})}function eu(e,n,t,a){var r=n.__brushOption.range,i=ur(e,t,a);(0,g.each)(r,function(o){o[0]+=i[0],o[1]+=i[1]}),ha(e,n),Ut(e,{isEnd:!1})}function ur(e,n,t){var a=e.group,r=a.transformCoordToLocal(n,t),i=a.transformCoordToLocal(0,0);return[r[0]-i[0],r[1]-i[1]]}function ba(e,n,t){var a=nr(e,n);return a&&a!==zt?a.clipPath(t,e._transform):(0,g.clone)(t)}function Ta(e){var n=e.event;n.preventDefault&&n.preventDefault()}function xa(e,n,t){return e.childOfName("main").contain(n,t)}function cr(e,n,t,a){var l,r=e._creatingCover,i=e._creatingPanel,o=e._brushOption;if(e._track.push(t.slice()),function Kl(e){var n=e._track;if(!n.length)return!1;var t=n[n.length-1],a=n[0],r=t[0]-a[0],i=t[1]-a[1];return Jl(r*r+i*i,.5)>Ql}(e)||r){if(i&&!r){"single"===o.brushMode&&ga(e);var u=(0,g.clone)(o);u.brushType=pr(u.brushType,i),u.panelId=i===zt?null:i.panelId,r=e._creatingCover=qn(e,u),e._covers.push(r)}if(r){var c=Ne[pr(e._brushType,i)];r.__brushOption.range=c.getCreatingRange(ba(e,r,e._track)),a&&(tr(e,r),c.updateCommon(e,r)),er(e,r),l={isEnd:a}}}else a&&"single"===o.brushMode&&o.removeOnClick&&va(e,n,t)&&ga(e)&&(l={isEnd:a,removeOnClick:!0});return l}function pr(e,n){return"auto"===e?n.defaultBrushType:e}var ru={mousedown:function(e){if(this._dragging)fr(this,e);else if(!e.target||!e.target.draggable){Ta(e);var n=this.group.transformCoordToLocal(e.offsetX,e.offsetY);this._creatingCover=null,(this._creatingPanel=va(this,e,n))&&(this._dragging=!0,this._track=[n.slice()])}},mousemove:function(e){var a=this.group.transformCoordToLocal(e.offsetX,e.offsetY);if(function nu(e,n,t){if(e._brushType&&!function iu(e,n,t){var a=e._zr;return n<0||n>a.getWidth()||t<0||t>a.getHeight()}(e,n.offsetX,n.offsetY)){var a=e._zr,r=e._covers,i=va(e,n,t);if(!e._dragging)for(var o=0;o<r.length;o++){var l=r[o].__brushOption;if(i&&(i===zt||l.panelId===i.panelId)&&Ne[l.brushType].contain(r[o],t[0],t[1]))return}i&&a.setCursorStyle("crosshair")}}(this,e,a),this._dragging){Ta(e);var r=cr(this,e,a,!1);r&&Ut(this,r)}},mouseup:function(e){fr(this,e)}};function fr(e,n){if(e._dragging){Ta(n);var r=e.group.transformCoordToLocal(n.offsetX,n.offsetY),i=cr(e,n,r,!0);e._dragging=!1,e._track=[],e._creatingCover=null,i&&Ut(e,i)}}var Ne={lineX:hr(0),lineY:hr(1),rect:{createCover:function(e,n){function t(a){return a}return ir({toRectRange:t,fromRectRange:t},e,n,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(e){var n=rr(e);return sr(n[1][0],n[1][1],n[0][0],n[0][1])},updateCoverShape:function(e,n,t,a){or(e,n,t,a)},updateCommon:ma,contain:xa},polygon:{createCover:function(e,n){var t=new Ct.Z;return t.add(new qa.Z({name:"main",style:ya(n),silent:!0})),t},getCreatingRange:function(e){return e},endCreating:function(e,n){n.remove(n.childAt(0)),n.add(new Vl.Z({name:"main",draggable:!0,drift:(0,g.curry)(eu,e,n),ondragend:(0,g.curry)(Ut,e,{isEnd:!0})}))},updateCoverShape:function(e,n,t,a){n.childAt(0).setShape({points:ba(e,n,t)})},updateCommon:ma,contain:xa}};function hr(e){return{createCover:function(n,t){return ir({toRectRange:function(a){var r=[a,[0,100]];return e&&r.reverse(),r},fromRectRange:function(a){return a[e]}},n,t,[[["w"],["e"]],[["n"],["s"]]][e])},getCreatingRange:function(n){var t=rr(n);return[he(t[0][e],t[1][e]),$t(t[0][e],t[1][e])]},updateCoverShape:function(n,t,a,r){var i,o=nr(n,t);if(o!==zt&&o.getLinearBrushOtherExtent)i=o.getLinearBrushOtherExtent(e);else{var l=n._zr;i=[0,[l.getWidth(),l.getHeight()][1-e]]}var u=[a,i];e&&u.reverse(),or(n,t,u,r)},updateCommon:ma,contain:xa}}const ou=$l;var su=C(3066),lu={axisPointer:1,tooltip:1,brush:1};function cu(e){return e=Ca(e),function(n){return At.clipPointsByRect(n,e)}}function pu(e,n){return e=Ca(e),function(t){var a=null!=n?n:t,i=a?e.x:e.y;return[i,i+((a?e.width:e.height)||0)]}}function fu(e,n,t){var a=Ca(e);return function(r,i){return a.contain(i[0],i[1])&&!function uu(e,n,t){var a=n.getComponentByElement(e.topTarget),r=a&&a.coordinateSystem;return a&&a!==t&&!lu.hasOwnProperty(a.mainType)&&r&&r.model!==t}(r,n,t)}}function Ca(e){return su.Z.create(e)}var hu=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],du=function(){function e(n,t,a){var r=this;this._targetInfoList=[];var i=dr(t,n);(0,g.each)(vu,function(o,l){(!a||!a.include||(0,g.indexOf)(a.include,l)>=0)&&o(i,r._targetInfoList)})}return e.prototype.setOutputRanges=function(n,t){return this.matchOutputRanges(n,t,function(a,r,i){if((a.coordRanges||(a.coordRanges=[])).push(r),!a.coordRange){a.coordRange=r;var o=_a[a.brushType](0,i,r);a.__rangeOffset={offset:yr[a.brushType](o.values,a.range,[1,1]),xyMinMax:o.xyMinMax}}}),n},e.prototype.matchOutputRanges=function(n,t,a){(0,g.each)(n,function(r){var i=this.findTargetInfo(r,t);i&&!0!==i&&(0,g.each)(i.coordSyses,function(o){var l=_a[r.brushType](1,o,r.range,!0);a(r,l.values,o,t)})},this)},e.prototype.setInputRanges=function(n,t){(0,g.each)(n,function(a){var r=this.findTargetInfo(a,t);if(a.range=a.range||[],r&&!0!==r){a.panelId=r.panelId;var i=_a[a.brushType](0,r.coordSys,a.coordRange),o=a.__rangeOffset;a.range=o?yr[a.brushType](i.values,o.offset,function gu(e,n){var t=br(e),a=br(n),r=[t[0]/a[0],t[1]/a[1]];return isNaN(r[0])&&(r[0]=1),isNaN(r[1])&&(r[1]=1),r}(i.xyMinMax,o.xyMinMax)):i.values}},this)},e.prototype.makePanelOpts=function(n,t){return(0,g.map)(this._targetInfoList,function(a){var r=a.getPanelRect();return{panelId:a.panelId,defaultBrushType:t?t(a):null,clipPath:cu(r),isTargetByCursor:fu(r,n,a.coordSysModel),getLinearBrushOtherExtent:pu(r)}})},e.prototype.controlSeries=function(n,t,a){var r=this.findTargetInfo(n,a);return!0===r||r&&(0,g.indexOf)(r.coordSyses,t.coordinateSystem)>=0},e.prototype.findTargetInfo=function(n,t){for(var a=this._targetInfoList,r=dr(t,n),i=0;i<a.length;i++){var o=a[i],l=n.panelId;if(l){if(o.panelId===l)return o}else for(var u=0;u<vr.length;u++)if(vr[u](r,o))return o}return!0},e}();function Aa(e){return e[0]>e[1]&&e.reverse(),e}function dr(e,n){return(0,ot.pm)(e,n,{includeMainTypes:hu})}var vu={grid:function(e,n){var t=e.xAxisModels,a=e.yAxisModels,r=e.gridModels,i=(0,g.createHashMap)(),o={},l={};!t&&!a&&!r||((0,g.each)(t,function(u){var c=u.axis.grid.model;i.set(c.id,c),o[c.id]=!0}),(0,g.each)(a,function(u){var c=u.axis.grid.model;i.set(c.id,c),l[c.id]=!0}),(0,g.each)(r,function(u){i.set(u.id,u),o[u.id]=!0,l[u.id]=!0}),i.each(function(u){var p=[];(0,g.each)(u.coordinateSystem.getCartesians(),function(d,h){((0,g.indexOf)(t,d.getAxis("x").model)>=0||(0,g.indexOf)(a,d.getAxis("y").model)>=0)&&p.push(d)}),n.push({panelId:"grid--"+u.id,gridModel:u,coordSysModel:u,coordSys:p[0],coordSyses:p,getPanelRect:gr.grid,xAxisDeclared:o[u.id],yAxisDeclared:l[u.id]})}))},geo:function(e,n){(0,g.each)(e.geoModels,function(t){var a=t.coordinateSystem;n.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:a,coordSyses:[a],getPanelRect:gr.geo})})}},vr=[function(e,n){var t=e.xAxisModel,a=e.yAxisModel,r=e.gridModel;return!r&&t&&(r=t.axis.grid.model),!r&&a&&(r=a.axis.grid.model),r&&r===n.gridModel},function(e,n){var t=e.geoModel;return t&&t===n.geoModel}],gr={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var e=this.coordSys,n=e.getBoundingRect().clone();return n.applyTransform(At.getTransform(e)),n}},_a={lineX:(0,g.curry)(mr,0),lineY:(0,g.curry)(mr,1),rect:function(e,n,t,a){var r=e?n.pointToData([t[0][0],t[1][0]],a):n.dataToPoint([t[0][0],t[1][0]],a),i=e?n.pointToData([t[0][1],t[1][1]],a):n.dataToPoint([t[0][1],t[1][1]],a),o=[Aa([r[0],i[0]]),Aa([r[1],i[1]])];return{values:o,xyMinMax:o}},polygon:function(e,n,t,a){var r=[[1/0,-1/0],[1/0,-1/0]];return{values:(0,g.map)(t,function(o){var l=e?n.pointToData(o,a):n.dataToPoint(o,a);return r[0][0]=Math.min(r[0][0],l[0]),r[1][0]=Math.min(r[1][0],l[1]),r[0][1]=Math.max(r[0][1],l[0]),r[1][1]=Math.max(r[1][1],l[1]),l}),xyMinMax:r}}};function mr(e,n,t,a){var r=t.getAxis(["x","y"][e]),i=Aa((0,g.map)([0,1],function(l){return n?r.coordToData(r.toLocalCoord(a[l]),!0):r.toGlobalCoord(r.dataToCoord(a[l]))})),o=[];return o[e]=i,o[1-e]=[NaN,NaN],{values:i,xyMinMax:o}}var yr={lineX:(0,g.curry)(Sr,0),lineY:(0,g.curry)(Sr,1),rect:function(e,n,t){return[[e[0][0]-t[0]*n[0][0],e[0][1]-t[0]*n[0][1]],[e[1][0]-t[1]*n[1][0],e[1][1]-t[1]*n[1][1]]]},polygon:function(e,n,t){return(0,g.map)(e,function(a,r){return[a[0]-t[0]*n[r][0],a[1]-t[1]*n[r][1]]})}};function Sr(e,n,t,a){return[n[0]-a[e]*t[0],n[1]-a[e]*t[1]]}function br(e){return e?[e[0][1]-e[0][0],e[1][1]-e[1][0]]:[NaN,NaN]}const Tr=du;var mu=C(6374),Da=g.each,yu=(0,ot.g0)("toolbox-dataZoom_"),Su=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return(0,H.ZT)(n,e),n.prototype.render=function(t,a,r,i){this._brushController||(this._brushController=new ou(r.getZr()),this._brushController.on("brush",g.bind(this._onBrush,this)).mount()),function xu(e,n,t,a,r){var i=t._isZoomActive;a&&"takeGlobalCursor"===a.type&&(i="dataZoomSelect"===a.key&&a.dataZoomSelectActive),t._isZoomActive=i,e.setIconStatus("zoom",i?"emphasis":"normal");var l=new Tr(Oa(e),n,{include:["grid"]}).makePanelOpts(r,function(u){return u.xAxisDeclared&&!u.yAxisDeclared?"lineX":!u.xAxisDeclared&&u.yAxisDeclared?"lineY":"rect"});t._brushController.setPanels(l).enableBrush(!(!i||!l.length)&&{brushType:"auto",brushStyle:e.getModel("brushStyle").getItemStyle()})}(t,a,this,i,r),function Tu(e,n){e.setIconStatus("back",function Ul(e){return pa(e).length}(n)>1?"emphasis":"normal")}(t,a)},n.prototype.onclick=function(t,a,r){bu[r].call(this)},n.prototype.remove=function(t,a){this._brushController&&this._brushController.unmount()},n.prototype.dispose=function(t,a){this._brushController&&this._brushController.dispose()},n.prototype._onBrush=function(t){var a=t.areas;if(t.isEnd&&a.length){var r={},i=this.ecModel;this._brushController.updateCovers([]),new Tr(Oa(this.model),i,{include:["grid"]}).matchOutputRanges(a,i,function(c,p,d){if("cartesian2d"===d.type){var h=c.brushType;"rect"===h?(l("x",d,p[0]),l("y",d,p[1])):l({lineX:"x",lineY:"y"}[h],d,p)}}),function Nl(e,n){var t=pa(e);jn(n,function(a,r){for(var i=t.length-1;i>=0&&!t[i][r];i--);if(i<0){var l=e.queryComponents({mainType:"dataZoom",subType:"select",id:r})[0];if(l){var u=l.getPercentRange();t[0][r]={dataZoomId:r,start:u[0],end:u[1]}}}}),t.push(n)}(i,r),this._dispatchZoomAction(r)}function l(c,p,d){var h=p.getAxis(c),f=h.model,v=function u(c,p,d){var h;return d.eachComponent({mainType:"dataZoom",subType:"select"},function(f){f.getAxisModel(c,p.componentIndex)&&(h=f)}),h}(c,f,i),m=v.findRepresentativeAxisProxy(f).getMinMaxSpan();(null!=m.minValueSpan||null!=m.maxValueSpan)&&(d=Rn(0,d.slice(),h.scale.getExtent(),0,m.minValueSpan,m.maxValueSpan)),v&&(r[v.id]={dataZoomId:v.id,startValue:d[0],endValue:d[1]})}},n.prototype._dispatchZoomAction=function(t){var a=[];Da(t,function(r,i){a.push(g.clone(r))}),a.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:a})},n.getDefaultOption=function(t){return{show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:t.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}}},n}(dt),bu={zoom:function(){this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!this._isZoomActive})},back:function(){this._dispatchZoomAction(function kl(e){var n=pa(e),t=n[n.length-1];n.length>1&&n.pop();var a={};return jn(t,function(r,i){for(var o=n.length-1;o>=0;o--)if(r=n[o][i]){a[i]=r;break}}),a}(this.ecModel))}};function Oa(e){var n={xAxisIndex:e.get("xAxisIndex",!0),yAxisIndex:e.get("yAxisIndex",!0),xAxisId:e.get("xAxisId",!0),yAxisId:e.get("yAxisId",!0)};return null==n.xAxisIndex&&null==n.xAxisId&&(n.xAxisIndex="all"),null==n.yAxisIndex&&null==n.yAxisId&&(n.yAxisIndex="all"),n}(0,mu.f)("dataZoom",function(e){var n=e.getComponent("toolbox",0),t=["feature","dataZoom"];if(n&&null!=n.get(t)){var a=n.getModel(t),r=[],i=Oa(a),o=(0,ot.pm)(e,i);return Da(o.xAxisModels,function(u){return l(u,"xAxis","xAxisIndex")}),Da(o.yAxisModels,function(u){return l(u,"yAxis","yAxisIndex")}),r}function l(u,c,p){var d=u.componentIndex,h={type:"select",$fromToolbox:!0,filterMode:a.get("filterMode",!0)||"filter",id:yu+c+d};h[p]=d,r.push(h)}});const Cu=Su;var G=C(2315),_u=C(6094),Ma=Math.sin,wa=Math.cos,xr=Math.PI,Rt=2*Math.PI,Du=180/xr;const Cr=function(){function e(){}return e.prototype.reset=function(n){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,n||4)},e.prototype.moveTo=function(n,t){this._add("M",n,t)},e.prototype.lineTo=function(n,t){this._add("L",n,t)},e.prototype.bezierCurveTo=function(n,t,a,r,i,o){this._add("C",n,t,a,r,i,o)},e.prototype.quadraticCurveTo=function(n,t,a,r){this._add("Q",n,t,a,r)},e.prototype.arc=function(n,t,a,r,i,o){this.ellipse(n,t,a,a,0,r,i,o)},e.prototype.ellipse=function(n,t,a,r,i,o,l,u){var v,c=l-o,p=!u,d=Math.abs(c),h=(0,G.zT)(d-Rt)||(p?c>=Rt:-c>=Rt),f=c>0?c%Rt:c%Rt+Rt;v=!!h||!(0,G.zT)(d)&&f>=xr==!!p;var m=n+a*wa(o),y=t+r*Ma(o);this._start&&this._add("M",m,y);var S=Math.round(i*Du);if(h){var b=1/this._p,x=(p?1:-1)*(Rt-b);this._add("A",a,r,S,1,+p,n+a*wa(o+x),t+r*Ma(o+x)),b>.01&&this._add("A",a,r,S,0,+p,m,y)}else{var _=n+a*wa(l),M=t+r*Ma(l);this._add("A",a,r,S,+v,+p,_,M)}},e.prototype.rect=function(n,t,a,r){this._add("M",n,t),this._add("l",a,0),this._add("l",0,r),this._add("l",-a,0),this._add("Z")},e.prototype.closePath=function(){this._d.length>0&&this._add("Z")},e.prototype._add=function(n,t,a,r,i,o,l,u,c){for(var p=[],d=this._p,h=1;h<arguments.length;h++){var f=arguments[h];if(isNaN(f))return void(this._invalid=!0);p.push(Math.round(f*d)/d)}this._d.push(n+p.join(" ")),this._start="Z"===n},e.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},e.prototype.getStr=function(){return this._str},e}();var Mu=C(720),de="none",wu=Math.round,Pa=["lineCap","miterLimit","lineJoin"],Zu=(0,g.map)(Pa,function(e){return"stroke-"+e.toLowerCase()});var Nu=C(9626),Ar="http://www.w3.org/2000/svg",_r="http://www.w3.org/1999/xlink",ku="http://www.w3.org/2000/xmlns/",zu="http://www.w3.org/XML/1998/namespace";function Dr(e){return document.createElementNS(Ar,e)}function rt(e,n,t,a,r){return{tag:e,attrs:t||{},children:a,text:r,key:n}}function Ia(e,n){var t=(n=n||{}).newline?"\n":"";return function a(r){var i=r.children,o=r.tag,u=r.text;return function Uu(e,n){var t=[];if(n)for(var a in n){var r=n[a],i=a;!1!==r&&(!0!==r&&null!=r&&(i+='="'+r+'"'),t.push(i))}return"<"+e+" "+t.join(" ")+">"}(o,r.attrs)+("style"!==o?(0,Nu.F1)(u):u||"")+(i?""+t+(0,g.map)(i,function(c){return a(c)}).join(t)+t:"")+function Ru(e){return"</"+e+">"}(o)}(e)}function Za(e){return{zrId:e,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssClassIdx:0,cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function Or(e,n,t,a){return rt("svg","root",{width:e,height:n,xmlns:Ar,"xmlns:xlink":_r,version:"1.1",baseProfile:"full",viewBox:!!a&&"0 0 "+e+" "+n},t)}var Fu=C(2823),Vu=C(2353),Gu=C(50),Bu=C(1861),Mr={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},Et="transform-origin";function Ju(e,n,t){var a=(0,g.extend)({},e.shape);(0,g.extend)(a,n),e.buildPath(t,a);var r=new Cr;return r.reset((0,G.Gk)(e)),t.rebuildPath(r,1),r.generateStr(),r.getStr()}function Hu(e,n){var t=n.originX,a=n.originY;(t||a)&&(e[Et]=t+"px "+a+"px")}var Qu={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function wr(e,n){var t=n.zrId+"-ani-"+n.cssAnimIdx++;return n.cssAnims[t]=e,t}function Pr(e){return(0,g.isString)(e)?Mr[e]?"cubic-bezier("+Mr[e]+")":(0,Bu.H)(e)?e:"":""}function ke(e,n,t,a){var r=e.animators,i=r.length,o=[];if(e instanceof Gu.Z){var l=function Wu(e,n,t){var i,o,r={};if((0,g.each)(e.shape.paths,function(u){var c=Za(t.zrId);c.animation=!0,ke(u,{},c,!0);var p=c.cssAnims,d=c.cssNodes,h=(0,g.keys)(p),f=h.length;if(f){var v=p[o=h[f-1]];for(var m in v){var y=v[m];r[m]=r[m]||{d:""},r[m].d+=y.d||""}for(var S in d){var b=d[S].animation;b.indexOf(o)>=0&&(i=b)}}}),i){n.d=!1;var l=wr(r,t);return i.replace(o,l)}}(e,n,t);if(l)o.push(l);else if(!i)return}else if(!i)return;for(var u={},c=0;c<i;c++){var p=r[c],d=[p.getMaxTime()/1e3+"s"],h=Pr(p.getClip().easing),f=p.getDelay();d.push(h||"linear"),f&&d.push(f/1e3+"s"),p.getLoop()&&d.push("infinite");var v=d.join(" ");u[v]=u[v]||[v,[]],u[v][1].push(p)}function m(b){var x=b[1],_=x.length,M={},D={},w={},I="animation-timing-function";function Z(vt,It,qt){for(var Vt=vt.getTracks(),Ue=vt.getMaxTime(),te=0;te<Vt.length;te++){var ee=Vt[te];if(ee.needsAnimate()){var Zt=ee.keyframes,gt=ee.propName;if(qt&&(gt=qt(gt)),gt)for(var Dt=0;Dt<Zt.length;Dt++){var ae=Zt[Dt],mt=Math.round(ae.time/Ue*100)+"%",Re=Pr(ae.easing),Lt=ae.rawValue;((0,g.isString)(Lt)||(0,g.isNumber)(Lt))&&(It[mt]=It[mt]||{},It[mt][gt]=ae.rawValue,Re&&(It[mt][I]=Re))}}}}for(var P=0;P<_;P++)(L=(R=x[P]).targetName)?"shape"===L&&Z(R,D):!a&&Z(R,M);for(var k in M){var J={};(0,Vu.kY)(J,e),(0,g.extend)(J,M[k]);var X=(0,G.gA)(J),j=M[k][I];w[k]=X?{transform:X}:{},Hu(w[k],J),j&&(w[k][I]=j)}var it,Y=!0;for(var k in D){w[k]=w[k]||{};var W=!it;j=D[k][I],W&&(it=new fn.Z);var ut=it.len();it.reset(),w[k].d=Ju(e,D[k],it);var ct=it.len();if(!W&&ut!==ct){Y=!1;break}j&&(w[k][I]=j)}if(!Y)for(var k in w)delete w[k].d;if(!a)for(P=0;P<_;P++){var R,L;"style"===(L=(R=x[P]).targetName)&&Z(R,w,function(Vt){return Qu[Vt]})}var at,$=(0,g.keys)(w),K=!0;for(P=1;P<$.length;P++){var ht=$[P-1];if(w[ht][Et]!==w[$[P]][Et]){K=!1;break}at=w[ht][Et]}if(K&&at){for(var k in w)w[k][Et]&&delete w[k][Et];n[Et]=at}if((0,g.filter)($,function(vt){return(0,g.keys)(w[vt]).length>0}).length)return wr(w,t)+" "+b[0]+" both"}for(var y in u)(l=m(u[y]))&&o.push(l);if(o.length){var S=t.zrId+"-cls-"+t.cssClassIdx++;t.cssNodes["."+S]={animation:o.join(",")},n.class=S}}var Ir=C(1240),ve=Math.round;function Zr(e){return e&&(0,g.isString)(e.src)}function Lr(e){return e&&(0,g.isFunction)(e.toDataURL)}function La(e,n,t,a){(function Lu(e,n,t,a){var r=null==n.opacity?1:n.opacity;if(t instanceof He.ZP)e("opacity",r);else{if(function Pu(e){var n=e.fill;return null!=n&&n!==de}(n)){var i=(0,G.ut)(n.fill);e("fill",i.color);var o=null!=n.fillOpacity?n.fillOpacity*i.opacity*r:i.opacity*r;(a||o<1)&&e("fill-opacity",o)}else e("fill",de);if(function Iu(e){var n=e.stroke;return null!=n&&n!==de}(n)){var l=(0,G.ut)(n.stroke);e("stroke",l.color);var u=n.strokeNoScale?t.getLineScale():1,c=u?(n.lineWidth||0)/u:0,p=null!=n.strokeOpacity?n.strokeOpacity*l.opacity*r:l.opacity*r,d=n.strokeFirst;if((a||1!==c)&&e("stroke-width",c),(a||d)&&e("paint-order",d?"stroke":"fill"),(a||p<1)&&e("stroke-opacity",p),n.lineDash){var h=(0,Mu.a)(t),f=h[0],v=h[1];f&&(v=wu(v||0),e("stroke-dasharray",f.join(",")),(v||a)&&e("stroke-dashoffset",v))}else a&&e("stroke-dasharray",de);for(var m=0;m<Pa.length;m++){var y=Pa[m];if(a||n[y]!==se.$t[y]){var S=n[y]||se.$t[y];S&&e(Zu[m],S)}}}else a&&e("stroke",de)}})(function(r,i){var o="fill"===r||"stroke"===r;o&&(0,G.H3)(i)?Er(n,e,r,a):o&&(0,G.R)(i)?Fr(t,e,r,a):e[r]=i},n,t,!1),function tc(e,n,t){var a=e.style;if((0,G.i2)(a)){var r=(0,G.n1)(e),i=t.shadowCache,o=i[r];if(!o){var l=e.getGlobalScale(),u=l[0],c=l[1];if(!u||!c)return;var p=a.shadowOffsetX||0,d=a.shadowOffsetY||0,h=a.shadowBlur,f=(0,G.ut)(a.shadowColor),v=f.opacity,m=f.color,b=h/2/u+" "+h/2/c;o=t.zrId+"-s"+t.shadowIdx++,t.defs[o]=rt("filter",o,{id:o,x:"-100%",y:"-100%",width:"300%",height:"300%"},[rt("feDropShadow","",{dx:p/u,dy:d/c,stdDeviation:b,"flood-color":m,"flood-opacity":v})]),i[r]=o}n.filter=(0,G.m1)(o)}}(t,e,a)}function Nr(e){return(0,G.zT)(e[0]-1)&&(0,G.zT)(e[1])&&(0,G.zT)(e[2])&&(0,G.zT)(e[3]-1)}function Na(e,n,t){if(n&&(!function ju(e){return(0,G.zT)(e[4])&&(0,G.zT)(e[5])}(n)||!Nr(n))){var a=t?10:1e4;e.transform=Nr(n)?"translate("+ve(n[4]*a)/a+" "+ve(n[5]*a)/a+")":(0,G.qV)(n)}}function kr(e,n,t){for(var a=e.points,r=[],i=0;i<a.length;i++)r.push(ve(a[i][0]*t)/t),r.push(ve(a[i][1]*t)/t);n.points=r.join(" ")}function zr(e){return!e.smooth}var Xu={circle:[function Yu(e){var n=(0,g.map)(e,function(t){return"string"==typeof t?[t,t]:t});return function(t,a,r){for(var i=0;i<n.length;i++){var o=n[i],l=t[o[0]];null!=l&&(a[o[1]]=ve(l*r)/r)}}}(["cx","cy","r"])],polyline:[kr,zr],polygon:[kr,zr]};function Ur(e,n){var t=e.style,a=e.shape,r=Xu[e.type],i={},o=n.animation,l="path",u=e.style.strokePercent,c=n.compress&&(0,G.Gk)(e)||4;if(!r||n.willUpdate||r[1]&&!r[1](a)||o&&function $u(e){for(var n=e.animators,t=0;t<n.length;t++)if("shape"===n[t].targetName)return!0;return!1}(e)||u<1){var d=!e.path||e.shapeChanged();e.path||e.createPathProxy();var h=e.path;d&&(h.beginPath(),e.buildPath(h,e.shape),e.pathUpdated());var f=h.getVersion(),v=e,m=v.__svgPathBuilder;(v.__svgPathVersion!==f||!m||u!==v.__svgPathStrokePercent)&&(m||(m=v.__svgPathBuilder=new Cr),m.reset(c),h.rebuildPath(m,u),m.generateStr(),v.__svgPathVersion=f,v.__svgPathStrokePercent=u),i.d=m.getStr()}else{l=e.type;var p=Math.pow(10,c);r[0](a,i,p)}return Na(i,e.transform),La(i,t,e,n),n.animation&&ke(e,i,n),rt(l,e.id+"",i)}function Rr(e,n){return e instanceof se.ZP?Ur(e,n):e instanceof He.ZP?function Ku(e,n){var t=e.style,a=t.image;if(a&&!(0,g.isString)(a)&&(Zr(a)?a=a.src:Lr(a)&&(a=a.toDataURL())),a){var r=t.x||0,i=t.y||0,u={href:a,width:t.width,height:t.height};return r&&(u.x=r),i&&(u.y=i),Na(u,e.transform),La(u,t,e,n),n.animation&&ke(e,u,n),rt("image",e.id+"",u)}}(e,n):e instanceof _u.Z?function qu(e,n){var t=e.style,a=t.text;if(null!=a&&(a+=""),a&&!isNaN(t.x)&&!isNaN(t.y)){var r=t.font||Ir.Uo,i=t.x||0,o=(0,G.mU)(t.y||0,(0,Bn.Dp)(r),t.textBaseline),u={"dominant-baseline":"central","text-anchor":G.jY[t.textAlign]||t.textAlign};if((0,xt.Y1)(t)){var c="",p=t.fontStyle,d=(0,xt.VG)(t.fontSize);if(!parseFloat(d))return;var f=t.fontWeight;c+="font-size:"+d+";font-family:"+(t.fontFamily||Ir.rk)+";",p&&"normal"!==p&&(c+="font-style:"+p+";"),f&&"normal"!==f&&(c+="font-weight:"+f+";"),u.style=c}else u.style="font: "+r;return a.match(/\s/)&&(u["xml:space"]="preserve"),i&&(u.x=i),o&&(u.y=o),Na(u,e.transform),La(u,t,e,n),n.animation&&ke(e,u,n),rt("text",e.id+"",u,void 0,a)}}(e,n):void 0}function Er(e,n,t,a){var i,r=e[t],o={gradientUnits:r.global?"userSpaceOnUse":"objectBoundingBox"};if((0,G.I1)(r))i="linearGradient",o.x1=r.x,o.y1=r.y,o.x2=r.x2,o.y2=r.y2;else{if(!(0,G.gO)(r))return;i="radialGradient",o.cx=(0,g.retrieve2)(r.x,.5),o.cy=(0,g.retrieve2)(r.y,.5),o.r=(0,g.retrieve2)(r.r,.5)}for(var l=r.colorStops,u=[],c=0,p=l.length;c<p;++c){var d=100*(0,G.Pn)(l[c].offset)+"%",f=(0,G.ut)(l[c].color),m=f.opacity,y={offset:d};y["stop-color"]=f.color,m<1&&(y["stop-opacity"]=m),u.push(rt("stop",c+"",y))}var b=Ia(rt(i,"",o,u)),x=a.gradientCache,_=x[b];_||(_=a.zrId+"-g"+a.gradientIdx++,x[b]=_,o.id=_,a.defs[_]=rt(i,_,o,u)),n[t]=(0,G.m1)(_)}function Fr(e,n,t,a){var d,r=e.style[t],i=e.getBoundingRect(),o={},l=r.repeat,u="no-repeat"===l,c="repeat-x"===l,p="repeat-y"===l;if((0,G.Cv)(r)){var h=r.imageWidth,f=r.imageHeight,v=void 0,m=r.image;if((0,g.isString)(m)?v=m:Zr(m)?v=m.src:Lr(m)&&(v=m.toDataURL()),typeof Image>"u"){var y="Image width/height must been given explictly in svg-ssr renderer.";(0,g.assert)(h,y),(0,g.assert)(f,y)}else if(null==h||null==f){var S=function(P,R){if(P){var L=P.elm,k=h||R.width,J=f||R.height;"pattern"===P.tag&&(c?(J=1,k/=i.width):p&&(k=1,J/=i.height)),P.attrs.width=k,P.attrs.height=J,L&&(L.setAttribute("width",k),L.setAttribute("height",J))}},b=(0,Fu.Gq)(v,null,e,function(P){u||S(D,P),S(d,P)});b&&b.width&&b.height&&(h=h||b.width,f=f||b.height)}d=rt("image","img",{href:v,width:h,height:f}),o.width=h,o.height=f}else r.svgElement&&(d=(0,g.clone)(r.svgElement),o.width=r.svgWidth,o.height=r.svgHeight);if(d){var x,_;u?x=_=1:c?(_=1,x=o.width/i.width):p?(x=1,_=o.height/i.height):o.patternUnits="userSpaceOnUse",null!=x&&!isNaN(x)&&(o.width=x),null!=_&&!isNaN(_)&&(o.height=_);var M=(0,G.gA)(r);M&&(o.patternTransform=M);var D=rt("pattern","",o,[d]),w=Ia(D),I=a.patternCache,Z=I[w];Z||(Z=a.zrId+"-p"+a.patternIdx++,I[w]=Z,o.id=Z,D=a.defs[Z]=rt("pattern",Z,o,[d])),n[t]=(0,G.m1)(Z)}}function ec(e,n,t){var a=t.clipPathCache,r=t.defs,i=a[e.id];if(!i){var o={id:i=t.zrId+"-c"+t.clipPathIdx++};a[e.id]=i,r[i]=rt("clipPath",i,o,[Ur(e,t)])}n["clip-path"]=(0,G.m1)(i)}function Vr(e){return document.createTextNode(e)}function Ft(e,n,t){e.insertBefore(n,t)}function Gr(e,n){e.removeChild(n)}function Br(e,n){e.appendChild(n)}function Jr(e){return e.parentNode}function Hr(e){return e.nextSibling}function ka(e,n){e.textContent=n}var Qr=58,ac=120,nc=rt("","");function za(e){return void 0===e}function St(e){return void 0!==e}function rc(e,n,t){for(var a={},r=n;r<=t;++r){var i=e[r].key;void 0!==i&&(a[i]=r)}return a}function ge(e,n){return e.tag===n.tag&&e.key===n.key}function me(e){var n,t=e.children,a=e.tag;if(St(a)){var r=e.elm=Dr(a);if(Ua(nc,e),(0,g.isArray)(t))for(n=0;n<t.length;++n){var i=t[n];null!=i&&Br(r,me(i))}else St(e.text)&&!(0,g.isObject)(e.text)&&Br(r,Vr(e.text))}else e.elm=Vr(e.text);return e.elm}function Wr(e,n,t,a,r){for(;a<=r;++a){var i=t[a];null!=i&&Ft(e,me(i),n)}}function ze(e,n,t,a){for(;t<=a;++t){var r=n[t];null!=r&&(St(r.tag)?Gr(Jr(r.elm),r.elm):Gr(e,r.elm))}}function Ua(e,n){var t,a=n.elm,r=e&&e.attrs||{},i=n.attrs||{};if(r!==i){for(t in i){var o=i[t];r[t]!==o&&(!0===o?a.setAttribute(t,""):!1===o?a.removeAttribute(t):t.charCodeAt(0)!==ac?a.setAttribute(t,o):"xmlns:xlink"===t||"xmlns"===t?a.setAttributeNS(ku,t,o):t.charCodeAt(3)===Qr?a.setAttributeNS(zu,t,o):t.charCodeAt(5)===Qr?a.setAttributeNS(_r,t,o):a.setAttribute(t,o))}for(t in r)t in i||a.removeAttribute(t)}}function Kt(e,n){var t=n.elm=e.elm,a=e.children,r=n.children;e!==n&&(Ua(e,n),za(n.text)?St(a)&&St(r)?a!==r&&function ic(e,n,t){for(var d,h,f,a=0,r=0,i=n.length-1,o=n[0],l=n[i],u=t.length-1,c=t[0],p=t[u];a<=i&&r<=u;)null==o?o=n[++a]:null==l?l=n[--i]:null==c?c=t[++r]:null==p?p=t[--u]:ge(o,c)?(Kt(o,c),o=n[++a],c=t[++r]):ge(l,p)?(Kt(l,p),l=n[--i],p=t[--u]):ge(o,p)?(Kt(o,p),Ft(e,o.elm,Hr(l.elm)),o=n[++a],p=t[--u]):ge(l,c)?(Kt(l,c),Ft(e,l.elm,o.elm),l=n[--i],c=t[++r]):(za(d)&&(d=rc(n,a,i)),za(h=d[c.key])||(f=n[h]).tag!==c.tag?Ft(e,me(c),o.elm):(Kt(f,c),n[h]=void 0,Ft(e,f.elm,o.elm)),c=t[++r]);(a<=i||r<=u)&&(a>i?Wr(e,null==t[u+1]?null:t[u+1].elm,t,r,u):ze(e,n,a,i))}(t,a,r):St(r)?(St(e.text)&&ka(t,""),Wr(t,null,r,0,r.length-1)):St(a)?ze(t,a,0,a.length-1):St(e.text)&&ka(t,""):e.text!==n.text&&(St(a)&&ze(t,a,0,a.length-1),ka(t,n.text)))}var jr=C(6695),sc=0;const cc=function(){function e(n,t,a){if(this.type="svg",this.refreshHover=function(){},this.configLayer=function(){},this.storage=t,this._opts=a=(0,g.extend)({},a),this.root=n,this._id="zr"+sc++,this._oldVNode=Or(a.width,a.height),n&&!a.ssr){var r=this._viewport=document.createElement("div");r.style.cssText="position:relative;overflow:hidden";var i=this._svgDom=this._oldVNode.elm=Dr("svg");Ua(null,this._oldVNode),r.appendChild(i),n.appendChild(r)}this.resize(a.width,a.height)}return e.prototype.getType=function(){return this.type},e.prototype.getViewportRoot=function(){return this._viewport},e.prototype.getViewportRootOffset=function(){var n=this.getViewportRoot();if(n)return{offsetLeft:n.offsetLeft||0,offsetTop:n.offsetTop||0}},e.prototype.getSvgDom=function(){return this._svgDom},e.prototype.refresh=function(){if(this.root){var n=this.renderToVNode({willUpdate:!0});n.attrs.style="position:absolute;left:0;top:0;user-select:none",function oc(e,n){if(ge(e,n))Kt(e,n);else{var t=e.elm,a=Jr(t);me(n),null!==a&&(Ft(a,n.elm,Hr(t)),ze(a,[e],0,0))}}(this._oldVNode,n),this._oldVNode=n}},e.prototype.renderOneToVNode=function(n){return Rr(n,Za(this._id))},e.prototype.renderToVNode=function(n){n=n||{};var t=this.storage.getDisplayList(!0),a=this._width,r=this._height,i=Za(this._id);i.animation=n.animation,i.willUpdate=n.willUpdate,i.compress=n.compress;var o=[],l=this._bgVNode=function uc(e,n,t,a){var r;if(t&&"none"!==t)if(r=rt("rect","bg",{width:e,height:n,x:"0",y:"0",id:"0"}),(0,G.H3)(t))Er({fill:t},r.attrs,"fill",a);else if((0,G.R)(t))Fr({style:{fill:t},dirty:g.noop,getBoundingRect:function(){return{width:e,height:n}}},r.attrs,"fill",a);else{var i=(0,G.ut)(t),l=i.opacity;r.attrs.fill=i.color,l<1&&(r.attrs["fill-opacity"]=l)}return r}(a,r,this._backgroundColor,i);l&&o.push(l);var u=n.compress?null:this._mainVNode=rt("g","main",{},[]);this._paintList(t,i,u?u.children:o),u&&o.push(u);var c=(0,g.map)((0,g.keys)(i.defs),function(h){return i.defs[h]});if(c.length&&o.push(rt("defs","defs",{},c)),n.animation){var p=function Eu(e,n,t){var a=(t=t||{}).newline?"\n":"",r=" {"+a,i=a+"}",o=(0,g.map)((0,g.keys)(e),function(u){return u+r+(0,g.map)((0,g.keys)(e[u]),function(c){return c+":"+e[u][c]+";"}).join(a)+i}).join(a),l=(0,g.map)((0,g.keys)(n),function(u){return"@keyframes "+u+r+(0,g.map)((0,g.keys)(n[u]),function(c){return c+r+(0,g.map)((0,g.keys)(n[u][c]),function(p){var d=n[u][c][p];return"d"===p&&(d='path("'+d+'")'),p+":"+d+";"}).join(a)+i}).join(a)+i}).join(a);return o||l?["<![CDATA[",o,l,"]]>"].join(a):""}(i.cssNodes,i.cssAnims,{newline:!0});if(p){var d=rt("style","stl",{},[],p);o.push(d)}}return Or(a,r,o,n.useViewBox)},e.prototype.renderToString=function(n){return Ia(this.renderToVNode({animation:(0,g.retrieve2)((n=n||{}).cssAnimation,!0),willUpdate:!1,compress:!0,useViewBox:(0,g.retrieve2)(n.useViewBox,!0)}),{newline:!0})},e.prototype.setBackgroundColor=function(n){this._backgroundColor=n},e.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},e.prototype._paintList=function(n,t,a){for(var l,u,r=n.length,i=[],o=0,c=0,p=0;p<r;p++){var d=n[p];if(!d.invisible){var h=d.__clipPaths,f=h&&h.length||0,v=u&&u.length||0,m=void 0;for(m=Math.max(f-1,v-1);m>=0&&(!h||!u||h[m]!==u[m]);m--);for(var y=v-1;y>m;y--)l=i[--o-1];for(var S=m+1;S<f;S++){var b={};ec(h[S],b,t);var x=rt("g","clip-g-"+c++,b,[]);(l?l.children:a).push(x),i[o++]=x,l=x}u=h;var _=Rr(d,t);_&&(l?l.children:a).push(_)}}},e.prototype.resize=function(n,t){var a=this._opts,r=this.root,i=this._viewport;if(null!=n&&(a.width=n),null!=t&&(a.height=t),r&&i&&(i.style.display="none",n=(0,jr.ap)(r,0,a),t=(0,jr.ap)(r,1,a),i.style.display=""),this._width!==n||this._height!==t){if(this._width=n,this._height=t,i){var o=i.style;o.width=n+"px",o.height=t+"px"}if((0,G.R)(this._backgroundColor))this.refresh();else{var l=this._svgDom;l&&(l.setAttribute("width",n),l.setAttribute("height",t));var u=this._bgVNode&&this._bgVNode.elm;u&&(u.setAttribute("width",n),u.setAttribute("height",t))}}},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},e.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},e.prototype.toDataURL=function(n){var t=this.renderToString(),a="data:image/svg+xml;";return n?(t=(0,G.oF)(t))&&a+"base64,"+t:a+"charset=UTF-8,"+encodeURIComponent(t)},e}();re.D([fo.N,function Lo(e){e.registerChartView(Co),e.registerSeriesModel(Io),(0,ho.y)("pie",e.registerAction),e.registerLayout((0,g.curry)(vo,"pie")),e.registerProcessor(function go(e){return{seriesType:e,reset:function(n,t){var a=t.findComponents({mainType:"legend"});if(a&&a.length){var r=n.getData();r.filterSelf(function(i){for(var o=r.getName(i),l=0;l<a.length;l++)if(!a[l].isSelected(o))return!1;return!0})}}}}("pie")),e.registerProcessor(function Zo(e){return{seriesType:e,reset:function(n,t){var a=n.getData();a.filterSelf(function(r){var i=a.mapDimension("value"),o=a.get(i,r);return!((0,g.isNumber)(o)&&!isNaN(o)&&o<0)})}}}("pie"))},function ls(e){e.registerChartView(rs),e.registerSeriesModel(zo),e.registerLayout(function os(e,n){return{seriesType:e,plan:(0,is.Z)(),reset:function(t){var a=t.getData(),r=t.coordinateSystem,o=n||t.pipelineContext.large;if(r){var l=(0,g.map)(r.dimensions,function(f){return a.mapDimension(f)}).slice(0,2),u=l.length,c=a.getCalculationInfo("stackResultDimension");(0,oe.M)(a,l[0])&&(l[0]=c),(0,oe.M)(a,l[1])&&(l[1]=c);var p=a.getStore(),d=a.getDimensionIndex(l[0]),h=a.getDimensionIndex(l[1]);return u&&{progress:function(f,v){for(var y=o&&(0,Qt.o)((f.end-f.start)*u),S=[],b=[],x=f.start,_=0;x<f.end;x++){var M=void 0;if(1===u){var D=p.get(d,x);M=r.dataToPoint(D,null,b)}else S[0]=p.get(d,x),S[1]=p.get(h,x),M=r.dataToPoint(S,null,b);o?(y[_++]=M[0],y[_++]=M[1]):v.setItemLayout(x,M.slice())}o&&v.setLayout("points",y)}}}}}}("line",!0)),e.registerVisual({seriesType:"line",reset:function(n){var t=n.getData(),a=n.getModel("lineStyle").getLineStyle();a&&!a.stroke&&(a.stroke=t.getVisual("style").fill),t.setVisual("legendLineStyle",a)}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,(0,ss.Z)("line"))},us.N,function _s(e){(0,re.D)(Dn),(0,re.D)(As)},function Gs(e){e.registerComponentModel(ws),e.registerComponentView(Vs),e.registerPreprocessor(function(n){(function Ds(e,n){if(!e)return!1;for(var t=(0,g.isArray)(e)?e:[e],a=0;a<t.length;a++)if(t[a]&&t[a][n])return!0;return!1})(n.series,"markPoint")&&(n.markPoint=n.markPoint||{})})},Bs.N,function Ws(e){e.registerComponentModel(Hs),e.registerComponentView(Qs)},function Au(e){e.registerComponentModel(dl),e.registerComponentView(ml),fe("saveAsImage",Sl),fe("magicType",xl),fe("dataView",Ll),fe("dataZoom",Cu),fe("restore",El),(0,re.D)(fl)},function pc(e){e.registerPainter("svg",cc)}]);const fc=[{path:"",component:co}];let hc=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[U.w,E.ez,B.I,A.C,T.u5,z.q,O.Oz,N.Ns.forRoot({echarts:po}),F,Q.Bz.forChild(fc),lt,$r,ti,q.G,Q.Bz]}),e})()},5172:(pt,V,C)=>{C.d(V,{In:()=>U,Ky:()=>A,VC:()=>E,c5:()=>z,gG:()=>B});var U=function(T){return T.FILE_SHOW_LINKS="fileLinks",T.FILE_EDIT="fileEdit",T.DELETE="delete",T.RENAME="rename",T.MOVE="move",T}(U||{}),E=function(T){return T.FILE="file",T.FOLDER="folder",T}(E||{}),B=function(T){return T.FILENAME="filename",T.SIZE="size",T.TIME="time",T.EXTENSION="ext",T}(B||{}),z=function(T){return T.GRID="grid",T.LIST="list",T}(z||{}),A=function(T){return T.W_768_I_1="(max-width: 767.98px)",T.W_933_I_2="(min-width: 768px) and (max-width: 933.98px)",T.W_960_I_3="(min-width: 934px) and (max-width: 959.98px)",T.W_1226_I_2="(min-width: 960px) and (max-width: 1225.98px)",T.W_1540_I_3="(min-width: 1226px) and (max-width: 1539.98px)",T.W_1854_I_4="(min-width: 1540px) and (max-width: 1853.98px)",T.W_2168_I_5="(min-width: 1854px) and (max-width: 2167.98px)",T.W_2482_I_6="(min-width: 2168px) and (max-width: 2481.98px)",T.W_2796_I_7="(min-width: 2482px) and (max-width: 2795.98px)",T.W_3110_I_8="(min-width: 2796px) and (max-width: 3109.98px)",T.W_3424_I_9="(min-width: 3110px) and (max-width: 3423.98px)",T.W_3738_I_10="(min-width: 3424px)",T}(A||{})},1990:(pt,V,C)=>{C.d(V,{C7:()=>z,Mi:()=>A,O8:()=>E,er:()=>T,p0:()=>B,xt:()=>O});var U=C(5172);const E=[{ext:["png","apng"],maxSize:15},{ext:["jpeg","jpg","jpe"],maxSize:10},{ext:["gif"],maxSize:15},{ext:["bmp"],maxSize:10},{ext:["webp","webm"],maxSize:10},{ext:["psd","xcf"],maxSize:150},{ext:["svg"],maxSize:30}].map(N=>(N.maxSize*=1048576,N)),B={lastPath:[],layout:{asc:!0,orderBy:U.gG.FILENAME,type:U.c5.GRID},uploader:{checkImage:{time:0,active:!0},showLinkModal:!1}},z="https://upload.forumfree.net/api/",A=/^(?:(?![\t\r\n])[a-zA-Z0-9_\-.\s])*$/,T=/^(?:(?![\t\r\n])[a-zA-Z0-9_\-\s])*$/,O={invalidLength:!1,alreadyUsed:!1,invalidStartOrEnd:!1,invalidCharacter:!1}},5571:(pt,V,C)=>{C.d(V,{AD:()=>E,It:()=>T,ex:()=>U,mH:()=>O,r2:()=>z,vO:()=>A,xJ:()=>B});const U="\nquery UploadEntitiesListToken($scope: String, $target: String!) {\n    uploadEntitiesListToken(scope: $scope, target: $target)\n}",E="\nquery UploadEntitiesHostToken($scope: String, $target: String!) {\n    uploadEntitiesHostToken(scope: $scope, target: $target)\n}",B="\nquery UploadEntitiesCreateDirectoryToken($scope: String, $target: String!) {\n    uploadEntitiesCreateDirectoryToken(scope: $scope, target: $target)\n}",z="\nquery UploadEntitiesMoveToken($scope: String, $source: String!, $target: String!) {\n    uploadEntitiesMoveToken(scope: $scope, source: $source, target: $target)\n}",A="\nquery UploadEntitiesDeleteToken($scope: String, $target: String!) {\n    uploadEntitiesDeleteToken(scope: $scope, target: $target)\n}",T="\nquery UploadHistoryAvailableDateRange {\n    uploadHistoryAvailableDateRange {\n        start\n        end\n    }\n}",O="\nsubscription UploadEntities($scope: String) {\n    uploadEntities(scope: $scope) {\n        eventMessage\n        eventType\n        user {\n            avatar\n            host\n            id\n            nickname\n        }\n    }\n}"},4158:(pt,V)=>{Object.defineProperty(V,"__esModule",{value:!0}),V.isNestedField=void 0,V.isNestedField=function C(U){return"object"==typeof U&&U.hasOwnProperty("operation")&&U.hasOwnProperty("variables")&&U.hasOwnProperty("fields")||"object"==typeof U&&U.hasOwnProperty("operation")&&U.hasOwnProperty("fragment")&&U.hasOwnProperty("fields")}},3528:(pt,V)=>{Object.defineProperty(V,"__esModule",{value:!0});var C=function(U){return U.Mutation="mutation",U.Query="query",U.Subscription="subscription",U}(C||{});V.default=C},2209:function(pt,V,C){var U=this&&this.__assign||function(){return U=Object.assign||function(z){for(var A,T=1,O=arguments.length;T<O;T++)for(var N in A=arguments[T])Object.prototype.hasOwnProperty.call(A,N)&&(z[N]=A[N]);return z},U.apply(this,arguments)};Object.defineProperty(V,"__esModule",{value:!0});var E=C(4158),B=function(){function z(){}return z.resolveVariables=function(A){for(var T={},O=0,N=A;O<N.length;O++){var s=N[O],F=s.variables,Q=s.fields;T=U(U(U({},T),F),Q&&z.getNestedVariables(Q)||{})}return T},z.queryDataNameAndArgumentMap=function(A){return A&&Object.keys(A).length?"(".concat(Object.entries(A).reduce(function(T,O,N){var s=O[0],F=O[1];return"".concat(T).concat(0!==N?", ":"").concat(F&&F.name?F.name:s,": $").concat(s)},""),")"):""},z.queryFieldsMap=function(A){var T=this;return A?A.map(function(O){if((0,E.isNestedField)(O))return z.queryNestedFieldMap(O);if("object"==typeof O){var N="";return Object.entries(O).forEach(function(s,F,Q){var lt=s[1];N+="".concat(s[0]," ").concat(lt.length>0?"{ "+T.queryFieldsMap(lt)+" }":""),F<Q.length-1&&(N+=", ")}),N}return"".concat(O)}).join(", "):""},z.operationOrAlias=function(A){return"string"==typeof A?A:"".concat(A.alias,": ").concat(A.name)},z.isFragment=function(A){var T;return null!==(T=!0===(null==A?void 0:A.fragment))&&void 0!==T&&T},z.operationOrFragment=function(A){return z.isFragment(A)?A.operation:z.operationOrAlias(A.operation)},z.getFragment=function(A){return z.isFragment(A)?"... on ":""},z.queryNestedFieldMap=function(A){return"".concat(z.getFragment(A)).concat(z.operationOrFragment(A)," ").concat(this.isFragment(A)?"":this.queryDataNameAndArgumentMap(A.variables)," ").concat(A.fields.length>0?"{ "+this.queryFieldsMap(A.fields)+" }":"")},z.queryVariablesMap=function(A,T){var O={},N=function(s){s&&Object.keys(s).map(function(F){O[F]="object"==typeof s[F]?s[F].value:s[F]})};return N(A),T&&"object"==typeof T&&N(z.getNestedVariables(T)),O},z.getNestedVariables=function(A){var T={};return function O(N){return null==N||N.forEach(function(s){if((0,E.isNestedField)(s))T=U(U(U({},s.variables),T),s.fields&&O(s.fields));else if("object"==typeof s)for(var F=0,Q=Object.entries(s);F<Q.length;F++)O(Q[F][1])}),T}(A),T},z.queryDataType=function(A){var T="String",O="object"==typeof A?A.value:A;if(null!=(null==A?void 0:A.type))T=A.type;else{var N=Array.isArray(O)?O[0]:O;switch(typeof N){case"object":T="Object";break;case"boolean":T="Boolean";break;case"number":T=N%1==0?"Int":"Float"}}return"object"==typeof A&&(!0===A.list?T="[".concat(T,"]"):Array.isArray(A.list)&&(T="[".concat(T).concat(A.list[0]?"!":"","]")),A.required&&(T+="!")),T},z}();V.default=B},9499:(pt,V,C)=>{Object.defineProperty(V,"__esModule",{value:!0});var U=C(3528),E=C(2209),B=function(){function z(A){Array.isArray(A)?this.variables=E.default.resolveVariables(A):(this.variables=A.variables,this.fields=A.fields,this.operation=A.operation)}return z.prototype.mutationBuilder=function(){return this.operationWrapperTemplate(this.variables,this.operationTemplate(this.operation))},z.prototype.mutationsBuilder=function(A){var T=this,O=A.map(function(N){return T.operation=N.operation,T.variables=N.variables,T.fields=N.fields,T.operationTemplate(N.operation)});return this.operationWrapperTemplate(E.default.resolveVariables(A),O.join("\n  "))},z.prototype.queryDataNameAndArgumentMap=function(){return this.variables&&Object.keys(this.variables).length?"(".concat(Object.keys(this.variables).reduce(function(A,T,O){return"".concat(A).concat(0!==O?", ":"").concat(T,": $").concat(T)},""),")"):""},z.prototype.queryDataArgumentAndTypeMap=function(A){return Object.keys(A).length?"(".concat(Object.keys(A).reduce(function(T,O,N){return"".concat(T).concat(0!==N?", ":"","$").concat(O,": ").concat(E.default.queryDataType(A[O]))},""),")"):""},z.prototype.operationWrapperTemplate=function(A,T){var O="string"==typeof this.operation?this.operation:this.operation.name;return{query:"".concat(U.default.Mutation," ").concat(O.charAt(0).toUpperCase()+O.slice(1)," ").concat(this.queryDataArgumentAndTypeMap(A)," {\n  ").concat(T,"\n}"),variables:E.default.queryVariablesMap(A)}},z.prototype.operationTemplate=function(A){var T="string"==typeof A?A:"".concat(A.alias,": ").concat(A.name);return"".concat(T," ").concat(this.queryDataNameAndArgumentMap()," {\n    ").concat(this.queryFieldsMap(this.fields),"\n  }")},z.prototype.queryFieldsMap=function(A){var T=this;return Array.isArray(A)?A.map(function(O){return"object"==typeof O?"".concat(Object.keys(O)[0]," { ").concat(T.queryFieldsMap(Object.values(O)[0])," }"):"".concat(O)}).join(", "):""},z}();V.default=B},4021:(pt,V,C)=>{Object.defineProperty(V,"__esModule",{value:!0});var U=C(3528),E=C(2209),B=function(){function z(A){this.queryDataType=function(T){var O="String",N="object"==typeof T?T.value:T;if(void 0!==T.type)O=T.type;else switch(typeof N){case"object":O="Object";break;case"boolean":O="Boolean";break;case"number":O=N%1==0?"Int":"Float"}return"object"==typeof T&&T.required&&(O+="!"),O},Array.isArray(A)?this.variables=E.default.resolveVariables(A):(this.variables=A.variables,this.fields=A.fields||[],this.operation=A.operation)}return z.prototype.queryBuilder=function(){return this.operationWrapperTemplate(this.operationTemplate())},z.prototype.queriesBuilder=function(A){var N,T=this;return this.operationWrapperTemplate((N=[],A.forEach(function(s){s&&(T.operation=s.operation,T.fields=s.fields,T.variables=s.variables,N.push(T.operationTemplate()))}),N.join(" ")))},z.prototype.queryDataNameAndArgumentMap=function(){return this.variables&&Object.keys(this.variables).length?"(".concat(Object.keys(this.variables).reduce(function(A,T,O){return"".concat(A).concat(0!==O?", ":"").concat(T,": $").concat(T)},""),")"):""},z.prototype.queryDataArgumentAndTypeMap=function(){var A=this;return this.variables&&Object.keys(this.variables).length?"(".concat(Object.keys(this.variables).reduce(function(T,O,N){return"".concat(T).concat(0!==N?", ":"","$").concat(O,": ").concat(A.queryDataType(A.variables[O]))},""),")"):""},z.prototype.operationWrapperTemplate=function(A){var T="string"==typeof this.operation?this.operation:this.operation.name;return{query:"".concat(U.default.Query," ").concat(T.charAt(0).toUpperCase()).concat(T.slice(1)," ").concat(this.queryDataArgumentAndTypeMap()," { ").concat(A," }"),variables:E.default.queryVariablesMap(this.variables)}},z.prototype.operationTemplate=function(){var A="string"==typeof this.operation?this.operation:"".concat(this.operation.alias,": ").concat(this.operation.name);return"".concat(A," ").concat(this.queryDataNameAndArgumentMap()," { nodes { ").concat(E.default.queryFieldsMap(this.fields)," } }")},z}();V.default=B},4138:function(pt,V,C){var U=this&&this.__assign||function(){return U=Object.assign||function(A){for(var T,O=1,N=arguments.length;O<N;O++)for(var s in T=arguments[O])Object.prototype.hasOwnProperty.call(T,s)&&(A[s]=T[s]);return A},U.apply(this,arguments)};Object.defineProperty(V,"__esModule",{value:!0});var E=C(3528),B=C(2209),z=function(){function A(T,O){var N=this;Array.isArray(T)?this.variables=B.default.resolveVariables(T):(this.variables=T.variables,this.fields=T.fields,this.operation=T.operation),this.config={operationName:""},O&&Object.entries(O).forEach(function(s){N.config[s[0]]=s[1]})}return A.prototype.mutationBuilder=function(){return this.operationWrapperTemplate(E.default.Mutation,this.variables,this.operationTemplate(this.operation))},A.prototype.mutationsBuilder=function(T){var O=this,N=T.map(function(s){return O.operation=s.operation,O.variables=s.variables,O.fields=s.fields,O.operationTemplate(s.operation)});return this.operationWrapperTemplate(E.default.Mutation,B.default.resolveVariables(T),N.join("\n  "))},A.prototype.queryDataArgumentAndTypeMap=function(T){return this.fields&&"object"==typeof this.fields&&(T=U(U({},B.default.getNestedVariables(this.fields)),T)),T&&Object.keys(T).length>0?"(".concat(Object.keys(T).reduce(function(O,N,s){return"".concat(O).concat(0!==s?", ":"","$").concat(N,": ").concat(B.default.queryDataType(T[N]))},""),")"):""},A.prototype.operationWrapperTemplate=function(T,O,N){var s="".concat(T," ").concat(this.queryDataArgumentAndTypeMap(O)," {\n      ").concat(N,"\n    }");return this.config.operationName&&(s=s.replace("mutation","mutation ".concat(this.config.operationName))),{query:s,variables:B.default.queryVariablesMap(O,this.fields)}},A.prototype.operationTemplate=function(T){var O="string"==typeof T?T:"".concat(T.alias,": ").concat(T.name);return"".concat(O," ").concat(B.default.queryDataNameAndArgumentMap(this.variables)," ").concat(this.fields&&this.fields.length>0?"{\n    ".concat(B.default.queryFieldsMap(this.fields),"\n  }"):"")},A}();V.default=z},196:function(pt,V,C){var U=this&&this.__assign||function(){return U=Object.assign||function(A){for(var T,O=1,N=arguments.length;O<N;O++)for(var s in T=arguments[O])Object.prototype.hasOwnProperty.call(T,s)&&(A[s]=T[s]);return A},U.apply(this,arguments)};Object.defineProperty(V,"__esModule",{value:!0});var E=C(3528),B=C(2209),z=function(){function A(T,O){var N=this;this.config={operationName:""},O&&Object.entries(O).forEach(function(s){N.config[s[0]]=s[1]}),Array.isArray(T)?this.variables=B.default.resolveVariables(T):(this.variables=T.variables,this.fields=T.fields||[],this.operation=T.operation)}return A.prototype.queryBuilder=function(){return this.operationWrapperTemplate(this.operationTemplate(this.variables))},A.prototype.queriesBuilder=function(T){var s,O=this;return this.operationWrapperTemplate((s=[],T.forEach(function(F){F&&(O.operation=F.operation,O.fields=F.fields,s.push(O.operationTemplate(F.variables)))}),s.join(" ")))},A.prototype.queryDataArgumentAndTypeMap=function(){var T=this.variables;return this.fields&&"object"==typeof this.fields&&(T=U(U({},B.default.getNestedVariables(this.fields)),T)),T&&Object.keys(T).length>0?"(".concat(Object.keys(T).reduce(function(O,N,s){return"".concat(O).concat(0!==s?", ":"","$").concat(N,": ").concat(B.default.queryDataType(T[N]))},""),")"):""},A.prototype.operationWrapperTemplate=function(T){var O="".concat(E.default.Query," ").concat(this.queryDataArgumentAndTypeMap()," { ").concat(T," }");return{query:O=O.replace("query","query".concat(""!==this.config.operationName?" "+this.config.operationName:"")),variables:B.default.queryVariablesMap(this.variables,this.fields)}},A.prototype.operationTemplate=function(T){var O="string"==typeof this.operation?this.operation:"".concat(this.operation.alias,": ").concat(this.operation.name);return"".concat(O," ").concat(T?B.default.queryDataNameAndArgumentMap(T):""," ").concat(this.fields&&this.fields.length>0?"{ "+B.default.queryFieldsMap(this.fields)+" }":"")},A}();V.default=z},4438:(pt,V,C)=>{Object.defineProperty(V,"__esModule",{value:!0});var U=C(3528),E=C(2209),B=function(){function z(A){Array.isArray(A)?this.variables=E.default.resolveVariables(A):(this.variables=A.variables,this.fields=A.fields,this.operation=A.operation)}return z.prototype.subscriptionBuilder=function(){return this.operationWrapperTemplate(U.default.Subscription,this.variables,this.operationTemplate(this.operation))},z.prototype.subscriptionsBuilder=function(A){var T=this,O=A.map(function(N){return T.operation=N.operation,T.variables=N.variables,T.fields=N.fields,T.operationTemplate(N.operation)});return this.operationWrapperTemplate(U.default.Subscription,E.default.resolveVariables(A),O.join("\n  "))},z.prototype.queryDataNameAndArgumentMap=function(){return this.variables&&Object.keys(this.variables).length?"(".concat(Object.keys(this.variables).reduce(function(A,T,O){return"".concat(A).concat(0!==O?", ":"").concat(T,": $").concat(T)},""),")"):""},z.prototype.queryDataArgumentAndTypeMap=function(A){return Object.keys(A).length?"(".concat(Object.keys(A).reduce(function(T,O,N){return"".concat(T).concat(0!==N?", ":"","$").concat(O,": ").concat(E.default.queryDataType(A[O]))},""),")"):""},z.prototype.operationWrapperTemplate=function(A,T,O){return{query:"".concat(A," ").concat(this.queryDataArgumentAndTypeMap(T)," {\n  ").concat(O,"\n}"),variables:E.default.queryVariablesMap(T)}},z.prototype.operationTemplate=function(A){var T="string"==typeof this.operation?this.operation:"".concat(this.operation.alias,": ").concat(this.operation.name);return"".concat(T," ").concat(this.queryDataNameAndArgumentMap()," {\n    ").concat(this.queryFieldsMap(this.fields),"\n  }")},z.prototype.queryFieldsMap=function(A){var T=this;return A?A.map(function(O){return"object"==typeof O?"".concat(Object.keys(O)[0]," { ").concat(T.queryFieldsMap(Object.values(O)[0])," }"):"".concat(O)}).join(", "):""},z}();V.default=B},891:(pt,V,C)=>{Object.defineProperty(V,"__esModule",{value:!0});var U=C(9499),E=C(4021);V.default={DefaultAppSyncQueryAdapter:E.default,DefaultAppSyncMutationAdapter:U.default}},5362:(pt,V,C)=>{V.IO=void 0,C(891);C(4138);var z=C(196);C(4438);V.IO=function T(s,F,Q){return Array.isArray(s)?F?new F(s,Q).queriesBuilder(s):new z.default(s,Q).queriesBuilder(s):F?new F(s,Q).queryBuilder():new z.default(s,Q).queryBuilder()}}}]);