(self.webpackChunkboard=self.webpackChunkboard||[]).push([[735],{8621:(Ke,he,x)=>{"use strict";x.d(he,{L:()=>ne});var C=x(4650),e=x(5044);let Te=(()=>{class A{constructor(){this.dependences={[e.B2.LOGIN]:null,[e.B2.HOME]:null,[e.B2.SETTINGS]:e.B2.HOME,[e.B2.SCRIPT]:e.B2.HOME,[e.B2.SCRIPT_FORUM]:e.B2.SCRIPT,[e.B2.SCRIPT_USER]:e.B2.SCRIPT,[e.B2.SCRIPT_SETTINGS]:[e.B2.SCRIPT_USER,e.B2.SCRIPT_FORUM],[e.B2.SCRIPT_DEV]:e.B2.SCRIPT,[e.B2.SCRIPT_DEV_SETTINGS]:e.B2.SCRIPT_DEV,[e.B2.UPLOAD]:e.B2.HOME,[e.B2.ADMIN]:e.B2.HOME},this.names={[e.B2.LOGIN]:"Login",[e.B2.HOME]:"Home",[e.B2.SETTINGS]:"Notifiche",[e.B2.SCRIPT]:"Script",[e.B2.SCRIPT_FORUM]:"Forum",[e.B2.SCRIPT_USER]:"Utenti",[e.B2.SCRIPT_SETTINGS]:"Impostazioni",[e.B2.SCRIPT_DEV]:"Sviluppo",[e.B2.SCRIPT_DEV_SETTINGS]:"Impostazioni",[e.B2.UPLOAD]:"Upload",[e.B2.ADMIN]:"Amministrazione"}}createPathList(M,Q=[]){const ot=(B,Oe)=>{B.unshift({name:this.names[Oe]||"",path:Oe})},ie=B=>this.dependences.hasOwnProperty(B)?this.dependences[B]instanceof Array?this.dependences[B].includes(Q[0])?Q.shift():this.dependences[B][0]:this.dependences[B]:null;let He=[{name:this.names[M]||"",path:""}],Ue=ie(M);for(;Ue;)ot(He,Ue),Ue=ie(Ue);return He}}return A.\u0275fac=function(M){return new(M||A)},A.\u0275prov=C.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();var Fe=x(9631),I=x(6895);function Me(A,se){if(1&A&&C._UZ(0,"a",8),2&A){const M=C.oxw().$implicit;C.Q6J("routerLink",M.path)("innerText",M.name)}}function te(A,se){if(1&A&&C._UZ(0,"span",9),2&A){const M=C.oxw().$implicit;C.Q6J("innerText",M.name)}}const xe=function(A){return{active:A}};function re(A,se){if(1&A&&(C.TgZ(0,"li",5),C.YNc(1,Me,1,2,"a",6),C.YNc(2,te,1,1,"ng-template",null,7,C.W1O),C.qZA()),2&A){const M=se.last,Q=C.MAs(3);C.Q6J("ngClass",C.VKq(4,xe,M)),C.uIk("aria-current",M?"page":null),C.xp6(1),C.Q6J("ngIf",!M)("ngIfElse",Q)}}let ne=(()=>{class A{constructor(M,Q){this.breadcrumbService=M,this.router=Q,this.pageTitle="",this.url="",this.nodes=[],this.breadcrumbs=[]}ngOnInit(){this.url||(this.url=this.router.url),this.breadcrumbs=this.breadcrumbService.createPathList(this.url,this.nodes)}}return A.\u0275fac=function(M){return new(M||A)(C.Y36(Te),C.Y36(Fe.F0))},A.\u0275cmp=C.Xpm({type:A,selectors:[["app-breadcrumb"]],inputs:{pageTitle:"pageTitle",url:"url",nodes:"nodes"},decls:5,vars:2,consts:[[1,"container-fluid","px-md-1","d-flex","flex-column","flex-md-row","align-items-md-center"],[1,"h3","fw-light","mb-0","lh-1","fv-small-caps","pb-1",3,"innerText"],["aria-label","breadcrumb",1,"ms-md-auto","mt-1"],[1,"breadcrumb","mb-0","justify-content-md-end"],["class","breadcrumb-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"breadcrumb-item",3,"ngClass"],[3,"routerLink","innerText",4,"ngIf","ngIfElse"],["lastItem",""],[3,"routerLink","innerText"],[3,"innerText"]],template:function(M,Q){1&M&&(C.TgZ(0,"div",0),C._UZ(1,"h2",1),C.TgZ(2,"nav",2)(3,"ol",3),C.YNc(4,re,4,6,"li",4),C.qZA()()()),2&M&&(C.xp6(1),C.Q6J("innerText",Q.pageTitle),C.xp6(3),C.Q6J("ngForOf",Q.breadcrumbs))},dependencies:[I.mk,I.sg,I.O5,Fe.yS],styles:[".container-fluid[_ngcontent-%COMP%]{margin-bottom:.75rem}@media (min-width: 960px){.container-fluid[_ngcontent-%COMP%]{margin-top:.5rem}}"]}),A})()},5531:(Ke,he,x)=>{"use strict";x.d(he,{w:()=>Fe});var C=x(6895),e=x(9631),Te=x(4650);let Fe=(()=>{class I{}return I.\u0275fac=function(te){return new(te||I)},I.\u0275mod=Te.oAB({type:I}),I.\u0275inj=Te.cJS({imports:[C.ez,e.Bz]}),I})()},6735:(Ke,he,x)=>{"use strict";x.r(he),x.d(he,{UploadModule:()=>Ha});var C=x(6895),e=x(4650);let Te=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[C.ez]}),o})(),Fe=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[C.ez]}),o})(),I=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[C.ez]}),o})(),Me=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[C.ez]}),o})();var te=x(5531),xe=x(4425),re=x(563),ne=x(3353),A=x(1281),se=x(2687),M=x(7579),Q=x(727),ot=x(4986),ie=x(5963);function He(o=0,r=ot.z){return o<0&&(o=0),(0,ie.H)(o,o,r)}var Ue=x(6406),B=x(9751),Oe=x(6451),ke=x(2722),rt=x(8675),$e=x(4004),Ze=x(5698),me=x(8505),fe=x(3900),je=x(445);function we(o,r,t){for(let n in r)if(r.hasOwnProperty(n)){const i=r[n];i?o.setProperty(n,i,t?.has(n)?"important":""):o.removeProperty(n)}return o}function ce(o,r){const t=r?"":"none";we(o.style,{"touch-action":r?"":"none","-webkit-user-drag":r?"":"none","-webkit-tap-highlight-color":r?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function mt(o,r,t){we(o.style,{position:r?"":"fixed",top:r?"":"0",opacity:r?"":"0",left:r?"":"-999em"},t)}function Re(o,r){return r&&"none"!=r?o+" "+r:o}function It(o){const r=o.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(o)*r}function v(o,r){return o.getPropertyValue(r).split(",").map(n=>n.trim())}function y(o){const r=o.getBoundingClientRect();return{top:r.top,right:r.right,bottom:r.bottom,left:r.left,width:r.width,height:r.height,x:r.x,y:r.y}}function b(o,r,t){const{top:n,bottom:i,left:s,right:a}=o;return t>=n&&t<=i&&r>=s&&r<=a}function P(o,r,t){o.top+=r,o.bottom=o.top+o.height,o.left+=t,o.right=o.left+o.width}function E(o,r,t,n){const{top:i,right:s,bottom:a,left:d,width:h,height:g}=o,_=h*r,m=g*r;return n>i-m&&n<a+m&&t>d-_&&t<s+_}class N{constructor(r){this._document=r,this.positions=new Map}clear(){this.positions.clear()}cache(r){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),r.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:y(t)})})}handleScroll(r){const t=(0,ne.sA)(r),n=this.positions.get(t);if(!n)return null;const i=n.scrollPosition;let s,a;if(t===this._document){const g=this.getViewportScrollPosition();s=g.top,a=g.left}else s=t.scrollTop,a=t.scrollLeft;const d=i.top-s,h=i.left-a;return this.positions.forEach((g,_)=>{g.clientRect&&t!==_&&t.contains(_)&&P(g.clientRect,d,h)}),i.top=s,i.left=a,{top:d,left:h}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function J(o){const r=o.cloneNode(!0),t=r.querySelectorAll("[id]"),n=o.nodeName.toLowerCase();r.removeAttribute("id");for(let i=0;i<t.length;i++)t[i].removeAttribute("id");return"canvas"===n?D(o,r):("input"===n||"select"===n||"textarea"===n)&&Y(o,r),k("canvas",o,r,D),k("input, textarea, select",o,r,Y),r}function k(o,r,t,n){const i=r.querySelectorAll(o);if(i.length){const s=t.querySelectorAll(o);for(let a=0;a<i.length;a++)n(i[a],s[a])}}let z=0;function Y(o,r){"file"!==r.type&&(r.value=o.value),"radio"===r.type&&r.name&&(r.name=`mat-clone-${r.name}-${z++}`)}function D(o,r){const t=r.getContext("2d");if(t)try{t.drawImage(o,0,0)}catch{}}const K=(0,ne.i$)({passive:!0}),U=(0,ne.i$)({passive:!1}),X=new Set(["position"]);class G{constructor(r,t,n,i,s,a){this._config=t,this._document=n,this._ngZone=i,this._viewportRuler=s,this._dragDropRegistry=a,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new M.x,this._pointerMoveSubscription=Q.w0.EMPTY,this._pointerUpSubscription=Q.w0.EMPTY,this._scrollSubscription=Q.w0.EMPTY,this._resizeSubscription=Q.w0.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new M.x,this.started=new M.x,this.released=new M.x,this.ended=new M.x,this.entered=new M.x,this.exited=new M.x,this.dropped=new M.x,this.moved=this._moveEvents,this._pointerDown=d=>{if(this.beforeStarted.next(),this._handles.length){const h=this._getTargetHandle(d);h&&!this._disabledHandles.has(h)&&!this.disabled&&this._initializeDragSequence(h,d)}else this.disabled||this._initializeDragSequence(this._rootElement,d)},this._pointerMove=d=>{const h=this._getPointerPositionOnPage(d);if(!this._hasStartedDragging){if(Math.abs(h.x-this._pickupPositionOnPage.x)+Math.abs(h.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const q=Date.now()>=this._dragStartTime+this._getDragStartDelay(d),V=this._dropContainer;if(!q)return void this._endDragSequence(d);(!V||!V.isDragging()&&!V.isReceiving())&&(d.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(d)))}return}d.preventDefault();const g=this._getConstrainedPointerPosition(h);if(this._hasMoved=!0,this._lastKnownPointerPosition=h,this._updatePointerDirectionDelta(g),this._dropContainer)this._updateActiveDropContainer(g,h);else{const _=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,m=this._activeTransform;m.x=g.x-_.x+this._passiveTransform.x,m.y=g.y-_.y+this._passiveTransform.y,this._applyRootElementTransform(m.x,m.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:g,event:d,distance:this._getDragDistance(g),delta:this._pointerDirectionDelta})})},this._pointerUp=d=>{this._endDragSequence(d)},this._nativeDragStart=d=>{if(this._handles.length){const h=this._getTargetHandle(d);h&&!this._disabledHandles.has(h)&&!this.disabled&&d.preventDefault()}else this.disabled||d.preventDefault()},this.withRootElement(r).withParent(t.parentDragRef||null),this._parentPositions=new N(n),a.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(r){const t=(0,A.Ig)(r);t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(n=>ce(n,t)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(r){this._handles=r.map(n=>(0,A.fI)(n)),this._handles.forEach(n=>ce(n,this.disabled)),this._toggleNativeDragInteractions();const t=new Set;return this._disabledHandles.forEach(n=>{this._handles.indexOf(n)>-1&&t.add(n)}),this._disabledHandles=t,this}withPreviewTemplate(r){return this._previewTemplate=r,this}withPlaceholderTemplate(r){return this._placeholderTemplate=r,this}withRootElement(r){const t=(0,A.fI)(r);return t!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{t.addEventListener("mousedown",this._pointerDown,U),t.addEventListener("touchstart",this._pointerDown,K),t.addEventListener("dragstart",this._nativeDragStart,U)}),this._initialTransform=void 0,this._rootElement=t),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(r){return this._boundaryElement=r?(0,A.fI)(r):null,this._resizeSubscription.unsubscribe(),r&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(r){return this._parentDragRef=r,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(r){!this._disabledHandles.has(r)&&this._handles.indexOf(r)>-1&&(this._disabledHandles.add(r),ce(r,!0))}enableHandle(r){this._disabledHandles.has(r)&&(this._disabledHandles.delete(r),ce(r,this.disabled))}withDirection(r){return this._direction=r,this}_withDropContainer(r){this._dropContainer=r}getFreeDragPosition(){const r=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:r.x,y:r.y}}setFreeDragPosition(r){return this._activeTransform={x:0,y:0},this._passiveTransform.x=r.x,this._passiveTransform.y=r.y,this._dropContainer||this._applyRootElementTransform(r.x,r.y),this}withPreviewContainer(r){return this._previewContainer=r,this}_sortFromLastPointerPosition(){const r=this._lastKnownPointerPosition;r&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(r),r)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(r){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:r}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(r),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const t=this._getPointerPositionOnPage(r);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:r})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(r){ge(r)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const t=this._dropContainer;if(t){const n=this._rootElement,i=n.parentNode,s=this._placeholder=this._createPlaceholderElement(),a=this._anchor=this._anchor||this._document.createComment(""),d=this._getShadowRoot();i.insertBefore(a,n),this._initialTransform=n.style.transform||"",this._preview=this._createPreviewElement(),mt(n,!1,X),this._document.body.appendChild(i.replaceChild(s,n)),this._getPreviewInsertionPoint(i,d).appendChild(this._preview),this.started.next({source:this,event:r}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this,event:r}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}_initializeDragSequence(r,t){this._parentDragRef&&t.stopPropagation();const n=this.isDragging(),i=ge(t),s=!i&&0!==t.button,a=this._rootElement,d=(0,ne.sA)(t),h=!i&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),g=i?(0,se.yG)(t):(0,se.X6)(t);if(d&&d.draggable&&"mousedown"===t.type&&t.preventDefault(),n||s||h||g)return;if(this._handles.length){const w=a.style;this._rootElementTapHighlight=w.webkitTapHighlightColor||"",w.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(w=>this._updateOnScroll(w)),this._boundaryElement&&(this._boundaryRect=y(this._boundaryElement));const _=this._previewTemplate;this._pickupPositionInElement=_&&_.template&&!_.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,r,t);const m=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:m.x,y:m.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(r){mt(this._rootElement,!0,X),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const t=this._dropContainer,n=t.getItemIndex(this),i=this._getPointerPositionOnPage(r),s=this._getDragDistance(i),a=t._isOverContainer(i.x,i.y);this.ended.next({source:this,distance:s,dropPoint:i,event:r}),this.dropped.next({item:this,currentIndex:n,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:a,distance:s,dropPoint:i,event:r}),t.drop(this,n,this._initialIndex,this._initialContainer,a,s,i,r),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:r,y:t},{x:n,y:i}){let s=this._initialContainer._getSiblingContainerFromPosition(this,r,t);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(r,t)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=s,this._dropContainer.enter(this,r,t,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(n,i),this._dropContainer._sortItem(this,r,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(r,t):this._applyPreviewTransform(r-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_createPreviewElement(){const r=this._previewTemplate,t=this.previewClass,n=r?r.template:null;let i;if(n&&r){const s=r.matchSize?this._initialClientRect:null,a=r.viewContainer.createEmbeddedView(n,r.context);a.detectChanges(),i=de(a,this._document),this._previewRef=a,r.matchSize?_e(i,s):i.style.transform=ue(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else i=J(this._rootElement),_e(i,this._initialClientRect),this._initialTransform&&(i.style.transform=this._initialTransform);return we(i.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},X),ce(i,!1),i.classList.add("cdk-drag-preview"),i.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(s=>i.classList.add(s)):i.classList.add(t)),i}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const r=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(r.left,r.top);const t=function S(o){const r=getComputedStyle(o),t=v(r,"transition-property"),n=t.find(d=>"transform"===d||"all"===d);if(!n)return 0;const i=t.indexOf(n),s=v(r,"transition-duration"),a=v(r,"transition-delay");return It(s[i])+It(a[i])}(this._preview);return 0===t?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(n=>{const i=a=>{(!a||(0,ne.sA)(a)===this._preview&&"transform"===a.propertyName)&&(this._preview?.removeEventListener("transitionend",i),n(),clearTimeout(s))},s=setTimeout(i,1.5*t);this._preview.addEventListener("transitionend",i)}))}_createPlaceholderElement(){const r=this._placeholderTemplate,t=r?r.template:null;let n;return t?(this._placeholderRef=r.viewContainer.createEmbeddedView(t,r.context),this._placeholderRef.detectChanges(),n=de(this._placeholderRef,this._document)):n=J(this._rootElement),n.style.pointerEvents="none",n.classList.add("cdk-drag-placeholder"),n}_getPointerPositionInElement(r,t,n){const i=t===this._rootElement?null:t,s=i?i.getBoundingClientRect():r,a=ge(n)?n.targetTouches[0]:n,d=this._getViewportScrollPosition();return{x:s.left-r.left+(a.pageX-s.left-d.left),y:s.top-r.top+(a.pageY-s.top-d.top)}}_getPointerPositionOnPage(r){const t=this._getViewportScrollPosition(),n=ge(r)?r.touches[0]||r.changedTouches[0]||{pageX:0,pageY:0}:r,i=n.pageX-t.left,s=n.pageY-t.top;if(this._ownerSVGElement){const a=this._ownerSVGElement.getScreenCTM();if(a){const d=this._ownerSVGElement.createSVGPoint();return d.x=i,d.y=s,d.matrixTransform(a.inverse())}}return{x:i,y:s}}_getConstrainedPointerPosition(r){const t=this._dropContainer?this._dropContainer.lockAxis:null;let{x:n,y:i}=this.constrainPosition?this.constrainPosition(r,this,this._initialClientRect,this._pickupPositionInElement):r;if("x"===this.lockAxis||"x"===t?i=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===t)&&(n=this._pickupPositionOnPage.x),this._boundaryRect){const{x:s,y:a}=this._pickupPositionInElement,d=this._boundaryRect,{width:h,height:g}=this._getPreviewRect(),_=d.top+a,m=d.bottom-(g-a);n=Ee(n,d.left+s,d.right-(h-s)),i=Ee(i,_,m)}return{x:n,y:i}}_updatePointerDirectionDelta(r){const{x:t,y:n}=r,i=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,a=Math.abs(t-s.x),d=Math.abs(n-s.y);return a>this._config.pointerDirectionChangeThreshold&&(i.x=t>s.x?1:-1,s.x=t),d>this._config.pointerDirectionChangeThreshold&&(i.y=n>s.y?1:-1,s.y=n),i}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const r=this._handles.length>0||!this.isDragging();r!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=r,ce(this._rootElement,r))}_removeRootElementListeners(r){r.removeEventListener("mousedown",this._pointerDown,U),r.removeEventListener("touchstart",this._pointerDown,K),r.removeEventListener("dragstart",this._nativeDragStart,U)}_applyRootElementTransform(r,t){const n=ue(r,t),i=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=i.transform&&"none"!=i.transform?i.transform:""),i.transform=Re(n,this._initialTransform)}_applyPreviewTransform(r,t){const n=this._previewTemplate?.template?void 0:this._initialTransform,i=ue(r,t);this._preview.style.transform=Re(i,n)}_getDragDistance(r){const t=this._pickupPositionOnPage;return t?{x:r.x-t.x,y:r.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:r,y:t}=this._passiveTransform;if(0===r&&0===t||this.isDragging()||!this._boundaryElement)return;const n=this._rootElement.getBoundingClientRect(),i=this._boundaryElement.getBoundingClientRect();if(0===i.width&&0===i.height||0===n.width&&0===n.height)return;const s=i.left-n.left,a=n.right-i.right,d=i.top-n.top,h=n.bottom-i.bottom;i.width>n.width?(s>0&&(r+=s),a>0&&(r-=a)):r=0,i.height>n.height?(d>0&&(t+=d),h>0&&(t-=h)):t=0,(r!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:r})}_getDragStartDelay(r){const t=this.dragStartDelay;return"number"==typeof t?t:ge(r)?t.touch:t?t.mouse:0}_updateOnScroll(r){const t=this._parentPositions.handleScroll(r);if(t){const n=(0,ne.sA)(r);this._boundaryRect&&n!==this._boundaryElement&&n.contains(this._boundaryElement)&&P(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=(0,ne.kV)(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(r,t){const n=this._previewContainer||"global";if("parent"===n)return r;if("global"===n){const i=this._document;return t||i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement||i.body}return(0,A.fI)(n)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(r){return this._handles.find(t=>r.target&&(r.target===t||t.contains(r.target)))}}function ue(o,r){return`translate3d(${Math.round(o)}px, ${Math.round(r)}px, 0)`}function Ee(o,r,t){return Math.max(r,Math.min(t,o))}function ge(o){return"t"===o.type[0]}function de(o,r){const t=o.rootNodes;if(1===t.length&&t[0].nodeType===r.ELEMENT_NODE)return t[0];const n=r.createElement("div");return t.forEach(i=>n.appendChild(i)),n}function _e(o,r){o.style.width=`${r.width}px`,o.style.height=`${r.height}px`,o.style.transform=ue(r.left,r.top)}function Z(o,r){return Math.max(0,Math.min(r,o))}class Dt{constructor(r,t){this._element=r,this._dragDropRegistry=t,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(r){this.withItems(r)}sort(r,t,n,i){const s=this._itemPositions,a=this._getItemIndexFromPointerPosition(r,t,n,i);if(-1===a&&s.length>0)return null;const d="horizontal"===this.orientation,h=s.findIndex(W=>W.drag===r),g=s[a],m=g.clientRect,w=h>a?1:-1,q=this._getItemOffsetPx(s[h].clientRect,m,w),V=this._getSiblingOffsetPx(h,s,w),j=s.slice();return function qe(o,r,t){const n=Z(r,o.length-1),i=Z(t,o.length-1);if(n===i)return;const s=o[n],a=i<n?-1:1;for(let d=n;d!==i;d+=a)o[d]=o[d+a];o[i]=s}(s,h,a),s.forEach((W,Pt)=>{if(j[Pt]===W)return;const De=W.drag===r,gt=De?q:V,sn=De?r.getPlaceholderElement():W.drag.getRootElement();W.offset+=gt,d?(sn.style.transform=Re(`translate3d(${Math.round(W.offset)}px, 0, 0)`,W.initialTransform),P(W.clientRect,0,gt)):(sn.style.transform=Re(`translate3d(0, ${Math.round(W.offset)}px, 0)`,W.initialTransform),P(W.clientRect,gt,0))}),this._previousSwap.overlaps=b(m,t,n),this._previousSwap.drag=g.drag,this._previousSwap.delta=d?i.x:i.y,{previousIndex:h,currentIndex:a}}enter(r,t,n,i){const s=null==i||i<0?this._getItemIndexFromPointerPosition(r,t,n):i,a=this._activeDraggables,d=a.indexOf(r),h=r.getPlaceholderElement();let g=a[s];if(g===r&&(g=a[s+1]),!g&&(null==s||-1===s||s<a.length-1)&&this._shouldEnterAsFirstChild(t,n)&&(g=a[0]),d>-1&&a.splice(d,1),g&&!this._dragDropRegistry.isDragging(g)){const _=g.getRootElement();_.parentElement.insertBefore(h,_),a.splice(s,0,r)}else(0,A.fI)(this._element).appendChild(h),a.push(r);h.style.transform="",this._cacheItemPositions()}withItems(r){this._activeDraggables=r.slice(),this._cacheItemPositions()}withSortPredicate(r){this._sortPredicate=r}reset(){this._activeDraggables.forEach(r=>{const t=r.getRootElement();if(t){const n=this._itemPositions.find(i=>i.drag===r)?.initialTransform;t.style.transform=n||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(r){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(n=>n.drag===r)}updateOnScroll(r,t){this._itemPositions.forEach(({clientRect:n})=>{P(n,r,t)}),this._itemPositions.forEach(({drag:n})=>{this._dragDropRegistry.isDragging(n)&&n._sortFromLastPointerPosition()})}_cacheItemPositions(){const r="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(t=>{const n=t.getVisibleElement();return{drag:t,offset:0,initialTransform:n.style.transform||"",clientRect:y(n)}}).sort((t,n)=>r?t.clientRect.left-n.clientRect.left:t.clientRect.top-n.clientRect.top)}_getItemOffsetPx(r,t,n){const i="horizontal"===this.orientation;let s=i?t.left-r.left:t.top-r.top;return-1===n&&(s+=i?t.width-r.width:t.height-r.height),s}_getSiblingOffsetPx(r,t,n){const i="horizontal"===this.orientation,s=t[r].clientRect,a=t[r+-1*n];let d=s[i?"width":"height"]*n;if(a){const h=i?"left":"top",g=i?"right":"bottom";-1===n?d-=a.clientRect[h]-s[g]:d+=s[h]-a.clientRect[g]}return d}_shouldEnterAsFirstChild(r,t){if(!this._activeDraggables.length)return!1;const n=this._itemPositions,i="horizontal"===this.orientation;if(n[0].drag!==this._activeDraggables[0]){const a=n[n.length-1].clientRect;return i?r>=a.right:t>=a.bottom}{const a=n[0].clientRect;return i?r<=a.left:t<=a.top}}_getItemIndexFromPointerPosition(r,t,n,i){const s="horizontal"===this.orientation,a=this._itemPositions.findIndex(({drag:d,clientRect:h})=>{if(d===r)return!1;if(i){const g=s?i.x:i.y;if(d===this._previousSwap.drag&&this._previousSwap.overlaps&&g===this._previousSwap.delta)return!1}return s?t>=Math.floor(h.left)&&t<Math.floor(h.right):n>=Math.floor(h.top)&&n<Math.floor(h.bottom)});return-1!==a&&this._sortPredicate(a,r)?a:-1}}class Ft{constructor(r,t,n,i,s){this._dragDropRegistry=t,this._ngZone=i,this._viewportRuler=s,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new M.x,this.entered=new M.x,this.exited=new M.x,this.dropped=new M.x,this.sorted=new M.x,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=Q.w0.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new M.x,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),He(0,Ue.Z).pipe((0,ke.R)(this._stopScrollTimers)).subscribe(()=>{const a=this._scrollNode,d=this.autoScrollStep;1===this._verticalScrollDirection?a.scrollBy(0,-d):2===this._verticalScrollDirection&&a.scrollBy(0,d),1===this._horizontalScrollDirection?a.scrollBy(-d,0):2===this._horizontalScrollDirection&&a.scrollBy(d,0)})},this.element=(0,A.fI)(r),this._document=n,this.withScrollableParents([this.element]),t.registerDropContainer(this),this._parentPositions=new N(n),this._sortStrategy=new Dt(this.element,t),this._sortStrategy.withSortPredicate((a,d)=>this.sortPredicate(a,d,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(r,t,n,i){this._draggingStarted(),null==i&&this.sortingDisabled&&(i=this._draggables.indexOf(r)),this._sortStrategy.enter(r,t,n,i),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:r,container:this,currentIndex:this.getItemIndex(r)})}exit(r){this._reset(),this.exited.next({item:r,container:this})}drop(r,t,n,i,s,a,d,h={}){this._reset(),this.dropped.next({item:r,currentIndex:t,previousIndex:n,container:this,previousContainer:i,isPointerOverContainer:s,distance:a,dropPoint:d,event:h})}withItems(r){const t=this._draggables;return this._draggables=r,r.forEach(n=>n._withDropContainer(this)),this.isDragging()&&(t.filter(i=>i.isDragging()).every(i=>-1===r.indexOf(i))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(r){return this._sortStrategy.direction=r,this}connectedTo(r){return this._siblings=r.slice(),this}withOrientation(r){return this._sortStrategy.orientation=r,this}withScrollableParents(r){const t=(0,A.fI)(this.element);return this._scrollableElements=-1===r.indexOf(t)?[t,...r]:r.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(r){return this._isDragging?this._sortStrategy.getItemIndex(r):this._draggables.indexOf(r)}isReceiving(){return this._activeSiblings.size>0}_sortItem(r,t,n,i){if(this.sortingDisabled||!this._clientRect||!E(this._clientRect,.05,t,n))return;const s=this._sortStrategy.sort(r,t,n,i);s&&this.sorted.next({previousIndex:s.previousIndex,currentIndex:s.currentIndex,container:this,item:r})}_startScrollingIfNecessary(r,t){if(this.autoScrollDisabled)return;let n,i=0,s=0;if(this._parentPositions.positions.forEach((a,d)=>{d===this._document||!a.clientRect||n||E(a.clientRect,.05,r,t)&&([i,s]=function Ct(o,r,t,n){const i=vt(r,n),s=st(r,t);let a=0,d=0;if(i){const h=o.scrollTop;1===i?h>0&&(a=1):o.scrollHeight-h>o.clientHeight&&(a=2)}if(s){const h=o.scrollLeft;1===s?h>0&&(d=1):o.scrollWidth-h>o.clientWidth&&(d=2)}return[a,d]}(d,a.clientRect,r,t),(i||s)&&(n=d))}),!i&&!s){const{width:a,height:d}=this._viewportRuler.getViewportSize(),h={width:a,height:d,top:0,right:a,bottom:d,left:0};i=vt(h,t),s=st(h,r),n=window}n&&(i!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||n!==this._scrollNode)&&(this._verticalScrollDirection=i,this._horizontalScrollDirection=s,this._scrollNode=n,(i||s)&&n?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const r=(0,A.fI)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=r.msScrollSnapType||r.scrollSnapType||"",r.scrollSnapType=r.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const r=(0,A.fI)(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(r).clientRect}_reset(){this._isDragging=!1;const r=(0,A.fI)(this.element).style;r.scrollSnapType=r.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(r,t){return null!=this._clientRect&&b(this._clientRect,r,t)}_getSiblingContainerFromPosition(r,t,n){return this._siblings.find(i=>i._canReceive(r,t,n))}_canReceive(r,t,n){if(!this._clientRect||!b(this._clientRect,t,n)||!this.enterPredicate(r,this))return!1;const i=this._getShadowRoot().elementFromPoint(t,n);if(!i)return!1;const s=(0,A.fI)(this.element);return i===s||s.contains(i)}_startReceiving(r,t){const n=this._activeSiblings;!n.has(r)&&t.every(i=>this.enterPredicate(i,this)||this._draggables.indexOf(i)>-1)&&(n.add(r),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(r){this._activeSiblings.delete(r),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(r=>{if(this.isDragging()){const t=this._parentPositions.handleScroll(r);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const r=(0,ne.kV)((0,A.fI)(this.element));this._cachedShadowRoot=r||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const r=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,r))}}function vt(o,r){const{top:t,bottom:n,height:i}=o,s=.05*i;return r>=t-s&&r<=t+s?1:r>=n-s&&r<=n+s?2:0}function st(o,r){const{left:t,right:n,width:i}=o,s=.05*i;return r>=t-s&&r<=t+s?1:r>=n-s&&r<=n+s?2:0}const Qe=(0,ne.i$)({passive:!1,capture:!0});let xt=(()=>{class o{constructor(t,n){this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=i=>i.isDragging(),this.pointerMove=new M.x,this.pointerUp=new M.x,this.scroll=new M.x,this._preventDefaultWhileDragging=i=>{this._activeDragInstances.length>0&&i.preventDefault()},this._persistentTouchmoveListener=i=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&i.preventDefault(),this.pointerMove.next(i))},this._document=n}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,Qe)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,Qe)}startDragging(t,n){if(!(this._activeDragInstances.indexOf(t)>-1)&&(this._activeDragInstances.push(t),1===this._activeDragInstances.length)){const i=n.type.startsWith("touch");this._globalListeners.set(i?"touchend":"mouseup",{handler:s=>this.pointerUp.next(s),options:!0}).set("scroll",{handler:s=>this.scroll.next(s),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:Qe}),i||this._globalListeners.set("mousemove",{handler:s=>this.pointerMove.next(s),options:Qe}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((s,a)=>{this._document.addEventListener(a,s.handler,s.options)})})}}stopDragging(t){const n=this._activeDragInstances.indexOf(t);n>-1&&(this._activeDragInstances.splice(n,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(t){return this._activeDragInstances.indexOf(t)>-1}scrolled(t){const n=[this.scroll];return t&&t!==this._document&&n.push(new B.y(i=>this._ngZone.runOutsideAngular(()=>{const a=d=>{this._activeDragInstances.length&&i.next(d)};return t.addEventListener("scroll",a,!0),()=>{t.removeEventListener("scroll",a,!0)}}))),(0,Oe.T)(...n)}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((t,n)=>{this._document.removeEventListener(n,t.handler,t.options)}),this._globalListeners.clear()}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(e.R0b),e.LFG(C.K0))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const at={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let Xe=(()=>{class o{constructor(t,n,i,s){this._document=t,this._ngZone=n,this._viewportRuler=i,this._dragDropRegistry=s}createDrag(t,n=at){return new G(t,n,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(t){return new Ft(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(C.K0),e.LFG(e.R0b),e.LFG(re.rL),e.LFG(xt))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const Ut=new e.OlP("CDK_DRAG_PARENT"),kt=new e.OlP("CdkDropListGroup"),yt=new e.OlP("CDK_DRAG_CONFIG");let Be=0;const lt=new e.OlP("CdkDropList");let Rt=(()=>{class o{constructor(t,n,i,s,a,d,h){this.element=t,this._changeDetectorRef=i,this._scrollDispatcher=s,this._dir=a,this._group=d,this._destroyed=new M.x,this.connectedTo=[],this.id="cdk-drop-list-"+Be++,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new e.vpe,this.entered=new e.vpe,this.exited=new e.vpe,this.sorted=new e.vpe,this._unsortedItems=new Set,this._dropListRef=n.createDropList(t),this._dropListRef.data=this,h&&this._assignDefaults(h),this._dropListRef.enterPredicate=(g,_)=>this.enterPredicate(g.data,_.data),this._dropListRef.sortPredicate=(g,_,m)=>this.sortPredicate(g,_.data,m.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),o._dropLists.push(this),d&&d._items.add(this)}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(t){this._dropListRef.disabled=this._disabled=(0,A.Ig)(t)}addItem(t){this._unsortedItems.add(t),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(t){this._unsortedItems.delete(t),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((t,n)=>t._dragRef.getVisibleElement().compareDocumentPosition(n._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const t=o._dropLists.indexOf(this);t>-1&&o._dropLists.splice(t,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(t){this._dir&&this._dir.change.pipe((0,rt.O)(this._dir.value),(0,ke.R)(this._destroyed)).subscribe(n=>t.withDirection(n)),t.beforeStarted.subscribe(()=>{const n=(0,A.Eq)(this.connectedTo).map(i=>"string"==typeof i?o._dropLists.find(a=>a.id===i):i);if(this._group&&this._group._items.forEach(i=>{-1===n.indexOf(i)&&n.push(i)}),!this._scrollableParentsResolved){const i=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(s=>s.getElementRef().nativeElement);this._dropListRef.withScrollableParents(i),this._scrollableParentsResolved=!0}t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.sortingDisabled=(0,A.Ig)(this.sortingDisabled),t.autoScrollDisabled=(0,A.Ig)(this.autoScrollDisabled),t.autoScrollStep=(0,A.su)(this.autoScrollStep,2),t.connectedTo(n.filter(i=>i&&i!==this).map(i=>i._dropListRef)).withOrientation(this.orientation)})}_handleEvents(t){t.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(n=>{this.entered.emit({container:this,item:n.item.data,currentIndex:n.currentIndex})}),t.exited.subscribe(n=>{this.exited.emit({container:this,item:n.item.data}),this._changeDetectorRef.markForCheck()}),t.sorted.subscribe(n=>{this.sorted.emit({previousIndex:n.previousIndex,currentIndex:n.currentIndex,container:this,item:n.item.data})}),t.dropped.subscribe(n=>{this.dropped.emit({previousIndex:n.previousIndex,currentIndex:n.currentIndex,previousContainer:n.previousContainer.data,container:n.container.data,item:n.item.data,isPointerOverContainer:n.isPointerOverContainer,distance:n.distance,dropPoint:n.dropPoint,event:n.event}),this._changeDetectorRef.markForCheck()})}_assignDefaults(t){const{lockAxis:n,draggingDisabled:i,sortingDisabled:s,listAutoScrollDisabled:a,listOrientation:d}=t;this.disabled=i??!1,this.sortingDisabled=s??!1,this.autoScrollDisabled=a??!1,this.orientation=d||"vertical",n&&(this.lockAxis=n)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(t=>t._dragRef))}}return o._dropLists=[],o.\u0275fac=function(t){return new(t||o)(e.Y36(e.SBq),e.Y36(Xe),e.Y36(e.sBO),e.Y36(re.mF),e.Y36(je.Is,8),e.Y36(kt,12),e.Y36(yt,8))},o.\u0275dir=e.lG2({type:o,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(t,n){2&t&&(e.uIk("id",n.id),e.ekj("cdk-drop-list-disabled",n.disabled)("cdk-drop-list-dragging",n._dropListRef.isDragging())("cdk-drop-list-receiving",n._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],data:["cdkDropListData","data"],orientation:["cdkDropListOrientation","orientation"],id:"id",lockAxis:["cdkDropListLockAxis","lockAxis"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[e._Bn([{provide:kt,useValue:void 0},{provide:lt,useExisting:o}])]}),o})();const ct=new e.OlP("CdkDragHandle"),dt=new e.OlP("CdkDragPlaceholder"),Nt=new e.OlP("CdkDragPreview");let On=(()=>{class o{constructor(t){this.templateRef=t,this._matchSize=!1}get matchSize(){return this._matchSize}set matchSize(t){this._matchSize=(0,A.Ig)(t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.Rgc))},o.\u0275dir=e.lG2({type:o,selectors:[["ng-template","cdkDragPreview",""]],inputs:{data:"data",matchSize:"matchSize"},features:[e._Bn([{provide:Nt,useExisting:o}])]}),o})(),En=(()=>{class o{constructor(t,n,i,s,a,d,h,g,_,m,w){this.element=t,this.dropContainer=n,this._ngZone=s,this._viewContainerRef=a,this._dir=h,this._changeDetectorRef=_,this._selfHandle=m,this._parentDrag=w,this._destroyed=new M.x,this.started=new e.vpe,this.released=new e.vpe,this.ended=new e.vpe,this.entered=new e.vpe,this.exited=new e.vpe,this.dropped=new e.vpe,this.moved=new B.y(q=>{const V=this._dragRef.moved.pipe((0,$e.U)(j=>({source:this,pointerPosition:j.pointerPosition,event:j.event,delta:j.delta,distance:j.distance}))).subscribe(q);return()=>{V.unsubscribe()}}),this._dragRef=g.createDrag(t,{dragStartThreshold:d&&null!=d.dragStartThreshold?d.dragStartThreshold:5,pointerDirectionChangeThreshold:d&&null!=d.pointerDirectionChangeThreshold?d.pointerDirectionChangeThreshold:5,zIndex:d?.zIndex}),this._dragRef.data=this,o._dragInstances.push(this),d&&this._assignDefaults(d),n&&(this._dragRef._withDropContainer(n._dropListRef),n.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(t){this._disabled=(0,A.Ig)(t),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(t){this._dragRef.setFreeDragPosition(t)}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,Ze.q)(1),(0,ke.R)(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(t){const n=t.rootElementSelector,i=t.freeDragPosition;n&&!n.firstChange&&this._updateRootElement(),i&&!i.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const t=o._dragInstances.indexOf(this);t>-1&&o._dragInstances.splice(t,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){const t=this.element.nativeElement;let n=t;this.rootElementSelector&&(n=void 0!==t.closest?t.closest(this.rootElementSelector):t.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(n||t)}_getBoundaryElement(){const t=this.boundaryElement;return t?"string"==typeof t?this.element.nativeElement.closest(t):(0,A.fI)(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){const n=this._dir,i=this.dragStartDelay,s=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,a=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.dragStartDelay="object"==typeof i&&i?i:(0,A.su)(i),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(s).withPreviewTemplate(a).withPreviewContainer(this.previewContainer||"global"),n&&t.withDirection(n.value)}}),t.beforeStarted.pipe((0,Ze.q)(1)).subscribe(()=>{if(this._parentDrag)return void t.withParent(this._parentDrag._dragRef);let n=this.element.nativeElement.parentElement;for(;n;){if(n.classList.contains("cdk-drag")){t.withParent(o._dragInstances.find(i=>i.element.nativeElement===n)?._dragRef||null);break}n=n.parentElement}})}_handleEvents(t){t.started.subscribe(n=>{this.started.emit({source:this,event:n.event}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(n=>{this.released.emit({source:this,event:n.event})}),t.ended.subscribe(n=>{this.ended.emit({source:this,distance:n.distance,dropPoint:n.dropPoint,event:n.event}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(n=>{this.entered.emit({container:n.container.data,item:this,currentIndex:n.currentIndex})}),t.exited.subscribe(n=>{this.exited.emit({container:n.container.data,item:this})}),t.dropped.subscribe(n=>{this.dropped.emit({previousIndex:n.previousIndex,currentIndex:n.currentIndex,previousContainer:n.previousContainer.data,container:n.container.data,isPointerOverContainer:n.isPointerOverContainer,item:this,distance:n.distance,dropPoint:n.dropPoint,event:n.event})})}_assignDefaults(t){const{lockAxis:n,dragStartDelay:i,constrainPosition:s,previewClass:a,boundaryElement:d,draggingDisabled:h,rootElementSelector:g,previewContainer:_}=t;this.disabled=h??!1,this.dragStartDelay=i||0,n&&(this.lockAxis=n),s&&(this.constrainPosition=s),a&&(this.previewClass=a),d&&(this.boundaryElement=d),g&&(this.rootElementSelector=g),_&&(this.previewContainer=_)}_setupHandlesListener(){this._handles.changes.pipe((0,rt.O)(this._handles),(0,me.b)(t=>{const n=t.filter(i=>i._parentDrag===this).map(i=>i.element);this._selfHandle&&this.rootElementSelector&&n.push(this.element),this._dragRef.withHandles(n)}),(0,fe.w)(t=>(0,Oe.T)(...t.map(n=>n._stateChanges.pipe((0,rt.O)(n))))),(0,ke.R)(this._destroyed)).subscribe(t=>{const n=this._dragRef,i=t.element.nativeElement;t.disabled?n.disableHandle(i):n.enableHandle(i)})}}return o._dragInstances=[],o.\u0275fac=function(t){return new(t||o)(e.Y36(e.SBq),e.Y36(lt,12),e.Y36(C.K0),e.Y36(e.R0b),e.Y36(e.s_b),e.Y36(yt,8),e.Y36(je.Is,8),e.Y36(Xe),e.Y36(e.sBO),e.Y36(ct,10),e.Y36(Ut,12))},o.\u0275dir=e.lG2({type:o,selectors:[["","cdkDrag",""]],contentQueries:function(t,n,i){if(1&t&&(e.Suo(i,Nt,5),e.Suo(i,dt,5),e.Suo(i,ct,5)),2&t){let s;e.iGM(s=e.CRH())&&(n._previewTemplate=s.first),e.iGM(s=e.CRH())&&(n._placeholderTemplate=s.first),e.iGM(s=e.CRH())&&(n._handles=s)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(t,n){2&t&&e.ekj("cdk-drag-disabled",n.disabled)("cdk-drag-dragging",n._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[e._Bn([{provide:Ut,useExisting:o}]),e.TTD]}),o})(),Pn=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[Xe],imports:[re.ZD]}),o})(),In=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[C.ez]}),o})();var R=x(433);let Dn=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[C.ez]}),o})(),Fn=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[C.ez]}),o})(),ln=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[C.ez,R.u5]}),o})();var pt=x(9646),Un=x(4707),cn=x(1848),zt=x(9300),dn=x(6099),pn=x(262);function Wt(o){return Boolean(o.parentElement&&"picture"===o.parentElement.nodeName.toLowerCase())}function et(o){return"img"===o.nodeName.toLowerCase()}function Ye(o,r,t){return et(o)?t&&"srcset"in o?o.srcset=r:o.src=r:o.style.backgroundImage=`url('${r}')`,o}function tt(o){return r=>{const t=r.parentElement.getElementsByTagName("source");for(let n=0;n<t.length;n++){const i=t[n].getAttribute(o);i&&("srcset"in t[n]?t[n].srcset=i:t[n].src=i)}}}const bt=tt("defaultImage"),Tt=tt("lazyLoad"),Gt=tt("errorImage");function Vt(o){return(r,t,n)=>{et(r)&&Wt(r)&&o(r),t&&Ye(r,t,n)}}const kn=Vt(bt),Ht=Vt(Tt),ye=Vt(Gt);function Pe(o,r){o.className=o.className.replace(r,"")}function nt(o,r){o.className.includes(r)||(o.className+=` ${r}`)}class un extends class Le extends class ht{constructor(){this.navigator=function hn(){return typeof window<"u"?window.navigator:void 0}()}setPlatformId(r){this.platformId=r}onDestroy(r){}onAttributeChange(r){}}{setup(r){kn(r.element,r.defaultImagePath,r.useSrcset),r.imagePath&&nt(r.element,"ng-lazyloading"),function Ie(o,r){return o.className&&o.className.includes(r)}(r.element,"ng-lazyloaded")&&Pe(r.element,"ng-lazyloaded")}finally(r){nt(r.element,"ng-lazyloaded"),Pe(r.element,"ng-lazyloading")}loadImage(r){if(this.skipLazyLoading(r))return[r.imagePath];const{element:t,useSrcset:n,imagePath:i,decode:s}=r;let a;return et(t)&&Wt(t)?(a=t.parentNode.cloneNode(!0).getElementsByTagName("img")[0],Tt(a),Ye(a,i,n)):(a=new Image,et(t)&&t.referrerPolicy&&(a.referrerPolicy=t.referrerPolicy),et(t)&&t.sizes&&(a.sizes=t.sizes),n&&"srcset"in a?a.srcset=i:a.src=i),s&&a.decode?a.decode().then(()=>i):new Promise((d,h)=>{a.onload=()=>d(i),a.onerror=()=>h(null)})}setErrorImage(r,t){const{element:n,useSrcset:i,errorImagePath:s}=t;ye(n,s,i),nt(n,"ng-failed-lazyloaded")}setLoadedImage(r,t){const{element:n,useSrcset:i}=t;Ht(n,r,i)}isDisabled(){return(0,C.PM)(this.platformId)&&!this.isBot()}skipLazyLoading(r){return this.isBot(r)}isBot(r){return!!this.navigator?.userAgent&&/googlebot|bingbot|yandex|baiduspider|facebookexternalhit|twitterbot|rogerbot|linkedinbot|embedly|quora\ link\ preview|showyoubot|outbrain|pinterest\/0\.|pinterestbot|slackbot|vkShare|W3C_Validator|whatsapp|duckduckbot|prerender/i.test(this.navigator.userAgent)}}{constructor(){super(...arguments),this.observers=new WeakMap,this.intersectionSubject=new M.x,this.uniqKey={}}getObservable(r){if(this.skipLazyLoading(r))return(0,pt.of)({isIntersecting:!0});if(r.customObservable)return r.customObservable;const t=r.scrollContainer||this.uniqKey,n={root:r.scrollContainer||null};r.offset&&(n.rootMargin=`${r.offset}px`);let i=this.observers.get(t);return i||(i=new IntersectionObserver(s=>this.loadingCallback(s),n),this.observers.set(t,i)),i.observe(r.element),B.y.create(s=>{const a=this.intersectionSubject.pipe((0,zt.h)(d=>d.target===r.element)).subscribe(s);return()=>{a.unsubscribe(),i.unobserve(r.element)}})}isVisible(r){return r.isIntersecting}loadingCallback(r){r.forEach(t=>this.intersectionSubject.next(t))}}const Mt=new e.OlP("LazyLoadImageHooks");let Se=(()=>{class o{constructor(t,n,i,s){this.onStateChange=new e.vpe,this.elementRef=t,this.ngZone=n,this.propertyChanges$=new Un.t,this.hooks=s,this.hooks.setPlatformId(i),this.uid=Math.random().toString(36).substr(2,9)}ngOnChanges(){!0===this.debug&&!this.debugSubscription&&(this.debugSubscription=this.onStateChange.subscribe(t=>console.log(t))),this.propertyChanges$.next({element:this.elementRef.nativeElement,imagePath:this.lazyImage,defaultImagePath:this.defaultImage,errorImagePath:this.errorImage,useSrcset:this.useSrcset,offset:this.offset?0|this.offset:0,scrollContainer:this.scrollTarget,customObservable:this.customObservable,decode:this.decode,onStateChange:this.onStateChange,id:this.uid})}ngAfterContentInit(){if(this.hooks.isDisabled())return null;this.ngZone.runOutsideAngular(()=>{this.loadSubscription=this.propertyChanges$.pipe((0,me.b)(t=>this.hooks.onAttributeChange(t)),(0,me.b)(t=>t.onStateChange.emit({reason:"setup"})),(0,me.b)(t=>this.hooks.setup(t)),(0,fe.w)(t=>t.imagePath?this.hooks.getObservable(t).pipe(function gn(o,r){return t=>t.pipe((0,me.b)(n=>r.onStateChange.emit({reason:"observer-emit",data:n})),(0,zt.h)(n=>o.isVisible(n,r)),(0,Ze.q)(1),(0,me.b)(()=>r.onStateChange.emit({reason:"start-loading"})),(0,dn.z)(()=>o.loadImage(r)),(0,me.b)(()=>r.onStateChange.emit({reason:"mount-image"})),(0,me.b)(n=>o.setLoadedImage(n,r)),(0,me.b)(()=>r.onStateChange.emit({reason:"loading-succeeded"})),(0,$e.U)(()=>!0),(0,pn.K)(n=>(r.onStateChange.emit({reason:"loading-failed",data:n}),o.setErrorImage(n,r),(0,pt.of)(!1))),(0,me.b)(()=>{r.onStateChange.emit({reason:"finally"}),o.finally(r)}))}(this.hooks,t)):(0,cn.F)())).subscribe({next:()=>null})})}ngOnDestroy(){this.propertyChanges$.pipe((0,Ze.q)(1)).subscribe({next:t=>this.hooks.onDestroy(t)}).unsubscribe(),this.loadSubscription?.unsubscribe(),this.debugSubscription?.unsubscribe()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.SBq),e.Y36(e.R0b),e.Y36(e.Lbi),e.Y36(Mt))},o.\u0275dir=e.lG2({type:o,selectors:[["","lazyLoad",""]],inputs:{lazyImage:["lazyLoad","lazyImage"],defaultImage:"defaultImage",errorImage:"errorImage",scrollTarget:"scrollTarget",customObservable:"customObservable",offset:"offset",useSrcset:"useSrcset",decode:"decode",debug:"debug"},outputs:{onStateChange:"onStateChange"},features:[e.TTD]}),o})(),qt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[{provide:Mt,useClass:un}]}),o})();class ve{constructor(r,t,n,i){this.left=r,this.top=t,this.right=n,this.bottom=i}static fromElement(r){const{left:t,top:n,right:i,bottom:s}=r.getBoundingClientRect();return 0===t&&0===n&&0===i&&0===s?ve.empty:new ve(t,n,i,s)}static fromWindow(r){return new ve(0,0,r.innerWidth,r.innerHeight)}inflate(r){this.left-=r,this.top-=r,this.right+=r,this.bottom+=r}intersectsWith(r){return r.left<this.right&&this.left<r.right&&r.top<this.bottom&&this.top<r.bottom}getIntersectionWith(r){const t=Math.max(this.left,r.left),n=Math.max(this.top,r.top),i=Math.min(this.right,r.right),s=Math.min(this.bottom,r.bottom);return i>=t&&s>=n?new ve(t,n,i,s):ve.empty}}ve.empty=new ve(0,0,0,0);var Kt=x(6818),$t=x(582),ae=x(651),it=x(9631),Zn=x(8071),fn=x(4482),jt=x(2733);function Xt(o,r=1/0,t){return r=(r||0)<1?1/0:r,(0,fn.e)((n,i)=>(0,jt.p)(n,i,o,r,void 0,!0,t))}var _n=x(5684),vn=x(515);const f=3600,T=24*f,F=7*T;class ${}let Ae=(()=>{class o extends ${tick(t){return(0,pt.of)(0).pipe(Xt(()=>{const n=Date.now(),i=Math.round(Math.abs(n-t)/1e3),s=i<60?1e3:i<f?6e4:i<T?1e3*f:0;return s?(0,ie.H)(s):(0,vn.c)()}),(0,_n.T)(1))}}return o.\u0275fac=function(){let r;return function(n){return(r||(r=e.n5z(o)))(n||o)}}(),o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})(),en=(()=>{class o{constructor(){this.changes=new M.x}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();const Jn=function(o){const r=Date.now(),t=Math.round(Math.abs(r-o)/1e3),n=o<r?"ago":"from now",[i,s]=t<60?[Math.round(t),"second"]:t<f?[Math.round(t/60),"minute"]:t<T?[Math.round(t/f),"hour"]:t<F?[Math.round(t/T),"day"]:t<2592e3?[Math.round(t/F),"week"]:t<31536e3?[Math.round(t/2592e3),"month"]:[Math.round(t/31536e3),"year"];return{value:i,unit:s,suffix:n}};class wt{}let Qn=(()=>{class o extends wt{format(t){const{suffix:n,value:i,unit:s}=Jn(t);return this.parse(i,s,n)}parse(t,n,i){return 1!==t&&(n+="s"),t+" "+n+" "+i}}return o.\u0275fac=function(){let r;return function(n){return(r||(r=e.n5z(o)))(n||o)}}(),o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})(),vi=(()=>{class o extends wt{constructor(t){super(),this.intl=t}format(t){const{suffix:n,value:i,unit:s}=Jn(t);return this.parse(i,s,n,Date.now(),t)}parse(t,n,i,s,a){"week"===n&&!this.intl.strings.week&&!this.intl.strings.weeks&&(t=Math.round(Math.abs(s-a)/864e5),n="day");const d=this.normalizeFn(t,s-a,this.intl.strings.numbers),h=[];return"ago"===i&&this.intl.strings.prefixAgo&&h.push(d(this.intl.strings.prefixAgo)),"from now"===i&&this.intl.strings.prefixFromNow&&h.push(d(this.intl.strings.prefixFromNow)),h.push(d(t>1?this.intl.strings[n+"s"]||this.intl.strings[n]||"%d "+n:this.intl.strings[n]||this.intl.strings[n+"s"]||"%d "+n)),"ago"===i&&this.intl.strings.suffixAgo&&h.push(d(this.intl.strings.suffixAgo)),"from now"===i&&this.intl.strings.suffixFromNow&&h.push(d(this.intl.strings.suffixFromNow)),h.join("string"==typeof this.intl.strings.wordSeparator?this.intl.strings.wordSeparator:" ")}normalizeNumber(t,n){return t&&10===t.length?String(n).split("").map(i=>i.match(/^[0-9]$/)?t[parseInt(i,10)]:i).join(""):String(n)}normalizeFn(t,n,i){return s=>"function"==typeof s?s(t,n).replace(/%d/g,this.normalizeNumber(i,t)):s.replace(/%d/g,this.normalizeNumber(i,t))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(en))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})(),Bn=(()=>{class o{constructor(t,n,i,s,a){this.cd=n,this.clock=a,this.stateChanges=new M.x,this._live=!0,t&&(this.intlSubscription=t.changes.subscribe(()=>this.stateChanges.next())),this.stateChanges.subscribe(()=>{this.setContent(s.nativeElement,i.format(this.date)),this.cd.markForCheck()})}get date(){return this._date}set date(t){if(this._date=function p(o){const r=new Date(o);if(!Number.isNaN(r.valueOf()))return r;const t=String(o).match(/\d+/g);if(null===t||t.length<=2)return r;{const[n,i,...s]=t.map(a=>parseInt(a,10));return new Date(Date.UTC(n,i-1,...s))}}(t).valueOf(),!this._date)throw new SyntaxError(`Wrong parameter in TimeagoDirective. Expected a valid date, received: ${t}`);this.clockSubscription&&(this.clockSubscription.unsubscribe(),this.clockSubscription=void 0),this.clockSubscription=this.clock.tick(this.date).pipe((0,zt.h)(()=>this.live,this)).subscribe(()=>this.stateChanges.next())}get live(){return this._live}set live(t){this._live=function c(o){return null!=o&&"false"!=`${o}`}(t)}ngOnChanges(){this.stateChanges.next()}setContent(t,n){!function l(o){return typeof o<"u"&&null!==o}(t.textContent)?t.data=n:t.textContent=n}ngOnDestroy(){this.intlSubscription&&(this.intlSubscription.unsubscribe(),this.intlSubscription=void 0),this.clockSubscription&&(this.clockSubscription.unsubscribe(),this.clockSubscription=void 0),this.stateChanges.complete()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(en,8),e.Y36(e.sBO),e.Y36(wt),e.Y36(e.SBq),e.Y36($))},o.\u0275dir=e.lG2({type:o,selectors:[["","timeago",""]],inputs:{date:"date",live:"live"},exportAs:["timeago"],features:[e.TTD]}),o})(),Ci=(()=>{class o{static forRoot(t={}){return{ngModule:o,providers:[t.clock||{provide:$,useClass:Ae},t.intl||[],t.formatter||{provide:wt,useClass:Qn}]}}static forChild(t={}){return{ngModule:o,providers:[t.clock||{provide:$,useClass:Ae},t.intl||[],t.formatter||{provide:wt,useClass:Qn}]}}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({}),o})(),xi=(()=>{class o extends ${constructor(){super(...arguments),this.minute=60,this.hour=60*this.minute,this.day=24*this.hour}tick(t){return(0,pt.of)(0).pipe(Xt(()=>{const n=Date.now(),i=Math.round(Math.abs(n-t)/1e3),s=i<this.minute||i<this.hour?1e3*this.minute:i<this.day?1e3*this.hour:0;return s?(0,ie.H)(s):vn.E}),(0,_n.T)(1))}}return o.\u0275fac=function(){let r;return function(n){return(r||(r=e.n5z(o)))(n||o)}}(),o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();var Et,yi=x(5254),L=x(5861),St=x(1309),Ne=(()=>{return(o=Ne||(Ne={})).FILE_SHOW_LINKS="fileLinks",o.FILE_EDIT="fileEdit",o.DELETE="delete",o.RENAME="rename",o.MOVE="move",Ne;var o})(),H=(()=>{return(o=H||(H={})).FILE="file",o.FOLDER="folder",H;var o})(),At=(()=>{return(o=At||(At={})).FILENAME="filename",o.SIZE="size",o.TIME="time",o.EXTENSION="ext",At;var o})(),ze=(()=>{return(o=ze||(ze={})).GRID="grid",o.LIST="list",ze;var o})(),pe=(()=>{return(o=pe||(pe={})).W_768_I_1="(max-width: 767.98px)",o.W_933_I_2="(min-width: 768px) and (max-width: 933.98px)",o.W_960_I_3="(min-width: 934px) and (max-width: 959.98px)",o.W_1226_I_2="(min-width: 960px) and (max-width: 1225.98px)",o.W_1540_I_3="(min-width: 1226px) and (max-width: 1539.98px)",o.W_1854_I_4="(min-width: 1540px) and (max-width: 1853.98px)",o.W_2168_I_5="(min-width: 1854px) and (max-width: 2167.98px)",o.W_2482_I_6="(min-width: 2168px) and (max-width: 2481.98px)",o.W_2796_I_7="(min-width: 2482px) and (max-width: 2795.98px)",o.W_3110_I_8="(min-width: 2796px) and (max-width: 3109.98px)",o.W_3424_I_9="(min-width: 3110px) and (max-width: 3423.98px)",o.W_3738_I_10="(min-width: 3424px)",pe;var o})(),Ot=(()=>{return(o=Ot||(Ot={})).MOVE="MOVE",o.DELETE="DELETE",o.NEW_DIR="NEW_DIR",o.UPLOAD="UPLOAD",Ot;var o})();!function(o){let r;(r=o.HeaderKeys||(o.HeaderKeys={})).UUID="x-gql-uuid"}(Et||(Et={}));var bi=x(1135),Yn=x(3905);const Rn=[{ext:["png","apng"],maxSize:15},{ext:["jpeg","jpg","jpe"],maxSize:10},{ext:["gif"],maxSize:15},{ext:["bmp"],maxSize:10},{ext:["webp","webm"],maxSize:10},{ext:["psd","xcf"],maxSize:150},{ext:["raw"],maxSize:30},{ext:["svg"],maxSize:30}].map(o=>(o.maxSize*=1048576,o));function Cn(o,r=[]){return["png","apng","jpeg","jpg","jpe","gif","svg","webp"].includes(o)&&!r.includes(o)}function Wn(o){return Cn(o,["gif","svg"])}const xn={lastPath:[],layout:{asc:!0,orderBy:At.FILENAME,type:ze.GRID},uploader:{checkImage:{time:0,active:!0}}},Gn="https://upload.forumfree.net/api/",Vn=/^(?:(?![\t\r\n])[a-zA-Z0-9_\-.\s])*$/,Ln=/^(?:(?![\t\r\n])[a-zA-Z0-9_\-\s])*$/,tn={invalidLength:!1,alreadyUsed:!1,invalidStartOrEnd:!1,invalidCharacter:!1};function Kn(o,r,t,n=[],i=""){let s={...tn};const a=o.trim();s.invalidLength=0===a.length;const d=(a+i).replace(/\s{2,}/g," ");return s.alreadyUsed=r!==a&&n.includes(d),s.invalidStartOrEnd=/(^(\s|\.))|((\s|\.)$)/.test(o),s.invalidCharacter=!(t===H.FILE?Vn.test(o):Ln.test(o)),s}var Ei=x(1042),Pi=x(5395),$n=x(2381),Ii=x(3138);let Di=(()=>{class o{constructor(t){this.globalsService=t,this.ffuid="",this.cache={},this.profileSubscription=this.globalsService.profileObservable.subscribe(n=>{this.ffuid=n?n.user.ffuid:""})}getItem(t){const n=this.createKey(t);if(this.cache.hasOwnProperty(n))return this.cache[n]}setItem(t,n){this.cache[this.createKey(t)]=n}removeItem(t){const n=this.createKey(t);if(this.cache.hasOwnProperty(n)){if(this.cache[n].folders.length)for(const i of this.cache[n].folders)this.removeItem([...t,i.name]);return delete this.cache[n],!0}return!1}addEntities(t,n,i=H.FILE){const s=this.createKey(t);return!!this.cache.hasOwnProperty(s)&&(Array.isArray(n)||(n=[n]),i===H.FILE?this.cache[s].files.unshift(...n):this.cache[s].folders.unshift(...n),!0)}removeEntities(t,n,i=H.FILE){const s=this.createKey(t);if(!this.cache.hasOwnProperty(s))return!1;const a=i===H.FILE?"files":"folders";Array.isArray(n)||(n=[n]);let d=!1;for(const h of n){const g=this.cache[s][a].findIndex(_=>_.name===h);g>-1&&(this.cache[s][a].splice(g,1),d=!0)}return d}refactorFolderContent(t,n){const i=this.createKey(t);if(!this.cache.hasOwnProperty(i))return!1;n.endsWith("/")||(n+="/");for(const s of this.cache[i].folders)s.url=n+s.name;for(const s of this.cache[i].files)s.url=s.embedUrl=n+s.name,s.time=Date.now();return!0}createKey(t){return`${this.ffuid}/${t.join("/")}`}ngOnDestroy(){this.profileSubscription.unsubscribe()}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(Ii.d))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var jn=x(5044);let Fi=(()=>{class o{constructor(t){this.preferencesService=t}get preferences(){return this.preferencesService.getItem(jn.Ye.UPLOAD)||xn}set preferences(t){this.preferencesService.setItem(jn.Ye.UPLOAD,t)}get lastFolderPath(){return this.preferences.lastPath||xn.lastPath}set lastFolderPath(t){const n=this.preferences;n.lastPath=t,this.preferences=n}get layoutOptions(){const t=xn.layout,n=this.preferences.layout;return n&&0===Object.keys(t).filter(i=>!n.hasOwnProperty(i)).length?n:t}set layoutOptions(t){const n=this.preferences;n.layout=t,this.preferences=n}get uploader(){const t=this.preferences.uploader||xn.uploader;return!t.checkImage.active&&Date.now()-t.checkImage.time>6048e5&&(t.checkImage.active=!0,this.uploader=t),t}set uploader(t){const n=this.preferences;n.uploader=t,this.preferences=n}}return o.\u0275fac=function(t){return new(t||o)(e.LFG($n.y))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var nn=x(529);let We=(()=>{class o{constructor(t,n,i,s,a){this.graphqlService=t,this.preferencesService=n,this.uploadCacheService=i,this.uploadPreferencesService=s,this.http=a,this.uploaderOptionsObject={compress:!0},this.actionSubject=new M.x,this.uploadingFileQueueSubject=new M.x,this.uploadingFileErrorSubject=new M.x,this.currentFolderPathSubject=new M.x,this.layoutOptionsSubject=new M.x,this.renameFileSubject=new M.x,this.entityPendingSubject=new M.x,this.deleteFileSubject=new M.x,this.uploadedFileSubject=new M.x,this.draggedFileListSubject=new M.x,this.startUploadSubject=new M.x,this.selectedFileListArray=[],this.selectedFileListSubject=new bi.X(this.selectedFileListArray)}get cache(){return this.uploadCacheService}get preferences(){return this.uploadPreferencesService}setGqlIdHeader(){this.graphqlService.safeSetGlobalHeader(Et.HeaderKeys.UUID,(0,Ei.Z)())}removeGqlIdHeader(){this.graphqlService.removeGlobalHeader(Et.HeaderKeys.UUID)}getGqlIdHeader(){return this.graphqlService.getGlobalHeader(Et.HeaderKeys.UUID)||""}getFileList(t,n){var i=this;return(0,L.Z)(function*(){const s=i.uploadCacheService.getItem(t);if(s)return s;const a=(yield i.graphqlService.query({query:"\nquery UploadEntitiesListToken($scope: String, $target: String!) {\n    uploadEntitiesListToken(scope: $scope, target: $target)\n}",variables:{scope:n,target:t.join("/")}})).data.uploadEntitiesListToken,d=yield i.sendRequest(a),g={files:d.files.map(_=>{const m=i.getFilenameInfo(_.url);return{..._,time:1e3*_.time,filename:m.filename,ext:m.ext,isImage:Cn(m.ext),embedUrl:`${_.url}?t=${_.time}`}}),folders:d.folders};return i.uploadCacheService.setItem(t,g),g})()}createDirectory(t,n){var i=this;return(0,L.Z)(function*(){const s=(yield i.graphqlService.mutate({mutation:"\nquery UploadEntitiesCreateDirectoryToken($scope: String, $target: String!) {\n    uploadEntitiesCreateDirectoryToken(scope: $scope, target: $target)\n}",variables:{scope:n,target:t.join("/")}})).data.uploadEntitiesCreateDirectoryToken;return yield i.sendRequest(s)})()}moveRenameEntity(t,n,i,s,a){var d=this;return(0,L.Z)(function*(){s||(s=i);const h=(yield d.graphqlService.mutate({mutation:"\nquery UploadEntitiesMoveToken($scope: String, $source: String!, $target: String!) {\n    uploadEntitiesMoveToken(scope: $scope, source: $source, target: $target)\n}",variables:{scope:a,source:(t.length?`${t.join("/")}/`:"")+i,target:(n.length?`${n.join("/")}/`:"")+s}})).data.uploadEntitiesMoveToken;return yield d.sendRequest(h)})()}deleteEntity(t,n,i){var s=this;return(0,L.Z)(function*(){const a=(yield s.graphqlService.mutate({mutation:"\nquery UploadEntitiesDeleteToken($scope: String, $target: String!) {\n    uploadEntitiesDeleteToken(scope: $scope, target: $target)\n}",variables:{scope:i,target:(t.length?`${t.join("/")}/`:"")+n}})).data.uploadEntitiesDeleteToken;return yield s.sendRequest(a),!0})()}getHostToken(t,n,i){var s=this;return(0,L.Z)(function*(){return(yield s.graphqlService.query({query:"\nquery UploadEntitiesHostToken($scope: String, $target: String!) {\n    uploadEntitiesHostToken(scope: $scope, target: $target)\n}",variables:{scope:i,target:(t.length?`${t.join("/")}/`:"")+n}})).data.uploadEntitiesHostToken})()}sendRequest(t){return(0,L.Z)(function*(){const i=yield(yield fetch(Gn,{method:"POST",referrer:document.URL+"-google",referrerPolicy:"unsafe-url",headers:{"Content-Type":"application/json"},body:JSON.stringify({payload:t})})).json();if(i.error&&0!==i.error.trim().length)throw new Error(i.error);return i.success})()}subscribeForChanges(t,n){var i=this;return(0,L.Z)(function*(){return yield i.graphqlService.subscribe({query:"\nsubscription UploadEntities($scope: String) {\n    uploadEntities(scope: $scope) {\n        eventMessage\n        eventType\n        user {\n            avatar\n            host\n            id\n            nickname\n        }\n    }\n}",variables:{scope:n}},s=>{if(!s.data?.uploadEntities)return;const a=JSON.parse(s.data.uploadEntities.eventMessage);if(!a.payload.customHeaders||!a.payload.customHeaders.hasOwnProperty(Et.HeaderKeys.UUID)||a.payload.customHeaders[Et.HeaderKeys.UUID]===i.getGqlIdHeader())return;const d=(a.payload.content.source||"").split("/"),h=(a.payload.content.target||"").split("/"),g=h[h.length-1].indexOf(".")>-1;let _;try{_=JSON.parse(a.output).success||""}catch{return}t({type:s.data.uploadEntities.eventType,sourceName:d[d.length-1],sourcePaths:d.slice(0,-1),targetName:h[h.length-1],targetPaths:h.slice(0,-1),isFile:g,output:_})})})()}get uploaderOptions(){return{...this.uploaderOptionsObject}}set uploaderOptions(t){this.uploaderOptionsObject={...t}}getFilenameInfo(t){let n=t;if(t.indexOf("/")>-1){const d=t.split("/");n=d[d.length-1]}const i=n.split("."),s=i[i.length-1].toLowerCase(),a=decodeURIComponent(i.slice(0,-1).join("."));return{ext:s,filename:a,name:`${a}.${s}`}}createFileEntityFromUrl(t){const n=this.getFilenameInfo(t),i=Date.now();return{name:n.name,size:0,time:i,url:t,ext:n.ext,filename:n.filename,isImage:Cn(n.ext),embedUrl:`${t}?t=${i}`}}getFoldernameInfo(t){let n=t;n.endsWith("/")&&(n=n.slice(0,-1));const i=n.split("/");return{name:decodeURIComponent(i[i.length-1])}}getBlobFromUrl(t){var n=this;return(0,L.Z)(function*(){return yield(0,Yn.z)(n.http.get(t,{responseType:"blob"})).catch(()=>{})})()}get actionObservable(){return this.actionSubject.asObservable()}pushAction(t){this.actionSubject.next(t)}get layoutOptionsObservable(){return this.layoutOptionsSubject.asObservable()}pushLayoutOptions(t){this.preferences.layoutOptions=t,this.layoutOptionsSubject.next(t)}get currentFolderPathObservable(){return this.currentFolderPathSubject.asObservable()}pushCurrentFolderPath(t){this.preferences.lastFolderPath=t,this.currentFolderPathSubject.next(t)}get uploadingFileQueueObservable(){return this.uploadingFileQueueSubject.asObservable()}pushUploadingFileQueue(t){this.uploadingFileQueueSubject.next(t)}get uploadingFileErrorObservable(){return this.uploadingFileErrorSubject.asObservable()}pushUploadingFileError(t){this.uploadingFileErrorSubject.next(t)}get renameFileObservable(){return this.renameFileSubject.asObservable()}pushRenameFile(t){this.renameFileSubject.next(t)}get entityPendingObservable(){return this.entityPendingSubject.asObservable()}pushEntityPending(t){this.entityPendingSubject.next(t)}get deleteFileObservable(){return this.deleteFileSubject.asObservable()}pushDeleteFile(t){this.deleteFileSubject.next(t)}get uploadedFileObservable(){return this.uploadedFileSubject.asObservable()}pushUploadedFile(t){this.uploadedFileSubject.next(t)}get draggedFileListObservable(){return this.draggedFileListSubject.asObservable()}pushDraggedFileList(t){this.draggedFileListSubject.next(t)}get startUploadObservable(){return this.startUploadSubject.asObservable()}pushStartUpload(t){this.startUploadSubject.next(t)}get selectedFileListObservable(){return this.selectedFileListSubject.asObservable()}pushSelectedFile(t){if(Array.isArray(t)||(t=[t]),0===t.length)return void(this.selectedFileListArray.length>0&&(this.selectedFileListArray=[],this.selectedFileListSubject.next(this.selectedFileListArray)));let n=!1;for(const i of t){const s=this.selectedFileListArray.findIndex(a=>a.name===i.name);i.selected?-1===s&&(this.selectedFileListArray.push({name:i.name}),n=!0):s>-1&&(this.selectedFileListArray.splice(s,1),n=!0)}n&&this.selectedFileListSubject.next(this.selectedFileListArray)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(Pi.J),e.LFG($n.y),e.LFG(Di),e.LFG(Fi),e.LFG(nn.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var on=x(8367),Ui=x(5657),ki=x(8621);function Xn(o){const r=o.split(","),t=r[0].replace("data:","").replace(";base64",""),n=atob(r[1]),i=new ArrayBuffer(n.length),s=new Uint8Array(i);for(let a=0;a<n.length;a+=1)s[a]=n.charCodeAt(a);return new Blob([i],{type:t})}class ei{constructor(){this.format="png",this.maintainAspectRatio=!0,this.transform={},this.aspectRatio=1,this.resetCropOnAspectRatioChange=!0,this.resizeToWidth=0,this.resizeToHeight=0,this.cropperMinWidth=0,this.cropperMinHeight=0,this.cropperMaxHeight=0,this.cropperMaxWidth=0,this.cropperStaticWidth=0,this.cropperStaticHeight=0,this.canvasRotation=0,this.initialStepSize=3,this.roundCropper=!1,this.onlyScaleDown=!1,this.imageQuality=92,this.autoCrop=!0,this.backgroundColor=null,this.containWithinAspectRatio=!1,this.hideResizeSquares=!1,this.alignImage="center",this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.cropperScaledMaxWidth=20,this.cropperScaledMaxHeight=20,this.stepSize=this.initialStepSize}setOptions(r){Object.keys(r).filter(t=>t in this).forEach(t=>this[t]=r[t]),this.validateOptions()}setOptionsFromChanges(r){Object.keys(r).filter(t=>t in this).forEach(t=>this[t]=r[t].currentValue),this.validateOptions()}validateOptions(){if(this.maintainAspectRatio&&!this.aspectRatio)throw new Error("`aspectRatio` should > 0 when `maintainAspectRatio` is enabled")}}var be=(()=>{return(o=be||(be={})).Drag="drag",o.Move="move",o.Resize="resize",o.Pinch="pinch",be;var o})(),Nn=x(4968);function ti(o,r){return o/100*r}let zi=(()=>{class o{crop(t,n,i,s){const a=this.getImagePosition(t,n,i,s),d=a.x2-a.x1,h=a.y2-a.y1,g=document.createElement("canvas");g.width=d,g.height=h;const _=g.getContext("2d");if(!_)return null;null!=s.backgroundColor&&(_.fillStyle=s.backgroundColor,_.fillRect(0,0,d,h));const m=(s.transform.scale||1)*(s.transform.flipH?-1:1),w=(s.transform.scale||1)*(s.transform.flipV?-1:1),{translateH:q,translateV:V}=this.getCanvasTranslate(t,n,s),j=n.transformed;_.setTransform(m,0,0,w,j.size.width/2+q,j.size.height/2+V),_.translate(-a.x1/m,-a.y1/w),_.rotate((s.transform.rotate||0)*Math.PI/180),_.drawImage(j.image,-j.size.width/2,-j.size.height/2);const W={width:d,height:h,imagePosition:a,cropperPosition:{...i}};s.containWithinAspectRatio&&(W.offsetImagePosition=this.getOffsetImagePosition(t,n,i,s));const Pt=this.getResizeRatio(d,h,s);return 1!==Pt&&(W.width=Math.round(d*Pt),W.height=s.maintainAspectRatio?Math.round(W.width/s.aspectRatio):Math.round(h*Pt),function Ni(o,r,t){const n=o.width,i=o.height,s=n/(r=Math.round(r)),a=i/(t=Math.round(t)),d=Math.ceil(s/2),h=Math.ceil(a/2),g=o.getContext("2d");if(g){const _=g.getImageData(0,0,n,i),m=g.createImageData(r,t),w=_.data,q=m.data;for(let V=0;V<t;V++)for(let j=0;j<r;j++){const W=4*(j+V*r),Pt=V*a;let De=0,gt=0,sn=0,hi=0,ui=0,gi=0,mi=0;const qa=Math.floor(j*s),Ja=Math.floor(V*a);let Hn=Math.ceil((j+1)*s),qn=Math.ceil((V+1)*a);Hn=Math.min(Hn,n),qn=Math.min(qn,i);for(let wn=Ja;wn<qn;wn++){const fi=Math.abs(Pt-wn)/h,Qa=j*s,Ba=fi*fi;for(let Sn=qa;Sn<Hn;Sn++){const _i=Math.abs(Qa-Sn)/d,Qt=Math.sqrt(Ba+_i*_i);if(Qt>=1)continue;De=2*Qt*Qt*Qt-3*Qt*Qt+1;const Bt=4*(Sn+wn*n);mi+=De*w[Bt+3],sn+=De,w[Bt+3]<255&&(De=De*w[Bt+3]/250),hi+=De*w[Bt],ui+=De*w[Bt+1],gi+=De*w[Bt+2],gt+=De}}q[W]=hi/gt,q[W+1]=ui/gt,q[W+2]=gi/gt,q[W+3]=mi/sn}o.width=r,o.height=t,g.putImageData(m,0,0)}}(g,W.width,W.height)),W.base64=g.toDataURL("image/"+s.format,this.getQuality(s)),W}getCanvasTranslate(t,n,i){if("px"===i.transform.translateUnit){const s=this.getRatio(t,n);return{translateH:(i.transform.translateH||0)*s,translateV:(i.transform.translateV||0)*s}}return{translateH:i.transform.translateH?ti(i.transform.translateH,n.transformed.size.width):0,translateV:i.transform.translateV?ti(i.transform.translateV,n.transformed.size.height):0}}getRatio(t,n){return n.transformed.size.width/t.nativeElement.offsetWidth}getImagePosition(t,n,i,s){const a=this.getRatio(t,n),d={x1:Math.round(i.x1*a),y1:Math.round(i.y1*a),x2:Math.round(i.x2*a),y2:Math.round(i.y2*a)};return s.containWithinAspectRatio||(d.x1=Math.max(d.x1,0),d.y1=Math.max(d.y1,0),d.x2=Math.min(d.x2,n.transformed.size.width),d.y2=Math.min(d.y2,n.transformed.size.height)),d}getOffsetImagePosition(t,n,i,s){const h=n.transformed.size.width/t.nativeElement.offsetWidth;let g,_;(s.canvasRotation+n.exifTransform.rotate)%2?(g=(n.transformed.size.width-n.original.size.height)/2,_=(n.transformed.size.height-n.original.size.width)/2):(g=(n.transformed.size.width-n.original.size.width)/2,_=(n.transformed.size.height-n.original.size.height)/2);const m={x1:Math.round(i.x1*h)-g,y1:Math.round(i.y1*h)-_,x2:Math.round(i.x2*h)-g,y2:Math.round(i.y2*h)-_};return s.containWithinAspectRatio||(m.x1=Math.max(m.x1,0),m.y1=Math.max(m.y1,0),m.x2=Math.min(m.x2,n.transformed.size.width),m.y2=Math.min(m.y2,n.transformed.size.height)),m}getResizeRatio(t,n,i){const s=i.resizeToWidth/t,a=i.resizeToHeight/n,d=new Array;i.resizeToWidth>0&&d.push(s),i.resizeToHeight>0&&d.push(a);const h=0===d.length?1:Math.min(...d);return h>1&&!i.onlyScaleDown?h:Math.min(h,1)}getQuality(t){return Math.min(1,Math.max(0,t.imageQuality/100))}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),Hi=(()=>{class o{resetCropperPosition(t,n,i){if(!t?.nativeElement)return;const s=t.nativeElement;if(i.cropperStaticHeight&&i.cropperStaticWidth)n.x1=0,n.x2=s.offsetWidth>i.cropperStaticWidth?i.cropperStaticWidth:s.offsetWidth,n.y1=0,n.y2=s.offsetHeight>i.cropperStaticHeight?i.cropperStaticHeight:s.offsetHeight;else{const a=Math.min(i.cropperScaledMaxWidth,s.offsetWidth),d=Math.min(i.cropperScaledMaxHeight,s.offsetHeight);if(i.maintainAspectRatio)if(s.offsetWidth/i.aspectRatio<s.offsetHeight){n.x1=0,n.x2=a;const h=a/i.aspectRatio;n.y1=(s.offsetHeight-h)/2,n.y2=n.y1+h}else{n.y1=0,n.y2=d;const h=d*i.aspectRatio;n.x1=(s.offsetWidth-h)/2,n.x2=n.x1+h}else n.x1=0,n.x2=a,n.y1=0,n.y2=d}}move(t,n,i){const s=this.getClientX(t)-n.clientX,a=this.getClientY(t)-n.clientY;i.x1=n.x1+s,i.y1=n.y1+a,i.x2=n.x2+s,i.y2=n.y2+a}resize(t,n,i,s,a){const d=this.getClientX(t)-n.clientX,h=this.getClientY(t)-n.clientY;switch(n.position){case"left":i.x1=Math.min(Math.max(n.x1+d,i.x2-a.cropperScaledMaxWidth),i.x2-a.cropperScaledMinWidth);break;case"topleft":i.x1=Math.min(Math.max(n.x1+d,i.x2-a.cropperScaledMaxWidth),i.x2-a.cropperScaledMinWidth),i.y1=Math.min(Math.max(n.y1+h,i.y2-a.cropperScaledMaxHeight),i.y2-a.cropperScaledMinHeight);break;case"top":i.y1=Math.min(Math.max(n.y1+h,i.y2-a.cropperScaledMaxHeight),i.y2-a.cropperScaledMinHeight);break;case"topright":i.x2=Math.max(Math.min(n.x2+d,i.x1+a.cropperScaledMaxWidth),i.x1+a.cropperScaledMinWidth),i.y1=Math.min(Math.max(n.y1+h,i.y2-a.cropperScaledMaxHeight),i.y2-a.cropperScaledMinHeight);break;case"right":i.x2=Math.max(Math.min(n.x2+d,i.x1+a.cropperScaledMaxWidth),i.x1+a.cropperScaledMinWidth);break;case"bottomright":i.x2=Math.max(Math.min(n.x2+d,i.x1+a.cropperScaledMaxWidth),i.x1+a.cropperScaledMinWidth),i.y2=Math.max(Math.min(n.y2+h,i.y1+a.cropperScaledMaxHeight),i.y1+a.cropperScaledMinHeight);break;case"bottom":i.y2=Math.max(Math.min(n.y2+h,i.y1+a.cropperScaledMaxHeight),i.y1+a.cropperScaledMinHeight);break;case"bottomleft":i.x1=Math.min(Math.max(n.x1+d,i.x2-a.cropperScaledMaxWidth),i.x2-a.cropperScaledMinWidth),i.y2=Math.max(Math.min(n.y2+h,i.y1+a.cropperScaledMaxHeight),i.y1+a.cropperScaledMinHeight);break;case"center":const g=t.scale,_=Math.min(Math.max(a.cropperScaledMinWidth,Math.abs(n.x2-n.x1)*g),a.cropperScaledMaxWidth),m=Math.min(Math.max(a.cropperScaledMinHeight,Math.abs(n.y2-n.y1)*g),a.cropperScaledMaxHeight);i.x1=n.clientX-_/2,i.x2=n.clientX+_/2,i.y1=n.clientY-m/2,i.y2=n.clientY+m/2,i.x1<0?(i.x2-=i.x1,i.x1=0):i.x2>s.width&&(i.x1-=i.x2-s.width,i.x2=s.width),i.y1<0?(i.y2-=i.y1,i.y1=0):i.y2>s.height&&(i.y1-=i.y2-s.height,i.y2=s.height)}a.maintainAspectRatio&&this.checkAspectRatio(n.position,i,s,a)}checkAspectRatio(t,n,i,s){let a=0,d=0;switch(t){case"top":n.x2=n.x1+(n.y2-n.y1)*s.aspectRatio,a=Math.max(n.x2-i.width,0),d=Math.max(0-n.y1,0),(a>0||d>0)&&(n.x2-=d*s.aspectRatio>a?d*s.aspectRatio:a,n.y1+=d*s.aspectRatio>a?d:a/s.aspectRatio);break;case"bottom":n.x2=n.x1+(n.y2-n.y1)*s.aspectRatio,a=Math.max(n.x2-i.width,0),d=Math.max(n.y2-i.height,0),(a>0||d>0)&&(n.x2-=d*s.aspectRatio>a?d*s.aspectRatio:a,n.y2-=d*s.aspectRatio>a?d:a/s.aspectRatio);break;case"topleft":n.y1=n.y2-(n.x2-n.x1)/s.aspectRatio,a=Math.max(0-n.x1,0),d=Math.max(0-n.y1,0),(a>0||d>0)&&(n.x1+=d*s.aspectRatio>a?d*s.aspectRatio:a,n.y1+=d*s.aspectRatio>a?d:a/s.aspectRatio);break;case"topright":n.y1=n.y2-(n.x2-n.x1)/s.aspectRatio,a=Math.max(n.x2-i.width,0),d=Math.max(0-n.y1,0),(a>0||d>0)&&(n.x2-=d*s.aspectRatio>a?d*s.aspectRatio:a,n.y1+=d*s.aspectRatio>a?d:a/s.aspectRatio);break;case"right":case"bottomright":n.y2=n.y1+(n.x2-n.x1)/s.aspectRatio,a=Math.max(n.x2-i.width,0),d=Math.max(n.y2-i.height,0),(a>0||d>0)&&(n.x2-=d*s.aspectRatio>a?d*s.aspectRatio:a,n.y2-=d*s.aspectRatio>a?d:a/s.aspectRatio);break;case"left":case"bottomleft":n.y2=n.y1+(n.x2-n.x1)/s.aspectRatio,a=Math.max(0-n.x1,0),d=Math.max(n.y2-i.height,0),(a>0||d>0)&&(n.x1+=d*s.aspectRatio>a?d*s.aspectRatio:a,n.y2-=d*s.aspectRatio>a?d:a/s.aspectRatio);break;case"center":n.x2=n.x1+(n.y2-n.y1)*s.aspectRatio,n.y2=n.y1+(n.x2-n.x1)/s.aspectRatio;const h=Math.max(0-n.x1,0),g=Math.max(n.x2-i.width,0),_=Math.max(n.y2-i.height,0),m=Math.max(0-n.y1,0);(h>0||g>0||_>0||m>0)&&(n.x1+=_*s.aspectRatio>h?_*s.aspectRatio:h,n.x2-=m*s.aspectRatio>g?m*s.aspectRatio:g,n.y1+=m*s.aspectRatio>g?m:g/s.aspectRatio,n.y2-=_*s.aspectRatio>h?_:h/s.aspectRatio)}}getClientX(t){return t.touches?.[0].clientX||t.clientX||0}getClientY(t){return t.touches?.[0].clientY||t.clientY||0}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();let ni=(()=>{class o{constructor(){this.autoRotateSupported=function Ji(){return new Promise(o=>{const r=new Image;r.onload=()=>{o(1===r.width&&2===r.height)},r.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q=="})}()}loadImageFile(t,n){return new Promise((i,s)=>{const a=new FileReader;a.onload=d=>{this.loadImage(d.target.result,t.type,n).then(i).catch(s)},a.readAsDataURL(t)})}loadImage(t,n,i){return this.isValidImageType(n)?this.loadBase64Image(t,i):Promise.reject(new Error("Invalid image type"))}isValidImageType(t){return/image\/(png|jpg|jpeg|bmp|gif|tiff|webp|x-icon|vnd.microsoft.icon)/.test(t)}loadImageFromURL(t,n){return new Promise((i,s)=>{const a=new Image;a.onerror=()=>s,a.onload=()=>{const d=document.createElement("canvas"),h=d.getContext("2d");d.width=a.width,d.height=a.height,h?.drawImage(a,0,0),this.loadBase64Image(d.toDataURL(),n).then(i)},a.crossOrigin="anonymous",a.src=t})}loadBase64Image(t,n){return new Promise((i,s)=>{const a=new Image;a.onload=()=>i({originalImage:a,originalBase64:t}),a.onerror=s,a.src=t}).then(i=>this.transformImageBase64(i,n))}transformImageBase64(t,n){var i=this;return(0,L.Z)(function*(){const s=yield i.autoRotateSupported,a=yield function Qi(o){switch("string"==typeof o&&(o=function Bi(o){const r=new DataView(function Yi(o){o=o.replace(/^data\:([^\;]+)\;base64,/gim,"");const r=atob(o),t=r.length,n=new Uint8Array(t);for(let i=0;i<t;i++)n[i]=r.charCodeAt(i);return n.buffer}(o));if(65496!==r.getUint16(0,!1))return-2;const t=r.byteLength;let n=2;for(;n<t;){if(r.getUint16(n+2,!1)<=8)return-1;const i=r.getUint16(n,!1);if(n+=2,65505==i){if(1165519206!==r.getUint32(n+=2,!1))return-1;const s=18761==r.getUint16(n+=6,!1);n+=r.getUint32(n+4,s);const a=r.getUint16(n,s);n+=2;for(let d=0;d<a;d++)if(274==r.getUint16(n+12*d,s))return r.getUint16(n+12*d+8,s)}else{if(65280!=(65280&i))break;n+=r.getUint16(n,!1)}}return-1}(o)),o){case 2:return{rotate:0,flip:!0};case 3:return{rotate:2,flip:!1};case 4:return{rotate:2,flip:!0};case 5:return{rotate:1,flip:!0};case 6:return{rotate:1,flip:!1};case 7:return{rotate:3,flip:!0};case 8:return{rotate:3,flip:!1};default:return{rotate:0,flip:!1}}}(s?-1:t.originalBase64);return t.originalImage&&t.originalImage.complete?i.transformLoadedImage({original:{base64:t.originalBase64,image:t.originalImage,size:{width:t.originalImage.naturalWidth,height:t.originalImage.naturalHeight}},exifTransform:a},n):Promise.reject(new Error("No image loaded"))})()}transformLoadedImage(t,n){var i=this;return(0,L.Z)(function*(){const s=n.canvasRotation+t.exifTransform.rotate,a={width:t.original.image.naturalWidth,height:t.original.image.naturalHeight};if(0===s&&!t.exifTransform.flip&&!n.containWithinAspectRatio)return{original:{base64:t.original.base64,image:t.original.image,size:{...a}},transformed:{base64:t.original.base64,image:t.original.image,size:{...a}},exifTransform:t.exifTransform};const d=i.getTransformedSize(a,t.exifTransform,n),h=document.createElement("canvas");h.width=d.width,h.height=d.height;const g=h.getContext("2d");g?.setTransform(t.exifTransform.flip?-1:1,0,0,1,h.width/2,h.height/2),g?.rotate(Math.PI*(s/2)),g?.drawImage(t.original.image,-a.width/2,-a.height/2);const _=h.toDataURL(),m=yield i.loadImageFromBase64(_);return{original:{base64:t.original.base64,image:t.original.image,size:{...a}},transformed:{base64:_,image:m,size:{width:m.width,height:m.height}},exifTransform:t.exifTransform}})()}loadImageFromBase64(t){return new Promise((n,i)=>{const s=new Image;s.onload=()=>n(s),s.onerror=i,s.src=t})}getTransformedSize(t,n,i){const s=i.canvasRotation+n.rotate;if(i.containWithinAspectRatio){if(s%2){const d=t.height/i.aspectRatio;return{width:Math.max(t.height,t.width*i.aspectRatio),height:Math.max(t.width,d)}}{const d=t.width/i.aspectRatio;return{width:Math.max(t.width,t.height*i.aspectRatio),height:Math.max(t.height,d)}}}return s%2?{height:t.width,width:t.height}:{width:t.width,height:t.height}}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var Wi=x(1481);const Gi=["wrapper"],Vi=["sourceImage"];function Ki(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"img",4,5),e.NdJ("load",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.imageLoadedInView())})("mousedown",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.startMove(i,s.moveTypes.Drag))})("touchstart",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.startMove(i,s.moveTypes.Drag))}),e.qZA()}if(2&o){const t=e.oxw();e.Udp("visibility",t.imageVisible?"visible":"hidden")("transform",t.safeTransformStyle),e.ekj("ngx-ic-draggable",!t.disabled&&t.allowMoveImage),e.Q6J("src",t.safeImgDataUrl,e.LSH),e.uIk("alt",t.imageAltText)}}function $i(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"span",9),e.NdJ("mousedown",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.startMove(i,s.moveTypes.Resize,"topleft"))})("touchstart",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.startMove(i,s.moveTypes.Resize,"topleft"))}),e._UZ(2,"span",10),e.qZA(),e.TgZ(3,"span",11),e._UZ(4,"span",10),e.qZA(),e.TgZ(5,"span",12),e.NdJ("mousedown",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.startMove(i,s.moveTypes.Resize,"topright"))})("touchstart",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.startMove(i,s.moveTypes.Resize,"topright"))}),e._UZ(6,"span",10),e.qZA(),e.TgZ(7,"span",13),e._UZ(8,"span",10),e.qZA(),e.TgZ(9,"span",14),e.NdJ("mousedown",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.startMove(i,s.moveTypes.Resize,"bottomright"))})("touchstart",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.startMove(i,s.moveTypes.Resize,"bottomright"))}),e._UZ(10,"span",10),e.qZA(),e.TgZ(11,"span",15),e._UZ(12,"span",10),e.qZA(),e.TgZ(13,"span",16),e.NdJ("mousedown",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.startMove(i,s.moveTypes.Resize,"bottomleft"))})("touchstart",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.startMove(i,s.moveTypes.Resize,"bottomleft"))}),e._UZ(14,"span",10),e.qZA(),e.TgZ(15,"span",17),e._UZ(16,"span",10),e.qZA(),e.TgZ(17,"span",18),e.NdJ("mousedown",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.startMove(i,s.moveTypes.Resize,"top"))})("touchstart",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.startMove(i,s.moveTypes.Resize,"top"))}),e.qZA(),e.TgZ(18,"span",19),e.NdJ("mousedown",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.startMove(i,s.moveTypes.Resize,"right"))})("touchstart",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.startMove(i,s.moveTypes.Resize,"right"))}),e.qZA(),e.TgZ(19,"span",20),e.NdJ("mousedown",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.startMove(i,s.moveTypes.Resize,"bottom"))})("touchstart",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.startMove(i,s.moveTypes.Resize,"bottom"))}),e.qZA(),e.TgZ(20,"span",21),e.NdJ("mousedown",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.startMove(i,s.moveTypes.Resize,"left"))})("touchstart",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.startMove(i,s.moveTypes.Resize,"left"))}),e.qZA(),e.BQk()}}function ji(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",6),e.NdJ("keydown",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.keyboardAccess(i))}),e.TgZ(1,"div",7),e.NdJ("mousedown",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.startMove(i,s.moveTypes.Move))})("touchstart",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.startMove(i,s.moveTypes.Move))}),e.qZA(),e.YNc(2,$i,21,0,"ng-container",8),e.qZA()}if(2&o){const t=e.oxw();e.Udp("top",t.cropper.y1,"px")("left",t.cropper.x1,"px")("width",t.cropper.x2-t.cropper.x1,"px")("height",t.cropper.y2-t.cropper.y1,"px")("margin-left","center"===t.alignImage?t.marginLeft:null)("visibility",t.imageVisible?"visible":"hidden"),e.ekj("ngx-ic-round",t.roundCropper),e.xp6(2),e.Q6J("ngIf",!t.hideResizeSquares)}}let Xi=(()=>{class o{constructor(t,n,i,s,a,d){this.cropService=t,this.cropperPositionService=n,this.loadImageService=i,this.sanitizer=s,this.cd=a,this.ngZone=d,this.Hammer=window?.Hammer||null,this.settings=new ei,this.setImageMaxSizeRetries=0,this.resizedWhileHidden=!1,this.marginLeft="0px",this.maxSize={width:0,height:0},this.moveTypes=be,this.imageVisible=!1,this.imageAltText="",this.format=this.settings.format,this.transform={},this.maintainAspectRatio=this.settings.maintainAspectRatio,this.aspectRatio=this.settings.aspectRatio,this.resetCropOnAspectRatioChange=this.settings.resetCropOnAspectRatioChange,this.resizeToWidth=this.settings.resizeToWidth,this.resizeToHeight=this.settings.resizeToHeight,this.cropperMinWidth=this.settings.cropperMinWidth,this.cropperMinHeight=this.settings.cropperMinHeight,this.cropperMaxHeight=this.settings.cropperMaxHeight,this.cropperMaxWidth=this.settings.cropperMaxWidth,this.cropperStaticWidth=this.settings.cropperStaticWidth,this.cropperStaticHeight=this.settings.cropperStaticHeight,this.canvasRotation=this.settings.canvasRotation,this.initialStepSize=this.settings.initialStepSize,this.roundCropper=this.settings.roundCropper,this.onlyScaleDown=this.settings.onlyScaleDown,this.imageQuality=this.settings.imageQuality,this.autoCrop=this.settings.autoCrop,this.backgroundColor=this.settings.backgroundColor,this.containWithinAspectRatio=this.settings.containWithinAspectRatio,this.hideResizeSquares=this.settings.hideResizeSquares,this.allowMoveImage=!1,this.cropper={x1:-100,y1:-100,x2:1e4,y2:1e4},this.alignImage=this.settings.alignImage,this.disabled=!1,this.hidden=!1,this.imageCropped=new e.vpe,this.startCropImage=new e.vpe,this.imageLoaded=new e.vpe,this.cropperReady=new e.vpe,this.loadImageFailed=new e.vpe,this.transformChange=new e.vpe,this.reset()}ngOnChanges(t){this.onChangesUpdateSettings(t),this.onChangesInputImage(t),this.loadedImage?.original.image.complete&&(t.containWithinAspectRatio||t.canvasRotation)&&this.loadImageService.transformLoadedImage(this.loadedImage,this.settings).then(n=>this.setLoadedImage(n)).catch(n=>this.loadImageError(n)),(t.cropper||t.maintainAspectRatio||t.aspectRatio)&&(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),!this.maintainAspectRatio||!this.resetCropOnAspectRatioChange&&this.aspectRatioIsCorrect()||!t.maintainAspectRatio&&!t.aspectRatio?t.cropper&&(this.checkCropperPosition(!1),this.doAutoCrop()):this.resetCropperPosition(),this.cd.markForCheck()),t.transform&&(this.transform=this.transform||{},this.setCssTransform(),this.doAutoCrop(),this.cd.markForCheck()),t.hidden&&this.resizedWhileHidden&&!this.hidden&&setTimeout(()=>{this.onResize(),this.resizedWhileHidden=!1})}onChangesUpdateSettings(t){this.settings.setOptionsFromChanges(t),this.settings.cropperStaticHeight&&this.settings.cropperStaticWidth&&this.settings.setOptions({hideResizeSquares:!0,cropperMinWidth:this.settings.cropperStaticWidth,cropperMinHeight:this.settings.cropperStaticHeight,cropperMaxHeight:this.settings.cropperStaticHeight,cropperMaxWidth:this.settings.cropperStaticWidth,maintainAspectRatio:!1})}onChangesInputImage(t){(t.imageChangedEvent||t.imageURL||t.imageBase64||t.imageFile)&&this.reset(),t.imageChangedEvent&&this.isValidImageChangedEvent()&&this.loadImageFile(this.imageChangedEvent.target.files[0]),t.imageURL&&this.imageURL&&this.loadImageFromURL(this.imageURL),t.imageBase64&&this.imageBase64&&this.loadBase64Image(this.imageBase64),t.imageFile&&this.imageFile&&this.loadImageFile(this.imageFile)}isValidImageChangedEvent(){return this.imageChangedEvent?.target?.files?.length>0}setCssTransform(){const t=this.transform?.translateUnit||"%";this.safeTransformStyle=this.sanitizer.bypassSecurityTrustStyle(`translate(${this.transform.translateH||0}${t}, ${this.transform.translateV||0}${t}) scaleX(`+(this.transform.scale||1)*(this.transform.flipH?-1:1)+") scaleY("+(this.transform.scale||1)*(this.transform.flipV?-1:1)+") rotate("+(this.transform.rotate||0)+"deg)")}ngOnInit(){this.settings.stepSize=this.initialStepSize,this.ngZone.runOutsideAngular(()=>{this.activatePinchGesture(),this.mouseAndTouchmoveSubscription=(0,Oe.T)((0,Nn.R)(document,"mousemove"),(0,Nn.R)(document,"touchmove")).subscribe(this.moveImg.bind(this))})}reset(){this.imageVisible=!1,this.loadedImage=void 0,this.safeImgDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",this.moveStart={active:!1,type:null,position:null,x1:0,y1:0,x2:0,y2:0,clientX:0,clientY:0},this.maxSize={width:0,height:0},this.cropper.x1=-100,this.cropper.y1=-100,this.cropper.x2=1e4,this.cropper.y2=1e4}loadImageFile(t){this.loadImageService.loadImageFile(t,this.settings).then(n=>this.setLoadedImage(n)).catch(n=>this.loadImageError(n))}loadBase64Image(t){this.loadImageService.loadBase64Image(t,this.settings).then(n=>this.setLoadedImage(n)).catch(n=>this.loadImageError(n))}loadImageFromURL(t){this.loadImageService.loadImageFromURL(t,this.settings).then(n=>this.setLoadedImage(n)).catch(n=>this.loadImageError(n))}setLoadedImage(t){this.loadedImage=t,this.safeImgDataUrl=this.sanitizer.bypassSecurityTrustResourceUrl(t.transformed.base64),this.cd.markForCheck()}loadImageError(t){console.error(t),this.loadImageFailed.emit()}imageLoadedInView(){null!=this.loadedImage&&(this.imageLoaded.emit(this.loadedImage),this.setImageMaxSizeRetries=0,setTimeout(()=>this.checkImageMaxSizeRecursively()))}checkImageMaxSizeRecursively(){this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImageLoaded()?(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.resetCropperPosition(),this.cropperReady.emit({...this.maxSize}),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout(()=>this.checkImageMaxSizeRecursively(),50))}sourceImageLoaded(){return this.sourceImage?.nativeElement?.offsetWidth>0}onResize(){!this.loadedImage||(this.hidden?this.resizedWhileHidden=!0:(this.resizeCropperPosition(),this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize()))}activatePinchGesture(){if(this.Hammer){const t=new this.Hammer(this.wrapper.nativeElement);t.get("pinch").set({enable:!0}),t.on("pinchmove",this.onPinch.bind(this)),t.on("pinchend",this.pinchStop.bind(this)),t.on("pinchstart",this.startPinch.bind(this))}else(0,e.X6Q)()&&console.warn("[NgxImageCropper] Could not find HammerJS - Pinch Gesture won't work")}resizeCropperPosition(){const t=this.sourceImage.nativeElement;(this.maxSize.width!==t.offsetWidth||this.maxSize.height!==t.offsetHeight)&&(this.cropper.x1=this.cropper.x1*t.offsetWidth/this.maxSize.width,this.cropper.x2=this.cropper.x2*t.offsetWidth/this.maxSize.width,this.cropper.y1=this.cropper.y1*t.offsetHeight/this.maxSize.height,this.cropper.y2=this.cropper.y2*t.offsetHeight/this.maxSize.height)}resetCropperPosition(){this.cropperPositionService.resetCropperPosition(this.sourceImage,this.cropper,this.settings),this.doAutoCrop(),this.imageVisible=!0}keyboardAccess(t){this.changeKeyboardStepSize(t),this.keyboardMoveCropper(t)}changeKeyboardStepSize(t){const n=+t.key;n>=1&&n<=9&&(this.settings.stepSize=n)}keyboardMoveCropper(t){if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key))return;const i=t.shiftKey?be.Resize:be.Move,s=t.altKey?function Ri(o){switch(o){case"ArrowUp":return"bottom";case"ArrowRight":return"left";case"ArrowDown":return"top";default:return"right"}}(t.key):function Zi(o){switch(o){case"ArrowUp":return"top";case"ArrowRight":return"right";case"ArrowDown":return"bottom";default:return"left"}}(t.key),a=function Li(o,r){switch(o){case"ArrowUp":return{clientX:0,clientY:-1*r};case"ArrowRight":return{clientX:r,clientY:0};case"ArrowDown":return{clientX:0,clientY:r};default:return{clientX:-1*r,clientY:0}}}(t.key,this.settings.stepSize);t.preventDefault(),t.stopPropagation(),this.startMove({clientX:0,clientY:0},i,s),this.moveImg(a),this.moveStop()}startMove(t,n,i=null){this.disabled||this.moveStart?.active&&this.moveStart?.type===be.Pinch||n===be.Drag&&!this.allowMoveImage||(t.preventDefault&&t.preventDefault(),this.moveStart={active:!0,type:n,position:i,transform:{...this.transform},clientX:this.cropperPositionService.getClientX(t),clientY:this.cropperPositionService.getClientY(t),...this.cropper})}startPinch(t){!this.safeImgDataUrl||(t.preventDefault&&t.preventDefault(),this.moveStart={active:!0,type:be.Pinch,position:"center",clientX:this.cropper.x1+(this.cropper.x2-this.cropper.x1)/2,clientY:this.cropper.y1+(this.cropper.y2-this.cropper.y1)/2,...this.cropper})}moveImg(t){if(this.moveStart.active){if(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.moveStart.type===be.Move)this.cropperPositionService.move(t,this.moveStart,this.cropper),this.checkCropperPosition(!0);else if(this.moveStart.type===be.Resize)!this.cropperStaticWidth&&!this.cropperStaticHeight&&this.cropperPositionService.resize(t,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1);else if(this.moveStart.type===be.Drag){const n=this.cropperPositionService.getClientX(t)-this.moveStart.clientX,i=this.cropperPositionService.getClientY(t)-this.moveStart.clientY;this.transform={...this.transform,translateH:(this.moveStart.transform?.translateH||0)+n,translateV:(this.moveStart.transform?.translateV||0)+i},this.setCssTransform()}this.cd.detectChanges()}}onPinch(t){this.moveStart.active&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.moveStart.type===be.Pinch&&(this.cropperPositionService.resize(t,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1)),this.cd.detectChanges())}setMaxSize(){if(this.sourceImage){const t=this.sourceImage.nativeElement;this.maxSize.width=t.offsetWidth,this.maxSize.height=t.offsetHeight,this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.maxSize.width/2+"px)")}}setCropperScaledMinSize(){this.loadedImage?.transformed?.image?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.settings.cropperScaledMinWidth=20,this.settings.cropperScaledMinHeight=20)}setCropperScaledMinWidth(){this.settings.cropperScaledMinWidth=this.cropperMinWidth>0?Math.max(20,this.cropperMinWidth/this.loadedImage.transformed.image.width*this.maxSize.width):20}setCropperScaledMinHeight(){this.settings.cropperScaledMinHeight=this.maintainAspectRatio?Math.max(20,this.settings.cropperScaledMinWidth/this.aspectRatio):this.cropperMinHeight>0?Math.max(20,this.cropperMinHeight/this.loadedImage.transformed.image.height*this.maxSize.height):20}setCropperScaledMaxSize(){if(this.loadedImage?.transformed?.image){const t=this.loadedImage.transformed.size.width/this.maxSize.width;this.settings.cropperScaledMaxWidth=this.cropperMaxWidth>20?this.cropperMaxWidth/t:this.maxSize.width,this.settings.cropperScaledMaxHeight=this.cropperMaxHeight>20?this.cropperMaxHeight/t:this.maxSize.height,this.maintainAspectRatio&&(this.settings.cropperScaledMaxWidth>this.settings.cropperScaledMaxHeight*this.aspectRatio?this.settings.cropperScaledMaxWidth=this.settings.cropperScaledMaxHeight*this.aspectRatio:this.settings.cropperScaledMaxWidth<this.settings.cropperScaledMaxHeight*this.aspectRatio&&(this.settings.cropperScaledMaxHeight=this.settings.cropperScaledMaxWidth/this.aspectRatio))}else this.settings.cropperScaledMaxWidth=this.maxSize.width,this.settings.cropperScaledMaxHeight=this.maxSize.height}checkCropperPosition(t=!1){this.cropper.x1<0&&(this.cropper.x2-=t?this.cropper.x1:0,this.cropper.x1=0),this.cropper.y1<0&&(this.cropper.y2-=t?this.cropper.y1:0,this.cropper.y1=0),this.cropper.x2>this.maxSize.width&&(this.cropper.x1-=t?this.cropper.x2-this.maxSize.width:0,this.cropper.x2=this.maxSize.width),this.cropper.y2>this.maxSize.height&&(this.cropper.y1-=t?this.cropper.y2-this.maxSize.height:0,this.cropper.y2=this.maxSize.height)}moveStop(){this.moveStart.active&&(this.moveStart.active=!1,this.moveStart?.type===be.Drag?this.transformChange.emit(this.transform):this.doAutoCrop())}pinchStop(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}doAutoCrop(){this.autoCrop&&this.crop()}crop(){if(null!=this.loadedImage?.transformed?.image){this.startCropImage.emit();const t=this.cropService.crop(this.sourceImage,this.loadedImage,this.cropper,this.settings);return null!=t&&this.imageCropped.emit(t),t}return null}aspectRatioIsCorrect(){return(this.cropper.x2-this.cropper.x1)/(this.cropper.y2-this.cropper.y1)===this.aspectRatio}ngOnDestroy(){this.mouseAndTouchmoveSubscription&&this.mouseAndTouchmoveSubscription.unsubscribe()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(zi),e.Y36(Hi),e.Y36(ni),e.Y36(Wi.H7),e.Y36(e.sBO),e.Y36(e.R0b))},o.\u0275cmp=e.Xpm({type:o,selectors:[["image-cropper"]],viewQuery:function(t,n){if(1&t&&(e.Gf(Gi,7),e.Gf(Vi,5)),2&t){let i;e.iGM(i=e.CRH())&&(n.wrapper=i.first),e.iGM(i=e.CRH())&&(n.sourceImage=i.first)}},hostVars:6,hostBindings:function(t,n){1&t&&e.NdJ("resize",function(){return n.onResize()},!1,e.Jf7)("mouseup",function(){return n.moveStop()},!1,e.evT)("touchend",function(){return n.moveStop()},!1,e.evT),2&t&&(e.Udp("text-align",n.alignImage),e.ekj("disabled",n.disabled)("ngx-ix-hidden",n.hidden))},inputs:{imageChangedEvent:"imageChangedEvent",imageURL:"imageURL",imageBase64:"imageBase64",imageFile:"imageFile",imageAltText:"imageAltText",format:"format",transform:"transform",maintainAspectRatio:"maintainAspectRatio",aspectRatio:"aspectRatio",resetCropOnAspectRatioChange:"resetCropOnAspectRatioChange",resizeToWidth:"resizeToWidth",resizeToHeight:"resizeToHeight",cropperMinWidth:"cropperMinWidth",cropperMinHeight:"cropperMinHeight",cropperMaxHeight:"cropperMaxHeight",cropperMaxWidth:"cropperMaxWidth",cropperStaticWidth:"cropperStaticWidth",cropperStaticHeight:"cropperStaticHeight",canvasRotation:"canvasRotation",initialStepSize:"initialStepSize",roundCropper:"roundCropper",onlyScaleDown:"onlyScaleDown",imageQuality:"imageQuality",autoCrop:"autoCrop",backgroundColor:"backgroundColor",containWithinAspectRatio:"containWithinAspectRatio",hideResizeSquares:"hideResizeSquares",allowMoveImage:"allowMoveImage",cropper:"cropper",alignImage:"alignImage",disabled:"disabled",hidden:"hidden"},outputs:{imageCropped:"imageCropped",startCropImage:"startCropImage",imageLoaded:"imageLoaded",cropperReady:"cropperReady",loadImageFailed:"loadImageFailed",transformChange:"transformChange"},features:[e.TTD],decls:5,vars:10,consts:[["wrapper",""],["class","ngx-ic-source-image",3,"src","visibility","transform","ngx-ic-draggable","load","mousedown","touchstart",4,"ngIf"],[1,"ngx-ic-overlay"],["class","ngx-ic-cropper","tabindex","0",3,"ngx-ic-round","top","left","width","height","margin-left","visibility","keydown",4,"ngIf"],[1,"ngx-ic-source-image",3,"src","load","mousedown","touchstart"],["sourceImage",""],["tabindex","0",1,"ngx-ic-cropper",3,"keydown"],[1,"ngx-ic-move",3,"mousedown","touchstart"],[4,"ngIf"],[1,"ngx-ic-resize","ngx-ic-topleft",3,"mousedown","touchstart"],[1,"ngx-ic-square"],[1,"ngx-ic-resize","ngx-ic-top"],[1,"ngx-ic-resize","ngx-ic-topright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-right"],[1,"ngx-ic-resize","ngx-ic-bottomright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-bottom"],[1,"ngx-ic-resize","ngx-ic-bottomleft",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-left"],[1,"ngx-ic-resize-bar","ngx-ic-top",3,"mousedown","touchstart"],[1,"ngx-ic-resize-bar","ngx-ic-right",3,"mousedown","touchstart"],[1,"ngx-ic-resize-bar","ngx-ic-bottom",3,"mousedown","touchstart"],[1,"ngx-ic-resize-bar","ngx-ic-left",3,"mousedown","touchstart"]],template:function(t,n){1&t&&(e.TgZ(0,"div",null,0),e.YNc(2,Ki,2,8,"img",1),e._UZ(3,"div",2),e.YNc(4,ji,3,15,"div",3),e.qZA()),2&t&&(e.Udp("background",n.imageVisible&&n.backgroundColor),e.xp6(2),e.Q6J("ngIf",n.safeImgDataUrl),e.xp6(1),e.Udp("width",n.maxSize.width,"px")("height",n.maxSize.height,"px")("margin-left","center"===n.alignImage?n.marginLeft:null),e.xp6(1),e.Q6J("ngIf",n.imageVisible))},dependencies:[C.O5],styles:['[_nghost-%COMP%]{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%;position:relative}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;transform-origin:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image.ngx-ic-draggable[_ngcontent-%COMP%]{user-drag:none;-webkit-user-drag:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;cursor:grab}[_nghost-%COMP%]   .ngx-ic-overlay[_ngcontent-%COMP%]{position:absolute;pointer-events:none;touch-action:none;outline:var(--cropper-overlay-color, white) solid 100vw;top:0;left:0}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{position:absolute;display:flex;color:#53535c;background:transparent;outline:rgba(255,255,255,.3) solid 100vw;outline:var(--cropper-outline-color, rgba(255, 255, 255, .3)) solid 100vw;touch-action:none}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{outline-width:100vh}}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:after{position:absolute;content:"";inset:0;pointer-events:none;border:dashed 1px;opacity:.75;color:inherit;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:focus   .ngx-ic-move[_ngcontent-%COMP%]{border-color:#1e90ff;border-width:2px}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]   .ngx-ic-square[_ngcontent-%COMP%]{display:inline-block;background:#53535C;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topleft[_ngcontent-%COMP%]{top:-12px;left:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-top[_ngcontent-%COMP%]{top:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topright[_ngcontent-%COMP%]{top:-12px;right:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-right[_ngcontent-%COMP%]{top:calc(50% - 12px);right:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomright[_ngcontent-%COMP%]{bottom:-12px;right:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomleft[_ngcontent-%COMP%]{bottom:-12px;left:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-left[_ngcontent-%COMP%]{top:calc(50% - 12px);left:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%]{position:absolute;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-top[_ngcontent-%COMP%]{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-right[_ngcontent-%COMP%]{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-left[_ngcontent-%COMP%]{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]{outline-color:transparent}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{border-radius:100%;box-shadow:0 0 0 100vw #ffffff4d;box-shadow:0 0 0 100vw var(--cropper-outline-color, rgba(255, 255, 255, .3))}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{box-shadow:0 0 0 100vh #ffffff4d;box-shadow:0 0 0 100vh var(--cropper-outline-color, rgba(255, 255, 255, .3))}}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{border-radius:100%}.disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{display:none}.ngx-ix-hidden[_nghost-%COMP%]{display:none}'],changeDetection:0}),o})();var zn=x(4029),ut=x(3450),Jt=x(5174),yn=x(2931);const eo=["modal"];function to(o,r){1&o&&(e.ynx(0),e._UZ(1,"app-loader",58),e.BQk())}function no(o,r){1&o&&(e.TgZ(0,"div",59),e._uU(1,"Se non viene rispettato l'aspect ratio, l'immagine verr\xe0 tagliata per adattarsi alle dimensioni specificate!"),e.qZA())}const io=function(){return{placement:"bottom-start"}},Ge=function(){return{placement:"bottom"}},oo=function(o,r){return{"btn-outline-warning-dark":o,"btn-warning-dark":r}},ro=function(){return{placement:"bottom",hideOnClick:!1}},ii=function(o){return{"is-invalid":o}},so=function(){return{hideOnClick:!1}};function ao(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",6)(2,"image-cropper",7),e.NdJ("cropperReady",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.cropperReadyEvent())})("imageLoaded",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.imageLoadedEvent(i))})("imageCropped",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.imageCroppedEvent(i))}),e.ALo(3,"uploadsreplace"),e.qZA()(),e.YNc(4,to,2,0,"ng-container",2),e.TgZ(5,"div",8)(6,"div",9)(7,"button",10),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.rotateLeft())}),e.TgZ(8,"div",11),e._uU(9,"rotate_left"),e.qZA()(),e.TgZ(10,"button",12),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.rotateRight())}),e.TgZ(11,"div",11),e._uU(12,"rotate_right"),e.qZA()()(),e.TgZ(13,"div",13)(14,"button",14),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.flipHorizontal())}),e.TgZ(15,"div",15),e._uU(16,"height"),e.qZA()(),e.TgZ(17,"button",16),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.flipVertical())}),e.TgZ(18,"div",11),e._uU(19,"height"),e.qZA()()(),e.TgZ(20,"div",13)(21,"button",17),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.zoomIn())}),e.TgZ(22,"div",11),e._uU(23,"zoom_in"),e.qZA()(),e.TgZ(24,"button",18),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.zoomOut())}),e.TgZ(25,"div",11),e._uU(26,"zoom_out"),e.qZA()()(),e.TgZ(27,"div",13)(28,"button",19),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.translateUp())}),e.TgZ(29,"div",20),e._uU(30,"arrow_circle_up"),e.qZA()(),e.TgZ(31,"button",21),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.translateDown())}),e.TgZ(32,"div",20),e._uU(33,"arrow_circle_down"),e.qZA()(),e.TgZ(34,"button",22),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.translateLeft())}),e.TgZ(35,"div",20),e._uU(36,"arrow_circle_left"),e.qZA()(),e.TgZ(37,"button",23),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.translateRight())}),e.TgZ(38,"div",20),e._uU(39,"arrow_circle_right"),e.qZA()()(),e.TgZ(40,"button",24,25),e.NdJ("click",function(){e.CHM(t);const i=e.MAs(41);return e.oxw(2).toggleMaintainAspectRatio(),e.KtG(i.blur())}),e.TgZ(42,"div",26),e._uU(43,"image_aspect_ratio"),e.qZA()(),e.TgZ(44,"button",27),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.resetImage())}),e.TgZ(45,"div",11),e._uU(46,"restart_alt"),e.qZA()()(),e.TgZ(47,"div",28)(48,"div",29)(49,"div",30)(50,"div",31)(51,"label",32),e._uU(52,"Rotazione libera:"),e.qZA()(),e.TgZ(53,"input",33),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.rotationInput=i)})("ngModelChange",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.updateRotation())}),e.qZA()(),e.TgZ(54,"div",34)(55,"div",31)(56,"label",35),e._uU(57,"Sposta "),e.TgZ(58,"span",36),e._uU(59,"orizz"),e.qZA(),e.TgZ(60,"span",37),e._uU(61,"orizzontalmente (px)"),e.qZA(),e._uU(62,":"),e.qZA(),e.TgZ(63,"label",38),e._uU(64,"Sposta "),e.TgZ(65,"span",36),e._uU(66,"vert"),e.qZA(),e.TgZ(67,"span",37),e._uU(68,"verticalmente (px)"),e.qZA(),e._uU(69,":"),e.qZA()(),e.TgZ(70,"div",39)(71,"input",40),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.translateH=i)})("ngModelChange",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.updateTranslate())}),e.qZA(),e.TgZ(72,"input",41),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.translateV=i)})("ngModelChange",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.updateTranslate())}),e.qZA()()()()(),e.TgZ(73,"fieldset",42)(74,"legend",43),e._uU(75,"Modifica le dimensioni"),e.qZA(),e.TgZ(76,"ul",44)(77,"li",45)(78,"div",46)(79,"div",31)(80,"label",47),e._uU(81,"Larghezza"),e.TgZ(82,"span",37),e._uU(83," (px)"),e.qZA(),e._uU(84,":"),e.qZA(),e.TgZ(85,"label",48),e._uU(86,"Altezza"),e.TgZ(87,"span",37),e._uU(88," (px)"),e.qZA(),e._uU(89,":"),e.qZA()(),e.TgZ(90,"div",39)(91,"input",49),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.imageWidth=i)})("ngModelChange",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.imageWidthInputChange())}),e.qZA(),e.TgZ(92,"span",50),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.keepAspectRationWhenScaling=!i.keepAspectRationWhenScaling)}),e.qZA(),e.TgZ(93,"input",51),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.imageHeight=i)})("ngModelChange",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.imageHeightInputChange())}),e.qZA()(),e.YNc(94,no,2,0,"div",52),e.qZA()(),e.TgZ(95,"li")(96,"div",53)(97,"input",54),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.forceDimensionsOnSave=i)}),e.qZA(),e.TgZ(98,"label",55),e._uU(99,"Salva l'immagine con le dimensioni specificate"),e.qZA()()()()(),e.TgZ(100,"div",53)(101,"input",56),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.rewriteOnSave=i)}),e.qZA(),e.TgZ(102,"label",57),e._uU(103,"Sostituisci la vecchia immagine con quella modificata"),e.qZA()(),e.BQk()}if(2&o){const t=e.oxw(2);e.xp6(2),e.Q6J("hidden",!t.isImageLoaded)("imageURL",e.lcZ(3,48,t.entity.embedUrl))("format",t.exportFormat)("aspectRatio",t.aspectRatio)("maintainAspectRatio",t.maintainAspectRatio)("canvasRotation",t.canvasRotation)("transform",t.transform),e.xp6(2),e.Q6J("ngIf",!t.isImageLoaded),e.xp6(3),e.Q6J("disableOnTouchDevice",!0)("tippyProps",e.DdM(50,io)),e.xp6(3),e.Q6J("disableOnTouchDevice",!0)("tippyProps",e.DdM(51,Ge)),e.xp6(4),e.Q6J("disableOnTouchDevice",!0)("tippyProps",e.DdM(52,Ge)),e.xp6(3),e.Q6J("disableOnTouchDevice",!0)("tippyProps",e.DdM(53,Ge)),e.xp6(4),e.Q6J("disableOnTouchDevice",!0)("tippyProps",e.DdM(54,Ge)),e.xp6(3),e.Q6J("disableOnTouchDevice",!0)("tippyProps",e.DdM(55,Ge)),e.xp6(4),e.Q6J("disableOnTouchDevice",!0)("tippyProps",e.DdM(56,Ge)),e.xp6(3),e.Q6J("disableOnTouchDevice",!0)("tippyProps",e.DdM(57,Ge)),e.xp6(3),e.Q6J("disableOnTouchDevice",!0)("tippyProps",e.DdM(58,Ge)),e.xp6(3),e.Q6J("disableOnTouchDevice",!0)("tippyProps",e.DdM(59,Ge)),e.xp6(3),e.Q6J("ngClass",e.WLB(60,oo,!t.maintainAspectRatio,t.maintainAspectRatio))("appTippy",t.maintainAspectRatio?"Trasformazione libera":"Mantieni il rapporto larghezza/altezza")("disableOnTouchDevice",!0)("tippyProps",e.DdM(63,ro)),e.xp6(4),e.Q6J("disableOnTouchDevice",!0)("tippyProps",e.DdM(64,Ge)),e.xp6(9),e.Q6J("ngModel",t.rotationInput),e.xp6(18),e.Q6J("ngModel",t.translateH),e.xp6(1),e.Q6J("ngModel",t.translateV),e.xp6(19),e.Q6J("ngClass",e.VKq(65,ii,t.isImageLoaded&&(!t.imageWidth||t.imageWidth<1)))("ngModel",t.imageWidth),e.xp6(1),e.Q6J("appTippy",t.keepAspectRationWhenScaling?"Scala liberamente":"Mantieni l'aspect ratio")("disableOnTouchDevice",!0)("tippyProps",e.DdM(67,so))("innerText",t.keepAspectRationWhenScaling?"link":"link_off"),e.xp6(1),e.Q6J("ngClass",e.VKq(68,ii,t.isImageLoaded&&(!t.imageHeight||t.imageHeight<1)))("ngModel",t.imageHeight),e.xp6(1),e.Q6J("ngIf",!t.keepAspectRationWhenScaling),e.xp6(3),e.Q6J("ngModel",t.forceDimensionsOnSave),e.xp6(4),e.Q6J("ngModel",t.rewriteOnSave)}}function lo(o,r){if(1&o&&(e.TgZ(0,"div",60)(1,"strong"),e._uU(2,"File non supportato!"),e.qZA(),e._UZ(3,"br"),e._uU(4," Purtroppo, al momento il file che si sta cercando di modificare ha un'estensione ("),e.TgZ(5,"em"),e._uU(6),e.qZA(),e._uU(7,") non supportata. Se lo si desidera, \xe8 possibile provare a convertire in autonomia il file in formato "),e.TgZ(8,"em"),e._uU(9,".jpg"),e.qZA(),e._uU(10," o "),e.TgZ(11,"em"),e._uU(12,".png"),e.qZA(),e._uU(13," e riprovare in seguito. "),e.qZA()),2&o){const t=e.oxw(2);e.xp6(6),e.hij(".",t.entity.ext,"")}}function co(o,r){if(1&o&&(e.ynx(0),e.YNc(1,ao,104,70,"ng-container",4),e.YNc(2,lo,14,1,"ng-template",null,5,e.W1O),e.BQk()),2&o){const t=e.MAs(3),n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.canImageBeCropped)("ngIfElse",t)}}function po(o,r){if(1&o){const t=e.EpF();e.ynx(0,61),e.TgZ(1,"button",62),e.NdJ("click",function(){e.CHM(t),e.oxw();const i=e.MAs(1);return e.KtG(i.close("Close click"))}),e._uU(2,"Annulla"),e.qZA(),e.TgZ(3,"button",63),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.save())}),e._uU(4,"Salva"),e.qZA(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("disabled",!t.isCropperReady||!t.canImageBeCropped||0===t.croppedImageData.length)}}let ho=(()=>{class o{constructor(t){this.uploadService=t,this.opened=!1,this.canImageBeCropped=!1,this.isCropperReady=!1,this.isImageLoaded=!1,this.croppedImageData="",this.rewriteOnSave=!1,this.imageWidth=0,this.imageHeight=0,this.keepAspectRationWhenScaling=!0,this.forceDimensionsOnSave=!1,this.exportFormat="jpeg",this.aspectRatio=4/3,this.maintainAspectRatio=!1,this.canvasRotation=0,this.transform={translateUnit:"px"},this.rotationInput=0,this.translateH=0,this.translateV=0,this.scale=1,this.translateHStep=0,this.translateVStep=0}ngOnInit(){}ngOnChanges(t){t.entity&&!t.entity.firstChange&&this.entity&&(this.canImageBeCropped=Wn(this.entity.ext),this.exportFormat=["png","apng"].includes(this.entity.ext)?"png":"webp"===this.entity.ext?"webp":"jpeg")}open(){return this.opened=!0,this.modalComponent.open()}resetOnHidden(){this.opened=!1,this.isImageLoaded=!1,this.isCropperReady=!1,this.resetImage(),this.maintainAspectRatio=!1,this.croppedImageData="",this.keepAspectRationWhenScaling=!0,this.forceDimensionsOnSave=!1,this.imageHeight=0,this.imageWidth=0,this.rewriteOnSave=!1}save(){if(!this.isCropperReady||!this.canImageBeCropped||0===this.croppedImageData.length||!this.entity)return;const t=Xn(this.croppedImageData);this.modalComponent.close();let n={compress:this.uploadService.uploaderOptions.compress,allowOverwrite:this.rewriteOnSave};this.forceDimensionsOnSave&&this.imageWidth>0&&this.imageHeight>0&&(n.compress=!0,n.imageDimensions={width:this.imageWidth,height:this.imageHeight}),this.uploadService.pushStartUpload({file:new File([t],this.entity.name,{type:t.type,lastModified:Date.now()}),options:n})}cropperReadyEvent(){this.isCropperReady=!0}imageLoadedEvent(t){this.imageWidth=t.original.size.width,this.imageHeight=t.original.size.height,this.translateHStep=Math.round(this.imageWidth/100),this.translateVStep=Math.round(this.imageHeight/100),this.aspectRatio=this.imageWidth/this.imageHeight,this.isImageLoaded=!0}imageCroppedEvent(t){this.croppedImageData=t.base64||"",this.imageWidth=t.width,this.imageHeight=t.height}imageWidthInputChange(){this.forceDimensionsOnSave=!0,this.keepAspectRationWhenScaling&&(this.imageHeight=Math.round(this.imageWidth/this.aspectRatio))}imageHeightInputChange(){this.forceDimensionsOnSave=!0,this.keepAspectRationWhenScaling&&(this.imageWidth=Math.round(this.imageHeight*this.aspectRatio))}rotateLeft(){this.canvasRotation--,this.flipAfterRotate()}rotateRight(){this.canvasRotation++,this.flipAfterRotate()}flipAfterRotate(){this.transform={...this.transform,flipH:this.transform.flipV,flipV:this.transform.flipH}}updateRotation(){this.transform={...this.transform,rotate:this.rotationInput}}updateTranslate(){this.transform={...this.transform,translateV:this.translateV,translateH:this.translateH}}flipHorizontal(){this.transform={...this.transform,flipH:!this.transform.flipH}}flipVertical(){this.transform={...this.transform,flipV:!this.transform.flipV}}zoomOut(){this.scale-=.1,this.transform={...this.transform,scale:this.scale}}zoomIn(){this.scale+=.1,this.transform={...this.transform,scale:this.scale}}toggleMaintainAspectRatio(){this.maintainAspectRatio=!this.maintainAspectRatio}translateRight(){this.translateH+=this.translateHStep,this.transform={...this.transform,translateH:this.translateH}}translateLeft(){this.translateH+=-this.translateHStep,this.transform={...this.transform,translateH:this.translateH}}translateUp(){this.translateV+=-this.translateVStep,this.transform={...this.transform,translateV:this.translateV}}translateDown(){this.translateV+=this.translateVStep,this.transform={...this.transform,translateV:this.translateV}}resetImage(){this.scale=1,this.translateH=0,this.translateV=0,this.rotationInput=0,this.canvasRotation=0,this.transform={translateUnit:"px"}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(We))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upload-crop-modal"]],viewQuery:function(t,n){if(1&t&&e.Gf(eo,5),2&t){let i;e.iGM(i=e.CRH())&&(n.modalComponent=i.first)}},inputs:{entity:"entity"},features:[e.TTD],decls:4,vars:4,consts:[["size","xl",3,"title","disableCloseButton","hidden"],["modal",""],[4,"ngIf"],["footer","",4,"ngIf"],[4,"ngIf","ngIfElse"],["noImage",""],[1,"image-cropper-container"],["alignImage","center",3,"hidden","imageURL","format","aspectRatio","maintainAspectRatio","canvasRotation","transform","cropperReady","imageLoaded","imageCropped"],[1,"image-cropper-utilities","d-flex","flex-wrap","align-items-center","py-1","mt-2","mb-1"],[1,"btn-group","my-2","me-3"],["appTippy","Ruota in senso antiorario",1,"btn","btn-outline-indigo","shadow-none",3,"disableOnTouchDevice","tippyProps","click"],[1,"d-block","material-icons"],["appTippy","Ruota in senso orario",1,"btn","btn-outline-indigo","shadow-none",3,"disableOnTouchDevice","tippyProps","click"],[1,"btn-group","me-3","my-2"],["appTippy","Rifletti orizzontalmente",1,"btn","btn-outline-primary","shadow-none",3,"disableOnTouchDevice","tippyProps","click"],[1,"d-block","material-icons","rotate-z90"],["appTippy","Rifletti verticalmente",1,"btn","btn-outline-primary","shadow-none",3,"disableOnTouchDevice","tippyProps","click"],["appTippy","Zoom in",1,"btn","btn-outline-success","shadow-none",3,"disableOnTouchDevice","tippyProps","click"],["appTippy","Zoom out",1,"btn","btn-outline-success","shadow-none",3,"disableOnTouchDevice","tippyProps","click"],["appTippy","Sposta in alto",1,"btn","btn-outline-secondary","shadow-none",3,"disableOnTouchDevice","tippyProps","click"],[1,"d-block","material-icons-outlined"],["appTippy","Sposta in basso",1,"btn","btn-outline-secondary","shadow-none",3,"disableOnTouchDevice","tippyProps","click"],["appTippy","Sposta a sinistra",1,"btn","btn-outline-secondary","shadow-none",3,"disableOnTouchDevice","tippyProps","click"],["appTippy","Sposta a destra",1,"btn","btn-outline-secondary","shadow-none",3,"disableOnTouchDevice","tippyProps","click"],[1,"btn","shadow-none","my-2","me-3",3,"ngClass","appTippy","disableOnTouchDevice","tippyProps","click"],["aspectBtn",""],[1,"material-icons","d-block"],["appTippy","Ripristina",1,"ms-lg-auto","my-2","btn","btn-danger","shadow-none",3,"disableOnTouchDevice","tippyProps","click"],[1,"container","mb-3"],[1,"row"],[1,"col","col-12","col-lg-4","px-0","pe-lg-2","mb-2","mb-lg-0"],[1,"d-flex"],["for","free-rotation",1,"fs-sm","ps-1"],["type","number","id","free-rotation",1,"form-control",3,"ngModel","ngModelChange"],[1,"col","col-12","col-lg-8","px-0","ps-lg-2","mb-2","mb-lg-0","free-translate-input-group"],["for","free-translate-h",1,"fs-sm","ps-1"],[1,"d-sm-none"],[1,"d-none","d-sm-inline"],["for","free-translate-v",1,"fs-sm","ps-1"],[1,"input-group"],["type","number","id","free-translate-h",1,"form-control",3,"ngModel","ngModelChange"],["type","number","id","free-translate-v",1,"form-control",3,"ngModel","ngModelChange"],[1,"px-3","pb-3","pt-2","rounded","mb-3","mb-1","border-dashed","border-light-gray"],[1,"legend-reset","fs-reset","px-2","mb-0"],[1,"list-unstyled","mb-0"],[1,"mb-3"],[1,"free-dimensions-input-group"],["for","free-width",1,"fs-sm","ps-1"],["for","free-height",1,"fs-sm","ps-1"],["type","number","id","free-width","min","1",1,"form-control",3,"ngClass","ngModel","ngModelChange"],[1,"material-icons","input-group-text","cursor-pointer",3,"appTippy","disableOnTouchDevice","tippyProps","innerText","click"],["type","number","id","free-height","min","1",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["class","small px-1",4,"ngIf"],[1,"form-check","form-switch"],["type","checkbox","role","switch","id","force-resize",1,"form-check-input",3,"ngModel","ngModelChange"],["for","force-resize",1,"form-check-label","me-auto"],["type","checkbox","role","switch","id","allow-rewrite",1,"form-check-input",3,"ngModel","ngModelChange"],["for","allow-rewrite",1,"form-check-label","me-auto"],["message","Caricamento del tool in corso"],[1,"small","px-1"],[1,"alert","alert-primary","text-center"],["footer",""],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(t,n){1&t&&(e.TgZ(0,"app-modal",0,1),e.NdJ("hidden",function(){return n.resetOnHidden()}),e.YNc(2,co,4,2,"ng-container",2),e.YNc(3,po,5,1,"ng-container",3),e.qZA()),2&t&&(e.Q6J("title","Modifica <em>"+(null==n.entity?null:n.entity.name)+"</em>")("disableCloseButton",!0),e.xp6(2),e.Q6J("ngIf",n.opened&&n.entity),e.xp6(1),e.Q6J("ngIf",n.opened&&n.entity))},dependencies:[C.mk,C.O5,R.Fj,R.wV,R.Wl,R.JJ,R.qQ,R.On,Xi,zn.R,ut.z,Jt.$,yn.g],styles:[".rotate-z90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-group[_ngcontent-%COMP%]{width:100%}.free-translate-input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .free-dimensions-input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex:1 1 1px}.free-dimensions-input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:nth-of-type(2){margin-left:calc(24px + 1.5rem)}@media (min-width: 992px){.rotate-group[_ngcontent-%COMP%]{width:initial}.rotate-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{max-width:100px}}"]}),o})();var uo=x(6730),go=x.n(uo);class bn{static findApp1Marker(r){const t=new DataView(r),n=new Set([65498,65497,65476,65499,65472]);for(let i=0;i<r.byteLength-2;i+=2){const s=t.getUint16(i);if(65505===s)return{offset:i,size:t.getUint16(i+2),little:18761==t.getUint16(i+8,!1)};if(n.has(s))break}}static stripAndReturnExif(r){return(0,L.Z)(function*(){const t=yield r.arrayBuffer(),n=bn.findApp1Marker(t);return n?{file:new File([t.slice(0,n.offset),t.slice(n.offset+n.size+2)],r.name,{type:r.type,lastModified:r.lastModified}),exif:t.slice(n.offset,n.offset+n.size)}:{file:r}})()}static checkImageOrientation(r){const t=new DataView(r);if(1165519206!=t.getUint32(4,!1))return-1;const n=18761==t.getUint16(10,!1);let i=10;i+=t.getUint32(i+4,n);const s=t.getUint16(i,n);i+=2;for(let a=0;a<s;a++)if(274==t.getUint16(i+12*a,n))return t.getUint16(i+12*a+8,n);return-1}}let mo=(()=>{class o{constructor(t,n,i){this.http=t,this.uploadService=n,this.loadImageService=i,this.requestSubscriptions=[]}fileToBase64(t){const n=new FileReader,i=new Promise(s=>n.addEventListener("load",()=>s(n.result)));return n.readAsDataURL(t),i}checkIfPngHasTransparency(t){var n=this;return(0,L.Z)(function*(){const i=new DataView(yield t.arrayBuffer());if(2303741511===i.getUint32(0)&&218765834===i.getUint32(4)){if(-1===[4,6].indexOf(i.getUint8(25)))return!1;const a=Object.assign(new Image,{src:yield n.fileToBase64(t)});yield new Promise(g=>a.addEventListener("load",()=>g(!0)));const d=Object.assign(document.createElement("canvas"),{width:a.width,height:a.height}).getContext("2d");if(!d)return!1;d.imageSmoothingEnabled=!1,d.drawImage(a,0,0);const h=d?.getImageData(0,0,a.width,a.height);if(h)for(let g=0;g<h.data.length;g+=4)if(h.data[g+3]<255)return!0}return!1})()}compressFileIfNeeded(t,n){var i=this;return(0,L.Z)(function*(){let s=["image/png","image/jpeg"],a={strict:!0,checkOrientation:!0,quality:.8,convertSize:1};n&&(s.push("image/webp"),a.width=n.width,a.height=n.height,a.resize="cover",a.strict=!1);const d=t.type.toLowerCase();return t.size<=4e6&&void 0===n||-1===s.indexOf(t.type.toLowerCase())?t:("image/png"===d&&(yield i.checkIfPngHasTransparency(t))&&(a.convertSize=1/0),new Promise((h,g)=>{new(go())(t,{...a,success:_=>{const m=_ instanceof Blob?new File([_],t.name,{type:t.type,lastModified:t.lastModified}):t;h(m)},error:g})}))})()}orientFileIfNeeded(t){var n=this;return(0,L.Z)(function*(){if(-1===["image/png","image/jpeg"].indexOf(t.type.toLowerCase()))return t;const s=yield bn.stripAndReturnExif(t);if(t=s.file,s.exif){const a=bn.checkImageOrientation(s.exif);if(1!==a){let d=0;switch(a){case 3:case 4:d=180;break;case 5:case 6:d=90;break;case 7:case 8:d=270}const h=yield n.fileToBase64(t),g=yield new Promise((m,w)=>{const q=new Image;q.onload=()=>m({originalImage:q,originalBase64:h}),q.onerror=w,q.src=h}),_=yield n.loadImageService.transformLoadedImage({original:{base64:g.originalBase64,image:g.originalImage,size:{width:g.originalImage.naturalWidth,height:g.originalImage.naturalHeight}},exifTransform:{flip:[2,4,5,7].includes(a),rotate:d/90}},new ei);t=new File([Xn(_.transformed.base64)],t.name,{type:t.type,lastModified:Date.now()})}}return t})()}upload(t,n,i,s=!1){const a=new M.x,d=new FormData;d.append("payload",i),d.append("upload",t,t.name),s&&d.append("allowOverwrite","1");const h=this.http.request(new nn.aW("POST",Gn,d,{reportProgress:!0,responseType:"json"}));return this.requestSubscriptions.push(h.subscribe({next:g=>{if(g.type===nn.dt.UploadProgress){if(!g.total||(n.progress=Math.round(50*g.loaded/g.total)+20,n.progress<70))return;He(1e3).pipe((0,ke.R)(a.asObservable())).subscribe(()=>{if(n.progress<95){const _=Math.round(8*Math.random()+8);n.progress+_>95?n.progress=95:n.progress+=_}})}else if(g instanceof nn.Zn){if(n.progress=100,n.completed=!0,g.body?.error||!g.body?.success)n.error=!0,this.uploadService.pushUploadingFileError(n);else{n.file.url=g.body.success.url,n.file.time=Date.now(),n.file.embedUrl=`${n.file.url}?t=${n.file.time}`;const _=this.uploadService.getFilenameInfo(n.file.url);n.file.name=_.name,n.file.filename=_.filename}a.next(),a.complete()}},error:()=>{n.error=!0,this.uploadService.pushUploadingFileError(n),a.next(),a.complete()}})),a.asObservable()}clearPendingRequests(){for(const t of this.requestSubscriptions)t.unsubscribe();this.requestSubscriptions=[]}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(nn.eN),e.LFG(We),e.LFG(ni))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const fo=["fileInput"],_o=function(o){return{"cursor-pointer":o}},vo=function(){return{bottom:0,left:0}};function Co(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",13,14),e.NdJ("dragenter",function(){e.CHM(t);const i=e.MAs(2),s=e.oxw();return e.KtG(s.setDragOverEvent(i))})("drop",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.handleDropEvent(i))})("click",function(){e.CHM(t),e.oxw();const i=e.MAs(2);return e.KtG(i.click())}),e.O4$(),e.TgZ(3,"svg",15),e._UZ(4,"path",16)(5,"path",17),e.qZA(),e.kcU(),e._UZ(6,"div",18),e.TgZ(7,"div",19),e._uU(8,"I file verranno caricati nella cartella "),e._UZ(9,"em",20),e.qZA()(),e.TgZ(10,"a",21),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openInfoModal.emit())}),e._uU(11,"Informazioni"),e.qZA(),e.TgZ(12,"div",22),e.NdJ("click",function(){e.CHM(t),e.oxw();const i=e.MAs(7);return e.KtG(i.open())}),e._uU(13,"settings"),e.qZA(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(4,_o,!t.loading)),e.xp6(5),e.Q6J("innerText","Trascina i file da caricare oppure clicca per scegliere da memoria"),e.xp6(3),e.Q6J("innerText",t.currentFolderPath.length?t.currentFolderPath.join("/"):"root"),e.xp6(1),e.Q6J("ngStyle",e.DdM(6,vo))}}function xo(o,r){if(1&o&&(e.TgZ(0,"div",23),e.O4$(),e.TgZ(1,"svg",24),e._UZ(2,"path",25),e.qZA(),e.kcU(),e._UZ(3,"app-loader",26),e.TgZ(4,"div",27),e._uU(5,"Attendi il completamento dell'upload per caricare altre immagini."),e.qZA()()),2&o){const t=e.oxw();e.xp6(3),e.Q6J("onlyMessage",!0)("message",t.loadingMessage)}}const yo=function(o){return{uploading:o}};let bo=(()=>{class o{constructor(t,n,i,s,a){this.uploadService=t,this.uploaderService=n,this.toastService=i,this.renderer=s,this.ngZone=a,this.loading=!0,this.currentFolderPath=[],this.fileUploadedEvent=new e.vpe,this.openInfoModal=new e.vpe,this.isUploading=!1,this.loadingMessage="Controllo dei file in corso",this.dragOverEvent=!1,this.options=this.uploadService.uploaderOptions,this.uploadService.preferences.uploader.checkImage.active||(this.options.compress=!1)}ngOnInit(){this.handleClipboardPasteEvent(),this.handleExternalUpload()}handleClipboardPasteEvent(){var t=this;this.clipboardPasteEventSubscription=(0,Nn.R)(document.body,"paste").subscribe(function(){var n=(0,L.Z)(function*(i){if(!t.canUpload)return;const s=Array.from((i.clipboardData||i.originalEvent.clipboardData).items);let a=[];for(const d of s)if(0===d.type.indexOf("image")){const h=d.getAsFile();h&&a.push(h)}a.length>0?yield t.preUpload(a):t.reset()});return function(i){return n.apply(this,arguments)}}())}handleExternalUpload(){var t=this;this.startExternalUploadSubscription=this.uploadService.startUploadObservable.subscribe(function(){var n=(0,L.Z)(function*(i){if(i)return t.canUpload?void(yield t.preUpload([i.file],i.options)):void t.reset();t.fileInputRef.nativeElement.click()});return function(i){return n.apply(this,arguments)}}())}handleSelectionEvent(t){var n=this;return(0,L.Z)(function*(){if(!n.canUpload)return;const i=t.target;if(i.files&&i.files.length){const s=Array.from(i.files);return i.value="",n.preUpload(s)}n.reset()})()}handleDropEvent(t){var n=this;return(0,L.Z)(function*(){if(!n.canUpload)return;t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation();const i=t.dataTransfer?.files?Array.from(t.dataTransfer.files):[];if(i.length)return n.preUpload(i);n.reset()})()}setCompressOption(){this.uploadService.preferences.uploader={checkImage:{active:this.options.compress,time:Date.now()}},this.uploadService.uploaderOptions=this.options}setDragOverEvent(t){this.dragOverEvent||(this.dragOverEvent=!0,this.ngZone.runOutsideAngular(()=>{this.renderer.listen(t,"dragover",n=>{n.preventDefault()})}))}get canUpload(){return!this.loading&&!this.isUploading&&(this.isUploading=!0,!0)}reset(){this.isUploading=!1,this.loadingMessage="Controllo dei file da caricare",this.options.allowOverwrite=!1}preUpload(t,n){var i=this;return(0,L.Z)(function*(){const s=[...i.currentFolderPath];let a=[],d=[],h=[],g=[];n?n.allowOverwrite=n.allowOverwrite||!1:(n=i.options).allowOverwrite=!1;for(let m=0;m<t.length;m++){let w=n.compress?yield i.uploaderService.compressFileIfNeeded(t[m],n.imageDimensions):t[m];if(w=yield i.uploaderService.orientFileIfNeeded(w),w){const q=i.uploadService.getFilenameInfo(w.name),V=Rn.find(j=>-1!==j.ext.indexOf(q.ext));if(!V){h.push(w);continue}if(w.size>V.maxSize){g.push(w);continue}a.push({file:{name:w.name,size:w.size,time:0,url:"",ext:q.ext,filename:q.filename,isImage:Cn(q.ext),embedUrl:""},progress:0,completed:!1}),d.push(w)}}if((h.length||g.length)&&i.toastService.show({content:i.createToastMessage(h,g),level:St.m.ERROR}),0===d.length)return void i.reset();const _=`Caricamento file {{fileNumber}} di ${d.length} in corso`;i.uploadService.pushUploadingFileQueue(a);for(let m=0;m<d.length;++m){i.loadingMessage="Creazione del pacchetto da inviare";const w=yield i.uploadService.getHostToken(s,d[m].name);a[m].progress+=20,i.loadingMessage=_.replace("{{fileNumber}}",`${m+1}`),yield(0,Yn.z)(i.uploaderService.upload(d[m],a[m],w,n.allowOverwrite))}i.uploadService.pushUploadingFileQueue([]),i.fileUploadedEvent.emit({fileList:a.filter(m=>!m.error).map(m=>m.file),rewrite:n.allowOverwrite,paths:s}),i.reset()})()}createToastMessage(t,n){let i=[];return t.length&&i.push(t.length>1?`I file <strong>${t.map(s=>s.name).join(", ")}</strong> hanno un formato non supportato!`:`Il file <strong>${t[0].name}</strong> ha un formato non supportato!`),n.length&&i.push(n.length>1?`I file <strong>${n.map(s=>s.name).join(", ")}</strong> sono troppo pesanti!`:`Il file <strong>${n[0].name}</strong> \xe8 troppo pesante!`),i.join("<br><br>")}ngOnDestroy(){this.startExternalUploadSubscription?.unsubscribe(),this.clipboardPasteEventSubscription.unsubscribe(),this.uploaderService.clearPendingRequests()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(We),e.Y36(mo),e.Y36(on.k),e.Y36(e.Qsj),e.Y36(e.R0b))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-uploader"]],viewQuery:function(t,n){if(1&t&&e.Gf(fo,5),2&t){let i;e.iGM(i=e.CRH())&&(n.fileInputRef=i.first)}},inputs:{loading:"loading",currentFolderPath:"currentFolderPath"},outputs:{fileUploadedEvent:"fileUploadedEvent",openInfoModal:"openInfoModal"},decls:21,vars:8,consts:[[1,"uploader","rounded","h-100","position-relative",3,"ngClass"],["type","file",1,"d-none",3,"multiple","disabled","change"],["fileInput",""],[4,"ngIf","ngIfElse"],["uploading",""],["title","Opzioni di caricamento"],["optionsModal",""],[1,"mb-1"],[1,"mb-3"],[1,"mb-1","list-unstyled"],[1,"form-check","form-switch"],["type","checkbox","role","switch","id","speed-upload",1,"form-check-input",3,"ngModel","ngModelChange"],["for","speed-upload",1,"form-check-label","me-auto"],[1,"p-4","rounded","upload-area",3,"ngClass","dragenter","drop","click"],["uploadArea",""],["xmlns","http://www.w3.org/2000/svg","width","64","height","64","fill","currentColor","viewBox","0 0 16 16"],["fill-rule","evenodd","d","M7.646 5.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 6.707V10.5a.5.5 0 0 1-1 0V6.707L6.354 7.854a.5.5 0 1 1-.708-.708l2-2z"],["d","M4.406 3.342A5.53 5.53 0 0 1 8 2c2.69 0 4.923 2 5.166 4.579C14.758 6.804 16 8.137 16 9.773 16 11.569 14.502 13 12.687 13H3.781C1.708 13 0 11.366 0 9.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383zm.653.757c-.757.653-1.153 1.44-1.153 2.056v.448l-.445.049C2.064 6.805 1 7.952 1 9.318 1 10.785 2.23 12 3.781 12h8.906C13.98 12 15 10.988 15 9.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 4.825 10.328 3 8 3a4.53 4.53 0 0 0-2.941 1.1z"],[1,"description","fw-bold","fs-lg","text-center",3,"innerText"],[1,"my-2","small","text-center"],[1,"text-break",3,"innerText"],[1,"fs-xs","fst-italic","d-block","px-2","py-1","text-reset","cursor-pointer","position-absolute",3,"ngStyle","click"],[1,"material-icons-outlined","d-block","cursor-pointer","fs-xl","position-absolute","options-icon",3,"click"],[1,"p-4","rounded"],["xmlns","http://www.w3.org/2000/svg","width","64","height","64","viewBox","0 0 16 16",1,"overflow-visible"],["d","M 4.406 3.342 A 5.53 5.53 0 0 1 8 2 c 2.69 0 4.923 2 5.166 4.579 C 14.758 6.804 16 8.137 16 9.773 C 16 11.569 14.502 13 12.687 13 H 3.781 C 1.708 13 0 11.366 0 9.318 c 0 -1.763 1.266 -3.223 2.942 -3.593 c 0.143 -0.863 0.698 -1.723 1.464 -2.383 z",1,"cloud"],[3,"onlyMessage","message"],[1,"small","text-center"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"input",1,2),e.NdJ("change",function(s){return n.handleSelectionEvent(s)}),e.qZA(),e.YNc(3,Co,14,7,"ng-container",3),e.YNc(4,xo,6,2,"ng-template",null,4,e.W1O),e.qZA(),e.TgZ(6,"app-modal",5,6)(8,"p",7),e._uU(9,"Tramite questo modal \xe8 possibile gestire le opzioni di caricamento al momento disponibili:"),e.qZA(),e.TgZ(10,"ul",8)(11,"li")(12,"em"),e._uU(13,"caricamento veloce"),e.qZA(),e._uU(14,": abilitando questa opzione, l'immagine da caricare verr\xe0 adattata per terminare l'operazione di upload nel minor tempo possibile. "),e.qZA()(),e.TgZ(15,"ul",9)(16,"li")(17,"div",10)(18,"input",11),e.NdJ("ngModelChange",function(s){return n.options.compress=s})("ngModelChange",function(){return n.setCompressOption()}),e.qZA(),e.TgZ(19,"label",12),e._uU(20,"Caricamento veloce"),e.qZA()()()()()),2&t){const i=e.MAs(5);e.Q6J("ngClass",e.VKq(6,yo,n.isUploading)),e.xp6(1),e.Q6J("multiple",!0)("disabled",n.loading||n.isUploading),e.xp6(2),e.Q6J("ngIf",!n.isUploading)("ngIfElse",i),e.xp6(15),e.Q6J("ngModel",n.options.compress)}},dependencies:[C.mk,C.O5,C.PC,R.Wl,R.JJ,R.On,zn.R,ut.z],styles:[".uploader[_ngcontent-%COMP%]{margin:0 1rem;border:2px dashed #4864FE;box-shadow:0 .125rem .25rem #00000013;color:#2036ad}.uploader[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(.options-icon){height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.uploader[_ngcontent-%COMP%]:not(.uploading)   svg[_ngcontent-%COMP%]{animation:bubble 4s linear infinite}.uploader.uploading[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path.cloud[_ngcontent-%COMP%]{fill:none;stroke:#2036ad;stroke-linecap:round;stroke-dasharray:50;stroke-dashoffset:100;animation:draw 3.5s linear infinite}.uploader[_ngcontent-%COMP%]   .options-icon[_ngcontent-%COMP%]{top:5px;right:5px;opacity:.7;transition:opacity .2s}.uploader[_ngcontent-%COMP%]   .options-icon[_ngcontent-%COMP%]:hover{opacity:1}.upload-area[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{pointer-events:none}.description[_ngcontent-%COMP%]{max-width:400px}@media (min-width: 768px){.uploader[_ngcontent-%COMP%]{margin:initial}}@keyframes bubble{6%{transform:scale(1.3,.8)}9%{transform:scale(.8,1.3) translateY(-.5rem)}12%{transform:scale(1)}}@keyframes draw{0%{stroke-dashoffset:100}to{stroke-dashoffset:0}}"]}),o})();const To=["modal"];function Mo(o,r){if(1&o&&(e.TgZ(0,"div",8)(1,"a",9),e._UZ(2,"img",10),e.ALo(3,"uploadsreplace"),e.qZA()()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("href",t.entities[0].url,e.LSH),e.xp6(1),e.Q6J("src",e.lcZ(3,3,t.entities[0].embedUrl),e.LSH)("alt",t.entities[0].name)}}function wo(o,r){1&o&&(e.ynx(0),e._uU(1," La cancellazione della cartella comporta anche la "),e.TgZ(2,"strong"),e._uU(3,"cancellazione di tutto il suo contenuto!"),e.qZA(),e._uU(4," Si consiglia di procedere solo se si \xe8 sicuro di voler rimuovere definitivamente la cartella. "),e.BQk())}function So(o,r){if(1&o&&(e.ynx(0),e.YNc(1,Mo,4,5,"div",6),e.TgZ(2,"div",7),e._uU(3," La cancellazione di "),e.TgZ(4,"em"),e._uU(5),e.qZA(),e._uU(6," \xe8 "),e.TgZ(7,"strong"),e._uU(8,"definitiva"),e.qZA(),e._uU(9,", senza possibilit\xe0 di ripristino. "),e.qZA(),e.TgZ(10,"p"),e._uU(11," Il suo link non sar\xe0 pi\xf9 funzionante e, di conseguenza, i siti su cui \xe8 stato condiviso non riusciranno pi\xf9 a visualizzarlo. "),e.YNc(12,wo,5,0,"ng-container",2),e.qZA(),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.entities[0].isImage),e.xp6(4),e.Oqu(t.entities[0].name),e.xp6(7),e.Q6J("ngIf",t.entities[0].type===t.entityTypes.FOLDER)}}function Ao(o,r){if(1&o&&(e.TgZ(0,"div",7),e._uU(1," Saranno cancellati "),e.TgZ(2,"strong"),e._uU(3,"definitivamente"),e.qZA(),e._uU(4),e.qZA(),e.TgZ(5,"p"),e._uU(6," Tutti i file selezionati non saranno pi\xf9 accessibili, pertanto eventuali link condivisi non saranno pi\xf9 funzionanti. L'operazione potrebbe richiedere diverso tempo. "),e.qZA()),2&o){const t=e.oxw(2);e.xp6(4),e.hij(" i ",t.entities.length," file selezionati! ")}}function Oo(o,r){if(1&o&&(e.ynx(0),e.YNc(1,So,13,3,"ng-container",4),e.YNc(2,Ao,7,1,"ng-template",null,5,e.W1O),e.BQk()),2&o){const t=e.MAs(3),n=e.oxw();e.xp6(1),e.Q6J("ngIf",1===n.entities.length)("ngIfElse",t)}}function Eo(o,r){if(1&o){const t=e.EpF();e.ynx(0,11),e.TgZ(1,"button",12),e.NdJ("click",function(){e.CHM(t),e.oxw();const i=e.MAs(1);return e.KtG(i.close("Close click"))}),e._uU(2,"Annulla"),e.qZA(),e.TgZ(3,"button",13),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.deleteEntity())}),e._uU(4,"Elimina!"),e.qZA(),e.BQk()}}let Po=(()=>{class o{constructor(t,n){this.toastService=t,this.uploadService=n,this.currentFolderPath=[],this.entities=[],this.deleteEvent=new e.vpe,this.opened=!1,this.entityTypes=H,this.modalTitle=""}ngOnInit(){}ngOnChanges(t){t.entities&&!t.entities.firstChange&&(this.modalTitle=this.entities.length>1?`Rimuovi ${this.entities.length} file`:1===this.entities.length?`Rimuovi <em>${this.entities[0]?.name||""}</em>`:"Rimuovi 0 file")}open(){return this.opened=!0,this.modalComponent.open()}onHidden(){this.opened=!1}deleteEntity(){var t=this;return(0,L.Z)(function*(){if(!t.opened||!t.entities[0])return;const n=[...t.currentFolderPath];t.modalComponent.close(),t.deleteEvent.emit(t.entities);let i=!1;for(let a=0;a<t.entities.length;a+=5){const d=t.entities.slice(a,a+5);if(i=(yield Promise.all(d.map(h=>t.uploadService.deleteEntity(n,h.name)))).every(Boolean),!i)break}if(i)if(1===t.entities.length){const a=t.entities[0];t.toastService.show({content:"La rimozione "+(a.type===H.FILE?"del file":"della cartella")+` <strong>${a.name}</strong> \xe8 avvenuta con successo!`})}else t.toastService.show({content:`<strong>${t.entities.length} file</strong> eliminati con successo!`});else t.toastService.show({content:"Errore nella rimozione!",level:St.m.ERROR})})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(on.k),e.Y36(We))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upload-delete-modal"]],viewQuery:function(t,n){if(1&t&&e.Gf(To,5),2&t){let i;e.iGM(i=e.CRH())&&(n.modalComponent=i.first)}},inputs:{currentFolderPath:"currentFolderPath",entities:"entities"},outputs:{deleteEvent:"deleteEvent"},features:[e.TTD],decls:4,vars:4,consts:[[3,"title","disableCloseButton","hidden"],["modal",""],[4,"ngIf"],["footer","",4,"ngIf"],[4,"ngIf","ngIfElse"],["multipleEntity",""],["class","preview py-1 text-center mb-3",4,"ngIf"],[1,"alert","alert-danger","text-center"],[1,"preview","py-1","text-center","mb-3"],["target","_blank","rel","noreferrer",1,"d-inline-block","mw-100",3,"href"],[1,"d-inline-block","mw-100",3,"src","alt"],["footer",""],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"app-modal",0,1),e.NdJ("hidden",function(){return n.onHidden()}),e.YNc(2,Oo,4,2,"ng-container",2),e.YNc(3,Eo,5,0,"ng-container",3),e.qZA()),2&t&&(e.Q6J("title",n.modalTitle)("disableCloseButton",!0),e.xp6(2),e.Q6J("ngIf",n.opened&&n.entities[0]),e.xp6(1),e.Q6J("ngIf",n.opened&&n.entities[0]))},dependencies:[C.O5,ut.z,yn.g],styles:[".preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:200px}"]}),o})();var Ve=x(1460);const Io=["modal"];function Do(o,r){if(1&o&&(e.TgZ(0,"div",10)(1,"a",11),e._UZ(2,"img",12),e.ALo(3,"uploadsreplace"),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("href",t.entity.url,e.LSH),e.xp6(1),e.Q6J("src",e.lcZ(3,3,t.entity.embedUrl),e.LSH)("alt",t.entity.name)}}function Fo(o,r){1&o&&e.GkF(0)}function Uo(o,r){1&o&&e.GkF(0)}const ko=function(o){return{$implicit:o,id:"file-image-html",description:"Tag dell'"}};function Zo(o,r){if(1&o&&(e.TgZ(0,"li"),e.YNc(1,Uo,1,0,"ng-container",5),e.qZA()),2&o){const t=e.oxw(2),n=e.MAs(4);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(2,ko,t.tagHtmlStructure.replace("{url}",t.entity.url).replace("{name}",t.entity.name)))}}function Ro(o,r){1&o&&e.GkF(0)}function Lo(o,r){1&o&&e.GkF(0)}const No=function(o){return{$implicit:o,id:"file-image-bbcode",description:"Tag dell'"}};function zo(o,r){if(1&o&&(e.TgZ(0,"li"),e.YNc(1,Lo,1,0,"ng-container",5),e.qZA()),2&o){const t=e.oxw(2),n=e.MAs(4);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(2,No,"[IMG]"+t.entity.url+"[/IMG]"))}}function Ho(o,r){1&o&&e.GkF(0)}const qo=function(o){return{$implicit:o,id:"file-url",description:"Url dell'"}},Jo=function(o){return{$implicit:o,id:"file-link-html",description:"Link all'"}},Qo=function(o){return{$implicit:o,id:"file-link-bbcode",description:"Link all'"}};function Bo(o,r){if(1&o&&(e.ynx(0),e.YNc(1,Do,4,5,"div",4),e.TgZ(2,"div"),e.YNc(3,Fo,1,0,"ng-container",5),e.qZA(),e.TgZ(4,"fieldset",6)(5,"legend",7),e._uU(6,"HTML"),e.qZA(),e.TgZ(7,"ul",8),e.YNc(8,Zo,2,4,"li",2),e.TgZ(9,"li"),e.YNc(10,Ro,1,0,"ng-container",5),e.qZA()()(),e.TgZ(11,"fieldset",9)(12,"legend",7),e._uU(13,"BBCODE"),e.qZA(),e.TgZ(14,"ul",8),e.YNc(15,zo,2,4,"li",2),e.TgZ(16,"li"),e.YNc(17,Ho,1,0,"ng-container",5),e.qZA()()(),e.BQk()),2&o){const t=e.oxw(),n=e.MAs(4);e.xp6(1),e.Q6J("ngIf",t.entity.isImage),e.xp6(2),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(9,qo,t.entity.url)),e.xp6(5),e.Q6J("ngIf",t.entity.isImage),e.xp6(2),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(11,Jo,t.linkHtmlStructire.replace("{url}",t.entity.url).replace("{content}",t.entity.name))),e.xp6(5),e.Q6J("ngIf",t.entity.isImage),e.xp6(2),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(13,Qo,"[URL="+t.entity.url+"]"+t.entity.name+"[/URL]"))}}const Yo=function(o){return{placement:"top",hideOnClick:o}};function Wo(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"label",13),e._uU(1),e.qZA(),e.TgZ(2,"div",14),e._UZ(3,"input",15),e.TgZ(4,"div",16,17),e.NdJ("click",function(){e.CHM(t);const i=e.MAs(5),s=e.oxw();return e.KtG(!s.touchDevice&&i.changeContent("Copiato!","Copia"))}),e.TgZ(6,"span",18),e._uU(7,"content_copy"),e.qZA()()()}if(2&o){const t=r.$implicit,n=r.id,i=r.description,s=e.oxw();e.Q6J("for",n),e.xp6(1),e.hij("",i,"elemento:"),e.xp6(2),e.Q6J("id",n)("value",t),e.xp6(1),e.Q6J("cdkCopyToClipboard",t)("appTippy",s.touchDevice?"Copiato!":"Copia")("tippyProps",e.VKq(7,Yo,s.touchDevice))}}let Go=(()=>{class o{constructor(){this.opened=!1,this.touchDevice=Ve.eX,this.tagHtmlStructure='<img src="{url}" alt="{name}">',this.linkHtmlStructire='<a href="{url}" target="_blank">{content}</a>'}ngOnInit(){}open(){return this.opened=!0,this.modalComponent.open()}onHidden(){this.opened=!1}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upload-file-links-modal"]],viewQuery:function(t,n){if(1&t&&e.Gf(Io,5),2&t){let i;e.iGM(i=e.CRH())&&(n.modalComponent=i.first)}},inputs:{entity:"entity"},decls:5,vars:2,consts:[[3,"title","hidden"],["modal",""],[4,"ngIf"],["linkInput",""],["class","preview py-1 text-center mb-2",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"px-3","pb-3","pt-1","rounded","mt-3","border-dashed","border-light-gray"],[1,"legend-reset","fs-reset","px-2","mb-0"],[1,"list-unstyled","mb-0"],[1,"px-3","pb-3","pt-1","rounded","mt-3","mb-1","border-dashed","border-light-gray"],[1,"preview","py-1","text-center","mb-2"],["target","_blank","rel","noreferrer",1,"d-inline-block","mw-100",3,"href"],[1,"d-inline-block","mw-100",3,"src","alt"],[1,"fs-sm",3,"for"],[1,"input-group"],["type","text",1,"form-control",3,"id","value"],[1,"input-group-text","cursor-pointer",3,"cdkCopyToClipboard","appTippy","tippyProps","click"],["tippyRef","appTippy"],[1,"material-icons","d-block","text-muted"]],template:function(t,n){1&t&&(e.TgZ(0,"app-modal",0,1),e.NdJ("hidden",function(){return n.onHidden()}),e.YNc(2,Bo,18,15,"ng-container",2),e.qZA(),e.YNc(3,Wo,8,9,"ng-template",null,3,e.W1O)),2&t&&(e.Q6J("title","Codici di <em>"+(null==n.entity?null:n.entity.name)+"</em>"),e.xp6(2),e.Q6J("ngIf",n.opened&&n.entity))},dependencies:[xe.i3,C.O5,C.tP,ut.z,Jt.$,yn.g],styles:[".preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:200px}fieldset[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:not(:first-of-type){margin-top:.75rem}"]}),o})();var Vo=x(2289);let Ko=(()=>{class o{constructor(){this.extension="jpg",this.size="large"}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upload-file-icon"]],inputs:{extension:"extension",size:"size"},decls:4,vars:4,consts:[["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 16 16",1,"d-block"],["fill-rule","evenodd","d","M14 4.5V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5L14 4.5zm-3 0A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4.5h-2z"],[1,"file-extension",3,"innerText"]],template:function(t,n){1&t&&(e.TgZ(0,"div"),e.O4$(),e.TgZ(1,"svg",0),e._UZ(2,"path",1),e.qZA(),e.kcU(),e._UZ(3,"div",2),e.qZA()),2&t&&(e.Gre("position-relative text-center file-icon-container file-icon-",n.size,""),e.xp6(3),e.Q6J("innerText",n.extension))},styles:["[_nghost-%COMP%], .file-icon-container[_ngcontent-%COMP%], .file-extension[_ngcontent-%COMP%]{background-color:inherit}.file-icon-large[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:64px;height:64px}.file-icon-large[_ngcontent-%COMP%]   .file-extension[_ngcontent-%COMP%]{font-size:1.5rem;left:-4px;padding-right:6px}.file-icon-small[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px}.file-icon-small[_ngcontent-%COMP%]   .file-extension[_ngcontent-%COMP%]{font-size:10px;left:0;padding-right:3px}.file-extension[_ngcontent-%COMP%]{text-transform:uppercase;font-weight:700;position:absolute;bottom:-2px;line-height:1;letter-spacing:-1px}"]}),o})();var $o=x(150);const jo=function(o){return{disabled:o}};let oi=(()=>{class o{constructor(t,n){this.uploadService=t,this.toastService=n,this.isSelected=!1,this.actionNames=Ne,this.canBeCropped=!0}ngOnInit(){this.canBeCropped=Wn(this.file.ext)}pushAction(t){this.uploadService.pushAction({name:t,payload:{entities:[{name:this.file.name,type:H.FILE,ext:this.file.ext,url:this.file.url,embedUrl:this.file.embedUrl,isImage:this.file.isImage}]}})}pushSelectedFile(){this.dropdownRef.close(),this.uploadService.pushSelectedFile({name:this.file.name,selected:!this.isSelected})}downloadFile(){var t=this;return(0,L.Z)(function*(){const n=yield t.uploadService.getBlobFromUrl((0,$o.O)(t.file.embedUrl));if(n){const i=URL.createObjectURL(n),s=document.createElement("a");return s.href=i,s.download=t.file.name,void s.click()}t.toastService.show({content:`Errore nel download del file <strong>${t.file.name}</strong>!`,level:St.m.ERROR})})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(We),e.Y36(on.k))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upload-file-menu"]],inputs:{file:"file",isSelected:"isSelected",dropdownRef:"dropdownRef"},decls:43,vars:5,consts:[[1,"list-unstyled","mb-0","dropdown-material-icons"],["role","button",1,"dropdown-item","d-flex","align-items-center",3,"click"],[1,"material-icons-outlined","d-block"],["role","button",1,"dropdown-item","d-flex","align-items-center",3,"ngClass","click"],[1,"material-icons-outlined","d-block",3,"innerText"],[3,"innerText"],[1,"dropdown-divider"]],template:function(t,n){1&t&&(e.TgZ(0,"ul",0)(1,"li")(2,"a",1),e.NdJ("click",function(){return n.pushAction(n.actionNames.FILE_SHOW_LINKS)}),e.TgZ(3,"div",2),e._uU(4,"construction"),e.qZA(),e.TgZ(5,"div"),e._uU(6,"Codici"),e.qZA()()(),e.TgZ(7,"li")(8,"a",1),e.NdJ("click",function(){return n.downloadFile()}),e.TgZ(9,"div",2),e._uU(10,"file_download"),e.qZA(),e.TgZ(11,"div"),e._uU(12,"Scarica"),e.qZA()()(),e.TgZ(13,"li")(14,"a",1),e.NdJ("click",function(){return n.pushAction(n.actionNames.MOVE)}),e.TgZ(15,"div",2),e._uU(16,"drive_file_move"),e.qZA(),e.TgZ(17,"div"),e._uU(18,"Sposta"),e.qZA()()(),e.TgZ(19,"li")(20,"a",1),e.NdJ("click",function(){return n.pushAction(n.actionNames.RENAME)}),e.TgZ(21,"div",2),e._uU(22,"drive_file_rename_outline"),e.qZA(),e.TgZ(23,"div"),e._uU(24,"Rinomina"),e.qZA()()(),e.TgZ(25,"li")(26,"a",3),e.NdJ("click",function(){return n.pushAction(n.actionNames.FILE_EDIT)}),e.TgZ(27,"div",2),e._uU(28,"transform"),e.qZA(),e.TgZ(29,"div"),e._uU(30,"Modifica"),e.qZA()()(),e.TgZ(31,"li")(32,"a",1),e.NdJ("click",function(){return n.pushSelectedFile()}),e._UZ(33,"div",4)(34,"div",5),e.qZA()(),e.TgZ(35,"li"),e._UZ(36,"hr",6),e.qZA(),e.TgZ(37,"li")(38,"a",1),e.NdJ("click",function(){return n.pushAction(n.actionNames.DELETE)}),e.TgZ(39,"div",2),e._uU(40,"delete"),e.qZA(),e.TgZ(41,"div"),e._uU(42,"Elimina"),e.qZA()()()()),2&t&&(e.xp6(26),e.Q6J("ngClass",e.VKq(3,jo,!n.canBeCropped)),e.xp6(7),e.Q6J("innerText",n.isSelected?"unpublished":"check_circle_outline"),e.xp6(1),e.Q6J("innerText",n.isSelected?"Deseleziona":"Seleziona"))},dependencies:[C.mk]}),o})(),Xo=(()=>{class o{transform(t,n=5){return t.reduce((a=n,(d,h)=>{const g=(a=>a[a.length-1])(d);return g.length===a?d.push([h]):g.push(h),d}),[[]]);var a}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275pipe=e.Yjl({name:"arrayChunk",type:o,pure:!0}),o})(),er=(()=>{class o{transform(t,n){return t.filter(i=>n(i))}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275pipe=e.Yjl({name:"arrayFilter",type:o,pure:!0}),o})(),Tn=(()=>{class o{transform(t,n=2){if(!+t)return"0 Bytes";const s=n<0?0:n,d=Math.floor(Math.log(t)/Math.log(1024));return`${parseFloat((t/Math.pow(1024,d)).toFixed(s))} ${["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][d]}`}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275pipe=e.Yjl({name:"formatBytes",type:o,pure:!0}),o})();function tr(o,r){1&o&&e.GkF(0)}const rn=function(o){return{$implicit:o}};function nr(o,r){if(1&o&&(e.ynx(0),e.YNc(1,tr,1,0,"ng-container",28),e.BQk()),2&o){const t=e.oxw().$implicit;e.oxw(6);const n=e.MAs(8);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(2,rn,t.name))}}function ir(o,r){if(1&o&&(e._UZ(0,"img",29),e.ALo(1,"uploadsreplace")),2&o){const t=e.oxw().$implicit;e.Q6J("lazyLoad",e.lcZ(1,3,t.embedUrl))("offset",100)("alt",t.name)}}function or(o,r){1&o&&e.GkF(0)}function rr(o,r){1&o&&e.GkF(0)}function sr(o,r){1&o&&e.GkF(0)}const ri=function(o,r){return{pending:o,selected:r}},ar=function(o){return{$implicit:o,addAfterContent:!0}},lr=function(o){return{$implicit:o,firstPlacement:"left"}};function cr(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"li",15),e.NdJ("contextmenu",function(){const s=e.CHM(t).$implicit,a=e.oxw(6);return e.KtG(a.onRightClick(s))})("cdkDragStarted",function(){const s=e.CHM(t).$implicit,a=e.oxw(6);return e.KtG(a.pushDraggedFile(s))})("cdkDragReleased",function(){e.CHM(t);const i=e.oxw(6);return e.KtG(i.pushDraggedFile(void 0))}),e.YNc(1,nr,2,4,"ng-container",16),e.TgZ(2,"div",17)(3,"div",18),e.YNc(4,ir,2,5,"img",19),e.TgZ(5,"div",20),e._UZ(6,"app-upload-file-icon",21),e.qZA()(),e.TgZ(7,"div",22)(8,"div",23)(9,"a",24),e._UZ(10,"div",25)(11,"div",26),e.qZA(),e.TgZ(12,"div",27),e.YNc(13,or,1,0,"ng-container",28),e.YNc(14,rr,1,0,"ng-container",28),e.qZA()(),e.YNc(15,sr,1,0,"ng-container",28),e.qZA()()()}if(2&o){const t=r.$implicit,n=e.oxw(6),i=e.MAs(2),s=e.MAs(4),a=e.MAs(6);e.Q6J("ngClass",e.WLB(13,ri,t.pending,t.selected))("cdkDragDisabled",n.touchDevice||t.pending),e.xp6(4),e.Q6J("ngIf",t.isImage),e.xp6(2),e.Q6J("extension",t.ext),e.xp6(3),e.Q6J("href",t.url,e.LSH),e.xp6(1),e.Q6J("innerText",t.filename),e.xp6(1),e.Q6J("innerText","."+t.ext),e.xp6(2),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.VKq(16,ar,t.size)),e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(18,rn,t.time)),e.xp6(1),e.Q6J("ngTemplateOutlet",a)("ngTemplateOutletContext",e.VKq(20,lr,t))}}function dr(o,r){if(1&o&&(e.ynx(0),e.YNc(1,cr,16,22,"li",14),e.BQk()),2&o){const t=r.$implicit;e.xp6(1),e.Q6J("ngForOf",t)}}const si=function(o){return{"touch-device":o}},ai=function(o){return{"drag-multiple-files":o}};function pr(o,r){if(1&o&&(e.TgZ(0,"cdk-virtual-scroll-viewport",11)(1,"ul",12),e.YNc(2,dr,2,1,"ng-container",13),e.ALo(3,"arrayChunk"),e.ALo(4,"arrayFilter"),e.qZA()()),2&o){const t=e.oxw(4);e.Q6J("itemSize",228+t.fileListGap)("ngClass",e.VKq(11,si,t.touchDevice)),e.xp6(1),e.Q6J("cdkDropListData",t.sortedList)("ngClass",e.VKq(13,ai,t.isDraggingSelectedFiles)),e.xp6(1),e.Q6J("cdkVirtualForOf",e.xi3(3,5,e.xi3(4,8,t.sortedList,t.filterCallback),t.filesPerRow))}}function hr(o,r){1&o&&e.GkF(0)}function ur(o,r){if(1&o&&(e.ynx(0),e.YNc(1,hr,1,0,"ng-container",28),e.BQk()),2&o){const t=e.oxw().$implicit;e.oxw(5);const n=e.MAs(8);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(2,rn,t.name))}}function gr(o,r){1&o&&e.GkF(0)}function mr(o,r){1&o&&e.GkF(0)}function fr(o,r){1&o&&e.GkF(0)}const _r=function(o){return{$implicit:o,firstPlacement:"left-top"}};function vr(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"li",34),e.NdJ("contextmenu",function(){const s=e.CHM(t).$implicit,a=e.oxw(5);return e.KtG(a.onRightClick(s))})("cdkDragStarted",function(){const s=e.CHM(t).$implicit,a=e.oxw(5);return e.KtG(a.pushDraggedFile(s))})("cdkDragReleased",function(){e.CHM(t);const i=e.oxw(5);return e.KtG(i.pushDraggedFile(void 0))}),e.YNc(1,ur,2,4,"ng-container",16),e._UZ(2,"app-upload-file-icon",35),e.TgZ(3,"a",36),e._UZ(4,"div",37)(5,"div",38),e.qZA(),e._UZ(6,"div",39),e.YNc(7,gr,1,0,"ng-container",28),e.YNc(8,mr,1,0,"ng-container",28),e.YNc(9,fr,1,0,"ng-container",28),e.qZA()}if(2&o){const t=r.$implicit,n=e.oxw(5),i=e.MAs(2),s=e.MAs(4),a=e.MAs(6);e.Q6J("ngClass",e.WLB(13,ri,t.pending,t.selected))("cdkDragDisabled",n.touchDevice||t.pending),e.xp6(2),e.Q6J("extension",t.ext),e.xp6(1),e.Q6J("href",t.url,e.LSH),e.xp6(1),e.Q6J("innerText",t.filename),e.xp6(1),e.Q6J("innerText","."+t.ext),e.xp6(1),e.Q6J("innerText",t.ext),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.VKq(16,rn,t.size)),e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(18,rn,t.time)),e.xp6(1),e.Q6J("ngTemplateOutlet",a)("ngTemplateOutletContext",e.VKq(20,_r,t))}}function Cr(o,r){if(1&o&&(e.TgZ(0,"div",30)(1,"cdk-virtual-scroll-viewport",31)(2,"ul",32),e.YNc(3,vr,10,22,"li",33),e.ALo(4,"arrayFilter"),e.qZA()()()),2&o){const t=e.oxw(4);e.xp6(1),e.Q6J("itemSize",57)("ngClass",e.VKq(8,si,t.touchDevice)),e.xp6(1),e.Q6J("cdkDropListData",t.sortedList)("ngClass",e.VKq(10,ai,t.isDraggingSelectedFiles)),e.xp6(1),e.Q6J("cdkVirtualForOf",e.xi3(4,5,t.sortedList,t.filterCallback))}}function xr(o,r){if(1&o&&(e.ynx(0),e.YNc(1,pr,5,15,"cdk-virtual-scroll-viewport",9),e.YNc(2,Cr,5,12,"ng-template",null,10,e.W1O),e.BQk()),2&o){const t=e.MAs(3),n=e.oxw(3);e.xp6(1),e.Q6J("ngIf",n.layoutOptions.type===n.layoutTypes.GRID)("ngIfElse",t)}}function yr(o,r){1&o&&(e.TgZ(0,"div",40),e.O4$(),e.TgZ(1,"svg",41),e._UZ(2,"path",42)(3,"path",43)(4,"path",44)(5,"circle",45)(6,"circle",46)(7,"path",47)(8,"path",48)(9,"path",49)(10,"circle",50)(11,"circle",51),e.qZA(),e.kcU(),e.TgZ(12,"div",52)(13,"strong"),e._uU(14,"Nessun elemento trovato!"),e.qZA()(),e.TgZ(15,"div",53),e._uU(16,"Prova a modificare le parole chiave da cercare."),e.qZA()())}function br(o,r){if(1&o&&(e.ynx(0),e.YNc(1,xr,4,2,"ng-container",6),e.YNc(2,yr,17,0,"ng-template",null,8,e.W1O),e.BQk()),2&o){const t=e.MAs(3),n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.filteredElementsCount<n.sortedList.length)("ngIfElse",t)}}function Tr(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",54)(1,"div",53),e._uU(2,"Nessun file caricato!"),e.qZA(),e.TgZ(3,"div",55),e._uU(4,"Puoi iniziare l'upload di un nuovo file tramite il pulsante sottostante."),e.qZA(),e.TgZ(5,"button",56),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.startUpload())}),e._uU(6,"Carica!"),e.qZA()()}}function Mr(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"div",5),e._uU(2,"File e Immagini"),e.qZA(),e.YNc(3,br,4,2,"ng-container",6),e.YNc(4,Tr,7,0,"ng-template",null,7,e.W1O),e.BQk()),2&o){const t=e.MAs(5),n=e.oxw();e.xp6(3),e.Q6J("ngIf",n.sortedList.length>0)("ngIfElse",t)}}const wr=function(o){return{"me-1 after-content":o}};function Sr(o,r){if(1&o&&(e._UZ(0,"div",57),e.ALo(1,"formatBytes")),2&o){const n=r.addAfterContent;e.Q6J("innerText",e.lcZ(1,2,r.$implicit))("ngClass",e.VKq(4,wr,n))}}const Ar=function(){return[0,5]},Or=function(o){return{offset:o}};function Er(o,r){if(1&o&&(e.TgZ(0,"div",58),e.ALo(1,"date"),e._UZ(2,"span",59),e.qZA()),2&o){const t=r.$implicit;e.Q6J("appTippy",e.xi3(1,3,t,"dd-MM-YY HH:mm")||"")("tippyProps",e.VKq(7,Or,e.DdM(6,Ar))),e.xp6(2),e.Q6J("date",t)}}function Pr(o,r){if(1&o&&e._UZ(0,"app-upload-file-menu",65),2&o){const t=e.oxw().$implicit,n=e.MAs(1);e.Q6J("file",t)("isSelected",t.selected)("dropdownRef",n)}}const Ir=function(o){return[o,"left-bottom","auto"]};function Dr(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",60,61),e.NdJ("openChange",function(i){const a=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.onDropdownOpenChange(i,a))}),e.TgZ(2,"div",62),e._uU(3,"more_vert"),e.qZA(),e.TgZ(4,"div",63),e.YNc(5,Pr,1,3,"app-upload-file-menu",64),e.qZA()()}if(2&o){const t=r.$implicit;e.Q6J("placement",e.VKq(2,Ir,r.firstPlacement)),e.xp6(5),e.Q6J("ngIf",t.hasDropdown)}}function Fr(o,r){if(1&o&&e._UZ(0,"div",66),2&o){const t=r.$implicit,n=e.oxw();e.Q6J("innerHTML",n.isDraggingSelectedFiles&&n.selectedFileCounter>1?n.selectedFileCounter+" file selezionati":t,e.oJD)}}let Ur=(()=>{class o{constructor(t,n){this.uploadService=t,this.breakpointObserver=n,this.fileList=[],this.filter="",this.loading=!0,this.sortedList=[],this.layoutTypes=ze,this.filteredElementsCount=0,this.touchDevice=Ve.eX,this.filesPerRow=1,this.fileListGap=16,this.filterCallback=i=>!i.isFiltered,this.isDraggingSelectedFiles=!1,this.selectedFileCounter=0,this.currentFilter="",this.sortedBy=At.FILENAME,this.sortOrder=1,this.subscriptions=[],this.filesPerRowMap=new Map([[pe.W_768_I_1,1],[pe.W_933_I_2,2],[pe.W_960_I_3,3],[pe.W_1226_I_2,2],[pe.W_1540_I_3,3],[pe.W_1854_I_4,4],[pe.W_2168_I_5,5],[pe.W_2482_I_6,6],[pe.W_2796_I_7,7],[pe.W_3110_I_8,8],[pe.W_3424_I_9,9],[pe.W_3738_I_10,10]]),this.layoutOptions=this.uploadService.preferences.layoutOptions}ngOnInit(){this.setSortOption(this.layoutOptions.orderBy,this.layoutOptions.asc),this.copyList(),this.sort(),this.setSubscriptions()}updateListAfterChange(){this.sortedList=[...this.sortedList]}setSubscriptions(){this.subscriptions.push(this.uploadService.layoutOptionsObservable.subscribe(t=>{this.layoutOptions=t,this.setSortOption(t.orderBy,t.asc),this.sort(),this.updateListAfterChange()}),this.uploadService.renameFileObservable.subscribe(t=>{const n=this.sortedList.findIndex(i=>i.name===t.oldName);n>-1&&(this.sortedList[n]={...t.newFile,isFiltered:!1,pending:!1,selected:this.sortedList[n].selected,hasDropdown:this.sortedList[n].hasDropdown}),this.updateListAfterChange()}),this.uploadService.deleteFileObservable.subscribe(t=>{const n=this.sortedList.findIndex(i=>i.name===t.name);n>-1&&this.sortedList.splice(n,1),this.updateListAfterChange()}),this.uploadService.uploadedFileObservable.subscribe(t=>{this.sortedList.unshift(...t.map(n=>({...n,isFiltered:!1,pending:!1,selected:!1,hasDropdown:!1}))),this.sort(),this.filterList(),this.updateListAfterChange()}),this.uploadService.entityPendingObservable.subscribe(t=>{t.forEach(n=>{if(n.type!==H.FILE)return;const i=this.sortedList.findIndex(s=>s.name===n.name);i>-1&&(this.sortedList[i].pending=n.start)})}),this.uploadService.selectedFileListObservable.subscribe(t=>{const n=t.map(i=>i.name);this.sortedList.filter(i=>i.selected||n.includes(i.name)).forEach(i=>{i.selected=n.includes(i.name)}),this.selectedFileCounter=t.length}),this.breakpointObserver.observe(Object.values(pe)).subscribe(t=>{for(const n of Object.keys(t.breakpoints))t.breakpoints[n]&&(this.filesPerRow=this.filesPerRowMap.get(n)??1);this.fileListGap=t.breakpoints[pe.W_768_I_1]||t.breakpoints[pe.W_933_I_2]||t.breakpoints[pe.W_960_I_3]?16:24}))}ngOnChanges(t){t.fileList&&!t.fileList.firstChange&&(this.copyList(),this.sortedList.length&&(this.sort(),this.currentFilter="",this.filterList())),t.filter&&!t.filter.firstChange&&(this.filterList(),this.updateListAfterChange())}setSortOption(t,n){this.sortedBy=t,this.sortOrder=n?1:-1}sort(){this.sortedList.sort((t,n)=>this.sortOrder*(t[this.sortedBy]>n[this.sortedBy]?1:-1)),this.sortedBy===At.TIME&&this.sortedList.reverse()}copyList(){this.sortedList=this.fileList.map(t=>({...t,isFiltered:!1,pending:!1,selected:!1,hasDropdown:!1}))}filterList(){if(this.currentFilter===this.filter)return;if(this.currentFilter=this.filter,this.filteredElementsCount=0,0===this.filter.length)return void this.sortedList.filter(n=>n.isFiltered).forEach(n=>n.isFiltered=!1);const t=this.filter.toLowerCase();for(const n of this.sortedList)n.isFiltered=!n.name.toLowerCase().includes(t),this.filteredElementsCount+=+n.isFiltered}pushDraggedFile(t){if(this.isDraggingSelectedFiles=!1,t)return t.selected?(this.uploadService.pushDraggedFileList(this.sortedList.filter(n=>n.selected)),void(this.isDraggingSelectedFiles=!0)):void this.uploadService.pushDraggedFileList([t]);this.uploadService.pushDraggedFileList([])}startUpload(){this.uploadService.pushStartUpload()}onRightClick(t){return this.uploadService.pushSelectedFile({name:t.name,selected:!t.selected}),!1}onDropdownOpenChange(t,n){t&&!n.hasDropdown&&(n.hasDropdown=!0)}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(We),e.Y36(Vo.Yg))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upload-file-list"]],inputs:{fileList:"fileList",filter:"filter",loading:"loading"},features:[e.TTD],decls:9,vars:1,consts:[[4,"ngIf"],["fileSizeTemplate",""],["fileTimeTemplate",""],["fileDropdownTemplate",""],["fileCdkPreview",""],[1,"px-md-1","mb-2","fv-small-caps","container-fluid"],[4,"ngIf","ngIfElse"],["noFiles",""],["allFilesFilteredMessage",""],["scrollWindow","","class","file-grid-scroll",3,"itemSize","ngClass",4,"ngIf","ngIfElse"],["listLayout",""],["scrollWindow","",1,"file-grid-scroll",3,"itemSize","ngClass"],["cdkDropList","","cdkDropListSortingDisabled","",1,"list-unstyled","mb-0","d-grid","file-list","file-grid-list",3,"cdkDropListData","ngClass"],[4,"cdkVirtualFor","cdkVirtualForOf"],["class","min-w-0 file-item","cdkDrag","",3,"ngClass","cdkDragDisabled","contextmenu","cdkDragStarted","cdkDragReleased",4,"ngFor","ngForOf"],["cdkDrag","",1,"min-w-0","file-item",3,"ngClass","cdkDragDisabled","contextmenu","cdkDragStarted","cdkDragReleased"],[4,"cdkDragPreview"],[1,"flat-container","overflow-hidden","h-100","d-flex","flex-column"],[1,"file-preview","border-bottom","overflow-hidden","text-center","position-relative"],["src","data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D","class","mw-100",3,"lazyLoad","offset","alt",4,"ngIf"],[1,"position-absolute","svg-container"],[3,"extension"],[1,"file-info","py-3","ps-3","pe-2","d-flex","align-items-center","flex-grow-1"],[1,"d-flex","flex-column","min-w-0","flex-grow-1","pe-2"],["target","_blank","rel","noreferrer",1,"file-link","d-flex","fw-bold","me-auto","mw-100",3,"href"],[1,"text-truncate",3,"innerText"],[3,"innerText"],[1,"text-muted","fs-xs","d-flex","align-items-center"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["src","data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D",1,"mw-100",3,"lazyLoad","offset","alt"],[1,"flat-container","overflow-hidden"],["scrollWindow","",1,"file-simple-scroll",3,"itemSize","ngClass"],["cdkDropList","","cdkDropListSortingDisabled","",1,"list-unstyled","mb-0","file-list","file-simple-list",3,"cdkDropListData","ngClass"],["class","file-item d-grid ps-3 ps-md-4 pe-2 pe-md-3","cdkDrag","",3,"ngClass","cdkDragDisabled","contextmenu","cdkDragStarted","cdkDragReleased",4,"cdkVirtualFor","cdkVirtualForOf"],["cdkDrag","",1,"file-item","d-grid","ps-3","ps-md-4","pe-2","pe-md-3",3,"ngClass","cdkDragDisabled","contextmenu","cdkDragStarted","cdkDragReleased"],["size","small",1,"pe-4",3,"extension"],["target","_blank","rel","noreferrer",1,"filename","fw-bold","d-flex","me-auto","min-w-0","mw-100",3,"href"],[1,"mw-100","text-truncate",3,"innerText"],[1,"flex-shrink-0","pe-2",3,"innerText"],[1,"text-uppercase","file-extension",3,"innerText"],[1,"pt-3","px-2","text-center","empty-filtered-list"],["xmlns","http://www.w3.org/2000/svg","width","161.909065","height","158.04346","viewBox","0 0 647.63626 632.17383",1,"p-1","overflow-visible"],["d","M687.3279,276.08691H512.81813a15.01828,15.01828,0,0,0-15,15v387.85l-2,.61005-42.81006,13.11a8.00676,8.00676,0,0,1-9.98974-5.31L315.678,271.39691a8.00313,8.00313,0,0,1,5.31006-9.99l65.97022-20.2,191.25-58.54,65.96972-20.2a7.98927,7.98927,0,0,1,9.99024,5.3l32.5498,106.32Z","transform","translate(-276.18187 -133.91309)","fill","#f2f2f2"],["d","M725.408,274.08691l-39.23-128.14a16.99368,16.99368,0,0,0-21.23-11.28l-92.75,28.39L380.95827,221.60693l-92.75,28.4a17.0152,17.0152,0,0,0-11.28028,21.23l134.08008,437.93a17.02661,17.02661,0,0,0,16.26026,12.03,16.78926,16.78926,0,0,0,4.96972-.75l63.58008-19.46,2-.62v-2.09l-2,.61-64.16992,19.65a15.01489,15.01489,0,0,1-18.73-9.95l-134.06983-437.94a14.97935,14.97935,0,0,1,9.94971-18.73l92.75-28.4,191.24024-58.54,92.75-28.4a15.15551,15.15551,0,0,1,4.40966-.66,15.01461,15.01461,0,0,1,14.32032,10.61l39.0498,127.56.62012,2h2.08008Z","transform","translate(-276.18187 -133.91309)","fill","#3f3d56"],["d","M398.86279,261.73389a9.0157,9.0157,0,0,1-8.61133-6.3667l-12.88037-42.07178a8.99884,8.99884,0,0,1,5.9712-11.24023l175.939-53.86377a9.00867,9.00867,0,0,1,11.24072,5.9707l12.88037,42.07227a9.01029,9.01029,0,0,1-5.9707,11.24072L401.49219,261.33887A8.976,8.976,0,0,1,398.86279,261.73389Z","transform","translate(-276.18187 -133.91309)","fill","#565656"],["cx","190.15351","cy","24.95465","r","20","fill","#565656"],["cx","190.15351","cy","24.95465","r","12.66462","fill","#fff"],["d","M878.81836,716.08691h-338a8.50981,8.50981,0,0,1-8.5-8.5v-405a8.50951,8.50951,0,0,1,8.5-8.5h338a8.50982,8.50982,0,0,1,8.5,8.5v405A8.51013,8.51013,0,0,1,878.81836,716.08691Z","transform","translate(-276.18187 -133.91309)","fill","#e6e6e6"],["d","M723.31813,274.08691h-210.5a17.02411,17.02411,0,0,0-17,17v407.8l2-.61v-407.19a15.01828,15.01828,0,0,1,15-15H723.93825Zm183.5,0h-394a17.02411,17.02411,0,0,0-17,17v458a17.0241,17.0241,0,0,0,17,17h394a17.0241,17.0241,0,0,0,17-17v-458A17.02411,17.02411,0,0,0,906.81813,274.08691Zm15,475a15.01828,15.01828,0,0,1-15,15h-394a15.01828,15.01828,0,0,1-15-15v-458a15.01828,15.01828,0,0,1,15-15h394a15.01828,15.01828,0,0,1,15,15Z","transform","translate(-276.18187 -133.91309)","fill","#3f3d56"],["d","M801.81836,318.08691h-184a9.01015,9.01015,0,0,1-9-9v-44a9.01016,9.01016,0,0,1,9-9h184a9.01016,9.01016,0,0,1,9,9v44A9.01015,9.01015,0,0,1,801.81836,318.08691Z","transform","translate(-276.18187 -133.91309)","fill","#565656"],["cx","433.63626","cy","105.17383","r","20","fill","#565656"],["cx","433.63626","cy","105.17383","r","12.18187","fill","#fff"],[1,"mt-2"],[1,"text-muted"],[1,"text-center","py-2","px-2"],[1,"mb-3"],[1,"btn","btn-primary",3,"click"],[1,"file-size",3,"innerText","ngClass"],[1,"file-time",3,"appTippy","tippyProps"],["timeago","",3,"date"],["ngbDropdown","","display","dynamic","container","body",1,"dropdown-no-caret","ms-auto","flex-shrink-0",3,"placement","openChange"],["fileDropdown","ngbDropdown"],["ngbDropdownToggle","",1,"material-icons-outlined","d-block","cursor-pointer","dropdown-icon"],["ngbDropdownMenu",""],[3,"file","isSelected","dropdownRef",4,"ngIf"],[3,"file","isSelected","dropdownRef"],[1,"flat-container","p-3",3,"innerHTML"]],template:function(t,n){1&t&&(e.YNc(0,Mr,6,2,"ng-container",0),e.YNc(1,Sr,2,6,"ng-template",null,1,e.W1O),e.YNc(3,Er,3,9,"ng-template",null,2,e.W1O),e.YNc(5,Dr,6,4,"ng-template",null,3,e.W1O),e.YNc(7,Fr,1,1,"ng-template",null,4,e.W1O)),2&t&&e.Q6J("ngIf",!n.loading)},dependencies:[C.mk,C.sg,C.O5,C.tP,Rt,En,On,Se,ae.jt,ae.iD,ae.Vi,re.xd,re.x0,re.N7,re.LO,Bn,Jt.$,Ko,oi,Xo,er,C.uU,Tn,yn.g],styles:['.cdk-virtual-scroll-viewport.file-grid-scroll[_ngcontent-%COMP%]{margin-bottom:-16px!important}.cdk-virtual-scroll-viewport.file-grid-scroll[_ngcontent-%COMP%]:not(.touch-device)   .file-list[_ngcontent-%COMP%]:not(.drag-multiple-files)   .file-item[_ngcontent-%COMP%]:not(.pending):hover, .cdk-virtual-scroll-viewport.file-grid-scroll[_ngcontent-%COMP%]:not(.touch-device)   .drag-multiple-files[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]:not(.pending):not(.selected):hover{box-shadow:0 .375rem .25rem #00000013}.cdk-virtual-scroll-viewport[_ngcontent-%COMP%]:not(.touch-device)   .file-item[_ngcontent-%COMP%]   .dropdown-icon[_ngcontent-%COMP%]{opacity:.7;transition:opacity .2s}.cdk-virtual-scroll-viewport[_ngcontent-%COMP%]:not(.touch-device)   .file-item[_ngcontent-%COMP%]   .dropdown-icon[_ngcontent-%COMP%]:hover{opacity:1}.cdk-virtual-scroll-viewport.file-simple-scroll[_ngcontent-%COMP%]:not(.touch-device)   .file-item[_ngcontent-%COMP%]:not(.selected):hover{background-color:rgb(var(--bs-light-rgb))}.file-grid-list[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:16px;padding-bottom:16px!important}.file-grid-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]{transition:opacity .2s,box-shadow .2s;height:228px}.file-grid-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .flat-container[_ngcontent-%COMP%]{transition:border-color .2s}.file-grid-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]{transition:background-color .2s}.file-grid-list[_ngcontent-%COMP%]   .file-item.selected[_ngcontent-%COMP%]   .flat-container[_ngcontent-%COMP%]{border-color:#c6cfff}.file-grid-list[_ngcontent-%COMP%]   .file-item.selected[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]{background-color:#dae0ff}.file-grid-list[_ngcontent-%COMP%]   .file-item.selected[_ngcontent-%COMP%]   .file-link[_ngcontent-%COMP%]{text-shadow:0 1px #fff}.file-simple-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]{grid-template-columns:calc(100% - 24px) 24px;align-items:center;transition:opacity .2s,background-color .2s;background-color:#fff;height:57px}.file-simple-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(.filename):not(.dropdown-no-caret){text-align:center;margin:0 auto}.file-simple-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(.dropdown-no-caret){font-size:.875rem}.file-simple-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]:not(:first-of-type){border-top:1px solid transparent}.file-simple-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]:not(:first-of-type):not(.selected){border-color:#dee2e6}.file-simple-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]:not(:first-of-type).selected, .file-simple-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]:not(:first-of-type).selected + .file-item[_ngcontent-%COMP%]{border-color:#c6cfff}.file-simple-list[_ngcontent-%COMP%]   .file-item.selected[_ngcontent-%COMP%]{background-color:#dae0ff}.file-simple-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-extension[_ngcontent-%COMP%], .file-simple-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-size[_ngcontent-%COMP%], .file-simple-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-time[_ngcontent-%COMP%], .file-simple-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   app-upload-file-icon[_ngcontent-%COMP%]{display:none}.file-simple-list[_ngcontent-%COMP%]   app-upload-file-icon[_ngcontent-%COMP%]{color:#495057}.file-item.pending[_ngcontent-%COMP%]{opacity:.5}.file-item.pending[_ngcontent-%COMP%]   .dropdown-icon[_ngcontent-%COMP%]{display:none!important}.file-item.pending[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{pointer-events:none}.file-preview[_ngcontent-%COMP%]{height:150px;background-color:#00000008}.file-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{opacity:0;transition:opacity .3s}.file-preview[_ngcontent-%COMP%]   img.ng-lazyloaded[_ngcontent-%COMP%]:not(.ng-failed-lazyloaded){opacity:1}.file-preview[_ngcontent-%COMP%]   img.ng-failed-lazyloaded[_ngcontent-%COMP%]{display:none}.file-preview[_ngcontent-%COMP%]   .ng-lazyloaded[_ngcontent-%COMP%]:not(.ng-failed-lazyloaded) + .svg-container[_ngcontent-%COMP%], .file-preview[_ngcontent-%COMP%]   .ng-lazyloading[_ngcontent-%COMP%] + .svg-container[_ngcontent-%COMP%]{display:none}.file-preview[_ngcontent-%COMP%]   .svg-container[_ngcontent-%COMP%]{left:50%;top:50%;transform:translate(-50%,-50%);opacity:0;animation:fadeIn07 .3s linear forwards}.file-size.after-content[_ngcontent-%COMP%]:after{content:" - "}.cdk-drag-placeholder[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{opacity:.4}.drag-multiple-files[_ngcontent-%COMP%]   .file-item.selected[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{opacity:.4;pointer-events:none}.cdk-drag-preview[_ngcontent-%COMP%]{min-width:150px}.cdk-drag-dragging[_ngcontent-%COMP%]{display:none}.empty-filtered-list[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:.5}@keyframes fadeIn07{0%{opacity:0}to{opacity:.7}}@media (min-width: 768px){.file-grid-list[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(290px,1fr))}.file-simple-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]{grid-template-columns:calc(24px + 1.5rem) calc(58% - 24px - 1.5rem) repeat(2,18%) 6%}.file-simple-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-size[_ngcontent-%COMP%], .file-simple-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-time[_ngcontent-%COMP%]{display:initial}.file-simple-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   app-upload-file-icon[_ngcontent-%COMP%]{display:block}}@media (min-width: 960px){.file-grid-list[_ngcontent-%COMP%]{gap:24px;padding-bottom:24px!important}.cdk-virtual-scroll-viewport.file-grid-scroll[_ngcontent-%COMP%]{margin-bottom:-24px!important}.cdk-virtual-scroll-viewport.file-grid-scroll[_ngcontent-%COMP%]:not(.touch-device){margin-left:-.5rem!important;margin-right:-.5rem!important}.cdk-virtual-scroll-viewport.file-grid-scroll[_ngcontent-%COMP%]:not(.touch-device)   .file-list[_ngcontent-%COMP%]{padding-left:.5rem!important;padding-right:.5rem!important}}@media (min-width: 1200px){.file-simple-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]{grid-template-columns:calc(24px + 1.5rem) calc(52% - 24px - 1.5rem) repeat(3,14%) 6%}.file-simple-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-extension[_ngcontent-%COMP%]{display:initial}}@media (min-width: 3738px){.file-grid-list[_ngcontent-%COMP%]{grid-template-columns:repeat(10,1fr)}}']}),o})();const kr=["scrollerContainer"],Zr=["app-hidden-scroller",""],Rr=function(o,r){return{"max-height":o,height:r}},Lr=["*"];let li=(()=>{class o{constructor(){this.touchDevice=Ve.eX}ngAfterViewInit(){const t=this.scrollerContainer.nativeElement;t.style.marginRight=-(t.offsetWidth-t.clientWidth)+"px"}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["","app-hidden-scroller",""]],viewQuery:function(t,n){if(1&t&&e.Gf(kr,5),2&t){let i;e.iGM(i=e.CRH())&&(n.scrollerContainer=i.first)}},inputs:{maxHeight:"maxHeight",height:"height"},attrs:Zr,ngContentSelectors:Lr,decls:3,vars:4,consts:[[1,"scroller-container",3,"ngStyle"],["scrollerContainer",""]],template:function(t,n){1&t&&(e.F$t(),e.TgZ(0,"div",0,1),e.Hsn(2),e.qZA()),2&t&&e.Q6J("ngStyle",e.WLB(1,Rr,n.maxHeight||null,n.height||null))},dependencies:[C.PC],styles:[".scroller-container[_ngcontent-%COMP%]{overflow-y:scroll}[_nghost-%COMP%]{overflow:hidden}"]}),o})();function Nr(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",5),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return i.textModel="",e.KtG(i.keyupEvent(!0))}),e._uU(1,"clear"),e.qZA()}}let zr=(()=>{class o{constructor(){this.disabled=!1,this.enterKeyOnly=!1,this.textEvent=new e.vpe,this.textModel="",this.textEmitted=""}ngOnInit(){}keyupEvent(t=!1){if(this.disabled)return;const n=this.textModel.trim();n.length>0&&!t&&this.enterKeyOnly||n!==this.textEmitted&&(this.textEmitted=n,this.textEvent.emit(this.textEmitted))}labelClick(t){0!==this.textModel.trim().length&&(t.preventDefault(),t.stopPropagation(),this.keyupEvent(!0))}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-input-filter-text"]],inputs:{disabled:"disabled",enterKeyOnly:"enterKeyOnly"},outputs:{textEvent:"textEvent"},decls:6,vars:3,consts:[[1,"input-group","position-relative"],[1,"input-group-text"],["for","text-input",1,"d-block","material-icons-outlined","text-muted","cursor-pointer",3,"click"],["class","material-icons d-block icon-small text-danger position-absolute reset-text-input cursor-pointer",3,"click",4,"ngIf"],["type","text","placeholder","Cerca...","id","text-input",1,"form-control",3,"disabled","ngModel","ngModelChange","keyup","keyup.enter"],[1,"material-icons","d-block","icon-small","text-danger","position-absolute","reset-text-input","cursor-pointer",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"label",2),e.NdJ("click",function(s){return n.labelClick(s)}),e._uU(3,"search"),e.qZA()(),e.YNc(4,Nr,2,0,"div",3),e.TgZ(5,"input",4),e.NdJ("ngModelChange",function(s){return n.textModel=s})("keyup",function(){return n.keyupEvent()})("keyup.enter",function(){return n.keyupEvent(!0)}),e.qZA()()),2&t&&(e.xp6(4),e.Q6J("ngIf",n.textModel.trim().length>0),e.xp6(1),e.Q6J("disabled",n.disabled)("ngModel",n.textModel))},dependencies:[C.O5,R.Fj,R.JJ,R.On],styles:["#text-input[_ngcontent-%COMP%]{padding-right:calc(.5rem + 26px)}label[_ngcontent-%COMP%]{transform:rotateY(180deg);position:relative;top:1px}.reset-text-input[_ngcontent-%COMP%]{top:calc(50% - 10px);right:5px;z-index:6}.input-group[_ngcontent-%COMP%]{box-shadow:0 .125rem .25rem #00000013}"]}),o})(),ci=(()=>{class o{transform(t,n){return t.join(n)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275pipe=e.Yjl({name:"arrayJoin",type:o,pure:!0}),o})();const Hr=["supportedFilesContainer"];function qr(o,r){if(1&o&&(e.TgZ(0,"tr"),e._UZ(1,"td",35),e.ALo(2,"arrayJoin"),e._UZ(3,"td",33),e.ALo(4,"formatBytes"),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.Q6J("innerText","."+e.xi3(2,2,t.ext,", .")),e.xp6(2),e.Q6J("innerText",e.lcZ(4,5,t.maxSize))}}function Jr(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",36),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.scrollDiv())}),e._uU(1,"expand_circle_down"),e.qZA()}}function Qr(o,r){1&o&&(e.O4$(),e.ynx(0),e._UZ(1,"path",37)(2,"path",38),e.BQk())}function Br(o,r){1&o&&(e.O4$(),e._UZ(0,"path",37)(1,"path",39))}function Yr(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"li")(2,"a",31),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.pushMassiveAction(i.actionNames.MOVE))}),e.TgZ(3,"div",26),e._uU(4,"drive_file_move"),e.qZA(),e.TgZ(5,"div"),e._uU(6,"Sposta selezionati"),e.qZA()()(),e.TgZ(7,"li"),e._UZ(8,"hr",40),e.qZA(),e.TgZ(9,"li")(10,"a",31),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.pushMassiveAction(i.actionNames.DELETE))}),e.TgZ(11,"div",26),e._uU(12,"delete"),e.qZA(),e.TgZ(13,"div"),e._uU(14,"Elimina selezionati"),e.qZA()()(),e.BQk()}}const di=function(){return["bottom-end","top-end","auto"]},Mn=function(o){return{disabled:o}};let Wr=(()=>{class o{constructor(t,n){this.uploadService=t,this.ngZone=n,this.loading=!0,this.fileList=[],this.filterEvent=new e.vpe,this.selectAllFilesEvent=new e.vpe,this.openInfoModal=new e.vpe,this.supportedFiles=Rn,this.showSupportedFilesScrollIcon=!1,this.layoutParams=At,this.layoutTypes=ze,this.selectedFiles=[],this.actionNames=Ne,this.layoutOptions=this.uploadService.preferences.layoutOptions}ngOnInit(){this.showSupportedFilesScrollIcon=!Ve.eX,this.selectedFileListSubscription=this.uploadService.selectedFileListObservable.subscribe(t=>{this.selectedFiles=t.map(n=>n.name)})}ngAfterViewInit(){this.supportedFilesScroller=this.supportedFilesDiv.nativeElement.parentElement,Ve.eX||this.setScrollIconCheck()}scrollDiv(){this.supportedFilesScroller.scroll({top:this.supportedFilesScroller.scrollTop+100,left:0,behavior:"smooth"})}setScrollIconCheck(){this.ngZone.runOutsideAngular(()=>{this.supportedFilesScroller.addEventListener("scroll",()=>{const n=this.supportedFilesScroller.scrollHeight-this.supportedFilesScroller.clientHeight>this.supportedFilesScroller.scrollTop;this.showSupportedFilesScrollIcon!==n&&this.ngZone.run(()=>{this.showSupportedFilesScrollIcon=n})})})}pushLayoutOptions(){this.uploadService.pushLayoutOptions(this.layoutOptions)}toggleLayoutOrder(){this.layoutOptions.asc=!this.layoutOptions.asc,this.pushLayoutOptions()}setLayoutType(){this.layoutOptions.type=this.layoutOptions.type===ze.GRID?ze.LIST:ze.GRID,this.pushLayoutOptions()}setLayoutOrder(t){this.layoutOptions.orderBy=t,this.pushLayoutOptions()}selectOrDeselectAll(t){t.close(),this.selectedFiles.length?this.uploadService.pushSelectedFile([]):this.selectAllFilesEvent.emit()}pushMassiveAction(t){const n=this.fileList.filter(i=>this.selectedFiles.includes(i.name));this.uploadService.pushAction({name:t,payload:{entities:n.map(i=>({name:i.name,ext:i.ext,type:H.FILE,url:i.url,embedUrl:i.embedUrl,isImage:i.isImage}))}})}ngOnDestroy(){this.selectedFileListSubscription?.unsubscribe()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(We),e.Y36(e.R0b))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upload-filter"]],viewQuery:function(t,n){if(1&t&&e.Gf(Hr,5),2&t){let i;e.iGM(i=e.CRH())&&(n.supportedFilesDiv=i.first)}},inputs:{loading:"loading",fileList:"fileList"},outputs:{filterEvent:"filterEvent",selectAllFilesEvent:"selectAllFilesEvent",openInfoModal:"openInfoModal"},decls:71,vars:30,consts:[[1,"flat-container","py-2","px-3","flex-grow-1","position-relative","supported-files-container"],[1,"d-flex","align-items-end","mb-2"],[1,"fv-small-caps","fs-lg"],[1,"material-icons-outlined","d-block","ms-auto","text-primary","cursor-pointer",3,"click"],["app-hidden-scroller","","maxHeight","130px",1,"position-relative"],["supportedFilesContainer",""],[1,"table","table-striped","text-center","mb-0"],[4,"ngFor","ngForOf"],["class","material-icons d-block position-absolute cursor-pointer text-muted scroll-icon user-select-none",3,"click",4,"ngIf"],[1,"d-flex","utilities"],[1,"d-block","flex-grow-1","input-filter",3,"disabled","enterKeyOnly","textEvent"],[1,"flex-shrink-0","ms-auto","btn-container","d-flex","align-items-stretch"],[1,"btn","btn-outline-indigo","shadow-none","d-flex","align-items-center",3,"disabled","click"],[1,"material-icons",3,"innerText"],[1,"btn-group","mx-3"],[1,"btn","btn-outline-primary","py-1","shadow-none",3,"disabled","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 16 16"],[4,"ngIf","ngIfElse"],["desc",""],["ngbDropdown","","display","dynamic",1,"dropdown-no-caret","btn-group",3,"placement"],["ngbDropdownToggle","",1,"btn","btn-outline-primary","px-1","shadow-none",3,"disabled"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16"],["d","M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"],["ngbDropdownMenu","",1,"list-unstyled","mb-0","dropdown-menu","dropdown-material-icons"],[1,"dropdown-header","text-center"],["role","button",1,"dropdown-item","d-flex","align-items-center",3,"ngClass","click"],[1,"material-icons-outlined","d-block"],["actionDropdown","ngbDropdown"],["ngbDropdownToggle","",1,"btn","btn-outline-success","py-1","h-100","shadow-none",3,"disabled"],["d","M3 14.5A1.5 1.5 0 0 1 1.5 13V3A1.5 1.5 0 0 1 3 1.5h8a.5.5 0 0 1 0 1H3a.5.5 0 0 0-.5.5v10a.5.5 0 0 0 .5.5h10a.5.5 0 0 0 .5-.5V8a.5.5 0 0 1 1 0v5a1.5 1.5 0 0 1-1.5 1.5H3z"],["d","m8.354 10.354 7-7a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0z"],["role","button",1,"dropdown-item","d-flex","align-items-center",3,"click"],[1,"material-icons-outlined","d-block",3,"innerText"],[3,"innerText"],[4,"ngIf"],[1,"fst-italic",3,"innerText"],[1,"material-icons","d-block","position-absolute","cursor-pointer","text-muted","scroll-icon","user-select-none",3,"click"],["fill-rule","evenodd","d","M10.082 5.629 9.664 7H8.598l1.789-5.332h1.234L13.402 7h-1.12l-.419-1.371h-1.781zm1.57-.785L11 2.687h-.047l-.652 2.157h1.351z"],["d","M12.96 14H9.028v-.691l2.579-3.72v-.054H9.098v-.867h3.785v.691l-2.567 3.72v.054h2.645V14zM4.5 2.5a.5.5 0 0 0-1 0v9.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L4.5 12.293V2.5z"],["d","M12.96 14H9.028v-.691l2.579-3.72v-.054H9.098v-.867h3.785v.691l-2.567 3.72v.054h2.645V14zm-8.46-.5a.5.5 0 0 1-1 0V3.707L2.354 4.854a.5.5 0 1 1-.708-.708l2-1.999.007-.007a.498.498 0 0 1 .7.006l2 2a.5.5 0 1 1-.707.708L4.5 3.707V13.5z"],[1,"dropdown-divider"]],template:function(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"File accettati"),e.qZA(),e.TgZ(4,"div",3),e.NdJ("click",function(){return n.openInfoModal.emit()}),e._uU(5,"info"),e.qZA()(),e.TgZ(6,"div",4)(7,"div",null,5)(9,"table",6)(10,"tbody"),e.YNc(11,qr,5,7,"tr",7),e.qZA()(),e.YNc(12,Jr,2,0,"div",8),e.qZA()()(),e.TgZ(13,"div",9)(14,"app-input-filter-text",10),e.NdJ("textEvent",function(a){return n.filterEvent.emit(a)}),e.qZA(),e.TgZ(15,"div",11)(16,"button",12),e.NdJ("click",function(){return n.setLayoutType()}),e._UZ(17,"span",13),e.qZA(),e.TgZ(18,"div",14)(19,"button",15),e.NdJ("click",function(){return n.toggleLayoutOrder()}),e.O4$(),e.TgZ(20,"svg",16),e.YNc(21,Qr,3,0,"ng-container",17),e.YNc(22,Br,2,0,"ng-template",null,18,e.W1O),e.qZA()(),e.kcU(),e.TgZ(24,"div",19)(25,"button",20),e.O4$(),e.TgZ(26,"svg",21),e._UZ(27,"path",22),e.qZA()(),e.kcU(),e.TgZ(28,"ul",23)(29,"li")(30,"h6",24),e._uU(31,"Criterio di ordinamento"),e.qZA()(),e.TgZ(32,"li")(33,"a",25),e.NdJ("click",function(){return n.setLayoutOrder(n.layoutParams.FILENAME)}),e.TgZ(34,"div",26),e._uU(35,"account_box"),e.qZA(),e.TgZ(36,"div"),e._uU(37,"Nome"),e.qZA()()(),e.TgZ(38,"li")(39,"a",25),e.NdJ("click",function(){return n.setLayoutOrder(n.layoutParams.TIME)}),e.TgZ(40,"div",26),e._uU(41,"history"),e.qZA(),e.TgZ(42,"div"),e._uU(43,"Ultima modifica"),e.qZA()()(),e.TgZ(44,"li")(45,"a",25),e.NdJ("click",function(){return n.setLayoutOrder(n.layoutParams.SIZE)}),e.TgZ(46,"div",26),e._uU(47,"balance"),e.qZA(),e.TgZ(48,"div"),e._uU(49,"Dimensione"),e.qZA()()(),e.TgZ(50,"li")(51,"a",25),e.NdJ("click",function(){return n.setLayoutOrder(n.layoutParams.EXTENSION)}),e.TgZ(52,"div",26),e._uU(53,"description"),e.qZA(),e.TgZ(54,"div"),e._uU(55,"Estensione"),e.qZA()()()()()(),e.TgZ(56,"div",19,27)(58,"button",28),e.O4$(),e.TgZ(59,"svg",16),e._UZ(60,"path",29)(61,"path",30),e.qZA()(),e.kcU(),e.TgZ(62,"ul",23)(63,"li")(64,"h6",24),e._uU(65,"Azioni massive"),e.qZA()(),e.TgZ(66,"li")(67,"a",31),e.NdJ("click",function(){e.CHM(i);const a=e.MAs(57);return e.KtG(n.selectOrDeselectAll(a))}),e._UZ(68,"div",32)(69,"div",33),e.qZA()(),e.YNc(70,Yr,15,0,"ng-container",34),e.qZA()()()()}if(2&t){const i=e.MAs(23);e.xp6(11),e.Q6J("ngForOf",n.supportedFiles),e.xp6(1),e.Q6J("ngIf",n.showSupportedFilesScrollIcon),e.xp6(2),e.Q6J("disabled",n.loading)("enterKeyOnly",!0),e.xp6(2),e.Q6J("disabled",n.loading),e.xp6(1),e.Q6J("innerText",n.layoutOptions.type===n.layoutTypes.GRID?"space_dashboard":"view_list"),e.xp6(2),e.Q6J("disabled",n.loading),e.xp6(2),e.Q6J("ngIf",n.layoutOptions.asc)("ngIfElse",i),e.xp6(3),e.Q6J("placement",e.DdM(20,di)),e.xp6(1),e.Q6J("disabled",n.loading),e.xp6(8),e.Q6J("ngClass",e.VKq(21,Mn,n.layoutOptions.orderBy===n.layoutParams.FILENAME)),e.xp6(6),e.Q6J("ngClass",e.VKq(23,Mn,n.layoutOptions.orderBy===n.layoutParams.TIME)),e.xp6(6),e.Q6J("ngClass",e.VKq(25,Mn,n.layoutOptions.orderBy===n.layoutParams.SIZE)),e.xp6(6),e.Q6J("ngClass",e.VKq(27,Mn,n.layoutOptions.orderBy===n.layoutParams.EXTENSION)),e.xp6(5),e.Q6J("placement",e.DdM(29,di)),e.xp6(2),e.Q6J("disabled",n.loading),e.xp6(10),e.Q6J("innerText",n.selectedFiles.length?"unpublished":"check_circle_outline"),e.xp6(1),e.Q6J("innerText",n.selectedFiles.length?"Deseleziona tutti":"Seleziona tutti"),e.xp6(1),e.Q6J("ngIf",n.selectedFiles.length)}},dependencies:[C.mk,C.sg,C.O5,li,zr,ae.jt,ae.iD,ae.Vi,ci,Tn],styles:[".supported-files-container[_ngcontent-%COMP%]{display:none}.utilities[_ngcontent-%COMP%]{margin:0 1rem;flex-wrap:wrap}.utilities[_ngcontent-%COMP%]   .btn-container[_ngcontent-%COMP%]{margin-top:1rem}.input-filter[_ngcontent-%COMP%]{width:100%}@media (min-width: 500px){.input-filter[_ngcontent-%COMP%]{width:auto}.utilities[_ngcontent-%COMP%]{flex-wrap:nowrap}.utilities[_ngcontent-%COMP%]   .btn-container[_ngcontent-%COMP%]{margin-top:initial}.utilities[_ngcontent-%COMP%]   .btn-outline-indigo[_ngcontent-%COMP%]{margin-left:1rem}}@media (min-width: 768px){.utilities[_ngcontent-%COMP%]{margin:initial}}@media (min-width: 1100px){.supported-files-container[_ngcontent-%COMP%]{display:initial}.utilities[_ngcontent-%COMP%]{margin-top:1.5rem}.scroll-icon[_ngcontent-%COMP%]{right:0;bottom:0;transition:opacity .2s;opacity:.7}.scroll-icon[_ngcontent-%COMP%]:hover{opacity:1}}"]}),o})();const Gr=["modal"];function Vr(o,r){1&o&&(e.ynx(0),e._uU(1," Il nome non pu\xf2 essere vuoto! "),e.BQk())}function Kr(o,r){if(1&o&&e._UZ(0,"span",18),2&o){const t=e.oxw(3);e.Q6J("innerHTML",t.errorMessage,e.oJD)}}function $r(o,r){1&o&&e._uU(0,"Questo nome \xe8 gi\xe0 usato da un'altra cartella!")}function jr(o,r){if(1&o&&(e.YNc(0,Kr,1,1,"span",16),e.YNc(1,$r,1,0,"ng-template",null,17,e.W1O)),2&o){const t=e.MAs(2),n=e.oxw(2);e.Q6J("ngIf",!n.nameValidationErrors.alreadyUsed)("ngIfElse",t)}}function Xr(o,r){if(1&o&&(e.TgZ(0,"div",13),e.YNc(1,Vr,2,0,"ng-container",14),e.YNc(2,jr,3,2,"ng-template",null,15,e.W1O),e.qZA()),2&o){const t=e.MAs(3),n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.nameValidationErrors.invalidLength)("ngIfElse",t)}}const es=function(o,r){return{"is-valid":o,"is-invalid":r}};let ts=(()=>{class o{constructor(){this.reservedNames=[],this.createFolderEvent=new e.vpe,this.nameRegex=Ln,this.name="",this.openFolderOnCreation=!1,this.isNameValid=!1,this.nameValidationErrors=tn,this.errorMessage="",this.opened=!1}ngOnInit(){}open(){this.opened=!0,this.modalComponent.open()}onHidden(t){this.opened=!1,t.reset(""),this.openFolderOnCreation=!1,this.isNameValid=!1,this.errorMessage="",this.nameValidationErrors=tn}checkNameValidity(){this.nameValidationErrors=Kn(this.name,"",H.FOLDER,this.reservedNames),this.isNameValid=!Object.values(this.nameValidationErrors).some(t=>t),this.nameValidationErrors.invalidStartOrEnd?this.errorMessage="Il nome non pu\xf2 iniziare o finire con un punto o uno spazio!":this.isNameValid||(this.errorMessage="Il nome pu\xf2 contenere solo i caratteri <em>a-z</em>, i trattini alti e bassi <em>-_</em>, gli spazi e i numeri!")}create(){!this.opened||!this.isNameValid||(this.createFolderEvent.emit({name:this.name,open:this.openFolderOnCreation}),this.modalComponent.close())}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upload-newfolder-modal"]],viewQuery:function(t,n){if(1&t&&e.Gf(Gr,5),2&t){let i;e.iGM(i=e.CRH())&&(n.modalComponent=i.first)}},inputs:{reservedNames:"reservedNames"},outputs:{createFolderEvent:"createFolderEvent"},decls:31,vars:10,consts:[["title","Crea nuova cartella",3,"disableCloseButton","hidden"],["modal",""],[1,"mt-2"],["for","folder-name",1,"fs-sm"],["type","text","id","folder-name","required","",1,"form-control",3,"ngClass","pattern","ngModel","ngModelChange"],["newNameInput","ngModel"],["class","invalid-feedback",4,"ngIf"],[1,"form-check","mt-2","mb-0","fs-sm"],["type","checkbox","id","open-folder",1,"form-check-input",3,"ngModel","ngModelChange"],["for","open-folder",1,"form-check-label"],["footer",""],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"invalid-feedback"],[4,"ngIf","ngIfElse"],["invalidName",""],[3,"innerHTML",4,"ngIf","ngIfElse"],["alreadyUsed",""],[3,"innerHTML"]],template:function(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"app-modal",0,1),e.NdJ("hidden",function(){e.CHM(i);const a=e.MAs(20);return e.KtG(n.onHidden(a))}),e.TgZ(2,"p"),e._uU(3," Tramite questo modal \xe8 possibile "),e.TgZ(4,"strong"),e._uU(5,"creare una nuova cartella"),e.qZA(),e._uU(6," nella posizione corrente. Il nome della nuova cartella far\xe0 "),e.TgZ(7,"strong"),e._uU(8,"parte dell'url"),e.qZA(),e._uU(9," di tutti i file che la cartella stessa conterr\xe0. Per questo motivo, \xe8 bene che includa esclusivamente dei caratteri facilmente inseribili nei link di un file: in particolare, sono accettati i caratteri "),e.TgZ(10,"em"),e._uU(11,"a-z"),e.qZA(),e._uU(12,", sia maiuscoli che minuscoli, i trattini alti e bassi "),e.TgZ(13,"em"),e._uU(14,"-_"),e.qZA(),e._uU(15," e i numeri. "),e.qZA(),e.TgZ(16,"div",2)(17,"label",3),e._uU(18,"Nome della nuova cartella:"),e.qZA(),e.TgZ(19,"input",4,5),e.NdJ("ngModelChange",function(a){return n.name=a})("ngModelChange",function(){return n.checkNameValidity()}),e.qZA(),e.YNc(21,Xr,4,2,"div",6),e.qZA(),e.TgZ(22,"div",7)(23,"input",8),e.NdJ("ngModelChange",function(a){return n.openFolderOnCreation=a}),e.qZA(),e.TgZ(24,"label",9),e._uU(25,"Apri la cartella dopo la creazione"),e.qZA()(),e.ynx(26,10),e.TgZ(27,"button",11),e.NdJ("click",function(){e.CHM(i);const a=e.MAs(1);return e.KtG(a.close("Close click"))}),e._uU(28,"Annulla"),e.qZA(),e.TgZ(29,"button",12),e.NdJ("click",function(){return n.create()}),e._uU(30,"Crea"),e.qZA(),e.BQk(),e.qZA()}if(2&t){const i=e.MAs(20);e.Q6J("disableCloseButton",!0),e.xp6(19),e.Q6J("ngClass",e.WLB(7,es,i.dirty&&n.isNameValid,i.dirty&&!n.isNameValid))("pattern",n.nameRegex)("ngModel",n.name),e.xp6(2),e.Q6J("ngIf",!n.isNameValid),e.xp6(2),e.Q6J("ngModel",n.openFolderOnCreation),e.xp6(6),e.Q6J("disabled",!n.isNameValid)}},dependencies:[C.mk,C.O5,R.Fj,R.Wl,R.JJ,R.Q7,R.c5,R.On,ut.z]}),o})(),pi=(()=>{class o{transform(t,n){return t.includes(n)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275pipe=e.Yjl({name:"arrayIncludes",type:o,pure:!0}),o})();function ns(o,r){1&o&&(e.TgZ(0,"div",4),e._UZ(1,"app-loader",5),e.qZA())}function is(o,r){1&o&&e.GkF(0)}const os=function(){return{$implicit:"Il mio spazio"}};function rs(o,r){if(1&o&&(e.ynx(0),e.YNc(1,is,1,0,"ng-container",21),e.BQk()),2&o){e.oxw();const t=e.MAs(8);e.xp6(1),e.Q6J("ngTemplateOutlet",t)("ngTemplateOutletContext",e.DdM(2,os))}}function ss(o,r){1&o&&e.GkF(0)}function as(o,r){1&o&&e.GkF(0)}const ls=function(o,r){return{$implicit:o,index:r}};function cs(o,r){if(1&o&&(e.ynx(0),e.YNc(1,as,1,0,"ng-container",21),e.BQk()),2&o){const t=r.$implicit,n=r.index;e.oxw(2);const i=e.MAs(10);e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.WLB(2,ls,t,n+1))}}function ds(o,r){1&o&&e.GkF(0)}const ps=function(){return{$implicit:"Il mio spazio",index:0}},hs=function(o){return{$implicit:o}};function us(o,r){if(1&o&&(e.YNc(0,ss,1,0,"ng-container",21),e.YNc(1,cs,2,5,"ng-container",22),e.ALo(2,"slice"),e.YNc(3,ds,1,0,"ng-container",21)),2&o){e.oxw();const t=e.MAs(10),n=e.MAs(8),i=e.oxw();e.Q6J("ngTemplateOutlet",t)("ngTemplateOutletContext",e.DdM(9,ps)),e.xp6(1),e.Q6J("ngForOf",e.Dn7(2,5,i.currentFolderPath,0,-1)),e.xp6(2),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(10,hs,i.currentFolderPath[i.currentFolderPath.length-1]))}}function gs(o,r){1&o&&e._UZ(0,"li",23),2&o&&e.Q6J("innerText",r.$implicit)}function ms(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"li",24)(1,"a",25),e.NdJ("click",function(){const s=e.CHM(t).index,a=e.oxw(2);return e.KtG(a.navigateUp(s))}),e.qZA()()}if(2&o){const t=r.$implicit;e.xp6(1),e.Q6J("innerText",t)}}function fs(o,r){1&o&&(e.O4$(),e.ynx(0),e._UZ(1,"path",29)(2,"path",30),e.BQk())}function _s(o,r){1&o&&(e.O4$(),e._UZ(0,"path",31))}const vs=function(o,r){return{"is-entered":o,"flat-container px-3":r}};function Cs(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"li",26),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.navigateUp(-1))})("mouseenter",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.setFolderEntered(null,!0))})("mouseleave",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.setFolderEntered(void 0))}),e.O4$(),e.TgZ(1,"svg",17),e.YNc(2,fs,3,0,"ng-container",9),e.YNc(3,_s,1,0,"ng-template",null,27,e.W1O),e.qZA(),e.kcU(),e.TgZ(5,"div",28),e._uU(6,"cartella superiore"),e.qZA()()}if(2&o){const t=e.MAs(4),n=e.oxw(2);e.Q6J("ngClass",e.WLB(3,vs,null===n.currentFolderEnteredName,n.currentLayout===n.layouts.GRID)),e.xp6(2),e.Q6J("ngIf",n.currentLayout===n.layouts.GRID)("ngIfElse",t)}}function xs(o,r){1&o&&(e.O4$(),e._UZ(0,"path",43))}function ys(o,r){1&o&&(e.O4$(),e._UZ(0,"path",44))}const bs=function(o,r,t){return{pending:o,"is-entered":r,"flat-container":t}},Ts=function(){return["left-top","auto"]};function Ms(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"li",32),e.NdJ("mouseenter",function(){const s=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.setFolderEntered(s.name))})("mouseleave",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.setFolderEntered(void 0))}),e.ALo(1,"arrayIncludes"),e.TgZ(2,"div",33),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.navigateDown(s.name))}),e.O4$(),e.TgZ(3,"svg",34),e.YNc(4,xs,1,0,"path",35),e.YNc(5,ys,1,0,"ng-template",null,27,e.W1O),e.qZA(),e.kcU(),e._UZ(7,"div",36),e.qZA(),e.TgZ(8,"div",37)(9,"div",38),e._uU(10,"more_vert"),e.qZA(),e.TgZ(11,"ul",39)(12,"li")(13,"a",40),e.NdJ("click",function(){e.CHM(t),e.oxw(2);const i=e.MAs(4);return e.KtG(i.open())}),e.TgZ(14,"div",41),e._uU(15,"add_circle_outline"),e.qZA(),e.TgZ(16,"div"),e._uU(17,"Nuova cartella"),e.qZA()()(),e.TgZ(18,"li")(19,"a",40),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.pushAction(a.actionNames.MOVE,s))}),e.TgZ(20,"div",41),e._uU(21,"drive_file_move"),e.qZA(),e.TgZ(22,"div"),e._uU(23,"Sposta"),e.qZA()()(),e.TgZ(24,"li")(25,"a",40),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.pushAction(a.actionNames.RENAME,s))}),e.TgZ(26,"div",41),e._uU(27,"drive_file_rename_outline"),e.qZA(),e.TgZ(28,"div"),e._uU(29,"Rinomina"),e.qZA()()(),e.TgZ(30,"li"),e._UZ(31,"hr",42),e.qZA(),e.TgZ(32,"li")(33,"a",40),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.pushAction(a.actionNames.DELETE,s))}),e.TgZ(34,"div",41),e._uU(35,"delete"),e.qZA(),e.TgZ(36,"div"),e._uU(37,"Elimina"),e.qZA()()()()()()}if(2&o){const t=r.$implicit,n=e.MAs(6),i=e.oxw(2);e.Q6J("ngClass",e.kEZ(8,bs,e.xi3(1,5,i.pendingFolders,t.name),i.currentFolderEnteredName===t.name,i.currentLayout===i.layouts.GRID)),e.xp6(4),e.Q6J("ngIf",i.currentLayout===i.layouts.GRID)("ngIfElse",n),e.xp6(3),e.Q6J("innerText",t.name),e.xp6(1),e.Q6J("placement",e.DdM(12,Ts))}}function ws(o,r){1&o&&(e.O4$(),e.kcU(),e.TgZ(0,"div",45),e._uU(1,"nuova cartella"),e.qZA())}const Ss=function(o,r,t){return{"touch-device":o,"d-grid folder-grid-list":r,"folder-simple-list flat-container overflow-hidden d-flex flex-column":t}};function As(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7),e._uU(2,"Cartelle"),e.qZA(),e.TgZ(3,"ol",8),e.YNc(4,rs,2,3,"ng-container",9),e.YNc(5,us,4,12,"ng-template",null,10,e.W1O),e.YNc(7,gs,1,1,"ng-template",null,11,e.W1O),e.YNc(9,ms,2,1,"ng-template",null,12,e.W1O),e.qZA()(),e.TgZ(11,"ul",13),e.YNc(12,Cs,7,6,"li",14),e.YNc(13,Ms,38,13,"li",15),e.TgZ(14,"li",16),e.NdJ("click",function(){e.CHM(t),e.oxw();const i=e.MAs(4);return e.KtG(i.open())}),e.O4$(),e.TgZ(15,"svg",17),e._UZ(16,"path",18)(17,"path",19),e.qZA(),e.YNc(18,ws,2,0,"div",20),e.qZA()()}if(2&o){const t=e.MAs(6),n=e.oxw();e.xp6(4),e.Q6J("ngIf",0===n.currentFolderPath.length)("ngIfElse",t),e.xp6(7),e.Q6J("ngClass",e.kEZ(6,Ss,n.touchDevice,n.currentLayout===n.layouts.GRID,n.currentLayout===n.layouts.LIST)),e.xp6(1),e.Q6J("ngIf",n.currentFolderPath.length>0),e.xp6(1),e.Q6J("ngForOf",n.filteredAndSortedList),e.xp6(5),e.Q6J("ngIf",n.currentLayout===n.layouts.LIST)}}let Os=(()=>{class o{constructor(t,n){this.uploadService=t,this.toastService=n,this.folderList=[],this.currentFolderPath=[],this.loading=!0,this.filter="",this.newFolderEvent=new e.vpe,this.moveEvent=new e.vpe,this.filteredAndSortedList=[],this.order=1,this.layouts=ze,this.currentLayout=ze.GRID,this.touchDevice=Ve.eX,this.actionNames=Ne,this.pendingFolders=[],this.currentFolderEnteredName="",this.folderNamesList=[],this.currentDraggedFileList=[]}ngOnInit(){this.folderNamesList=this.folderList.map(t=>t.name),this.filterList(),this.order=this.uploadService.preferences.layoutOptions.asc?1:-1,this.currentLayout=this.uploadService.preferences.layoutOptions.type,this.orderList(),this.layoutOptionsSubscription=this.uploadService.layoutOptionsObservable.subscribe(t=>{this.currentLayout=t.type,this.order=t.asc?1:-1,this.orderList()}),this.draggedFileSubscription=this.uploadService.draggedFileListObservable.subscribe(t=>{void 0!==this.currentFolderEnteredPath&&0===t.length&&this.currentDraggedFileList.length&&(this.moveEvent.emit({entities:this.currentDraggedFileList.map(n=>({name:n.name,type:H.FILE,ext:n.ext,url:n.url,embedUrl:n.embedUrl,isImage:n.isImage})),destPath:[...this.currentFolderEnteredPath]}),this.currentFolderEnteredName=""),this.currentDraggedFileList=[...t]}),this.entityPendingSubscription=this.uploadService.entityPendingObservable.subscribe(t=>{t.forEach(n=>{n.type===H.FOLDER&&(n.start?this.pendingFolders.includes(n.name)||(this.pendingFolders=[...this.pendingFolders,n.name]):this.pendingFolders.indexOf(n.name)>-1&&(this.pendingFolders=this.pendingFolders.filter(s=>n.name!==s)))})})}ngOnChanges(t){t.folderList&&!t.folderList.firstChange&&(this.folderNamesList=this.folderList.map(n=>n.name),this.filterList(),this.orderList()),t.filter&&!t.filter.firstChange&&(this.filterList(),this.orderList())}filterList(){if(0===this.filter.length)return void(this.filteredAndSortedList=this.folderList);const t=this.filter.toLowerCase();this.filteredAndSortedList=this.folderList.filter(n=>n.name.toLowerCase().includes(t))}orderList(){this.filteredAndSortedList.sort((t,n)=>(t.name>n.name?1:-1)*this.order)}navigateUp(t){this.uploadService.pushCurrentFolderPath(this.currentFolderPath.slice(0,t))}navigateDown(t){this.pendingFolders.includes(t)||this.uploadService.pushCurrentFolderPath([...this.currentFolderPath,t])}createFolder(t){var n=this;return(0,L.Z)(function*(){const i=t.name,s=[...n.currentFolderPath],a=yield n.uploadService.createDirectory([...s,i]);if(a){const h={name:n.uploadService.getFoldernameInfo(a).name,url:a};return n.newFolderEvent.emit({folder:h,destPath:s,opened:t.open}),n.toastService.show({content:`Cartella <strong>${i}</strong> creata con successo!`}),void(t.open&&n.navigateDown(i))}n.toastService.show({content:"La creazione della cartella ha <strong>riscontrato un errore!</strong><br>Prova a ricaricare la pagina ed a rieseguirla.",level:St.m.ERROR})})()}pushAction(t,n){this.uploadService.pushAction({name:t,payload:{entities:[{name:n.name,type:H.FOLDER,ext:"",url:n.url,embedUrl:n.url,isImage:!1}]}})}setFolderEntered(t,n=!1){if(void 0===t)return this.currentFolderEnteredPath=void 0,void(this.currentFolderEnteredName="");if(0!==this.currentDraggedFileList.length){if(this.currentFolderEnteredName=t,n)return void(this.currentFolderEnteredPath=this.currentFolderPath.length<2?[]:this.currentFolderPath.slice(0,-1));this.currentFolderEnteredPath=[...this.currentFolderPath,t]}}ngOnDestroy(){this.layoutOptionsSubscription?.unsubscribe(),this.draggedFileSubscription?.unsubscribe(),this.entityPendingSubscription?.unsubscribe()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(We),e.Y36(on.k))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upload-folder-list"]],inputs:{folderList:"folderList",currentFolderPath:"currentFolderPath",loading:"loading",filter:"filter"},outputs:{newFolderEvent:"newFolderEvent",moveEvent:"moveEvent"},features:[e.TTD],decls:5,vars:3,consts:[["class","d-flex justify-content-center",4,"ngIf","ngIfElse"],["dataList",""],[3,"reservedNames","createFolderEvent"],["modal",""],[1,"d-flex","justify-content-center"],["message","Recupero dei file in corso"],[1,"px-md-1","mb-2","d-flex","flex-wrap","flex-column","flex-md-row","align-items-md-center","container-fluid"],[1,"fv-small-caps"],[1,"breadcrumb","folders-breadcrumb","mb-0","ms-md-auto"],[4,"ngIf","ngIfElse"],["breadcrumb",""],["lastBreadcrumbItem",""],["breadcrumbItem",""],[1,"folders","list-unstyled",3,"ngClass"],["class","d-flex align-items-center cursor-pointer navigate-upper-level",3,"ngClass","click","mouseenter","mouseleave",4,"ngIf"],["class","d-flex align-items-center min-w-0",3,"ngClass","mouseenter","mouseleave",4,"ngFor","ngForOf"],[1,"new-folder","d-flex","align-items-center","cursor-pointer",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 16 16",1,"d-block"],["d","m.5 3 .04.87a1.99 1.99 0 0 0-.342 1.311l.637 7A2 2 0 0 0 2.826 14H9v-1H2.826a1 1 0 0 1-.995-.91l-.637-7A1 1 0 0 1 2.19 4h11.62a1 1 0 0 1 .996 1.09L14.54 8h1.005l.256-2.819A2 2 0 0 0 13.81 3H9.828a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 6.172 1H2.5a2 2 0 0 0-2 2zm5.672-1a1 1 0 0 1 .707.293L7.586 3H2.19c-.24 0-.47.042-.683.12L1.5 2.98a1 1 0 0 1 1-.98h3.672z"],["d","M13.5 10a.5.5 0 0 1 .5.5V12h1.5a.5.5 0 1 1 0 1H14v1.5a.5.5 0 1 1-1 0V13h-1.5a.5.5 0 0 1 0-1H13v-1.5a.5.5 0 0 1 .5-.5z"],["class","new-folder-description fst-italic",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngFor","ngForOf"],[1,"breadcrumb-item","small","text-break","active",3,"innerText"],[1,"breadcrumb-item","small","text-break"],["role","button",1,"folder-breadcrumb-item",3,"innerText","click"],[1,"d-flex","align-items-center","cursor-pointer","navigate-upper-level",3,"ngClass","click","mouseenter","mouseleave"],["folderFilled",""],[1,"folder-name","fst-italic"],["d","m11.798 8.271-3.182 1.97c-.27.166-.616-.036-.616-.372V9.1s-2.571-.3-4 2.4c.571-4.8 3.143-4.8 4-4.8v-.769c0-.336.346-.538.616-.371l3.182 1.969c.27.166.27.576 0 .742z"],["d","m.5 3 .04.87a1.99 1.99 0 0 0-.342 1.311l.637 7A2 2 0 0 0 2.826 14h10.348a2 2 0 0 0 1.991-1.819l.637-7A2 2 0 0 0 13.81 3H9.828a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 6.172 1H2.5a2 2 0 0 0-2 2zm.694 2.09A1 1 0 0 1 2.19 4h11.62a1 1 0 0 1 .996 1.09l-.636 7a1 1 0 0 1-.996.91H2.826a1 1 0 0 1-.995-.91l-.637-7zM6.172 2a1 1 0 0 1 .707.293L7.586 3H2.19c-.24 0-.47.042-.683.12L1.5 2.98a1 1 0 0 1 1-.98h3.672z"],["d","M13.81 3H9.828a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 6.172 1H2.5a2 2 0 0 0-2 2l.04.87a1.99 1.99 0 0 0-.342 1.311l.637 7A2 2 0 0 0 2.826 14h10.348a2 2 0 0 0 1.991-1.819l.637-7A2 2 0 0 0 13.81 3zM2.19 3c-.24 0-.47.042-.683.12L1.5 2.98a1 1 0 0 1 1-.98h3.672a1 1 0 0 1 .707.293L7.586 3H2.19zm9.608 5.271-3.182 1.97c-.27.166-.616-.036-.616-.372V9.1s-2.571-.3-4 2.4c.571-4.8 3.143-4.8 4-4.8v-.769c0-.336.346-.538.616-.371l3.182 1.969c.27.166.27.576 0 .742z"],[1,"d-flex","align-items-center","min-w-0",3,"ngClass","mouseenter","mouseleave"],[1,"d-flex","align-items-center","min-w-0","navigate-item","flex-grow-1","h-100","pe-1",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 16 16",1,"d-block","flex-shrink-0"],["d","M.54 3.87.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.826a2 2 0 0 1-1.991-1.819l-.637-7a1.99 1.99 0 0 1 .342-1.31zM2.19 4a1 1 0 0 0-.996 1.09l.637 7a1 1 0 0 0 .995.91h10.348a1 1 0 0 0 .995-.91l.637-7A1 1 0 0 0 13.81 4H2.19zm4.69-1.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707z",4,"ngIf","ngIfElse"],[1,"folder-name","text-truncate",3,"innerText"],["ngbDropdown","","display","dynamic",1,"dropdown-no-caret","ms-auto",3,"placement"],["ngbDropdownToggle","",1,"material-icons-outlined","d-block","cursor-pointer","dropdown-toggle"],["ngbDropdownMenu","",1,"list-unstyled","mb-0","dropdown-menu","dropdown-material-icons"],["role","button",1,"dropdown-item","d-flex","align-items-center",3,"click"],[1,"material-icons-outlined","d-block"],[1,"dropdown-divider"],["d","M.54 3.87.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.826a2 2 0 0 1-1.991-1.819l-.637-7a1.99 1.99 0 0 1 .342-1.31zM2.19 4a1 1 0 0 0-.996 1.09l.637 7a1 1 0 0 0 .995.91h10.348a1 1 0 0 0 .995-.91l.637-7A1 1 0 0 0 13.81 4H2.19zm4.69-1.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707z"],["d","M9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.825a2 2 0 0 1-1.991-1.819l-.637-7a1.99 1.99 0 0 1 .342-1.31L.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3zm-8.322.12C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139z"],[1,"new-folder-description","fst-italic"]],template:function(t,n){if(1&t&&(e.YNc(0,ns,2,0,"div",0),e.YNc(1,As,19,10,"ng-template",null,1,e.W1O),e.TgZ(3,"app-upload-newfolder-modal",2,3),e.NdJ("createFolderEvent",function(s){return n.createFolder(s)}),e.qZA()),2&t){const i=e.MAs(2);e.Q6J("ngIf",n.loading)("ngIfElse",i),e.xp6(3),e.Q6J("reservedNames",n.folderNamesList)}},dependencies:[C.mk,C.sg,C.O5,C.tP,zn.R,ae.jt,ae.iD,ae.Vi,ts,pi,C.OU],styles:[".folders[_ngcontent-%COMP%]{margin-bottom:1.5rem}.folders.folder-grid-list[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}.folders.folder-grid-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{min-height:75px}.folders.folder-grid-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:32px;height:32px}.folders.folder-grid-list[_ngcontent-%COMP%]   .navigate-item[_ngcontent-%COMP%]{padding-left:1rem}.folders.folder-grid-list[_ngcontent-%COMP%]   .dropdown-no-caret[_ngcontent-%COMP%]{margin-right:.5rem}.folders.folder-grid-list[_ngcontent-%COMP%]   .folder-name[_ngcontent-%COMP%]{margin-left:.75rem}.folders.folder-grid-list[_ngcontent-%COMP%]   .new-folder[_ngcontent-%COMP%]{color:var(--bs-gray-600);border-top:1px dashed;border-bottom:1px dashed;border-radius:.25rem;justify-content:center}.folders.folder-simple-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{height:57px;padding-right:.5rem}.folders.folder-simple-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:not(:first-of-type){border-top:1px solid #dee2e6}.folders.folder-simple-list[_ngcontent-%COMP%] > li.is-entered[_ngcontent-%COMP%], .folders.folder-simple-list[_ngcontent-%COMP%] > li.is-entered[_ngcontent-%COMP%] + li[_ngcontent-%COMP%]{border-color:#c6cfff}.folders.folder-simple-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;color:#4864fe}.folders.folder-simple-list[_ngcontent-%COMP%]   .navigate-item[_ngcontent-%COMP%], .folders.folder-simple-list[_ngcontent-%COMP%]   .folder-name[_ngcontent-%COMP%], .folders.folder-simple-list[_ngcontent-%COMP%]   .navigate-upper-level[_ngcontent-%COMP%], .folders.folder-simple-list[_ngcontent-%COMP%]   .new-folder[_ngcontent-%COMP%], .folders.folder-simple-list[_ngcontent-%COMP%]   .new-folder-description[_ngcontent-%COMP%]{padding-left:1rem}.folders[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{transition:opacity .2s,background-color .2s}.folders[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .navigate-item[_ngcontent-%COMP%]{cursor:pointer}.folders[_ngcontent-%COMP%] > li.pending[_ngcontent-%COMP%]{opacity:.5}.folders[_ngcontent-%COMP%] > li.pending[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]{display:none!important}.folders[_ngcontent-%COMP%] > li.pending[_ngcontent-%COMP%]   .navigate-item[_ngcontent-%COMP%]{cursor:default!important;pointer-events:none}.folders[_ngcontent-%COMP%] > li.is-entered[_ngcontent-%COMP%]{background-color:#dae0ff;border-color:#c6cfff}.folders[_ngcontent-%COMP%]:not(.touch-device)   .dropdown-toggle[_ngcontent-%COMP%]{opacity:.7;transition:opacity .2s}.folders[_ngcontent-%COMP%]:not(.touch-device)   .dropdown-toggle[_ngcontent-%COMP%]:hover{opacity:1}.folders[_ngcontent-%COMP%]:not(.touch-device).folder-simple-list > li[_ngcontent-%COMP%]:not(.is-entered):hover{background-color:rgb(var(--bs-light-rgb))}.folders-breadcrumb[_ngcontent-%COMP%]{--bs-breadcrumb-divider: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='%236c757d'/%3E%3C/svg%3E\")}app-loader[_ngcontent-%COMP%]{margin-top:1rem}@media (min-width: 768px){.folders[_ngcontent-%COMP%]{margin-bottom:2rem}.folders.folder-grid-list[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(250px,1fr))}.folders.folder-grid-list[_ngcontent-%COMP%]   .new-folder[_ngcontent-%COMP%]{border:1px dashed}.folders.folder-simple-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{padding-right:1rem}.folders.folder-simple-list[_ngcontent-%COMP%]   .navigate-item[_ngcontent-%COMP%], .folders.folder-simple-list[_ngcontent-%COMP%]   .folder-name[_ngcontent-%COMP%], .folders.folder-simple-list[_ngcontent-%COMP%]   .navigate-upper-level[_ngcontent-%COMP%], .folders.folder-simple-list[_ngcontent-%COMP%]   .new-folder[_ngcontent-%COMP%], .folders.folder-simple-list[_ngcontent-%COMP%]   .new-folder-description[_ngcontent-%COMP%]{padding-left:1.5rem}app-loader[_ngcontent-%COMP%]{margin-top:0}}@media (min-width: 960px){.folders.folder-grid-list[_ngcontent-%COMP%]{gap:1.5rem}}"]}),o})();const Es=["modal"];function Ps(o,r){if(1&o&&(e.TgZ(0,"tr"),e._UZ(1,"td",8),e.ALo(2,"arrayJoin"),e._UZ(3,"td",9),e.ALo(4,"formatBytes"),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.Q6J("innerText","."+e.xi3(2,2,t.ext,", .")),e.xp6(2),e.Q6J("innerText",e.lcZ(4,5,t.maxSize))}}let Is=(()=>{class o{constructor(){this.appName=Ve.lW,this.supportedFiles=Rn}ngOnInit(){}open(){this.modalComponent.open()}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upload-info-modal"]],viewQuery:function(t,n){if(1&t&&e.Gf(Es,5),2&t){let i;e.iGM(i=e.CRH())&&(n.modalComponent=i.first)}},decls:185,vars:2,consts:[["title","Servizio Upload"],["modal",""],[1,"fst-italic"],[1,"mb-1"],[1,"mb-3"],[1,"table","table-striped","text-center","border"],[4,"ngFor","ngForOf"],[1,"mb-0"],[1,"fst-italic",3,"innerText"],[3,"innerText"]],template:function(t,n){1&t&&(e.TgZ(0,"app-modal",0,1)(2,"p"),e._uU(3," Il servizio "),e.TgZ(4,"strong"),e._uU(5,"Upload"),e.qZA(),e._uU(6),e.TgZ(7,"strong"),e._uU(8,"spazio gestito e amministrato"),e.qZA(),e._uU(9," dagli utenti per caricare immagini e file da condividere e utilizzare sui circuiti ForumFree, ForumCommunity e BlogFree. Grazie all'elevato livello di sicurezza e alle numerose funzioni disponibili, il servizio si presenta come alternativa "),e.TgZ(10,"strong"),e._uU(11,"valida e affidabile"),e.qZA(),e._uU(12," agli altri "),e.TgZ(13,"em"),e._uU(14,"hosting"),e.qZA(),e._uU(15," disponibili. "),e.qZA(),e.TgZ(16,"h6",2),e._uU(17,"Metodi di caricamento"),e.qZA(),e.TgZ(18,"p",3),e._uU(19," Sono possibili i seguenti metodi di upload: "),e.qZA(),e.TgZ(20,"ul")(21,"li")(22,"em"),e._uU(23,"caricare file da memoria"),e.qZA(),e._uU(24,": cliccando sull'apposita area, \xe8 possibile "),e.TgZ(25,"strong"),e._uU(26,"selezionare"),e.qZA(),e._uU(27," uno o pi\xf9 file da caricare direttamente dalla memoria del dispositivo in uso. Nel caso di dispositivi mobile, \xe8 necessario che sia presente l'autorizzazione del browser ad accedere ai file presenti in locale; "),e.qZA(),e.TgZ(28,"li")(29,"em"),e._uU(30,"drag & drop"),e.qZA(),e._uU(31,": \xe8 possibile "),e.TgZ(32,"strong"),e._uU(33,"trascinare"),e.qZA(),e._uU(34," nell'apposita area i file che si desiderano caricare. Una volta rilasciati i file, l'upload inizier\xe0 immediatamente senza ulteriori conferme; "),e.qZA(),e.TgZ(35,"li")(36,"em"),e._uU(37,"clipboard"),e.qZA(),e._uU(38,": \xe8 consentito "),e.TgZ(39,"strong"),e._uU(40,"copincollare"),e.qZA(),e._uU(41," un file che si vuole aggiungere al proprio spazio. Per fare ci\xf2, occorre dapprima copiare (ad esempio premendo "),e.TgZ(42,"em"),e._uU(43,"ctrl + c"),e.qZA(),e._uU(44,") il file e in seguito, rimanendo sulla pagina di upload, incollarlo (ad esempio premendo "),e.TgZ(45,"em"),e._uU(46,"ctrl + v"),e.qZA(),e._uU(47,"). Se ci\xf2 che \xe8 stato copiato e incollato soddisfa i requisiti richiesti, l'upload inizier\xe0 senza ulteriori conferme. Questa tecnica pu\xf2 essere utilizzata come valida alternativa per caricare file da indirizzo remoto: \xe8 infatti sufficiente aprire il file da caricare in una finestra del browser, copiarlo e infine incollarlo nella pagina di upload. "),e.qZA()(),e.TgZ(48,"h6",2),e._uU(49,"File accettati"),e.qZA(),e.TgZ(50,"p",4),e._uU(51," Vengono accettati differenti tipi di file, ciascuno con un limite massimo di dimensione: "),e.qZA(),e.TgZ(52,"table",5)(53,"thead")(54,"tr")(55,"th"),e._uU(56,"Estensione"),e.qZA(),e.TgZ(57,"th"),e._uU(58,"Dimensione"),e.qZA()()(),e.TgZ(59,"tbody"),e.YNc(60,Ps,5,7,"tr",6),e.qZA()(),e.TgZ(61,"h6",2),e._uU(62,"Azioni disponibili"),e.qZA(),e.TgZ(63,"p",3),e._uU(64," Il servizio Upload consente di eseguire diverse azioni su singoli file o cartelle. Per aprire il men\xf9 con le opzioni disponibili, \xe8 sufficiente cliccare sui tre pallini verticali presenti vicino ad ogni file e cartella. In particolare, i pulsanti a disposizione sono: "),e.qZA(),e.TgZ(65,"ul")(66,"li")(67,"em"),e._uU(68,"sposta"),e.qZA(),e._uU(69,": questa azione, disponibile sia per file che per cartelle, consente, tramite l'apposito modal, di "),e.TgZ(70,"strong"),e._uU(71,"muovere"),e.qZA(),e._uU(72," l'elemento selezionato verso un'altra destinazione; "),e.qZA(),e.TgZ(73,"li")(74,"em"),e._uU(75,"rinomina"),e.qZA(),e._uU(76,": questa azione, disponibile sia per file che per cartelle, consente, tramite l'apposito modal, di assegnare un "),e.TgZ(77,"strong"),e._uU(78,"nuovo nome"),e.qZA(),e._uU(79," all'elemento selezionato; "),e.qZA(),e.TgZ(80,"li")(81,"em"),e._uU(82,"elimina"),e.qZA(),e._uU(83,": questa azione, disponibile sia per file che per cartelle, consente, tramite l'apposito modal, di "),e.TgZ(84,"strong"),e._uU(85,"rimuovere"),e.qZA(),e._uU(86," completamente e senza possibilit\xe0 di ripristino l'elemento selezionato. Nel caso in cui si agisca su una cartella, la rimozione viene estesa anche a tutto il suo contenuto, comprese eventuali sottocartelle; "),e.qZA(),e.TgZ(87,"li")(88,"em"),e._uU(89,"nuova cartella"),e.qZA(),e._uU(90,": premendo questo pulsante, presente solo tra le opzioni di una cartella, \xe8 possibile aggiungere una "),e.TgZ(91,"strong"),e._uU(92,"nuova cartella"),e.qZA(),e._uU(93,"; "),e.qZA(),e.TgZ(94,"li")(95,"em"),e._uU(96,"codici"),e.qZA(),e._uU(97,": questo pulsante, presente solo per i file, consente di aprire un modal contenente i vari "),e.TgZ(98,"strong"),e._uU(99,"codici"),e.qZA(),e._uU(100," del file stesso, tra cui i link per condividerlo ed eventualmente per incorporarlo come immagine; "),e.qZA(),e.TgZ(101,"li")(102,"em"),e._uU(103,"scarica"),e.qZA(),e._uU(104,": questo pulsante, presente solo per i file, permette di "),e.TgZ(105,"strong"),e._uU(106,"scaricare"),e.qZA(),e._uU(107," il file selezionato; "),e.qZA(),e.TgZ(108,"li")(109,"em"),e._uU(110,"modifica"),e.qZA(),e._uU(111,": questa azione, abilitata solo per i file supportati, permette di "),e.TgZ(112,"strong"),e._uU(113,"modificare"),e.qZA(),e._uU(114," (ritagliare, ingrandire, rimpicciolire, ruotare) il file selezionato; "),e.qZA(),e.TgZ(115,"li")(116,"em"),e._uU(117,"seleziona"),e.qZA(),e._uU(118,": questo pulsante consente di "),e.TgZ(119,"strong"),e._uU(120,"selezionare"),e.qZA(),e._uU(121," il file per eseguire in seguito un'azione massiva. "),e.qZA()(),e.TgZ(122,"h6",2),e._uU(123,"Azioni massive"),e.qZA(),e.TgZ(124,"p",3),e._uU(125," Tramite il pulsante verde con il simbolo del checkbox, \xe8 possibile aprire l'elenco delle azioni massive disponibili. Un'azione massiva \xe8 un'operazione che coinvolge contemporaneamente e allo stesso modo due o pi\xf9 file. Sono effettuabili le seguenti azioni massive: "),e.qZA(),e.TgZ(126,"ul")(127,"li")(128,"em"),e._uU(129,"seleziona tutti"),e.qZA(),e._uU(130,": questo pulsante, visibile solo se non \xe8 ancora stato selezionato alcun file, consente di "),e.TgZ(131,"strong"),e._uU(132,"selezionare tutti"),e.qZA(),e._uU(133," i file presente nella cartella corrente; "),e.qZA(),e.TgZ(134,"li")(135,"em"),e._uU(136,"deseleziona tutti"),e.qZA(),e._uU(137,": questo pulsante, visibile solo se \xe8 stato selezionato almeno un file, consente di "),e.TgZ(138,"strong"),e._uU(139,"rimuovere la selezione"),e.qZA(),e._uU(140," da tutti i file in precedenza selezionati; "),e.qZA(),e.TgZ(141,"li")(142,"em"),e._uU(143,"sposta selezionati"),e.qZA(),e._uU(144,": questa azione, visibile solo se \xe8 stato selezionato almeno un file, consente di "),e.TgZ(145,"strong"),e._uU(146,"spostare"),e.qZA(),e._uU(147," verso un'unica destinazione tutti i file selezionati; "),e.qZA(),e.TgZ(148,"li")(149,"em"),e._uU(150,"elimina selezionati"),e.qZA(),e._uU(151,": questa azione, visibile solo se \xe8 stato selezionato almeno un file, consente di "),e.TgZ(152,"strong"),e._uU(153,"eliminare"),e.qZA(),e._uU(154," in modo definitivo tutti i file selezionati. "),e.qZA()(),e.TgZ(155,"h6",2),e._uU(156,"Ricerca e opzioni di layout"),e.qZA(),e.TgZ(157,"p",3),e._uU(158," Nell'apposito input "),e.TgZ(159,"em"),e._uU(160,"Cerca"),e.qZA(),e._uU(161," \xe8 possibile inserire una parola che verr\xe0 usata per filtrare la lista dei file sulla base del nome e dell'estensione degli stessi. I due pulsanti blu permettono inoltre di personalizzare l'ordinamento degli elementi presenti nella cartella corrente: "),e.qZA(),e.TgZ(162,"ul",7)(163,"li"),e._uU(164," il pulsante "),e.TgZ(165,"em"),e._uU(166,"a-z"),e.qZA(),e._uU(167," e "),e.TgZ(168,"em"),e._uU(169,"z-a"),e.qZA(),e._uU(170," consente di ordinare gli elementi seguendo un criterio rispettivamente crescente o decrescente; "),e.qZA(),e.TgZ(171,"li"),e._uU(172," il secondo pulsante apre un men\xf9 in cui \xe8 possibile scegliere un criterio di ordinamento tra "),e.TgZ(173,"em"),e._uU(174,"nome"),e.qZA(),e._uU(175,", "),e.TgZ(176,"em"),e._uU(177,"data di ultima modifica"),e.qZA(),e._uU(178,", "),e.TgZ(179,"em"),e._uU(180,"dimensione"),e.qZA(),e._uU(181,", cio\xe8 peso in byte del file, ed "),e.TgZ(182,"em"),e._uU(183,"estensione"),e.qZA(),e._uU(184,". "),e.qZA()()()),2&t&&(e.xp6(6),e.hij(" di ",n.appName," si pone come obiettivo fornire uno "),e.xp6(54),e.Q6J("ngForOf",n.supportedFiles))},dependencies:[C.sg,ut.z,ci,Tn]}),o})();const Ds=["modal"];function Fs(o,r){1&o&&(e.TgZ(0,"p"),e._uU(1," \xc8 possibile spostare pi\xf9 file contemporaneamente in una stessa destinazione. Occorre sottolineare che, a seguito dello spostamento, tutti i "),e.TgZ(2,"strong"),e._uU(3,"link dei file saranno modificati"),e.qZA(),e._uU(4," e, pertanto, i vacchi indirizzi non risulteranno pi\xf9 funzionanti. L'operazione potrebbe richiedere diverso tempo. "),e.qZA())}function Us(o,r){1&o&&(e.TgZ(0,"p"),e._uU(1," \xc8 possibile spostare un file nella cartella base ("),e.TgZ(2,"em"),e._uU(3,"root"),e.qZA(),e._uU(4,"), in quella di livello superiore, se esistente, oppure in una sottocartella presente nella cartella corrente. Spostanto un file, verr\xe0 "),e.TgZ(5,"strong"),e._uU(6,"modificato anche il suo link"),e.qZA(),e._uU(7,", pertanto eventuali link gi\xe0 condivisi andranno aggiornati. "),e.qZA())}function ks(o,r){1&o&&(e.TgZ(0,"p"),e._uU(1," \xc8 possibile spostare un'intera cartella e "),e.TgZ(2,"strong"),e._uU(3,"tutto il suo contenuto"),e.qZA(),e._uU(4," nella cartella base ("),e.TgZ(5,"em"),e._uU(6,"root"),e.qZA(),e._uU(7,"), in quella di livello superiore, se esistente, oppure in una sottocartella presente nella cartella corrente. Occorre evidenziare che, spostando una cartella, i "),e.TgZ(8,"strong"),e._uU(9,"link di tutti gli elementi"),e.qZA(),e._uU(10," in essa contenuti saranno "),e.TgZ(11,"strong"),e._uU(12,"modificati"),e.qZA(),e._uU(13," e, pertanto, se gi\xe0 condivisi andranno aggiornati. "),e.qZA())}function Zs(o,r){if(1&o&&(e.YNc(0,Us,8,0,"p",5),e.YNc(1,ks,14,0,"ng-template",null,9,e.W1O)),2&o){const t=e.MAs(2),n=e.oxw(2);e.Q6J("ngIf",n.entities[0].type===n.entityTypes.FILE)("ngIfElse",t)}}function Rs(o,r){1&o&&(e.ynx(0),e.TgZ(1,"div",10)(2,"strong"),e._uU(3,"Nessuna cartella disponibile!"),e.qZA(),e._UZ(4,"br"),e._uU(5," Non \xe8 presente alcuna cartella di destinazione, \xe8 possibile crearne una tramite gli appositi pulsanti. "),e.qZA(),e.BQk())}function Ls(o,r){1&o&&(e.TgZ(0,"option",17),e._uU(1,"Cartella base (root)"),e.qZA()),2&o&&e.Q6J("ngValue",0)}function Ns(o,r){if(1&o&&(e.TgZ(0,"option",17),e._uU(1),e.qZA()),2&o){const t=e.oxw(3);e.Q6J("ngValue",1),e.xp6(1),e.hij("Cartella superiore (",t.currentFolderPath.length>1?t.currentFolderPath[t.currentFolderPath.length-2]:"root",")")}}function zs(o,r){if(1&o&&e._UZ(0,"option",19),2&o){const t=e.oxw(),i=t.index;e.Q6J("innerText",t.$implicit)("ngValue",i+2)}}function Hs(o,r){if(1&o&&(e.ynx(0),e.YNc(1,zs,1,2,"option",18),e.BQk()),2&o){const t=r.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("ngIf",n.entities[0].type!==n.entityTypes.FOLDER||n.entities[0].name!==t)}}function qs(o,r){1&o&&e.GkF(0)}const Js=function(o){return{$implicit:o}};function Qs(o,r){if(1&o&&(e.TgZ(0,"div",7),e.YNc(1,qs,1,0,"ng-container",20),e.qZA()),2&o){const t=e.oxw(3),n=e.MAs(5);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(2,Js,t.newLink?t.newLink:t.entities[0].url))}}function Bs(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"label",11),e._uU(2,"Cartella di destinazione:"),e.qZA(),e.TgZ(3,"select",12),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.folderDestSelectValue=i)})("ngModelChange",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.selectChange())}),e._UZ(4,"option",13),e.YNc(5,Ls,2,1,"option",14),e.YNc(6,Ns,2,2,"option",14),e.YNc(7,Hs,2,1,"ng-container",15),e.qZA()(),e.YNc(8,Qs,2,4,"div",16)}if(2&o){const t=e.oxw(2);e.xp6(3),e.Q6J("ngModel",t.folderDestSelectValue),e.xp6(1),e.Q6J("ngValue",-1),e.xp6(1),e.Q6J("ngIf",t.currentFolderPath.length>1),e.xp6(1),e.Q6J("ngIf",t.currentFolderPath.length>0),e.xp6(1),e.Q6J("ngForOf",t.folderNameList),e.xp6(1),e.Q6J("ngIf",1===t.entities.length)}}function Ys(o,r){if(1&o&&(e.ynx(0),e.YNc(1,Fs,5,0,"p",5),e.YNc(2,Zs,3,2,"ng-template",null,6,e.W1O),e.TgZ(4,"div",7),e.YNc(5,Rs,6,0,"ng-container",5),e.YNc(6,Bs,9,6,"ng-template",null,8,e.W1O),e.qZA(),e.BQk()),2&o){const t=e.MAs(3),n=e.MAs(7),i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.entities.length>1)("ngIfElse",t),e.xp6(4),e.Q6J("ngIf",0===i.currentFolderPath.length&&(0===i.folderNameList.length||i.entities[0].type===i.entityTypes.FOLDER&&1===i.folderNameList.length&&i.folderNameList[0]===i.entities[0].name))("ngIfElse",n)}}function Ws(o,r){if(1&o){const t=e.EpF();e.ynx(0,21),e.TgZ(1,"button",22),e.NdJ("click",function(){e.CHM(t),e.oxw();const i=e.MAs(1);return e.KtG(i.close("Close click"))}),e._uU(2,"Annulla"),e.qZA(),e.TgZ(3,"button",23),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.move())}),e._uU(4,"Sposta"),e.qZA(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("disabled",!t.isValid)}}const Gs=function(o){return{placement:"top",hideOnClick:o}};function Vs(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"label",24),e._uU(1,"Anteprima nuovo link:"),e.qZA(),e.TgZ(2,"div",25),e._UZ(3,"input",26),e.TgZ(4,"div",27,28),e.NdJ("click",function(){e.CHM(t);const i=e.MAs(5),s=e.oxw();return e.KtG(!s.touchDevice&&i.changeContent("Copiato!","Copia"))}),e.TgZ(6,"span",29),e._uU(7,"content_copy"),e.qZA()()()}if(2&o){const t=r.$implicit,n=e.oxw();e.xp6(3),e.Q6J("value",t),e.xp6(1),e.Q6J("cdkCopyToClipboard",t)("appTippy",n.touchDevice?"Copiato!":"Copia")("tippyProps",e.VKq(4,Gs,n.touchDevice))}}let Ks=(()=>{class o{constructor(){this.currentFolderPath=[],this.entities=[],this.folderNameList=[],this.moveEvent=new e.vpe,this.opened=!1,this.folderDestSelectValue=-1,this.newLink="",this.isValid=!1,this.touchDevice=Ve.eX,this.entityTypes=H,this.modalTitle="",this.newFolderPath=[]}ngOnInit(){}ngOnChanges(t){t.entities&&!t.entities.firstChange&&(this.modalTitle=this.entities.length>1?`Sposta ${this.entities.length} file`:1===this.entities.length?`Sposta <em>${this.entities[0]?.name||""}</em>`:"Sposta 0 file")}open(){return this.opened=!0,this.reset(),this.modalComponent.open()}onHidden(){this.opened=!1}reset(){this.folderDestSelectValue=-1,this.newLink="",this.newFolderPath=[],this.isValid=!1}selectChange(){if(this.isValid=!1,this.folderDestSelectValue<0||!this.entities[0])return void(this.newLink="");const t=this.currentFolderPath.length?`${this.currentFolderPath.map(s=>encodeURIComponent(s)).join("/")}/`:"",n=encodeURIComponent(this.entities[0].name);let i=this.entities[0].url.replace(t+n,"");if(0===this.folderDestSelectValue){if(0===this.currentFolderPath.length)return;this.isValid=!0,this.newFolderPath=[],this.newLink=`${i}`}else if(1===this.folderDestSelectValue){if(0===this.currentFolderPath.length)return;this.isValid=!0,this.newFolderPath=this.currentFolderPath.slice(0,-1),this.newLink=`${i}${this.newFolderPath.map(s=>encodeURIComponent(s)).join("/")}${this.newFolderPath.length?"/":""}`}else{if(!this.folderNameList||!this.folderNameList[this.folderDestSelectValue-2])return;this.isValid=!0,this.newFolderPath=[...this.currentFolderPath,this.folderNameList[this.folderDestSelectValue-2]],this.newLink=`${i}${this.newFolderPath.map(s=>encodeURIComponent(s)).join("/")}/`}1===this.entities.length&&(this.newLink+=n)}move(){var t=this;return(0,L.Z)(function*(){if(!t.isValid||!t.entities[0])return;const n=[...t.newFolderPath];t.modalComponent.close(),t.moveEvent.emit({entities:t.entities,destPath:n})})()}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upload-move-modal"]],viewQuery:function(t,n){if(1&t&&e.Gf(Ds,5),2&t){let i;e.iGM(i=e.CRH())&&(n.modalComponent=i.first)}},inputs:{currentFolderPath:"currentFolderPath",entities:"entities",folderNameList:"folderNameList"},outputs:{moveEvent:"moveEvent"},features:[e.TTD],decls:6,vars:4,consts:[[3,"title","disableCloseButton","hidden"],["modal",""],[4,"ngIf"],["footer","",4,"ngIf"],["newLinkInput",""],[4,"ngIf","ngIfElse"],["singleEntity",""],[1,"mt-2"],["folderSelect",""],["folderDesc",""],[1,"alert","alert-primary","text-center","mb-0"],["for","folder-select",1,"fs-sm"],["id","folder-select",1,"form-select",3,"ngModel","ngModelChange"],["selected","",3,"ngValue"],[3,"ngValue",4,"ngIf"],[4,"ngFor","ngForOf"],["class","mt-2",4,"ngIf"],[3,"ngValue"],[3,"innerText","ngValue",4,"ngIf"],[3,"innerText","ngValue"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["footer",""],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["for","new-link",1,"fs-sm"],[1,"input-group"],["type","text","id","new-link","disabled","",1,"form-control",3,"value"],[1,"input-group-text","cursor-pointer",3,"cdkCopyToClipboard","appTippy","tippyProps","click"],["tippyRef","appTippy"],[1,"material-icons","d-block","text-muted"]],template:function(t,n){1&t&&(e.TgZ(0,"app-modal",0,1),e.NdJ("hidden",function(){return n.onHidden()}),e.YNc(2,Ys,8,4,"ng-container",2),e.YNc(3,Ws,5,1,"ng-container",3),e.qZA(),e.YNc(4,Vs,8,6,"ng-template",null,4,e.W1O)),2&t&&(e.Q6J("title",n.modalTitle)("disableCloseButton",!0),e.xp6(2),e.Q6J("ngIf",n.opened&&n.entities[0]),e.xp6(1),e.Q6J("ngIf",n.opened&&n.entities.length))},dependencies:[xe.i3,C.sg,C.O5,C.tP,R.YN,R.Kr,R.EJ,R.JJ,R.On,ut.z,Jt.$],encapsulation:2}),o})();const $s=function(o){return{"mb-2":o}};function js(o,r){1&o&&e._UZ(0,"li",6),2&o&&e.Q6J("ngClass",e.VKq(1,$s,!r.last))}const Xs=function(){return[]};function ea(o,r){1&o&&(e.ynx(0),e.TgZ(1,"ul",4),e.YNc(2,js,1,3,"li",5),e.qZA(),e.BQk()),2&o&&(e.xp6(2),e.Q6J("ngForOf",e.DdM(1,Xs).constructor(3)))}function ta(o,r){1&o&&(e.ynx(0),e.TgZ(1,"div",9),e._uU(2,"Non ci sono file recenti!"),e.qZA(),e.BQk())}const na=function(o){return{rotating:o}},ia=function(o){return{width:o}};function oa(o,r){if(1&o&&(e.TgZ(0,"li",16),e._UZ(1,"div",17),e.TgZ(2,"div",18)(3,"div",19),e._UZ(4,"div",20)(5,"div",21),e.TgZ(6,"div",22),e._uU(7),e.qZA()(),e.TgZ(8,"div",23),e._UZ(9,"div",24),e.qZA()()()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngClass",e.VKq(6,na,t.progress>0&&t.progress<100))("innerText",t.progress>0?t.progress<100?"sync":"check_circle":"schedule"),e.xp6(3),e.Q6J("innerText",t.file.filename),e.xp6(1),e.Q6J("innerText","."+t.file.ext),e.xp6(2),e.hij("",t.progress,"%"),e.xp6(2),e.Q6J("ngStyle",e.VKq(8,ia,t.progress+"%"))}}function ra(o,r){if(1&o&&(e.ynx(0),e.YNc(1,oa,10,10,"li",15),e.BQk()),2&o){const t=r.$implicit;e.xp6(1),e.Q6J("ngIf",!t.error)}}function sa(o,r){if(1&o&&(e.TgZ(0,"li",25)(1,"div",26),e._uU(2,"cancel"),e.qZA(),e.TgZ(3,"div",18)(4,"div",27),e._UZ(5,"div",20)(6,"div",21),e.qZA(),e.TgZ(7,"div",28),e._uU(8,"Errore durante il caricamento"),e.qZA()()()),2&o){const t=r.$implicit;e.xp6(5),e.Q6J("innerText",t.file.filename),e.xp6(1),e.Q6J("innerText","."+t.file.ext)}}const aa=function(o,r){return{pending:o,selected:r}},la=function(){return[0,5]},ca=function(o){return{offset:o,appendTo:"parent"}};function da(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"li",29),e.ALo(1,"arrayIncludes"),e.ALo(2,"arrayIncludes"),e.TgZ(3,"button",30),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw(3);return e.KtG(a.unselectFile(s.name))}),e.O4$(),e.TgZ(4,"svg",31),e._UZ(5,"path",32)(6,"path",33),e.qZA()(),e.kcU(),e.TgZ(7,"a",34),e._uU(8,"wallpaper"),e.qZA(),e.TgZ(9,"div",35)(10,"a",36),e._UZ(11,"div",20)(12,"div",37),e.qZA(),e.TgZ(13,"div",38)(14,"div",39),e._uU(15),e.ALo(16,"formatBytes"),e.qZA(),e.TgZ(17,"div",40),e.ALo(18,"date"),e._UZ(19,"span",41),e.qZA()()(),e.TgZ(20,"div",42,43),e.NdJ("openChange",function(i){e.CHM(t);const s=e.MAs(21);e.oxw();const a=e.MAs(1),d=e.oxw(2);return e.KtG(d.saveDropdown(s,a,i))}),e.TgZ(22,"div",44),e._uU(23,"more_vert"),e.qZA(),e.TgZ(24,"div",45),e._UZ(25,"app-upload-file-menu",46),e.ALo(26,"arrayIncludes"),e.qZA()()()}if(2&o){const t=r.$implicit,n=e.MAs(21),i=e.oxw(3);e.Q6J("ngClass",e.WLB(26,aa,e.xi3(1,12,i.pendingFiles,t.name),e.xi3(2,15,i.selectedFiles,t.name))),e.xp6(7),e.Q6J("href",t.url,e.LSH),e.xp6(3),e.Q6J("href",t.url,e.LSH),e.xp6(1),e.Q6J("innerText",t.filename),e.xp6(1),e.Q6J("innerText","."+t.ext),e.xp6(3),e.Oqu(e.lcZ(16,18,t.size)),e.xp6(2),e.Q6J("appTippy",e.xi3(18,20,t.time,"dd-MM-YY HH:mm")||"")("tippyProps",e.VKq(30,ca,e.DdM(29,la))),e.xp6(2),e.Q6J("date",t.time),e.xp6(6),e.Q6J("file",t)("isSelected",e.xi3(26,23,i.selectedFiles,t.name))("dropdownRef",n)}}function pa(o,r){if(1&o&&(e.TgZ(0,"ul",10,11),e.YNc(2,ra,2,1,"ng-container",12),e.YNc(3,sa,9,2,"li",13),e.YNc(4,da,27,32,"li",14),e.ALo(5,"slice"),e.qZA()),2&o){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.uploadingFileList),e.xp6(1),e.Q6J("ngForOf",t.uploadedFileWithErrors),e.xp6(1),e.Q6J("ngForOf",e.Dn7(5,3,t.fileList,0,5))}}function ha(o,r){if(1&o&&(e.TgZ(0,"div",7),e.YNc(1,ta,3,0,"ng-container",2),e.YNc(2,pa,6,7,"ng-template",null,8,e.W1O),e.qZA()),2&o){const t=e.MAs(3),n=e.oxw();e.xp6(1),e.Q6J("ngIf",0===n.fileList.length&&0===n.uploadingFileList.length&&0===n.uploadedFileWithErrors.length)("ngIfElse",t)}}const ua=function(o){return{"touch-device":o}};let ga=(()=>{class o{constructor(t,n){this.uploadService=t,this.renderer=n,this.fileList=[],this.loading=!0,this.touchDevice=Ve.eX,this.uploadingFileList=[],this.uploadedFileWithErrors=[],this.pendingFiles=[],this.selectedFiles=[],this.openedDropdown=[],this.checkOpenedDropdownEvent=!1}ngOnInit(){this.uploadingListSubscription=this.uploadService.uploadingFileQueueObservable.subscribe(t=>{this.uploadingFileList=[...t].reverse()}),this.uploadingErrorSubscription=this.uploadService.uploadingFileErrorObservable.subscribe(t=>{this.uploadedFileWithErrors.unshift(t)}),this.entityPendingSubscription=this.uploadService.entityPendingObservable.subscribe(t=>{t.forEach(n=>{n.type===H.FILE&&(this.pendingFiles=[...this.updatePendingFileList(this.pendingFiles,n.name,n.start)])})}),this.selectedFileListSubscription=this.uploadService.selectedFileListObservable.subscribe(t=>{this.selectedFiles=t.map(n=>n.name)})}updatePendingFileList(t,n,i){if(i)t.includes(n)||t.push(n);else{const s=t.indexOf(n);s>-1&&t.splice(s,1)}return t}saveDropdown(t,n,i){if(!i||(this.openedDropdown.push(t),this.checkOpenedDropdownEvent))return;this.checkOpenedDropdownEvent=!0;const s=this.renderer.listen(n,"scroll",()=>{this.openedDropdown.forEach(a=>{a.isOpen()&&a.close()}),this.openedDropdown=[],this.checkOpenedDropdownEvent=!1,s()})}unselectFile(t){this.uploadService.pushSelectedFile({name:t,selected:!1})}ngOnDestroy(){this.uploadingListSubscription?.unsubscribe(),this.uploadingErrorSubscription?.unsubscribe(),this.entityPendingSubscription?.unsubscribe(),this.selectedFileListSubscription?.unsubscribe()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(We),e.Y36(e.Qsj))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upload-recent-files"]],inputs:{fileList:"fileList",loading:"loading"},decls:6,vars:5,consts:[[1,"flat-container","py-2","px-3","h-100","d-flex","flex-column",3,"ngClass"],[1,"fv-small-caps","fs-lg","mb-2"],[4,"ngIf","ngIfElse"],["listContainer",""],[1,"list-unstyled","mb-1","placeholder-glow"],["class","placeholder col-12 rounded",3,"ngClass",4,"ngFor","ngForOf"],[1,"placeholder","col-12","rounded",3,"ngClass"],["app-hidden-scroller","","height","100%",1,"file-list-container","mb-1"],["listContent",""],[1,"alert","alert-primary","mb-0","text-center"],[1,"list-unstyled","mb-0","file-list"],["list",""],[4,"ngFor","ngForOf"],["class","file-container rounded bg-danger text-white",4,"ngFor","ngForOf"],["class","file-container rounded position-relative",3,"ngClass",4,"ngFor","ngForOf"],["class","file-container rounded uploading",4,"ngIf"],[1,"file-container","rounded","uploading"],[1,"d-block","material-icons-outlined","text-primary",3,"ngClass","innerText"],[1,"ms-3","flex-grow-1","min-w-0"],[1,"d-flex","align-items-end"],[1,"text-truncate",3,"innerText"],[1,"me-3",3,"innerText"],[1,"ms-auto","fs-sm"],[1,"progress","bg-white","mt-1"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar",3,"ngStyle"],[1,"file-container","rounded","bg-danger","text-white"],[1,"d-block","material-icons-outlined"],[1,"d-flex"],[1,"fs-xs"],[1,"file-container","rounded","position-relative",3,"ngClass"],[1,"btn","btn-primary","shadow-none","pre-button","d-flex","justify-content-center","align-items-center","p-0","position-absolute",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 16 16"],["d","M2.5 8a5.5 5.5 0 0 1 8.25-4.764.5.5 0 0 0 .5-.866A6.5 6.5 0 1 0 14.5 8a.5.5 0 0 0-1 0 5.5 5.5 0 1 1-11 0z"],["d","M15.354 3.354a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l7-7z"],["target","_blank","rel","noreferrer",1,"material-icons-outlined","d-block","text-primary",3,"href"],[1,"mx-3","flex-grow-1","min-w-0"],["target","_blank","rel","noreferrer",1,"text-reset","d-inline-flex","mw-100",3,"href"],[3,"innerText"],[1,"text-muted","fs-xs","d-flex","flex-wrap","align-items-center","position-relative"],[1,"file-size","me-1"],[1,"file-time",3,"appTippy","tippyProps"],["timeago","",3,"date"],["ngbDropdown","","placement","left-top","display","dynamic","container","body",1,"dropdown-no-caret","ms-auto",3,"openChange"],["dropdownRef","ngbDropdown"],["ngbDropdownToggle","",1,"material-icons-outlined","d-block","text-primary","cursor-pointer","dropdown-icon"],["ngbDropdownMenu","",1,"dropdown-menu"],[3,"file","isSelected","dropdownRef"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"File recenti"),e.qZA(),e.YNc(3,ea,3,2,"ng-container",2),e.YNc(4,ha,4,2,"ng-template",null,3,e.W1O),e.qZA()),2&t){const i=e.MAs(5);e.Q6J("ngClass",e.VKq(3,ua,n.touchDevice)),e.xp6(3),e.Q6J("ngIf",n.loading)("ngIfElse",i)}},dependencies:[C.mk,C.sg,C.O5,C.PC,li,ae.jt,ae.iD,ae.Vi,Bn,Jt.$,oi,pi,C.OU,C.uU,Tn],styles:['.placeholder[_ngcontent-%COMP%]{height:59px;background-color:var(--bs-gray-500)}.file-list-container[_ngcontent-%COMP%]{overflow:hidden;height:calc(177px + 1rem)}.file-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.5rem 1rem;transition:opacity .2s,margin-left .2s;height:59px}.file-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .pre-button[_ngcontent-%COMP%]{width:40px;left:-10px;transform:translate(-100%);height:70%}.file-list[_ngcontent-%COMP%] > li.selected[_ngcontent-%COMP%]{margin-left:50px}.file-list[_ngcontent-%COMP%] > li.pending[_ngcontent-%COMP%]{opacity:.5}.file-list[_ngcontent-%COMP%] > li.pending[_ngcontent-%COMP%]   .dropdown-icon[_ngcontent-%COMP%]{display:none!important}.file-list[_ngcontent-%COMP%] > li.pending[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{pointer-events:none}.file-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:not(:last-of-type){margin-bottom:.5rem}.file-container[_ngcontent-%COMP%]{background-color:#dae0ff;min-height:59px}.file-container.uploading[_ngcontent-%COMP%]   .rotating[_ngcontent-%COMP%]{animation:fullRotation 1s linear infinite}.file-container.uploading[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{height:.5rem;border-radius:.15rem}.touch-device[_ngcontent-%COMP%]   .file-time[_ngcontent-%COMP%]{cursor:pointer}.file-size[_ngcontent-%COMP%]:after{content:" - "}@keyframes fullRotation{0%{transform:rotate(0)}to{transform:rotate(-360deg)}}']}),o})();const ma=["modal"],fa=["newNameInput"];function _a(o,r){1&o&&(e.ynx(0),e._uU(1," \xc8 possibile rinominare un file liberamente, tuttavia occorre tenere presente che "),e.TgZ(2,"strong"),e._uU(3,"la modifica del nome comporta il cambiamento del link"),e.qZA(),e._uU(4,", pertanto al termine dell'operazione andranno aggiornati tutti i link gi\xe0 condivisi, i quali in caso contrario non saranno pi\xf9 funzionanti. "),e.BQk())}function va(o,r){1&o&&(e._uU(0," Rinominando una cartella, verr\xe0 "),e.TgZ(1,"strong"),e._uU(2,"modificato il link di tutti i file contenuti"),e.qZA(),e._uU(3," in essa. Pertanto, eventuali link gi\xe0 condivisi non saranno pi\xf9 funzionanti e andranno aggiornati. "))}function Ca(o,r){1&o&&(e.ynx(0),e._uU(1," Il nome non pu\xf2 essere vuoto! "),e.BQk())}function xa(o,r){if(1&o&&e._UZ(0,"span",23),2&o){const t=e.oxw(4);e.Q6J("innerHTML",t.errorMessage,e.oJD)}}function ya(o,r){1&o&&e._uU(0,"Questo nome \xe8 gi\xe0 in uso!")}function ba(o,r){if(1&o&&(e.YNc(0,xa,1,1,"span",21),e.YNc(1,ya,1,0,"ng-template",null,22,e.W1O)),2&o){const t=e.MAs(2),n=e.oxw(3);e.Q6J("ngIf",!n.nameValidationErrors.alreadyUsed)("ngIfElse",t)}}function Ta(o,r){if(1&o&&(e.TgZ(0,"div",19),e.YNc(1,Ca,2,0,"ng-container",6),e.YNc(2,ba,3,2,"ng-template",null,20,e.W1O),e.qZA()),2&o){const t=e.MAs(3),n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.nameValidationErrors.invalidLength)("ngIfElse",t)}}function Ma(o,r){1&o&&e.GkF(0)}const wa=function(o,r){return{"is-valid":o,"is-invalid":r}},Sa=function(o){return{$implicit:o}};function Aa(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"p",5),e._uU(2," Il nome pu\xf2 contenere i caratteri "),e.TgZ(3,"em"),e._uU(4,"a-z"),e.qZA(),e._uU(5,", sia maiuscoli che minuscoli, i trattini alti e bassi "),e.TgZ(6,"em"),e._uU(7,"-_"),e.qZA(),e._uU(8," e i numeri. "),e.YNc(9,_a,5,0,"ng-container",6),e.YNc(10,va,4,0,"ng-template",null,7,e.W1O),e.qZA(),e.TgZ(12,"div",8)(13,"label",9),e._uU(14,"Nome attuale:"),e.qZA(),e._UZ(15,"input",10),e.qZA(),e.TgZ(16,"fieldset",11)(17,"legend",12),e._uU(18,"Valori modificati"),e.qZA(),e.TgZ(19,"ul",13)(20,"li")(21,"label",14),e._uU(22,"Nuovo nome:"),e.qZA(),e.TgZ(23,"input",15,16),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.newName=i)})("ngModelChange",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.checkNameValidity())}),e.qZA(),e.YNc(25,Ta,4,2,"div",17),e.qZA(),e.TgZ(26,"li"),e.YNc(27,Ma,1,0,"ng-container",18),e.qZA()()(),e.BQk()}if(2&o){const t=e.MAs(11),n=e.MAs(24),i=e.oxw(),s=e.MAs(5);e.xp6(9),e.Q6J("ngIf",i.entity.type===i.entityTypes.FILE)("ngIfElse",t),e.xp6(6),e.Q6J("value",i.currentName),e.xp6(8),e.Q6J("pattern",i.entity.type===i.entityTypes.FILE?i.filenameValidationRegex:i.foldernameValidationRegex)("ngClass",e.WLB(9,wa,i.currentName!==i.newName&&n.dirty&&i.isNewNameValid,n.dirty&&!i.isNewNameValid))("ngModel",i.newName),e.xp6(2),e.Q6J("ngIf",!i.isNewNameValid),e.xp6(2),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(12,Sa,i.path+i.newNameParsedUrl+i.ext))}}function Oa(o,r){if(1&o){const t=e.EpF();e.ynx(0,24),e.TgZ(1,"button",25),e.NdJ("click",function(){e.CHM(t),e.oxw();const i=e.MAs(1);return e.KtG(i.close("Close click"))}),e._uU(2,"Annulla"),e.qZA(),e.TgZ(3,"button",26),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.rename())}),e._uU(4,"Salva"),e.qZA(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("disabled",t.currentName===t.newName||!t.isNewNameValid)}}const Ea=function(o){return{placement:"top",hideOnClick:o}};function Pa(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"label",27),e._uU(1,"Anteprima nuovo link:"),e.qZA(),e.TgZ(2,"div",28),e._UZ(3,"input",29),e.TgZ(4,"div",30,31),e.NdJ("click",function(){e.CHM(t);const i=e.MAs(5),s=e.oxw();return e.KtG(!s.touchDevice&&i.changeContent("Copiato!","Copia"))}),e.TgZ(6,"span",32),e._uU(7,"content_copy"),e.qZA()()()}if(2&o){const t=r.$implicit,n=e.oxw();e.xp6(3),e.Q6J("value",t),e.xp6(1),e.Q6J("cdkCopyToClipboard",t)("appTippy",n.touchDevice?"Copiato!":"Copia")("tippyProps",e.VKq(4,Ea,n.touchDevice))}}let Ia=(()=>{class o{constructor(){this.currentFolderPath=[],this.reservedNames=[],this.renameEvent=new e.vpe,this.touchDevice=Ve.eX,this.opened=!1,this.currentName="",this.newName="",this.newNameParsedUrl="",this.ext="",this.isNewNameValid=!1,this.entityTypes=H,this.path="",this.filenameValidationRegex=Vn,this.foldernameValidationRegex=Ln,this.errorMessage="",this.nameValidationErrors=tn,this.characterFileErrorMessage="Il nome pu\xf2 contenere solo i caratteri <em>a-z</em>, i trattini alti e bassi <em>-_</em>, gli spazi, i punti e i numeri!",this.characterFolderErrorMessage="Il nome pu\xf2 contenere solo i caratteri <em>a-z</em>, i trattini alti e bassi <em>-_</em>, gli spazi e i numeri!",this.startAndEndErrorMessage="Il nome non pu\xf2 iniziare o finire con un punto o uno spazio!"}ngOnInit(){}ngOnChanges(t){t.entity&&!t.entity.firstChange&&this.entity&&(this.ext=this.entity.ext?`.${this.entity.ext}`:"",this.currentName=this.newName=this.ext?this.entity.name.replace(this.ext,""):this.entity.name,this.path=this.entity.url.split("/").slice(0,-1).join("/")+"/",this.creteNameForUrl())}open(){return this.opened=!0,this.modalComponent.open()}onHidden(){this.opened=!1,this.newName=this.newNameParsedUrl=this.currentName,this.isNewNameValid=!1,this.nameValidationErrors=tn}checkNameValidity(){this.nameValidationErrors=Kn(this.newName,this.currentName,this.entity?.type||H.FILE,this.reservedNames||[],this.ext),this.isNewNameValid=!Object.values(this.nameValidationErrors).some(t=>t),this.isNewNameValid?this.creteNameForUrl():this.setErrorMessage()}creteNameForUrl(){this.newNameParsedUrl=encodeURIComponent(this.newName)}setErrorMessage(){this.errorMessage=this.nameValidationErrors.invalidStartOrEnd?this.startAndEndErrorMessage:this.entity?.type===H.FOLDER?this.characterFolderErrorMessage:this.characterFileErrorMessage}rename(){var t=this;return(0,L.Z)(function*(){!t.opened||!t.isNewNameValid||!t.entity||(t.renameEvent.emit({entity:t.entity,newName:t.newName}),t.modalComponent.close())})()}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upload-rename-modal"]],viewQuery:function(t,n){if(1&t&&(e.Gf(ma,5),e.Gf(fa,5)),2&t){let i;e.iGM(i=e.CRH())&&(n.modalComponent=i.first),e.iGM(i=e.CRH())&&(n.newNameInputRef=i.first)}},inputs:{currentFolderPath:"currentFolderPath",entity:"entity",reservedNames:"reservedNames"},outputs:{renameEvent:"renameEvent"},features:[e.TTD],decls:6,vars:4,consts:[[3,"title","disableCloseButton","hidden"],["modal",""],[4,"ngIf"],["footer","",4,"ngIf"],["newUrl",""],[1,"mb-0"],[4,"ngIf","ngIfElse"],["folderDesc",""],[1,"mt-2"],["for","current-name",1,"fs-sm"],["type","text","disabled","","id","current-name",1,"form-control",3,"value"],[1,"px-3","pb-3","pt-1","rounded","mt-3","mb-1","border-dashed","border-light-gray"],[1,"legend-reset","fs-reset","px-2","mb-0"],[1,"list-unstyled","mb-0"],["for","file-new-name",1,"fs-sm"],["type","text","id","file-new-name","required","",1,"form-control",3,"pattern","ngClass","ngModel","ngModelChange"],["newNameInput","ngModel"],["class","invalid-feedback",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"invalid-feedback"],["invalidName",""],[3,"innerHTML",4,"ngIf","ngIfElse"],["alreadyUsed",""],[3,"innerHTML"],["footer",""],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["for","new-link",1,"fs-sm"],[1,"input-group"],["type","text","id","new-link","disabled","",1,"form-control",3,"value"],[1,"input-group-text","cursor-pointer",3,"cdkCopyToClipboard","appTippy","tippyProps","click"],["tippyRef","appTippy"],[1,"material-icons","d-block","text-muted"]],template:function(t,n){1&t&&(e.TgZ(0,"app-modal",0,1),e.NdJ("hidden",function(){return n.onHidden()}),e.YNc(2,Aa,28,14,"ng-container",2),e.YNc(3,Oa,5,1,"ng-container",3),e.qZA(),e.YNc(4,Pa,8,6,"ng-template",null,4,e.W1O)),2&t&&(e.Q6J("title","Rinomina <em>"+((null==n.entity?null:n.entity.name)||"")+"</em>")("disableCloseButton",!0),e.xp6(2),e.Q6J("ngIf",n.opened&&n.entity),e.xp6(1),e.Q6J("ngIf",n.opened))},dependencies:[xe.i3,C.mk,C.O5,C.tP,R.Fj,R.JJ,R.Q7,R.c5,R.On,ut.z,Jt.$],styles:["fieldset[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:not(:first-of-type){margin-top:.75rem}"]}),o})();const Da=["fileLinksModal"],Fa=["renameModal"],Ua=["deleteModal"],ka=["moveModal"],Za=["cropModal"];function Ra(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",18)(1,"ngb-alert",19),e.NdJ("closed",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.hideBetaAlert())}),e.TgZ(2,"p",20),e._uU(3,"Versione BETA!"),e.qZA(),e.TgZ(4,"p",21),e._uU(5,"Questa pagina \xe8 attualmente in versione beta, ci\xf2 significa che alcune funzionalit\xe0 potrebbero non essere completamente operative!"),e.qZA()()()}}let La=(()=>{class o{constructor(t,n,i){this.uploadService=t,this.toastService=n,this.cookieService=i,this.fileList=[],this.folderList=[],this.loading=!0,this.currentFolderPath=[],this.currentFilter="",this.currentActionEntities=[],this.currentActionReservedNames=[],this.currentActionFolderNames=[],this.showBetaAlert=!0}ngOnInit(){var t=this;return(0,L.Z)(function*(){t.showBetaAlert=!t.cookieService.check("upload-beta-alert"),t.uploadService.setGqlIdHeader(),t.currentFolderPath=t.uploadService.preferences.lastFolderPath,yield t.getFiles(),t.setSubscriptions(),yield t.subscribeForChanges(),t.loading=!1})()}subscribeForChanges(){var t=this;return(0,L.Z)(function*(){t.graphqlChangesSubscriptionDispose=yield t.uploadService.subscribeForChanges(function(){var n=(0,L.Z)(function*(i){const s=t.currentFolderPath.join("/"),a=s===i.sourcePaths.join("/"),d=m=>(a?t.fileList:(t.uploadService.cache.getItem(i.sourcePaths)?.files||[]).map(w=>({...w}))).find(w=>w.name===m),h=m=>(a?t.folderList:(t.uploadService.cache.getItem(i.sourcePaths)?.folders||[]).map(w=>({...w}))).find(w=>w.name===m),g=(m,w,q)=>{!q&&s.includes([...m,w].join("/"))&&t.uploadService.pushCurrentFolderPath([]),s===m.join("/")&&t.currentActionEntities.find(V=>V.name===w)&&t.closeActionModal()},_=(m,w,q)=>{s===m.join("/")?q?t.removeFileFromList(w):t.removeFolderFromList(w):q?t.uploadService.cache.removeEntities(m,w):t.removeFolderFromCache(m,w)};if(i.type===Ot.DELETE)return g(i.targetPaths,i.targetName,i.isFile),void _(i.targetPaths,i.targetName,i.isFile);if(i.type===Ot.UPLOAD){const m=i.output,w=t.uploadService.cache.getItem(i.targetPaths);if(!w)return;const q=w.files.findIndex(j=>j.url===m.url)>-1,V=t.uploadService.createFileEntityFromUrl(m.url);V.size=m.size,V.time=1e3*m.time,t.uploadedFiles({rewrite:q,paths:i.targetPaths,fileList:[V]})}if(i.type!==Ot.NEW_DIR)if(i.type!==Ot.MOVE);else if(g(i.sourcePaths,i.sourceName,i.isFile),i.sourcePaths.join("/")===i.targetPaths.join("/"))if(i.isFile){a&&t.uploadService.pushSelectedFile({name:i.sourceName,selected:!1});const m=d(i.sourceName);m&&t.renameFileCallback(i.sourcePaths,m,i.output)}else{const m=h(i.sourceName);m&&t.renameFolderCallback(i.sourcePaths,m,i.output)}else{const m=t.uploadService.cache.getItem([...i.sourcePaths,i.sourceName]),w=i.isFile?d(i.sourceName):h(i.sourceName);if(!w)return;_(i.sourcePaths,i.sourceName,i.isFile),i.isFile?t.moveFileCallback(i.targetPaths,w,i.output):t.moveFolderCallback(i.targetPaths,w,i.output,m)}else{const m=t.uploadService.getFoldernameInfo(i.output);t.createFolder({opened:!1,destPath:i.targetPaths,folder:{name:m.name,url:i.output}})}});return function(i){return n.apply(this,arguments)}}())})()}setSubscriptions(){var t=this;this.actionSubscription=this.uploadService.actionObservable.subscribe(n=>{if(this.currentActionEntities=n.payload.entities,this.currentActionEntities[0])switch(n.name){case Ne.FILE_SHOW_LINKS:this.currentActionModalRef=this.fileLinksModalComponent.open();break;case Ne.RENAME:this.currentActionReservedNames=this.currentActionEntities[0].type===H.FILE?this.fileList.map(i=>i.name):this.folderList.map(i=>i.name),this.currentActionModalRef=this.renameModalComponent.open();break;case Ne.MOVE:this.currentActionFolderNames=this.folderList.map(i=>i.name),this.currentActionModalRef=this.fileMoveModalComponent.open();break;case Ne.DELETE:this.currentActionModalRef=this.deleteModalComponent.open();break;case Ne.FILE_EDIT:this.currentActionModalRef=this.fileCropModalComponent.open()}}),this.currentFolderPathSubscription=this.uploadService.currentFolderPathObservable.subscribe(function(){var n=(0,L.Z)(function*(i){t.loading=!0,t.uploadService.pushSelectedFile([]),t.uploadService.pushUploadingFileQueue([]),t.closeActionModal(),t.currentFolderPath=i,yield t.getFiles(),t.loading=!1});return function(i){return n.apply(this,arguments)}}())}closeActionModal(){this.currentActionModalRef&&(this.currentActionModalRef.close(),this.currentActionModalRef=void 0)}getFiles(){var t=this;return(0,L.Z)(function*(){const n=yield t.uploadService.getFileList(t.currentFolderPath);t.fileList=n.files.map(i=>({...i})),t.folderList=n.folders.map(i=>({...i})),t.sortListByTime()})()}sortListByTime(){this.fileList.sort((t,n)=>t.time>n.time?-1:1)}removeEntityFromList(t){Array.isArray(t)||(t=[t]);for(const n of t)n.type!==H.FILE?this.removeFolderFromList(n.name):this.removeFileFromList(n.name);t.length>1?this.deselectAllFiles():this.deselectFile(t[0].name)}removeFileFromList(t){const n=this.fileList.findIndex(i=>i.name===t);if(n>-1){const i=this.fileList[n];return this.fileList.splice(n,1),this.uploadService.pushDeleteFile(i),this.uploadService.cache.removeEntities(this.currentFolderPath,i.name),!0}return!1}removeFolderFromList(t){const n=this.folderList.findIndex(i=>i.name===t);return n>-1&&(this.folderList.splice(n,1),this.folderList=[...this.folderList],this.removeFolderFromCache(this.currentFolderPath,t),!0)}removeFolderFromCache(t,n){this.uploadService.cache.removeEntities(t,n,H.FOLDER),this.uploadService.cache.removeItem([...t,n])}renameEntity(t){var n=this;return(0,L.Z)(function*(){let i,s=` <strong>${t.entity.name}</strong> modificato con successo!`;if(n.uploadService.pushEntityPending([{type:t.entity.type,name:t.entity.name,start:!0}]),i=t.entity.type===H.FILE?yield n.renameFile(t.entity.name,t.newName):yield n.renameFolder(t.entity.name,t.newName),n.uploadService.pushEntityPending([{type:t.entity.type,name:t.entity.name,start:!1}]),i)return s=(t.entity.type===H.FILE?"Nome del file":"Nome della cartella")+s,void n.toastService.show({content:s});n.toastService.show({content:"La modifica del nome <strong>non</strong> \xe8 andata a buon fine!<br>Prova a ricaricare la pagina ed a rieseguirla.",level:St.m.ERROR})})()}renameFile(t,n){var i=this;return(0,L.Z)(function*(){const s=[...i.currentFolderPath],a=i.fileList.find(h=>h.name===t);if(!a)return!1;i.uploadService.pushSelectedFile({name:t,selected:!1});let d=yield i.uploadService.moveRenameEntity(s,s,t,`${n}.${a.ext}`);return!!d&&(i.renameFileCallback(s,a,d),!0)})()}renameFileCallback(t,n,i){this.uploadService.cache.removeEntities(t,n.name);const s=n.name,a=this.uploadService.getFilenameInfo(i);n.filename=a.filename,n.name=a.name,n.url=i,n.time=Date.now(),n.embedUrl=`${n.url}?t=${n.time}`,this.uploadService.cache.addEntities(t,n),t.join("/")===this.currentFolderPath.join("/")&&(this.uploadService.pushRenameFile({oldName:s,newFile:n}),this.sortListByTime())}renameFolder(t,n){var i=this;return(0,L.Z)(function*(){const s=[...i.currentFolderPath],a=i.folderList.find(h=>h.name===t);if(!a)return!1;let d=yield i.uploadService.moveRenameEntity(s,s,t,n);return!!d&&(i.renameFolderCallback(s,a,d),!0)})()}renameFolderCallback(t,n,i){const s=this.uploadService.getFoldernameInfo(i),a=n.name;n.name=s.name,n.url=i,this.uploadService.cache.removeEntities(t,a,H.FOLDER),this.uploadService.cache.addEntities(t,{name:s.name,url:i},H.FOLDER),this.uploadService.cache.removeItem([...t,a])}moveEntity(t){var n=this;return(0,L.Z)(function*(){t.entities.length>1?n.deselectAllFiles():n.deselectFile(t.entities[0].name),t.entities[0].type===H.FILE?yield n.moveFile(t.entities.map(i=>i.name),t.destPath):yield n.moveFolder(t.entities[0].name,t.destPath)})()}moveFile(t,n){var i=this;return(0,L.Z)(function*(){let s=[];if(1===t.length){const _=i.fileList.find(m=>m.name===t[0]);_&&s.push(_)}else s=i.fileList.filter(_=>t.includes(_.name));const a=[...i.currentFolderPath];for(let _ of t)i.removeFileFromList(_);let h=[];for(let _=0;_<s.length;_+=5){const m=s.slice(_,_+5);h.push(...yield Promise.all(m.map(w=>i.uploadService.moveRenameEntity(a,n,w.name))))}let g=!0;h.forEach((_,m)=>{_?i.moveFileCallback(n,s[m],_):g=!1}),i.toastService.show(g?1===t.length?{content:`File <strong>${t[0]}</strong> spostato con successo!`}:{content:`<strong>${t.length} file</strong> spostati con successo!`}:{content:"Errore nello spostamento!",level:St.m.ERROR})})()}moveFileCallback(t,n,i){const s=this.uploadService.getFilenameInfo(i);n.name!==s.name&&(n.filename=s.filename,n.name=s.name),n.url=i,n.time=Date.now(),n.embedUrl=`${n.url}?t=${n.time}`,t.join("/")===this.currentFolderPath.join("/")?-1===this.fileList.findIndex(a=>a.name===n.name)&&this.uploadedFiles({fileList:[n],rewrite:!1,paths:this.currentFolderPath}):this.uploadService.cache.addEntities(t,n)}moveFolder(t,n){var i=this;return(0,L.Z)(function*(){const s=i.folderList.find(g=>g.name===t);if(!s)return;const a=[...i.currentFolderPath],d=i.uploadService.cache.getItem([...a,s.name]);i.removeFolderFromList(t);const h=yield i.uploadService.moveRenameEntity(a,n,s.name);if(h)return i.moveFolderCallback(n,s,h,d),void i.toastService.show({content:`Cartella <strong>${s.name}</strong> spostata con successo!`});i.toastService.show({content:"Errore nello spostamento della cartella!",level:St.m.ERROR})})()}moveFolderCallback(t,n,i,s){t.join("/")===this.currentFolderPath.join("/")?-1===this.folderList.findIndex(a=>a.name===n.name)&&this.createFolder({folder:n,destPath:t,opened:!1}):this.uploadService.cache.addEntities(t,n,H.FOLDER),s&&(this.uploadService.cache.setItem([...t,n.name],s),this.uploadService.cache.refactorFolderContent([...t,n.name],i))}uploadedFiles(t){let n=[];const i=t.paths.join("/")!==this.currentFolderPath.join("/");for(const s of t.fileList)t.rewrite&&(i?this.uploadService.cache.removeEntities(t.paths,s.name):this.removeFileFromList(s.name))&&(s.embedUrl=`${s.url}?t=${s.time}`),n.push(s);i||(this.fileList.unshift(...n),this.uploadService.pushUploadedFile(n)),this.uploadService.cache.addEntities(t.paths,n)}createFolder(t){this.uploadService.cache.addEntities(t.destPath,t.folder,H.FOLDER),!t.opened&&t.destPath.join("/")===this.currentFolderPath.join("/")&&(this.folderList=[...this.folderList,t.folder])}selectAllFiles(){this.uploadService.pushSelectedFile(this.fileList.map(t=>({name:t.name,selected:!0})))}deselectAllFiles(){this.uploadService.pushSelectedFile([])}deselectFile(t){this.uploadService.pushSelectedFile({name:t,selected:!1})}hideBetaAlert(){this.cookieService.set("upload-beta-alert","1",{expires:2,path:"/",secure:!1,sameSite:"Strict"}),this.showBetaAlert=!1}ngOnDestroy(){this.actionSubscription?.unsubscribe(),this.currentFolderPathSubscription?.unsubscribe(),this.graphqlChangesSubscriptionDispose&&this.graphqlChangesSubscriptionDispose(),this.uploadService.removeGqlIdHeader()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(We),e.Y36(on.k),e.Y36(Ui.N))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],viewQuery:function(t,n){if(1&t&&(e.Gf(Da,5),e.Gf(Fa,5),e.Gf(Ua,5),e.Gf(ka,5),e.Gf(Za,5)),2&t){let i;e.iGM(i=e.CRH())&&(n.fileLinksModalComponent=i.first),e.iGM(i=e.CRH())&&(n.renameModalComponent=i.first),e.iGM(i=e.CRH())&&(n.deleteModalComponent=i.first),e.iGM(i=e.CRH())&&(n.fileMoveModalComponent=i.first),e.iGM(i=e.CRH())&&(n.fileCropModalComponent=i.first)}},decls:20,vars:24,consts:[["pageTitle","Gestione file"],[1,"d-grid","upload-header"],[3,"loading","currentFolderPath","fileUploadedEvent","openInfoModal"],[1,"min-w-0",3,"fileList","loading"],[1,"d-flex","flex-column",3,"loading","fileList","filterEvent","selectAllFilesEvent","openInfoModal"],["class","container-xxl beta-alert",4,"ngIf"],[3,"loading","folderList","currentFolderPath","filter","newFolderEvent","moveEvent"],[3,"loading","fileList","filter"],[3,"entity"],["fileLinksModal",""],[3,"currentFolderPath","entity","reservedNames","renameEvent"],["renameModal",""],[3,"entities","currentFolderPath","deleteEvent"],["deleteModal",""],[3,"entities","folderNameList","currentFolderPath","moveEvent"],["moveModal",""],["cropModal",""],["infoModal",""],[1,"container-xxl","beta-alert"],["type","danger",1,"mb-0","text-center",3,"closed"],[1,"fw-bold","mb-1"],[1,"mb-0"]],template:function(t,n){if(1&t){const i=e.EpF();e._UZ(0,"app-breadcrumb",0),e.TgZ(1,"div",1)(2,"app-uploader",2),e.NdJ("fileUploadedEvent",function(a){return n.uploadedFiles(a)})("openInfoModal",function(){e.CHM(i);const a=e.MAs(19);return e.KtG(a.open())}),e.qZA(),e._UZ(3,"app-upload-recent-files",3),e.TgZ(4,"app-upload-filter",4),e.NdJ("filterEvent",function(a){return n.currentFilter=a})("selectAllFilesEvent",function(){return n.selectAllFiles()})("openInfoModal",function(){e.CHM(i);const a=e.MAs(19);return e.KtG(a.open())}),e.qZA()(),e.YNc(5,Ra,6,0,"div",5),e.TgZ(6,"app-upload-folder-list",6),e.NdJ("newFolderEvent",function(a){return n.createFolder(a)})("moveEvent",function(a){return n.moveEntity(a)}),e.qZA(),e._UZ(7,"app-upload-file-list",7)(8,"app-upload-file-links-modal",8,9),e.TgZ(10,"app-upload-rename-modal",10,11),e.NdJ("renameEvent",function(a){return n.renameEntity(a)}),e.qZA(),e.TgZ(12,"app-upload-delete-modal",12,13),e.NdJ("deleteEvent",function(a){return n.removeEntityFromList(a)}),e.qZA(),e.TgZ(14,"app-upload-move-modal",14,15),e.NdJ("moveEvent",function(a){return n.moveEntity(a)}),e.qZA(),e._UZ(16,"app-upload-crop-modal",8,16)(18,"app-upload-info-modal",null,17)}2&t&&(e.xp6(2),e.Q6J("loading",n.loading)("currentFolderPath",n.currentFolderPath),e.xp6(1),e.Q6J("fileList",n.fileList)("loading",n.loading),e.xp6(1),e.Q6J("loading",n.loading)("fileList",n.fileList),e.xp6(1),e.Q6J("ngIf",n.showBetaAlert),e.xp6(1),e.Q6J("loading",n.loading)("folderList",n.folderList)("currentFolderPath",n.currentFolderPath)("filter",n.currentFilter),e.xp6(1),e.Q6J("loading",n.loading)("fileList",n.fileList)("filter",n.currentFilter),e.xp6(1),e.Q6J("entity",n.currentActionEntities[0]),e.xp6(2),e.Q6J("currentFolderPath",n.currentFolderPath)("entity",n.currentActionEntities[0])("reservedNames",n.currentActionReservedNames),e.xp6(2),e.Q6J("entities",n.currentActionEntities)("currentFolderPath",n.currentFolderPath),e.xp6(2),e.Q6J("entities",n.currentActionEntities)("folderNameList",n.currentActionFolderNames)("currentFolderPath",n.currentFolderPath),e.xp6(2),e.Q6J("entity",n.currentActionEntities[0]))},dependencies:[ki.L,C.O5,ae.xm,ho,bo,Po,Go,Ur,Wr,Os,Is,Ks,ga,Ia],styles:[".upload-header[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem;margin-bottom:1rem}.beta-alert[_ngcontent-%COMP%]{margin-bottom:1rem;padding:0 1rem}.beta-alert[_ngcontent-%COMP%]   .alert-dismissible[_ngcontent-%COMP%]{padding-left:3rem}@media (min-width: 500px){.upload-header[_ngcontent-%COMP%], .beta-alert[_ngcontent-%COMP%]{margin-bottom:1.5rem}}@media (min-width: 768px){.upload-header[_ngcontent-%COMP%], .beta-alert[_ngcontent-%COMP%]{margin-bottom:2rem}.beta-alert[_ngcontent-%COMP%]{padding:0}}@media (min-width: 960px){.upload-header[_ngcontent-%COMP%]{gap:1.5rem}}@media (min-width: 1100px) and (max-width: 1499.98px){.upload-header[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.upload-header[_ngcontent-%COMP%]   app-uploader[_ngcontent-%COMP%]{grid-column:span 2}}@media (min-width: 1500px){.upload-header[_ngcontent-%COMP%]{grid-template-columns:calc(38% - 1rem) calc(28% - 1rem) calc(34% - 1rem)}.upload-header[_ngcontent-%COMP%]   app-uploader[_ngcontent-%COMP%]{grid-column:initial;min-height:250px}}"]}),o})();var Na=x(1599);x(5386);const za=[{path:"",component:La}];let Ha=(()=>{class o{constructor(t){this.timeagoIntl=t,this.timeagoIntl.strings=Zn.j,this.timeagoIntl.changes.next()}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(en))},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[Te,Fe,I,Me,te.w,xe.Iq,C.ez,Pn,In,R.u5,Dn,Fn,ln,qt,Kt.q,$t.z,ae._A,ae.XC,it.Bz.forChild(za),re.Cl,Ci.forRoot({intl:{provide:en},formatter:{provide:wt,useClass:vi},clock:{provide:$,useClass:xi}}),yi.G,Na.g]}),o})()},2381:(Ke,he,x)=>{"use strict";x.d(he,{y:()=>Fe});var C=x(5044),e=x(4650),Te=x(5700);let Fe=(()=>{class I{constructor(te){this.cookieConsentService=te,this.storage=null}getItem(te){return null===this.storage&&(this.storage=this.data),this.storage[te]}get data(){const te=localStorage.getItem(C.dR.PREFERENCES);if(!te)return{};try{return JSON.parse(te)}catch{return{}}}setItem(te,xe){null===this.storage&&(this.storage=this.data),xe?this.storage[te]=xe:delete this.storage[te],this.cookieConsentService.choice?.preferences&&localStorage.setItem(C.dR.PREFERENCES,JSON.stringify(this.storage))}}return I.\u0275fac=function(te){return new(te||I)(e.LFG(Te.C))},I.\u0275prov=e.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})()},6730:function(Ke){Ke.exports=function(){"use strict";function he(S,v){var y=Object.keys(S);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(S);v&&(b=b.filter(function(P){return Object.getOwnPropertyDescriptor(S,P).enumerable})),y.push.apply(y,b)}return y}function x(S){for(var v=1;v<arguments.length;v++){var y=null!=arguments[v]?arguments[v]:{};v%2?he(Object(y),!0).forEach(function(b){Fe(S,b,y[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors(y)):he(Object(y)).forEach(function(b){Object.defineProperty(S,b,Object.getOwnPropertyDescriptor(y,b))})}return S}function e(S,v){for(var y=0;y<v.length;y++){var b=v[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(S,b.key,b)}}function Fe(S,v,y){return v in S?Object.defineProperty(S,v,{value:y,enumerable:!0,configurable:!0,writable:!0}):S[v]=y,S}function I(){return I=Object.assign||function(S){for(var v=1;v<arguments.length;v++){var y=arguments[v];for(var b in y)Object.prototype.hasOwnProperty.call(y,b)&&(S[b]=y[b])}return S},I.apply(this,arguments)}var S,v,y,b,P,E,N,J,Me={exports:{}};S=Me,typeof window>"u"||(v=window,y=v.HTMLCanvasElement&&v.HTMLCanvasElement.prototype,b=v.Blob&&function(){try{return Boolean(new Blob)}catch{return!1}}(),P=b&&v.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch{return!1}}(),E=v.BlobBuilder||v.WebKitBlobBuilder||v.MozBlobBuilder||v.MSBlobBuilder,N=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,J=(b||E)&&v.atob&&v.ArrayBuffer&&v.Uint8Array&&function(k){var z,Y,D,K,U,O,X,G,ue;if(!(z=k.match(N)))throw new Error("invalid data URI");for(Y=z[2]?z[1]:"text/plain"+(z[3]||";charset=US-ASCII"),D=!!z[4],K=k.slice(z[0].length),U=D?atob(K):decodeURIComponent(K),O=new ArrayBuffer(U.length),X=new Uint8Array(O),G=0;G<U.length;G+=1)X[G]=U.charCodeAt(G);return b?new Blob([P?X:O],{type:Y}):((ue=new E).append(O),ue.getBlob(Y))},v.HTMLCanvasElement&&!y.toBlob&&(y.mozGetAsFile?y.toBlob=function(k,z,Y){var D=this;setTimeout(function(){k(Y&&y.toDataURL&&J?J(D.toDataURL(z,Y)):D.mozGetAsFile("blob",z))})}:y.toDataURL&&J&&(y.toBlob=y.msToBlob?function(k,z,Y){var D=this;setTimeout(function(){k((z&&"image/png"!==z||Y)&&y.toDataURL&&J?J(D.toDataURL(z,Y)):D.msToBlob(z))})}:function(k,z,Y){var D=this;setTimeout(function(){k(J(D.toDataURL(z,Y)))})})),S.exports?S.exports=J:v.dataURLtoBlob=J);var te=Me.exports,re={strict:!0,checkOrientation:!0,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},A=typeof window<"u"&&typeof window.document<"u"?window:{},se=function(v){return v>0&&v<1/0},M=Array.prototype.slice;function Q(S){return Array.from?Array.from(S):M.call(S)}var ot=/^image\/.+$/;function ie(S){return ot.test(S)}var Ue=String.fromCharCode;var Oe=A.btoa;function rt(S){var y,v=new DataView(S);try{var b,P,E;if(255===v.getUint8(0)&&216===v.getUint8(1))for(var N=v.byteLength,J=2;J+1<N;){if(255===v.getUint8(J)&&225===v.getUint8(J+1)){P=J;break}J+=1}if(P){var z=P+10;if("Exif"===function B(S,v,y){var P,b="";for(y+=v,P=v;P<y;P+=1)b+=Ue(S.getUint8(P));return b}(v,P+4,4)){var Y=v.getUint16(z);if(((b=18761===Y)||19789===Y)&&42===v.getUint16(z+2,b)){var D=v.getUint32(z+4,b);D>=8&&(E=z+D)}}}if(E){var U,O,K=v.getUint16(E,b);for(O=0;O<K;O+=1)if(274===v.getUint16(U=E+12*O+2,b)){y=v.getUint16(U+=8,b),v.setUint16(U,1,b);break}}}catch{y=1}return y}var Ze=/\.\d*(?:0|9){12}\d*$/;function me(S){var v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return Ze.test(S)?Math.round(S*v)/v:S}function fe(S){var v=S.aspectRatio,y=S.height,b=S.width,P=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",E=se(b),N=se(y);if(E&&N){var J=y*v;("contain"===P||"none"===P)&&J>b||"cover"===P&&J<b?y=b/v:b=y*v}else E?y=b/v:N&&(b=y*v);return{width:b,height:y}}var je=A.ArrayBuffer,we=A.FileReader,ce=A.URL||A.webkitURL,mt=/\.\w+$/,Re=A.Compressor;return function(){function S(v,y){(function C(S,v){if(!(S instanceof v))throw new TypeError("Cannot call a class as a function")})(this,S),this.file=v,this.image=new Image,this.options=x(x({},re),y),this.aborted=!1,this.result=null,this.init()}return function Te(S,v,y){return v&&e(S.prototype,v),y&&e(S,y),S}(S,[{key:"init",value:function(){var y=this,b=this.file,P=this.options;if(function(v){return!(typeof Blob>"u")&&(v instanceof Blob||"[object Blob]"===Object.prototype.toString.call(v))}(b)){var E=b.type;if(ie(E))if(ce&&we)if(je||(P.checkOrientation=!1),ce&&!P.checkOrientation)this.load({url:ce.createObjectURL(b)});else{var N=new we,J=P.checkOrientation&&"image/jpeg"===E;this.reader=N,N.onload=function(k){var Y=k.target.result,D={};if(J){var K=rt(Y);K>1||!ce?(D.url=function ke(S,v){for(var y=[],P=new Uint8Array(S);P.length>0;)y.push(Ue.apply(null,Q(P.subarray(0,8192)))),P=P.subarray(8192);return"data:".concat(v,";base64,").concat(Oe(y.join("")))}(Y,E),K>1&&I(D,function $e(S){var v=0,y=1,b=1;switch(S){case 2:y=-1;break;case 3:v=-180;break;case 4:b=-1;break;case 5:v=90,b=-1;break;case 6:v=90;break;case 7:v=90,y=-1;break;case 8:v=-90}return{rotate:v,scaleX:y,scaleY:b}}(K))):D.url=ce.createObjectURL(b)}else D.url=Y;y.load(D)},N.onabort=function(){y.fail(new Error("Aborted to read the image with FileReader."))},N.onerror=function(){y.fail(new Error("Failed to read the image with FileReader."))},N.onloadend=function(){y.reader=null},J?N.readAsArrayBuffer(b):N.readAsDataURL(b)}else this.fail(new Error("The current browser does not support image compression."));else this.fail(new Error("The first argument must be an image File or Blob object."))}else this.fail(new Error("The first argument must be a File or Blob object."))}},{key:"load",value:function(y){var b=this,P=this.file,E=this.image;E.onload=function(){b.draw(x(x({},y),{},{naturalWidth:E.naturalWidth,naturalHeight:E.naturalHeight}))},E.onabort=function(){b.fail(new Error("Aborted to load the image."))},E.onerror=function(){b.fail(new Error("Failed to load the image."))},A.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(A.navigator.userAgent)&&(E.crossOrigin="anonymous"),E.alt=P.name,E.src=y.url}},{key:"draw",value:function(y){var b=this,P=y.naturalWidth,E=y.naturalHeight,N=y.rotate,J=void 0===N?0:N,k=y.scaleX,z=void 0===k?1:k,Y=y.scaleY,D=void 0===Y?1:Y,K=this.file,U=this.image,O=this.options,X=document.createElement("canvas"),G=X.getContext("2d"),ue=Math.abs(J)%180==90,Ee=("contain"===O.resize||"cover"===O.resize)&&se(O.width)&&se(O.height),ge=Math.max(O.maxWidth,0)||1/0,de=Math.max(O.maxHeight,0)||1/0,_e=Math.max(O.minWidth,0)||0,qe=Math.max(O.minHeight,0)||0,Je=P/E,ee=O.width,Z=O.height;if(ue){var Dt=[de,ge];ge=Dt[0],de=Dt[1];var ft=[qe,_e];_e=ft[0],qe=ft[1];var _t=[Z,ee];ee=_t[0],Z=_t[1]}Ee&&(Je=ee/Z);var Ft=fe({aspectRatio:Je,width:ge,height:de},"contain");ge=Ft.width,de=Ft.height;var vt=fe({aspectRatio:Je,width:_e,height:qe},"cover");if(_e=vt.width,qe=vt.height,Ee){var st=fe({aspectRatio:Je,width:ee,height:Z},O.resize);ee=st.width,Z=st.height}else{var Ct=fe({aspectRatio:Je,width:ee,height:Z}),Qe=Ct.width;ee=void 0===Qe?P:Qe;var xt=Ct.height;Z=void 0===xt?E:xt}var at=-(ee=Math.floor(me(Math.min(Math.max(ee,_e),ge))))/2,Xe=-(Z=Math.floor(me(Math.min(Math.max(Z,qe),de))))/2,Ut=ee,kt=Z,Zt=[];if(Ee){var Be,lt,Rt=fe({aspectRatio:Je,width:P,height:E},{contain:"cover",cover:"contain"}[O.resize]);Zt.push((P-(Be=Rt.width))/2,(E-(lt=Rt.height))/2,Be,lt)}if(Zt.push(at,Xe,Ut,kt),ue){var ct=[Z,ee];ee=ct[0],Z=ct[1]}X.width=ee,X.height=Z,ie(O.mimeType)||(O.mimeType=K.type);var Lt="transparent";if(K.size>O.convertSize&&O.convertTypes.indexOf(O.mimeType)>=0&&(O.mimeType="image/jpeg"),"image/jpeg"===O.mimeType&&(Lt="#fff"),G.fillStyle=Lt,G.fillRect(0,0,ee,Z),O.beforeDraw&&O.beforeDraw.call(this,G,X),!this.aborted&&(G.save(),G.translate(ee/2,Z/2),G.rotate(J*Math.PI/180),G.scale(z,D),G.drawImage.apply(G,[U].concat(Zt)),G.restore(),O.drew&&O.drew.call(this,G,X),!this.aborted)){var dt=function(Nt){b.aborted||b.done({naturalWidth:P,naturalHeight:E,result:Nt})};X.toBlob?X.toBlob(dt,O.mimeType,O.quality):dt(te(X.toDataURL(O.mimeType,O.quality)))}}},{key:"done",value:function(y){var b=y.naturalWidth,P=y.naturalHeight,E=y.result,N=this.file,k=this.options;if(ce&&!k.checkOrientation&&ce.revokeObjectURL(this.image.src),E)if(k.strict&&E.size>N.size&&k.mimeType===N.type&&!(k.width>b||k.height>P||k.minWidth>b||k.minHeight>P||k.maxWidth<b||k.maxHeight<P))E=N;else{var z=new Date;E.lastModified=z.getTime(),E.lastModifiedDate=z,E.name=N.name,E.name&&E.type!==N.type&&(E.name=E.name.replace(mt,function He(S){var v=ie(S)?S.substr(6):"";return"jpeg"===v&&(v="jpg"),".".concat(v)}(E.type)))}else E=N;this.result=E,k.success&&k.success.call(this,E)}},{key:"fail",value:function(y){var b=this.options;if(!b.error)throw y;b.error.call(this,y)}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],[{key:"noConflict",value:function(){return window.Compressor=Re,S}},{key:"setDefaults",value:function(y){I(re,y)}}]),S}()}()},5386:(Ke,he,x)=>{var C;!function(e,Te,Fe,I){"use strict";var ie,Me=["","webkit","Moz","MS","ms","o"],te=Te.createElement("div"),re=Math.round,ne=Math.abs,A=Date.now;function se(l,c,p){return setTimeout(Oe(l,p),c)}function M(l,c,p){return!!Array.isArray(l)&&(Q(l,p[c],p),!0)}function Q(l,c,p){var u;if(l)if(l.forEach)l.forEach(c,p);else if(l.length!==I)for(u=0;u<l.length;)c.call(p,l[u],u,l),u++;else for(u in l)l.hasOwnProperty(u)&&c.call(p,l[u],u,l)}function ot(l,c,p){var u="DEPRECATED METHOD: "+c+"\n"+p+" AT \n";return function(){var f=new Error("get-stack-trace"),T=f&&f.stack?f.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",F=e.console&&(e.console.warn||e.console.log);return F&&F.call(e.console,u,T),l.apply(this,arguments)}}ie="function"!=typeof Object.assign?function(c){if(c===I||null===c)throw new TypeError("Cannot convert undefined or null to object");for(var p=Object(c),u=1;u<arguments.length;u++){var f=arguments[u];if(f!==I&&null!==f)for(var T in f)f.hasOwnProperty(T)&&(p[T]=f[T])}return p}:Object.assign;var He=ot(function(c,p,u){for(var f=Object.keys(p),T=0;T<f.length;)(!u||u&&c[f[T]]===I)&&(c[f[T]]=p[f[T]]),T++;return c},"extend","Use `assign`."),Ue=ot(function(c,p){return He(c,p,!0)},"merge","Use `assign`.");function B(l,c,p){var f,u=c.prototype;(f=l.prototype=Object.create(u)).constructor=l,f._super=u,p&&ie(f,p)}function Oe(l,c){return function(){return l.apply(c,arguments)}}function ke(l,c){return"function"==typeof l?l.apply(c&&c[0]||I,c):l}function rt(l,c){return l===I?c:l}function $e(l,c,p){Q(je(c),function(u){l.addEventListener(u,p,!1)})}function Ze(l,c,p){Q(je(c),function(u){l.removeEventListener(u,p,!1)})}function me(l,c){for(;l;){if(l==c)return!0;l=l.parentNode}return!1}function fe(l,c){return l.indexOf(c)>-1}function je(l){return l.trim().split(/\s+/g)}function we(l,c,p){if(l.indexOf&&!p)return l.indexOf(c);for(var u=0;u<l.length;){if(p&&l[u][p]==c||!p&&l[u]===c)return u;u++}return-1}function ce(l){return Array.prototype.slice.call(l,0)}function mt(l,c,p){for(var u=[],f=[],T=0;T<l.length;){var F=c?l[T][c]:l[T];we(f,F)<0&&u.push(l[T]),f[T]=F,T++}return p&&(u=c?u.sort(function(le,$){return le[c]>$[c]}):u.sort()),u}function Re(l,c){for(var p,u,f=c[0].toUpperCase()+c.slice(1),T=0;T<Me.length;){if((u=(p=Me[T])?p+f:c)in l)return u;T++}return I}var It=1;function v(l){var c=l.ownerDocument||l;return c.defaultView||c.parentWindow||e}var b="ontouchstart"in e,P=Re(e,"PointerEvent")!==I,E=b&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),N="touch",k="mouse",Je=["x","y"],ee=["clientX","clientY"];function Z(l,c){var p=this;this.manager=l,this.callback=c,this.element=l.element,this.target=l.options.inputTarget,this.domHandler=function(u){ke(l.options.enable,[l])&&p.handler(u)},this.init()}function ft(l,c,p){var u=p.pointers.length,f=p.changedPointers.length,T=1&c&&u-f==0,F=12&c&&u-f==0;p.isFirst=!!T,p.isFinal=!!F,T&&(l.session={}),p.eventType=c,function _t(l,c){var p=l.session,u=c.pointers,f=u.length;p.firstInput||(p.firstInput=st(c)),f>1&&!p.firstMultiple?p.firstMultiple=st(c):1===f&&(p.firstMultiple=!1);var T=p.firstInput,F=p.firstMultiple,oe=F?F.center:T.center,le=c.center=Ct(u);c.timeStamp=A(),c.deltaTime=c.timeStamp-T.timeStamp,c.angle=Xe(oe,le),c.distance=at(oe,le),function Ft(l,c){var p=c.center,u=l.offsetDelta||{},f=l.prevDelta||{},T=l.prevInput||{};(1===c.eventType||4===T.eventType)&&(f=l.prevDelta={x:T.deltaX||0,y:T.deltaY||0},u=l.offsetDelta={x:p.x,y:p.y}),c.deltaX=f.x+(p.x-u.x),c.deltaY=f.y+(p.y-u.y)}(p,c),c.offsetDirection=xt(c.deltaX,c.deltaY);var $=Qe(c.deltaTime,c.deltaX,c.deltaY);c.overallVelocityX=$.x,c.overallVelocityY=$.y,c.overallVelocity=ne($.x)>ne($.y)?$.x:$.y,c.scale=F?function kt(l,c){return at(c[0],c[1],ee)/at(l[0],l[1],ee)}(F.pointers,u):1,c.rotation=F?function Ut(l,c){return Xe(c[1],c[0],ee)+Xe(l[1],l[0],ee)}(F.pointers,u):0,c.maxPointers=p.prevInput?c.pointers.length>p.prevInput.maxPointers?c.pointers.length:p.prevInput.maxPointers:c.pointers.length,function vt(l,c){var f,T,F,oe,p=l.lastInterval||c,u=c.timeStamp-p.timeStamp;if(8!=c.eventType&&(u>25||p.velocity===I)){var le=c.deltaX-p.deltaX,$=c.deltaY-p.deltaY,Ae=Qe(u,le,$);T=Ae.x,F=Ae.y,f=ne(Ae.x)>ne(Ae.y)?Ae.x:Ae.y,oe=xt(le,$),l.lastInterval=c}else f=p.velocity,T=p.velocityX,F=p.velocityY,oe=p.direction;c.velocity=f,c.velocityX=T,c.velocityY=F,c.direction=oe}(p,c);var Ae=l.element;me(c.srcEvent.target,Ae)&&(Ae=c.srcEvent.target),c.target=Ae}(l,p),l.emit("hammer.input",p),l.recognize(p),l.session.prevInput=p}function st(l){for(var c=[],p=0;p<l.pointers.length;)c[p]={clientX:re(l.pointers[p].clientX),clientY:re(l.pointers[p].clientY)},p++;return{timeStamp:A(),pointers:c,center:Ct(c),deltaX:l.deltaX,deltaY:l.deltaY}}function Ct(l){var c=l.length;if(1===c)return{x:re(l[0].clientX),y:re(l[0].clientY)};for(var p=0,u=0,f=0;f<c;)p+=l[f].clientX,u+=l[f].clientY,f++;return{x:re(p/c),y:re(u/c)}}function Qe(l,c,p){return{x:c/l||0,y:p/l||0}}function xt(l,c){return l===c?1:ne(l)>=ne(c)?l<0?2:4:c<0?8:16}function at(l,c,p){p||(p=Je);var u=c[p[0]]-l[p[0]],f=c[p[1]]-l[p[1]];return Math.sqrt(u*u+f*f)}function Xe(l,c,p){return p||(p=Je),180*Math.atan2(c[p[1]]-l[p[1]],c[p[0]]-l[p[0]])/Math.PI}Z.prototype={handler:function(){},init:function(){this.evEl&&$e(this.element,this.evEl,this.domHandler),this.evTarget&&$e(this.target,this.evTarget,this.domHandler),this.evWin&&$e(v(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&Ze(this.element,this.evEl,this.domHandler),this.evTarget&&Ze(this.target,this.evTarget,this.domHandler),this.evWin&&Ze(v(this.element),this.evWin,this.domHandler)}};var Zt={mousedown:1,mousemove:2,mouseup:4},yt="mousedown",Yt="mousemove mouseup";function Be(){this.evEl=yt,this.evWin=Yt,this.pressed=!1,Z.apply(this,arguments)}B(Be,Z,{handler:function(c){var p=Zt[c.type];1&p&&0===c.button&&(this.pressed=!0),2&p&&1!==c.which&&(p=4),this.pressed&&(4&p&&(this.pressed=!1),this.callback(this.manager,p,{pointers:[c],changedPointers:[c],pointerType:k,srcEvent:c}))}});var lt={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},Rt={2:N,3:"pen",4:k,5:"kinect"},ct="pointerdown",Lt="pointermove pointerup pointercancel";function dt(){this.evEl=ct,this.evWin=Lt,Z.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}e.MSPointerEvent&&!e.PointerEvent&&(ct="MSPointerDown",Lt="MSPointerMove MSPointerUp MSPointerCancel"),B(dt,Z,{handler:function(c){var p=this.store,u=!1,f=c.type.toLowerCase().replace("ms",""),T=lt[f],F=Rt[c.pointerType]||c.pointerType,oe=F==N,le=we(p,c.pointerId,"pointerId");1&T&&(0===c.button||oe)?le<0&&(p.push(c),le=p.length-1):12&T&&(u=!0),!(le<0)&&(p[le]=c,this.callback(this.manager,T,{pointers:p,changedPointers:[c],pointerType:F,srcEvent:c}),u&&p.splice(le,1))}});var An={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Nt="touchstart",On="touchstart touchmove touchend touchcancel";function an(){this.evTarget=Nt,this.evWin=On,this.started=!1,Z.apply(this,arguments)}function En(l,c){var p=ce(l.touches),u=ce(l.changedTouches);return 12&c&&(p=mt(p.concat(u),"identifier",!0)),[p,u]}B(an,Z,{handler:function(c){var p=An[c.type];if(1===p&&(this.started=!0),this.started){var u=En.call(this,c,p);12&p&&u[0].length-u[1].length==0&&(this.started=!1),this.callback(this.manager,p,{pointers:u[0],changedPointers:u[1],pointerType:N,srcEvent:c})}}});var Pn={touchstart:1,touchmove:2,touchend:4,touchcancel:8},In="touchstart touchmove touchend touchcancel";function R(){this.evTarget=In,this.targetIds={},Z.apply(this,arguments)}function Dn(l,c){var p=ce(l.touches),u=this.targetIds;if(3&c&&1===p.length)return u[p[0].identifier]=!0,[p,p];var f,T,F=ce(l.changedTouches),oe=[],le=this.target;if(T=p.filter(function($){return me($.target,le)}),1===c)for(f=0;f<T.length;)u[T[f].identifier]=!0,f++;for(f=0;f<F.length;)u[F[f].identifier]&&oe.push(F[f]),12&c&&delete u[F[f].identifier],f++;return oe.length?[mt(T.concat(oe),"identifier",!0),oe]:void 0}function pt(){Z.apply(this,arguments);var l=Oe(this.handler,this);this.touch=new R(this.manager,l),this.mouse=new Be(this.manager,l),this.primaryTouch=null,this.lastTouches=[]}function Un(l,c){1&l?(this.primaryTouch=c.changedPointers[0].identifier,cn.call(this,c)):12&l&&cn.call(this,c)}function cn(l){var c=l.changedPointers[0];if(c.identifier===this.primaryTouch){var p={x:c.clientX,y:c.clientY};this.lastTouches.push(p);var u=this.lastTouches;setTimeout(function(){var T=u.indexOf(p);T>-1&&u.splice(T,1)},2500)}}function zt(l){for(var c=l.srcEvent.clientX,p=l.srcEvent.clientY,u=0;u<this.lastTouches.length;u++){var f=this.lastTouches[u],T=Math.abs(c-f.x),F=Math.abs(p-f.y);if(T<=25&&F<=25)return!0}return!1}B(R,Z,{handler:function(c){var p=Pn[c.type],u=Dn.call(this,c,p);!u||this.callback(this.manager,p,{pointers:u[0],changedPointers:u[1],pointerType:N,srcEvent:c})}}),B(pt,Z,{handler:function(c,p,u){var T=u.pointerType==k;if(!(T&&u.sourceCapabilities&&u.sourceCapabilities.firesTouchEvents)){if(u.pointerType==N)Un.call(this,p,u);else if(T&&zt.call(this,u))return;this.callback(c,p,u)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var dn=Re(te.style,"touchAction"),pn=dn!==I,hn="compute",et="manipulation",Ye="none",tt="pan-x",bt="pan-y",Tt=function kn(){if(!pn)return!1;var l={},c=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(p){l[p]=!c||e.CSS.supports("touch-action",p)}),l}();function Gt(l,c){this.manager=l,this.set(c)}function Le(l){this.options=ie({},this.defaults,l||{}),this.id=function S(){return It++}(),this.manager=null,this.options.enable=rt(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function un(l){return 16&l?"cancel":8&l?"end":4&l?"move":2&l?"start":""}function gn(l){return 16==l?"down":8==l?"up":2==l?"left":4==l?"right":""}function Mt(l,c){var p=c.manager;return p?p.get(l):l}function Se(){Le.apply(this,arguments)}function qt(){Se.apply(this,arguments),this.pX=null,this.pY=null}function ve(){Se.apply(this,arguments)}function mn(){Le.apply(this,arguments),this._timer=null,this._input=null}function Kt(){Se.apply(this,arguments)}function $t(){Se.apply(this,arguments)}function ae(){Le.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function it(l,c){return(c=c||{}).recognizers=rt(c.recognizers,it.defaults.preset),new jt(l,c)}function jt(l,c){this.options=ie({},it.defaults,c||{}),this.options.inputTarget=this.options.inputTarget||l,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=l,this.input=function Dt(l){return new(l.options.inputClass||(P?dt:E?R:b?pt:Be))(l,ft)}(this),this.touchAction=new Gt(this,this.options.touchAction),Xt(this,!0),Q(this.options.recognizers,function(p){var u=this.add(new p[0](p[1]));p[2]&&u.recognizeWith(p[2]),p[3]&&u.requireFailure(p[3])},this)}function Xt(l,c){var u,p=l.element;p.style&&(Q(l.options.cssProps,function(f,T){u=Re(p.style,T),c?(l.oldCssProps[u]=p.style[u],p.style[u]=f):p.style[u]=l.oldCssProps[u]||""}),c||(l.oldCssProps={}))}Gt.prototype={set:function(l){l==hn&&(l=this.compute()),pn&&this.manager.element.style&&Tt[l]&&(this.manager.element.style[dn]=l),this.actions=l.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var l=[];return Q(this.manager.recognizers,function(c){ke(c.options.enable,[c])&&(l=l.concat(c.getTouchAction()))}),function Vt(l){if(fe(l,Ye))return Ye;var c=fe(l,tt),p=fe(l,bt);return c&&p?Ye:c||p?c?tt:bt:fe(l,et)?et:"auto"}(l.join(" "))},preventDefaults:function(l){var c=l.srcEvent,p=l.offsetDirection;if(!this.manager.session.prevented){var u=this.actions,f=fe(u,Ye)&&!Tt[Ye],T=fe(u,bt)&&!Tt[bt],F=fe(u,tt)&&!Tt[tt];if(f&&1===l.pointers.length&&l.distance<2&&l.deltaTime<250)return;return F&&T||!(f||T&&6&p||F&&24&p)?void 0:this.preventSrc(c)}c.preventDefault()},preventSrc:function(l){this.manager.session.prevented=!0,l.preventDefault()}},Le.prototype={defaults:{},set:function(l){return ie(this.options,l),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(l){if(M(l,"recognizeWith",this))return this;var c=this.simultaneous;return c[(l=Mt(l,this)).id]||(c[l.id]=l,l.recognizeWith(this)),this},dropRecognizeWith:function(l){return M(l,"dropRecognizeWith",this)||(l=Mt(l,this),delete this.simultaneous[l.id]),this},requireFailure:function(l){if(M(l,"requireFailure",this))return this;var c=this.requireFail;return-1===we(c,l=Mt(l,this))&&(c.push(l),l.requireFailure(this)),this},dropRequireFailure:function(l){if(M(l,"dropRequireFailure",this))return this;l=Mt(l,this);var c=we(this.requireFail,l);return c>-1&&this.requireFail.splice(c,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(l){return!!this.simultaneous[l.id]},emit:function(l){var c=this,p=this.state;function u(f){c.manager.emit(f,l)}p<8&&u(c.options.event+un(p)),u(c.options.event),l.additionalEvent&&u(l.additionalEvent),p>=8&&u(c.options.event+un(p))},tryEmit:function(l){if(this.canEmit())return this.emit(l);this.state=32},canEmit:function(){for(var l=0;l<this.requireFail.length;){if(!(33&this.requireFail[l].state))return!1;l++}return!0},recognize:function(l){var c=ie({},l);if(!ke(this.options.enable,[this,c]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(c),30&this.state&&this.tryEmit(c)},process:function(l){},getTouchAction:function(){},reset:function(){}},B(Se,Le,{defaults:{pointers:1},attrTest:function(l){var c=this.options.pointers;return 0===c||l.pointers.length===c},process:function(l){var c=this.state,p=l.eventType,u=6&c,f=this.attrTest(l);return u&&(8&p||!f)?16|c:u||f?4&p?8|c:2&c?4|c:2:32}}),B(qt,Se,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var l=this.options.direction,c=[];return 6&l&&c.push(bt),24&l&&c.push(tt),c},directionTest:function(l){var c=this.options,p=!0,u=l.distance,f=l.direction,T=l.deltaX,F=l.deltaY;return f&c.direction||(6&c.direction?(f=0===T?1:T<0?2:4,p=T!=this.pX,u=Math.abs(l.deltaX)):(f=0===F?1:F<0?8:16,p=F!=this.pY,u=Math.abs(l.deltaY))),l.direction=f,p&&u>c.threshold&&f&c.direction},attrTest:function(l){return Se.prototype.attrTest.call(this,l)&&(2&this.state||!(2&this.state)&&this.directionTest(l))},emit:function(l){this.pX=l.deltaX,this.pY=l.deltaY;var c=gn(l.direction);c&&(l.additionalEvent=this.options.event+c),this._super.emit.call(this,l)}}),B(ve,Se,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ye]},attrTest:function(l){return this._super.attrTest.call(this,l)&&(Math.abs(l.scale-1)>this.options.threshold||2&this.state)},emit:function(l){1!==l.scale&&(l.additionalEvent=this.options.event+(l.scale<1?"in":"out")),this._super.emit.call(this,l)}}),B(mn,Le,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(l){var c=this.options,p=l.pointers.length===c.pointers,u=l.distance<c.threshold,f=l.deltaTime>c.time;if(this._input=l,!u||!p||12&l.eventType&&!f)this.reset();else if(1&l.eventType)this.reset(),this._timer=se(function(){this.state=8,this.tryEmit()},c.time,this);else if(4&l.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(l){8===this.state&&(l&&4&l.eventType?this.manager.emit(this.options.event+"up",l):(this._input.timeStamp=A(),this.manager.emit(this.options.event,this._input)))}}),B(Kt,Se,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ye]},attrTest:function(l){return this._super.attrTest.call(this,l)&&(Math.abs(l.rotation)>this.options.threshold||2&this.state)}}),B($t,Se,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return qt.prototype.getTouchAction.call(this)},attrTest:function(l){var p,c=this.options.direction;return 30&c?p=l.overallVelocity:6&c?p=l.overallVelocityX:24&c&&(p=l.overallVelocityY),this._super.attrTest.call(this,l)&&c&l.offsetDirection&&l.distance>this.options.threshold&&l.maxPointers==this.options.pointers&&ne(p)>this.options.velocity&&4&l.eventType},emit:function(l){var c=gn(l.offsetDirection);c&&this.manager.emit(this.options.event+c,l),this.manager.emit(this.options.event,l)}}),B(ae,Le,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[et]},process:function(l){var c=this.options,p=l.pointers.length===c.pointers,u=l.distance<c.threshold,f=l.deltaTime<c.time;if(this.reset(),1&l.eventType&&0===this.count)return this.failTimeout();if(u&&f&&p){if(4!=l.eventType)return this.failTimeout();var T=!this.pTime||l.timeStamp-this.pTime<c.interval,F=!this.pCenter||at(this.pCenter,l.center)<c.posThreshold;if(this.pTime=l.timeStamp,this.pCenter=l.center,F&&T?this.count+=1:this.count=1,this._input=l,0==this.count%c.taps)return this.hasRequireFailures()?(this._timer=se(function(){this.state=8,this.tryEmit()},c.interval,this),2):8}return 32},failTimeout:function(){return this._timer=se(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),it.VERSION="2.0.7",it.defaults={domEvents:!1,touchAction:hn,enable:!0,inputTarget:null,inputClass:null,preset:[[Kt,{enable:!1}],[ve,{enable:!1},["rotate"]],[$t,{direction:6}],[qt,{direction:6},["swipe"]],[ae],[ae,{event:"doubletap",taps:2},["tap"]],[mn]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},jt.prototype={set:function(l){return ie(this.options,l),l.touchAction&&this.touchAction.update(),l.inputTarget&&(this.input.destroy(),this.input.target=l.inputTarget,this.input.init()),this},stop:function(l){this.session.stopped=l?2:1},recognize:function(l){var c=this.session;if(!c.stopped){this.touchAction.preventDefaults(l);var p,u=this.recognizers,f=c.curRecognizer;(!f||f&&8&f.state)&&(f=c.curRecognizer=null);for(var T=0;T<u.length;)p=u[T],2===c.stopped||f&&p!=f&&!p.canRecognizeWith(f)?p.reset():p.recognize(l),!f&&14&p.state&&(f=c.curRecognizer=p),T++}},get:function(l){if(l instanceof Le)return l;for(var c=this.recognizers,p=0;p<c.length;p++)if(c[p].options.event==l)return c[p];return null},add:function(l){if(M(l,"add",this))return this;var c=this.get(l.options.event);return c&&this.remove(c),this.recognizers.push(l),l.manager=this,this.touchAction.update(),l},remove:function(l){if(M(l,"remove",this))return this;if(l=this.get(l)){var c=this.recognizers,p=we(c,l);-1!==p&&(c.splice(p,1),this.touchAction.update())}return this},on:function(l,c){if(l!==I&&c!==I){var p=this.handlers;return Q(je(l),function(u){p[u]=p[u]||[],p[u].push(c)}),this}},off:function(l,c){if(l!==I){var p=this.handlers;return Q(je(l),function(u){c?p[u]&&p[u].splice(we(p[u],c),1):delete p[u]}),this}},emit:function(l,c){this.options.domEvents&&function _n(l,c){var p=Te.createEvent("Event");p.initEvent(l,!0,!0),p.gesture=c,c.target.dispatchEvent(p)}(l,c);var p=this.handlers[l]&&this.handlers[l].slice();if(p&&p.length){c.type=l,c.preventDefault=function(){c.srcEvent.preventDefault()};for(var u=0;u<p.length;)p[u](c),u++}},destroy:function(){this.element&&Xt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},ie(it,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:jt,Input:Z,TouchAction:Gt,TouchInput:R,MouseInput:Be,PointerEventInput:dt,TouchMouseInput:pt,SingleTouchInput:an,Recognizer:Le,AttrRecognizer:Se,Tap:ae,Pan:qt,Swipe:$t,Pinch:ve,Rotate:Kt,Press:mn,on:$e,off:Ze,each:Q,merge:Ue,extend:He,assign:ie,inherit:B,bindFn:Oe,prefixed:Re}),(typeof e<"u"?e:typeof self<"u"?self:{}).Hammer=it,(C=function(){return it}.call(he,x,he,Ke))!==I&&(Ke.exports=C)}(window,document)},8071:(Ke,he)=>{"use strict";he.j=void 0,he.j={suffixAgo:"fa",suffixFromNow:"da ora",seconds:"meno di un minuto",minute:"circa un minuto",minutes:"%d minuti",hour:"circa un'ora",hours:"circa %d ore",day:"un giorno",days:"%d giorni",month:"circa un mese",months:"%d mesi",year:"circa un anno",years:"%d anni"}}}]);