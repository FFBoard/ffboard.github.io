"use strict";(self.webpackChunkpages=self.webpackChunkpages||[]).push([[181],{8055:(P,E,i)=>{i.d(E,{s:()=>d});var g=i(5861),_=i(1378),e=i(5879),f=i(8413),p=i(4464),c=i(5661);const h=["modal"];let d=(()=>{var m;class v{constructor(r,u){this.scriptDevService=r,this.toastService=u,this.scriptName="",this.cachePendingEvent=new e.vpe,this.pendingRequest=!1}ngOnInit(){}open(){this.modalComponent.open()}deleteCache(){var r=this;return(0,g.Z)(function*(){r.pendingRequest?r.toastService.advice(_.V.REQUEST_PENDING):(r.pendingRequest=!0,r.cachePendingEvent.emit(r.scriptId),r.modalComponent.close("Cache button click"),void 0!==r.scriptId&&(yield r.scriptDevService.deleteScriptCache(r.scriptId))?r.toastService.show({content:`Cache dello script <strong>${r.scriptName}</strong> cancellata correttamente!`}):r.toastService.advice(_.V.GENERIC),r.pendingRequest=!1,r.cachePendingEvent.emit())})()}}return(m=v).\u0275fac=function(r){return new(r||m)(e.Y36(f.N),e.Y36(c.k))},m.\u0275cmp=e.Xpm({type:m,selectors:[["app-script-dev-cache"]],viewQuery:function(r,u){if(1&r&&e.Gf(h,5),2&r){let D;e.iGM(D=e.CRH())&&(u.modalComponent=D.first)}},inputs:{scriptName:"scriptName",scriptId:"scriptId"},outputs:{cachePendingEvent:"cachePendingEvent"},decls:33,vars:3,consts:[["title","Cache degli script",3,"disableCloseButton"],["modal",""],[1,"fst-italic"],[1,"text-uppercase","fw-bold","text-decoration-underline",3,"innerText"],["footer",""],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(r,u){if(1&r){const D=e.EpF();e.TgZ(0,"app-modal",0,1)(2,"p"),e._uU(3," Al fine di garantire che gli script vengano serviti rapidamente e per evitare carichi eccessivi sul server, i file javascript indicati nelle impostazioni degli script sono sottoposti a cache. In genere, ci\xf2 non rappresenta un problema e non viene notato n\xe9 dagli sviluppatori n\xe9 dagli utenti. "),e.qZA(),e.TgZ(4,"h6",2),e._uU(5,"Aggiornare la cache"),e.qZA(),e.TgZ(6,"p"),e._uU(7," Quando viene effettuata una modifica al file javascript, se questo \xe8 caricato sulle repositories di git appositamente pensate e dedicate a questo scopo, la cache dello script viene "),e.TgZ(8,"strong"),e._uU(9,"automaticamente"),e.qZA(),e._uU(10," aggiornata. Nonostante ci\xf2, in alcune limitate circostanze, ad esempio in caso di modifiche "),e.TgZ(11,"em"),e._uU(12,"breaking"),e.qZA(),e._uU(13," o essenziali per il funzionamento dello script stesso, pu\xf2 risultare necessario forzare l'aggiornamento della cache. Per fare ci\xf2, \xe8 sufficiente cliccare sul pulsante "),e.TgZ(14,"em"),e._uU(15,"Conferma"),e.qZA(),e._uU(16," nel footer, dopo essersi accertati che lo script selezionato sia effettivamente quello di cui si desidera aggiornare la cache."),e._UZ(17,"br")(18,"br"),e._uU(19," Lo strumento di aggiornamento della cache comporta un carico aggiuntivo sul server, per questo motivo dovrebbe essere "),e.TgZ(20,"strong"),e._uU(21,"usato con parsimonia."),e.qZA()(),e.TgZ(22,"h6",2),e._uU(23,"Riepologo script"),e.qZA(),e.TgZ(24,"p"),e._uU(25," Proseguendo, verr\xe0 aggiornata la cache dello script "),e._UZ(26,"span",3),e._uU(27,". "),e.qZA(),e.ynx(28,4),e.TgZ(29,"button",5),e.NdJ("click",function(){e.CHM(D);const s=e.MAs(1);return e.KtG(s.close("Close click"))}),e._uU(30,"Annulla"),e.qZA(),e.TgZ(31,"button",6),e.NdJ("click",function(){return u.deleteCache()}),e._uU(32,"Conferma"),e.qZA(),e.BQk(),e.qZA()}2&r&&(e.Q6J("disableCloseButton",!0),e.xp6(26),e.Q6J("innerText",u.scriptName),e.xp6(5),e.Q6J("disabled",u.pendingRequest))},dependencies:[p.z]}),v})()},9537:(P,E,i)=>{i.d(E,{U:()=>f});var g=i(6814),_=i(4610),e=i(5879);let f=(()=>{var p;class c{}return(p=c).\u0275fac=function(d){return new(d||p)},p.\u0275mod=e.oAB({type:p}),p.\u0275inj=e.cJS({imports:[g.ez,_.z]}),c})()},6988:(P,E,i)=>{i.d(E,{F:()=>D});var g=i(5861),_=i(1378),e=i(5879),f=i(4464),p=i(8413),c=i(5661),h=i(6814),d=i(6223);const m=["modal"];function v(t,s){if(1&t){const o=e.EpF();e.ynx(0),e.TgZ(1,"p"),e._uU(2," In alcune occasioni, pu\xf2 rendersi necessario procedere alla cancellazione di uno script, per sostituirlo interamente oppure perch\xe9 divenuto obsoleto a seguito dello sviluppo di altre funzioni analoghe. Per queste e altre situazioni, viene lasciata allo sviluppatore la possibilit\xe0 di rimuovere uno script creato. Una volta confermata, la cancellazione \xe8 "),e.TgZ(3,"strong"),e._uU(4,"definitiva e irreversibile"),e.qZA(),e._uU(5,". "),e.qZA(),e.TgZ(6,"h6",7),e._uU(7,"Cancellare uno script"),e.qZA(),e.TgZ(8,"p"),e._uU(9," La cancellazione di uno script comporta la sua "),e.TgZ(10,"strong"),e._uU(11,"completa rimozione"),e.qZA(),e._uU(12," dall'elenco degli script installabili e dai forum che lo hanno gi\xe0 inserito. L'azione non pu\xf2 essere annullata, occorre pertanto prestare particolare attenzione e procedere solo se si ha la "),e.TgZ(13,"strong"),e._uU(14,"certezza"),e.qZA(),e._uU(15," di voler eliminare lo script selezionato. "),e.qZA(),e.TgZ(16,"p",8)(17,"input",9),e.NdJ("ngModelChange",function(a){e.CHM(o);const l=e.oxw();return e.KtG(l.checkboxConfirm=a)}),e.qZA(),e.TgZ(18,"label",10),e._uU(19," Cancella definitivamente lo script "),e._UZ(20,"span",11),e._uU(21),e.qZA()(),e.BQk()}if(2&t){const o=e.oxw();e.xp6(17),e.Q6J("ngModel",o.checkboxConfirm),e.xp6(3),e.Q6J("innerText",o.scriptName),e.xp6(1),e.hij(" (ID: ",o.scriptId,") ")}}function C(t,s){if(1&t&&(e.TgZ(0,"div",12)(1,"p",13),e._uU(2," Cancellazione script "),e._UZ(3,"span",14),e.qZA(),e.TgZ(4,"p"),e._uU(5," Per terminare la cancellazione dello script "),e._UZ(6,"strong",15),e._uU(7),e.TgZ(8,"em"),e._uU(9,"Cancella"),e.qZA(),e._uU(10,". "),e.TgZ(11,"strong"),e._uU(12,"Non vi saranno altre richieste di conferma!"),e.qZA(),e._uU(13," Procedi solo se sei sicuro di voler rimuovere "),e.TgZ(14,"strong"),e._uU(15,"definitivamente"),e.qZA(),e._uU(16," lo script. "),e.qZA()()),2&t){const o=e.oxw();e.xp6(3),e.Q6J("innerText",o.scriptName),e.xp6(3),e.Q6J("innerText",o.scriptName),e.xp6(1),e.hij(" (ID: ",o.scriptId,") premi sul pulsante ")}}function r(t,s){if(1&t){const o=e.EpF();e.ynx(0),e.TgZ(1,"button",16),e.NdJ("click",function(){e.CHM(o);const a=e.oxw();return e.KtG(a.continueConfirm=a.checkboxConfirm)}),e._uU(2,"Procedi"),e.qZA(),e.BQk()}if(2&t){const o=e.oxw();e.xp6(1),e.Q6J("disabled",o.pendingRequest||!o.checkboxConfirm)}}function u(t,s){if(1&t){const o=e.EpF();e.TgZ(0,"button",16),e.NdJ("click",function(){e.CHM(o);const a=e.oxw();return e.KtG(a.deleteScript())}),e._uU(1,"Cancella"),e.qZA()}if(2&t){const o=e.oxw();e.Q6J("disabled",o.pendingRequest)}}let D=(()=>{var t;class s{constructor(n,a){this.toastService=n,this.scriptDevService=a,this.deletionPendingEvent=new e.vpe,this.deletionScriptEvent=new e.vpe,this.pendingRequest=!1,this.checkboxConfirm=!1,this.continueConfirm=!1}open(){this.reset(),this.modalComponent.open()}reset(){this.checkboxConfirm=!1,this.continueConfirm=!1}deleteScript(){var n=this;return(0,g.Z)(function*(){n.checkboxConfirm&&n.continueConfirm&&n.scriptId&&(n.pendingRequest?n.toastService.advice(_.V.REQUEST_PENDING):(n.pendingRequest=!0,n.deletionPendingEvent.emit(n.scriptId),n.modalComponent.close("Delete button click"),void 0!==n.scriptId&&(yield n.scriptDevService.deleteScript(n.scriptId))?(n.toastService.show({content:`Script <strong>${n.scriptName}</strong> cancellato correttamente!`}),n.deletionScriptEvent.emit(n.scriptId)):n.toastService.advice(_.V.GENERIC),n.pendingRequest=!1,n.deletionPendingEvent.emit()))})()}}return(t=s).\u0275fac=function(n){return new(n||t)(e.Y36(c.k),e.Y36(p.N))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-script-dev-deletion"]],viewQuery:function(n,a){if(1&n&&e.Gf(m,5),2&n){let l;e.iGM(l=e.CRH())&&(a.modalComponent=l.first)}},inputs:{scriptName:"scriptName",scriptId:"scriptId"},outputs:{deletionPendingEvent:"deletionPendingEvent",deletionScriptEvent:"deletionScriptEvent"},decls:11,vars:5,consts:[["title","Cancellazione script",3,"disableCloseButton"],["modal",""],[4,"ngIf","ngIfElse"],["advice",""],["footer",""],["type","button",1,"btn","btn-secondary",3,"click"],["deleteButton",""],[1,"fst-italic"],[1,"form-check"],["type","checkbox","id","remove-script",1,"form-check-input",3,"ngModel","ngModelChange"],["for","remove-script",1,"form-check-label"],[1,"text-uppercase","fw-bold","text-decoration-underline",3,"innerText"],[1,"alert","alert-danger","mb-0"],[1,"text-center","fw-bold"],[1,"text-uppercase",3,"innerText"],[3,"innerText"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(n,a){if(1&n){const l=e.EpF();e.TgZ(0,"app-modal",0,1),e.YNc(2,v,22,3,"ng-container",2),e.YNc(3,C,17,3,"ng-template",null,3,e.W1O),e.ynx(5,4),e.TgZ(6,"button",5),e.NdJ("click",function(){e.CHM(l);const S=e.MAs(1);return e.KtG(S.close("Close click"))}),e._uU(7,"Annulla"),e.qZA(),e.YNc(8,r,3,1,"ng-container",2),e.YNc(9,u,2,1,"ng-template",null,6,e.W1O),e.BQk(),e.qZA()}if(2&n){const l=e.MAs(4),M=e.MAs(10);e.Q6J("disableCloseButton",!0),e.xp6(2),e.Q6J("ngIf",!a.continueConfirm)("ngIfElse",l),e.xp6(6),e.Q6J("ngIf",!a.continueConfirm)("ngIfElse",M)}},dependencies:[h.O5,d.Wl,d.JJ,d.On,f.z]}),s})()},232:(P,E,i)=>{i.d(E,{a:()=>p});var g=i(6814),_=i(6223),e=i(4610),f=i(5879);let p=(()=>{var c;class h{}return(c=h).\u0275fac=function(m){return new(m||c)},c.\u0275mod=f.oAB({type:c}),c.\u0275inj=f.cJS({imports:[g.ez,_.u5,e.z]}),h})()},8413:(P,E,i)=>{i.d(E,{N:()=>C});var g=i(1413),_=i(5861),e=i(8784),f=i(1410),p=i(3912),c=i(3040),h=i(6245),d=i(8418),m=i(5362),v=i(5879);let C=(()=>{var r;class u{constructor(t,s,o,n,a){this.graphqlService=t,this.globalsService=s,this.forumService=o,this.userService=n,this.scriptListService=a,this.ffuid="",this.cache={},this.statsDetailsCache={},this.profileSubscription=this.globalsService.profileObservable.subscribe(l=>{this.ffuid=(null==l?void 0:l.user.ffuid)||""})}getStats(){var t=this;return(0,_.Z)(function*(){if(t.cache[t.ffuid])return t.cache[t.ffuid];const s=(yield t.graphqlService.query({query:c.n8})).data;return t.cache[t.ffuid]=s.scriptStats})()}deleteScriptCache(t){var s=this;return(0,_.Z)(function*(){return(yield s.graphqlService.mutate({mutation:c.xt,variables:{scriptId:t}})).data.delCache})()}getScriptStatsDetails(t){var s=this;return(0,_.Z)(function*(){let o=`${s.ffuid}-${t.script.id}`;if(s.statsDetailsCache.hasOwnProperty(o))return s.statsDetailsCache[o];const[n,a]=yield Promise.all([t.stats.users.length>0?s.userService.getDetailsFromUids(t.stats.users):[],t.stats.forums.length>0?s.forumService.getDomains(t.stats.forums):[]]);return s.statsDetailsCache[o]={users:n,forums:a}})()}upsertScript(t,s){var o=this;return(0,_.Z)(function*(){const n=(yield o.graphqlService.mutate({mutation:c.Ry,variables:(0,g.Z)((0,g.Z)({},t),{},{scriptId:s})})).data.scriptUpsert;return n&&o.scriptListService.clearCache(),n})()}deleteScript(t){var s=this;return(0,_.Z)(function*(){const o=(yield s.graphqlService.mutate({mutation:c.HF,variables:{scriptId:t}})).data.delScript;return o&&s.scriptListService.clearCache(),o})()}updateScriptPermissions(t){var s=this;return(0,_.Z)(function*(){if(0===t.length)return!0;const o=m.QF(t.map((a,l)=>({operation:{name:"scriptPermission",alias:`scriptPermission${l}`},variables:{[`scriptId${l}`]:{name:"scriptId",type:"String!",value:a.scriptId},[`targetId${l}`]:{name:"targetId",type:"String!",value:a.targetId},[`action${l}`]:{name:"action",type:"ScripPermissionActionEnum!",value:a.action},[`level${l}`]:{name:"level",type:"ScripPermissionEnum!",value:a.level}}}))),n=(yield s.graphqlService.mutate({mutation:o.query,variables:o.variables})).data;return Object.values(n).every(Boolean)})()}ngOnDestroy(){this.profileSubscription.unsubscribe()}}return(r=u).\u0275fac=function(t){return new(t||r)(v.LFG(p.Jk),v.LFG(f.d),v.LFG(e._),v.LFG(d.K),v.LFG(h.o))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),u})()}}]);