"use strict";(self.webpackChunkpages=self.webpackChunkpages||[]).push([[472],{6472:(M,T,l)=>{l.r(T),l.d(T,{AdminPanelModule:()=>te});var e=l(9212),g=l(3285),f=l(5861),C=l(1413),u=l(2721);let S=(()=>{var o;class c{constructor(n){this.graphqlService=n,this.apolloIntrospectionRequestTime=0}get isApolloIntrospectionEnabled(){return Date.now()<this.apolloIntrospectionRequestTime+3e4}setApolloIntrospection(n){var t=this;return(0,f.Z)(function*(){const s=(yield t.graphqlService.mutate({mutation:"\nmutation ApolloIntrospectionStatus($status: Boolean!) {\n    apolloIntrospectionStatus(status: $status)\n}",variables:{status:n}})).data.apolloIntrospectionStatus;return s&&(t.apolloIntrospectionRequestTime=n?Date.now():0),s})()}}return(o=c).\u0275fac=function(n){return new(n||o)(e.LFG(u.Jk))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),c})();var a=l(1378),d=l(1410),m=l(4020),i=l(6814),r=l(5661),h=l(342),b=l(7429),y=l(8940),A=l(6223),Z=l(8726);const q=["app-admin-panel-graphql",""];function F(o,c){1&o&&e._uU(0," Token copiato! ")}function U(o,c){1&o&&e._uU(0," Copia il token ")}function I(o,c){if(1&o&&e.YNc(0,F,1,0)(1,U,1,0),2&o){const p=e.oxw();e.um2(0,p.tokenCopied||p.touchDevice?0:1)}}let R=(()=>{var o;class c{constructor(n,t,s,v,_,ne){var E;this.graphqlService=n,this.endpointsService=t,this.titleCasePipe=s,this.globalsService=v,this.toastService=_,this.adminPanelService=ne,this.touchDevice=m.b1,this.graphqlRequestLogger={enabled:!1,list:[]},this.localFormSchema={},this.localFormModel={},this.pendingRequest=!1,this.apollo={url:"",instrospectionEnabled:!1},this.tokenCopied=!1,this.localFormType=u.jQ.GRAPHQL,this.graphqlToken=(null===(E=this.graphqlService.params)||void 0===E?void 0:E.token)||"",this.graphqlRequestLogger.enabled=this.graphqlService.loggerEnabled,this.graphqlRequestLogger.list=this.graphqlService.requestLogs;const oe=(0,u.EF)([10,10]);this.popperOptions=ie=>(0,u.F_)([oe],ie)}ngOnInit(){this.createLocalFormSchema(),this.setApolloUrl()}setApolloUrl(){this.apollo=(0,C.Z)((0,C.Z)({},this.apollo),{},{url:"https://studio.apollographql.com/sandbox/explorer?endpoint="+"".concat(this.graphqlService.urlHttp,"&headers=").concat(JSON.stringify({Authorization:this.graphqlToken}))})}createLocalFormSchema(){const n={type:"object",properties:{localEnv:{type:"object",description:"L'url base per le richieste locali \xe8 [i]".concat(this.endpointsService.getBaseLocalUrl(),"[/i]"),oneOf:Object.entries(this.endpointsService.getAllLocalPaths()).map(t=>({title:this.titleCasePipe.transform(t[0]),widget:{formlyConfig:{props:{fieldsetTemplate:!0}}},properties:{[t[0]]:{default:t[0],widget:{formlyConfig:{props:{type:"hidden"}}}},endpointType:{default:t[0],widget:{formlyConfig:{props:{type:"hidden"}}}},paths:{type:"object",properties:Object.fromEntries(Object.entries(t[1]).map(s=>[s[0],{type:"string",title:"Path per le richieste [i]".concat(s[0],"[/i]:"),default:s[1]}]))},enabled:{type:"checkbox",title:"Utilizza l'ambiente locale per queste richieste",default:this.endpointsService.getLocalEnv(t[0])}}}))}}};this.localFormSchema=(0,C.Z)({},n)}onLocalEnvFormChange(){const n=this.localFormModel.localEnv.endpointType;n!==this.localFormType?(this.localFormType=this.localFormModel.localEnv.endpointType,this.localFormModel.localEnv.enabled=this.endpointsService.getLocalEnv(this.localFormType),this.localFormModel.localEnv.paths=(0,C.Z)({},this.endpointsService.getLocalPaths(this.localFormType)),this.localFormModel=(0,C.Z)({},this.localFormModel)):this.localFormModel.localEnv.enabled!==this.endpointsService.getLocalEnv(n)&&this.onLocalEnvFormSubmit()}onLocalEnvFormSubmit(){const n=this.localFormModel.localEnv;this.updateLocalEnv(n.endpointType,n.enabled,n.paths)&&(this.localFormModel.localEnv.enabled=!0,this.localFormModel=(0,C.Z)({},this.localFormModel)),n.endpointType===u.jQ.GRAPHQL&&(this.saveAdminSettings(),this.setApolloUrl()),this.toastService.show({content:"Impostazioni dell'<strong>ambiente locale</strong> aggionate!",delay:5e3})}updateLocalEnv(n,t,s){return t!==this.endpointsService.getLocalEnv(n)?(this.endpointsService.setLocalEnv(n,t),!1):(this.endpointsService.setLocalEnv(n,!0),this.endpointsService.setLocalPaths(n,s),!0)}saveAdminSettings(){this.graphqlService.loggerEnabled=this.graphqlRequestLogger.enabled,this.globalsService.adminSettings=(0,C.Z)((0,C.Z)({},this.globalsService.adminSettings||{}),{graphql:{useLocalEnv:this.endpointsService.getLocalEnv(u.jQ.GRAPHQL),urlHttpLocalEnv:this.endpointsService.getLocalPaths(u.jQ.GRAPHQL)[u.PB.HTTP],urlWsLocalEnv:this.endpointsService.getLocalPaths(u.jQ.GRAPHQL)[u.PB.WS],loggerEnabled:this.graphqlRequestLogger.enabled}})}setApolloIntrospection(){var n=this;return(0,f.Z)(function*(){n.pendingRequest?n.toastService.advice(a.V.REQUEST_PENDING):n.apollo.instrospectionEnabled&&n.adminPanelService.isApolloIntrospectionEnabled?n.toastService.show({content:"L'introspection di Apollo \xe8 <strong>gi\xe0 attiva</strong>!",level:a.m.ERROR}):(n.pendingRequest=!0,(yield n.adminPanelService.setApolloIntrospection(n.apollo.instrospectionEnabled))?n.toastService.show({content:"Introspection di Apollo\n                <strong>".concat(n.apollo.instrospectionEnabled?"abilitata":"disabilitata","</strong> con successo!")}):n.toastService.advice(a.V.GENERIC),n.pendingRequest=!1)})()}}return(o=c).\u0275fac=function(n){return new(n||o)(e.Y36(u.Jk),e.Y36(u.oz),e.Y36(i.rS),e.Y36(d.d),e.Y36(r.k),e.Y36(S))},o.\u0275cmp=e.Xpm({type:o,selectors:[["","app-admin-panel-graphql",""]],features:[e._Bn([i.rS])],attrs:q,decls:40,vars:14,consts:[[1,"h6","px-md-1","container-fluid"],[1,"flat-container","p-3"],[1,"mb-4","d-flex","align-items-end"],[1,"flex-grow-1","me-3"],["for","profile-token",1,"fs-sm"],["type","text","id","profile-token","disabled","",1,"form-control",3,"value"],["placement","top-end",1,"d-block","ms-auto","btn","btn-primary",3,"cdkCopyToClipboard","ngbTooltip","popperOptions","triggers","click","hidden"],[1,"material-icons","d-block"],["tooltipContent",""],[1,"px-3","pt-2","rounded","mb-4","position-relative"],[1,"legend-reset","fs-reset","px-2","mb-0"],[1,"position-absolute","px-3","bg-white","local-form-submit"],[1,"btn","btn-success","d-flex","align-items-center",3,"click"],[1,"material-icons-outlined"],["app-custom-form","",3,"schema","model","enableModelChangeEvent","modelChangeEvent","submitEvent"],["localEnvForm",""],[1,"px-3","pb-3","rounded","mb-4","pt-2"],[1,"form-check","form-switch","mb-3"],["type","checkbox","role","switch","id","enable-logs",1,"form-check-input",3,"ngModel","ngModelChange"],["for","enable-logs",1,"form-check-label"],[1,"logs-wrapper"],[3,"object"],[1,"form-check","form-switch","mb-0"],["type","checkbox","role","switch","id","apollo-introspection",1,"form-check-input",3,"disabled","ngModel","ngModelChange"],["for","apollo-introspection",1,"form-check-label"],[1,"d-flex","justify-content-end"],[1,"d-block"],["target","_blank",3,"href"]],template:function(n,t){if(1&n){const s=e.EpF();e.TgZ(0,"div",0),e._uU(1,"Endpoints"),e.qZA(),e.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"label",4),e._uU(6,"Token attuale:"),e.qZA(),e._UZ(7,"input",5),e.qZA(),e.TgZ(8,"button",6),e.NdJ("click",function(){return t.tokenCopied=!0})("hidden",function(){return t.tokenCopied=!1}),e.TgZ(9,"span",7),e._uU(10,"content_copy"),e.qZA()(),e.YNc(11,I,2,1,"ng-template",null,8,e.W1O),e.qZA(),e.TgZ(13,"fieldset",9)(14,"legend",10),e._uU(15,"Ambiente locale"),e.qZA(),e.TgZ(16,"div",11)(17,"button",12),e.NdJ("click",function(){e.CHM(s);const _=e.MAs(21);return e.KtG(_.submit())}),e.TgZ(18,"span",13),e._uU(19,"check_circle"),e.qZA()()(),e.TgZ(20,"div",14,15),e.NdJ("modelChangeEvent",function(){return t.onLocalEnvFormChange()})("submitEvent",function(){return t.onLocalEnvFormSubmit()}),e.qZA()(),e.TgZ(22,"fieldset",16)(23,"legend",10),e._uU(24),e.qZA(),e.TgZ(25,"div",17)(26,"input",18),e.NdJ("ngModelChange",function(_){return t.graphqlRequestLogger.enabled=_})("ngModelChange",function(){return t.saveAdminSettings()}),e.qZA(),e.TgZ(27,"label",19),e._uU(28,"Abilita il salvataggio dei log"),e.qZA()(),e.TgZ(29,"div",20),e._UZ(30,"app-custom-pre",21),e.qZA()(),e.TgZ(31,"div",22)(32,"input",23),e.NdJ("ngModelChange",function(_){return t.apollo.instrospectionEnabled=_})("ngModelChange",function(){return t.setApolloIntrospection()}),e.qZA(),e.TgZ(33,"label",24),e._uU(34,"Abilita l'introspection di Apollo"),e.qZA()(),e.TgZ(35,"div",25)(36,"small",26),e._uU(37,"Vai alla "),e.TgZ(38,"a",27),e._uU(39,"sandbox"),e.qZA()()()()}if(2&n){const s=e.MAs(12);e.xp6(7),e.Q6J("value",t.graphqlToken),e.xp6(),e.Q6J("cdkCopyToClipboard",t.graphqlToken)("ngbTooltip",s)("popperOptions",t.popperOptions)("triggers",t.touchDevice?"click":"hover"),e.xp6(12),e.Q6J("schema",t.localFormSchema)("model",t.localFormModel)("enableModelChangeEvent",!0),e.xp6(4),e.hij(" Log delle richieste (#",t.graphqlRequestLogger.list.length,") "),e.xp6(2),e.Q6J("ngModel",t.graphqlRequestLogger.enabled),e.xp6(4),e.Q6J("object",t.graphqlRequestLogger.list),e.xp6(2),e.Q6J("disabled",t.pendingRequest)("ngModel",t.apollo.instrospectionEnabled),e.xp6(6),e.Q6J("href",t.apollo.url,e.LSH)}},dependencies:[h.i3,b.d,y.s,A.Wl,A.JJ,A.On,Z._L],styles:["fieldset[_ngcontent-%COMP%]{border:1px dashed var(--bs-gray-500)}.logs-wrapper[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto}.local-form-submit[_ngcontent-%COMP%]{top:-.75rem;right:1rem;transform:translateY(-50%)}"]}),c})();var k=l(8055),N=l(6988),J=l(6245),O=l(7165),L=l(4190);const G=["cacheModal"],Q=["deletionModal"];function D(o,c){if(1&o&&e._UZ(0,"option",15),2&o){const p=c.$implicit;e.Q6J("ngValue",p.id)("innerText",p.name)}}const x=o=>({disabled:o}),B=(o,c)=>[o,c];let j=(()=>{var o;class c{constructor(n,t){this.scriptListService=n,this.toastService=t,this.scriptList=[],this.scriptSettingsPath=O.B2.SCRIPT_DEV_SETTINGS,this.pendingRequest=!1}ngOnInit(){var n=this;return(0,f.Z)(function*(){n.scriptList=(yield n.scriptListService.getAllScripts()).sort((t,s)=>t.name>s.name?1:s.name>t.name?-1:0)})()}findScriptName(n){var t;return(null===(t=this.scriptList.find(s=>s.id===n))||void 0===t?void 0:t.name)||""}openCacheModal(){this.pendingRequest?this.toastService.advice(a.V.REQUEST_PENDING):(this.cacheScriptId=this.selectedScriptId,this.cacheModalRef.open())}openDeletionModal(){this.pendingRequest?this.toastService.advice(a.V.REQUEST_PENDING):(this.deletionScriptId=this.selectedScriptId,this.deletionModalRef.open())}setPendingRequest(n){this.pendingRequest=!!n}}return(o=c).\u0275fac=function(n){return new(n||o)(e.Y36(J.o),e.Y36(r.k))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-admin-panel-script"]],viewQuery:function(n,t){if(1&n&&(e.Gf(G,5),e.Gf(Q,5)),2&n){let s;e.iGM(s=e.CRH())&&(t.cacheModalRef=s.first),e.iGM(s=e.CRH())&&(t.deletionModalRef=s.first)}},decls:17,vars:20,consts:[[1,"h6","px-md-1","container-fluid"],[1,"flat-container","p-3"],[1,"mb-2"],["for","script-select",1,"fs-sm"],["id","script-select",1,"form-select",3,"disabled","ngModel","ngModelChange"],["selected","",3,"ngValue"],[3,"ngValue","innerText",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","flex-wrap"],[1,"btn","btn-indigo","mx-2","mt-3",3,"disabled","innerText","click"],[1,"btn","btn-primary","mx-2","mt-3",3,"ngClass","innerText","routerLink"],[1,"btn","btn-danger","mx-2","mt-3",3,"disabled","innerText","click"],[3,"scriptId","scriptName","cachePendingEvent"],["cacheModal",""],[3,"scriptName","scriptId","deletionPendingEvent"],["deletionModal",""],[3,"ngValue","innerText"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e._uU(1,"Script"),e.qZA(),e.TgZ(2,"div",1)(3,"div",2)(4,"label",3),e._uU(5,"Seleziona lo script da amministrare:"),e.qZA(),e.TgZ(6,"select",4),e.NdJ("ngModelChange",function(v){return t.selectedScriptId=v}),e._UZ(7,"option",5),e.YNc(8,D,1,2,"option",6),e.qZA()(),e.TgZ(9,"div",7)(10,"button",8),e.NdJ("click",function(){return t.openCacheModal()}),e.qZA(),e._UZ(11,"a",9),e.TgZ(12,"button",10),e.NdJ("click",function(){return t.openDeletionModal()}),e.qZA()()(),e.TgZ(13,"app-script-dev-cache",11,12),e.NdJ("cachePendingEvent",function(v){return t.setPendingRequest(v)}),e.qZA(),e.TgZ(15,"app-script-dev-deletion",13,14),e.NdJ("deletionPendingEvent",function(v){return t.setPendingRequest(v)}),e.qZA()),2&n&&(e.xp6(6),e.Q6J("disabled",0===t.scriptList.length)("ngModel",t.selectedScriptId),e.xp6(),e.Q6J("ngValue",void 0),e.xp6(),e.Q6J("ngForOf",t.scriptList),e.xp6(2),e.Q6J("disabled",!t.selectedScriptId||t.pendingRequest)("innerText","Cache"),e.xp6(),e.Q6J("ngClass",e.VKq(15,x,!t.selectedScriptId))("innerText","Impostazioni")("routerLink",e.WLB(17,B,t.scriptSettingsPath,t.selectedScriptId)),e.xp6(),e.Q6J("disabled",!t.selectedScriptId||t.pendingRequest)("innerText","Cancella"),e.xp6(),e.Q6J("scriptId",t.cacheScriptId)("scriptName",t.cacheScriptId?t.findScriptName(t.cacheScriptId):""),e.xp6(2),e.Q6J("scriptName",t.deletionScriptId?t.findScriptName(t.deletionScriptId):"")("scriptId",t.deletionScriptId))},dependencies:[i.mk,i.sg,A.YN,A.Kr,A.EJ,A.JJ,A.On,L.rH,k.s,N.F]}),c})();var Y=l(6779),$=l(8418);let H=(()=>{var o;class c{constructor(){this.userService=(0,e.f3M)($.K),this.loginAsService=(0,e.f3M)(Y.D),this.globlasService=(0,e.f3M)(d.d),this.loading=!1,this.schema={type:"object",properties:{loginAs:{type:"forum-users",title:"Utente con cui accedere:",widget:{formlyConfig:{props:{multiple:!1,selectDomain:!0}}}}}},this.model={loginAs:this.loginAsService.profile?[this.loginAsService.profile.ffuid]:this.loginAsService.lastSelectedFFUid?[this.loginAsService.lastSelectedFFUid]:[]}}setSelectedUser(){var n=this;return(0,f.Z)(function*(){n.loginAsService.lastSelectedFFUid=n.model.loginAs[0],n.loginAsService.lastSelectedFFUid||n.logout()})()}get canLogin(){var n,t;return void 0!==this.loginAsService.lastSelectedFFUid&&!this.loading&&(null===(n=this.loginAsService.profile)||void 0===n?void 0:n.ffuid)!==this.loginAsService.lastSelectedFFUid&&(null===(t=this.globlasService.credentials)||void 0===t?void 0:t.user.ffuid)!==this.loginAsService.lastSelectedFFUid}get canLogout(){return this.loginAsService.isActive&&!this.loading}login(){var n=this;return(0,f.Z)(function*(){if(!n.canLogin)return;n.loading=!0;const t=yield n.userService.getDetailsFromUids([n.loginAsService.lastSelectedFFUid]);n.loginAsService.connect({ffuid:t[0].uid,nickname:t[0].nickname}),n.loading=!1})()}logout(){this.canLogout&&this.loginAsService.disconnect()}}return(o=c).\u0275fac=function(n){return new(n||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-admin-panel-login-as"]],decls:10,vars:5,consts:[[1,"h6","px-md-1","container-fluid"],[1,"flat-container","p-3"],["app-custom-form","",3,"schema","model","enableModelChangeEvent","modelChangeEvent"],["userForm",""],[1,"d-flex","justify-content-end"],[1,"btn","btn-primary",3,"disabled","click"],[1,"btn","btn-danger","ms-2",3,"disabled","click"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e._uU(1,"Login come utente"),e.qZA(),e.TgZ(2,"div",1)(3,"div",2,3),e.NdJ("modelChangeEvent",function(){return t.setSelectedUser()}),e.qZA(),e.TgZ(5,"div",4)(6,"button",5),e.NdJ("click",function(){return t.login()}),e._uU(7,"Login"),e.qZA(),e.TgZ(8,"button",6),e.NdJ("click",function(){return t.logout()}),e._uU(9,"Disconnetti"),e.qZA()()()),2&n&&(e.xp6(3),e.Q6J("schema",t.schema)("model",t.model)("enableModelChangeEvent",!0),e.xp6(3),e.Q6J("disabled",!t.canLogin),e.xp6(2),e.Q6J("disabled",!t.canLogout))},dependencies:[b.d],encapsulation:2}),c})(),z=(()=>{var o;class c{}return(o=c).\u0275fac=function(n){return new(n||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],decls:6,vars:0,consts:[["pageTitle","Pannello di amministrazione"],[1,"d-grid","page-container"],["app-admin-panel-graphql",""],[1,"d-grid","page-group"]],template:function(n,t){1&n&&(e._UZ(0,"app-breadcrumb",0),e.TgZ(1,"div",1),e._UZ(2,"div",2),e.TgZ(3,"div",3),e._UZ(4,"app-admin-panel-script")(5,"app-admin-panel-login-as"),e.qZA()())},dependencies:[g.L,R,j,H],styles:[".page-container[_ngcontent-%COMP%], .page-group[_ngcontent-%COMP%]{gap:1rem}.page-group[_ngcontent-%COMP%]{grid-template-rows:auto 1fr}@media (min-width: 960px){.page-container[_ngcontent-%COMP%], .page-group[_ngcontent-%COMP%]{gap:1.5rem}}@media (min-width: 1500px){.page-container[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}}"]}),c})();var V=l(9090),K=l(6687),w=l(1568),W=l(9537),X=l(232);const ee=[{path:"",component:z}];let te=(()=>{var o;class c{}return(o=c).\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[V.w,h.Iq,i.ez,K.I,w.b,A.u5,L.Bz.forChild(ee),W.U,X.a]}),c})()},8418:(M,T,l)=>{l.d(T,{K:()=>P});var e=l(5861),g=l(1410),f=l(2721),u=l(9212);let P=(()=>{var S;class a extends f.KD{constructor(m,i,r){super(m,r),this.graphqlService=m,this.globalsService=i,this.requestsService=r,this.searchByNameCache={}}searchUserByName(m,i){var r=this;return(0,e.Z)(function*(){var h;i||(i=(0,f.vV)((null===(h=r.globalsService.credentials)||void 0===h?void 0:h.site.domain)||f.ig.FORUMFREE));const b="".concat(i).concat(m);if((0,f.o8)(r.searchByNameCache,b))return r.searchByNameCache[b];const y=yield r.graphqlService.query({query:"\nquery UserSearchByName($name: String!, $cid: String) {\n    userSearchByName(name: $name, cid: $cid) {\n        uid\n        nickname\n        avatar\n    }\n}",variables:{name:m,cid:i}});return r.searchByNameCache[b]=y.data.userSearchByName})()}}return(S=a).\u0275fac=function(m){return new(m||S)(u.LFG(f.Jk),u.LFG(g.d),u.LFG(f.r8))},S.\u0275prov=u.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),a})()},342:(M,T,l)=>{l.d(T,{Iq:()=>S,i3:()=>P});var e=l(6814),g=l(9212);class f{constructor(d,m){this._document=m;const i=this._textarea=this._document.createElement("textarea"),r=i.style;r.position="fixed",r.top=r.opacity="0",r.left="-999em",i.setAttribute("aria-hidden","true"),i.value=d,i.readOnly=!0,(this._document.fullscreenElement||this._document.body).appendChild(i)}copy(){const d=this._textarea;let m=!1;try{if(d){const i=this._document.activeElement;d.select(),d.setSelectionRange(0,d.value.length),m=this._document.execCommand("copy"),i&&i.focus()}}catch(i){}return m}destroy(){const d=this._textarea;d&&(d.remove(),this._textarea=void 0)}}let C=(()=>{var a;class d{constructor(i){this._document=i}copy(i){const r=this.beginCopy(i),h=r.copy();return r.destroy(),h}beginCopy(i){return new f(i,this._document)}}return(a=d).\u0275fac=function(i){return new(i||a)(g.LFG(e.K0))},a.\u0275prov=g.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),d})();const u=new g.OlP("CDK_COPY_TO_CLIPBOARD_CONFIG");let P=(()=>{var a;class d{constructor(i,r,h){this._clipboard=i,this._ngZone=r,this.text="",this.attempts=1,this.copied=new g.vpe,this._pending=new Set,h&&null!=h.attempts&&(this.attempts=h.attempts)}copy(i=this.attempts){if(i>1){let r=i;const h=this._clipboard.beginCopy(this.text);this._pending.add(h);const b=()=>{const y=h.copy();y||! --r||this._destroyed?(this._currentTimeout=null,this._pending.delete(h),h.destroy(),this.copied.emit(y)):this._currentTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(b,1))};b()}else this.copied.emit(this._clipboard.copy(this.text))}ngOnDestroy(){this._currentTimeout&&clearTimeout(this._currentTimeout),this._pending.forEach(i=>i.destroy()),this._pending.clear(),this._destroyed=!0}}return(a=d).\u0275fac=function(i){return new(i||a)(g.Y36(C),g.Y36(g.R0b),g.Y36(u,8))},a.\u0275dir=g.lG2({type:a,selectors:[["","cdkCopyToClipboard",""]],hostBindings:function(i,r){1&i&&g.NdJ("click",function(){return r.copy()})},inputs:{text:[g.lbL.None,"cdkCopyToClipboard","text"],attempts:[g.lbL.None,"cdkCopyToClipboardAttempts","attempts"]},outputs:{copied:"cdkCopyToClipboardCopied"},standalone:!0}),d})(),S=(()=>{var a;class d{}return(a=d).\u0275fac=function(i){return new(i||a)},a.\u0275mod=g.oAB({type:a}),a.\u0275inj=g.cJS({}),d})()}}]);