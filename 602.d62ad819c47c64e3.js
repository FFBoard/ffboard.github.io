"use strict";(self.webpackChunkboard=self.webpackChunkboard||[]).push([[602],{7216:(C,h,n)=>{n.d(h,{s:()=>_});var u=n(5861),l=n(7876),e=n(5e3),m=n(4252),c=n(8882),d=n(4685);const a=["modal"];let _=(()=>{class p{constructor(t,r){this.scriptDevService=t,this.toastService=r,this.scriptName="",this.scriptId=0,this.cachePendingEvent=new e.vpe,this.pendingRequest=!1}ngOnInit(){}open(){this.modalComponent.open()}deleteCache(){var t=this;return(0,u.Z)(function*(){t.pendingRequest?t.toastService.advice(l.V.REQUEST_PENDING):(t.pendingRequest=!0,t.cachePendingEvent.emit(t.scriptId),t.modalComponent.close("Cache button click"),t.scriptId>0&&(yield t.scriptDevService.deleteScriptCache(t.scriptId))?t.toastService.show({content:`Cache dello script <strong>${t.scriptName}</strong> cancellata correttamente!`}):t.toastService.advice(l.V.GENERIC),t.pendingRequest=!1,t.cachePendingEvent.emit(0))})()}}return p.\u0275fac=function(t){return new(t||p)(e.Y36(m.N),e.Y36(c.k))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-script-dev-cache"]],viewQuery:function(t,r){if(1&t&&e.Gf(a,5),2&t){let s;e.iGM(s=e.CRH())&&(r.modalComponent=s.first)}},inputs:{scriptName:"scriptName",scriptId:"scriptId"},outputs:{cachePendingEvent:"cachePendingEvent"},decls:35,vars:4,consts:[["title","Cache degli script",3,"disableCloseButton"],["modal",""],[1,"fst-italic"],[1,"text-uppercase","fw-bold","text-decoration-underline",3,"innerText"],[3,"innerText"],["footer",""],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(t,r){if(1&t){const s=e.EpF();e.TgZ(0,"app-modal",0,1)(2,"p"),e._uU(3," Al fine di garantire che gli script vengano serviti rapidamente e per evitare carichi eccessivi sul server, i file javascript indicati nelle impostazioni degli script sono sottoposti a cache. In genere, ci\xf2 non rappresenta un problema e non viene notato n\xe9 dagli sviluppatori n\xe9 dagli utenti. "),e.qZA(),e.TgZ(4,"h6",2),e._uU(5,"Aggiornare la cache"),e.qZA(),e.TgZ(6,"p"),e._uU(7," Quando viene effettuata una modifica al file javascript, se questo \xe8 caricato sulle repositories di git appositamente pensate e dedicate a questo scopo, la cache dello script viene "),e.TgZ(8,"strong"),e._uU(9,"automaticamente"),e.qZA(),e._uU(10," aggiornata. Nonostante ci\xf2, in alcune limitate circostanze, ad esempio in caso di modifiche "),e.TgZ(11,"em"),e._uU(12,"breaking"),e.qZA(),e._uU(13," o essenziali per il funzionamento dello script stesso, pu\xf2 risultare necessario forzare l'aggiornamento della cache. Per fare ci\xf2, \xe8 sufficiente cliccare sul pulsante "),e.TgZ(14,"em"),e._uU(15,"Conferma"),e.qZA(),e._uU(16," nel footer, dopo essersi accertati che lo script selezionato sia effettivamente quello di cui si desidera aggiornare la cache."),e._UZ(17,"br")(18,"br"),e._uU(19," Lo strumento di aggiornamento della cache comporta un carico aggiuntivo sul server, per questo motivo dovrebbe essere "),e.TgZ(20,"strong"),e._uU(21,"usato con parsimonia."),e.qZA()(),e.TgZ(22,"h6",2),e._uU(23,"Riepologo script"),e.qZA(),e.TgZ(24,"p"),e._uU(25," Proseguendo, verr\xe0 aggiornata la cache dello script "),e._UZ(26,"span",3),e._uU(27," (ID: "),e._UZ(28,"span",4),e._uU(29,"). "),e.qZA(),e.ynx(30,5),e.TgZ(31,"button",6),e.NdJ("click",function(){return e.CHM(s),e.MAs(1).close("Close click")}),e._uU(32,"Annulla"),e.qZA(),e.TgZ(33,"button",7),e.NdJ("click",function(){return r.deleteCache()}),e._uU(34,"Conferma"),e.qZA(),e.BQk(),e.qZA()}2&t&&(e.Q6J("disableCloseButton",!0),e.xp6(26),e.Q6J("innerText",r.scriptName),e.xp6(2),e.Q6J("innerText",r.scriptId),e.xp6(5),e.Q6J("disabled",r.pendingRequest))},directives:[d.z],styles:[""]}),p})()},4226:(C,h,n)=>{n.d(h,{U:()=>m});var u=n(9808),l=n(2792),e=n(5e3);let m=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[[u.ez,l.z]]}),c})()},5056:(C,h,n)=>{n.d(h,{F:()=>g});var u=n(5861),l=n(7876),e=n(5e3),m=n(8882),c=n(4252),d=n(4685),a=n(9808),_=n(2382);const p=["modal"];function E(o,f){if(1&o){const i=e.EpF();e.ynx(0),e.TgZ(1,"p"),e._uU(2," In alcune occasioni, pu\xf2 rendersi necessario procedere alla cancellazione di uno script, per sostituirlo interamente oppure perch\xe9 divenuto obsoleto a seguito dello sviluppo di altre funzioni analoghe. Per queste e altre situazioni, viene lasciata allo sviluppatore la possibilit\xe0 di rimuovere uno script creato. Una volta confermata, la cancellazione \xe8 "),e.TgZ(3,"strong"),e._uU(4,"definitiva e irreversibile"),e.qZA(),e._uU(5,". "),e.qZA(),e.TgZ(6,"h6",7),e._uU(7,"Cancellare uno script"),e.qZA(),e.TgZ(8,"p"),e._uU(9," La cancellazione di uno script comporta la sua "),e.TgZ(10,"strong"),e._uU(11,"completa rimozione"),e.qZA(),e._uU(12," dall'elenco degli script installabili e dai forum che lo hanno gi\xe0 inserito. L'azione non pu\xf2 essere annullata, occorre pertanto prestare particolare attenzione e procedere solo se si ha la "),e.TgZ(13,"strong"),e._uU(14,"certezza"),e.qZA(),e._uU(15," di voler eliminare lo script selezionato. "),e.qZA(),e.TgZ(16,"p",8)(17,"input",9),e.NdJ("ngModelChange",function(v){return e.CHM(i),e.oxw().checkboxConfirm=v}),e.qZA(),e.TgZ(18,"label",10),e._uU(19," Cancella definitivamente lo script "),e._UZ(20,"span",11),e._uU(21," (ID: "),e._UZ(22,"span",12),e._uU(23,") "),e.qZA()(),e.BQk()}if(2&o){const i=e.oxw();e.xp6(17),e.Q6J("ngModel",i.checkboxConfirm),e.xp6(3),e.Q6J("innerText",i.scriptName),e.xp6(2),e.Q6J("innerText",i.scriptId)}}function t(o,f){if(1&o&&(e.TgZ(0,"div",13)(1,"p",14),e._uU(2," Cancellazione script "),e._UZ(3,"span",15),e.qZA(),e.TgZ(4,"p"),e._uU(5," Per terminare la cancellazione dello script "),e._UZ(6,"strong",12),e._uU(7),e.TgZ(8,"em"),e._uU(9,"Cancella"),e.qZA(),e._uU(10,". "),e.TgZ(11,"strong"),e._uU(12,"Non vi saranno altre richieste di conferma!"),e.qZA(),e._uU(13," Procedi solo se sei sicuro di voler rimuovere "),e.TgZ(14,"strong"),e._uU(15,"definitivamente"),e.qZA(),e._uU(16," lo script. "),e.qZA()()),2&o){const i=e.oxw();e.xp6(3),e.Q6J("innerText",i.scriptName),e.xp6(3),e.Q6J("innerText",i.scriptName),e.xp6(1),e.hij(" (ID: ",i.scriptId,") premi sul pulsante ")}}function r(o,f){if(1&o){const i=e.EpF();e.ynx(0),e.TgZ(1,"button",16),e.NdJ("click",function(){e.CHM(i);const v=e.oxw();return v.continueConfirm=v.checkboxConfirm}),e._uU(2,"Procedi"),e.qZA(),e.BQk()}if(2&o){const i=e.oxw();e.xp6(1),e.Q6J("disabled",i.pendingRequest||!i.checkboxConfirm)}}function s(o,f){if(1&o){const i=e.EpF();e.TgZ(0,"button",16),e.NdJ("click",function(){return e.CHM(i),e.oxw().deleteScript()}),e._uU(1,"Cancella"),e.qZA()}if(2&o){const i=e.oxw();e.Q6J("disabled",i.pendingRequest)}}let g=(()=>{class o{constructor(i,D){this.toastService=i,this.scriptDevService=D,this.scriptName="",this.scriptId=0,this.deletionPendingEvent=new e.vpe,this.deletionScriptEvent=new e.vpe,this.pendingRequest=!1,this.checkboxConfirm=!1,this.continueConfirm=!1}ngOnInit(){}open(){this.reset(),this.modalComponent.open()}reset(){this.checkboxConfirm=!1,this.continueConfirm=!1}deleteScript(){var i=this;return(0,u.Z)(function*(){i.checkboxConfirm&&i.continueConfirm&&(i.pendingRequest?i.toastService.advice(l.V.REQUEST_PENDING):(i.pendingRequest=!0,i.deletionPendingEvent.emit(i.scriptId),i.modalComponent.close("Delete button click"),i.scriptId>0&&(yield i.scriptDevService.deleteScript(i.scriptId))?(i.toastService.show({content:`Script <strong>${i.scriptName}</strong> cancellato correttamente!`}),i.deletionScriptEvent.emit(i.scriptId)):i.toastService.advice(l.V.GENERIC),i.pendingRequest=!1,i.deletionPendingEvent.emit(0)))})()}}return o.\u0275fac=function(i){return new(i||o)(e.Y36(m.k),e.Y36(c.N))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-script-dev-deletion"]],viewQuery:function(i,D){if(1&i&&e.Gf(p,5),2&i){let v;e.iGM(v=e.CRH())&&(D.modalComponent=v.first)}},inputs:{scriptName:"scriptName",scriptId:"scriptId"},outputs:{deletionPendingEvent:"deletionPendingEvent",deletionScriptEvent:"deletionScriptEvent"},decls:11,vars:5,consts:[["title","Cancellazione script",3,"disableCloseButton"],["modal",""],[4,"ngIf","ngIfElse"],["advice",""],["footer",""],["type","button",1,"btn","btn-secondary",3,"click"],["deleteButton",""],[1,"fst-italic"],[1,"form-check"],["type","checkbox","id","remove-script",1,"form-check-input",3,"ngModel","ngModelChange"],["for","remove-script",1,"form-check-label"],[1,"text-uppercase","fw-bold","text-decoration-underline",3,"innerText"],[3,"innerText"],[1,"alert","alert-danger","mb-0"],[1,"text-center","fw-bold"],[1,"text-uppercase",3,"innerText"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(i,D){if(1&i){const v=e.EpF();e.TgZ(0,"app-modal",0,1),e.YNc(2,E,24,3,"ng-container",2),e.YNc(3,t,17,3,"ng-template",null,3,e.W1O),e.ynx(5,4),e.TgZ(6,"button",5),e.NdJ("click",function(){return e.CHM(v),e.MAs(1).close("Close click")}),e._uU(7,"Annulla"),e.qZA(),e.YNc(8,r,3,1,"ng-container",2),e.YNc(9,s,2,1,"ng-template",null,6,e.W1O),e.BQk(),e.qZA()}if(2&i){const v=e.MAs(4),S=e.MAs(10);e.Q6J("disableCloseButton",!0),e.xp6(2),e.Q6J("ngIf",!D.continueConfirm)("ngIfElse",v),e.xp6(6),e.Q6J("ngIf",!D.continueConfirm)("ngIfElse",S)}},directives:[d.z,a.O5,_.Wl,_.JJ,_.On],styles:[""]}),o})()},9165:(C,h,n)=>{n.d(h,{a:()=>c});var u=n(9808),l=n(2382),e=n(2792),m=n(5e3);let c=(()=>{class d{}return d.\u0275fac=function(_){return new(_||d)},d.\u0275mod=m.oAB({type:d}),d.\u0275inj=m.cJS({imports:[[u.ez,l.u5,e.z]]}),d})()},4252:(C,h,n)=>{n.d(h,{N:()=>_});var u=n(5861),l=n(5e3),e=n(5787),m=n(3011),c=n(5640),d=n(4695),a=n(7205);let _=(()=>{class p{constructor(t,r,s,g,o){this.graphqlService=t,this.globalsService=r,this.forumService=s,this.userService=g,this.scriptListService=o,this.statsQuery="query ScriptStats {\n        scriptStats {\n            scriptId\n            entities {\n                targetId\n                targetType\n            }\n        }\n    }",this.deleteCacheQuery="mutation DeleteScriptCache($scriptId: Int!) {\n        delCache(id: $scriptId)\n    }",this.scriptUpsertMutation="mutation ScriptUpsert($scriptDetails: ScriptDetails!, $scriptId: Int) {\n        scriptUpsert(scriptDetails: $scriptDetails, scriptId: $scriptId)\n    }",this.delScriptMutation="mutation DelScript($scriptId: Int!) {\n        delScript(scriptId: $scriptId)\n    }",this.ffuid="",this.cache={},this.statsDetailsCache={},this.profileSubscription=this.globalsService.profileObservable.subscribe(f=>{this.ffuid=(null==f?void 0:f.user.ffuid)||""})}getStats(){var t=this;return(0,u.Z)(function*(){if(t.cache[t.ffuid])return t.cache[t.ffuid];const r=(yield t.graphqlService.query({query:t.statsQuery})).data;return t.cache[t.ffuid]=r.scriptStats})()}deleteScriptCache(t){var r=this;return(0,u.Z)(function*(){return(yield r.graphqlService.mutate({mutation:r.deleteCacheQuery,variables:{scriptId:t}})).data.delCache})()}getScriptStatsDetails(t){var r=this;return(0,u.Z)(function*(){let s=`${r.ffuid}script${t.scriptId}`;if(r.statsDetailsCache[s])return[r.statsDetailsCache[s].users,r.statsDetailsCache[s].forums];const[g,o]=yield Promise.all([t.users.length>0?r.userService.getDetailsFromUids(t.users):[],t.forums.length>0?r.forumService.getDomains(t.forums):[]]);return r.statsDetailsCache[s]={users:g,forums:o},[g,o]})()}updateScript(t,r){var s=this;return(0,u.Z)(function*(){const g=(yield s.graphqlService.mutate({mutation:s.scriptUpsertMutation,variables:{scriptDetails:t,scriptId:r}})).data.scriptUpsert;return g&&s.scriptListService.updateScript(t,r),g})()}createScript(t){var r=this;return(0,u.Z)(function*(){const s=(yield r.graphqlService.mutate({mutation:r.scriptUpsertMutation,variables:{scriptDetails:t}})).data.scriptUpsert;return s&&r.scriptListService.clearCache(),s})()}deleteScript(t){var r=this;return(0,u.Z)(function*(){const s=(yield r.graphqlService.mutate({mutation:r.delScriptMutation,variables:{scriptId:t}})).data.delScript;return s&&r.scriptListService.removeScript(t),s})()}ngOnDestroy(){this.profileSubscription.unsubscribe()}}return p.\u0275fac=function(t){return new(t||p)(l.LFG(e.J),l.LFG(m.d),l.LFG(c._),l.LFG(d.K),l.LFG(a.o))},p.\u0275prov=l.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},4695:(C,h,n)=>{n.d(h,{K:()=>m});var u=n(5861),l=n(5e3),e=n(5787);let m=(()=>{class c{constructor(a){this.graphqlService=a,this.uidToDetailsQuery="query UserUidToDetails($uids: [ID!]!) {\n        userUidToDetails(uids: $uids) {\n            avatar,\n            nickname,\n            uid\n        }\n    }",this.userSearchByNameQuery="query UserSearchByName($name: String!) {\n        userSearchByName(name: $name) {\n            uid\n            nickname\n            avatar\n        }\n    }",this.searchByNameCache={}}getDetailsFromUids(a){var _=this;return(0,u.Z)(function*(){return(yield _.graphqlService.query({query:_.uidToDetailsQuery,variables:{uids:a}})).data.userUidToDetails})()}searchUserByName(a){var _=this;return(0,u.Z)(function*(){if(_.searchByNameCache.hasOwnProperty(a))return _.searchByNameCache[a];const p=yield _.graphqlService.query({query:_.userSearchByNameQuery,variables:{name:a}});return _.searchByNameCache[a]=p.data.userSearchByName})()}}return c.\u0275fac=function(a){return new(a||c)(l.LFG(e.J))},c.\u0275prov=l.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()}}]);