"use strict";(self.webpackChunkpages=self.webpackChunkpages||[]).push([[835],{7429:(z,V,_)=>{_.d(V,{d:()=>H});var c=_(5879),U=_(6223),e=_(5661),y=_(336);let d=(()=>{class O{constructor(){this.allowedProps={$ref:{validator:this.isString},anyOf:{validator:this.validateAnyOf},default:{validator:this.isNestedOfPrimitives},definitions:null,description:null,enum:{validator:this.validateEnum},items:{child:"allProps"},maximum:null,maxItems:null,maxLength:null,minimum:null,minItems:null,minLength:null,multipleOf:null,oneOf:{validator:this.validateOneOf},properties:null,required:{validator:this.validateRequired},title:null,type:{validator:this.isNestedOfPrimitives},uniqueItems:null,widget:{child:{formlyConfig:{child:{props:{child:{placeholder:{validator:this.isString},multiple:{validator:this.isBoolean},pattern:{validator:this.isString},type:{validator:function(a){return"hidden"===a}},minLength:{validator:this.isNumber},maxLength:{validator:this.isNumber},rows:{validator:this.isNumber},keepGroupsWithoutId:{validator:this.isBoolean},fieldsetTemplate:{validator:this.isBoolean},startDate:null,endDate:null,minDate:{child:{year:null,month:null,day:null}},maxDate:{child:{year:null,month:null,day:null}}}},type:{validator:function(a){return"radio"===a}}}}}}},this.fieldListKeys=["properties","definitions"]}validateSchema(a){this.isObject(a)&&((!a.hasOwnProperty("type")||!a.hasOwnProperty("properties")||"object"!==a.type)&&(a.type="object",a.properties={}),this.validate(a))}validate(a,F){F||(F=this.allowedProps);for(const[u,S]of Object.entries(a)){var Z,I;if(F.hasOwnProperty(u)){if(null!==(Z=F[u])&&void 0!==Z&&Z.hasOwnProperty("validator"))F[u].validator.call(this,S)||delete a[u];else if(this.fieldListKeys.includes(u))for(const r of Object.keys(a[u]))this.validate(a[u][r]);else if(!this.isPrimitive(S)){if(null===(I=F[u])||void 0===I||!I.hasOwnProperty("child")||!this.isObject(S)){delete a[u];continue}this.validate(a[u],"allProps"===F[u].child?this.allowedProps:F[u].child)}}else delete a[u]}}isObject(a){return null!=a&&"object"==typeof a&&!Array.isArray(a)}isPrimitive(a){return this.isString(a)||this.isNumber(a)||this.isBoolean(a)||null==a}isString(a){return"string"==typeof a}isBoolean(a){return"boolean"==typeof a}isNumber(a){return"number"==typeof a}validateRequired(a){if(!Array.isArray(a))return!1;for(const F of a)if(!this.isString(F))return!1;return!0}validateEnum(a){if(!Array.isArray(a))return!1;for(const F of a)if(!this.isString(F)&&!this.isNumber(F))return!1;return!0}validateOneOf(a){var F;if(Array.isArray(a)&&null!==(F=a[0])&&void 0!==F&&F.hasOwnProperty("const")){for(const Z of a){if(!this.isObject(Z))return!1;this.validate(Z,{const:null,title:null})}return!0}return this.validateAnyOf(a)}validateAnyOf(a){if(!Array.isArray(a))return!1;for(const F of a){if(!this.isObject(F))return!1;this.validate(F)}return!0}isNestedOfPrimitives(a){if(this.isPrimitive(a))return!0;if(Array.isArray(a)||this.isObject(a)){for(const F of Object.values(a))if(!this.isNestedOfPrimitives(F))return!1;return!0}return!1}}return O.\u0275fac=function(a){return new(a||O)},O.\u0275prov=c.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})();var k=_(5545);const q=["app-custom-form",""],B=[[["","buttons",""]]],G=["[buttons]"];let H=(()=>{class O{constructor(a,F,Z){this.formlyJsonschema=a,this.customFormSchemaService=F,this.toastService=Z,this.model={},this.validateSchema=!1,this.enableModelChangeEvent=!1,this.defaultModel={},this.cancelEvent=new c.vpe,this.submitEvent=new c.vpe,this.validityChangeEvent=new c.vpe,this.modelChangeEvent=new c.vpe,this.form=new U.nJ({}),this.fields=[],this.options={},this.valid=!1,this.isFormCurrentlyValid=!0}ngOnInit(){this.createFields()}ngOnChanges(a){a.schema&&!a.schema.firstChange&&this.createFields()}createFields(){this.customFormSchemaService.isObject(this.schema)||(this.schema={}),this.validateSchema&&this.customFormSchemaService.validateSchema(this.schema),this.fields=[this.formlyJsonschema.toFieldConfig(this.schema)]}showFieldValidation(){this.cycleFields(this.fields)}showFieldValidationWithMessage(){this.showFieldValidation(),this.toastService.show({content:"Tutti i campi sono stati <strong>validati</strong>: quelli con errore sono evidenziati da un <strong>bordo rosso</strong>!"})}cycleFields(a){a.forEach(F=>{this.forceValidation(F),F.fieldGroup&&this.cycleFields(F.fieldGroup)})}forceValidation(a){a.validation||(a.validation={}),a.validation.show=!0}reset(){this.options.resetModel&&this.options.resetModel(this.defaultModel)}cancel(){this.cancelEvent.emit()}submit(){this.form.valid&&(this.log(),this.submitEvent.emit(this.model))}onModelChange(a){this.valid=this.form.valid,this.enableModelChangeEvent&&this.modelChangeEvent.emit(a||{}),this.form.valid!==this.isFormCurrentlyValid&&this.validityChangeEvent.emit(this.isFormCurrentlyValid=this.form.valid)}log(){}}return O.\u0275fac=function(a){return new(a||O)(c.Y36(y.c),c.Y36(d),c.Y36(e.k))},O.\u0275cmp=c.Xpm({type:O,selectors:[["","app-custom-form",""]],inputs:{schema:"schema",model:"model",validateSchema:"validateSchema",enableModelChangeEvent:"enableModelChangeEvent",defaultModel:"defaultModel"},outputs:{cancelEvent:"cancelEvent",submitEvent:"submitEvent",validityChangeEvent:"validityChangeEvent",modelChangeEvent:"modelChangeEvent"},features:[c.TTD],attrs:q,ngContentSelectors:G,decls:3,vars:5,consts:[[3,"formGroup","ngSubmit"],[3,"model","fields","form","options","modelChange"]],template:function(a,F){1&a&&(c.F$t(B),c.TgZ(0,"form",0),c.NdJ("ngSubmit",function(){return F.submit()}),c.TgZ(1,"formly-form",1),c.NdJ("modelChange",function(I){return F.onModelChange(I)}),c.qZA(),c.Hsn(2),c.qZA()),2&a&&(c.Q6J("formGroup",F.form),c.xp6(1),c.Q6J("model",F.model)("fields",F.fields)("form",F.form)("options",F.options))},dependencies:[k.T7,U._Y,U.JL,U.sg]}),O})()},7157:(z,V,_)=>{_.d(V,{I:()=>sn});var c=_(6814),U=_(5461),e=_(5879),y=_(5545),d=_(6223);function k(o,n){1&o&&(e.TgZ(0,"span",9),e._uU(1,"*"),e.qZA())}function q(o,n){if(1&o&&(e.TgZ(0,"label",7),e._uU(1),e.YNc(2,k,2,0,"span",8),e.qZA()),2&o){const t=e.oxw(2);e.uIk("for",t.id),e.xp6(1),e.hij(" ",t.props.label," "),e.xp6(1),e.Q6J("ngIf",t.props.required&&!0!==t.props.hideRequiredMarker)}}function B(o,n){if(1&o&&e.YNc(0,q,3,3,"label",6),2&o){const t=e.oxw();e.Q6J("ngIf",t.props.label&&!0!==t.props.hideLabel)}}function G(o,n){if(1&o&&(e.ynx(0),e.GkF(1,10),e.BQk()),2&o){e.oxw();const t=e.MAs(1);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function H(o,n){}function O(o,n){if(1&o&&(e.ynx(0),e.GkF(1,10),e.BQk()),2&o){e.oxw();const t=e.MAs(1);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function P(o,n){if(1&o&&(e.TgZ(0,"div",11),e._UZ(1,"formly-validation-message",12),e.qZA()),2&o){const t=e.oxw();e.Udp("display","block"),e.xp6(1),e.Q6J("field",t.field)}}function a(o,n){if(1&o&&(e.TgZ(0,"small",13),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.props.description)}}const F=["fieldTypeTemplate"];let Z=(()=>{class o extends y.n2{}return o.\u0275fac=function(){let n;return function(i){return(n||(n=e.n5z(o)))(i||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-wrapper-form-field"]],features:[e.qOj],decls:9,vars:8,consts:[["labelTemplate",""],[1,"mb-3"],[4,"ngIf"],["fieldComponent",""],["class","invalid-feedback",3,"display",4,"ngIf"],["class","form-text text-muted",4,"ngIf"],["class","form-label",4,"ngIf"],[1,"form-label"],["aria-hidden","true",4,"ngIf"],["aria-hidden","true"],[3,"ngTemplateOutlet"],[1,"invalid-feedback"],[3,"field"],[1,"form-text","text-muted"]],template:function(t,i){1&t&&(e.YNc(0,B,1,1,"ng-template",null,0,e.W1O),e.TgZ(2,"div",1),e.YNc(3,G,2,1,"ng-container",2),e.YNc(4,H,0,0,"ng-template",null,3,e.W1O),e.YNc(6,O,2,1,"ng-container",2),e.YNc(7,P,2,3,"div",4),e.YNc(8,a,2,1,"small",5),e.qZA()),2&t&&(e.xp6(2),e.ekj("form-floating","floating"===i.props.labelPosition)("has-error",i.showError),e.xp6(1),e.Q6J("ngIf","floating"!==i.props.labelPosition),e.xp6(3),e.Q6J("ngIf","floating"===i.props.labelPosition),e.xp6(1),e.Q6J("ngIf",i.showError),e.xp6(1),e.Q6J("ngIf",i.props.description))},dependencies:[y.M2,c.O5,c.tP],encapsulation:2}),o})(),I=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[c.ez,d.UX,y.X0.forChild({wrappers:[{name:"form-field",component:Z}]})]]}),o})(),u=(()=>{class o extends y.fS{constructor(t){super(),this.hostContainerRef=t}set content(t){t&&this.hostContainerRef&&this.hostContainerRef.createEmbeddedView(t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.s_b,8))},o.\u0275dir=e.lG2({type:o,viewQuery:function(t,i){if(1&t&&e.Gf(F,7),2&t){let l;e.iGM(l=e.CRH())&&(i.content=l.first)}},features:[e.qOj]}),o})();function S(o,n){if(1&o&&e._UZ(0,"input",3),2&o){const t=e.oxw(2);e.ekj("is-invalid",t.showError),e.Q6J("type",t.type)("formControl",t.formControl)("formlyAttributes",t.field)}}function r(o,n){if(1&o&&e._UZ(0,"input",4),2&o){const t=e.oxw(2);e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("formlyAttributes",t.field)}}function g(o,n){if(1&o&&(e.YNc(0,S,1,5,"input",1),e.YNc(1,r,1,4,"ng-template",null,2,e.W1O)),2&o){const t=e.MAs(2),i=e.oxw();e.Q6J("ngIf","number"!==i.type)("ngIfElse",t)}}let v=(()=>{class o extends u{get type(){return this.props.type||"text"}}return o.\u0275fac=function(){let n;return function(i){return(n||(n=e.n5z(o)))(i||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-input"]],features:[e.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],["class","form-control",3,"type","formControl","formlyAttributes","is-invalid",4,"ngIf","ngIfElse"],["numberTmp",""],[1,"form-control",3,"type","formControl","formlyAttributes"],["type","number",1,"form-control",3,"formControl","formlyAttributes"]],template:function(t,i){1&t&&e.YNc(0,g,3,2,"ng-template",null,0,e.W1O)},dependencies:[c.O5,d.Fj,d.JJ,d.oH,y.JD,d.wV],encapsulation:2,changeDetection:0}),o})(),b=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[c.ez,d.UX,I,y.X0.forChild({types:[{name:"input",component:v,wrappers:["form-field"]},{name:"string",extends:"input"},{name:"number",extends:"input",defaultOptions:{props:{type:"number"}}},{name:"integer",extends:"input",defaultOptions:{props:{type:"number"}}}]})]]}),o})();function p(o,n){if(1&o&&(e.TgZ(0,"textarea",1),e._uU(1,"      "),e.qZA()),2&o){const t=e.oxw();e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("cols",t.props.cols)("rows",t.props.rows)("formlyAttributes",t.field)}}let x=(()=>{class o extends u{constructor(){super(...arguments),this.defaultOptions={props:{cols:1,rows:1}}}}return o.\u0275fac=function(){let n;return function(i){return(n||(n=e.n5z(o)))(i||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-textarea"]],features:[e.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],[1,"form-control",3,"formControl","cols","rows","formlyAttributes"]],template:function(t,i){1&t&&e.YNc(0,p,2,6,"ng-template",null,0,e.W1O)},dependencies:[d.Fj,d.JJ,d.oH,y.JD],encapsulation:2,changeDetection:0}),o})(),s=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[c.ez,d.UX,I,y.X0.forChild({types:[{name:"textarea",component:x,wrappers:["form-field"]}]})]]}),o})();var f=_(5592),C=_(5619),h=_(7398),A=_(2181),J=_(9397);let E=(()=>{class o{transform(t,i){return t instanceof f.y?this.dispose():t=this.observableOf(t,i),t.pipe((0,h.U)(l=>this.transformOptions(l,i)))}ngOnDestroy(){this.dispose()}transformOptions(t,i){const l=this.transformSelectProps(i),m=[],T={};return null==t||t.forEach(Q=>{const D=this.transformOption(Q,l);if(D.group){const L=T[D.label];void 0===L?T[D.label]=m.push(D)-1:D.group.forEach(K=>m[L].group.push(K))}else m.push(D)}),m}transformOption(t,i){const l=i.groupProp(t);return Array.isArray(l)?{label:i.labelProp(t),group:l.map(m=>this.transformOption(m,i))}:(t={label:i.labelProp(t),value:i.valueProp(t),disabled:!!i.disabledProp(t)},l?{label:l,group:[t]}:t)}transformSelectProps(t){const i=(null==t?void 0:t.props)||(null==t?void 0:t.templateOptions)||{},l=m=>"function"==typeof m?m:T=>T[m];return{groupProp:l(i.groupProp||"group"),labelProp:l(i.labelProp||"label"),valueProp:l(i.valueProp||"value"),disabledProp:l(i.disabledProp||"disabled")}}dispose(){this._options&&(this._options.complete(),this._options=null),this._subscription&&(this._subscription.unsubscribe(),this._subscription=null)}observableOf(t,i){return this.dispose(),i&&i.options&&i.options.fieldChanges&&(this._subscription=i.options.fieldChanges.pipe((0,A.h)(({property:l,type:m,field:T})=>"expressionChanges"===m&&(0===l.indexOf("templateOptions.options")||0===l.indexOf("props.options"))&&T===i&&Array.isArray(T.props.options)&&!!this._options),(0,J.b)(()=>this._options.next(i.props.options))).subscribe()),this._options=new C.X(t),this._options.asObservable()}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275pipe=e.Yjl({name:"formlySelectOptions",type:o,pure:!0}),o})(),w=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({}),o})();function M(o,n){if(1&o&&(e.TgZ(0,"div",2),e._UZ(1,"input",3),e.TgZ(2,"label",4),e._uU(3),e.qZA()()),2&o){const t=n.$implicit,i=n.index,l=e.oxw(2);e.ekj("form-check-inline","inline"===l.props.formCheck),e.xp6(1),e.ekj("is-invalid",l.showError),e.Q6J("id",l.id+"_"+i)("name",l.field.name||l.id)("value",t.value)("formControl",t.disabled?l.disabledControl:l.formControl)("formlyAttributes",l.field),e.uIk("value",t.value),e.xp6(1),e.Q6J("for",l.id+"_"+i),e.xp6(1),e.hij(" ",t.label," ")}}function j(o,n){if(1&o&&(e.YNc(0,M,4,12,"div",1),e.ALo(1,"async"),e.ALo(2,"formlySelectOptions")),2&o){const t=e.oxw();e.Q6J("ngForOf",e.lcZ(1,1,e.xi3(2,3,t.props.options,t.field)))}}let W=(()=>{class o extends u{constructor(){super(...arguments),this.defaultOptions={props:{formCheck:"default"}}}get disabledControl(){return new d.NI({value:this.formControl.value,disabled:!0})}}return o.\u0275fac=function(){let n;return function(i){return(n||(n=e.n5z(o)))(i||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-radio"]],features:[e.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],["class","form-check",3,"form-check-inline",4,"ngFor","ngForOf"],[1,"form-check"],["type","radio",1,"form-check-input",3,"id","name","value","formControl","formlyAttributes"],[1,"form-check-label",3,"for"]],template:function(t,i){1&t&&e.YNc(0,j,3,6,"ng-template",null,0,e.W1O)},dependencies:[c.sg,d._,d.Fj,d.JJ,d.oH,y.JD,c.Ov,E],encapsulation:2,changeDetection:0}),o})(),X=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[c.ez,d.UX,I,w,y.X0.forChild({types:[{name:"radio",component:W,wrappers:["form-field"]}]})]]}),o})();function $(o,n){1&o&&(e.TgZ(0,"span",6),e._uU(1,"*"),e.qZA())}function ae(o,n){if(1&o&&(e.TgZ(0,"label",4),e._uU(1),e.YNc(2,$,2,0,"span",5),e.qZA()),2&o){const t=e.oxw(2);e.Q6J("for",t.id),e.xp6(1),e.hij(" ",t.props.label," "),e.xp6(1),e.Q6J("ngIf",t.props.required&&!0!==t.props.hideRequiredMarker)}}const ce=function(o,n){return{"form-check-inline":o,"form-switch":n}};function de(o,n){if(1&o&&(e.TgZ(0,"div",1),e._UZ(1,"input",2),e.YNc(2,ae,3,3,"label",3),e.qZA()),2&o){const t=e.oxw();e.Q6J("ngClass",e.WLB(9,ce,"inline"===t.props.formCheck||"inline-switch"===t.props.formCheck,"switch"===t.props.formCheck||"inline-switch"===t.props.formCheck)),e.xp6(1),e.ekj("is-invalid",t.showError)("position-static","nolabel"===t.props.formCheck),e.Q6J("indeterminate",t.props.indeterminate&&null==t.formControl.value)("formControl",t.formControl)("formlyAttributes",t.field),e.xp6(1),e.Q6J("ngIf","nolabel"!==t.props.formCheck)}}let pe=(()=>{class o extends u{constructor(){super(...arguments),this.defaultOptions={props:{indeterminate:!0,hideLabel:!0,formCheck:"default"}}}}return o.\u0275fac=function(){let n;return function(i){return(n||(n=e.n5z(o)))(i||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-checkbox"]],features:[e.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],[1,"form-check",3,"ngClass"],["type","checkbox",1,"form-check-input",3,"indeterminate","formControl","formlyAttributes"],["class","form-check-label",3,"for",4,"ngIf"],[1,"form-check-label",3,"for"],["aria-hidden","true",4,"ngIf"],["aria-hidden","true"]],template:function(t,i){1&t&&e.YNc(0,de,3,12,"ng-template",null,0,e.W1O)},dependencies:[c.mk,d.Wl,d.JJ,d.oH,y.JD,c.O5],encapsulation:2,changeDetection:0}),o})(),me=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[c.ez,d.UX,I,y.X0.forChild({types:[{name:"checkbox",component:pe,wrappers:["form-field"]},{name:"boolean",extends:"checkbox"}]})]]}),o})();var N=_(1413);const ue=function(o,n){return{"form-check-inline":o,"form-switch":n}};function fe(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",2)(1,"input",3),e.NdJ("change",function(l){const T=e.CHM(t).$implicit,Q=e.oxw(2);return e.KtG(Q.onChange(T.value,l.target.checked))}),e.qZA(),e.TgZ(2,"label",4),e._uU(3),e.qZA()()}if(2&o){const t=n.$implicit,i=n.index,l=e.oxw(2);e.Q6J("ngClass",e.WLB(8,ue,"inline"===l.props.formCheck||"inline-switch"===l.props.formCheck,"switch"===l.props.formCheck||"inline-switch"===l.props.formCheck)),e.xp6(1),e.Q6J("id",l.id+"_"+i)("value",t.value)("checked",l.isChecked(t))("formlyAttributes",l.field)("disabled",l.formControl.disabled||t.disabled),e.xp6(1),e.Q6J("for",l.id+"_"+i),e.xp6(1),e.hij(" ",t.label," ")}}function _e(o,n){if(1&o&&(e.YNc(0,fe,4,11,"div",1),e.ALo(1,"async"),e.ALo(2,"formlySelectOptions")),2&o){const t=e.oxw();e.Q6J("ngForOf",e.lcZ(1,1,e.xi3(2,3,t.props.options,t.field)))}}let ge=(()=>{class o extends u{constructor(){super(...arguments),this.defaultOptions={props:{formCheck:"default"}}}onChange(t,i){this.formControl.markAsDirty(),this.formControl.patchValue("array"===this.props.type?i?[...this.formControl.value||[],t]:[...this.formControl.value||[]].filter(l=>l!==t):(0,N.Z)((0,N.Z)({},this.formControl.value),{},{[t]:i})),this.formControl.markAsTouched()}isChecked(t){const i=this.formControl.value;return i&&("array"===this.props.type?-1!==i.indexOf(t.value):i[t.value])}}return o.\u0275fac=function(){let n;return function(i){return(n||(n=e.n5z(o)))(i||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-multicheckbox"]],features:[e.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],["class","form-check",3,"ngClass",4,"ngFor","ngForOf"],[1,"form-check",3,"ngClass"],["type","checkbox",1,"form-check-input",3,"id","value","checked","formlyAttributes","disabled","change"],[1,"form-check-label",3,"for"]],template:function(t,i){1&t&&e.YNc(0,_e,3,6,"ng-template",null,0,e.W1O)},dependencies:[c.sg,c.mk,y.JD,c.Ov,E],encapsulation:2,changeDetection:0}),o})(),he=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[c.ez,d.UX,I,w,y.X0.forChild({types:[{name:"multicheckbox",component:ge,wrappers:["form-field"]}]})]]}),o})();var ee=_(8180);function ye(o,n){if(1&o&&(e.TgZ(0,"option",8),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("ngValue",t.value)("disabled",t.disabled),e.xp6(1),e.hij(" ",t.label," ")}}function Fe(o,n){if(1&o&&(e.TgZ(0,"option",8),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("ngValue",t.value)("disabled",t.disabled),e.xp6(1),e.hij(" ",t.label," ")}}function xe(o,n){if(1&o&&(e.TgZ(0,"optgroup",9),e.YNc(1,Fe,2,3,"option",10),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("label",t.label),e.xp6(1),e.Q6J("ngForOf",t.group)}}function ve(o,n){if(1&o&&(e.ynx(0),e.YNc(1,ye,2,3,"option",6),e.YNc(2,xe,2,2,"ng-template",null,7,e.W1O),e.BQk()),2&o){const t=n.$implicit,i=e.MAs(3);e.xp6(1),e.Q6J("ngIf",!t.group)("ngIfElse",i)}}function be(o,n){if(1&o&&(e.ynx(0),e.YNc(1,ve,4,2,"ng-container",5),e.BQk()),2&o){const t=n.ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}function Ce(o,n){if(1&o&&(e.TgZ(0,"select",3),e.YNc(1,be,2,1,"ng-container",4),e.ALo(2,"async"),e.ALo(3,"formlySelectOptions"),e.qZA()),2&o){const t=e.oxw(2);e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("compareWith",t.props.compareWith)("formlyAttributes",t.field),e.xp6(1),e.Q6J("ngIf",e.lcZ(2,6,e.xi3(3,8,t.props.options,t.field)))}}function Oe(o,n){if(1&o&&(e.TgZ(0,"option",13),e._uU(1),e.qZA()),2&o){const t=e.oxw(3);e.Q6J("ngValue",void 0),e.xp6(1),e.Oqu(t.props.placeholder)}}function Te(o,n){if(1&o&&(e.TgZ(0,"option",8),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("ngValue",t.value)("disabled",t.disabled),e.xp6(1),e.hij(" ",t.label," ")}}function Me(o,n){if(1&o&&(e.TgZ(0,"option",8),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("ngValue",t.value)("disabled",t.disabled),e.xp6(1),e.hij(" ",t.label," ")}}function we(o,n){if(1&o&&(e.TgZ(0,"optgroup",9),e.YNc(1,Me,2,3,"option",10),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("label",t.label),e.xp6(1),e.Q6J("ngForOf",t.group)}}function Ae(o,n){if(1&o&&(e.ynx(0),e.YNc(1,Te,2,3,"option",6),e.YNc(2,we,2,2,"ng-template",null,7,e.W1O),e.BQk()),2&o){const t=n.$implicit,i=e.MAs(3);e.xp6(1),e.Q6J("ngIf",!t.group)("ngIfElse",i)}}function Ze(o,n){if(1&o&&(e.ynx(0),e.YNc(1,Ae,4,2,"ng-container",5),e.BQk()),2&o){const t=n.ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}function Je(o,n){if(1&o&&(e.TgZ(0,"select",11),e.YNc(1,Oe,2,2,"option",12),e.YNc(2,Ze,2,1,"ng-container",4),e.ALo(3,"async"),e.ALo(4,"formlySelectOptions"),e.qZA()),2&o){const t=e.oxw(2);e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("compareWith",t.props.compareWith)("formlyAttributes",t.field),e.xp6(1),e.Q6J("ngIf",t.props.placeholder),e.xp6(1),e.Q6J("ngIf",e.lcZ(3,7,e.xi3(4,9,t.props.options,t.field)))}}function Ie(o,n){if(1&o&&(e.YNc(0,Ce,4,11,"select",1),e.YNc(1,Je,5,12,"ng-template",null,2,e.W1O)),2&o){const t=e.MAs(2),i=e.oxw();e.Q6J("ngIf",i.props.multiple)("ngIfElse",t)}}let Ee=(()=>{class o extends u{constructor(t,i){super(i),this.ngZone=t,this.defaultOptions={props:{compareWith:(l,m)=>l===m}}}set selectAccessor(t){if(!t)return;const i=t.writeValue.bind(t);null===t._getOptionId(t.value)&&i(t.value),t.writeValue=l=>{const m=t._idCounter;i(l),null===l&&this.ngZone.onStable.asObservable().pipe((0,ee.q)(1)).subscribe(()=>{m!==t._idCounter&&null===t._getOptionId(l)&&-1!==t._elementRef.nativeElement.selectedIndex&&i(l)})}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.R0b),e.Y36(e.s_b))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-select"]],viewQuery:function(t,i){if(1&t&&e.Gf(d.EJ,5),2&t){let l;e.iGM(l=e.CRH())&&(i.selectAccessor=l.first)}},features:[e.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],["class","form-select","multiple","",3,"formControl","compareWith","is-invalid","formlyAttributes",4,"ngIf","ngIfElse"],["singleSelect",""],["multiple","",1,"form-select",3,"formControl","compareWith","formlyAttributes"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngValue","disabled",4,"ngIf","ngIfElse"],["optgroup",""],[3,"ngValue","disabled"],[3,"label"],[3,"ngValue","disabled",4,"ngFor","ngForOf"],[1,"form-select",3,"formControl","compareWith","formlyAttributes"],[3,"ngValue",4,"ngIf"],[3,"ngValue"]],template:function(t,i){1&t&&e.YNc(0,Ie,3,2,"ng-template",null,0,e.W1O)},dependencies:[c.O5,d.K7,d.JJ,d.oH,y.JD,c.sg,d.YN,d.Kr,d.EJ,c.Ov,E],encapsulation:2,changeDetection:0}),o})(),ke=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[c.ez,d.UX,I,w,y.X0.forChild({types:[{name:"select",component:Ee,wrappers:["form-field"]},{name:"enum",extends:"select"}]})]]}),o})();const Se=["fieldTypeTemplate"];function De(o,n){if(1&o&&e._UZ(0,"i",7),2&o){const t=e.oxw(3);e.Q6J("ngClass",t.props.addonLeft.class)}}function Qe(o,n){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Oqu(t.props.addonLeft.text)}}function Ue(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",4),e.NdJ("click",function(l){e.CHM(t);const m=e.oxw(2);return e.KtG(m.addonLeftClick(l))}),e.YNc(1,De,1,1,"i",5),e.YNc(2,Qe,2,1,"span",6),e.qZA()}if(2&o){const t=e.oxw(2);e.ekj("input-group-btn",t.props.addonLeft.onClick),e.xp6(1),e.Q6J("ngIf",t.props.addonLeft.class),e.xp6(1),e.Q6J("ngIf",t.props.addonLeft.text)}}function Pe(o,n){if(1&o&&e._UZ(0,"i",7),2&o){const t=e.oxw(3);e.Q6J("ngClass",t.props.addonRight.class)}}function Le(o,n){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Oqu(t.props.addonRight.text)}}function Ne(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",4),e.NdJ("click",function(l){e.CHM(t);const m=e.oxw(2);return e.KtG(m.addonRightClick(l))}),e.YNc(1,Pe,1,1,"i",5),e.YNc(2,Le,2,1,"span",6),e.qZA()}if(2&o){const t=e.oxw(2);e.ekj("input-group-btn",t.props.addonRight.onClick),e.xp6(1),e.Q6J("ngIf",t.props.addonRight.class),e.xp6(1),e.Q6J("ngIf",t.props.addonRight.text)}}function je(o,n){if(1&o&&(e.TgZ(0,"div",1),e.YNc(1,Ue,3,4,"div",2),e.GkF(2,null,3),e.YNc(4,Ne,3,4,"div",2),e.qZA()),2&o){const t=e.oxw();e.ekj("has-validation",t.showError),e.xp6(1),e.Q6J("ngIf",t.props.addonLeft),e.xp6(3),e.Q6J("ngIf",t.props.addonRight)}}let Ye=(()=>{class o extends y.n2{constructor(t){super(),this.hostContainerRef=t}set content(t){t&&this.hostContainerRef&&this.hostContainerRef.createEmbeddedView(t)}addonRightClick(t){var i,l;null===(i=(l=this.props.addonRight).onClick)||void 0===i||i.call(l,this.field,t)}addonLeftClick(t){var i,l;null===(i=(l=this.props.addonLeft).onClick)||void 0===i||i.call(l,this.field,t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.s_b))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-wrapper-addons"]],viewQuery:function(t,i){if(1&t&&e.Gf(Se,7),2&t){let l;e.iGM(l=e.CRH())&&(i.content=l.first)}},features:[e.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],[1,"input-group"],["class","input-group-text",3,"input-group-btn","click",4,"ngIf"],["fieldComponent",""],[1,"input-group-text",3,"click"],[3,"ngClass",4,"ngIf"],[4,"ngIf"],[3,"ngClass"]],template:function(t,i){1&t&&e.YNc(0,je,5,4,"ng-template",null,0,e.W1O)},dependencies:[c.O5,c.mk],styles:["formly-wrapper-form-field .input-group-btn{cursor:pointer}\n"],encapsulation:2}),o})();function Ve(o){!o.props||o.wrappers&&-1!==o.wrappers.indexOf("addons")||(o.props.addonLeft||o.props.addonRight)&&(o.wrappers=[...o.wrappers||[],"addons"])}let qe=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[c.ez,d.UX,y.X0.forChild({wrappers:[{name:"addons",component:Ye}],extensions:[{name:"addons",extension:{postPopulate:Ve}}]})]]}),o})(),Be=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[I,b,s,X,me,he,ke,qe]]}),o})();var Ge=_(4295),He=_(91);const We=["language","theme"],Re=["editor"];let Xe=(()=>{class o{constructor(t,i){this.ngZone=t,this.monacoPathConfig=i,this.isMonacoLoaded$=new C.X(!1),this._monacoPath="assets/monaco-editor/min/vs",window.monacoEditorAlreadyInitialized?t.run(()=>this.isMonacoLoaded$.next(!0)):(window.monacoEditorAlreadyInitialized=!0,this.monacoPathConfig&&(this.monacoPath=this.monacoPathConfig),this.loadMonaco())}set monacoPath(t){t&&(this._monacoPath=t)}loadMonaco(){const t=()=>{let T=this._monacoPath;window.amdRequire=window.require;const Q=!!this.nodeRequire,D=T.includes("http");Q&&(window.require=this.nodeRequire,D||(T=window.require("path").resolve(window.__dirname,this._monacoPath))),window.amdRequire.config({paths:{vs:T}}),window.amdRequire(["vs/editor/editor.main"],()=>{this.ngZone.run(()=>this.isMonacoLoaded$.next(!0))},L=>console.error("Error loading monaco-editor: ",L))};if(window.amdRequire)return t();window.require&&(this.addElectronFixScripts(),this.nodeRequire=window.require);const m=document.createElement("script");m.type="text/javascript",m.src=`${this._monacoPath}/loader.js`,m.addEventListener("load",t),document.body.appendChild(m)}addElectronFixScripts(){const t=document.createElement("script"),i=document.createTextNode("self.module = undefined;"),l=document.createTextNode("self.process.browser = true;");t.appendChild(i),t.appendChild(l),document.body.appendChild(t)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(e.R0b),e.LFG("MONACO_PATH",8))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),Ke=(()=>{class o{constructor(t){this.monacoLoader=t,this.init=new e.vpe,this.onTouched=()=>{},this.onErrorStatusChange=()=>{},this.propagateChange=()=>{}}get model(){return this.editor&&this.editor.getModel()}get modelMarkers(){return this.model&&monaco.editor.getModelMarkers({resource:this.model.uri})}ngOnInit(){this.monacoLoader.isMonacoLoaded$.pipe((0,A.h)(t=>t),(0,ee.q)(1)).subscribe(()=>{this.initEditor()})}ngOnChanges(t){if(this.editor&&t.options&&!t.options.firstChange){const i=t.options.currentValue,{language:l,theme:m}=i,T=(0,He.Z)(i,We),{language:Q,theme:D}=t.options.previousValue;Q!==l&&monaco.editor.setModelLanguage(this.editor.getModel(),this.options&&this.options.language?this.options.language:"text"),D!==m&&monaco.editor.setTheme(m),this.editor.updateOptions(T)}if(this.editor&&t.uri){const i=t.uri.currentValue,l=t.uri.previousValue;if(l&&!i||!l&&i||i&&l&&i.path!==l.path){const m=this.editor.getValue();let T;this.modelUriInstance&&this.modelUriInstance.dispose(),i&&(T=monaco.editor.getModels().find(Q=>Q.uri.path===i.path)),this.modelUriInstance=T||monaco.editor.createModel(m,this.options.language||"text",this.uri),this.editor.setModel(this.modelUriInstance)}}}writeValue(t){this.value=t,this.editor&&t?this.editor.setValue(t):this.editor&&this.editor.setValue("")}registerOnChange(t){this.propagateChange=t}registerOnTouched(t){this.onTouched=t}validate(){return this.parsedError?{monaco:{value:this.parsedError.split("|")}}:null}registerOnValidatorChange(t){this.onErrorStatusChange=t}initEditor(){const t={value:[this.value].join("\n"),language:"text",automaticLayout:!0,scrollBeyondLastLine:!1,theme:"vc"};this.editor=monaco.editor.create(this.editorContent.nativeElement,this.options?(0,N.Z)((0,N.Z)({},t),this.options):t),this.registerEditorListeners(),this.init.emit(this.editor)}registerEditorListeners(){this.editor.onDidChangeModelContent(()=>{this.propagateChange(this.editor.getValue())}),this.editor.onDidChangeModelDecorations(()=>{const t=this.modelMarkers.map(({message:l})=>l).join("|");this.parsedError!==t&&(this.parsedError=t,this.onErrorStatusChange())}),this.editor.onDidBlurEditorText(()=>{this.onTouched()})}ngOnDestroy(){this.editor&&this.editor.dispose()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Xe))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ngx-monaco-editor"]],viewQuery:function(t,i){if(1&t&&e.Gf(Re,7),2&t){let l;e.iGM(l=e.CRH())&&(i.editorContent=l.first)}},inputs:{options:"options",uri:"uri"},outputs:{init:"init"},features:[e._Bn([{provide:d.JU,useExisting:(0,e.Gpc)(()=>o),multi:!0},{provide:d.Cf,useExisting:(0,e.Gpc)(()=>o),multi:!0}]),e.TTD],decls:4,vars:0,consts:[["fxFlex","",1,"editor-container"],["container",""],[1,"monaco-editor"],["editor",""]],template:function(t,i){1&t&&(e.TgZ(0,"div",0,1),e._UZ(2,"div",2,3),e.qZA())},styles:[".monaco-editor[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0}.editor-container[_ngcontent-%COMP%]{overflow:hidden;position:relative;display:table;width:100%;height:100%;min-width:0}"],changeDetection:0}),o})(),ze=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[]]}),o})();var te=_(3946),R=_(7867),oe=_(8595);function et(o,n){1&o&&e.GkF(0)}function tt(o,n){if(1&o&&(e.ynx(0),e._UZ(1,"div",13),e.TgZ(2,"div",14),e._uU(3," ("),e.YNc(4,et,1,0,"ng-container",15),e._uU(5,") "),e.qZA(),e.BQk()),2&o){const t=e.oxw(),i=e.MAs(15);e.xp6(1),e.Q6J("innerHTML",t.parsedTitle,e.oJD),e.xp6(3),e.Q6J("ngTemplateOutlet",i)}}function ot(o,n){1&o&&e.GkF(0)}function nt(o,n){if(1&o&&(e.TgZ(0,"div",16),e._uU(1," Lista di "),e.YNc(2,ot,1,0,"ng-container",15),e.qZA()),2&o){e.oxw();const t=e.MAs(15);e.xp6(2),e.Q6J("ngTemplateOutlet",t)}}function it(o,n){if(1&o&&e._UZ(0,"div",17),2&o){const t=e.oxw();e.Q6J("innerHTML",t.parsedDescription,e.oJD)}}const rt=function(o){return{"mt-3":o}};function lt(o,n){if(1&o&&(e.TgZ(0,"div",18),e._UZ(1,"formly-validation-message",19),e.qZA()),2&o){const t=e.oxw();e.Q6J("ngClass",e.VKq(2,rt,t.parsedDescription.length)),e.xp6(1),e.Q6J("field",t.field)}}function st(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"li")(1,"div",30),e.NdJ("click",function(){e.CHM(t);const l=e.oxw().index,m=e.oxw(2);return e.KtG(m.move(l,l-1))}),e._uU(2," arrow_circle_up "),e.qZA()()}2&o&&(e.xp6(1),e.Q6J("disableOnTouchDevice",!0))}const ne=function(o){return{"ms-1":o}};function at(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"li",31)(1,"div",32),e.NdJ("click",function(){e.CHM(t);const l=e.oxw().index,m=e.oxw(2);return e.KtG(m.move(l,l+1))}),e._uU(2," arrow_circle_down "),e.qZA()()}if(2&o){const t=e.oxw().first;e.Q6J("ngClass",e.VKq(2,ne,!t)),e.xp6(1),e.Q6J("disableOnTouchDevice",!0)}}function ct(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"li",31)(1,"div",33),e.NdJ("click",function(){e.CHM(t);const l=e.oxw().index,m=e.oxw(2);return e.KtG(m.remove(l))}),e._uU(2," highlight_off "),e.qZA()()}if(2&o){const t=e.oxw();e.Q6J("ngClass",e.VKq(2,ne,!(t.first&&t.last))),e.xp6(1),e.Q6J("disableOnTouchDevice",!0)}}const dt=function(o){return{"mb-3":o}},ie=function(o){return{"has-error":o}};function pt(o,n){if(1&o&&(e.TgZ(0,"li",22)(1,"fieldset",23)(2,"legend",24)(3,"div",25)(4,"div",26),e._uU(5),e.qZA(),e.TgZ(6,"ul",27),e.YNc(7,st,3,1,"li",28),e.YNc(8,at,3,4,"li",29),e.YNc(9,ct,3,4,"li",29),e.qZA()()(),e._UZ(10,"formly-field",19),e.qZA()()),2&o){const t=n.$implicit,i=n.index,l=n.first,m=n.last;e.Q6J("ngClass",e.VKq(7,dt,!m)),e.xp6(1),e.Q6J("ngClass",e.VKq(9,ie,null==t.formControl?null:t.formControl.invalid)),e.xp6(4),e.hij("#",i+1,""),e.xp6(2),e.Q6J("ngIf",!l),e.xp6(1),e.Q6J("ngIf",!m),e.xp6(1),e.Q6J("ngIf",t.props&&!1!==t.props.removable),e.xp6(1),e.Q6J("field",t)}}function mt(o,n){if(1&o&&(e.TgZ(0,"ul",20),e.YNc(1,pt,11,11,"li",21),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.field.fieldGroup)}}const ut=function(o){return{"d-none d-md-inline":o}};function ft(o,n){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA(),e.TgZ(2,"span",31),e._uU(3),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.field.fieldGroup?t.field.fieldGroup.length:0),e.xp6(1),e.Q6J("ngClass",e.VKq(3,ut,t.props.label)),e.xp6(1),e.hij(" element",t.field.fieldGroup&&1===t.field.fieldGroup.length?"o":"i","")}}const _t=function(){return[10,10]},gt=function(o){return{placement:"top-end",offset:o}};let ht=(()=>{class o extends y.hv{constructor(t){super(),this.customFormUtilsService=t,this.parsedTitle="",this.parsedDescription=""}ngOnInit(){this.parsedDescription=this.props.description?this.customFormUtilsService.parseBBCode(this.props.description):"",this.parsedTitle=this.props.label?this.customFormUtilsService.parseBBCode(this.props.label):""}get maxLengthExceeded(){return this.props.maxItems&&this.model&&this.model.length>=this.props.maxItems}move(t,i){const l=this.model[t];this.remove(t),this.add(i,l)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(R.d6))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-array"]],features:[e.qOj],decls:16,vars:14,consts:[[1,"rounded","px-3","pb-3","pt-2","mb-3","formly-fieldset",3,"ngClass"],[1,"legend-reset","pb-1","px-2","mb-0","mw-100"],[1,"d-flex","align-items-center","mw-100"],[4,"ngIf","ngIfElse"],["nolabel",""],["class","mb-2 text-justify",3,"innerHTML",4,"ngIf"],["class","alert alert-danger formly-field-array-error text-center","role","alert",3,"ngClass",4,"ngIf"],["class","list-unstyled mb-3",4,"ngIf"],[1,"d-flex","flex-row-reverse"],["appTippy","Hai aggiunto il numero massimo di elementi!",3,"disableInstance","tippyProps"],["type","button",1,"btn","btn-primary","d-flex","align-items-center",3,"disabled","click"],[1,"material-icons"],["itemscount",""],[1,"fs-xl","text-truncate","mw-100",3,"innerHTML"],[1,"ms-2","fs-reset","lh-1","fst-italic","list-counter","text-nowrap"],[4,"ngTemplateOutlet"],[1,"fs-xl","text-truncate","mw-10"],[1,"mb-2","text-justify",3,"innerHTML"],["role","alert",1,"alert","alert-danger","formly-field-array-error","text-center",3,"ngClass"],[3,"field"],[1,"list-unstyled","mb-3"],["class","item",3,"ngClass",4,"ngFor","ngForOf"],[1,"item",3,"ngClass"],[1,"rounded","formly-fieldset","dashed","show-success","px-3",3,"ngClass"],[1,"legend-reset","ms-auto","mb-0","px-2"],[1,"d-flex","align-items-center"],[1,"fs-xl","ms-1"],[1,"ms-2","mb-0","item-icons","list-unstyled","d-flex","align-items-center"],[4,"ngIf"],[3,"ngClass",4,"ngIf"],["appTippy","Sposta in alto",1,"d-block","material-icons","cursor-pointer",3,"disableOnTouchDevice","click"],[3,"ngClass"],["appTippy","Sposta in basso",1,"d-block","material-icons","cursor-pointer",3,"disableOnTouchDevice","click"],["appTippy","Rimuovi",1,"d-block","material-icons","cursor-pointer","text-danger",3,"disableOnTouchDevice","click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"fieldset",0)(1,"legend",1)(2,"div",2),e.YNc(3,tt,6,2,"ng-container",3),e.YNc(4,nt,3,1,"ng-template",null,4,e.W1O),e.qZA()(),e.YNc(6,it,1,1,"div",5),e.YNc(7,lt,2,4,"div",6),e.YNc(8,mt,2,1,"ul",7),e.TgZ(9,"div",8)(10,"div",9)(11,"button",10),e.NdJ("click",function(){return!i.maxLengthExceeded&&i.add()}),e.TgZ(12,"span",11),e._uU(13,"add"),e.qZA()()()(),e.YNc(14,ft,4,5,"ng-template",null,12,e.W1O),e.qZA()),2&t){const l=e.MAs(5);e.Q6J("ngClass",e.VKq(9,ie,i.formControl.invalid)),e.xp6(3),e.Q6J("ngIf",i.parsedTitle)("ngIfElse",l),e.xp6(3),e.Q6J("ngIf",i.parsedDescription),e.xp6(1),e.Q6J("ngIf",i.showError&&i.formControl.errors),e.xp6(1),e.Q6J("ngIf",i.field.fieldGroup&&i.field.fieldGroup.length),e.xp6(2),e.Q6J("disableInstance",!i.maxLengthExceeded)("tippyProps",e.VKq(12,gt,e.DdM(11,_t))),e.xp6(1),e.Q6J("disabled",i.maxLengthExceeded)}},dependencies:[c.mk,c.sg,c.O5,c.tP,y.cw,y.M2,oe.$],styles:["legend[_ngcontent-%COMP%]   .list-counter[_ngcontent-%COMP%]{padding-top:.175rem}legend[_ngcontent-%COMP%]   .item-icons[_ngcontent-%COMP%]{padding-top:.1rem}"]}),o})();function yt(o,n){if(1&o&&e._UZ(0,"label",4),2&o){const t=e.oxw();e.Q6J("for",t.id)("innerHTML",t.parsedTitle,e.oJD)}}function Ft(o,n){1&o&&(e.TgZ(0,"span",5),e._uU(1," *"),e.qZA())}const xt=function(o,n){return{"form-check-inline":o,"form-switch":n}};let vt=(()=>{class o extends u{constructor(t){super(),this.customFormUtilsService=t,this.defaultOptions={props:{indeterminate:!0,hideLabel:!0,formCheck:"default"}},this.parsedTitle=""}ngOnInit(){this.props.label&&"nolabel"!==this.props.formCheck&&(this.parsedTitle=this.customFormUtilsService.parseBBCode(this.props.label))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(R.d6))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-custom-checkbox"]],features:[e.qOj],decls:4,vars:13,consts:[[1,"form-check",3,"ngClass"],["type","checkbox",1,"form-check-input",3,"indeterminate","formControl","formlyAttributes"],["class","form-check-label",3,"for","innerHTML",4,"ngIf"],["aria-hidden","true",4,"ngIf"],[1,"form-check-label",3,"for","innerHTML"],["aria-hidden","true"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"input",1),e.YNc(2,yt,1,2,"label",2),e.YNc(3,Ft,2,0,"span",3),e.qZA()),2&t&&(e.Q6J("ngClass",e.WLB(10,xt,"inline"===i.props.formCheck||"inline-switch"===i.props.formCheck,"switch"===i.props.formCheck||"inline-switch"===i.props.formCheck)),e.xp6(1),e.ekj("is-invalid",i.showError)("position-static","nolabel"===i.props.formCheck),e.Q6J("indeterminate",i.props.indeterminate&&null==i.formControl.value)("formControl",i.formControl)("formlyAttributes",i.field),e.xp6(1),e.Q6J("ngIf",i.parsedTitle),e.xp6(1),e.Q6J("ngIf",i.props.required&&!0!==i.props.hideRequiredMarker))},dependencies:[c.mk,c.O5,y.JD,d.Wl,d.JJ,d.oH],encapsulation:2,changeDetection:0}),o})();var bt=_(4020);function Ct(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"textarea",2),e._uU(2,"            "),e.qZA(),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("cols",1)("rows",10)("formlyAttributes",t.field)}}function Ot(o,n){1&o&&(e.ynx(0),e.TgZ(1,"p",4),e._UZ(2,"span",5),e.qZA(),e.BQk())}function Tt(o,n){if(1&o&&e._UZ(0,"ngx-monaco-editor",6),2&o){const t=e.oxw(2);e.Udp("height",t.editorHeight),e.Q6J("options",t.editorOptions)("formControl",t.formControl)}}function Mt(o,n){if(1&o&&(e.YNc(0,Ot,3,0,"ng-container",0),e.YNc(1,Tt,1,4,"ng-template",null,3,e.W1O)),2&o){const t=e.MAs(2),i=e.oxw();e.Q6J("ngIf",i.loading)("ngIfElse",t)}}let wt=(()=>{class o extends y.fS{constructor(){super(...arguments),this.touchDevice=bt.eX,this.editorOptions={theme:"vs-dark",language:"json"},this.loading=!0,this.editorHeight="350px"}ngOnInit(){this.touchDevice||(this.field.props.editorOptions&&(this.field.props.editorOptions.height&&(this.editorHeight=this.field.props.editorOptions.height,delete this.field.props.editorOptions.height),this.editorOptions=(0,N.Z)((0,N.Z)({},this.editorOptions),this.field.props.editorOptions)),this.loading=!1)}}return o.\u0275fac=function(){let n;return function(i){return(n||(n=e.n5z(o)))(i||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-code-editor-type"]],features:[e.qOj],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["notTouchDevice",""],[1,"form-control",3,"formControl","cols","rows","formlyAttributes"],["codeEditor",""],[1,"placeholder-glow"],[1,"placeholder","col-12","placeholder-lg"],[1,"d-block","formly-code-editor",3,"options","formControl"]],template:function(t,i){if(1&t&&(e.YNc(0,Ct,3,6,"ng-container",0),e.YNc(1,Mt,3,2,"ng-template",null,1,e.W1O)),2&t){const l=e.MAs(2);e.Q6J("ngIf",i.touchDevice)("ngIfElse",l)}},dependencies:[c.O5,y.JD,d.Fj,d.JJ,Ke,d.oH],encapsulation:2}),o})();var Y=_(5861),re=_(8784);function At(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",4),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.formControl.setValue(void 0))}),e._uU(2," highlight_off "),e.qZA(),e.BQk()}}function Zt(o,n){1&o&&(e.ynx(0),e.TgZ(1,"p",5),e._UZ(2,"span",6),e.qZA(),e.BQk())}function Jt(o,n){if(1&o&&e._UZ(0,"option",10),2&o){const t=n.$implicit;e.Q6J("ngValue",t.id||t.name)("innerText",t.name)}}function It(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"select",8),e.YNc(2,Jt,1,2,"option",9),e.qZA(),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("formlyAttributes",t.field),e.xp6(1),e.Q6J("ngForOf",t.groupsList)}}function Et(o,n){if(1&o&&e._UZ(0,"option",10),2&o){const t=n.$implicit;e.Q6J("ngValue",t.id||t.name)("innerText",t.name)}}function kt(o,n){if(1&o&&(e.TgZ(0,"select",11),e.YNc(1,Et,1,2,"option",9),e.qZA()),2&o){const t=e.oxw(2);e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("formlyAttributes",t.field),e.xp6(1),e.Q6J("ngForOf",t.groupsList)}}function St(o,n){if(1&o&&(e.YNc(0,It,3,5,"ng-container",2),e.YNc(1,kt,2,5,"ng-template",null,7,e.W1O)),2&o){const t=e.MAs(2),i=e.oxw();e.Q6J("ngIf",i.field.props.multiple)("ngIfElse",t)}}const Dt=function(o){return{"no-label":o}};let Qt=(()=>{class o extends y.fS{constructor(t){super(),this.forumService=t,this.loading=!0,this.groupsList=[]}ngOnInit(){var t=this;return(0,Y.Z)(function*(){t.field.defaultValue=void 0,t.field.props.hasOwnProperty("multiple")||(t.field.props.multiple=!0),t.groupsList=(yield t.forumService.getGroups()).sort((i,l)=>i.name.localeCompare(l.name)),t.field.props.keepGroupsWithoutId||(t.groupsList=t.groupsList.filter(i=>i.id>0)),t.loading=!1,t.field.formControl.updateValueAndValidity()})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(re._))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-forum-groups"]],features:[e.qOj],decls:5,vars:6,consts:[[1,"position-relative","wrapper",3,"ngClass"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["formSelect",""],[1,"reset-icon","position-absolute","cursor-pointer","d-block","material-icons","text-danger",3,"click"],[1,"placeholder-glow"],[1,"placeholder","col-12","placeholder-lg"],["single",""],["multiple","",1,"form-select",3,"formControl","formlyAttributes"],[3,"ngValue","innerText",4,"ngFor","ngForOf"],[3,"ngValue","innerText"],[1,"form-select",3,"formControl","formlyAttributes"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,At,3,0,"ng-container",1),e.YNc(2,Zt,3,0,"ng-container",2),e.YNc(3,St,3,2,"ng-template",null,3,e.W1O),e.qZA()),2&t){const l=e.MAs(4);e.Q6J("ngClass",e.VKq(4,Dt,!i.props.label)),e.xp6(1),e.Q6J("ngIf",!i.props.label||void 0!==i.formControl.value),e.xp6(1),e.Q6J("ngIf",i.loading)("ngIfElse",l)}},dependencies:[c.mk,c.sg,c.O5,y.JD,d.YN,d.Kr,d.EJ,d.K7,d.JJ,d.oH],styles:[".reset-icon[_ngcontent-%COMP%]{right:0}.wrapper[_ngcontent-%COMP%]:not(.no-label)   .reset-icon[_ngcontent-%COMP%]{top:calc(-24px - .45rem)}.no-label[_ngcontent-%COMP%]{padding-top:calc(24px + .45rem)}.no-label[_ngcontent-%COMP%]   .reset-icon[_ngcontent-%COMP%]{top:0}"]}),o})();function Ut(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",4),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.formControl.setValue(void 0))}),e._uU(2," highlight_off "),e.qZA(),e.BQk()}}function Pt(o,n){1&o&&(e.ynx(0),e.TgZ(1,"p",5),e._UZ(2,"span",6),e.qZA(),e.BQk())}function Lt(o,n){if(1&o&&(e.ynx(0),e._UZ(1,"option",10),e.BQk()),2&o){const t=n.$implicit;e.xp6(1),e.Q6J("ngValue",t.id)("innerHTML"," - "+t.name,e.oJD)}}function Nt(o,n){if(1&o&&(e.ynx(0),e.YNc(1,Lt,2,2,"ng-container",9),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.subsections)}}function jt(o,n){if(1&o&&(e.ynx(0),e._UZ(1,"option",10),e.YNc(2,Nt,2,1,"ng-container",1),e.BQk()),2&o){const t=n.$implicit;e.xp6(1),e.Q6J("ngValue",t.id)("innerHTML",t.name,e.oJD),e.xp6(1),e.Q6J("ngIf",t.subsections&&t.subsections.length)}}function Yt(o,n){if(1&o&&(e.ynx(0),e._UZ(1,"option",10),e.BQk()),2&o){const t=n.$implicit;e.xp6(1),e.Q6J("ngValue",t)("innerHTML"," -- Sezione ristretta -- #"+t,e.oJD)}}function Vt(o,n){if(1&o&&(e.ynx(0),e.YNc(1,Yt,2,2,"ng-container",9),e.BQk()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.restrictedOrDeletedSections)}}function qt(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"select",8),e.YNc(2,jt,3,3,"ng-container",9),e.YNc(3,Vt,2,1,"ng-container",1),e.qZA(),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("formlyAttributes",t.field),e.xp6(1),e.Q6J("ngForOf",t.sectionsList),e.xp6(1),e.Q6J("ngIf",t.restrictedOrDeletedSections.length>0)}}function Bt(o,n){if(1&o&&(e.ynx(0),e._UZ(1,"option",10),e.BQk()),2&o){const t=n.$implicit;e.xp6(1),e.Q6J("ngValue",t.id)("innerHTML"," - "+t.name,e.oJD)}}function Gt(o,n){if(1&o&&(e.ynx(0),e.YNc(1,Bt,2,2,"ng-container",9),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.subsections)}}function Ht(o,n){if(1&o&&(e.ynx(0),e._UZ(1,"option",10),e.YNc(2,Gt,2,1,"ng-container",1),e.BQk()),2&o){const t=n.$implicit;e.xp6(1),e.Q6J("ngValue",t.id)("innerHTML",t.name,e.oJD),e.xp6(1),e.Q6J("ngIf",t.subsections&&t.subsections.length)}}function Wt(o,n){if(1&o&&(e.ynx(0),e._UZ(1,"option",10),e.BQk()),2&o){const t=n.$implicit;e.xp6(1),e.Q6J("ngValue",t)("innerHTML"," -- Sezione ristretta -- #"+t,e.oJD)}}function Rt(o,n){if(1&o&&(e.ynx(0),e.YNc(1,Wt,2,2,"ng-container",9),e.BQk()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.restrictedOrDeletedSections)}}function $t(o,n){if(1&o&&(e.TgZ(0,"select",11),e.YNc(1,Ht,3,3,"ng-container",9),e.YNc(2,Rt,2,1,"ng-container",1),e.qZA()),2&o){const t=e.oxw(2);e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("formlyAttributes",t.field),e.xp6(1),e.Q6J("ngForOf",t.sectionsList),e.xp6(1),e.Q6J("ngIf",t.restrictedOrDeletedSections.length>0)}}function Xt(o,n){if(1&o&&(e.YNc(0,qt,4,6,"ng-container",2),e.YNc(1,$t,3,6,"ng-template",null,7,e.W1O)),2&o){const t=e.MAs(2),i=e.oxw();e.Q6J("ngIf",i.field.props.multiple)("ngIfElse",t)}}const Kt=function(o){return{"no-label":o}};let zt=(()=>{class o extends y.fS{constructor(t){super(),this.forumService=t,this.loading=!0,this.sectionsList=[],this.restrictedOrDeletedSections=[]}ngOnInit(){var t=this;return(0,Y.Z)(function*(){t.field.defaultValue=void 0,t.field.props.hasOwnProperty("multiple")||(t.field.props.multiple=!0),t.restrictedOrDeletedSections=Array.isArray(t.field.formControl.value)?[...t.field.formControl.value]:[];const i=yield t.forumService.getSections();t.sectionsList=i.map(l=>{const m=t.restrictedOrDeletedSections.indexOf(l.id);return m>-1&&t.restrictedOrDeletedSections.splice(m,1),(0,N.Z)((0,N.Z)({},l),{subsections:t.flattenSubsections(l)})}),t.loading=!1,t.field.formControl.updateValueAndValidity()})()}flattenSubsections(t){let i=[],l=-1;if(t.subsections&&t.subsections.length)for(const m of t.subsections)l=this.restrictedOrDeletedSections.indexOf(m.id),l>-1&&this.restrictedOrDeletedSections.splice(l,1),i.push(m),m.subsections&&(i=[...i,...this.flattenSubsections(m)]);return i}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(re._))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-forum-sections"]],features:[e.qOj],decls:5,vars:6,consts:[[1,"position-relative","wrapper",3,"ngClass"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["formSelect",""],[1,"reset-icon","position-absolute","cursor-pointer","d-block","material-icons","text-danger",3,"click"],[1,"placeholder-glow"],[1,"placeholder","col-12","placeholder-lg"],["single",""],["multiple","",1,"form-select",3,"formControl","formlyAttributes"],[4,"ngFor","ngForOf"],[3,"ngValue","innerHTML"],[1,"form-select",3,"formControl","formlyAttributes"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,Ut,3,0,"ng-container",1),e.YNc(2,Pt,3,0,"ng-container",2),e.YNc(3,Xt,3,2,"ng-template",null,3,e.W1O),e.qZA()),2&t){const l=e.MAs(4);e.Q6J("ngClass",e.VKq(4,Kt,!i.props.label)),e.xp6(1),e.Q6J("ngIf",!i.props.label||void 0!==i.formControl.value),e.xp6(1),e.Q6J("ngIf",i.loading)("ngIfElse",l)}},dependencies:[c.mk,c.sg,c.O5,y.JD,d.YN,d.Kr,d.EJ,d.K7,d.JJ,d.oH],styles:[".reset-icon[_ngcontent-%COMP%]{right:0}.wrapper[_ngcontent-%COMP%]:not(.no-label)   .reset-icon[_ngcontent-%COMP%]{top:calc(-24px - .45rem)}.no-label[_ngcontent-%COMP%]{padding-top:calc(24px + .45rem)}.no-label[_ngcontent-%COMP%]   .reset-icon[_ngcontent-%COMP%]{top:0}"]}),o})();var eo=_(8645),to=_(3620),oo=_(3997),no=_(3019),io=_(4664),ro=_(2096);let le=(()=>{class o{transform(t){let i=document.createElement("TEXTAREA");return i.innerHTML=t,i.value}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275pipe=e.Yjl({name:"decodeHtmlEntitites",type:o,pure:!0}),o})();var lo=_(1410),so=_(7165),ao=_(5661),co=_(8418),po=_(4291),mo=_(9473),uo=_(7357);function fo(o,n){1&o&&(e.TgZ(0,"span",8),e._uU(1,"*"),e.qZA())}function _o(o,n){if(1&o&&(e.TgZ(0,"legend",5)(1,"label",6),e._uU(2),e.YNc(3,fo,2,0,"span",7),e.qZA()()),2&o){const t=e.oxw();e.xp6(1),e.s9C("for",t.id),e.xp6(1),e.hij(" ",t.props.label," "),e.xp6(1),e.Q6J("ngIf",t.props.required)}}function go(o,n){1&o&&e.GkF(0)}function ho(o,n){if(1&o&&e._UZ(0,"div",9),2&o){const t=e.oxw();e.Q6J("innerHTML",t.parsedDescription,e.oJD)}}function yo(o,n){1&o&&(e.TgZ(0,"div",16)(1,"span",17),e._uU(2,"Loading..."),e.qZA()())}function Fo(o,n){if(1&o&&(e.TgZ(0,"div",18),e._UZ(1,"formly-validation-message",19),e.qZA()),2&o){const t=e.oxw(2);e.Udp("display","block"),e.xp6(1),e.Q6J("field",t.field)}}function xo(o,n){1&o&&e._UZ(0,"app-loader",20)}function vo(o,n){1&o&&e._UZ(0,"div",25),2&o&&e.Q6J("innerText","Nessun utente inserito!")}function bo(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"li")(1,"a",28)(2,"div",29),e.NdJ("click",function(l){const T=e.CHM(t).$implicit,Q=e.oxw(4);return e.KtG(Q.removeUser(T,l))}),e.TgZ(3,"div",30),e._uU(4," remove "),e.qZA()(),e._UZ(5,"img",31),e.ALo(6,"uploadsreplace"),e.qZA(),e._UZ(7,"a",32),e.qZA()}if(2&o){const t=n.$implicit,i=e.oxw(4);e.Gre("d-flex flex-column align-items-center user-",i.circuit,""),e.xp6(1),e.Q6J("href",i.baseUrl+t.uid.substring(2),e.LSH),e.xp6(1),e.Q6J("disableOnTouchDevice",!0),e.xp6(3),e.s9C("alt",t.nickname+"'s avatar"),e.Q6J("src",e.lcZ(6,9,t.avatar),e.LSH),e.xp6(2),e.Q6J("innerHTML",t.nickname,e.oJD)("href",i.baseUrl+t.uid.substring(2),e.LSH)}}function Co(o,n){if(1&o&&(e.TgZ(0,"ul",26),e.YNc(1,bo,8,11,"li",27),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.selectedUsers)}}const Oo=function(o){return{"empty-list":o}};function To(o,n){if(1&o&&(e.TgZ(0,"fieldset",21)(1,"legend",22),e._uU(2," Lista utenti "),e.qZA(),e.YNc(3,vo,1,1,"div",23),e.YNc(4,Co,2,1,"ng-template",null,24,e.W1O),e.qZA()),2&o){const t=e.MAs(5),i=e.oxw(2);e.Q6J("ngClass",e.VKq(3,Oo,0===i.selectedUsers.length)),e.xp6(3),e.Q6J("ngIf",0===i.selectedUsers.length)("ngIfElse",t)}}function Mo(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",10)(1,"input",11),e.NdJ("ngModelChange",function(l){e.CHM(t);const m=e.oxw();return e.KtG(m.inputValue=l)})("selectItem",function(l){e.CHM(t);const m=e.oxw();return e.KtG(m.selectUser(l))})("focus",function(l){e.CHM(t);const m=e.oxw();return e.KtG(m.focus.next(l.target.value))}),e.qZA(),e.YNc(2,yo,3,0,"div",12),e.qZA(),e.YNc(3,Fo,2,3,"div",13),e.YNc(4,xo,1,0,"app-loader",14),e.YNc(5,To,6,5,"ng-template",null,15,e.W1O)}if(2&o){const t=e.MAs(6),i=e.oxw();e.xp6(1),e.ekj("is-invalid",i.showError),e.Q6J("ngModel",i.inputValue)("formlyAttributes",i.field)("ngbTypeahead",i.search)("editable",!1)("inputFormatter",i.inputFormatter)("resultFormatter",i.outputFormatter),e.xp6(1),e.Q6J("ngIf",i.searching),e.xp6(1),e.Q6J("ngIf",i.showError),e.xp6(1),e.Q6J("ngIf",i.loading)("ngIfElse",t)}}let wo=(()=>{class o extends y.fS{constructor(t,i,l,m,T,Q){var D;if(super(),this.userService=t,this.globalsService=i,this.changeDetectorRef=l,this.toastService=m,this.customFormUtilsService=T,this.decodeHtmlEntitiesPipe=Q,this.inputValue="",this.selectedUsers=[],this.loading=!0,this.searching=!1,this.focus=new eo.x,this.parsedDescription="",this.formlyFieldValues=[],this.lastSearchedValueWithoutResult="",this.outputFormatter=L=>L?L.nickname.indexOf("&")>-1?this.decodeHtmlEntitiesPipe.transform(L.nickname):L.nickname:"",this.search=L=>{const K=L.pipe((0,to.b)(1e3),(0,oo.x)());return(0,no.T)(K,this.focus).pipe((0,J.b)(()=>this.setSearching(!0)),(0,io.w)(se=>se.length<3?(0,ro.of)([]):this.getUsers(se)),(0,J.b)(()=>this.setSearching(!1)))},this.circuit=(null===(D=this.globalsService.credentials)||void 0===D?void 0:D.site.short)||"",!this.circuit)throw new Error("Missing credentials!");this.baseUrl=so.hD[this.circuit]+"/?act=Profile&MID="}ngOnInit(){var t=this;return(0,Y.Z)(function*(){t.parsedDescription=t.props.description?t.customFormUtilsService.parseBBCode(t.props.description):"",t.formlyFieldValues=Array.isArray(t.formControl.value)?t.formControl.value:Array.isArray(t.field.defaultValue)?t.field.defaultValue:[],yield t.getSelectedUsersFromApi(),t.loading=!1,t.formControl.updateValueAndValidity(),t.formControl.registerOnChange(()=>{t.formControlChangeCallback()})})()}inputFormatter(t){return t.nickname}getUsers(t){var i=this;return(0,Y.Z)(function*(){if(i.lastSearchedValueWithoutResult&&0===t.indexOf(i.lastSearchedValueWithoutResult))return[];const l=yield i.userService.searchUserByName(t);return 0===l.length&&(i.lastSearchedValueWithoutResult=t),l})()}setSearching(t){this.searching=t,this.changeDetectorRef.detectChanges()}selectUser(t){const i=t.item,l=Number(i.uid.substring(2));if(this.formlyFieldValues.includes(l))return this.toastService.show({content:`L'utente <strong>${i.nickname}</strong> \xe8 gi\xe0 stato aggiunto alla lista!`}),void(this.inputValue="");this.formlyFieldValues.push(l),this.selectedUsers.push(i),t.preventDefault(),this.inputValue="",this.formControl.setValue([...this.formlyFieldValues])}removeUser(t,i){i.preventDefault(),i.stopPropagation();const l=Number(t.uid.substring(2));this.formlyFieldValues=this.formlyFieldValues.filter(m=>m!==l),this.selectedUsers=this.selectedUsers.filter(m=>m.uid!==t.uid),this.formControl.setValue([...this.formlyFieldValues])}formControlChangeCallback(){var t=this;return(0,Y.Z)(function*(){if(!Array.isArray(t.formControl.value))return;let i=!1;if(t.formControl.value.length!==t.formlyFieldValues.length)i=!0;else for(const l of t.formControl.value)if(!t.formlyFieldValues.includes(l)){i=!0;break}i&&(t.formlyFieldValues=t.formControl.value,t.loading=!0,t.changeDetectorRef.detectChanges(),yield t.getSelectedUsersFromApi(),t.loading=!1,t.changeDetectorRef.detectChanges())})()}getSelectedUsersFromApi(){var t=this;return(0,Y.Z)(function*(){t.selectedUsers=0!==t.formlyFieldValues.length?(yield t.userService.getDetailsFromUids(t.formlyFieldValues.map(i=>t.circuit+i))).sort((i,l)=>i.nickname>l.nickname?1:l.nickname>i.nickname?-1:0):[]})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(co.K),e.Y36(lo.d),e.Y36(e.sBO),e.Y36(ao.k),e.Y36(R.d6),e.Y36(le))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-forum-users"]],features:[e._Bn([le]),e.qOj],decls:6,vars:5,consts:[[1,"mb-3","rounded","px-3","pt-2","pb-3","formly-fieldset"],["class","legend-reset fs-reset mb-0 px-2 mw-100 lh-1 py-1",4,"ngIf"],[4,"ngTemplateOutlet"],["class","form-text text-muted",3,"innerHTML",4,"ngIf"],["fieldContet",""],[1,"legend-reset","fs-reset","mb-0","px-2","mw-100","lh-1","py-1"],[1,"form-label","mb-0","mw-100","text-truncate",3,"for"],["aria-hidden","true",4,"ngIf"],["aria-hidden","true"],[1,"form-text","text-muted",3,"innerHTML"],[1,"position-relative"],["type","text","container","body",1,"form-control",3,"ngModel","formlyAttributes","ngbTypeahead","editable","inputFormatter","resultFormatter","ngModelChange","selectItem","focus"],["class","spinner-border spinner-border-sm text-primary position-absolute","role","status",4,"ngIf"],["class","invalid-feedback",3,"display",4,"ngIf"],["message","Recupero utenti","class","d-block mt-3",4,"ngIf","ngIfElse"],["userList",""],["role","status",1,"spinner-border","spinner-border-sm","text-primary","position-absolute"],[1,"visually-hidden"],[1,"invalid-feedback"],[3,"field"],["message","Recupero utenti",1,"d-block","mt-3"],[1,"formly-user-list-container","rounded","px-3","pt-2","mb-3","mt-2",3,"ngClass"],[1,"legend-reset","fs-reset","mb-0","px-2","pb-1"],["class","alert alert-primary text-center mb-0 fw-bold",3,"innerText",4,"ngIf","ngIfElse"],["noEmpty",""],[1,"alert","alert-primary","text-center","mb-0","fw-bold",3,"innerText"],[1,"formly-user-list","list-unstyled","mb-0","d-grid","px-2"],[3,"class",4,"ngFor","ngForOf"],["target","_blank",1,"avatar-container","rounded-circle","d-block","position-relative",3,"href"],["appTippy","Rimuovi",1,"remove-user","alert","alert-danger","position-absolute","cursor-pointer","mb-0","py-0","px-1",3,"disableOnTouchDevice","click"],[1,"material-icons","d-block","fs-reset"],["appImage","",1,"d-block","image-cover","rounded-circle",3,"src","alt"],["target","_blank",1,"d-block","fw-bold","mt-1","nickname","text-truncate","mw-100",3,"innerHTML","href"]],template:function(t,i){if(1&t&&(e.TgZ(0,"fieldset",0),e.YNc(1,_o,4,3,"legend",1),e.YNc(2,go,1,0,"ng-container",2),e.YNc(3,ho,1,1,"div",3),e.qZA(),e.YNc(4,Mo,7,12,"ng-template",null,4,e.W1O)),2&t){const l=e.MAs(5);e.ekj("has-error",i.formControl.invalid),e.xp6(1),e.Q6J("ngIf",i.props.label),e.xp6(1),e.Q6J("ngTemplateOutlet",l),e.xp6(1),e.Q6J("ngIf",i.parsedDescription)}},dependencies:[c.mk,c.sg,c.O5,c.tP,y.JD,y.M2,d.Fj,d.JJ,d.On,po.t,mo.R,te.dR,oe.$,uo.g],styles:[".spinner-border[_ngcontent-%COMP%]{top:calc(50% - 8px);right:10px}fieldset.formly-user-list-container[_ngcontent-%COMP%]{border:1px dashed var(--ei-gray-500)}fieldset.formly-user-list-container[_ngcontent-%COMP%]:not(.empty-list){padding-bottom:.75rem}fieldset.formly-user-list-container.empty-list[_ngcontent-%COMP%]{padding-bottom:1rem}.formly-user-list[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(60px,1fr));gap:1rem}.formly-user-list[_ngcontent-%COMP%]   .remove-user[_ngcontent-%COMP%]{top:0;left:-8px}.formly-user-list[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{width:60px;height:60px;border:2px solid}.formly-user-list[_ngcontent-%COMP%]   .user-ff[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{border-color:#58a72e}.formly-user-list[_ngcontent-%COMP%]   .user-ff[_ngcontent-%COMP%]   .nickname[_ngcontent-%COMP%]{color:#58a72e!important}.formly-user-list[_ngcontent-%COMP%]   .user-fc[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{border-color:#0082cd}.formly-user-list[_ngcontent-%COMP%]   .user-fc[_ngcontent-%COMP%]   .nickname[_ngcontent-%COMP%]{color:#0082cd!important}.formly-user-list[_ngcontent-%COMP%]   .user-bf[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{border-color:#e67f22}.formly-user-list[_ngcontent-%COMP%]   .user-bf[_ngcontent-%COMP%]   .nickname[_ngcontent-%COMP%]{color:#e67f22!important}@media (min-width: 960px){.formly-user-list[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(75px,1fr));gap:1.5rem}.formly-user-list[_ngcontent-%COMP%]   .remove-user[_ngcontent-%COMP%]{top:4px}.formly-user-list[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{width:75px;height:75px}}"]}),o})(),Ao=(()=>{class o extends y.fS{constructor(){super(...arguments),this.defaultOptions={props:{label:""}}}}return o.\u0275fac=function(){let n;return function(i){return(n||(n=e.n5z(o)))(i||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-label"]],features:[e.qOj],decls:2,vars:1,template:function(t,i){1&t&&(e.TgZ(0,"h5"),e._uU(1),e.qZA()),2&t&&(e.xp6(1),e.Oqu(i.props.label))},encapsulation:2,changeDetection:0}),o})();function Zo(o,n){if(1&o&&(e.TgZ(0,"legend"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.props.label)}}function Jo(o,n){if(1&o&&e._UZ(0,"p",5),2&o){const t=e.oxw();e.Q6J("innerHTML",t.parsedDescription,e.oJD)}}function Io(o,n){if(1&o&&(e.TgZ(0,"div",6),e._UZ(1,"formly-validation-message",7),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("field",t.field)}}function Eo(o,n){1&o&&e._UZ(0,"formly-field",7),2&o&&e.Q6J("field",n.$implicit)}let ko=(()=>{class o extends y.fS{constructor(t){super(),this.customForumUtilsService=t,this.parsedDescription=""}ngOnInit(){this.props.description&&(this.parsedDescription=this.customForumUtilsService.parseBBCode(this.props.description))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(R.d6))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-multi-schema"]],features:[e.qOj],decls:5,vars:4,consts:[[1,"pt-3","px-3","rounded","border","mt-2"],[4,"ngIf"],[3,"innerHTML",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],[3,"field",4,"ngFor","ngForOf"],[3,"innerHTML"],["role","alert",1,"alert","alert-danger"],[3,"field"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Zo,2,1,"legend",1),e.YNc(2,Jo,1,1,"p",2),e.YNc(3,Io,2,1,"div",3),e.YNc(4,Eo,1,1,"formly-field",4),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",i.props.label),e.xp6(1),e.Q6J("ngIf",i.parsedDescription),e.xp6(1),e.Q6J("ngIf",i.showError&&i.formControl.errors),e.xp6(1),e.Q6J("ngForOf",i.field.fieldGroup))},dependencies:[c.sg,c.O5,y.cw,y.M2],encapsulation:2}),o})();function So(o,n){if(1&o&&(e.TgZ(0,"legend",6),e._UZ(1,"div",7),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("innerHTML",t.parsedTitle,e.oJD)}}function Do(o,n){1&o&&e.GkF(0)}const Qo=function(o){return{"has-error":o}};function Uo(o,n){if(1&o&&(e.TgZ(0,"fieldset",3),e.YNc(1,So,2,1,"legend",4),e.YNc(2,Do,1,0,"ng-container",5),e.qZA()),2&o){const t=e.oxw(),i=e.MAs(4);e.Q6J("ngClass",e.VKq(3,Qo,t.formControl.invalid)),e.xp6(1),e.Q6J("ngIf",t.parsedTitle),e.xp6(1),e.Q6J("ngTemplateOutlet",i)}}function Po(o,n){if(1&o&&e._UZ(0,"div",10),2&o){const t=e.oxw(2);e.Q6J("innerHTML",t.parsedTitle,e.oJD)}}function Lo(o,n){1&o&&e.GkF(0)}function No(o,n){if(1&o&&(e.TgZ(0,"div",8),e.YNc(1,Po,1,1,"div",9),e.YNc(2,Lo,1,0,"ng-container",5),e.qZA()),2&o){const t=e.oxw(),i=e.MAs(4);e.xp6(1),e.Q6J("ngIf",t.parsedTitle),e.xp6(1),e.Q6J("ngTemplateOutlet",i)}}function jo(o,n){if(1&o&&e._UZ(0,"p",14),2&o){const t=e.oxw(2);e.Q6J("innerHTML",t.parsedDescription,e.oJD)}}function Yo(o,n){if(1&o&&(e.TgZ(0,"div",15),e._UZ(1,"formly-validation-message",16),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("field",t.field)}}function Vo(o,n){1&o&&e._UZ(0,"formly-field",16),2&o&&e.Q6J("field",n.$implicit)}function qo(o,n){if(1&o&&(e.YNc(0,jo,1,1,"p",11),e.YNc(1,Yo,2,1,"div",12),e.YNc(2,Vo,1,1,"formly-field",13)),2&o){const t=e.oxw();e.Q6J("ngIf",t.parsedDescription),e.xp6(1),e.Q6J("ngIf",t.showError&&t.formControl.errors),e.xp6(1),e.Q6J("ngForOf",t.field.fieldGroup)}}let Bo=(()=>{class o extends y.fS{constructor(t){super(),this.customFormUtilsService=t,this.parsedTitle="",this.parsedDescription=""}ngOnInit(){this.parsedDescription=this.props.description?this.customFormUtilsService.parseBBCode(this.props.description):"",this.parsedTitle=this.props.label?this.customFormUtilsService.parseBBCode(this.props.label):""}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(R.d6))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-object"]],features:[e.qOj],decls:5,vars:2,consts:[["class","px-3 mb-3 pt-1 rounded formly-fieldset",3,"ngClass",4,"ngIf","ngIfElse"],["noFieldset",""],["objectFieldContent",""],[1,"px-3","mb-3","pt-1","rounded","formly-fieldset",3,"ngClass"],["class","legend-reset fs-xl px-2 mb-0 pb-1 mw-100 d-flex align-items-center",4,"ngIf"],[4,"ngTemplateOutlet"],[1,"legend-reset","fs-xl","px-2","mb-0","pb-1","mw-100","d-flex","align-items-center"],[1,"mw-100","text-truncate",3,"innerHTML"],[1,"mb-3"],["class","h4",3,"innerHTML",4,"ngIf"],[1,"h4",3,"innerHTML"],["class","text-justify mt-2",3,"innerHTML",4,"ngIf"],["class","alert alert-danger formly-field-object-error text-center","role","alert",4,"ngIf"],[3,"field",4,"ngFor","ngForOf"],[1,"text-justify","mt-2",3,"innerHTML"],["role","alert",1,"alert","alert-danger","formly-field-object-error","text-center"],[3,"field"]],template:function(t,i){if(1&t&&(e.YNc(0,Uo,3,5,"fieldset",0),e.YNc(1,No,3,2,"ng-template",null,1,e.W1O),e.YNc(3,qo,3,3,"ng-template",null,2,e.W1O)),2&t){const l=e.MAs(2);e.Q6J("ngIf",i.props.fieldsetTemplate)("ngIfElse",l)}},dependencies:[c.mk,c.sg,c.O5,c.tP,y.cw,y.M2],encapsulation:2}),o})(),Go=(()=>{class o extends y.fS{constructor(){super(...arguments),this.defaultOptions={props:{cols:1,rows:10}}}}return o.\u0275fac=function(){let n;return function(i){return(n||(n=e.n5z(o)))(i||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-textarea"]],features:[e.qOj],decls:2,vars:6,consts:[[1,"form-control",3,"formControl","cols","rows","formlyAttributes"]],template:function(t,i){1&t&&(e.TgZ(0,"textarea",0),e._uU(1,"        "),e.qZA()),2&t&&(e.ekj("is-invalid",i.showError),e.Q6J("formControl",i.formControl)("cols",i.props.cols)("rows",i.props.rows)("formlyAttributes",i.field))},dependencies:[y.JD,d.Fj,d.JJ,d.oH],encapsulation:2,changeDetection:0}),o})();function Ro(o,n){return`Questo campo deve avere almeno ${n.props.minLength} caratteri`}function $o(o,n){return`Questo campo pu\xf2 avere al massimo ${n.props.maxLength} caratteri`}function Xo(o,n){return`Questo campo deve avere un valore minimo di ${n.props.min}`}function Ko(o,n){return`Questo campo pu\xf2 avere un valore massimo di ${n.props.max}`}function zo(){return"Il campo non rispetta lo schema richiesto"}function en(o,n){return`Questo campo deve avere almeno ${n.props.minItems} element${1===n.props.minItems?"o":"i"}!`}function tn(o,n){return`Questo campo pu\xf2 avere al massimo ${n.props.maxItems} element${1===n.props.maxItems?"o":"i"}!`}function on(o,n){return`Questo campo deve essere un multiplo di ${n.props.step}`}function nn(){return{extras:{renderFormlyFieldElement:!1},wrappers:[{name:"form-field",component:U.uj}],validationMessages:[{name:"required",message:"Compila questo campo!"},{name:"minLength",message:Ro},{name:"maxLength",message:$o},{name:"min",message:Xo},{name:"max",message:Ko},{name:"minItems",message:en},{name:"maxItems",message:tn},{name:"multipleOf",message:on},{name:"pattern",message:zo},{name:"uniqueItems",message:"Non possono esserci elementi uguali fra loro!"}],types:[{name:"array",component:ht},{name:"code-editor",component:wt,wrappers:["form-field"]},{name:"object",component:Bo},{name:"textarea",component:Go},{name:"forum-groups",component:Qt,wrappers:["form-field"]},{name:"forum-sections",component:zt,wrappers:["form-field"]},{name:"label",component:Ao},{name:"forum-users",component:wo},{name:"multischema",component:ko},{name:"boolean",component:vt,wrappers:["form-field"]}]}}var rn=_(3038),ln=_(5063);let sn=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[{provide:y.l7,multi:!0,useFactory:nn}],imports:[c.ez,U.ZU,Be,y.X0.forRoot(),d.u5,Ge.$,U.q,ze,te.ZS,d.UX,rn.G,ln.g]}),o})()},336:(z,V,_)=>{_.d(V,{c:()=>I});var c=_(9376),U=_(91),e=_(1413),y=_(5879),d=_(6223),k=_(5545),q=_(9397);const B=["key"],G=["allOf"];function O(u){return""===u||null==u}function P(u){return null!=u&&"object"==typeof u&&!Array.isArray(u)}function a(u){return Number.isInteger?Number.isInteger(u):"number"==typeof u&&Math.floor(u)===u}function F(u){return"object"==typeof u&&(u.hasOwnProperty("const")||u.enum&&1===u.enum.length)}function Z(u){if(!u.fieldGroup)return(0,k._S)(u)&&void 0!==(0,k.Hl)(u)?1:0;const S=u.fieldGroup.reduce((r,g)=>Z(g)+r,0);if(0===S&&(0,k._S)(u)){const r=(0,k.Hl)(u);if(null===r||void 0!==r&&(u.fieldArray&&Array.isArray(r)||!u.fieldArray&&P(r)))return 1}return S}let I=(()=>{class u{toFieldConfig(r,g){return this._toFieldConfig(r,(0,e.Z)({schema:r},g||{}))}_toFieldConfig(r,g){var v;let{key:b}=g,p=(0,U.Z)(g,B);r=this.resolveSchema(r,p);const x=this.guessSchemaType(r);let s={type:x[0],defaultValue:r.default,props:{label:r.title,readonly:r.readOnly,description:r.description}};switch(null!=b&&(s.key=b),!p.ignoreDefault&&(r.readOnly||p.readOnly)&&(s.props.disabled=!0,p=(0,e.Z)((0,e.Z)({},p),{},{readOnly:!0})),p.resetOnHide&&(s.resetOnHide=!0),b&&p.strict&&this.addValidator(s,"type",(f,C)=>{const h=(0,k.Hl)(C);if(null!=h)switch(s.type){case"string":return"string"==typeof h;case"integer":return a(h);case"number":return"number"==typeof h;case"object":return P(h);case"array":return Array.isArray(h)}return!0}),!1===p.shareFormControl&&(s.shareFormControl=!1),p.ignoreDefault&&delete s.defaultValue,this.addValidator(s,"type",{schemaType:x,expression:({value:f})=>{if(void 0===f||null===f&&-1!==x.indexOf("null"))return!0;switch(x[0]){case"null":return null===typeof f;case"string":return"string"==typeof f;case"integer":return a(f);case"number":return"number"==typeof f;case"object":return P(f);case"array":return Array.isArray(f)}return!0}}),s.type){case"number":case"integer":s.parsers=[f=>O(f)?void 0:Number(f)],r.hasOwnProperty("minimum")&&(s.props.min=r.minimum),r.hasOwnProperty("maximum")&&(s.props.max=r.maximum),r.hasOwnProperty("exclusiveMinimum")&&(s.props.exclusiveMinimum=r.exclusiveMinimum,this.addValidator(s,"exclusiveMinimum",({value:f})=>O(f)||f>r.exclusiveMinimum)),r.hasOwnProperty("exclusiveMaximum")&&(s.props.exclusiveMaximum=r.exclusiveMaximum,this.addValidator(s,"exclusiveMaximum",({value:f})=>O(f)||f<r.exclusiveMaximum)),r.hasOwnProperty("multipleOf")&&(s.props.step=r.multipleOf,this.addValidator(s,"multipleOf",({value:f})=>{if(O(f)||"number"!=typeof f||0===f||r.multipleOf<=0)return!0;const C=Math.pow(10,function H(u){if(!isFinite(u))return 0;let S=1,r=0;for(;Math.round(u*S)/S!==u;)S*=10,r++;return r}(r.multipleOf));return Math.round(f*C)%Math.round(r.multipleOf*C)==0}));break;case"string":s.parsers=[f=>(-1!==x.indexOf("null")?f=O(f)?null:f:s.props.required||(f=""===f?void 0:f),f)],["minLength","maxLength","pattern"].forEach(f=>{r.hasOwnProperty(f)&&(s.props[f]=r[f])});break;case"object":{s.fieldGroup||(s.fieldGroup=[]);const{propDeps:f,schemaDeps:C}=this.resolveDependencies(r);Object.keys(r.properties||{}).forEach(h=>{const A=Array.isArray(r.required)&&-1!==r.required.indexOf(h),J=this._toFieldConfig(r.properties[h],(0,e.Z)((0,e.Z)({},p),{},{key:h,isOptional:p.isOptional||!A}));if(s.fieldGroup.push(J),(A||f[h])&&(J.expressions=(0,e.Z)((0,e.Z)({},J.expressions||{}),{},{"props.required":E=>{let w=E.parent;const M=E.fieldGroup&&null!=E.key?w.model:E.model;for(;null==w.key&&w.parent;)w=w.parent;return!!(M||w&&w.props&&w.props.required)&&(!(!Array.isArray(r.required)||-1===r.required.indexOf(h))||f[h]&&E.model&&f[h].some(W=>!O(E.model[W])))}})),C[h]){const E=M=>M.hasOwnProperty("const")?M.const:M.enum[0],w=C[h].oneOf;w&&w.every(M=>M.properties&&M.properties[h]&&F(M.properties[h]))?w.forEach(M=>{const j=M.properties,{[h]:W}=j,X=(0,U.Z)(j,[h].map(c.Z));s.fieldGroup.push((0,e.Z)((0,e.Z)({},this._toFieldConfig((0,e.Z)((0,e.Z)({},M),{},{properties:X}),(0,e.Z)((0,e.Z)({},p),{},{resetOnHide:!0}))),{},{expressions:{hide:$=>!$.model||E(W)!==$.model[h]}}))}):s.fieldGroup.push((0,e.Z)((0,e.Z)({},this._toFieldConfig(C[h],p)),{},{expressions:{hide:M=>!M.model||O(M.model[h])}}))}}),r.oneOf&&s.fieldGroup.push(this.resolveMultiSchema("oneOf",r.oneOf,(0,e.Z)((0,e.Z)({},p),{},{shareFormControl:!1}))),r.anyOf&&s.fieldGroup.push(this.resolveMultiSchema("anyOf",r.anyOf,p));break}case"array":r.hasOwnProperty("minItems")&&(s.props.minItems=r.minItems,this.addValidator(s,"minItems",(f,C)=>{const h=(0,k.Hl)(C);return O(h)||h.length>=r.minItems}),!p.isOptional&&r.minItems>0&&void 0===s.defaultValue&&(s.defaultValue=Array.from(new Array(r.minItems)))),r.hasOwnProperty("maxItems")&&(s.props.maxItems=r.maxItems,this.addValidator(s,"maxItems",(f,C)=>{const h=(0,k.Hl)(C);return O(h)||h.length<=r.maxItems})),r.hasOwnProperty("uniqueItems")&&(s.props.uniqueItems=r.uniqueItems,this.addValidator(s,"uniqueItems",(f,C)=>{const h=(0,k.Hl)(C);return!(!O(h)&&r.uniqueItems)||Array.from(new Set(h.map(J=>JSON.stringify(J)))).length===h.length})),r.items&&!Array.isArray(r.items)&&(r.items=this.resolveSchema(r.items,p)),this.isEnum(r)||(s.fieldArray=f=>{if(!Array.isArray(r.items)){const J=r.items?this._toFieldConfig(r.items,p):{};return J.props&&(J.props.required=!0),J}const C=f.fieldGroup?f.fieldGroup.length:0,h=r.items[C]?r.items[C]:r.additionalItems,A=h?this._toFieldConfig(h,p):{};return A.props&&(A.props.required=!0),r.items[C]&&(A.props.removable=!1),A})}return r.hasOwnProperty("const")&&(s.props.const=r.const,this.addValidator(s,"const",({value:f})=>f===r.const),s.type||(s.defaultValue=r.const)),this.isEnum(r)&&(s.props.multiple="array"===s.type,s.type="enum",s.props.options=this.toEnumOptions(r)),r.oneOf&&!s.type&&(delete s.key,s.fieldGroup=[this.resolveMultiSchema("oneOf",r.oneOf,(0,e.Z)((0,e.Z)({},p),{},{key:b,shareFormControl:!1}))]),r.oneOf&&!s.type&&(delete s.key,s.fieldGroup=[this.resolveMultiSchema("oneOf",r.oneOf,(0,e.Z)((0,e.Z)({},p),{},{key:b,shareFormControl:!1}))]),null!==(v=r.widget)&&void 0!==v&&v.formlyConfig&&(s=this.mergeFields(s,r.widget.formlyConfig)),s.templateOptions=s.props,p.map?p.map(s,r):s}resolveSchema(r,g){return r&&r.$ref&&(r=this.resolveDefinition(r,g)),r&&r.allOf&&(r=this.resolveAllOf(r,g)),r}resolveAllOf(r,g){let{allOf:v}=r,b=(0,U.Z)(r,G);if(!v.length)throw Error(`allOf array can not be empty ${v}.`);return v.reduce((p,x)=>(x=this.resolveSchema(x,g),p.required&&x.required&&(p.required=[...p.required,...x.required]),x.uniqueItems&&(p.uniqueItems=x.uniqueItems),["maxLength","maximum","exclusiveMaximum","maxItems","maxProperties"].forEach(s=>{!O(p[s])&&!O(x[s])&&(p[s]=p[s]<x[s]?p[s]:x[s])}),["minLength","minimum","exclusiveMinimum","minItems","minProperties"].forEach(s=>{!O(p[s])&&!O(x[s])&&(p[s]=p[s]>x[s]?p[s]:x[s])}),(0,k.Du)(p,x)),b)}resolveMultiSchema(r,g,v){return{type:"multischema",fieldGroup:[{type:"enum",defaultValue:-1,props:{multiple:"anyOf"===r,options:g.map((b,p)=>({label:b.title,value:p,disabled:b.readOnly}))},hooks:{onInit:b=>b.formControl.valueChanges.pipe((0,q.b)(()=>b.options.detectChanges(b.parent)))}},{fieldGroup:g.map((b,p)=>(0,e.Z)((0,e.Z)({},this._toFieldConfig(b,(0,e.Z)((0,e.Z)({},v),{},{resetOnHide:!0}))),{},{expressions:{hide:(x,s)=>{const f=x.parent.parent.fieldGroup[0].formControl;if(-1===f.value||s){let C=x.parent.fieldGroup.map((h,A)=>[h,A,this.isFieldValid(h,A,g,v)]).sort(([h,,A],[J,,E])=>{if(A!==E)return E?1:-1;const w=Z(h),M=Z(J);return w===M&&h.props.disabled===J.props.disabled?0:M>w?1:-1}).map(([,h])=>h);if("anyOf"===r){const h=C.filter(A=>Z(x.parent.fieldGroup[A]));C=h.length>0?h:[C[0]||0]}C=C.length>0?C:[0],f.setValue("anyOf"===r?C:C[0])}return Array.isArray(f.value)?-1===f.value.indexOf(p):f.value!==p}}}))}]}}resolveDefinition(r,g){const[v,b]=r.$ref.split("#/");if(v)throw Error(`Remote schemas for ${r.$ref} not supported yet.`);const p=b?b.split("/").reduce((x,s)=>null!=x&&x.hasOwnProperty(s)?x[s]:null,g.schema):null;if(!p)throw Error(`Cannot find a definition for ${r.$ref}.`);return p.$ref?this.resolveDefinition(p,g):(0,e.Z)((0,e.Z)({},p),["title","description","default","widget"].reduce((x,s)=>(r.hasOwnProperty(s)&&(x[s]=r[s]),x),{}))}resolveDependencies(r){const g={},v={};return Object.keys(r.dependencies||{}).forEach(b=>{const p=r.dependencies[b];Array.isArray(p)?p.forEach(x=>{g[x]?g[x].push(b):g[x]=[b]}):v[b]=p}),{propDeps:g,schemaDeps:v}}guessSchemaType(r){const g=null==r?void 0:r.type;return!g&&null!=r&&r.properties?["object"]:Array.isArray(g)?1===g.length?g:2===g.length&&-1!==g.indexOf("null")?g.sort(v=>"null"==v?1:-1):g:g?[g]:[]}addValidator(r,g,v){r.validators=r.validators||{},r.validators[g]=v}isEnum(r){return!!r.enum||r.anyOf&&r.anyOf.every(F)||r.oneOf&&r.oneOf.every(F)||r.uniqueItems&&r.items&&!Array.isArray(r.items)&&this.isEnum(r.items)}toEnumOptions(r){if(r.enum)return r.enum.map(v=>({value:v,label:v}));const g=v=>{const b=v.hasOwnProperty("const")?v.const:v.enum[0],p={value:b,label:v.title||b};return v.readOnly&&(p.disabled=!0),p};return r.anyOf?r.anyOf.map(g):r.oneOf?r.oneOf.map(g):this.toEnumOptions(r.items)}isFieldValid(r,g,v,b){r._schemasFields||(Object.defineProperty(r,"_schemasFields",{enumerable:!1,writable:!0,configurable:!0}),r._schemasFields={});let p=r._schemasFields[g];const x=r.model?(0,k.kg)(r.model):r.fieldArray?[]:{};return p?(p.model=x,r.options.build(p)):p=r._schemasFields[g]=r.options.build({form:Array.isArray(x)?new d.Oe([]):new d.cw({}),fieldGroup:[this._toFieldConfig(v[g],(0,e.Z)((0,e.Z)({},b),{},{resetOnHide:!0,ignoreDefault:!0,map:null,strict:!0}))],model:x,options:{}}),p.form.valid}mergeFields(r,g){for(let v in g){const b="templateOptions"===v?"props":v;P(r[b])&&P(g[v])?r[b]=this.mergeFields(r[b],g[v]):null!=g[v]&&(r[b]=g[v])}return r}}return u.\u0275fac=function(r){return new(r||u)},u.\u0275prov=y.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()}}]);