"use strict";(self.webpackChunkboard=self.webpackChunkboard||[]).push([[934],{2365:(C,f,n)=>{n.d(f,{s:()=>D});var u=n(5861),p=n(1309),e=n(4650),v=n(586),d=n(8367),m=n(3450);const _=["modal"];let D=(()=>{class c{constructor(r,i){this.scriptDevService=r,this.toastService=i,this.scriptName="",this.scriptId=0,this.cachePendingEvent=new e.vpe,this.pendingRequest=!1}ngOnInit(){}open(){this.modalComponent.open()}deleteCache(){var r=this;return(0,u.Z)(function*(){r.pendingRequest?r.toastService.advice(p.V.REQUEST_PENDING):(r.pendingRequest=!0,r.cachePendingEvent.emit(r.scriptId),r.modalComponent.close("Cache button click"),r.scriptId>0&&(yield r.scriptDevService.deleteScriptCache(r.scriptId))?r.toastService.show({content:`Cache dello script <strong>${r.scriptName}</strong> cancellata correttamente!`}):r.toastService.advice(p.V.GENERIC),r.pendingRequest=!1,r.cachePendingEvent.emit(0))})()}}return c.\u0275fac=function(r){return new(r||c)(e.Y36(v.N),e.Y36(d.k))},c.\u0275cmp=e.Xpm({type:c,selectors:[["app-script-dev-cache"]],viewQuery:function(r,i){if(1&r&&e.Gf(_,5),2&r){let o;e.iGM(o=e.CRH())&&(i.modalComponent=o.first)}},inputs:{scriptName:"scriptName",scriptId:"scriptId"},outputs:{cachePendingEvent:"cachePendingEvent"},decls:35,vars:4,consts:[["title","Cache degli script",3,"disableCloseButton"],["modal",""],[1,"fst-italic"],[1,"text-uppercase","fw-bold","text-decoration-underline",3,"innerText"],[3,"innerText"],["footer",""],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(r,i){if(1&r){const o=e.EpF();e.TgZ(0,"app-modal",0,1)(2,"p"),e._uU(3," Al fine di garantire che gli script vengano serviti rapidamente e per evitare carichi eccessivi sul server, i file javascript indicati nelle impostazioni degli script sono sottoposti a cache. In genere, ci\xf2 non rappresenta un problema e non viene notato n\xe9 dagli sviluppatori n\xe9 dagli utenti. "),e.qZA(),e.TgZ(4,"h6",2),e._uU(5,"Aggiornare la cache"),e.qZA(),e.TgZ(6,"p"),e._uU(7," Quando viene effettuata una modifica al file javascript, se questo \xe8 caricato sulle repositories di git appositamente pensate e dedicate a questo scopo, la cache dello script viene "),e.TgZ(8,"strong"),e._uU(9,"automaticamente"),e.qZA(),e._uU(10," aggiornata. Nonostante ci\xf2, in alcune limitate circostanze, ad esempio in caso di modifiche "),e.TgZ(11,"em"),e._uU(12,"breaking"),e.qZA(),e._uU(13," o essenziali per il funzionamento dello script stesso, pu\xf2 risultare necessario forzare l'aggiornamento della cache. Per fare ci\xf2, \xe8 sufficiente cliccare sul pulsante "),e.TgZ(14,"em"),e._uU(15,"Conferma"),e.qZA(),e._uU(16," nel footer, dopo essersi accertati che lo script selezionato sia effettivamente quello di cui si desidera aggiornare la cache."),e._UZ(17,"br")(18,"br"),e._uU(19," Lo strumento di aggiornamento della cache comporta un carico aggiuntivo sul server, per questo motivo dovrebbe essere "),e.TgZ(20,"strong"),e._uU(21,"usato con parsimonia."),e.qZA()(),e.TgZ(22,"h6",2),e._uU(23,"Riepologo script"),e.qZA(),e.TgZ(24,"p"),e._uU(25," Proseguendo, verr\xe0 aggiornata la cache dello script "),e._UZ(26,"span",3),e._uU(27," (ID: "),e._UZ(28,"span",4),e._uU(29,"). "),e.qZA(),e.ynx(30,5),e.TgZ(31,"button",6),e.NdJ("click",function(){e.CHM(o);const s=e.MAs(1);return e.KtG(s.close("Close click"))}),e._uU(32,"Annulla"),e.qZA(),e.TgZ(33,"button",7),e.NdJ("click",function(){return i.deleteCache()}),e._uU(34,"Conferma"),e.qZA(),e.BQk(),e.qZA()}2&r&&(e.Q6J("disableCloseButton",!0),e.xp6(26),e.Q6J("innerText",i.scriptName),e.xp6(2),e.Q6J("innerText",i.scriptId),e.xp6(5),e.Q6J("disabled",i.pendingRequest))},dependencies:[m.z]}),c})()},5667:(C,f,n)=>{n.d(f,{U:()=>v});var u=n(6895),p=n(582),e=n(4650);let v=(()=>{class d{}return d.\u0275fac=function(_){return new(_||d)},d.\u0275mod=e.oAB({type:d}),d.\u0275inj=e.cJS({imports:[u.ez,p.z]}),d})()},4500:(C,f,n)=>{n.d(f,{F:()=>l});var u=n(5861),p=n(1309),e=n(4650),v=n(8367),d=n(586),m=n(6895),_=n(433),D=n(3450);const c=["modal"];function a(s,g){if(1&s){const t=e.EpF();e.ynx(0),e.TgZ(1,"p"),e._uU(2," In alcune occasioni, pu\xf2 rendersi necessario procedere alla cancellazione di uno script, per sostituirlo interamente oppure perch\xe9 divenuto obsoleto a seguito dello sviluppo di altre funzioni analoghe. Per queste e altre situazioni, viene lasciata allo sviluppatore la possibilit\xe0 di rimuovere uno script creato. Una volta confermata, la cancellazione \xe8 "),e.TgZ(3,"strong"),e._uU(4,"definitiva e irreversibile"),e.qZA(),e._uU(5,". "),e.qZA(),e.TgZ(6,"h6",7),e._uU(7,"Cancellare uno script"),e.qZA(),e.TgZ(8,"p"),e._uU(9," La cancellazione di uno script comporta la sua "),e.TgZ(10,"strong"),e._uU(11,"completa rimozione"),e.qZA(),e._uU(12," dall'elenco degli script installabili e dai forum che lo hanno gi\xe0 inserito. L'azione non pu\xf2 essere annullata, occorre pertanto prestare particolare attenzione e procedere solo se si ha la "),e.TgZ(13,"strong"),e._uU(14,"certezza"),e.qZA(),e._uU(15," di voler eliminare lo script selezionato. "),e.qZA(),e.TgZ(16,"p",8)(17,"input",9),e.NdJ("ngModelChange",function(h){e.CHM(t);const S=e.oxw();return e.KtG(S.checkboxConfirm=h)}),e.qZA(),e.TgZ(18,"label",10),e._uU(19," Cancella definitivamente lo script "),e._UZ(20,"span",11),e._uU(21," (ID: "),e._UZ(22,"span",12),e._uU(23,") "),e.qZA()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(17),e.Q6J("ngModel",t.checkboxConfirm),e.xp6(3),e.Q6J("innerText",t.scriptName),e.xp6(2),e.Q6J("innerText",t.scriptId)}}function r(s,g){if(1&s&&(e.TgZ(0,"div",13)(1,"p",14),e._uU(2," Cancellazione script "),e._UZ(3,"span",15),e.qZA(),e.TgZ(4,"p"),e._uU(5," Per terminare la cancellazione dello script "),e._UZ(6,"strong",12),e._uU(7),e.TgZ(8,"em"),e._uU(9,"Cancella"),e.qZA(),e._uU(10,". "),e.TgZ(11,"strong"),e._uU(12,"Non vi saranno altre richieste di conferma!"),e.qZA(),e._uU(13," Procedi solo se sei sicuro di voler rimuovere "),e.TgZ(14,"strong"),e._uU(15,"definitivamente"),e.qZA(),e._uU(16," lo script. "),e.qZA()()),2&s){const t=e.oxw();e.xp6(3),e.Q6J("innerText",t.scriptName),e.xp6(3),e.Q6J("innerText",t.scriptName),e.xp6(1),e.hij(" (ID: ",t.scriptId,") premi sul pulsante ")}}function i(s,g){if(1&s){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",16),e.NdJ("click",function(){e.CHM(t);const h=e.oxw();return e.KtG(h.continueConfirm=h.checkboxConfirm)}),e._uU(2,"Procedi"),e.qZA(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(1),e.Q6J("disabled",t.pendingRequest||!t.checkboxConfirm)}}function o(s,g){if(1&s){const t=e.EpF();e.TgZ(0,"button",16),e.NdJ("click",function(){e.CHM(t);const h=e.oxw();return e.KtG(h.deleteScript())}),e._uU(1,"Cancella"),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("disabled",t.pendingRequest)}}let l=(()=>{class s{constructor(t,E){this.toastService=t,this.scriptDevService=E,this.scriptName="",this.scriptId=0,this.deletionPendingEvent=new e.vpe,this.deletionScriptEvent=new e.vpe,this.pendingRequest=!1,this.checkboxConfirm=!1,this.continueConfirm=!1}ngOnInit(){}open(){this.reset(),this.modalComponent.open()}reset(){this.checkboxConfirm=!1,this.continueConfirm=!1}deleteScript(){var t=this;return(0,u.Z)(function*(){t.checkboxConfirm&&t.continueConfirm&&(t.pendingRequest?t.toastService.advice(p.V.REQUEST_PENDING):(t.pendingRequest=!0,t.deletionPendingEvent.emit(t.scriptId),t.modalComponent.close("Delete button click"),t.scriptId>0&&(yield t.scriptDevService.deleteScript(t.scriptId))?(t.toastService.show({content:`Script <strong>${t.scriptName}</strong> cancellato correttamente!`}),t.deletionScriptEvent.emit(t.scriptId)):t.toastService.advice(p.V.GENERIC),t.pendingRequest=!1,t.deletionPendingEvent.emit(0)))})()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(v.k),e.Y36(d.N))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-script-dev-deletion"]],viewQuery:function(t,E){if(1&t&&e.Gf(c,5),2&t){let h;e.iGM(h=e.CRH())&&(E.modalComponent=h.first)}},inputs:{scriptName:"scriptName",scriptId:"scriptId"},outputs:{deletionPendingEvent:"deletionPendingEvent",deletionScriptEvent:"deletionScriptEvent"},decls:11,vars:5,consts:[["title","Cancellazione script",3,"disableCloseButton"],["modal",""],[4,"ngIf","ngIfElse"],["advice",""],["footer",""],["type","button",1,"btn","btn-secondary",3,"click"],["deleteButton",""],[1,"fst-italic"],[1,"form-check"],["type","checkbox","id","remove-script",1,"form-check-input",3,"ngModel","ngModelChange"],["for","remove-script",1,"form-check-label"],[1,"text-uppercase","fw-bold","text-decoration-underline",3,"innerText"],[3,"innerText"],[1,"alert","alert-danger","mb-0"],[1,"text-center","fw-bold"],[1,"text-uppercase",3,"innerText"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(t,E){if(1&t){const h=e.EpF();e.TgZ(0,"app-modal",0,1),e.YNc(2,a,24,3,"ng-container",2),e.YNc(3,r,17,3,"ng-template",null,3,e.W1O),e.ynx(5,4),e.TgZ(6,"button",5),e.NdJ("click",function(){e.CHM(h);const U=e.MAs(1);return e.KtG(U.close("Close click"))}),e._uU(7,"Annulla"),e.qZA(),e.YNc(8,i,3,1,"ng-container",2),e.YNc(9,o,2,1,"ng-template",null,6,e.W1O),e.BQk(),e.qZA()}if(2&t){const h=e.MAs(4),S=e.MAs(10);e.Q6J("disableCloseButton",!0),e.xp6(2),e.Q6J("ngIf",!E.continueConfirm)("ngIfElse",h),e.xp6(6),e.Q6J("ngIf",!E.continueConfirm)("ngIfElse",S)}},dependencies:[m.O5,_.Wl,_.JJ,_.On,D.z]}),s})()},3735:(C,f,n)=>{n.d(f,{a:()=>d});var u=n(6895),p=n(433),e=n(582),v=n(4650);let d=(()=>{class m{}return m.\u0275fac=function(D){return new(D||m)},m.\u0275mod=v.oAB({type:m}),m.\u0275inj=v.cJS({imports:[u.ez,p.u5,e.z]}),m})()},586:(C,f,n)=>{n.d(f,{N:()=>c});var u=n(5861),p=n(3590),e=n(4650),v=n(5395),d=n(3138),m=n(9209),_=n(6787),D=n(7163);let c=(()=>{class a{constructor(i,o,l,s,g){this.graphqlService=i,this.globalsService=o,this.forumService=l,this.userService=s,this.scriptListService=g,this.ffuid="",this.cache={},this.statsDetailsCache={},this.profileSubscription=this.globalsService.profileObservable.subscribe(t=>{this.ffuid=t?.user.ffuid||""})}getStats(){var i=this;return(0,u.Z)(function*(){if(i.cache[i.ffuid])return i.cache[i.ffuid];const o=(yield i.graphqlService.query({query:p.n8})).data;return i.cache[i.ffuid]=o.scriptStats})()}deleteScriptCache(i){var o=this;return(0,u.Z)(function*(){return(yield o.graphqlService.mutate({mutation:p.xt,variables:{scriptId:i}})).data.delCache})()}getScriptStatsDetails(i){var o=this;return(0,u.Z)(function*(){let l=`${o.ffuid}script${i.scriptId}`;if(o.statsDetailsCache[l])return[o.statsDetailsCache[l].users,o.statsDetailsCache[l].forums];const[s,g]=yield Promise.all([i.users.length>0?o.userService.getDetailsFromUids(i.users):[],i.forums.length>0?o.forumService.getDomains(i.forums):[]]);return o.statsDetailsCache[l]={users:s,forums:g},[s,g]})()}updateScript(i,o){var l=this;return(0,u.Z)(function*(){const s=(yield l.graphqlService.mutate({mutation:p.Ry,variables:{scriptDetails:i,scriptId:o}})).data.scriptUpsert;return s&&l.scriptListService.updateScript(i,o),s})()}createScript(i){var o=this;return(0,u.Z)(function*(){const l=(yield o.graphqlService.mutate({mutation:p.Ry,variables:{scriptDetails:i}})).data.scriptUpsert;return l&&o.scriptListService.clearCache(),l})()}deleteScript(i){var o=this;return(0,u.Z)(function*(){const l=(yield o.graphqlService.mutate({mutation:p.HF,variables:{scriptId:i}})).data.delScript;return l&&o.scriptListService.removeScript(i),l})()}ngOnDestroy(){this.profileSubscription.unsubscribe()}}return a.\u0275fac=function(i){return new(i||a)(e.LFG(v.J),e.LFG(d.d),e.LFG(m._),e.LFG(_.K),e.LFG(D.o))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},6787:(C,f,n)=>{n.d(f,{K:()=>m});var u=n(5861),v=n(4650),d=n(5395);let m=(()=>{class _{constructor(c){this.graphqlService=c,this.searchByNameCache={}}getDetailsFromUids(c){var a=this;return(0,u.Z)(function*(){return(yield a.graphqlService.query({query:"\nquery UserUidToDetails($uids: [String!]!) {\n    userUidToDetails(uids: $uids) {\n        avatar,\n        nickname,\n        uid\n    }\n}",variables:{uids:c}})).data.userUidToDetails})()}searchUserByName(c){var a=this;return(0,u.Z)(function*(){if(a.searchByNameCache.hasOwnProperty(c))return a.searchByNameCache[c];const r=yield a.graphqlService.query({query:"\nquery UserSearchByName($name: String!) {\n    userSearchByName(name: $name) {\n        uid\n        nickname\n        avatar\n    }\n}",variables:{name:c}});return a.searchByNameCache[c]=r.data.userSearchByName})()}}return _.\u0275fac=function(c){return new(c||_)(v.LFG(d.J))},_.\u0275prov=v.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()}}]);