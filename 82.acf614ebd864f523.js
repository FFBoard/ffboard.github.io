"use strict";(self.webpackChunkboard=self.webpackChunkboard||[]).push([[82],{1600:(q,Q,d)=>{d.d(Q,{d:()=>b});var s=d(5e3),e=d(2382),u=d(5499),c=d(5428),p=d(8882),T=d(5646);const M=["app-custom-form",""],A=[[["","buttons",""]]],y=["[buttons]"];let b=(()=>{class v{constructor(_,k,r){this.formlyJsonschema=_,this.customFormSchemaService=k,this.toastService=r,this.model={},this.validateSchema=!1,this.enableModelChangeEvent=!1,this.defaultModel={},this.cancelEvent=new s.vpe,this.submitEvent=new s.vpe,this.validityChangeEvent=new s.vpe,this.modelChangeEvent=new s.vpe,this.form=new e.cw({}),this.fields=[],this.options={},this.isFormCurrentlyValid=!0}ngOnInit(){this.createFields()}ngOnChanges(_){_.schema&&!_.schema.firstChange&&this.createFields()}createFields(){this.customFormSchemaService.isObject(this.schema)||(this.schema={}),this.validateSchema&&this.customFormSchemaService.validateSchema(this.schema),this.fields=[this.formlyJsonschema.toFieldConfig(this.schema)]}showFieldValidation(){this.cycleFields(this.fields)}showFieldValidationWithMessage(){this.showFieldValidation(),this.toastService.show({content:"Tutti i campi sono stati <strong>validati</strong>: quelli con errore sono evidenziati da un <strong>bordo rosso</strong>!"})}cycleFields(_){_.forEach(k=>{this.forceValidation(k),k.fieldGroup&&this.cycleFields(k.fieldGroup)})}forceValidation(_){_.validation||(_.validation={}),_.validation.show=!0}reset(){this.options.resetModel&&this.options.resetModel(this.defaultModel)}cancel(){this.cancelEvent.emit()}submit(){!this.form.valid||(this.log(),this.submitEvent.emit(this.model))}onModelChange(_){this.enableModelChangeEvent&&this.modelChangeEvent.emit(_||{}),this.form.valid!==this.isFormCurrentlyValid&&this.validityChangeEvent.emit(this.isFormCurrentlyValid=this.form.valid)}log(){}}return v.\u0275fac=function(_){return new(_||v)(s.Y36(u.c),s.Y36(c.B),s.Y36(p.k))},v.\u0275cmp=s.Xpm({type:v,selectors:[["","app-custom-form",""]],inputs:{schema:"schema",model:"model",validateSchema:"validateSchema",enableModelChangeEvent:"enableModelChangeEvent",defaultModel:"defaultModel"},outputs:{cancelEvent:"cancelEvent",submitEvent:"submitEvent",validityChangeEvent:"validityChangeEvent",modelChangeEvent:"modelChangeEvent"},features:[s.TTD],attrs:M,ngContentSelectors:y,decls:3,vars:5,consts:[[3,"formGroup","ngSubmit"],[3,"model","fields","form","options","modelChange"]],template:function(_,k){1&_&&(s.F$t(A),s.TgZ(0,"form",0),s.NdJ("ngSubmit",function(){return k.submit()}),s.TgZ(1,"formly-form",1),s.NdJ("modelChange",function(f){return k.onModelChange(f)}),s.qZA(),s.Hsn(2),s.qZA()),2&_&&(s.Q6J("formGroup",k.form),s.xp6(1),s.Q6J("model",k.model)("fields",k.fields)("form",k.form)("options",k.options))},directives:[e._Y,e.JL,e.sg,T.T7],styles:[""]}),v})()},4880:(q,Q,d)=>{d.d(Q,{I:()=>gi});var s=d(9808),e=d(5e3),u=d(5646),c=d(2382);function p(o,i){1&o&&(e.TgZ(0,"span",9),e._uU(1,"*"),e.qZA())}function T(o,i){if(1&o&&(e.TgZ(0,"label",7),e._uU(1),e.YNc(2,p,2,0,"span",8),e.qZA()),2&o){const t=e.oxw(2);e.uIk("for",t.id),e.xp6(1),e.hij(" ",t.props.label," "),e.xp6(1),e.Q6J("ngIf",t.props.required&&!0!==t.props.hideRequiredMarker)}}function M(o,i){if(1&o&&e.YNc(0,T,3,3,"label",6),2&o){const t=e.oxw();e.Q6J("ngIf",t.props.label&&!0!==t.props.hideLabel)}}function A(o,i){if(1&o&&(e.ynx(0),e.GkF(1,10),e.BQk()),2&o){e.oxw();const t=e.MAs(1);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function y(o,i){}function b(o,i){if(1&o&&(e.ynx(0),e.GkF(1,10),e.BQk()),2&o){e.oxw();const t=e.MAs(1);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function v(o,i){if(1&o&&(e.TgZ(0,"div",11),e._UZ(1,"formly-validation-message",12),e.qZA()),2&o){const t=e.oxw();e.Udp("display","block"),e.xp6(1),e.Q6J("field",t.field)}}function L(o,i){if(1&o&&(e.TgZ(0,"small",13),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.props.description)}}const _=["fieldTypeTemplate"];let k=(()=>{class o extends u.n2{}return o.\u0275fac=function(){let i;return function(n){return(i||(i=e.n5z(o)))(n||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-wrapper-form-field"]],features:[e.qOj],decls:9,vars:8,consts:[["labelTemplate",""],[1,"mb-3"],[4,"ngIf"],["fieldComponent",""],["class","invalid-feedback",3,"display",4,"ngIf"],["class","form-text text-muted",4,"ngIf"],["class","form-label",4,"ngIf"],[1,"form-label"],["aria-hidden","true",4,"ngIf"],["aria-hidden","true"],[3,"ngTemplateOutlet"],[1,"invalid-feedback"],[3,"field"],[1,"form-text","text-muted"]],template:function(t,n){1&t&&(e.YNc(0,M,1,1,"ng-template",null,0,e.W1O),e.TgZ(2,"div",1),e.YNc(3,A,2,1,"ng-container",2),e.YNc(4,y,0,0,"ng-template",null,3,e.W1O),e.YNc(6,b,2,1,"ng-container",2),e.YNc(7,v,2,3,"div",4),e.YNc(8,L,2,1,"small",5),e.qZA()),2&t&&(e.xp6(2),e.ekj("form-floating","floating"===n.props.labelPosition)("has-error",n.showError),e.xp6(1),e.Q6J("ngIf","floating"!==n.props.labelPosition),e.xp6(3),e.Q6J("ngIf","floating"===n.props.labelPosition),e.xp6(1),e.Q6J("ngIf",n.showError),e.xp6(1),e.Q6J("ngIf",n.props.description))},directives:[u.M2,s.O5,s.tP],encapsulation:2}),o})(),r=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[s.ez,c.UX,u.X0.forChild({wrappers:[{name:"form-field",component:k}]})]]}),o})(),f=(()=>{class o extends u.fS{constructor(t){super(),this.hostContainerRef=t}set content(t){t&&this.hostContainerRef&&this.hostContainerRef.createEmbeddedView(t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.s_b,8))},o.\u0275dir=e.lG2({type:o,viewQuery:function(t,n){if(1&t&&e.Gf(_,7),2&t){let l;e.iGM(l=e.CRH())&&(n.content=l.first)}},features:[e.qOj]}),o})();function C(o,i){if(1&o&&e._UZ(0,"input",3),2&o){const t=e.oxw(2);e.ekj("is-invalid",t.showError),e.Q6J("type",t.type)("formControl",t.formControl)("formlyAttributes",t.field)}}function O(o,i){if(1&o&&e._UZ(0,"input",4),2&o){const t=e.oxw(2);e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("formlyAttributes",t.field)}}function m(o,i){if(1&o&&(e.YNc(0,C,1,5,"input",1),e.YNc(1,O,1,4,"ng-template",null,2,e.W1O)),2&o){const t=e.MAs(2),n=e.oxw();e.Q6J("ngIf","number"!==n.type)("ngIfElse",t)}}let x=(()=>{class o extends f{get type(){return this.props.type||"text"}}return o.\u0275fac=function(){let i;return function(n){return(i||(i=e.n5z(o)))(n||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-input"]],features:[e.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],["class","form-control",3,"type","formControl","formlyAttributes","is-invalid",4,"ngIf","ngIfElse"],["numberTmp",""],[1,"form-control",3,"type","formControl","formlyAttributes"],["type","number",1,"form-control",3,"formControl","formlyAttributes"]],template:function(t,n){1&t&&e.YNc(0,m,3,2,"ng-template",null,0,e.W1O)},directives:[s.O5,c.Fj,c.JJ,c.oH,u.JD,c.wV],encapsulation:2,changeDetection:0}),o})(),a=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[s.ez,c.UX,r,u.X0.forChild({types:[{name:"input",component:x,wrappers:["form-field"]},{name:"string",extends:"input"},{name:"number",extends:"input",defaultOptions:{props:{type:"number"}}},{name:"integer",extends:"input",defaultOptions:{props:{type:"number"}}}]})]]}),o})();function g(o,i){if(1&o&&(e.TgZ(0,"textarea",1),e._uU(1,"      "),e.qZA()),2&o){const t=e.oxw();e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("cols",t.props.cols)("rows",t.props.rows)("formlyAttributes",t.field)}}let w=(()=>{class o extends f{constructor(){super(...arguments),this.defaultOptions={props:{cols:1,rows:1}}}}return o.\u0275fac=function(){let i;return function(n){return(i||(i=e.n5z(o)))(n||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-textarea"]],features:[e.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],[1,"form-control",3,"formControl","cols","rows","formlyAttributes"]],template:function(t,n){1&t&&e.YNc(0,g,2,6,"ng-template",null,0,e.W1O)},directives:[c.Fj,c.JJ,c.oH,u.JD],encapsulation:2,changeDetection:0}),o})(),F=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[s.ez,c.UX,r,u.X0.forChild({types:[{name:"textarea",component:w,wrappers:["form-field"]}]})]]}),o})();var S=d(8306),D=d(1135),j=d(4004),I=d(9300),E=d(8505);let Y=(()=>{class o{transform(t,n){return t instanceof S.y?this.dispose():t=this.observableOf(t,n),t.pipe((0,j.U)(l=>this.transformOptions(l,n)))}ngOnDestroy(){this.dispose()}transformOptions(t,n){const l=this.transformSelectProps(n),h=[],J={};return null==t||t.forEach(U=>{const Z=this.transformOption(U,l);if(Z.group){const P=J[Z.label];void 0===P?J[Z.label]=h.push(Z)-1:Z.group.forEach($=>h[P].group.push($))}else h.push(Z)}),h}transformOption(t,n){const l=n.groupProp(t);return Array.isArray(l)?{label:n.labelProp(t),group:l.map(h=>this.transformOption(h,n))}:(t={label:n.labelProp(t),value:n.valueProp(t),disabled:!!n.disabledProp(t)},l?{label:l,group:[t]}:t)}transformSelectProps(t){const n=(null==t?void 0:t.props)||(null==t?void 0:t.templateOptions)||{},l=h=>"function"==typeof h?h:J=>J[h];return{groupProp:l(n.groupProp||"group"),labelProp:l(n.labelProp||"label"),valueProp:l(n.valueProp||"value"),disabledProp:l(n.disabledProp||"disabled")}}dispose(){this._options&&(this._options.complete(),this._options=null),this._subscription&&(this._subscription.unsubscribe(),this._subscription=null)}observableOf(t,n){return this.dispose(),n&&n.options&&n.options.fieldChanges&&(this._subscription=n.options.fieldChanges.pipe((0,I.h)(({property:l,type:h,field:J})=>"expressionChanges"===h&&(0===l.indexOf("templateOptions.options")||0===l.indexOf("props.options"))&&J===n&&Array.isArray(J.props.options)&&!!this._options),(0,E.b)(()=>this._options.next(n.props.options))).subscribe()),this._options=new D.X(t),this._options.asObservable()}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275pipe=e.Yjl({name:"formlySelectOptions",type:o,pure:!0}),o})(),N=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({}),o})();function H(o,i){if(1&o&&(e.TgZ(0,"div",2),e._UZ(1,"input",3),e.TgZ(2,"label",4),e._uU(3),e.qZA()()),2&o){const t=i.$implicit,n=i.index,l=e.oxw(2);e.ekj("form-check-inline","inline"===l.props.formCheck),e.xp6(1),e.ekj("is-invalid",l.showError),e.Q6J("id",l.id+"_"+n)("name",l.field.name||l.id)("value",t.value)("formControl",t.disabled?l.disabledControl:l.formControl)("formlyAttributes",l.field),e.uIk("value",t.value),e.xp6(1),e.Q6J("for",l.id+"_"+n),e.xp6(1),e.hij(" ",t.label," ")}}function R(o,i){if(1&o&&(e.YNc(0,H,4,12,"div",1),e.ALo(1,"async"),e.ALo(2,"formlySelectOptions")),2&o){const t=e.oxw();e.Q6J("ngForOf",e.lcZ(1,1,e.xi3(2,3,t.props.options,t.field)))}}let W=(()=>{class o extends f{constructor(){super(...arguments),this.defaultOptions={props:{formCheck:"default"}}}get disabledControl(){return new c.NI({value:this.formControl.value,disabled:!0})}}return o.\u0275fac=function(){let i;return function(n){return(i||(i=e.n5z(o)))(n||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-radio"]],features:[e.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],["class","form-check",3,"form-check-inline",4,"ngFor","ngForOf"],[1,"form-check"],["type","radio",1,"form-check-input",3,"id","name","value","formControl","formlyAttributes"],[1,"form-check-label",3,"for"]],template:function(t,n){1&t&&e.YNc(0,R,3,6,"ng-template",null,0,e.W1O)},directives:[s.sg,c._,c.Fj,c.JJ,c.oH,u.JD],pipes:[s.Ov,Y],encapsulation:2,changeDetection:0}),o})(),ne=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[s.ez,c.UX,r,N,u.X0.forChild({types:[{name:"radio",component:W,wrappers:["form-field"]}]})]]}),o})();function re(o,i){1&o&&(e.TgZ(0,"span",6),e._uU(1,"*"),e.qZA())}function le(o,i){if(1&o&&(e.TgZ(0,"label",4),e._uU(1),e.YNc(2,re,2,0,"span",5),e.qZA()),2&o){const t=e.oxw(2);e.Q6J("for",t.id),e.xp6(1),e.hij(" ",t.props.label," "),e.xp6(1),e.Q6J("ngIf",t.props.required&&!0!==t.props.hideRequiredMarker)}}const se=function(o,i){return{"form-check-inline":o,"form-switch":i}};function ae(o,i){if(1&o&&(e.TgZ(0,"div",1),e._UZ(1,"input",2),e.YNc(2,le,3,3,"label",3),e.qZA()),2&o){const t=e.oxw();e.Q6J("ngClass",e.WLB(9,se,"inline"===t.props.formCheck||"inline-switch"===t.props.formCheck,"switch"===t.props.formCheck||"inline-switch"===t.props.formCheck)),e.xp6(1),e.ekj("is-invalid",t.showError)("position-static","nolabel"===t.props.formCheck),e.Q6J("indeterminate",t.props.indeterminate&&null==t.formControl.value)("formControl",t.formControl)("formlyAttributes",t.field),e.xp6(1),e.Q6J("ngIf","nolabel"!==t.props.formCheck)}}let ce=(()=>{class o extends f{constructor(){super(...arguments),this.defaultOptions={props:{indeterminate:!0,hideLabel:!0,formCheck:"default"}}}}return o.\u0275fac=function(){let i;return function(n){return(i||(i=e.n5z(o)))(n||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-checkbox"]],features:[e.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],[1,"form-check",3,"ngClass"],["type","checkbox",1,"form-check-input",3,"indeterminate","formControl","formlyAttributes"],["class","form-check-label",3,"for",4,"ngIf"],[1,"form-check-label",3,"for"],["aria-hidden","true",4,"ngIf"],["aria-hidden","true"]],template:function(t,n){1&t&&e.YNc(0,ae,3,12,"ng-template",null,0,e.W1O)},directives:[s.mk,c.Wl,c.JJ,c.oH,u.JD,s.O5],encapsulation:2,changeDetection:0}),o})(),pe=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[s.ez,c.UX,r,u.X0.forChild({types:[{name:"checkbox",component:ce,wrappers:["form-field"]},{name:"boolean",extends:"checkbox"}]})]]}),o})();const de=function(o,i){return{"form-check-inline":o,"form-switch":i}};function me(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",2)(1,"input",3),e.NdJ("change",function(l){const J=e.CHM(t).$implicit;return e.oxw(2).onChange(J.value,l.target.checked)}),e.qZA(),e.TgZ(2,"label",4),e._uU(3),e.qZA()()}if(2&o){const t=i.$implicit,n=i.index,l=e.oxw(2);e.Q6J("ngClass",e.WLB(8,de,"inline"===l.props.formCheck||"inline-switch"===l.props.formCheck,"switch"===l.props.formCheck||"inline-switch"===l.props.formCheck)),e.xp6(1),e.Q6J("id",l.id+"_"+n)("value",t.value)("checked",l.isChecked(t))("formlyAttributes",l.field)("disabled",l.formControl.disabled||t.disabled),e.xp6(1),e.Q6J("for",l.id+"_"+n),e.xp6(1),e.hij(" ",t.label," ")}}function ue(o,i){if(1&o&&(e.YNc(0,me,4,11,"div",1),e.ALo(1,"async"),e.ALo(2,"formlySelectOptions")),2&o){const t=e.oxw();e.Q6J("ngForOf",e.lcZ(1,1,e.xi3(2,3,t.props.options,t.field)))}}let fe=(()=>{class o extends f{constructor(){super(...arguments),this.defaultOptions={props:{formCheck:"default"}}}onChange(t,n){this.formControl.markAsDirty(),this.formControl.patchValue("array"===this.props.type?n?[...this.formControl.value||[],t]:[...this.formControl.value||[]].filter(l=>l!==t):Object.assign(Object.assign({},this.formControl.value),{[t]:n})),this.formControl.markAsTouched()}isChecked(t){const n=this.formControl.value;return n&&("array"===this.props.type?-1!==n.indexOf(t.value):n[t.value])}}return o.\u0275fac=function(){let i;return function(n){return(i||(i=e.n5z(o)))(n||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-multicheckbox"]],features:[e.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],["class","form-check",3,"ngClass",4,"ngFor","ngForOf"],[1,"form-check",3,"ngClass"],["type","checkbox",1,"form-check-input",3,"id","value","checked","formlyAttributes","disabled","change"],[1,"form-check-label",3,"for"]],template:function(t,n){1&t&&e.YNc(0,ue,3,6,"ng-template",null,0,e.W1O)},directives:[s.sg,s.mk,u.JD],pipes:[s.Ov,Y],encapsulation:2,changeDetection:0}),o})(),_e=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[s.ez,c.UX,r,N,u.X0.forChild({types:[{name:"multicheckbox",component:fe,wrappers:["form-field"]}]})]]}),o})();var G=d(5698);function ge(o,i){if(1&o&&(e.TgZ(0,"option",8),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("ngValue",t.value)("disabled",t.disabled),e.xp6(1),e.hij(" ",t.label," ")}}function he(o,i){if(1&o&&(e.TgZ(0,"option",8),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("ngValue",t.value)("disabled",t.disabled),e.xp6(1),e.hij(" ",t.label," ")}}function ye(o,i){if(1&o&&(e.TgZ(0,"optgroup",9),e.YNc(1,he,2,3,"option",10),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("label",t.label),e.xp6(1),e.Q6J("ngForOf",t.group)}}function Fe(o,i){if(1&o&&(e.ynx(0),e.YNc(1,ge,2,3,"option",6),e.YNc(2,ye,2,2,"ng-template",null,7,e.W1O),e.BQk()),2&o){const t=i.$implicit,n=e.MAs(3);e.xp6(1),e.Q6J("ngIf",!t.group)("ngIfElse",n)}}function ve(o,i){if(1&o&&(e.ynx(0),e.YNc(1,Fe,4,2,"ng-container",5),e.BQk()),2&o){const t=i.ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}function xe(o,i){if(1&o&&(e.TgZ(0,"select",3),e.YNc(1,ve,2,1,"ng-container",4),e.ALo(2,"async"),e.ALo(3,"formlySelectOptions"),e.qZA()),2&o){const t=e.oxw(2);e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("compareWith",t.props.compareWith)("formlyAttributes",t.field),e.xp6(1),e.Q6J("ngIf",e.lcZ(2,6,e.xi3(3,8,t.props.options,t.field)))}}function be(o,i){if(1&o&&(e.TgZ(0,"option",13),e._uU(1),e.qZA()),2&o){const t=e.oxw(3);e.Q6J("ngValue",void 0),e.xp6(1),e.Oqu(t.props.placeholder)}}function Ce(o,i){if(1&o&&(e.TgZ(0,"option",8),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("ngValue",t.value)("disabled",t.disabled),e.xp6(1),e.hij(" ",t.label," ")}}function Oe(o,i){if(1&o&&(e.TgZ(0,"option",8),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("ngValue",t.value)("disabled",t.disabled),e.xp6(1),e.hij(" ",t.label," ")}}function Te(o,i){if(1&o&&(e.TgZ(0,"optgroup",9),e.YNc(1,Oe,2,3,"option",10),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("label",t.label),e.xp6(1),e.Q6J("ngForOf",t.group)}}function Me(o,i){if(1&o&&(e.ynx(0),e.YNc(1,Ce,2,3,"option",6),e.YNc(2,Te,2,2,"ng-template",null,7,e.W1O),e.BQk()),2&o){const t=i.$implicit,n=e.MAs(3);e.xp6(1),e.Q6J("ngIf",!t.group)("ngIfElse",n)}}function we(o,i){if(1&o&&(e.ynx(0),e.YNc(1,Me,4,2,"ng-container",5),e.BQk()),2&o){const t=i.ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}function Ae(o,i){if(1&o&&(e.TgZ(0,"select",11),e.YNc(1,be,2,2,"option",12),e.YNc(2,we,2,1,"ng-container",4),e.ALo(3,"async"),e.ALo(4,"formlySelectOptions"),e.qZA()),2&o){const t=e.oxw(2);e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("compareWith",t.props.compareWith)("formlyAttributes",t.field),e.xp6(1),e.Q6J("ngIf",t.props.placeholder),e.xp6(1),e.Q6J("ngIf",e.lcZ(3,7,e.xi3(4,9,t.props.options,t.field)))}}function ke(o,i){if(1&o&&(e.YNc(0,xe,4,11,"select",1),e.YNc(1,Ae,5,12,"ng-template",null,2,e.W1O)),2&o){const t=e.MAs(2),n=e.oxw();e.Q6J("ngIf",n.props.multiple)("ngIfElse",t)}}let Ee=(()=>{class o extends f{constructor(t,n){super(n),this.ngZone=t,this.defaultOptions={props:{compareWith:(l,h)=>l===h}}}set selectAccessor(t){if(!t)return;const n=t.writeValue.bind(t);null===t._getOptionId(t.value)&&n(t.value),t.writeValue=l=>{const h=t._idCounter;n(l),null===l&&this.ngZone.onStable.asObservable().pipe((0,G.q)(1)).subscribe(()=>{h!==t._idCounter&&null===t._getOptionId(l)&&-1!==t._elementRef.nativeElement.selectedIndex&&n(l)})}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.R0b),e.Y36(e.s_b))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-select"]],viewQuery:function(t,n){if(1&t&&e.Gf(c.EJ,5),2&t){let l;e.iGM(l=e.CRH())&&(n.selectAccessor=l.first)}},features:[e.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],["class","form-select","multiple","",3,"formControl","compareWith","is-invalid","formlyAttributes",4,"ngIf","ngIfElse"],["singleSelect",""],["multiple","",1,"form-select",3,"formControl","compareWith","formlyAttributes"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngValue","disabled",4,"ngIf","ngIfElse"],["optgroup",""],[3,"ngValue","disabled"],[3,"label"],[3,"ngValue","disabled",4,"ngFor","ngForOf"],[1,"form-select",3,"formControl","compareWith","formlyAttributes"],[3,"ngValue",4,"ngIf"],[3,"ngValue"]],template:function(t,n){1&t&&e.YNc(0,ke,3,2,"ng-template",null,0,e.W1O)},directives:[s.O5,c.K7,c.JJ,c.oH,u.JD,s.sg,c.YN,c.Kr,c.EJ],pipes:[s.Ov,Y],encapsulation:2,changeDetection:0}),o})(),Je=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[s.ez,c.UX,r,N,u.X0.forChild({types:[{name:"select",component:Ee,wrappers:["form-field"]},{name:"enum",extends:"select"}]})]]}),o})();const Ie=["fieldTypeTemplate"];function Se(o,i){if(1&o&&e._UZ(0,"i",7),2&o){const t=e.oxw(3);e.Q6J("ngClass",t.props.addonLeft.class)}}function De(o,i){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Oqu(t.props.addonLeft.text)}}function Ze(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",4),e.NdJ("click",function(l){return e.CHM(t),e.oxw(2).addonLeftClick(l)}),e.YNc(1,Se,1,1,"i",5),e.YNc(2,De,2,1,"span",6),e.qZA()}if(2&o){const t=e.oxw(2);e.ekj("input-group-btn",t.props.addonLeft.onClick),e.xp6(1),e.Q6J("ngIf",t.props.addonLeft.class),e.xp6(1),e.Q6J("ngIf",t.props.addonLeft.text)}}function Qe(o,i){if(1&o&&e._UZ(0,"i",7),2&o){const t=e.oxw(3);e.Q6J("ngClass",t.props.addonRight.class)}}function je(o,i){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Oqu(t.props.addonRight.text)}}function Pe(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",4),e.NdJ("click",function(l){return e.CHM(t),e.oxw(2).addonRightClick(l)}),e.YNc(1,Qe,1,1,"i",5),e.YNc(2,je,2,1,"span",6),e.qZA()}if(2&o){const t=e.oxw(2);e.ekj("input-group-btn",t.props.addonRight.onClick),e.xp6(1),e.Q6J("ngIf",t.props.addonRight.class),e.xp6(1),e.Q6J("ngIf",t.props.addonRight.text)}}function Le(o,i){if(1&o&&(e.TgZ(0,"div",1),e.YNc(1,Ze,3,4,"div",2),e.GkF(2,null,3),e.YNc(4,Pe,3,4,"div",2),e.qZA()),2&o){const t=e.oxw();e.ekj("has-validation",t.showError),e.xp6(1),e.Q6J("ngIf",t.props.addonLeft),e.xp6(3),e.Q6J("ngIf",t.props.addonRight)}}let Ue=(()=>{class o extends u.n2{constructor(t){super(),this.hostContainerRef=t}set content(t){t&&this.hostContainerRef&&this.hostContainerRef.createEmbeddedView(t)}addonRightClick(t){var n,l;null===(l=(n=this.props.addonRight).onClick)||void 0===l||l.call(n,this.field,t)}addonLeftClick(t){var n,l;null===(l=(n=this.props.addonLeft).onClick)||void 0===l||l.call(n,this.field,t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.s_b))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-wrapper-addons"]],viewQuery:function(t,n){if(1&t&&e.Gf(Ie,7),2&t){let l;e.iGM(l=e.CRH())&&(n.content=l.first)}},features:[e.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],[1,"input-group"],["class","input-group-text",3,"input-group-btn","click",4,"ngIf"],["fieldComponent",""],[1,"input-group-text",3,"click"],[3,"ngClass",4,"ngIf"],[4,"ngIf"],[3,"ngClass"]],template:function(t,n){1&t&&e.YNc(0,Le,5,4,"ng-template",null,0,e.W1O)},directives:[s.O5,s.mk],styles:["formly-wrapper-form-field .input-group-btn{cursor:pointer}\n"],encapsulation:2}),o})();function Ne(o){!o.props||o.wrappers&&-1!==o.wrappers.indexOf("addons")||(o.props.addonLeft||o.props.addonRight)&&(o.wrappers=[...o.wrappers||[],"addons"])}let Ye=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[s.ez,c.UX,u.X0.forChild({wrappers:[{name:"addons",component:Ue}],extensions:[{name:"addons",extension:{postPopulate:Ne}}]})]]}),o})(),qe=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[r,a,F,ne,pe,_e,Je,Ye]]}),o})();var Be=d(2313);let B=(()=>{class o{constructor(t){this.domSanitizer=t,this.validBBCodes=[{regstring:"\\[b](.+?)\\[/b]",replacement:"<strong>$1</strong>"},{regstring:"\\[i](.+?)\\[/i]",replacement:"<em>$1</em>"},{regstring:"\\[u](.+?)\\[/u]",replacement:"<u>$1</u>"},{regstring:"\\[ul](.+?)\\[/ul]",replacement:"<ul>$1</ul>"},{regstring:"\\[ol](.+?)\\[/ol]",replacement:"<ol>$1</ol>"},{regstring:"\\[li](.+?)\\[/li]",replacement:"<li>$1</li>"},{regstring:"\\[br]",replacement:"<br>"}];for(const n of this.validBBCodes)n.regexp=new RegExp(n.regstring,"gim")}parseBBCode(t){t=t.replace(/</gi,"&lt;").replace(/>/gi,"&gt;"),t=this.domSanitizer.sanitize(e.q3G.HTML,t)||"";for(const n of this.validBBCodes)t=t.replace(n.regexp,n.replacement);return t}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(Be.H7))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function Ve(o,i){1&o&&e.GkF(0)}const We=function(o,i){return{$implicit:o,props:i}};function He(o,i){if(1&o&&(e.ynx(0),e.YNc(1,Ve,1,0,"ng-container",8),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngTemplateOutlet",t.customLabelTemplate)("ngTemplateOutletContext",e.WLB(2,We,t.id,t.props))}}function Re(o,i){1&o&&(e.TgZ(0,"span",11),e._uU(1," *"),e.qZA())}function $e(o,i){if(1&o&&(e.TgZ(0,"div"),e._UZ(1,"label",9),e.YNc(2,Re,2,0,"span",10),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("innerHTML",t.parsedLabel,e.oJD),e.uIk("for",t.id),e.xp6(1),e.Q6J("ngIf",t.props.required&&!0!==t.props.hideRequiredMarker)}}function Ge(o,i){if(1&o&&e.YNc(0,$e,3,3,"div",2),2&o){const t=e.oxw(2);e.Q6J("ngIf",t.props.label&&!0!==t.props.hideLabel)}}function ze(o,i){if(1&o&&(e.YNc(0,He,2,5,"ng-container",6),e.YNc(1,Ge,1,1,"ng-template",null,7,e.W1O)),2&o){const t=e.MAs(2),n=e.oxw();e.Q6J("ngIf",n.hasCustomLabelTemplate)("ngIfElse",t)}}function Xe(o,i){if(1&o&&(e.ynx(0),e.GkF(1,12),e.BQk()),2&o){e.oxw();const t=e.MAs(1);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function Ke(o,i){}function et(o,i){if(1&o&&(e.ynx(0),e.GkF(1,12),e.BQk()),2&o){e.oxw();const t=e.MAs(1);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function tt(o,i){if(1&o&&(e.TgZ(0,"div",13),e._UZ(1,"formly-validation-message",14),e.qZA()),2&o){const t=e.oxw();e.Udp("display","block"),e.xp6(1),e.Q6J("field",t.field)}}function ot(o,i){if(1&o&&e._UZ(0,"div",15),2&o){const t=e.oxw();e.Q6J("innerHTML",t.parsedDescription,e.oJD)}}let it=(()=>{class o extends u.n2{constructor(t){super(),this.customFormUtilsService=t,this.hasCustomLabelTemplate=!1,this.parsedDescription="",this.parsedLabel=""}ngOnInit(){this.hasCustomLabelTemplate=!(!this.props.customLabelTemplate||!this.props.customLabelTemplate.elementRef),this.parsedDescription=this.props.description?this.customFormUtilsService.parseBBCode(this.props.description):"",this.parsedLabel=!this.hasCustomLabelTemplate&&this.props.label?this.customFormUtilsService.parseBBCode(this.props.label):""}get customLabelTemplate(){return this.props.customLabelTemplate}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(B))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-custom-wrapper-form-field"]],features:[e.qOj],decls:9,vars:8,consts:[["labelTemplate",""],[1,"mb-3"],[4,"ngIf"],["fieldComponent",""],["class","invalid-feedback",3,"display",4,"ngIf"],["class","form-text text-muted",3,"innerHTML",4,"ngIf"],[4,"ngIf","ngIfElse"],["stringLabel",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"form-label",3,"innerHTML"],["aria-hidden","true",4,"ngIf"],["aria-hidden","true"],[3,"ngTemplateOutlet"],[1,"invalid-feedback"],[3,"field"],[1,"form-text","text-muted",3,"innerHTML"]],template:function(t,n){1&t&&(e.YNc(0,ze,3,2,"ng-template",null,0,e.W1O),e.TgZ(2,"div",1),e.YNc(3,Xe,2,1,"ng-container",2),e.YNc(4,Ke,0,0,"ng-template",null,3,e.W1O),e.YNc(6,et,2,1,"ng-container",2),e.YNc(7,tt,2,3,"div",4),e.YNc(8,ot,1,1,"div",5),e.qZA()),2&t&&(e.xp6(2),e.ekj("form-floating","floating"===n.props.labelPosition)("has-error",n.showError),e.xp6(1),e.Q6J("ngIf","floating"!==n.props.labelPosition),e.xp6(3),e.Q6J("ngIf","floating"===n.props.labelPosition),e.xp6(1),e.Q6J("ngIf",n.showError),e.xp6(1),e.Q6J("ngIf",n.parsedDescription))},directives:[s.O5,s.tP,u.M2],encapsulation:2}),o})();var z=d(3068);function nt(o,i){1&o&&e.GkF(0)}function rt(o,i){if(1&o&&(e.ynx(0),e._UZ(1,"div",13),e.TgZ(2,"div",14),e._uU(3,"("),e.YNc(4,nt,1,0,"ng-container",15),e._uU(5,")"),e.qZA(),e.BQk()),2&o){const t=e.oxw(),n=e.MAs(15);e.xp6(1),e.Q6J("innerHTML",t.parsedTitle,e.oJD),e.xp6(3),e.Q6J("ngTemplateOutlet",n)}}function lt(o,i){1&o&&e.GkF(0)}function st(o,i){if(1&o&&(e.TgZ(0,"div",16),e._uU(1," Lista di "),e.YNc(2,lt,1,0,"ng-container",15),e.qZA()),2&o){e.oxw();const t=e.MAs(15);e.xp6(2),e.Q6J("ngTemplateOutlet",t)}}function at(o,i){if(1&o&&e._UZ(0,"div",17),2&o){const t=e.oxw();e.Q6J("innerHTML",t.parsedDescription,e.oJD)}}const ct=function(o){return{"mt-3":o}};function pt(o,i){if(1&o&&(e.TgZ(0,"div",18),e._UZ(1,"formly-validation-message",19),e.qZA()),2&o){const t=e.oxw();e.Q6J("ngClass",e.VKq(2,ct,t.parsedDescription.length)),e.xp6(1),e.Q6J("field",t.field)}}function dt(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"li")(1,"div",30),e.NdJ("click",function(){e.CHM(t);const l=e.oxw().index;return e.oxw(2).move(l,l-1)}),e._uU(2,"arrow_circle_up"),e.qZA()()}2&o&&(e.xp6(1),e.Q6J("disableOnTouchDevice",!0))}const X=function(o){return{"ms-1":o}};function mt(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"li",31)(1,"div",32),e.NdJ("click",function(){e.CHM(t);const l=e.oxw().index;return e.oxw(2).move(l,l+1)}),e._uU(2,"arrow_circle_down"),e.qZA()()}if(2&o){const t=e.oxw().first;e.Q6J("ngClass",e.VKq(2,X,!t)),e.xp6(1),e.Q6J("disableOnTouchDevice",!0)}}function ut(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"li",31)(1,"div",33),e.NdJ("click",function(){e.CHM(t);const l=e.oxw().index;return e.oxw(2).remove(l)}),e._uU(2,"highlight_off"),e.qZA()()}if(2&o){const t=e.oxw(),l=t.last;e.Q6J("ngClass",e.VKq(2,X,!(t.first&&l))),e.xp6(1),e.Q6J("disableOnTouchDevice",!0)}}const ft=function(o){return{"mb-3":o}},K=function(o){return{"has-error":o}};function _t(o,i){if(1&o&&(e.TgZ(0,"li",22)(1,"fieldset",23)(2,"legend",24)(3,"div",25)(4,"div",26),e._uU(5),e.qZA(),e.TgZ(6,"ul",27),e.YNc(7,dt,3,1,"li",28),e.YNc(8,mt,3,4,"li",29),e.YNc(9,ut,3,4,"li",29),e.qZA()()(),e._UZ(10,"formly-field",19),e.qZA()()),2&o){const t=i.$implicit,n=i.index,l=i.first,h=i.last;e.Q6J("ngClass",e.VKq(7,ft,!h)),e.xp6(1),e.Q6J("ngClass",e.VKq(9,K,null==t.formControl?null:t.formControl.invalid)),e.xp6(4),e.hij("#",n+1,""),e.xp6(2),e.Q6J("ngIf",!l),e.xp6(1),e.Q6J("ngIf",!h),e.xp6(1),e.Q6J("ngIf",t.props&&!1!==t.props.removable),e.xp6(1),e.Q6J("field",t)}}function gt(o,i){if(1&o&&(e.TgZ(0,"ul",20),e.YNc(1,_t,11,11,"li",21),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.field.fieldGroup)}}const ht=function(o){return{"d-none d-md-inline":o}};function yt(o,i){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA(),e.TgZ(2,"span",31),e._uU(3),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.field.fieldGroup?t.field.fieldGroup.length:0),e.xp6(1),e.Q6J("ngClass",e.VKq(3,ht,t.props.label)),e.xp6(1),e.hij(" element",t.field.fieldGroup&&1===t.field.fieldGroup.length?"o":"i","")}}const Ft=function(){return[10,10]},vt=function(o){return{placement:"top-end",offset:o}};let xt=(()=>{class o extends u.hv{constructor(t){super(),this.customFormUtilsService=t,this.parsedTitle="",this.parsedDescription=""}ngOnInit(){this.parsedDescription=this.props.description?this.customFormUtilsService.parseBBCode(this.props.description):"",this.parsedTitle=this.props.label?this.customFormUtilsService.parseBBCode(this.props.label):""}get maxLengthExceeded(){return this.props.maxItems&&this.model&&this.model.length>=this.props.maxItems}move(t,n){const l=this.model[t];this.remove(t),this.add(n,l)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(B))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-array"]],features:[e.qOj],decls:16,vars:14,consts:[[1,"rounded","px-3","pb-3","pt-2","mb-3","formly-fieldset",3,"ngClass"],[1,"legend-reset","pb-1","px-2","mb-0","mw-100"],[1,"d-flex","align-items-center","mw-100"],[4,"ngIf","ngIfElse"],["nolabel",""],["class","mb-2 text-justify",3,"innerHTML",4,"ngIf"],["class","alert alert-danger formly-field-array-error text-center","role","alert",3,"ngClass",4,"ngIf"],["class","list-unstyled mb-3",4,"ngIf"],[1,"d-flex","flex-row-reverse"],["appTippy","Hai aggiunto il numero massimo di elementi!",3,"disableInstance","tippyProps"],["type","button",1,"btn","btn-primary","d-flex","align-items-center",3,"disabled","click"],[1,"material-icons"],["itemscount",""],[1,"fs-xl","text-truncate","mw-100",3,"innerHTML"],[1,"ms-2","fs-reset","lh-1","fst-italic","list-counter","text-nowrap"],[4,"ngTemplateOutlet"],[1,"fs-xl","text-truncate","mw-10"],[1,"mb-2","text-justify",3,"innerHTML"],["role","alert",1,"alert","alert-danger","formly-field-array-error","text-center",3,"ngClass"],[3,"field"],[1,"list-unstyled","mb-3"],["class","item",3,"ngClass",4,"ngFor","ngForOf"],[1,"item",3,"ngClass"],[1,"rounded","formly-fieldset","dashed","show-success","px-3",3,"ngClass"],[1,"legend-reset","ms-auto","mb-0","px-2"],[1,"d-flex","align-items-center"],[1,"fs-xl","ms-1"],[1,"ms-2","mb-0","item-icons","list-unstyled","d-flex","align-items-center"],[4,"ngIf"],[3,"ngClass",4,"ngIf"],["appTippy","Sposta in alto",1,"d-block","material-icons","cursor-pointer",3,"disableOnTouchDevice","click"],[3,"ngClass"],["appTippy","Sposta in basso",1,"d-block","material-icons","cursor-pointer",3,"disableOnTouchDevice","click"],["appTippy","Rimuovi",1,"d-block","material-icons","cursor-pointer","text-danger",3,"disableOnTouchDevice","click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"fieldset",0)(1,"legend",1)(2,"div",2),e.YNc(3,rt,6,2,"ng-container",3),e.YNc(4,st,3,1,"ng-template",null,4,e.W1O),e.qZA()(),e.YNc(6,at,1,1,"div",5),e.YNc(7,pt,2,4,"div",6),e.YNc(8,gt,2,1,"ul",7),e.TgZ(9,"div",8)(10,"div",9)(11,"button",10),e.NdJ("click",function(){return!n.maxLengthExceeded&&n.add()}),e.TgZ(12,"span",11),e._uU(13,"add"),e.qZA()()()(),e.YNc(14,yt,4,5,"ng-template",null,12,e.W1O),e.qZA()),2&t){const l=e.MAs(5);e.Q6J("ngClass",e.VKq(9,K,n.formControl.invalid)),e.xp6(3),e.Q6J("ngIf",n.parsedTitle)("ngIfElse",l),e.xp6(3),e.Q6J("ngIf",n.parsedDescription),e.xp6(1),e.Q6J("ngIf",n.showError&&n.formControl.errors),e.xp6(1),e.Q6J("ngIf",n.field.fieldGroup&&n.field.fieldGroup.length),e.xp6(2),e.Q6J("disableInstance",!n.maxLengthExceeded)("tippyProps",e.VKq(12,vt,e.DdM(11,Ft))),e.xp6(1),e.Q6J("disabled",n.maxLengthExceeded)}},directives:[s.mk,s.O5,s.tP,u.M2,s.sg,z.$,u.cw],styles:["legend[_ngcontent-%COMP%]   .list-counter[_ngcontent-%COMP%]{padding-top:.175rem}legend[_ngcontent-%COMP%]   .item-icons[_ngcontent-%COMP%]{padding-top:.1rem}"]}),o})();function bt(o,i){if(1&o&&e._UZ(0,"label",4),2&o){const t=e.oxw();e.Q6J("for",t.id)("innerHTML",t.parsedTitle,e.oJD)}}function Ct(o,i){1&o&&(e.TgZ(0,"span",5),e._uU(1," *"),e.qZA())}const Ot=function(o,i){return{"form-check-inline":o,"form-switch":i}};let Tt=(()=>{class o extends f{constructor(t){super(),this.customFormUtilsService=t,this.defaultOptions={props:{indeterminate:!0,hideLabel:!0,formCheck:"default"}},this.parsedTitle=""}ngOnInit(){this.props.label&&"nolabel"!==this.props.formCheck&&(this.parsedTitle=this.customFormUtilsService.parseBBCode(this.props.label))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(B))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-custom-checkbox"]],features:[e.qOj],decls:4,vars:13,consts:[[1,"form-check",3,"ngClass"],["type","checkbox",1,"form-check-input",3,"indeterminate","formControl","formlyAttributes"],["class","form-check-label",3,"for","innerHTML",4,"ngIf"],["aria-hidden","true",4,"ngIf"],[1,"form-check-label",3,"for","innerHTML"],["aria-hidden","true"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"input",1),e.YNc(2,bt,1,2,"label",2),e.YNc(3,Ct,2,0,"span",3),e.qZA()),2&t&&(e.Q6J("ngClass",e.WLB(10,Ot,"inline"===n.props.formCheck||"inline-switch"===n.props.formCheck,"switch"===n.props.formCheck||"inline-switch"===n.props.formCheck)),e.xp6(1),e.ekj("is-invalid",n.showError)("position-static","nolabel"===n.props.formCheck),e.Q6J("indeterminate",n.props.indeterminate&&null==n.formControl.value)("formControl",n.formControl)("formlyAttributes",n.field),e.xp6(1),e.Q6J("ngIf",n.parsedTitle),e.xp6(1),e.Q6J("ngIf",n.props.required&&!0!==n.props.hideRequiredMarker))},directives:[s.mk,c.Wl,c.JJ,c.oH,u.JD,s.O5],encapsulation:2,changeDetection:0}),o})();var Mt=d(8139),wt=d(655);const At=["editor"];let Et=(()=>{class o{constructor(t,n){this.ngZone=t,this.monacoPathConfig=n,this.isMonacoLoaded$=new D.X(!1),this._monacoPath="assets/monaco-editor/min/vs",window.monacoEditorAlreadyInitialized?t.run(()=>this.isMonacoLoaded$.next(!0)):(window.monacoEditorAlreadyInitialized=!0,this.monacoPathConfig&&(this.monacoPath=this.monacoPathConfig),this.loadMonaco())}set monacoPath(t){t&&(this._monacoPath=t)}loadMonaco(){const t=()=>{let J=this._monacoPath;window.amdRequire=window.require;const U=!!this.nodeRequire,Z=J.includes("http");U&&(window.require=this.nodeRequire,Z||(J=window.require("path").resolve(window.__dirname,this._monacoPath))),window.amdRequire.config({paths:{vs:J}}),window.amdRequire(["vs/editor/editor.main"],()=>{this.ngZone.run(()=>this.isMonacoLoaded$.next(!0))},P=>console.error("Error loading monaco-editor: ",P))};if(window.amdRequire)return t();window.require&&(this.addElectronFixScripts(),this.nodeRequire=window.require);const h=document.createElement("script");h.type="text/javascript",h.src=`${this._monacoPath}/loader.js`,h.addEventListener("load",t),document.body.appendChild(h)}addElectronFixScripts(){const t=document.createElement("script"),n=document.createTextNode("self.module = undefined;"),l=document.createTextNode("self.process.browser = true;");t.appendChild(n),t.appendChild(l),document.body.appendChild(t)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(e.R0b),e.LFG("MONACO_PATH",8))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),Jt=(()=>{class o{constructor(t){this.monacoLoader=t,this.init=new e.vpe,this.onTouched=()=>{},this.onErrorStatusChange=()=>{},this.propagateChange=()=>{}}get model(){return this.editor&&this.editor.getModel()}get modelMarkers(){return this.model&&monaco.editor.getModelMarkers({resource:this.model.uri})}ngOnInit(){this.monacoLoader.isMonacoLoaded$.pipe((0,I.h)(t=>t),(0,G.q)(1)).subscribe(()=>{this.initEditor()})}ngOnChanges(t){if(this.editor&&t.options&&!t.options.firstChange){const n=t.options.currentValue,{language:l,theme:h}=n,J=(0,wt._T)(n,["language","theme"]),{language:U,theme:Z}=t.options.previousValue;U!==l&&monaco.editor.setModelLanguage(this.editor.getModel(),this.options&&this.options.language?this.options.language:"text"),Z!==h&&monaco.editor.setTheme(h),this.editor.updateOptions(J)}if(this.editor&&t.uri){const n=t.uri.currentValue,l=t.uri.previousValue;if(l&&!n||!l&&n||n&&l&&n.path!==l.path){const h=this.editor.getValue();let J;this.modelUriInstance&&this.modelUriInstance.dispose(),n&&(J=monaco.editor.getModels().find(U=>U.uri.path===n.path)),this.modelUriInstance=J||monaco.editor.createModel(h,this.options.language||"text",this.uri),this.editor.setModel(this.modelUriInstance)}}}writeValue(t){this.value=t,this.editor&&t?this.editor.setValue(t):this.editor&&this.editor.setValue("")}registerOnChange(t){this.propagateChange=t}registerOnTouched(t){this.onTouched=t}validate(){return this.parsedError?{monaco:{value:this.parsedError.split("|")}}:null}registerOnValidatorChange(t){this.onErrorStatusChange=t}initEditor(){const t={value:[this.value].join("\n"),language:"text",automaticLayout:!0,scrollBeyondLastLine:!1,theme:"vc"};this.editor=monaco.editor.create(this.editorContent.nativeElement,this.options?Object.assign(Object.assign({},t),this.options):t),this.registerEditorListeners(),this.init.emit(this.editor)}registerEditorListeners(){this.editor.onDidChangeModelContent(()=>{this.propagateChange(this.editor.getValue())}),this.editor.onDidChangeModelDecorations(()=>{const t=this.modelMarkers.map(({message:l})=>l).join("|");this.parsedError!==t&&(this.parsedError=t,this.onErrorStatusChange())}),this.editor.onDidBlurEditorText(()=>{this.onTouched()})}ngOnDestroy(){this.editor&&this.editor.dispose()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Et))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ngx-monaco-editor"]],viewQuery:function(t,n){if(1&t&&e.Gf(At,7),2&t){let l;e.iGM(l=e.CRH())&&(n.editorContent=l.first)}},inputs:{options:"options",uri:"uri"},outputs:{init:"init"},features:[e._Bn([{provide:c.JU,useExisting:(0,e.Gpc)(()=>o),multi:!0},{provide:c.Cf,useExisting:(0,e.Gpc)(()=>o),multi:!0}]),e.TTD],decls:4,vars:0,consts:[["fxFlex","",1,"editor-container"],["container",""],[1,"monaco-editor"],["editor",""]],template:function(t,n){1&t&&(e.TgZ(0,"div",0,1),e._UZ(2,"div",2,3),e.qZA())},styles:[".monaco-editor[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0}.editor-container[_ngcontent-%COMP%]{overflow:hidden;position:relative;display:table;width:100%;height:100%;min-width:0}"],changeDetection:0}),o})(),It=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[]]}),o})();function St(o,i){if(1&o&&(e.ynx(0),e.TgZ(1,"textarea",2),e._uU(2,"            "),e.qZA(),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("cols",1)("rows",10)("formlyAttributes",t.field)}}function Dt(o,i){1&o&&(e.ynx(0),e.TgZ(1,"p",4),e._UZ(2,"span",5),e.qZA(),e.BQk())}function Zt(o,i){if(1&o&&e._UZ(0,"ngx-monaco-editor",6),2&o){const t=e.oxw(2);e.Udp("height",t.editorHeight),e.Q6J("options",t.editorOptions)("formControl",t.formControl)}}function Qt(o,i){if(1&o&&(e.YNc(0,Dt,3,0,"ng-container",0),e.YNc(1,Zt,1,4,"ng-template",null,3,e.W1O)),2&o){const t=e.MAs(2),n=e.oxw();e.Q6J("ngIf",n.loading)("ngIfElse",t)}}let jt=(()=>{class o extends u.fS{constructor(){super(...arguments),this.touchDevice=Mt.eX,this.editorOptions={theme:"vs-dark",language:"json"},this.loading=!0,this.editorHeight="350px"}ngOnInit(){this.touchDevice||(this.field.props.editorOptions&&(this.field.props.editorOptions.height&&(this.editorHeight=this.field.props.editorOptions.height,delete this.field.props.editorOptions.height),this.editorOptions=Object.assign(Object.assign({},this.editorOptions),this.field.props.editorOptions)),this.loading=!1)}}return o.\u0275fac=function(){let i;return function(n){return(i||(i=e.n5z(o)))(n||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-code-editor-type"]],features:[e.qOj],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["notTouchDevice",""],[1,"form-control",3,"formControl","cols","rows","formlyAttributes"],["codeEditor",""],[1,"placeholder-glow"],[1,"placeholder","col-12","placeholder-lg"],[1,"d-block","formly-code-editor",3,"options","formControl"]],template:function(t,n){if(1&t&&(e.YNc(0,St,3,6,"ng-container",0),e.YNc(1,Qt,3,2,"ng-template",null,1,e.W1O)),2&t){const l=e.MAs(2);e.Q6J("ngIf",n.touchDevice)("ngIfElse",l)}},directives:[s.O5,c.Fj,c.JJ,c.oH,u.JD,Jt],encapsulation:2}),o})();var V=d(5861),ee=d(5640);function Pt(o,i){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().formControl.setValue(void 0)}),e._uU(2,"highlight_off"),e.qZA(),e.BQk()}}function Lt(o,i){1&o&&(e.ynx(0),e.TgZ(1,"p",5),e._UZ(2,"span",6),e.qZA(),e.BQk())}function Ut(o,i){if(1&o&&e._UZ(0,"option",10),2&o){const t=i.$implicit;e.Q6J("ngValue",t.id||t.name)("innerText",t.name)}}function Nt(o,i){if(1&o&&(e.ynx(0),e.TgZ(1,"select",8),e.YNc(2,Ut,1,2,"option",9),e.qZA(),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("formlyAttributes",t.field),e.xp6(1),e.Q6J("ngForOf",t.groupsList)}}function Yt(o,i){if(1&o&&e._UZ(0,"option",10),2&o){const t=i.$implicit;e.Q6J("ngValue",t.id||t.name)("innerText",t.name)}}function qt(o,i){if(1&o&&(e.TgZ(0,"select",11),e.YNc(1,Yt,1,2,"option",9),e.qZA()),2&o){const t=e.oxw(2);e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("formlyAttributes",t.field),e.xp6(1),e.Q6J("ngForOf",t.groupsList)}}function Bt(o,i){if(1&o&&(e.YNc(0,Nt,3,5,"ng-container",2),e.YNc(1,qt,2,5,"ng-template",null,7,e.W1O)),2&o){const t=e.MAs(2),n=e.oxw();e.Q6J("ngIf",n.field.props.multiple)("ngIfElse",t)}}const Vt=function(o){return{"no-label":o}};let Wt=(()=>{class o extends u.fS{constructor(t){super(),this.forumService=t,this.loading=!0,this.groupsList=[]}ngOnInit(){var t=this;return(0,V.Z)(function*(){t.field.defaultValue=void 0,t.field.props.hasOwnProperty("multiple")||(t.field.props.multiple=!0),t.groupsList=(yield t.forumService.getGroups()).sort((n,l)=>n.name.localeCompare(l.name)),t.field.props.keepGroupsWithoutId||(t.groupsList=t.groupsList.filter(n=>n.id>0)),t.loading=!1,t.field.formControl.updateValueAndValidity()})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(ee._))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-forum-groups"]],features:[e.qOj],decls:5,vars:6,consts:[[1,"position-relative","wrapper",3,"ngClass"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["formSelect",""],[1,"reset-icon","position-absolute","cursor-pointer","d-block","material-icons","text-danger",3,"click"],[1,"placeholder-glow"],[1,"placeholder","col-12","placeholder-lg"],["single",""],["multiple","",1,"form-select",3,"formControl","formlyAttributes"],[3,"ngValue","innerText",4,"ngFor","ngForOf"],[3,"ngValue","innerText"],[1,"form-select",3,"formControl","formlyAttributes"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,Pt,3,0,"ng-container",1),e.YNc(2,Lt,3,0,"ng-container",2),e.YNc(3,Bt,3,2,"ng-template",null,3,e.W1O),e.qZA()),2&t){const l=e.MAs(4);e.Q6J("ngClass",e.VKq(4,Vt,!n.props.label)),e.xp6(1),e.Q6J("ngIf",!n.props.label||void 0!==n.formControl.value),e.xp6(1),e.Q6J("ngIf",n.loading)("ngIfElse",l)}},directives:[s.mk,s.O5,c.K7,c.JJ,c.oH,u.JD,s.sg,c.YN,c.Kr,c.EJ],styles:[".reset-icon[_ngcontent-%COMP%]{right:0}.wrapper[_ngcontent-%COMP%]:not(.no-label)   .reset-icon[_ngcontent-%COMP%]{top:calc(-24px - .45rem)}.no-label[_ngcontent-%COMP%]{padding-top:calc(24px + .45rem)}.no-label[_ngcontent-%COMP%]   .reset-icon[_ngcontent-%COMP%]{top:0}"]}),o})();function Ht(o,i){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().formControl.setValue(void 0)}),e._uU(2,"highlight_off"),e.qZA(),e.BQk()}}function Rt(o,i){1&o&&(e.ynx(0),e.TgZ(1,"p",5),e._UZ(2,"span",6),e.qZA(),e.BQk())}function $t(o,i){if(1&o&&(e.ynx(0),e._UZ(1,"option",10),e.BQk()),2&o){const t=i.$implicit;e.xp6(1),e.Q6J("ngValue",t.id)("innerHTML"," - "+t.name,e.oJD)}}function Gt(o,i){if(1&o&&(e.ynx(0),e.YNc(1,$t,2,2,"ng-container",9),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.subsections)}}function zt(o,i){if(1&o&&(e.ynx(0),e._UZ(1,"option",10),e.YNc(2,Gt,2,1,"ng-container",1),e.BQk()),2&o){const t=i.$implicit;e.xp6(1),e.Q6J("ngValue",t.id)("innerHTML",t.name,e.oJD),e.xp6(1),e.Q6J("ngIf",t.subsections&&t.subsections.length)}}function Xt(o,i){if(1&o&&(e.ynx(0),e._UZ(1,"option",10),e.BQk()),2&o){const t=i.$implicit;e.xp6(1),e.Q6J("ngValue",t)("innerHTML"," -- Sezione ristretta -- #"+t,e.oJD)}}function Kt(o,i){if(1&o&&(e.ynx(0),e.YNc(1,Xt,2,2,"ng-container",9),e.BQk()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.restrictedOrDeletedSections)}}function eo(o,i){if(1&o&&(e.ynx(0),e.TgZ(1,"select",8),e.YNc(2,zt,3,3,"ng-container",9),e.YNc(3,Kt,2,1,"ng-container",1),e.qZA(),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("formlyAttributes",t.field),e.xp6(1),e.Q6J("ngForOf",t.sectionsList),e.xp6(1),e.Q6J("ngIf",t.restrictedOrDeletedSections.length>0)}}function to(o,i){if(1&o&&(e.ynx(0),e._UZ(1,"option",10),e.BQk()),2&o){const t=i.$implicit;e.xp6(1),e.Q6J("ngValue",t.id)("innerHTML"," - "+t.name,e.oJD)}}function oo(o,i){if(1&o&&(e.ynx(0),e.YNc(1,to,2,2,"ng-container",9),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.subsections)}}function io(o,i){if(1&o&&(e.ynx(0),e._UZ(1,"option",10),e.YNc(2,oo,2,1,"ng-container",1),e.BQk()),2&o){const t=i.$implicit;e.xp6(1),e.Q6J("ngValue",t.id)("innerHTML",t.name,e.oJD),e.xp6(1),e.Q6J("ngIf",t.subsections&&t.subsections.length)}}function no(o,i){if(1&o&&(e.ynx(0),e._UZ(1,"option",10),e.BQk()),2&o){const t=i.$implicit;e.xp6(1),e.Q6J("ngValue",t)("innerHTML"," -- Sezione ristretta -- #"+t,e.oJD)}}function ro(o,i){if(1&o&&(e.ynx(0),e.YNc(1,no,2,2,"ng-container",9),e.BQk()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.restrictedOrDeletedSections)}}function lo(o,i){if(1&o&&(e.TgZ(0,"select",11),e.YNc(1,io,3,3,"ng-container",9),e.YNc(2,ro,2,1,"ng-container",1),e.qZA()),2&o){const t=e.oxw(2);e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("formlyAttributes",t.field),e.xp6(1),e.Q6J("ngForOf",t.sectionsList),e.xp6(1),e.Q6J("ngIf",t.restrictedOrDeletedSections.length>0)}}function so(o,i){if(1&o&&(e.YNc(0,eo,4,6,"ng-container",2),e.YNc(1,lo,3,6,"ng-template",null,7,e.W1O)),2&o){const t=e.MAs(2),n=e.oxw();e.Q6J("ngIf",n.field.props.multiple)("ngIfElse",t)}}const ao=function(o){return{"no-label":o}};let co=(()=>{class o extends u.fS{constructor(t){super(),this.forumService=t,this.loading=!0,this.sectionsList=[],this.restrictedOrDeletedSections=[]}ngOnInit(){var t=this;return(0,V.Z)(function*(){t.field.defaultValue=void 0,t.field.props.hasOwnProperty("multiple")||(t.field.props.multiple=!0),t.restrictedOrDeletedSections=Array.isArray(t.field.formControl.value)?[...t.field.formControl.value]:[];const n=yield t.forumService.getSections();t.sectionsList=n.map(l=>{const h=t.restrictedOrDeletedSections.indexOf(l.id);return h>-1&&t.restrictedOrDeletedSections.splice(h,1),Object.assign(Object.assign({},l),{subsections:t.flattenSubsections(l)})}),t.loading=!1,t.field.formControl.updateValueAndValidity()})()}flattenSubsections(t){let n=[],l=-1;if(t.subsections&&t.subsections.length)for(const h of t.subsections)l=this.restrictedOrDeletedSections.indexOf(h.id),l>-1&&this.restrictedOrDeletedSections.splice(l,1),n.push(h),h.subsections&&(n=[...n,...this.flattenSubsections(h)]);return n}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(ee._))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-forum-sections"]],features:[e.qOj],decls:5,vars:6,consts:[[1,"position-relative","wrapper",3,"ngClass"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["formSelect",""],[1,"reset-icon","position-absolute","cursor-pointer","d-block","material-icons","text-danger",3,"click"],[1,"placeholder-glow"],[1,"placeholder","col-12","placeholder-lg"],["single",""],["multiple","",1,"form-select",3,"formControl","formlyAttributes"],[4,"ngFor","ngForOf"],[3,"ngValue","innerHTML"],[1,"form-select",3,"formControl","formlyAttributes"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,Ht,3,0,"ng-container",1),e.YNc(2,Rt,3,0,"ng-container",2),e.YNc(3,so,3,2,"ng-template",null,3,e.W1O),e.qZA()),2&t){const l=e.MAs(4);e.Q6J("ngClass",e.VKq(4,ao,!n.props.label)),e.xp6(1),e.Q6J("ngIf",!n.props.label||void 0!==n.formControl.value),e.xp6(1),e.Q6J("ngIf",n.loading)("ngIfElse",l)}},directives:[s.mk,s.O5,c.K7,c.JJ,c.oH,u.JD,s.sg,c.YN,c.Kr,c.EJ],styles:[".reset-icon[_ngcontent-%COMP%]{right:0}.wrapper[_ngcontent-%COMP%]:not(.no-label)   .reset-icon[_ngcontent-%COMP%]{top:calc(-24px - .45rem)}.no-label[_ngcontent-%COMP%]{padding-top:calc(24px + .45rem)}.no-label[_ngcontent-%COMP%]   .reset-icon[_ngcontent-%COMP%]{top:0}"]}),o})();var po=d(7579),mo=d(8372),uo=d(1884),fo=d(6451),_o=d(3900),go=d(9646);let te=(()=>{class o{transform(t){let n=document.createElement("TEXTAREA");return n.innerHTML=t,n.value}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275pipe=e.Yjl({name:"decodeHtmlEntitites",type:o,pure:!0}),o})();var ho=d(3022),yo=d(4695),Fo=d(3011),vo=d(8882),oe=d(4199),xo=d(890),bo=d(5259),Co=d(6962);function Oo(o,i){1&o&&(e.TgZ(0,"span",8),e._uU(1,"*"),e.qZA())}function To(o,i){if(1&o&&(e.TgZ(0,"legend",5)(1,"label",6),e._uU(2),e.YNc(3,Oo,2,0,"span",7),e.qZA()()),2&o){const t=e.oxw();e.xp6(1),e.s9C("for",t.id),e.xp6(1),e.hij(" ",t.props.label," "),e.xp6(1),e.Q6J("ngIf",t.props.required)}}function Mo(o,i){1&o&&e.GkF(0)}function wo(o,i){if(1&o&&e._UZ(0,"div",9),2&o){const t=e.oxw();e.Q6J("innerHTML",t.parsedDescription,e.oJD)}}function Ao(o,i){1&o&&(e.TgZ(0,"div",16)(1,"span",17),e._uU(2,"Loading..."),e.qZA()())}function ko(o,i){if(1&o&&(e.TgZ(0,"div",18),e._UZ(1,"formly-validation-message",19),e.qZA()),2&o){const t=e.oxw(2);e.Udp("display","block"),e.xp6(1),e.Q6J("field",t.field)}}function Eo(o,i){1&o&&e._UZ(0,"app-loader",20)}function Jo(o,i){1&o&&e._UZ(0,"div",25),2&o&&e.Q6J("innerText","Nessun utente inserito!")}function Io(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"li")(1,"a",28)(2,"div",29),e.NdJ("click",function(l){const J=e.CHM(t).$implicit;return e.oxw(4).removeUser(J,l)}),e.TgZ(3,"div",30),e._uU(4,"remove"),e.qZA()(),e._UZ(5,"img",31),e.ALo(6,"uploadsreplace"),e.qZA(),e._UZ(7,"a",32),e.qZA()}if(2&o){const t=i.$implicit,n=e.oxw(4);e.Gre("d-flex flex-column align-items-center user-",n.circuit,""),e.xp6(1),e.Q6J("href",n.baseUrl+t.uid.substring(2),e.LSH),e.xp6(1),e.Q6J("disableOnTouchDevice",!0),e.xp6(3),e.s9C("alt",t.nickname+"'s avatar"),e.Q6J("src",e.lcZ(6,9,t.avatar),e.LSH),e.xp6(2),e.Q6J("innerHTML",t.nickname,e.oJD)("href",n.baseUrl+t.uid.substring(2),e.LSH)}}function So(o,i){if(1&o&&(e.TgZ(0,"ul",26),e.YNc(1,Io,8,11,"li",27),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.selectedUsers)}}const Do=function(o){return{"empty-list":o}};function Zo(o,i){if(1&o&&(e.TgZ(0,"fieldset",21)(1,"legend",22),e._uU(2,"Lista utenti"),e.qZA(),e.YNc(3,Jo,1,1,"div",23),e.YNc(4,So,2,1,"ng-template",null,24,e.W1O),e.qZA()),2&o){const t=e.MAs(5),n=e.oxw(2);e.Q6J("ngClass",e.VKq(3,Do,0===n.selectedUsers.length)),e.xp6(3),e.Q6J("ngIf",0===n.selectedUsers.length)("ngIfElse",t)}}function Qo(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",10)(1,"input",11),e.NdJ("ngModelChange",function(l){return e.CHM(t),e.oxw().inputValue=l})("selectItem",function(l){return e.CHM(t),e.oxw().selectUser(l)})("focus",function(l){return e.CHM(t),e.oxw().focus.next(l.target.value)}),e.qZA(),e.YNc(2,Ao,3,0,"div",12),e.qZA(),e.YNc(3,ko,2,3,"div",13),e.YNc(4,Eo,1,0,"app-loader",14),e.YNc(5,Zo,6,5,"ng-template",null,15,e.W1O)}if(2&o){const t=e.MAs(6),n=e.oxw();e.xp6(1),e.ekj("is-invalid",n.showError),e.Q6J("ngModel",n.inputValue)("formlyAttributes",n.field)("ngbTypeahead",n.search)("editable",!1)("inputFormatter",n.inputFormatter)("resultFormatter",n.outputFormatter),e.xp6(1),e.Q6J("ngIf",n.searching),e.xp6(1),e.Q6J("ngIf",n.showError),e.xp6(1),e.Q6J("ngIf",n.loading)("ngIfElse",t)}}let jo=(()=>{class o extends u.fS{constructor(t,n,l,h,J,U){var Z;if(super(),this.userService=t,this.globalsService=n,this.changeDetectorRef=l,this.toastService=h,this.customFormUtilsService=J,this.decodeHtmlEntitiesPipe=U,this.inputValue="",this.selectedUsers=[],this.loading=!0,this.searching=!1,this.focus=new po.x,this.parsedDescription="",this.formlyFieldValues=[],this.lastSearchedValueWithoutResult="",this.outputFormatter=P=>P?P.nickname.indexOf("&")>-1?this.decodeHtmlEntitiesPipe.transform(P.nickname):P.nickname:"",this.search=P=>{const $=P.pipe((0,mo.b)(1e3),(0,uo.x)());return(0,fo.T)($,this.focus).pipe((0,E.b)(()=>this.setSearching(!0)),(0,_o.w)(ie=>ie.length<3?(0,go.of)([]):this.getUsers(ie)),(0,E.b)(()=>this.setSearching(!1)))},this.circuit=(null===(Z=this.globalsService.credentials)||void 0===Z?void 0:Z.site.short)||"",!this.circuit)throw new Error("Missing credentials!");this.baseUrl=ho.hD[this.circuit]+"/?act=Profile&MID="}ngOnInit(){var t=this;return(0,V.Z)(function*(){t.parsedDescription=t.props.description?t.customFormUtilsService.parseBBCode(t.props.description):"",t.formlyFieldValues=Array.isArray(t.formControl.value)?t.formControl.value:Array.isArray(t.field.defaultValue)?t.field.defaultValue:[],yield t.getSelectedUsersFromApi(),t.loading=!1,t.formControl.updateValueAndValidity(),t.formControl.registerOnChange(()=>{t.formControlChangeCallback()})})()}inputFormatter(t){return t.nickname}getUsers(t){var n=this;return(0,V.Z)(function*(){if(n.lastSearchedValueWithoutResult&&0===t.indexOf(n.lastSearchedValueWithoutResult))return[];const l=yield n.userService.searchUserByName(t);return 0===l.length&&(n.lastSearchedValueWithoutResult=t),l})()}setSearching(t){this.searching=t,this.changeDetectorRef.detectChanges()}selectUser(t){const n=t.item,l=Number(n.uid.substring(2));if(this.formlyFieldValues.includes(l))return this.toastService.show({content:`L'utente <strong>${n.nickname}</strong> \xe8 gi\xe0 stato aggiunto alla lista!`}),void(this.inputValue="");this.formlyFieldValues.push(l),this.selectedUsers.push(n),t.preventDefault(),this.inputValue="",this.formControl.setValue([...this.formlyFieldValues])}removeUser(t,n){n.preventDefault(),n.stopPropagation();const l=Number(t.uid.substring(2));this.formlyFieldValues=this.formlyFieldValues.filter(h=>h!==l),this.selectedUsers=this.selectedUsers.filter(h=>h.uid!==t.uid),this.formControl.setValue([...this.formlyFieldValues])}formControlChangeCallback(){var t=this;return(0,V.Z)(function*(){if(!Array.isArray(t.formControl.value))return;let n=!1;if(t.formControl.value.length!==t.formlyFieldValues.length)n=!0;else for(const l of t.formControl.value)if(!t.formlyFieldValues.includes(l)){n=!0;break}n&&(t.formlyFieldValues=t.formControl.value,t.loading=!0,t.changeDetectorRef.detectChanges(),yield t.getSelectedUsersFromApi(),t.loading=!1,t.changeDetectorRef.detectChanges())})()}getSelectedUsersFromApi(){var t=this;return(0,V.Z)(function*(){t.selectedUsers=0!==t.formlyFieldValues.length?(yield t.userService.getDetailsFromUids(t.formlyFieldValues.map(n=>t.circuit+n))).sort((n,l)=>n.nickname>l.nickname?1:l.nickname>n.nickname?-1:0):[]})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(yo.K),e.Y36(Fo.d),e.Y36(e.sBO),e.Y36(vo.k),e.Y36(B),e.Y36(te))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-forum-users"]],features:[e._Bn([te]),e.qOj],decls:6,vars:5,consts:[[1,"mb-3","rounded","px-3","pt-2","pb-3","formly-fieldset"],["class","legend-reset fs-reset mb-0 px-2 mw-100 lh-1 py-1",4,"ngIf"],[4,"ngTemplateOutlet"],["class","form-text text-muted",3,"innerHTML",4,"ngIf"],["fieldContet",""],[1,"legend-reset","fs-reset","mb-0","px-2","mw-100","lh-1","py-1"],[1,"form-label","mb-0","mw-100","text-truncate",3,"for"],["aria-hidden","true",4,"ngIf"],["aria-hidden","true"],[1,"form-text","text-muted",3,"innerHTML"],[1,"position-relative"],["type","text","container","body",1,"form-control",3,"ngModel","formlyAttributes","ngbTypeahead","editable","inputFormatter","resultFormatter","ngModelChange","selectItem","focus"],["class","spinner-border spinner-border-sm text-primary position-absolute","role","status",4,"ngIf"],["class","invalid-feedback",3,"display",4,"ngIf"],["message","Recupero utenti","class","d-block mt-3",4,"ngIf","ngIfElse"],["userList",""],["role","status",1,"spinner-border","spinner-border-sm","text-primary","position-absolute"],[1,"visually-hidden"],[1,"invalid-feedback"],[3,"field"],["message","Recupero utenti",1,"d-block","mt-3"],[1,"formly-user-list-container","rounded","px-3","pt-2","mb-3","mt-2",3,"ngClass"],[1,"legend-reset","fs-reset","mb-0","px-2","pb-1"],["class","alert alert-primary text-center mb-0 fw-bold",3,"innerText",4,"ngIf","ngIfElse"],["noEmpty",""],[1,"alert","alert-primary","text-center","mb-0","fw-bold",3,"innerText"],[1,"formly-user-list","list-unstyled","mb-0","d-grid","px-2"],[3,"class",4,"ngFor","ngForOf"],["target","_blank",1,"avatar-container","rounded-circle","d-block","position-relative",3,"href"],["appTippy","Rimuovi",1,"remove-user","alert","alert-danger","position-absolute","cursor-pointer","mb-0","py-0","px-1",3,"disableOnTouchDevice","click"],[1,"material-icons","d-block","fs-reset"],["appImage","",1,"d-block","image-cover","rounded-circle",3,"src","alt"],["target","_blank",1,"d-block","fw-bold","mt-1","nickname","text-truncate","mw-100",3,"innerHTML","href"]],template:function(t,n){if(1&t&&(e.TgZ(0,"fieldset",0),e.YNc(1,To,4,3,"legend",1),e.YNc(2,Mo,1,0,"ng-container",2),e.YNc(3,wo,1,1,"div",3),e.qZA(),e.YNc(4,Qo,7,12,"ng-template",null,4,e.W1O)),2&t){const l=e.MAs(5);e.ekj("has-error",n.formControl.invalid),e.xp6(1),e.Q6J("ngIf",n.props.label),e.xp6(1),e.Q6J("ngTemplateOutlet",l),e.xp6(1),e.Q6J("ngIf",n.parsedDescription)}},directives:[s.O5,s.tP,c.Fj,oe.dR,c.JJ,c.On,u.JD,u.M2,xo.R,s.mk,s.sg,z.$,bo.t],pipes:[Co.g],styles:[".spinner-border[_ngcontent-%COMP%]{top:calc(50% - 8px);right:10px}fieldset.formly-user-list-container[_ngcontent-%COMP%]{border:1px dashed var(--bs-gray-500)}fieldset.formly-user-list-container[_ngcontent-%COMP%]:not(.empty-list){padding-bottom:.75rem}fieldset.formly-user-list-container.empty-list[_ngcontent-%COMP%]{padding-bottom:1rem}.formly-user-list[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(60px,1fr));gap:1rem}.formly-user-list[_ngcontent-%COMP%]   .remove-user[_ngcontent-%COMP%]{top:0;left:-8px}.formly-user-list[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{width:60px;height:60px;border:2px solid}.formly-user-list[_ngcontent-%COMP%]   .user-ff[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{border-color:#58a72e}.formly-user-list[_ngcontent-%COMP%]   .user-ff[_ngcontent-%COMP%]   .nickname[_ngcontent-%COMP%]{color:#58a72e!important}.formly-user-list[_ngcontent-%COMP%]   .user-fc[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{border-color:#0082cd}.formly-user-list[_ngcontent-%COMP%]   .user-fc[_ngcontent-%COMP%]   .nickname[_ngcontent-%COMP%]{color:#0082cd!important}.formly-user-list[_ngcontent-%COMP%]   .user-bf[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{border-color:#e67f22}.formly-user-list[_ngcontent-%COMP%]   .user-bf[_ngcontent-%COMP%]   .nickname[_ngcontent-%COMP%]{color:#e67f22!important}@media (min-width: 960px){.formly-user-list[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(75px,1fr));gap:1.5rem}.formly-user-list[_ngcontent-%COMP%]   .remove-user[_ngcontent-%COMP%]{top:4px}.formly-user-list[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{width:75px;height:75px}}"]}),o})();function Po(o,i){if(1&o&&(e.TgZ(0,"legend"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.props.label)}}function Lo(o,i){if(1&o&&e._UZ(0,"p",5),2&o){const t=e.oxw();e.Q6J("innerHTML",t.parsedDescription,e.oJD)}}function Uo(o,i){if(1&o&&(e.TgZ(0,"div",6),e._UZ(1,"formly-validation-message",7),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("field",t.field)}}function No(o,i){1&o&&e._UZ(0,"formly-field",7),2&o&&e.Q6J("field",i.$implicit)}let Yo=(()=>{class o extends u.fS{constructor(t){super(),this.customForumUtilsService=t,this.parsedDescription=""}ngOnInit(){this.props.description&&(this.parsedDescription=this.customForumUtilsService.parseBBCode(this.props.description))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(B))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-multi-schema"]],features:[e.qOj],decls:5,vars:4,consts:[[1,"pt-3","px-3","rounded","border","mt-2"],[4,"ngIf"],[3,"innerHTML",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],[3,"field",4,"ngFor","ngForOf"],[3,"innerHTML"],["role","alert",1,"alert","alert-danger"],[3,"field"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Po,2,1,"legend",1),e.YNc(2,Lo,1,1,"p",2),e.YNc(3,Uo,2,1,"div",3),e.YNc(4,No,1,1,"formly-field",4),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",n.props.label),e.xp6(1),e.Q6J("ngIf",n.parsedDescription),e.xp6(1),e.Q6J("ngIf",n.showError&&n.formControl.errors),e.xp6(1),e.Q6J("ngForOf",n.field.fieldGroup))},directives:[s.O5,u.M2,s.sg,u.cw],encapsulation:2}),o})();function qo(o,i){if(1&o&&(e.TgZ(0,"legend",6),e._UZ(1,"div",7),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("innerHTML",t.parsedTitle,e.oJD)}}function Bo(o,i){1&o&&e.GkF(0)}const Vo=function(o){return{"has-error":o}};function Wo(o,i){if(1&o&&(e.TgZ(0,"fieldset",3),e.YNc(1,qo,2,1,"legend",4),e.YNc(2,Bo,1,0,"ng-container",5),e.qZA()),2&o){const t=e.oxw(),n=e.MAs(4);e.Q6J("ngClass",e.VKq(3,Vo,t.formControl.invalid)),e.xp6(1),e.Q6J("ngIf",t.parsedTitle),e.xp6(1),e.Q6J("ngTemplateOutlet",n)}}function Ho(o,i){if(1&o&&e._UZ(0,"div",10),2&o){const t=e.oxw(2);e.Q6J("innerHTML",t.parsedTitle,e.oJD)}}function Ro(o,i){1&o&&e.GkF(0)}function $o(o,i){if(1&o&&(e.TgZ(0,"div",8),e.YNc(1,Ho,1,1,"div",9),e.YNc(2,Ro,1,0,"ng-container",5),e.qZA()),2&o){const t=e.oxw(),n=e.MAs(4);e.xp6(1),e.Q6J("ngIf",t.parsedTitle),e.xp6(1),e.Q6J("ngTemplateOutlet",n)}}function Go(o,i){if(1&o&&e._UZ(0,"p",14),2&o){const t=e.oxw(2);e.Q6J("innerHTML",t.parsedDescription,e.oJD)}}function zo(o,i){if(1&o&&(e.TgZ(0,"div",15),e._UZ(1,"formly-validation-message",16),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("field",t.field)}}function Xo(o,i){1&o&&e._UZ(0,"formly-field",16),2&o&&e.Q6J("field",i.$implicit)}function Ko(o,i){if(1&o&&(e.YNc(0,Go,1,1,"p",11),e.YNc(1,zo,2,1,"div",12),e.YNc(2,Xo,1,1,"formly-field",13)),2&o){const t=e.oxw();e.Q6J("ngIf",t.parsedDescription),e.xp6(1),e.Q6J("ngIf",t.showError&&t.formControl.errors),e.xp6(1),e.Q6J("ngForOf",t.field.fieldGroup)}}let ei=(()=>{class o extends u.fS{constructor(t){super(),this.customFormUtilsService=t,this.parsedTitle="",this.parsedDescription=""}ngOnInit(){this.parsedDescription=this.props.description?this.customFormUtilsService.parseBBCode(this.props.description):"",this.parsedTitle=this.props.label?this.customFormUtilsService.parseBBCode(this.props.label):""}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(B))},o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-object"]],features:[e.qOj],decls:5,vars:2,consts:[["class","px-3 mb-3 pt-1 rounded formly-fieldset",3,"ngClass",4,"ngIf","ngIfElse"],["noFieldset",""],["objectFieldContent",""],[1,"px-3","mb-3","pt-1","rounded","formly-fieldset",3,"ngClass"],["class","legend-reset fs-xl px-2 mb-0 pb-1 mw-100 d-flex align-items-center",4,"ngIf"],[4,"ngTemplateOutlet"],[1,"legend-reset","fs-xl","px-2","mb-0","pb-1","mw-100","d-flex","align-items-center"],[1,"mw-100","text-truncate",3,"innerHTML"],[1,"mb-3"],["class","h4",3,"innerHTML",4,"ngIf"],[1,"h4",3,"innerHTML"],["class","text-justify mt-2",3,"innerHTML",4,"ngIf"],["class","alert alert-danger formly-field-object-error text-center","role","alert",4,"ngIf"],[3,"field",4,"ngFor","ngForOf"],[1,"text-justify","mt-2",3,"innerHTML"],["role","alert",1,"alert","alert-danger","formly-field-object-error","text-center"],[3,"field"]],template:function(t,n){if(1&t&&(e.YNc(0,Wo,3,5,"fieldset",0),e.YNc(1,$o,3,2,"ng-template",null,1,e.W1O),e.YNc(3,Ko,3,3,"ng-template",null,2,e.W1O)),2&t){const l=e.MAs(2);e.Q6J("ngIf",n.props.fieldsetTemplate)("ngIfElse",l)}},directives:[s.O5,s.mk,s.tP,u.M2,s.sg,u.cw],encapsulation:2}),o})(),ti=(()=>{class o extends u.fS{constructor(){super(...arguments),this.defaultOptions={props:{cols:1,rows:10}}}}return o.\u0275fac=function(){let i;return function(n){return(i||(i=e.n5z(o)))(n||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["formly-field-textarea"]],features:[e.qOj],decls:2,vars:6,consts:[[1,"form-control",3,"formControl","cols","rows","formlyAttributes"]],template:function(t,n){1&t&&(e.TgZ(0,"textarea",0),e._uU(1,"    "),e.qZA()),2&t&&(e.ekj("is-invalid",n.showError),e.Q6J("formControl",n.formControl)("cols",n.props.cols)("rows",n.props.rows)("formlyAttributes",n.field))},directives:[c.Fj,c.JJ,c.oH,u.JD],encapsulation:2,changeDetection:0}),o})();var oi=d(5950),ii=d(6742);function li(o,i){return`Questo campo deve avere almeno ${i.props.minLength} caratteri`}function si(o,i){return`Questo campo pu\xf2 avere al massimo ${i.props.maxLength} caratteri`}function ai(o,i){return`Questo campo deve avere un valore minimo di ${i.props.min}`}function ci(o,i){return`Questo campo pu\xf2 avere un valore massimo di ${i.props.max}`}function pi(){return"Il campo non rispetta lo schema richiesto"}function di(o,i){return`Questo campo deve avere almeno ${i.props.minItems} element${1===i.props.minItems?"o":"i"}!`}function mi(o,i){return`Questo campo pu\xf2 avere al massimo ${i.props.maxItems} element${1===i.props.maxItems?"o":"i"}!`}function ui(o,i){return`Questo campo deve essere un multiplo di ${i.props.step}`}var fi=d(9409),_i=d(8096);let gi=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[s.ez,qe,u.X0.forChild({extras:{renderFormlyFieldElement:!1},wrappers:[{name:"form-field",component:it}],validationMessages:[{name:"required",message:"Compila questo campo!"},{name:"minLength",message:li},{name:"maxLength",message:si},{name:"min",message:ai},{name:"max",message:ci},{name:"minItems",message:di},{name:"maxItems",message:mi},{name:"multipleOf",message:ui},{name:"pattern",message:pi},{name:"uniqueItems",message:"Non possono esserci elementi uguali fra loro!"}],types:[{name:"array",component:xt},{name:"code-editor",component:jt,wrappers:["form-field"]},{name:"object",component:ei},{name:"textarea",component:ti},{name:"forum-groups",component:Wt,wrappers:["form-field"]},{name:"forum-sections",component:co,wrappers:["form-field"]},{name:"forum-users",component:jo},{name:"multischema",component:Yo},{name:"boolean",component:Tt,wrappers:["form-field"]}]}),c.u5,oi.$,ii.q,It,oe.ZS,c.UX,fi.G,_i.g]]}),o})()},2550:(q,Q,d)=>{d.d(Q,{b:()=>M});var s=d(5e3),e=d(9808),u=d(3068);const c=function(A){return{inactive:A}},p=function(){return{placement:"bottom"}};function T(A,y){if(1&A){const b=s.EpF();s.TgZ(0,"li",11),s.NdJ("click",function(){return s.CHM(b),s.oxw().save()}),s.TgZ(1,"div",12),s._uU(2,"check_circle"),s.qZA()()}if(2&A){const b=s.oxw();s.Q6J("ngClass",s.VKq(4,c,!b.isFormValid))("appTippy",b.isFormValid?"Salva":"Il form non \xe8 valido!")("tippyProps",s.DdM(6,p))("disableOnTouchDevice",!0)}}let M=(()=>{class A{constructor(b){this.viewportScroller=b,this.buttonsId="",this.isFormValid=!1,this.hasForm=!0,this.cancelEvent=new s.vpe,this.saveEvent=new s.vpe,this.tipsEvent=new s.vpe}ngOnInit(){}scrollToPageTop(){this.viewportScroller.scrollToPosition([0,0])}scrollToButtons(){this.buttonsId&&this.viewportScroller.scrollToAnchor(this.buttonsId)}cancel(){this.cancelEvent.emit()}save(){this.saveEvent.emit()}tipsClick(){this.tipsEvent.emit()}}return A.\u0275fac=function(b){return new(b||A)(s.Y36(e.EM))},A.\u0275cmp=s.Xpm({type:A,selectors:[["app-script-form-utilities"]],inputs:{buttonsId:"buttonsId",isFormValid:"isFormValid",hasForm:"hasForm"},outputs:{cancelEvent:"cancelEvent",saveEvent:"saveEvent",tipsEvent:"tipsEvent"},decls:15,vars:16,consts:[[1,"utilities","position-fixed","border-start","bg-white","shadow-sm","d-none","d-xl-block","fixed-scroll"],[1,"list-unstyled","mb-0","d-flex","flex-column","align-items-center"],["appTippy","Vai in cima",3,"tippyProps","disableOnTouchDevice","click"],[1,"d-block","material-icons-outlined","text-primary"],["appTippy","Suggerimenti",3,"tippyProps","disableOnTouchDevice","click"],[1,"d-block","material-icons-outlined","text-indigo"],["appTippy","Vai ai pulsanti",3,"ngClass","tippyProps","disableOnTouchDevice","click"],[1,"d-block","material-icons-outlined","text-warning"],["appTippy","Annulla",3,"tippyProps","disableOnTouchDevice","click"],[1,"d-block","material-icons-outlined","text-danger"],[3,"ngClass","appTippy","tippyProps","disableOnTouchDevice","click",4,"ngIf"],[3,"ngClass","appTippy","tippyProps","disableOnTouchDevice","click"],[1,"d-block","material-icons-outlined","text-success"]],template:function(b,v){1&b&&(s.TgZ(0,"div",0)(1,"ul",1)(2,"li",2),s.NdJ("click",function(){return v.scrollToPageTop()}),s.TgZ(3,"div",3),s._uU(4,"arrow_circle_up"),s.qZA()(),s.TgZ(5,"li",4),s.NdJ("click",function(){return v.tipsClick()}),s.TgZ(6,"div",5),s._uU(7,"lightbulb_circle"),s.qZA()(),s.TgZ(8,"li",6),s.NdJ("click",function(){return v.scrollToButtons()}),s.TgZ(9,"div",7),s._uU(10,"build_circle"),s.qZA()(),s.TgZ(11,"li",8),s.NdJ("click",function(){return v.cancel()}),s.TgZ(12,"div",9),s._uU(13,"cancel"),s.qZA()(),s.YNc(14,T,3,7,"li",10),s.qZA()()),2&b&&(s.xp6(2),s.Q6J("tippyProps",s.DdM(10,p))("disableOnTouchDevice",!0),s.xp6(3),s.Q6J("tippyProps",s.DdM(11,p))("disableOnTouchDevice",!0),s.xp6(3),s.Q6J("ngClass",s.VKq(12,c,0===v.buttonsId.length))("tippyProps",s.DdM(14,p))("disableOnTouchDevice",!0),s.xp6(3),s.Q6J("tippyProps",s.DdM(15,p))("disableOnTouchDevice",!0),s.xp6(3),s.Q6J("ngIf",v.hasForm))},directives:[u.$,e.mk,e.O5],styles:[".utilities[_ngcontent-%COMP%]{right:0;top:0;bottom:0;padding-top:calc(64px + 1.5rem)}.utilities[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{width:75px}li[_ngcontent-%COMP%]{margin:.5rem 0;transition:opacity .2s}li.inactive[_ngcontent-%COMP%]{opacity:.5}li[_ngcontent-%COMP%]:not(.inactive){cursor:pointer}.material-icons-outlined[_ngcontent-%COMP%]{font-size:36px}"]}),A})()},5530:(q,Q,d)=>{d.d(Q,{M:()=>c});var s=d(9808),e=d(9409),u=d(5e3);let c=(()=>{class p{}return p.\u0275fac=function(M){return new(M||p)},p.\u0275mod=u.oAB({type:p}),p.\u0275inj=u.cJS({imports:[[s.ez,e.G]]}),p})()},1352:(q,Q,d)=>{d.d(Q,{Bc:()=>e,Lc:()=>c,O9:()=>M,UD:()=>p,Wf:()=>A,lw:()=>T});var s=d(8795);const e=/^https:\/\/[^?]+[^?\/]+\.js(\?.+)?$/,u=/^https?:\/\/[^?]+[^?\/]+\.js(\?.+)?$/,c=/^https:\/\/[^?]+[^?\/]+\.css(\?.+)?$/,p={type:"object",required:["name","js","tab","script_type","settings_schema"],properties:{name:{type:"string",title:"Nome:"},sdesc:{type:"string",title:"Descrizione:",description:"Una descrizione accattivante incentiva gli utenti ad installare lo script!",default:""},public_link:{type:"string",title:"Link alla guida:",description:"Una guida completa \xe8 fondamentale per mostrare tutte le potenzialit\xe0 dello script!",default:"",widget:{formlyConfig:{validators:{pattern:{expression:y=>!y.value||/^https:\/\/(.+?)\.(forumfree\.it|forumcommunity\.net|blogfree\.net)\/\?t=(\d+)(#entry(\d+))?$/.test(y.value),message:(y,b)=>{var v;return`"${null===(v=b.formControl)||void 0===v?void 0:v.value}" non \xe8 un valido link alla guida!`}}}}}},preview:{type:"string",title:"Link all'anteprima (jpg, png, gif o webp):",description:"Un'anteprima perfetta riesce a mostrare in pochi secondi il funzionamento dello script!",default:"",widget:{formlyConfig:{validators:{pattern:{expression:y=>!y.value||/^https:\/\/(.+?)\.(jpg|png|gif|webp)$/.test(y.value),message:(y,b)=>{var v;return`"${null===(v=b.formControl)||void 0===v?void 0:v.value}" non \xe8 un valido link all'anteprima!`}}}}}},tab:{type:"string",title:"Tab:",oneOf:[{}],default:""},js:{type:"string",title:"Link del file javascript:",widget:{formlyConfig:{validators:{pattern:{expression:y=>!y.value||e.test(y.value),message:(y,b)=>{var v;return`"${null===(v=b.formControl)||void 0===v?void 0:v.value}" non \xe8 un file javascript valido!`}}}}}},js_beta:{type:["string","null"],title:"Link del file javascript per la versione beta (caricata solo per il dev):",widget:{formlyConfig:{validators:{pattern:{expression:y=>!y.value||u.test(y.value),message:(y,b)=>{var v;return`"${null===(v=b.formControl)||void 0===v?void 0:v.value}" non \xe8 un file javascript valido!`}}}}}},js_pos:{type:"number",title:"Posizione in cui verr\xe0 importato il file js:",oneOf:[{}],default:7},script_type:{type:"number",title:"Tipo:",oneOf:[{title:"Script per forum",const:s.AV.FORUM},{title:"Script per utenti (profilo o userscript)",const:s.AV.USER},{title:"Script per entrambi",const:s.AV.ALL}],default:0},js_admin:{type:"array",title:"File js/css per le impostazioni (opzionali)",description:"Si tratta di una lista di file js o css che saranno eseguiti (nell'ordine in cui sono inseriti) in un iframe sopra le impostazioni dello script.",uniqueItems:!0,items:{type:"string",title:"Link del file:",widget:{formlyConfig:{validators:{pattern:{expression:y=>!y.value||e.test(y.value)||c.test(y.value),message:(y,b)=>{var v;return`"${null===(v=b.formControl)||void 0===v?void 0:v.value}" non \xe8 un file valido!`}}}}}}},webhook:{type:"object",title:"Impostazioni webhook (opzionali)",description:"Se lo desideri, puoi indicare un url che verr\xe0 chiamato (richiesta [i]POST[/i]) ogni volta che si verifica [i]l'evento abilitato[/i] dai checkbox seguenti, avente come payload le informazioni riguardanti l'evento (ad esempio nel caso di modifica delle impostazioni dello script verranno inviate le impostazioni dello script stesso).",widget:{formlyConfig:{props:{fieldsetTemplate:!0}}},properties:{url:{type:["string","null"],title:"Link al webhook:",widget:{formlyConfig:{validators:{pattern:{expression:y=>{if(null===y.value)return!0;let b;try{b=new URL(y.value)}catch(v){return!1}return"http:"===b.protocol||"https:"===b.protocol},message:(y,b)=>{var v;return`"${null===(v=b.formControl)||void 0===v?void 0:v.value}" non \xe8 un link valido!`}}}}}},script_settings:{type:"boolean",title:"Chiama il webhook quando vengono salvate le impostazioni",default:!1},script_manage:{type:"boolean",title:"Chiama il webhook quando lo script viene installato o disinstallato",default:!1}}},libs:{type:"array",uniqueItems:!0,title:"Librerie e framework da importare:",default:[-1],items:{type:"number",oneOf:[{title:"------",const:-1}]}},deps:{type:"array",uniqueItems:!0,title:"Script richiesti per l'installazione:",default:[-1],items:{type:"number",oneOf:[{title:"------",const:-1}]}},settings_schema:{type:"code-editor",title:"Schema JSON per le opzioni:",default:"{}",widget:{formlyConfig:{props:{editorOptions:{height:"500px"}}}}},html_head:{type:"code-editor",title:"Codice HTML che sar\xe0 mostrato nel tag HEAD (anche sul layout FFMobile):",description:"In questo campo \xe8 possibile inserire degli stili usando il tag <style>",default:"",widget:{formlyConfig:{props:{editorOptions:{language:"html"}}}}},layouts:{type:"object",title:"Compatibilit\xe0",description:"Se uno script non \xe8 compatibile con un determinato layout, in automatico [i]non[/i] verr\xe0 eseguito sui forum che possiedono tale layout.",widget:{formlyConfig:{props:{fieldsetTemplate:!0}}},properties:{quirks:{type:"boolean",title:"Compatibile con il layout Quirks",default:!1},standard:{type:"boolean",title:"Compatibile con il layout Standard",default:!0},ffmobile:{type:"boolean",title:"Compatibile con il layout FFMobile",default:!0},responsive:{type:"boolean",title:"Compatibile con il layout Responsive",default:!1}}},hidden_script:{type:"boolean",title:"Nascondi lo script dalla lista (test o script privati)",default:!1}}},T={name:"",public_link:"",sdesc:"",preview:"",js:"",js_beta:null,tab:"ffb",js_pos:7,js_admin:[],script_type:0,libs:[-1],deps:[-1],settings_default:{},settings_schema:"{}",html_head:"",hidden_script:!1,demo:!1,webhook:{url:null,script_settings:!1,script_manage:!1},layouts:{quirks:!1,standard:!0,ffmobile:!0,responsive:!1}},M=[{title:"[Open] Font Awesome 4.7.0",link:"https://ffb.forumfree.net:4999/nicoxys/libs/fontawesome-4.7.0.css"},{title:"[Open] Font Awesome 5.7.0",link:"https://ffb.forumfree.net:4999/nicoxys/libs/fontawesome-5.7.0.css"},{title:"[Open] Twitter API",link:"https://platform.twitter.com/widgets.js"},{title:"[Open] AngularJS 1.7.7",link:"https://ffb.forumfree.net:4999/nicoxys/libs/angularjs-1.7.7.js"},{title:"[Open] ReactJS (w/ dom) 16.8.2",link:"https://ffb.forumfree.net:4999/nicoxys/libs/reactjs-16.8.2.js"},{title:"[Open] Popper 2.5.2",link:"https://ffb.forumfree.net:4999/nicoxys/libs/popper-2.5.2.js"},{title:"[Open] Tippy 6.2.6",link:"https://ffb.forumfree.net:4999/nicoxys/libs/tippy-6.2.6.js"},{title:"[Open] Vue.js 2.6.6",link:"https://ffb.forumfree.net:4999/nicoxys/libs/vuejs-2.6.6.js"},{title:"[Open] Mustache 3.0.1",link:"https://ffb.forumfree.net:4999/nicoxys/libs/mustache-3.0.1.js"},{title:"[Open] Handlebars 4.7.3",link:"https://ffb.forumfree.net:4999/nicoxys/libs/handlebars-4.7.3.js"},{title:"[Open] Timeago",link:"https://ffb.forumfree.net:4999/nicoxys/libs/jquery.timeago.js"},{title:"[Open] RxJS 6.5.1",link:"https://ffb.forumfree.net:4999/nicoxys/libs/rxjs-6.5.1.js"},{title:"[Open] ChartJs 2.7.2",link:"https://ffb.forumfree.net:4999/nicoxys/libs/chartjs-2.7.2.js"},{title:"[Open] Apollo Client",link:"https://ffb.forumfree.net:4999/nicoxys/libs/apollo-client-2.6.10.js"},{title:"[Private - All] Crediti in fondo al forum",link:"https://ffb.forumfree.net:4999/nicoxys/private/credits.js"},{tab:s.tr.FFB,title:"[Private - FFBoard] FFUpload",link:"https://ffb.forumfree.net:4999/nicoxys/libs/ffupload.js"},{tab:s.tr.FFB,title:"[Private - FFBoard] HelloBox",link:"https://ffb.forumfree.net:4999/nicoxys/forum/hellobox.js"}],A=[{title:"Codice HTML che sar\xe0 mostrato nel tag HEAD",position:"html_head"},{title:"[Start] Codice HTML che sar\xe0 mostrato in CIMA a tutte le pagine",position:"html_top_start"},{title:"[End] Codice HTML che sar\xe0 mostrato in CIMA a tutte le pagine",position:"html_top_end"},{title:"[Start] Codice HTML che sar\xe0 mostrato in tutte le pagine sotto il logo del sito",position:"html_logo_start"},{title:"[End] Codice HTML che sar\xe0 mostrato in tutte le pagine sotto il logo del sito",position:"html_logo_end"},{title:"[Start] Codice HTML che sar\xe0 mostrato nella homepage del sito",position:"html_home_start"},{title:"[End] Codice HTML che sar\xe0 mostrato nella homepage del sito",position:"html_home_end"},{title:"Codice HTML che sar\xe0 mostrato sopra le pubblicit\xe0",position:"html_ads_start"},{title:"[Start] Codice HTML che sar\xe0 mostrato in FONDO a tutte le pagine",position:"html_bottom_start"},{title:"[End] Codice HTML che sar\xe0 mostrato in FONDO a tutte le pagine",position:"html_bottom_end"}]},5428:(q,Q,d)=>{d.d(Q,{B:()=>e});var s=d(5e3);let e=(()=>{class u{constructor(){this.allowedProps={$ref:{validator:this.isString},anyOf:{validator:this.validateAnyOf},default:{validator:this.isNestedOfPrimitives},definitions:null,description:null,enum:{validator:this.validateEnum},items:{child:"allProps"},maximum:null,maxItems:null,maxLength:null,minimum:null,minItems:null,minLength:null,multipleOf:null,oneOf:{validator:this.validateOneOf},properties:null,required:{validator:this.validateRequired},title:null,type:{validator:this.isNestedOfPrimitives},uniqueItems:null,widget:{child:{formlyConfig:{child:{props:{child:{placeholder:{validator:this.isString},multiple:{validator:this.isBoolean},pattern:{validator:this.isString},type:{validator:function(p){return"hidden"===p}},minLength:{validator:this.isNumber},maxLength:{validator:this.isNumber},rows:{validator:this.isNumber},keepGroupsWithoutId:{validator:this.isBoolean},fieldsetTemplate:{validator:this.isBoolean}}},type:{validator:function(p){return"radio"===p}}}}}}},this.fieldListKeys=["properties","definitions"]}validateSchema(p){!this.isObject(p)||((!p.hasOwnProperty("type")||!p.hasOwnProperty("properties")||"object"!==p.type)&&(p.type="object",p.properties={}),this.validate(p))}validate(p,T){var M,A;T||(T=this.allowedProps);for(const[y,b]of Object.entries(p))if(T.hasOwnProperty(y)){if(null===(M=T[y])||void 0===M?void 0:M.hasOwnProperty("validator"))T[y].validator.call(this,b)||delete p[y];else if(this.fieldListKeys.includes(y))for(const v of Object.keys(p[y]))this.validate(p[y][v]);else if(!this.isPrimitive(b)){if(!(null===(A=T[y])||void 0===A?void 0:A.hasOwnProperty("child"))||!this.isObject(b)){delete p[y];continue}this.validate(p[y],"allProps"===T[y].child?this.allowedProps:T[y].child)}}else delete p[y]}isObject(p){return null!=p&&"object"==typeof p&&!Array.isArray(p)}isPrimitive(p){return this.isString(p)||this.isNumber(p)||this.isBoolean(p)||null==p}isString(p){return"string"==typeof p}isBoolean(p){return"boolean"==typeof p}isNumber(p){return"number"==typeof p}validateRequired(p){if(!Array.isArray(p))return!1;for(const T of p)if(!this.isString(T))return!1;return!0}validateEnum(p){if(!Array.isArray(p))return!1;for(const T of p)if(!this.isString(T)&&!this.isNumber(T))return!1;return!0}validateOneOf(p){var T;if(Array.isArray(p)&&(null===(T=p[0])||void 0===T?void 0:T.hasOwnProperty("const"))){for(const M of p){if(!this.isObject(M))return!1;this.validate(M,{const:null,title:null})}return!0}return this.validateAnyOf(p)}validateAnyOf(p){if(!Array.isArray(p))return!1;for(const T of p){if(!this.isObject(T))return!1;this.validate(T)}return!0}isNestedOfPrimitives(p){if(this.isPrimitive(p))return!0;if(Array.isArray(p)||this.isObject(p)){for(const T of Object.values(p))if(!this.isNestedOfPrimitives(T))return!1;return!0}return!1}}return u.\u0275fac=function(p){return new(p||u)},u.\u0275prov=s.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},5499:(q,Q,d)=>{d.d(Q,{c:()=>L});var s=d(655),e=d(5e3),u=d(2382),c=d(5646),p=d(8505);function M(_){return""===_||null==_}function A(_){return null!=_&&"object"==typeof _&&!Array.isArray(_)}function y(_){return Number.isInteger?Number.isInteger(_):"number"==typeof _&&Math.floor(_)===_}function b(_){return"object"==typeof _&&(_.hasOwnProperty("const")||_.enum&&1===_.enum.length)}function v(_){if(!_.fieldGroup)return(0,c._S)(_)&&void 0!==(0,c.Hl)(_)?1:0;const k=_.fieldGroup.reduce((r,f)=>v(f)+r,0);if(0===k&&(0,c._S)(_)){const r=(0,c.Hl)(_);if(null===r||void 0!==r&&(_.fieldArray&&Array.isArray(r)||!_.fieldArray&&A(r)))return 1}return k}let L=(()=>{class _{toFieldConfig(r,f){return this._toFieldConfig(r,Object.assign({schema:r},f||{}))}_toFieldConfig(r,f){var C,{key:O}=f,m=(0,s._T)(f,["key"]);r=this.resolveSchema(r,m);const x=this.guessSchemaType(r);let a={type:x[0],defaultValue:r.default,props:{label:r.title,readonly:r.readOnly,description:r.description}};switch(null!=O&&(a.key=O),!m.ignoreDefault&&(r.readOnly||m.readOnly)&&(a.props.disabled=!0,m=Object.assign(Object.assign({},m),{readOnly:!0})),m.resetOnHide&&(a.resetOnHide=!0),O&&m.strict&&this.addValidator(a,"type",(g,w)=>{const F=(0,c.Hl)(w);if(null!=F)switch(a.type){case"string":return"string"==typeof F;case"integer":return y(F);case"number":return"number"==typeof F;case"object":return A(F);case"array":return Array.isArray(F)}return!0}),!1===m.shareFormControl&&(a.shareFormControl=!1),m.ignoreDefault&&delete a.defaultValue,this.addValidator(a,"type",{schemaType:x,expression:({value:g})=>{if(void 0===g||null===g&&-1!==x.indexOf("null"))return!0;switch(x[0]){case"null":return null===typeof g;case"string":return"string"==typeof g;case"integer":return y(g);case"number":return"number"==typeof g;case"object":return A(g);case"array":return Array.isArray(g)}return!0}}),a.type){case"number":case"integer":a.parsers=[g=>M(g)?void 0:Number(g)],r.hasOwnProperty("minimum")&&(a.props.min=r.minimum),r.hasOwnProperty("maximum")&&(a.props.max=r.maximum),r.hasOwnProperty("exclusiveMinimum")&&(a.props.exclusiveMinimum=r.exclusiveMinimum,this.addValidator(a,"exclusiveMinimum",({value:g})=>M(g)||g>r.exclusiveMinimum)),r.hasOwnProperty("exclusiveMaximum")&&(a.props.exclusiveMaximum=r.exclusiveMaximum,this.addValidator(a,"exclusiveMaximum",({value:g})=>M(g)||g<r.exclusiveMaximum)),r.hasOwnProperty("multipleOf")&&(a.props.step=r.multipleOf,this.addValidator(a,"multipleOf",({value:g})=>{if(M(g)||"number"!=typeof g||0===g||r.multipleOf<=0)return!0;const w=Math.pow(10,function T(_){if(!isFinite(_))return 0;let k=1,r=0;for(;Math.round(_*k)/k!==_;)k*=10,r++;return r}(r.multipleOf));return Math.round(g*w)%Math.round(r.multipleOf*w)==0}));break;case"string":a.parsers=[g=>(-1!==x.indexOf("null")?g=M(g)?null:g:a.props.required||(g=""===g?void 0:g),g)],["minLength","maxLength","pattern"].forEach(g=>{r.hasOwnProperty(g)&&(a.props[g]=r[g])});break;case"object":{a.fieldGroup||(a.fieldGroup=[]);const{propDeps:g,schemaDeps:w}=this.resolveDependencies(r);Object.keys(r.properties||{}).forEach(F=>{const S=Array.isArray(r.required)&&-1!==r.required.indexOf(F),D=this._toFieldConfig(r.properties[F],Object.assign(Object.assign({},m),{key:F,isOptional:m.isOptional||!S}));if(a.fieldGroup.push(D),(S||g[F])&&(D.expressions=Object.assign(Object.assign({},D.expressions||{}),{"props.required":j=>{let I=j.parent;const E=j.fieldGroup&&null!=j.key?I.model:j.model;for(;null==I.key&&I.parent;)I=I.parent;return!!(E||I&&I.props&&I.props.required)&&(!(!Array.isArray(r.required)||-1===r.required.indexOf(F))||g[F]&&j.model&&g[F].some(N=>!M(j.model[N])))}})),w[F]){const j=E=>E.hasOwnProperty("const")?E.const:E.enum[0],I=w[F].oneOf;I&&I.every(E=>E.properties&&E.properties[F]&&b(E.properties[F]))?I.forEach(E=>{const Y=E.properties,H=Y[F],R=(0,s._T)(Y,["symbol"==typeof F?F:F+""]);a.fieldGroup.push(Object.assign(Object.assign({},this._toFieldConfig(Object.assign(Object.assign({},E),{properties:R}),Object.assign(Object.assign({},m),{resetOnHide:!0}))),{expressions:{hide:W=>!W.model||j(H)!==W.model[F]}}))}):a.fieldGroup.push(Object.assign(Object.assign({},this._toFieldConfig(w[F],m)),{expressions:{hide:E=>!E.model||M(E.model[F])}}))}}),r.oneOf&&a.fieldGroup.push(this.resolveMultiSchema("oneOf",r.oneOf,Object.assign(Object.assign({},m),{shareFormControl:!1}))),r.anyOf&&a.fieldGroup.push(this.resolveMultiSchema("anyOf",r.anyOf,m));break}case"array":r.hasOwnProperty("minItems")&&(a.props.minItems=r.minItems,this.addValidator(a,"minItems",(g,w)=>{const F=(0,c.Hl)(w);return M(F)||F.length>=r.minItems}),!m.isOptional&&r.minItems>0&&void 0===a.defaultValue&&(a.defaultValue=Array.from(new Array(r.minItems)))),r.hasOwnProperty("maxItems")&&(a.props.maxItems=r.maxItems,this.addValidator(a,"maxItems",(g,w)=>{const F=(0,c.Hl)(w);return M(F)||F.length<=r.maxItems})),r.hasOwnProperty("uniqueItems")&&(a.props.uniqueItems=r.uniqueItems,this.addValidator(a,"uniqueItems",(g,w)=>{const F=(0,c.Hl)(w);return!(!M(F)&&r.uniqueItems)||Array.from(new Set(F.map(D=>JSON.stringify(D)))).length===F.length})),r.items&&!Array.isArray(r.items)&&(r.items=this.resolveSchema(r.items,m)),this.isEnum(r)||(a.fieldArray=g=>{if(!Array.isArray(r.items)){const D=r.items?this._toFieldConfig(r.items,m):{};return D.props&&(D.props.required=!0),D}const w=g.fieldGroup?g.fieldGroup.length:0,F=r.items[w]?r.items[w]:r.additionalItems,S=F?this._toFieldConfig(F,m):{};return S.props&&(S.props.required=!0),r.items[w]&&(S.props.removable=!1),S})}return r.hasOwnProperty("const")&&(a.props.const=r.const,this.addValidator(a,"const",({value:g})=>g===r.const),a.type||(a.defaultValue=r.const)),this.isEnum(r)&&(a.props.multiple="array"===a.type,a.type="enum",a.props.options=this.toEnumOptions(r)),r.oneOf&&!a.type&&(delete a.key,a.fieldGroup=[this.resolveMultiSchema("oneOf",r.oneOf,Object.assign(Object.assign({},m),{key:O,shareFormControl:!1}))]),r.oneOf&&!a.type&&(delete a.key,a.fieldGroup=[this.resolveMultiSchema("oneOf",r.oneOf,Object.assign(Object.assign({},m),{key:O,shareFormControl:!1}))]),(null===(C=r.widget)||void 0===C?void 0:C.formlyConfig)&&(a=this.mergeFields(a,r.widget.formlyConfig)),a.templateOptions=a.props,m.map?m.map(a,r):a}resolveSchema(r,f){return r&&r.$ref&&(r=this.resolveDefinition(r,f)),r&&r.allOf&&(r=this.resolveAllOf(r,f)),r}resolveAllOf(r,f){var{allOf:C}=r,O=(0,s._T)(r,["allOf"]);if(!C.length)throw Error(`allOf array can not be empty ${C}.`);return C.reduce((m,x)=>(x=this.resolveSchema(x,f),m.required&&x.required&&(m.required=[...m.required,...x.required]),x.uniqueItems&&(m.uniqueItems=x.uniqueItems),["maxLength","maximum","exclusiveMaximum","maxItems","maxProperties"].forEach(a=>{!M(m[a])&&!M(x[a])&&(m[a]=m[a]<x[a]?m[a]:x[a])}),["minLength","minimum","exclusiveMinimum","minItems","minProperties"].forEach(a=>{!M(m[a])&&!M(x[a])&&(m[a]=m[a]>x[a]?m[a]:x[a])}),(0,c.Du)(m,x)),O)}resolveMultiSchema(r,f,C){return{type:"multischema",fieldGroup:[{type:"enum",defaultValue:-1,props:{multiple:"anyOf"===r,options:f.map((O,m)=>({label:O.title,value:m,disabled:O.readOnly}))},hooks:{onInit:O=>O.formControl.valueChanges.pipe((0,p.b)(()=>O.options.detectChanges(O.parent)))}},{fieldGroup:f.map((O,m)=>Object.assign(Object.assign({},this._toFieldConfig(O,Object.assign(Object.assign({},C),{resetOnHide:!0}))),{expressions:{hide:(x,a)=>{const g=x.parent.parent.fieldGroup[0].formControl;if(-1===g.value||a){let w=x.parent.fieldGroup.map((F,S)=>[F,S,this.isFieldValid(F,S,f,C)]).sort(([F,,S],[D,,j])=>{if(S!==j)return j?1:-1;const I=v(F),E=v(D);return I===E&&F.props.disabled===D.props.disabled?0:E>I?1:-1}).map(([,F])=>F);if("anyOf"===r){const F=w.filter(S=>v(x.parent.fieldGroup[S]));w=F.length>0?F:[w[0]||0]}w=w.length>0?w:[0],g.setValue("anyOf"===r?w:w[0])}return Array.isArray(g.value)?-1===g.value.indexOf(m):g.value!==m}}}))}]}}resolveDefinition(r,f){const[C,O]=r.$ref.split("#/");if(C)throw Error(`Remote schemas for ${r.$ref} not supported yet.`);const m=O?O.split("/").reduce((x,a)=>(null==x?void 0:x.hasOwnProperty(a))?x[a]:null,f.schema):null;if(!m)throw Error(`Cannot find a definition for ${r.$ref}.`);return m.$ref?this.resolveDefinition(m,f):Object.assign(Object.assign({},m),["title","description","default","widget"].reduce((x,a)=>(r.hasOwnProperty(a)&&(x[a]=r[a]),x),{}))}resolveDependencies(r){const f={},C={};return Object.keys(r.dependencies||{}).forEach(O=>{const m=r.dependencies[O];Array.isArray(m)?m.forEach(x=>{f[x]?f[x].push(O):f[x]=[O]}):C[O]=m}),{propDeps:f,schemaDeps:C}}guessSchemaType(r){const f=null==r?void 0:r.type;return!f&&(null==r?void 0:r.properties)?["object"]:Array.isArray(f)?1===f.length?f:2===f.length&&-1!==f.indexOf("null")?f.sort(C=>"null"==C?1:-1):f:f?[f]:[]}addValidator(r,f,C){r.validators=r.validators||{},r.validators[f]=C}isEnum(r){return!!r.enum||r.anyOf&&r.anyOf.every(b)||r.oneOf&&r.oneOf.every(b)||r.uniqueItems&&r.items&&!Array.isArray(r.items)&&this.isEnum(r.items)}toEnumOptions(r){if(r.enum)return r.enum.map(C=>({value:C,label:C}));const f=C=>{const O=C.hasOwnProperty("const")?C.const:C.enum[0],m={value:O,label:C.title||O};return C.readOnly&&(m.disabled=!0),m};return r.anyOf?r.anyOf.map(f):r.oneOf?r.oneOf.map(f):this.toEnumOptions(r.items)}isFieldValid(r,f,C,O){r._schemasFields||(Object.defineProperty(r,"_schemasFields",{enumerable:!1,writable:!0,configurable:!0}),r._schemasFields={});let m=r._schemasFields[f];const x=r.model?(0,c.kg)(r.model):r.fieldArray?[]:{};return m?(m.model=x,r.options.build(m)):m=r._schemasFields[f]=r.options.build({form:Array.isArray(x)?new u.Oe([]):new u.cw({}),fieldGroup:[this._toFieldConfig(C[f],Object.assign(Object.assign({},O),{resetOnHide:!0,ignoreDefault:!0,map:null,strict:!0}))],model:x,options:{}}),m.form.valid}mergeFields(r,f){for(let C in f){const O="templateOptions"===C?"props":C;A(r[O])&&A(f[C])?r[O]=this.mergeFields(r[O],f[C]):null!=f[C]&&(r[O]=f[C])}return r}}return _.\u0275fac=function(r){return new(r||_)},_.\u0275prov=e.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()}}]);