"use strict";(self.webpackChunkpages=self.webpackChunkpages||[]).push([[73],{7429:(K,Y,p)=>{p.d(Y,{d:()=>H});var F=p(5879),J=p(6223),O=p(5661),Z=p(336);let e=(()=>{var M;class P{constructor(){this.allowedProps={$ref:{validator:this.isString},anyOf:{validator:this.validateAnyOf},default:{validator:this.isNestedOfPrimitives},definitions:null,description:null,enum:{validator:this.validateEnum},items:{child:"allProps"},maximum:null,maxItems:null,maxLength:null,minimum:null,minItems:null,minLength:null,multipleOf:null,oneOf:{validator:this.validateOneOf},properties:null,required:{validator:this.validateRequired},title:null,type:{validator:this.isNestedOfPrimitives},uniqueItems:null,widget:{child:{formlyConfig:{child:{props:{child:{placeholder:{validator:this.isString},multiple:{validator:this.isBoolean},pattern:{validator:this.isString},type:{validator:function(a){return"hidden"===a}},minLength:{validator:this.isNumber},maxLength:{validator:this.isNumber},rows:{validator:this.isNumber},keepGroupsWithoutId:{validator:this.isBoolean},fieldsetTemplate:{validator:this.isBoolean},startDate:{child:{year:null,month:null,day:null}},endDate:{child:{year:null,month:null,day:null}},minDate:{child:{year:null,month:null,day:null}},maxDate:{child:{year:null,month:null,day:null}}}},type:{validator:function(a){return"radio"===a}}}}}}},this.fieldListKeys=["properties","definitions"]}validateSchema(a){this.isObject(a)&&((!a.hasOwnProperty("type")||!a.hasOwnProperty("properties")||"object"!==a.type)&&(a.type="object",a.properties={}),this.validate(a))}validate(a,g){g||(g=this.allowedProps);for(const[E,o]of Object.entries(a)){var I,_;if(g.hasOwnProperty(E)){if(null!==(I=g[E])&&void 0!==I&&I.hasOwnProperty("validator"))g[E].validator.call(this,o)||delete a[E];else if(this.fieldListKeys.includes(E))for(const m of Object.keys(a[E]))this.validate(a[E][m]);else if(!this.isPrimitive(o)){if(null===(_=g[E])||void 0===_||!_.hasOwnProperty("child")||!this.isObject(o)){delete a[E];continue}this.validate(a[E],"allProps"===g[E].child?this.allowedProps:g[E].child)}}else delete a[E]}}isObject(a){return null!=a&&"object"==typeof a&&!Array.isArray(a)}isPrimitive(a){return this.isString(a)||this.isNumber(a)||this.isBoolean(a)||null==a}isString(a){return"string"==typeof a}isBoolean(a){return"boolean"==typeof a}isNumber(a){return"number"==typeof a}validateRequired(a){if(!Array.isArray(a))return!1;for(const g of a)if(!this.isString(g))return!1;return!0}validateEnum(a){if(!Array.isArray(a))return!1;for(const g of a)if(!this.isString(g)&&!this.isNumber(g))return!1;return!0}validateOneOf(a){var g;if(Array.isArray(a)&&null!==(g=a[0])&&void 0!==g&&g.hasOwnProperty("const")){for(const I of a){if(!this.isObject(I))return!1;this.validate(I,{const:null,title:null})}return!0}return this.validateAnyOf(a)}validateAnyOf(a){if(!Array.isArray(a))return!1;for(const g of a){if(!this.isObject(g))return!1;this.validate(g)}return!0}isNestedOfPrimitives(a){if(this.isPrimitive(a))return!0;if(Array.isArray(a)||this.isObject(a)){for(const g of Object.values(a))if(!this.isNestedOfPrimitives(g))return!1;return!0}return!1}}return(M=P).\u0275fac=function(a){return new(a||M)},M.\u0275prov=F.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"}),P})();var D=p(5545);const G=["app-custom-form",""],j=[[["","buttons",""]]],q=["[buttons]"];let H=(()=>{var M;class P{constructor(a,g,I){this.formlyJsonschema=a,this.customFormSchemaService=g,this.toastService=I,this.model={},this.validateSchema=!1,this.enableModelChangeEvent=!1,this.defaultModel={},this.cancelEvent=new F.vpe,this.submitEvent=new F.vpe,this.validityChangeEvent=new F.vpe,this.modelChangeEvent=new F.vpe,this.form=new J.nJ({}),this.fields=[],this.options={},this.valid=!1,this.isFormCurrentlyValid=!0}ngOnInit(){this.createFields()}ngOnChanges(a){a.schema&&!a.schema.firstChange&&this.createFields()}createFields(){this.customFormSchemaService.isObject(this.schema)||(this.schema={}),this.validateSchema&&this.customFormSchemaService.validateSchema(this.schema),this.fields=[this.formlyJsonschema.toFieldConfig(this.schema)]}showFieldValidation(){this.cycleFields(this.fields)}showFieldValidationWithMessage(){this.showFieldValidation(),this.toastService.show({content:"Tutti i campi sono stati <strong>validati</strong>: quelli con errore sono evidenziati da un <strong>bordo rosso</strong>!"})}cycleFields(a){a.forEach(g=>{this.forceValidation(g),g.fieldGroup&&this.cycleFields(g.fieldGroup)})}forceValidation(a){a.validation||(a.validation={}),a.validation.show=!0}reset(){this.options.resetModel&&this.options.resetModel(this.defaultModel)}cancel(){this.cancelEvent.emit()}submit(){this.form.valid&&(this.log(),this.submitEvent.emit(this.model))}onModelChange(a){this.valid=this.form.valid,this.enableModelChangeEvent&&this.modelChangeEvent.emit(a||{}),this.form.valid!==this.isFormCurrentlyValid&&this.validityChangeEvent.emit(this.isFormCurrentlyValid=this.form.valid)}log(){}}return(M=P).\u0275fac=function(a){return new(a||M)(F.Y36(Z.c),F.Y36(e),F.Y36(O.k))},M.\u0275cmp=F.Xpm({type:M,selectors:[["","app-custom-form",""]],inputs:{schema:"schema",model:"model",validateSchema:"validateSchema",enableModelChangeEvent:"enableModelChangeEvent",defaultModel:"defaultModel"},outputs:{cancelEvent:"cancelEvent",submitEvent:"submitEvent",validityChangeEvent:"validityChangeEvent",modelChangeEvent:"modelChangeEvent"},features:[F.TTD],attrs:G,ngContentSelectors:q,decls:3,vars:5,consts:[[3,"formGroup","ngSubmit"],[3,"model","fields","form","options","modelChange"]],template:function(a,g){1&a&&(F.F$t(j),F.TgZ(0,"form",0),F.NdJ("ngSubmit",function(){return g.submit()}),F.TgZ(1,"formly-form",1),F.NdJ("modelChange",function(_){return g.onModelChange(_)}),F.qZA(),F.Hsn(2),F.qZA()),2&a&&(F.Q6J("formGroup",g.form),F.xp6(1),F.Q6J("model",g.model)("fields",g.fields)("form",g.form)("options",g.options))},dependencies:[D.T7,J._Y,J.JL,J.sg]}),P})()},1059:(K,Y,p)=>{p.d(Y,{I:()=>gt});var F=p(6814),J=p(8876),O=p(2907),Z=p(5545),e=p(5879),D=p(8595);function G(t,s){1&t&&e.GkF(0)}function j(t,s){if(1&t&&(e.ynx(0),e._UZ(1,"div",13),e.TgZ(2,"div",14),e._uU(3," ("),e.YNc(4,G,1,0,"ng-container",15),e._uU(5,") "),e.qZA(),e.BQk()),2&t){const i=e.oxw(),n=e.MAs(15);e.xp6(1),e.Q6J("innerHTML",i.parsedTitle,e.oJD),e.xp6(3),e.Q6J("ngTemplateOutlet",n)}}function q(t,s){1&t&&e.GkF(0)}function H(t,s){if(1&t&&(e.TgZ(0,"div",16),e._uU(1," Lista di "),e.YNc(2,q,1,0,"ng-container",15),e.qZA()),2&t){e.oxw();const i=e.MAs(15);e.xp6(2),e.Q6J("ngTemplateOutlet",i)}}function M(t,s){if(1&t&&e._UZ(0,"div",17),2&t){const i=e.oxw();e.Q6J("innerHTML",i.parsedDescription,e.oJD)}}const P=function(t){return{"mt-3":t}};function L(t,s){if(1&t&&(e.TgZ(0,"div",18),e._UZ(1,"formly-validation-message",19),e.qZA()),2&t){const i=e.oxw();e.Q6J("ngClass",e.VKq(2,P,i.parsedDescription.length)),e.xp6(1),e.Q6J("field",i.field)}}function a(t,s){if(1&t){const i=e.EpF();e.TgZ(0,"li")(1,"div",30),e.NdJ("click",function(){e.CHM(i);const r=e.oxw().index,c=e.oxw(2);return e.KtG(c.move(r,r-1))}),e._uU(2," arrow_circle_up "),e.qZA()()}2&t&&(e.xp6(1),e.Q6J("disableOnTouchDevice",!0))}const g=function(t){return{"ms-1":t}};function I(t,s){if(1&t){const i=e.EpF();e.TgZ(0,"li",31)(1,"div",32),e.NdJ("click",function(){e.CHM(i);const r=e.oxw().index,c=e.oxw(2);return e.KtG(c.move(r,r+1))}),e._uU(2," arrow_circle_down "),e.qZA()()}if(2&t){const i=e.oxw().first;e.Q6J("ngClass",e.VKq(2,g,!i)),e.xp6(1),e.Q6J("disableOnTouchDevice",!0)}}function _(t,s){if(1&t){const i=e.EpF();e.TgZ(0,"li",31)(1,"div",33),e.NdJ("click",function(){e.CHM(i);const r=e.oxw().index,c=e.oxw(2);return e.KtG(c.remove(r))}),e._uU(2," highlight_off "),e.qZA()()}if(2&t){const i=e.oxw();e.Q6J("ngClass",e.VKq(2,g,!(i.first&&i.last))),e.xp6(1),e.Q6J("disableOnTouchDevice",!0)}}const E=function(t){return{"mb-3":t}},o=function(t){return{"has-error":t}};function m(t,s){if(1&t&&(e.TgZ(0,"li",22)(1,"fieldset",23)(2,"legend",24)(3,"div",25)(4,"div",26),e._uU(5),e.qZA(),e.TgZ(6,"ul",27),e.YNc(7,a,3,1,"li",28),e.YNc(8,I,3,4,"li",29),e.YNc(9,_,3,4,"li",29),e.qZA()()(),e._UZ(10,"formly-field",19),e.qZA()()),2&t){const i=s.$implicit,n=s.index,r=s.first,c=s.last;e.Q6J("ngClass",e.VKq(7,E,!c)),e.xp6(1),e.Q6J("ngClass",e.VKq(9,o,null==i.formControl?null:i.formControl.invalid)),e.xp6(4),e.hij("#",n+1,""),e.xp6(2),e.Q6J("ngIf",!r),e.xp6(1),e.Q6J("ngIf",!c),e.xp6(1),e.Q6J("ngIf",i.props&&!1!==i.props.removable),e.xp6(1),e.Q6J("field",i)}}function x(t,s){if(1&t&&(e.TgZ(0,"ul",20),e.YNc(1,m,11,11,"li",21),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("ngForOf",i.field.fieldGroup)}}const C=function(t){return{"d-none d-md-inline":t}};function d(t,s){if(1&t&&(e.TgZ(0,"span"),e._uU(1),e.qZA(),e.TgZ(2,"span",31),e._uU(3),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Oqu(i.field.fieldGroup?i.field.fieldGroup.length:0),e.xp6(1),e.Q6J("ngClass",e.VKq(3,C,i.props.label)),e.xp6(1),e.hij(" element",i.field.fieldGroup&&1===i.field.fieldGroup.length?"o":"i","")}}const v=function(){return[10,10]},l=function(t){return{placement:"top-end",offset:t}};let u=(()=>{var t;class s extends Z.hv{constructor(n){super(),this.customFormUtilsService=n,this.parsedTitle="",this.parsedDescription=""}ngOnInit(){this.parsedDescription=this.props.description?this.customFormUtilsService.parseBBCode(this.props.description):"",this.parsedTitle=this.props.label?this.customFormUtilsService.parseBBCode(this.props.label):""}get maxLengthExceeded(){return this.props.maxItems&&this.model&&this.model.length>=this.props.maxItems}move(n,r){const c=this.model[n];this.remove(n),this.add(r,c)}}return(t=s).\u0275fac=function(n){return new(n||t)(e.Y36(O.d6))},t.\u0275cmp=e.Xpm({type:t,selectors:[["formly-field-array"]],features:[e.qOj],decls:16,vars:14,consts:[[1,"rounded","px-3","pb-3","pt-2","mb-3","formly-fieldset",3,"ngClass"],[1,"legend-reset","pb-1","px-2","mb-0","mw-100"],[1,"d-flex","align-items-center","mw-100"],[4,"ngIf","ngIfElse"],["nolabel",""],["class","mb-2 text-justify",3,"innerHTML",4,"ngIf"],["class","alert alert-danger formly-field-array-error text-center","role","alert",3,"ngClass",4,"ngIf"],["class","list-unstyled mb-3",4,"ngIf"],[1,"d-flex","flex-row-reverse"],["appTippy","Hai aggiunto il numero massimo di elementi!",3,"disableInstance","tippyProps"],["type","button",1,"btn","btn-primary","d-flex","align-items-center",3,"disabled","click"],[1,"material-icons"],["itemscount",""],[1,"fs-xl","text-truncate","mw-100",3,"innerHTML"],[1,"ms-2","fs-reset","lh-1","fst-italic","list-counter","text-nowrap"],[4,"ngTemplateOutlet"],[1,"fs-xl","text-truncate","mw-10"],[1,"mb-2","text-justify",3,"innerHTML"],["role","alert",1,"alert","alert-danger","formly-field-array-error","text-center",3,"ngClass"],[3,"field"],[1,"list-unstyled","mb-3"],["class","item",3,"ngClass",4,"ngFor","ngForOf"],[1,"item",3,"ngClass"],[1,"rounded","formly-fieldset","dashed","show-success","px-3",3,"ngClass"],[1,"legend-reset","ms-auto","mb-0","px-2"],[1,"d-flex","align-items-center"],[1,"fs-xl","ms-1"],[1,"ms-2","mb-0","item-icons","list-unstyled","d-flex","align-items-center"],[4,"ngIf"],[3,"ngClass",4,"ngIf"],["appTippy","Sposta in alto",1,"d-block","material-icons","cursor-pointer",3,"disableOnTouchDevice","click"],[3,"ngClass"],["appTippy","Sposta in basso",1,"d-block","material-icons","cursor-pointer",3,"disableOnTouchDevice","click"],["appTippy","Rimuovi",1,"d-block","material-icons","cursor-pointer","text-danger",3,"disableOnTouchDevice","click"]],template:function(n,r){if(1&n&&(e.TgZ(0,"fieldset",0)(1,"legend",1)(2,"div",2),e.YNc(3,j,6,2,"ng-container",3),e.YNc(4,H,3,1,"ng-template",null,4,e.W1O),e.qZA()(),e.YNc(6,M,1,1,"div",5),e.YNc(7,L,2,4,"div",6),e.YNc(8,x,2,1,"ul",7),e.TgZ(9,"div",8)(10,"div",9)(11,"button",10),e.NdJ("click",function(){return!r.maxLengthExceeded&&r.add()}),e.TgZ(12,"span",11),e._uU(13,"add"),e.qZA()()()(),e.YNc(14,d,4,5,"ng-template",null,12,e.W1O),e.qZA()),2&n){const c=e.MAs(5);e.Q6J("ngClass",e.VKq(9,o,r.formControl.invalid)),e.xp6(3),e.Q6J("ngIf",r.parsedTitle)("ngIfElse",c),e.xp6(3),e.Q6J("ngIf",r.parsedDescription),e.xp6(1),e.Q6J("ngIf",r.showError&&r.formControl.errors),e.xp6(1),e.Q6J("ngIf",r.field.fieldGroup&&r.field.fieldGroup.length),e.xp6(2),e.Q6J("disableInstance",!r.maxLengthExceeded)("tippyProps",e.VKq(12,l,e.DdM(11,v))),e.xp6(1),e.Q6J("disabled",r.maxLengthExceeded)}},dependencies:[F.mk,F.sg,F.O5,F.tP,Z.cw,Z.M2,D.$],styles:["legend[_ngcontent-%COMP%]   .list-counter[_ngcontent-%COMP%]{padding-top:.175rem}legend[_ngcontent-%COMP%]   .item-icons[_ngcontent-%COMP%]{padding-top:.1rem}"]}),s})();var h=p(1413),f=p(4020),y=p(6223),w=p(91),S=p(2181),b=p(8180),A=p(5619);const U=["language","theme"],B=["editor"];let oe=(()=>{class t{constructor(i,n){this.ngZone=i,this.monacoPathConfig=n,this.isMonacoLoaded$=new A.X(!1),this._monacoPath="assets/monaco-editor/min/vs",window.monacoEditorAlreadyInitialized?i.run(()=>this.isMonacoLoaded$.next(!0)):(window.monacoEditorAlreadyInitialized=!0,this.monacoPathConfig&&(this.monacoPath=this.monacoPathConfig),this.loadMonaco())}set monacoPath(i){i&&(this._monacoPath=i)}loadMonaco(){const i=()=>{let T=this._monacoPath;window.amdRequire=window.require;const Q=!!this.nodeRequire,$=T.includes("http");Q&&(window.require=this.nodeRequire,$||(T=window.require("path").resolve(window.__dirname,this._monacoPath))),window.amdRequire.config({paths:{vs:T}}),window.amdRequire(["vs/editor/editor.main"],()=>{this.ngZone.run(()=>this.isMonacoLoaded$.next(!0))},k=>console.error("Error loading monaco-editor: ",k))};if(window.amdRequire)return i();window.require&&(this.addElectronFixScripts(),this.nodeRequire=window.require);const c=document.createElement("script");c.type="text/javascript",c.src=`${this._monacoPath}/loader.js`,c.addEventListener("load",i),document.body.appendChild(c)}addElectronFixScripts(){const i=document.createElement("script"),n=document.createTextNode("self.module = undefined;"),r=document.createTextNode("self.process.browser = true;");i.appendChild(n),i.appendChild(r),document.body.appendChild(i)}}return t.\u0275fac=function(i){return new(i||t)(e.LFG(e.R0b),e.LFG("MONACO_PATH",8))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),re=(()=>{class t{constructor(i){this.monacoLoader=i,this.init=new e.vpe,this.onTouched=()=>{},this.onErrorStatusChange=()=>{},this.propagateChange=()=>{}}get model(){return this.editor&&this.editor.getModel()}get modelMarkers(){return this.model&&monaco.editor.getModelMarkers({resource:this.model.uri})}ngOnInit(){this.monacoLoader.isMonacoLoaded$.pipe((0,S.h)(i=>i),(0,b.q)(1)).subscribe(()=>{this.initEditor()})}ngOnChanges(i){if(this.editor&&i.options&&!i.options.firstChange){const n=i.options.currentValue,{language:r,theme:c}=n,T=(0,w.Z)(n,U),{language:Q,theme:$}=i.options.previousValue;Q!==r&&monaco.editor.setModelLanguage(this.editor.getModel(),this.options&&this.options.language?this.options.language:"text"),$!==c&&monaco.editor.setTheme(c),this.editor.updateOptions(T)}if(this.editor&&i.uri){const n=i.uri.currentValue,r=i.uri.previousValue;if(r&&!n||!r&&n||n&&r&&n.path!==r.path){const c=this.editor.getValue();let T;this.modelUriInstance&&this.modelUriInstance.dispose(),n&&(T=monaco.editor.getModels().find(Q=>Q.uri.path===n.path)),this.modelUriInstance=T||monaco.editor.createModel(c,this.options.language||"text",this.uri),this.editor.setModel(this.modelUriInstance)}}}writeValue(i){this.value=i,this.editor&&i?this.editor.setValue(i):this.editor&&this.editor.setValue("")}registerOnChange(i){this.propagateChange=i}registerOnTouched(i){this.onTouched=i}validate(){return this.parsedError?{monaco:{value:this.parsedError.split("|")}}:null}registerOnValidatorChange(i){this.onErrorStatusChange=i}initEditor(){const i={value:[this.value].join("\n"),language:"text",automaticLayout:!0,scrollBeyondLastLine:!1,theme:"vc"};this.editor=monaco.editor.create(this.editorContent.nativeElement,this.options?(0,h.Z)((0,h.Z)({},i),this.options):i),this.registerEditorListeners(),this.init.emit(this.editor)}registerEditorListeners(){this.editor.onDidChangeModelContent(()=>{this.propagateChange(this.editor.getValue())}),this.editor.onDidChangeModelDecorations(()=>{const i=this.modelMarkers.map(({message:r})=>r).join("|");this.parsedError!==i&&(this.parsedError=i,this.onErrorStatusChange())}),this.editor.onDidBlurEditorText(()=>{this.onTouched()})}ngOnDestroy(){this.editor&&this.editor.dispose()}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(oe))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ngx-monaco-editor"]],viewQuery:function(i,n){if(1&i&&e.Gf(B,7),2&i){let r;e.iGM(r=e.CRH())&&(n.editorContent=r.first)}},inputs:{options:"options",uri:"uri"},outputs:{init:"init"},features:[e._Bn([{provide:y.JU,useExisting:(0,e.Gpc)(()=>t),multi:!0},{provide:y.Cf,useExisting:(0,e.Gpc)(()=>t),multi:!0}]),e.TTD],decls:4,vars:0,consts:[["fxFlex","",1,"editor-container"],["container",""],[1,"monaco-editor"],["editor",""]],template:function(i,n){1&i&&(e.TgZ(0,"div",0,1),e._UZ(2,"div",2,3),e.qZA())},styles:[".monaco-editor[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0}.editor-container[_ngcontent-%COMP%]{overflow:hidden;position:relative;display:table;width:100%;height:100%;min-width:0}"],changeDetection:0}),t})(),se=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[]]}),t})();function le(t,s){if(1&t&&(e.ynx(0),e.TgZ(1,"textarea",2),e._uU(2,"            "),e.qZA(),e.BQk()),2&t){const i=e.oxw();e.xp6(1),e.ekj("is-invalid",i.showError),e.Q6J("formControl",i.formControl)("cols",1)("rows",10)("formlyAttributes",i.field)}}function ae(t,s){1&t&&(e.ynx(0),e.TgZ(1,"p",4),e._UZ(2,"span",5),e.qZA(),e.BQk())}function de(t,s){if(1&t&&e._UZ(0,"ngx-monaco-editor",6),2&t){const i=e.oxw(2);e.Udp("height",i.editorHeight),e.Q6J("options",i.editorOptions)("formControl",i.formControl)}}function ce(t,s){if(1&t&&(e.YNc(0,ae,3,0,"ng-container",0),e.YNc(1,de,1,4,"ng-template",null,3,e.W1O)),2&t){const i=e.MAs(2),n=e.oxw();e.Q6J("ngIf",n.loading)("ngIfElse",i)}}let ue=(()=>{var t;class s extends Z.fS{constructor(){super(...arguments),this.touchDevice=f.eX,this.editorOptions={theme:"vs-dark",language:"json"},this.loading=!0,this.editorHeight="350px"}ngOnInit(){this.touchDevice||(this.field.props.editorOptions&&(this.field.props.editorOptions.height&&(this.editorHeight=this.field.props.editorOptions.height,delete this.field.props.editorOptions.height),this.editorOptions=(0,h.Z)((0,h.Z)({},this.editorOptions),this.field.props.editorOptions)),this.loading=!1)}}return(t=s).\u0275fac=function(){let i;return function(r){return(i||(i=e.n5z(t)))(r||t)}}(),t.\u0275cmp=e.Xpm({type:t,selectors:[["formly-code-editor-type"]],features:[e.qOj],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["notTouchDevice",""],[1,"form-control",3,"formControl","cols","rows","formlyAttributes"],["codeEditor",""],[1,"placeholder-glow"],[1,"placeholder","col-12","placeholder-lg"],[1,"d-block","formly-code-editor",3,"options","formControl"]],template:function(n,r){if(1&n&&(e.YNc(0,le,3,6,"ng-container",0),e.YNc(1,ce,3,2,"ng-template",null,1,e.W1O)),2&n){const c=e.MAs(2);e.Q6J("ngIf",r.touchDevice)("ngIfElse",c)}},dependencies:[F.O5,Z.JD,y.Fj,y.JJ,y.oH,re],encapsulation:2}),s})();var V=p(5861),X=p(8784);function me(t,s){if(1&t){const i=e.EpF();e.ynx(0),e.TgZ(1,"div",4),e.NdJ("click",function(){e.CHM(i);const r=e.oxw();return e.KtG(r.formControl.setValue(void 0))}),e._uU(2," highlight_off "),e.qZA(),e.BQk()}}function fe(t,s){1&t&&(e.ynx(0),e.TgZ(1,"p",5),e._UZ(2,"span",6),e.qZA(),e.BQk())}function pe(t,s){if(1&t&&e._UZ(0,"option",10),2&t){const i=s.$implicit;e.Q6J("ngValue",i.id||i.name)("innerText",i.name)}}function ge(t,s){if(1&t&&(e.ynx(0),e.TgZ(1,"select",8),e.YNc(2,pe,1,2,"option",9),e.qZA(),e.BQk()),2&t){const i=e.oxw(2);e.xp6(1),e.ekj("is-invalid",i.showError),e.Q6J("formControl",i.formControl)("formlyAttributes",i.field),e.xp6(1),e.Q6J("ngForOf",i.groupsList)}}function _e(t,s){if(1&t&&e._UZ(0,"option",10),2&t){const i=s.$implicit;e.Q6J("ngValue",i.id||i.name)("innerText",i.name)}}function he(t,s){if(1&t&&(e.TgZ(0,"select",11),e.YNc(1,_e,1,2,"option",9),e.qZA()),2&t){const i=e.oxw(2);e.ekj("is-invalid",i.showError),e.Q6J("formControl",i.formControl)("formlyAttributes",i.field),e.xp6(1),e.Q6J("ngForOf",i.groupsList)}}function ye(t,s){if(1&t&&(e.YNc(0,ge,3,5,"ng-container",2),e.YNc(1,he,2,5,"ng-template",null,7,e.W1O)),2&t){const i=e.MAs(2),n=e.oxw();e.Q6J("ngIf",n.field.props.multiple)("ngIfElse",i)}}const ve=function(t){return{"no-label":t}};let Fe=(()=>{var t;class s extends Z.fS{constructor(n){super(),this.forumService=n,this.loading=!0,this.groupsList=[]}ngOnInit(){var n=this;return(0,V.Z)(function*(){n.field.defaultValue=void 0,n.field.props.hasOwnProperty("multiple")||(n.field.props.multiple=!0),n.groupsList=(yield n.forumService.getGroups()).sort((r,c)=>r.name.localeCompare(c.name)),n.field.props.keepGroupsWithoutId||(n.groupsList=n.groupsList.filter(r=>r.id>0)),n.loading=!1,n.field.formControl.updateValueAndValidity()})()}}return(t=s).\u0275fac=function(n){return new(n||t)(e.Y36(X._))},t.\u0275cmp=e.Xpm({type:t,selectors:[["formly-field-forum-groups"]],features:[e.qOj],decls:5,vars:6,consts:[[1,"position-relative","wrapper",3,"ngClass"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["formSelect",""],[1,"reset-icon","position-absolute","cursor-pointer","d-block","material-icons","text-danger",3,"click"],[1,"placeholder-glow"],[1,"placeholder","col-12","placeholder-lg"],["single",""],["multiple","",1,"form-select",3,"formControl","formlyAttributes"],[3,"ngValue","innerText",4,"ngFor","ngForOf"],[3,"ngValue","innerText"],[1,"form-select",3,"formControl","formlyAttributes"]],template:function(n,r){if(1&n&&(e.TgZ(0,"div",0),e.YNc(1,me,3,0,"ng-container",1),e.YNc(2,fe,3,0,"ng-container",2),e.YNc(3,ye,3,2,"ng-template",null,3,e.W1O),e.qZA()),2&n){const c=e.MAs(4);e.Q6J("ngClass",e.VKq(4,ve,!r.props.label)),e.xp6(1),e.Q6J("ngIf",!r.props.label||void 0!==r.formControl.value),e.xp6(1),e.Q6J("ngIf",r.loading)("ngIfElse",c)}},dependencies:[F.mk,F.sg,F.O5,Z.JD,y.YN,y.Kr,y.EJ,y.K7,y.JJ,y.oH],styles:[".reset-icon[_ngcontent-%COMP%]{right:0}.wrapper[_ngcontent-%COMP%]:not(.no-label)   .reset-icon[_ngcontent-%COMP%]{top:calc(-24px - .45rem)}.no-label[_ngcontent-%COMP%]{padding-top:calc(24px + .45rem)}.no-label[_ngcontent-%COMP%]   .reset-icon[_ngcontent-%COMP%]{top:0}"]}),s})();function xe(t,s){if(1&t){const i=e.EpF();e.ynx(0),e.TgZ(1,"div",4),e.NdJ("click",function(){e.CHM(i);const r=e.oxw();return e.KtG(r.formControl.setValue(void 0))}),e._uU(2," highlight_off "),e.qZA(),e.BQk()}}function Oe(t,s){1&t&&(e.ynx(0),e.TgZ(1,"p",5),e._UZ(2,"span",6),e.qZA(),e.BQk())}function Ce(t,s){if(1&t&&(e.ynx(0),e._UZ(1,"option",10),e.BQk()),2&t){const i=s.$implicit;e.xp6(1),e.Q6J("ngValue",i.id)("innerHTML"," - "+i.name,e.oJD)}}function Me(t,s){if(1&t&&(e.ynx(0),e.YNc(1,Ce,2,2,"ng-container",9),e.BQk()),2&t){const i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",i.subsections)}}function be(t,s){if(1&t&&(e.ynx(0),e._UZ(1,"option",10),e.YNc(2,Me,2,1,"ng-container",1),e.BQk()),2&t){const i=s.$implicit;e.xp6(1),e.Q6J("ngValue",i.id)("innerHTML",i.name,e.oJD),e.xp6(1),e.Q6J("ngIf",i.subsections&&i.subsections.length)}}function Te(t,s){if(1&t&&(e.ynx(0),e._UZ(1,"option",10),e.BQk()),2&t){const i=s.$implicit;e.xp6(1),e.Q6J("ngValue",i)("innerHTML"," -- Sezione ristretta -- #"+i,e.oJD)}}function Ee(t,s){if(1&t&&(e.ynx(0),e.YNc(1,Te,2,2,"ng-container",9),e.BQk()),2&t){const i=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",i.restrictedOrDeletedSections)}}function Ae(t,s){if(1&t&&(e.ynx(0),e.TgZ(1,"select",8),e.YNc(2,be,3,3,"ng-container",9),e.YNc(3,Ee,2,1,"ng-container",1),e.qZA(),e.BQk()),2&t){const i=e.oxw(2);e.xp6(1),e.ekj("is-invalid",i.showError),e.Q6J("formControl",i.formControl)("formlyAttributes",i.field),e.xp6(1),e.Q6J("ngForOf",i.sectionsList),e.xp6(1),e.Q6J("ngIf",i.restrictedOrDeletedSections.length>0)}}function we(t,s){if(1&t&&(e.ynx(0),e._UZ(1,"option",10),e.BQk()),2&t){const i=s.$implicit;e.xp6(1),e.Q6J("ngValue",i.id)("innerHTML"," - "+i.name,e.oJD)}}function Ze(t,s){if(1&t&&(e.ynx(0),e.YNc(1,we,2,2,"ng-container",9),e.BQk()),2&t){const i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",i.subsections)}}function Se(t,s){if(1&t&&(e.ynx(0),e._UZ(1,"option",10),e.YNc(2,Ze,2,1,"ng-container",1),e.BQk()),2&t){const i=s.$implicit;e.xp6(1),e.Q6J("ngValue",i.id)("innerHTML",i.name,e.oJD),e.xp6(1),e.Q6J("ngIf",i.subsections&&i.subsections.length)}}function De(t,s){if(1&t&&(e.ynx(0),e._UZ(1,"option",10),e.BQk()),2&t){const i=s.$implicit;e.xp6(1),e.Q6J("ngValue",i)("innerHTML"," -- Sezione ristretta -- #"+i,e.oJD)}}function Pe(t,s){if(1&t&&(e.ynx(0),e.YNc(1,De,2,2,"ng-container",9),e.BQk()),2&t){const i=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",i.restrictedOrDeletedSections)}}function Ie(t,s){if(1&t&&(e.TgZ(0,"select",11),e.YNc(1,Se,3,3,"ng-container",9),e.YNc(2,Pe,2,1,"ng-container",1),e.qZA()),2&t){const i=e.oxw(2);e.ekj("is-invalid",i.showError),e.Q6J("formControl",i.formControl)("formlyAttributes",i.field),e.xp6(1),e.Q6J("ngForOf",i.sectionsList),e.xp6(1),e.Q6J("ngIf",i.restrictedOrDeletedSections.length>0)}}function Je(t,s){if(1&t&&(e.YNc(0,Ae,4,6,"ng-container",2),e.YNc(1,Ie,3,6,"ng-template",null,7,e.W1O)),2&t){const i=e.MAs(2),n=e.oxw();e.Q6J("ngIf",n.field.props.multiple)("ngIfElse",i)}}const Le=function(t){return{"no-label":t}};let Ue=(()=>{var t;class s extends Z.fS{constructor(n){super(),this.forumService=n,this.loading=!0,this.sectionsList=[],this.restrictedOrDeletedSections=[]}ngOnInit(){var n=this;return(0,V.Z)(function*(){n.field.defaultValue=void 0,n.field.props.hasOwnProperty("multiple")||(n.field.props.multiple=!0),n.restrictedOrDeletedSections=Array.isArray(n.field.formControl.value)?[...n.field.formControl.value]:[];const r=yield n.forumService.getSections();n.sectionsList=r.map(c=>{const T=n.restrictedOrDeletedSections.indexOf(c.id);return T>-1&&n.restrictedOrDeletedSections.splice(T,1),(0,h.Z)((0,h.Z)({},c),{subsections:n.flattenSubsections(c)})}),n.loading=!1,n.field.formControl.updateValueAndValidity()})()}flattenSubsections(n){let r=[],c=-1;if(n.subsections&&n.subsections.length)for(const T of n.subsections)c=this.restrictedOrDeletedSections.indexOf(T.id),c>-1&&this.restrictedOrDeletedSections.splice(c,1),r.push(T),T.subsections&&(r=[...r,...this.flattenSubsections(T)]);return r}}return(t=s).\u0275fac=function(n){return new(n||t)(e.Y36(X._))},t.\u0275cmp=e.Xpm({type:t,selectors:[["formly-field-forum-sections"]],features:[e.qOj],decls:5,vars:6,consts:[[1,"position-relative","wrapper",3,"ngClass"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["formSelect",""],[1,"reset-icon","position-absolute","cursor-pointer","d-block","material-icons","text-danger",3,"click"],[1,"placeholder-glow"],[1,"placeholder","col-12","placeholder-lg"],["single",""],["multiple","",1,"form-select",3,"formControl","formlyAttributes"],[4,"ngFor","ngForOf"],[3,"ngValue","innerHTML"],[1,"form-select",3,"formControl","formlyAttributes"]],template:function(n,r){if(1&n&&(e.TgZ(0,"div",0),e.YNc(1,xe,3,0,"ng-container",1),e.YNc(2,Oe,3,0,"ng-container",2),e.YNc(3,Je,3,2,"ng-template",null,3,e.W1O),e.qZA()),2&n){const c=e.MAs(4);e.Q6J("ngClass",e.VKq(4,Le,!r.props.label)),e.xp6(1),e.Q6J("ngIf",!r.props.label||void 0!==r.formControl.value),e.xp6(1),e.Q6J("ngIf",r.loading)("ngIfElse",c)}},dependencies:[F.mk,F.sg,F.O5,Z.JD,y.YN,y.Kr,y.EJ,y.K7,y.JJ,y.oH],styles:[".reset-icon[_ngcontent-%COMP%]{right:0}.wrapper[_ngcontent-%COMP%]:not(.no-label)   .reset-icon[_ngcontent-%COMP%]{top:calc(-24px - .45rem)}.no-label[_ngcontent-%COMP%]{padding-top:calc(24px + .45rem)}.no-label[_ngcontent-%COMP%]   .reset-icon[_ngcontent-%COMP%]{top:0}"]}),s})();var Qe=p(8645),Ve=p(3620),ke=p(3997),Ne=p(3019),z=p(9397),Ye=p(4664),Ge=p(2096);let ee=(()=>{var t;class s{transform(n){let r=document.createElement("TEXTAREA");return r.innerHTML=n,r.value}}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275pipe=e.Yjl({name:"decodeHtmlEntitites",type:t,pure:!0}),s})();var je=p(1410),qe=p(7165),He=p(5661),Be=p(8418),$e=p(4291),Re=p(9473),te=p(3946),Ke=p(7357);function We(t,s){1&t&&(e.TgZ(0,"span",8),e._uU(1,"*"),e.qZA())}function Xe(t,s){if(1&t&&(e.TgZ(0,"legend",5)(1,"label",6),e._uU(2),e.YNc(3,We,2,0,"span",7),e.qZA()()),2&t){const i=e.oxw();e.xp6(1),e.s9C("for",i.id),e.xp6(1),e.hij(" ",i.props.label," "),e.xp6(1),e.Q6J("ngIf",i.props.required)}}function ze(t,s){1&t&&e.GkF(0)}function et(t,s){if(1&t&&e._UZ(0,"div",9),2&t){const i=e.oxw();e.Q6J("innerHTML",i.parsedDescription,e.oJD)}}function tt(t,s){1&t&&(e.TgZ(0,"div",16)(1,"span",17),e._uU(2,"Loading..."),e.qZA()())}function it(t,s){if(1&t&&(e.TgZ(0,"div",18),e._UZ(1,"formly-validation-message",19),e.qZA()),2&t){const i=e.oxw(2);e.Udp("display","block"),e.xp6(1),e.Q6J("field",i.field)}}function nt(t,s){1&t&&e._UZ(0,"app-loader",20)}function ot(t,s){1&t&&e._UZ(0,"div",25),2&t&&e.Q6J("innerText","Nessun utente inserito!")}function rt(t,s){if(1&t){const i=e.EpF();e.TgZ(0,"li")(1,"a",28)(2,"div",29),e.NdJ("click",function(r){const T=e.CHM(i).$implicit,Q=e.oxw(4);return e.KtG(Q.removeUser(T,r))}),e.TgZ(3,"div",30),e._uU(4," remove "),e.qZA()(),e._UZ(5,"img",31),e.ALo(6,"uploadsreplace"),e.qZA(),e._UZ(7,"a",32),e.qZA()}if(2&t){const i=s.$implicit,n=e.oxw(4);e.Gre("d-flex flex-column align-items-center user-",n.circuit,""),e.xp6(1),e.Q6J("href",n.baseUrl+i.uid.substring(2),e.LSH),e.xp6(1),e.Q6J("disableOnTouchDevice",!0),e.xp6(3),e.s9C("alt",i.nickname+"'s avatar"),e.Q6J("src",e.lcZ(6,9,i.avatar),e.LSH),e.xp6(2),e.Q6J("innerHTML",i.nickname,e.oJD)("href",n.baseUrl+i.uid.substring(2),e.LSH)}}function st(t,s){if(1&t&&(e.TgZ(0,"ul",26),e.YNc(1,rt,8,11,"li",27),e.qZA()),2&t){const i=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",i.selectedUsers)}}const lt=function(t){return{"empty-list":t}};function at(t,s){if(1&t&&(e.TgZ(0,"fieldset",21)(1,"legend",22),e._uU(2," Lista utenti "),e.qZA(),e.YNc(3,ot,1,1,"div",23),e.YNc(4,st,2,1,"ng-template",null,24,e.W1O),e.qZA()),2&t){const i=e.MAs(5),n=e.oxw(2);e.Q6J("ngClass",e.VKq(3,lt,0===n.selectedUsers.length)),e.xp6(3),e.Q6J("ngIf",0===n.selectedUsers.length)("ngIfElse",i)}}function dt(t,s){if(1&t){const i=e.EpF();e.TgZ(0,"div",10)(1,"input",11),e.NdJ("ngModelChange",function(r){e.CHM(i);const c=e.oxw();return e.KtG(c.inputValue=r)})("selectItem",function(r){e.CHM(i);const c=e.oxw();return e.KtG(c.selectUser(r))})("focus",function(r){e.CHM(i);const c=e.oxw();return e.KtG(c.focus.next(r.target.value))}),e.qZA(),e.YNc(2,tt,3,0,"div",12),e.qZA(),e.YNc(3,it,2,3,"div",13),e.YNc(4,nt,1,0,"app-loader",14),e.YNc(5,at,6,5,"ng-template",null,15,e.W1O)}if(2&t){const i=e.MAs(6),n=e.oxw();e.xp6(1),e.ekj("is-invalid",n.showError),e.Q6J("ngModel",n.inputValue)("formlyAttributes",n.field)("ngbTypeahead",n.search)("editable",!1)("inputFormatter",n.inputFormatter)("resultFormatter",n.outputFormatter),e.xp6(1),e.Q6J("ngIf",n.searching),e.xp6(1),e.Q6J("ngIf",n.showError),e.xp6(1),e.Q6J("ngIf",n.loading)("ngIfElse",i)}}let ct=(()=>{var t;class s extends Z.fS{constructor(n,r,c,T,Q,$){var k;if(super(),this.userService=n,this.globalsService=r,this.changeDetectorRef=c,this.toastService=T,this.customFormUtilsService=Q,this.decodeHtmlEntitiesPipe=$,this.inputValue="",this.selectedUsers=[],this.loading=!0,this.searching=!1,this.focus=new Qe.x,this.parsedDescription="",this.formlyFieldValues=[],this.lastSearchedValueWithoutResult="",this.outputFormatter=N=>N?N.nickname.indexOf("&")>-1?this.decodeHtmlEntitiesPipe.transform(N.nickname):N.nickname:"",this.search=N=>{const _t=N.pipe((0,Ve.b)(1e3),(0,ke.x)());return(0,Ne.T)(_t,this.focus).pipe((0,z.b)(()=>this.setSearching(!0)),(0,Ye.w)(ie=>ie.length<3?(0,Ge.of)([]):this.getUsers(ie)),(0,z.b)(()=>this.setSearching(!1)))},this.circuit=(null===(k=this.globalsService.credentials)||void 0===k?void 0:k.site.short)||"",!this.circuit)throw new Error("Missing credentials!");this.baseUrl=qe.hD[this.circuit]+"/?act=Profile&MID="}ngOnInit(){var n=this;return(0,V.Z)(function*(){n.parsedDescription=n.props.description?n.customFormUtilsService.parseBBCode(n.props.description):"",n.formlyFieldValues=Array.isArray(n.formControl.value)?n.formControl.value:Array.isArray(n.field.defaultValue)?n.field.defaultValue:[],yield n.getSelectedUsersFromApi(),n.loading=!1,n.formControl.updateValueAndValidity(),n.formControl.registerOnChange(()=>{n.formControlChangeCallback()})})()}inputFormatter(n){return n.nickname}getUsers(n){var r=this;return(0,V.Z)(function*(){if(r.lastSearchedValueWithoutResult&&0===n.indexOf(r.lastSearchedValueWithoutResult))return[];const c=yield r.userService.searchUserByName(n);return 0===c.length&&(r.lastSearchedValueWithoutResult=n),c})()}setSearching(n){this.searching=n,this.changeDetectorRef.detectChanges()}selectUser(n){const r=n.item,c=Number(r.uid.substring(2));if(this.formlyFieldValues.includes(c))return this.toastService.show({content:`L'utente <strong>${r.nickname}</strong> \xe8 gi\xe0 stato aggiunto alla lista!`}),void(this.inputValue="");this.formlyFieldValues.push(c),this.selectedUsers.push(r),n.preventDefault(),this.inputValue="",this.formControl.setValue([...this.formlyFieldValues])}removeUser(n,r){r.preventDefault(),r.stopPropagation();const c=Number(n.uid.substring(2));this.formlyFieldValues=this.formlyFieldValues.filter(T=>T!==c),this.selectedUsers=this.selectedUsers.filter(T=>T.uid!==n.uid),this.formControl.setValue([...this.formlyFieldValues])}formControlChangeCallback(){var n=this;return(0,V.Z)(function*(){if(!Array.isArray(n.formControl.value))return;let r=!1;if(n.formControl.value.length!==n.formlyFieldValues.length)r=!0;else for(const c of n.formControl.value)if(!n.formlyFieldValues.includes(c)){r=!0;break}r&&(n.formlyFieldValues=n.formControl.value,n.loading=!0,n.changeDetectorRef.detectChanges(),yield n.getSelectedUsersFromApi(),n.loading=!1,n.changeDetectorRef.detectChanges())})()}getSelectedUsersFromApi(){var n=this;return(0,V.Z)(function*(){n.selectedUsers=0!==n.formlyFieldValues.length?(yield n.userService.getDetailsFromUids(n.formlyFieldValues.map(r=>n.circuit+r))).sort((r,c)=>r.nickname>c.nickname?1:c.nickname>r.nickname?-1:0):[]})()}}return(t=s).\u0275fac=function(n){return new(n||t)(e.Y36(Be.K),e.Y36(je.d),e.Y36(e.sBO),e.Y36(He.k),e.Y36(O.d6),e.Y36(ee))},t.\u0275cmp=e.Xpm({type:t,selectors:[["formly-field-forum-users"]],features:[e._Bn([ee]),e.qOj],decls:6,vars:5,consts:[[1,"mb-3","rounded","px-3","pt-2","pb-3","formly-fieldset"],["class","legend-reset fs-reset mb-0 px-2 mw-100 lh-1 py-1",4,"ngIf"],[4,"ngTemplateOutlet"],["class","form-text text-muted",3,"innerHTML",4,"ngIf"],["fieldContet",""],[1,"legend-reset","fs-reset","mb-0","px-2","mw-100","lh-1","py-1"],[1,"form-label","mb-0","mw-100","text-truncate",3,"for"],["aria-hidden","true",4,"ngIf"],["aria-hidden","true"],[1,"form-text","text-muted",3,"innerHTML"],[1,"position-relative"],["type","text","container","body",1,"form-control",3,"ngModel","formlyAttributes","ngbTypeahead","editable","inputFormatter","resultFormatter","ngModelChange","selectItem","focus"],["class","spinner-border spinner-border-sm text-primary position-absolute","role","status",4,"ngIf"],["class","invalid-feedback",3,"display",4,"ngIf"],["message","Recupero utenti","class","d-block mt-3",4,"ngIf","ngIfElse"],["userList",""],["role","status",1,"spinner-border","spinner-border-sm","text-primary","position-absolute"],[1,"visually-hidden"],[1,"invalid-feedback"],[3,"field"],["message","Recupero utenti",1,"d-block","mt-3"],[1,"formly-user-list-container","rounded","px-3","pt-2","mb-3","mt-2",3,"ngClass"],[1,"legend-reset","fs-reset","mb-0","px-2","pb-1"],["class","alert alert-primary text-center mb-0 fw-bold",3,"innerText",4,"ngIf","ngIfElse"],["noEmpty",""],[1,"alert","alert-primary","text-center","mb-0","fw-bold",3,"innerText"],[1,"formly-user-list","list-unstyled","mb-0","d-grid","px-2"],[3,"class",4,"ngFor","ngForOf"],["target","_blank",1,"avatar-container","rounded-circle","d-block","position-relative",3,"href"],["appTippy","Rimuovi",1,"remove-user","alert","alert-danger","position-absolute","cursor-pointer","mb-0","py-0","px-1",3,"disableOnTouchDevice","click"],[1,"material-icons","d-block","fs-reset"],["appImage","",1,"d-block","image-cover","rounded-circle",3,"src","alt"],["target","_blank",1,"d-block","fw-bold","mt-1","nickname","text-truncate","mw-100",3,"innerHTML","href"]],template:function(n,r){if(1&n&&(e.TgZ(0,"fieldset",0),e.YNc(1,Xe,4,3,"legend",1),e.YNc(2,ze,1,0,"ng-container",2),e.YNc(3,et,1,1,"div",3),e.qZA(),e.YNc(4,dt,7,12,"ng-template",null,4,e.W1O)),2&n){const c=e.MAs(5);e.ekj("has-error",r.formControl.invalid),e.xp6(1),e.Q6J("ngIf",r.props.label),e.xp6(1),e.Q6J("ngTemplateOutlet",c),e.xp6(1),e.Q6J("ngIf",r.parsedDescription)}},dependencies:[F.mk,F.sg,F.O5,F.tP,Z.JD,Z.M2,y.Fj,y.JJ,y.On,$e.t,Re.R,te.dR,D.$,Ke.g],styles:[".spinner-border[_ngcontent-%COMP%]{top:calc(50% - 8px);right:10px}fieldset.formly-user-list-container[_ngcontent-%COMP%]{border:1px dashed var(--bs-gray-500)}fieldset.formly-user-list-container[_ngcontent-%COMP%]:not(.empty-list){padding-bottom:.75rem}fieldset.formly-user-list-container.empty-list[_ngcontent-%COMP%]{padding-bottom:1rem}.formly-user-list[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(60px,1fr));gap:1rem}.formly-user-list[_ngcontent-%COMP%]   .remove-user[_ngcontent-%COMP%]{top:0;left:-8px}.formly-user-list[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{width:60px;height:60px;border:2px solid}.formly-user-list[_ngcontent-%COMP%]   .user-ff[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{border-color:#58a72e}.formly-user-list[_ngcontent-%COMP%]   .user-ff[_ngcontent-%COMP%]   .nickname[_ngcontent-%COMP%]{color:#58a72e!important}.formly-user-list[_ngcontent-%COMP%]   .user-fc[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{border-color:#0082cd}.formly-user-list[_ngcontent-%COMP%]   .user-fc[_ngcontent-%COMP%]   .nickname[_ngcontent-%COMP%]{color:#0082cd!important}.formly-user-list[_ngcontent-%COMP%]   .user-bf[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{border-color:#e67f22}.formly-user-list[_ngcontent-%COMP%]   .user-bf[_ngcontent-%COMP%]   .nickname[_ngcontent-%COMP%]{color:#e67f22!important}@media (min-width: 960px){.formly-user-list[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(75px,1fr));gap:1.5rem}.formly-user-list[_ngcontent-%COMP%]   .remove-user[_ngcontent-%COMP%]{top:4px}.formly-user-list[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{width:75px;height:75px}}"]}),s})(),ut=(()=>{var t;class s extends Z.fS{constructor(){super(...arguments),this.defaultOptions={props:{label:""}}}}return(t=s).\u0275fac=function(){let i;return function(r){return(i||(i=e.n5z(t)))(r||t)}}(),t.\u0275cmp=e.Xpm({type:t,selectors:[["formly-field-label"]],features:[e.qOj],decls:2,vars:1,template:function(n,r){1&n&&(e.TgZ(0,"h5"),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.Oqu(r.props.label))},encapsulation:2,changeDetection:0}),s})();var mt=p(4295),ft=p(3038),pt=p(5063);let gt=(()=>{var t;class s{}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[F.ez,J.Vy,J.d3,Z.X0.forChild({types:[{name:"array",component:u},{name:"code-editor",component:ue,wrappers:["form-field"]},{name:"forum-groups",component:Fe,wrappers:["form-field"]},{name:"forum-sections",component:Ue,wrappers:["form-field"]},{name:"label",component:ut},{name:"forum-users",component:ct}]}),y.u5,mt.$,J.q,se,te.ZS,ft.G,pt.g]}),s})()},336:(K,Y,p)=>{p.d(Y,{c:()=>I});var F=p(9376),J=p(91),O=p(1413),Z=p(5879),e=p(6223),D=p(5545),G=p(9397);const j=["key"],q=["allOf"];function M(_){return""===_||null==_}function P(_){return null!=_&&"object"==typeof _&&!Array.isArray(_)}function L(_){return Number.isInteger?Number.isInteger(_):"number"==typeof _&&Math.floor(_)===_}function a(_){return"object"==typeof _&&(_.hasOwnProperty("const")||_.enum&&1===_.enum.length)}function g(_){if(!_.fieldGroup)return(0,D._S)(_)&&void 0!==(0,D.Hl)(_)?1:0;const E=_.fieldGroup.reduce((o,m)=>g(m)+o,0);if(0===E&&(0,D._S)(_)){const o=(0,D.Hl)(_);if(null===o||void 0!==o&&(_.fieldArray&&Array.isArray(o)||!_.fieldArray&&P(o)))return 1}return E}let I=(()=>{class _{toFieldConfig(o,m){return this._toFieldConfig(o,(0,O.Z)({schema:o},m||{}))}_toFieldConfig(o,m){var x;let{key:C}=m,d=(0,J.Z)(m,j);o=this.resolveSchema(o,d);const v=this.guessSchemaType(o);let l={type:v[0],defaultValue:o.default,props:{label:o.title,readonly:o.readOnly,description:o.description}};switch(null!=C&&(l.key=C),!d.ignoreDefault&&(o.readOnly||d.readOnly)&&(l.props.disabled=!0,d=(0,O.Z)((0,O.Z)({},d),{},{readOnly:!0})),d.resetOnHide&&(l.resetOnHide=!0),C&&d.strict&&this.addValidator(l,"type",(u,h)=>{const f=(0,D.Hl)(h);if(null!=f)switch(l.type){case"string":return"string"==typeof f;case"integer":return L(f);case"number":return"number"==typeof f;case"object":return P(f);case"array":return Array.isArray(f)}return!0}),!1===d.shareFormControl&&(l.shareFormControl=!1),d.ignoreDefault&&delete l.defaultValue,this.addValidator(l,"type",{schemaType:v,expression:({value:u})=>{if(void 0===u||null===u&&-1!==v.indexOf("null"))return!0;switch(v[0]){case"null":return null===typeof u;case"string":return"string"==typeof u;case"integer":return L(u);case"number":return"number"==typeof u;case"object":return P(u);case"array":return Array.isArray(u)}return!0}}),l.type){case"number":case"integer":l.parsers=[u=>M(u)?u:Number(u)],o.hasOwnProperty("minimum")&&(l.props.min=o.minimum),o.hasOwnProperty("maximum")&&(l.props.max=o.maximum),o.hasOwnProperty("exclusiveMinimum")&&(l.props.exclusiveMinimum=o.exclusiveMinimum,this.addValidator(l,"exclusiveMinimum",({value:u})=>M(u)||u>o.exclusiveMinimum)),o.hasOwnProperty("exclusiveMaximum")&&(l.props.exclusiveMaximum=o.exclusiveMaximum,this.addValidator(l,"exclusiveMaximum",({value:u})=>M(u)||u<o.exclusiveMaximum)),o.hasOwnProperty("multipleOf")&&(l.props.step=o.multipleOf,this.addValidator(l,"multipleOf",({value:u})=>{if(M(u)||"number"!=typeof u||0===u||o.multipleOf<=0)return!0;const h=Math.pow(10,function H(_){if(!isFinite(_))return 0;let E=1,o=0;for(;Math.round(_*E)/E!==_;)E*=10,o++;return o}(o.multipleOf));return Math.round(u*h)%Math.round(o.multipleOf*h)==0}));break;case"string":l.parsers=[u=>(-1!==v.indexOf("null")?u=M(u)?null:u:l.props.required||(u=""===u?void 0:u),u)],["minLength","maxLength","pattern"].forEach(u=>{o.hasOwnProperty(u)&&(l.props[u]=o[u])});break;case"object":{l.fieldGroup||(l.fieldGroup=[]);const{propDeps:u,schemaDeps:h}=this.resolveDependencies(o);Object.keys(o.properties||{}).forEach(f=>{const y=Array.isArray(o.required)&&-1!==o.required.indexOf(f),w=this._toFieldConfig(o.properties[f],(0,O.Z)((0,O.Z)({},d),{},{key:f,isOptional:d.isOptional||!y}));if(l.fieldGroup.push(w),(y||u[f])&&(w.expressions=(0,O.Z)((0,O.Z)({},w.expressions||{}),{},{"props.required":S=>{let b=S.parent;const A=S.fieldGroup&&null!=S.key?b.model:S.model;for(;null==b.key&&b.parent;)b=b.parent;return!!(A||b&&b.props&&b.props.required)&&(!(!Array.isArray(o.required)||-1===o.required.indexOf(f))||u[f]&&S.model&&u[f].some(B=>!M(S.model[B])))}})),h[f]){const S=A=>A.hasOwnProperty("const")?A.const:A.enum[0],b=h[f].oneOf;b&&b.every(A=>A.properties&&A.properties[f]&&a(A.properties[f]))?b.forEach(A=>{const U=A.properties,{[f]:B}=U,W=(0,J.Z)(U,[f].map(F.Z));l.fieldGroup.push((0,O.Z)((0,O.Z)({},this._toFieldConfig((0,O.Z)((0,O.Z)({},A),{},{properties:W}),(0,O.Z)((0,O.Z)({},d),{},{shareFormControl:!1,resetOnHide:!0}))),{},{expressions:{hide:R=>!R.model||S(B)!==R.model[f]}}))}):l.fieldGroup.push((0,O.Z)((0,O.Z)({},this._toFieldConfig(h[f],d)),{},{expressions:{hide:A=>!A.model||M(A.model[f])}}))}}),o.oneOf&&l.fieldGroup.push(this.resolveMultiSchema("oneOf",o.oneOf,(0,O.Z)((0,O.Z)({},d),{},{shareFormControl:!1}))),o.anyOf&&l.fieldGroup.push(this.resolveMultiSchema("anyOf",o.anyOf,d));break}case"array":o.hasOwnProperty("minItems")&&(l.props.minItems=o.minItems,this.addValidator(l,"minItems",(u,h)=>{const f=(0,D.Hl)(h);return M(f)||f.length>=o.minItems}),!d.isOptional&&o.minItems>0&&void 0===l.defaultValue&&(l.defaultValue=Array.from(new Array(o.minItems)))),o.hasOwnProperty("maxItems")&&(l.props.maxItems=o.maxItems,this.addValidator(l,"maxItems",(u,h)=>{const f=(0,D.Hl)(h);return M(f)||f.length<=o.maxItems})),o.hasOwnProperty("uniqueItems")&&(l.props.uniqueItems=o.uniqueItems,this.addValidator(l,"uniqueItems",(u,h)=>{const f=(0,D.Hl)(h);return!(!M(f)&&o.uniqueItems)||Array.from(new Set(f.map(w=>JSON.stringify(w,(S,b)=>P(b)?Object.keys(w).sort().reduce((A,U)=>(A[U]=w[U],A),{}):b)))).length===f.length})),o.items&&!Array.isArray(o.items)&&(o.items=this.resolveSchema(o.items,d)),this.isEnum(o)||(l.fieldArray=u=>{const h=o.items;if(!Array.isArray(h)){if(!h)return{};const S=h.oneOf||h.anyOf,b=this._toFieldConfig(h,S?(0,O.Z)((0,O.Z)({},d),{},{key:`${u.fieldGroup.length}`}):d);return S&&!b.key&&(b.key=null),b.props.required=!0,b}const f=u.fieldGroup?u.fieldGroup.length:0,y=h[f]?h[f]:o.additionalItems,w=y?this._toFieldConfig(y,d):{};return w.props&&(w.props.required=!0),h[f]&&(w.props.removable=!1),w})}if(o.hasOwnProperty("const")&&(l.props.const=o.const,this.addValidator(l,"const",({value:u})=>u===o.const),l.type||(l.defaultValue=o.const)),this.isEnum(o)){const u=this.toEnumOptions(o),h="array"===l.type;l.type="enum",l.props.multiple=h,l.props.options=u;const f=u.map(y=>y.value);this.addValidator(l,"enum",({value:y})=>void 0===y||(h?!!Array.isArray(y)&&y.every(w=>f.includes(w)):f.includes(y)))}return o.oneOf&&!l.type&&(delete l.key,l.fieldGroup=[this.resolveMultiSchema("oneOf",o.oneOf,(0,O.Z)((0,O.Z)({},d),{},{key:C,shareFormControl:!1}))]),o.oneOf&&!l.type&&(delete l.key,l.fieldGroup=[this.resolveMultiSchema("oneOf",o.oneOf,(0,O.Z)((0,O.Z)({},d),{},{key:C,shareFormControl:!1}))]),null!==(x=o.widget)&&void 0!==x&&x.formlyConfig&&(l=this.mergeFields(l,o.widget.formlyConfig)),l.templateOptions=l.props,d.map?d.map(l,o):l}resolveSchema(o,m){return o&&o.$ref&&(o=this.resolveDefinition(o,m)),o&&o.allOf&&(o=this.resolveAllOf(o,m)),o}resolveAllOf(o,m){let{allOf:x}=o,C=(0,J.Z)(o,q);if(!x.length)throw Error(`allOf array can not be empty ${x}.`);return x.reduce((d,v)=>(v=this.resolveSchema(v,m),d.required&&v.required&&(d.required=[...d.required,...v.required]),v.uniqueItems&&(d.uniqueItems=v.uniqueItems),["maxLength","maximum","exclusiveMaximum","maxItems","maxProperties"].forEach(l=>{!M(d[l])&&!M(v[l])&&(d[l]=d[l]<v[l]?d[l]:v[l])}),["minLength","minimum","exclusiveMinimum","minItems","minProperties"].forEach(l=>{!M(d[l])&&!M(v[l])&&(d[l]=d[l]>v[l]?d[l]:v[l])}),(0,D.Du)(d,v)),C)}resolveMultiSchema(o,m,x){return{type:"multischema",fieldGroup:[{type:"enum",defaultValue:-1,props:{multiple:"anyOf"===o,options:m.map((C,d)=>({label:C.title,value:d,disabled:C.readOnly}))},hooks:{onInit:C=>C.formControl.valueChanges.pipe((0,G.b)(()=>C.options.detectChanges(C.parent)))}},{fieldGroup:m.map((C,d)=>(0,O.Z)((0,O.Z)({},this._toFieldConfig(C,(0,O.Z)((0,O.Z)({},x),{},{resetOnHide:!0}))),{},{expressions:{hide:(v,l)=>{const u=v.parent.parent.fieldGroup[0].formControl;if(-1===u.value||l){let h=v.parent.fieldGroup.map((f,y)=>[f,y,this.isFieldValid(f,y,m,x)]).sort(([f,,y],[w,,S])=>{if(y!==S)return S?1:-1;const b=g(f),A=g(w);return b===A&&f.props.disabled===w.props.disabled?0:A>b?1:-1}).map(([,f])=>f);if("anyOf"===o){const f=h.filter(y=>g(v.parent.fieldGroup[y]));h=f.length>0?f:[h[0]||0]}h=h.length>0?h:[0],u.setValue("anyOf"===o?h:h[0])}return Array.isArray(u.value)?-1===u.value.indexOf(d):u.value!==d}}}))}]}}resolveDefinition(o,m){const[x,C]=o.$ref.split("#/");if(x)throw Error(`Remote schemas for ${o.$ref} not supported yet.`);const d=C?C.split("/").reduce((v,l)=>null!=v&&v.hasOwnProperty(l)?v[l]:null,m.schema):null;if(!d)throw Error(`Cannot find a definition for ${o.$ref}.`);return d.$ref?this.resolveDefinition(d,m):(0,O.Z)((0,O.Z)({},d),["title","description","default","widget"].reduce((v,l)=>(o.hasOwnProperty(l)&&(v[l]=o[l]),v),{}))}resolveDependencies(o){const m={},x={};return Object.keys(o.dependencies||{}).forEach(C=>{const d=o.dependencies[C];Array.isArray(d)?d.forEach(v=>{m[v]?m[v].push(C):m[v]=[C]}):x[C]=d}),{propDeps:m,schemaDeps:x}}guessSchemaType(o){const m=null==o?void 0:o.type;return!m&&null!=o&&o.properties?["object"]:Array.isArray(m)?1===m.length?m:2===m.length&&-1!==m.indexOf("null")?m.sort(x=>"null"==x?1:-1):m:m?[m]:[]}addValidator(o,m,x){o.validators=o.validators||{},o.validators[m]=x}isEnum(o){return!!o.enum||o.anyOf&&o.anyOf.every(a)||o.oneOf&&o.oneOf.every(a)||o.uniqueItems&&o.items&&!Array.isArray(o.items)&&this.isEnum(o.items)}toEnumOptions(o){if(o.enum)return o.enum.map(x=>({value:x,label:x}));const m=x=>{const C=x.hasOwnProperty("const")?x.const:x.enum[0],d={value:C,label:x.title||C};return x.readOnly&&(d.disabled=!0),d};return o.anyOf?o.anyOf.map(m):o.oneOf?o.oneOf.map(m):this.toEnumOptions(o.items)}isFieldValid(o,m,x,C){o._schemasFields||(Object.defineProperty(o,"_schemasFields",{enumerable:!1,writable:!0,configurable:!0}),o._schemasFields={});let d=o._schemasFields[m];const v=o.model?(0,D.kg)(o.model):o.fieldArray?[]:{};return d?(d.model=v,o.options.build(d)):d=o._schemasFields[m]=o.options.build({form:Array.isArray(v)?new e.Oe([]):new e.cw({}),fieldGroup:[this._toFieldConfig(x[m],(0,O.Z)((0,O.Z)({},C),{},{resetOnHide:!0,ignoreDefault:!0,map:null,strict:!0}))],model:v,options:{}}),d.form.valid}mergeFields(o,m){for(let x in m){const C="templateOptions"===x?"props":x;P(o[C])&&P(m[x])?o[C]=this.mergeFields(o[C],m[x]):null!=m[x]&&(o[C]=m[x])}return o}}return _.\u0275fac=function(o){return new(o||_)},_.\u0275prov=Z.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()}}]);