"use strict";(self.webpackChunkpages=self.webpackChunkpages||[]).push([[254],{9485:(ut,A,l)=>{l.d(A,{d:()=>G});var Z=l(5861),v=l(9300),t=l(4464),y=l(8413),o=l(9212),_=l(6814),k=l(9473),x=l(8366),I=l(5290),V=l(4020),U=l(1088),D=l(1116),R=l(3602);function N(c,m){1&c&&o.GkF(0)}function H(c,m){1&c&&o.GkF(0)}const E=(c,m,d)=>({$implicit:c,sub:m,link:d});function K(c,m){if(1&c&&(o.TgZ(0,"li",11),o.YNc(1,H,1,0,"ng-container",6),o.qZA()),2&c){const d=m.$implicit;o.oxw(3);const u=o.MAs(6);o.xp6(),o.Q6J("ngTemplateOutlet",u)("ngTemplateOutletContext",o.kEZ(2,E,d.name,d.domain,d.link))}}function B(c,m){if(1&c&&(o.ynx(0),o.YNc(1,K,2,6,"li",10),o.BQk()),2&c){const d=m.$implicit;o.xp6(),o.Q6J("ngForOf",d)}}const O=(c,m)=>({$implicit:c,type:"forum",deleted:m});function $(c,m){if(1&c&&(o.TgZ(0,"fieldset",5),o.YNc(1,N,1,0,"ng-container",6),o.TgZ(2,"cdk-virtual-scroll-viewport",7)(3,"ul",8),o.YNc(4,B,2,1,"ng-container",9),o.ALo(5,"arrayChunk"),o.qZA()()()),2&c){const d=o.oxw(),u=o.MAs(4);o.xp6(),o.Q6J("ngTemplateOutlet",u)("ngTemplateOutletContext",o.WLB(7,O,d.forums.length,d.forumsWithDeletedCount-d.forums.length)),o.xp6(),o.Q6J("itemSize",78),o.xp6(2),o.Q6J("cdkVirtualForOf",o.xi3(5,4,d.forums,d.itemsPerRow))}}function P(c,m){1&c&&o.GkF(0)}function Q(c,m){1&c&&o.GkF(0)}function j(c,m){if(1&c&&(o.TgZ(0,"li",11),o.YNc(1,Q,1,0,"ng-container",6),o.ALo(2,"titlecase"),o.qZA()),2&c){const d=m.$implicit;o.oxw(3);const u=o.MAs(6);o.xp6(),o.Q6J("ngTemplateOutlet",u)("ngTemplateOutletContext",o.kEZ(4,E,d.name,o.lcZ(2,2,d.site)+" id: "+d.id,d.link))}}function W(c,m){if(1&c&&(o.ynx(0),o.YNc(1,j,3,8,"li",10),o.BQk()),2&c){const d=m.$implicit;o.xp6(),o.Q6J("ngForOf",d)}}const z=c=>({"mt-3":c}),q=(c,m,d)=>({$implicit:c,type:m,deleted:d});function X(c,m){if(1&c&&(o.TgZ(0,"fieldset",12),o.YNc(1,P,1,0,"ng-container",6),o.TgZ(2,"cdk-virtual-scroll-viewport",7)(3,"ul",8),o.YNc(4,W,2,1,"ng-container",9),o.ALo(5,"arrayChunk"),o.qZA()()()),2&c){const d=o.oxw(),u=o.MAs(4);o.Q6J("ngClass",o.VKq(8,z,d.forums.length>0)),o.xp6(),o.Q6J("ngTemplateOutlet",u)("ngTemplateOutletContext",o.kEZ(10,q,d.users.length,"utent"+(1===d.users.length?"e":"i"),d.usersWithDeletedCount-d.users.length)),o.xp6(),o.Q6J("itemSize",78),o.xp6(2),o.Q6J("cdkVirtualForOf",o.xi3(5,5,d.users,d.itemsPerRow))}}function tt(c,m){if(1&c&&(o.TgZ(0,"legend",13)(1,"div",14),o._UZ(2,"div",15)(3,"div",16),o.qZA()()),2&c){const d=m.$implicit,u=m.type,g=m.deleted;o.xp6(2),o.Q6J("innerText",d+" "+u),o.xp6(),o.Q6J("innerText","("+g+" cancellat"+(1===g?"o":"i")+")")}}function et(c,m){if(1&c&&(o.TgZ(0,"a",17),o._UZ(1,"div",18)(2,"div",19),o.qZA()),2&c){const d=m.$implicit,u=m.sub;o.Q6J("href",m.link,o.LSH),o.xp6(),o.Q6J("innerHTML",d,o.oJD),o.xp6(),o.Q6J("innerHTML",u,o.oJD)}}const nt=c=>({"touch-device":c}),J=c=>({height:c});let M=(()=>{var c;class m{constructor(u){this.breakpointObserver=u,this.forums=[],this.users=[],this.forumsWithDeletedCount=0,this.usersWithDeletedCount=0,this.touchDevice=V.b1,this.itemsPerRow=1,this.wrapperStyleHeight="",this.breakpoints={W_992_I_1:"(max-width: 991.98px)",W_1200_I_2:"(min-width: 992px) and (max-width: 1199.98px)",W_MAX_I_4:"(min-width:1200px)"},this.itemsPerRowMap=new Map([[this.breakpoints.W_992_I_1,1],[this.breakpoints.W_1200_I_2,2],[this.breakpoints.W_MAX_I_4,4]])}ngOnInit(){this.breakpointObserverSubscription=this.breakpointObserver.observe(Object.values(this.breakpoints)).subscribe(u=>{for(const h of Object.keys(u.breakpoints))if(u.breakpoints[h]){var g;this.itemsPerRow=null!==(g=this.itemsPerRowMap.get(h))&&void 0!==g?g:1;const S=Math.ceil(this.forums.length/this.itemsPerRow),b=Math.ceil(this.users.length/this.itemsPerRow),L=S>0&&b>0,lt=Math.max(0,78*S-16)+Math.max(0,78*b-16)+35*(L?2:1);this.wrapperStyleHeight="calc(".concat(lt,"px + ").concat(2+(L?4:1.5),"rem)")}})}ngOnDestroy(){var u;null===(u=this.breakpointObserverSubscription)||void 0===u||u.unsubscribe()}}return(c=m).\u0275fac=function(u){return new(u||c)(o.Y36(U.Yg))},c.\u0275cmp=o.Xpm({type:c,selectors:[["app-details-list"]],inputs:{forums:"forums",users:"users",forumsWithDeletedCount:"forumsWithDeletedCount",usersWithDeletedCount:"usersWithDeletedCount"},decls:7,vars:8,consts:[["cdkVirtualScrollingElement","",1,"wrapper","overflow-auto","mh-100","p-3","w-100",3,"ngClass","ngStyle"],["class","border rounded p-3 pt-2",4,"ngIf"],["class","border rounded p-3 pt-2",3,"ngClass",4,"ngIf"],["legend",""],["listItem",""],[1,"border","rounded","p-3","pt-2"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"v-scroll",3,"itemSize"],[1,"list-unstyled","mb-0"],[4,"cdkVirtualFor","cdkVirtualForOf"],["class","min-w-0 list-item rounded",4,"ngFor","ngForOf"],[1,"min-w-0","list-item","rounded"],[1,"border","rounded","p-3","pt-2",3,"ngClass"],[1,"legend-reset","pb-1","px-2","mb-0","mx-auto"],[1,"d-flex","flex-row","flex-wrap","align-items-center","justify-content-center"],[1,"mx-1","fs-xl",3,"innerText"],[1,"mx-1","fs-reset","lh-1","fst-italic","deleted-items",3,"innerText"],["target","_blank",1,"text-center","d-block","bg-light","border","px-3","py-2","rounded","mw-100",3,"href"],[1,"text-uppercase","text-primary","text-truncate",3,"innerHTML"],[1,"text-muted","fs-xs","text-truncate",3,"innerHTML"]],template:function(u,g){1&u&&(o.TgZ(0,"div",0),o.YNc(1,$,6,10,"fieldset",1)(2,X,6,14,"fieldset",2),o.qZA(),o.YNc(3,tt,4,2,"ng-template",null,3,o.W1O)(5,et,3,3,"ng-template",null,4,o.W1O)),2&u&&(o.Q6J("ngClass",o.VKq(4,nt,g.touchDevice))("ngStyle",o.VKq(6,J,g.wrapperStyleHeight)),o.xp6(),o.Q6J("ngIf",g.forums.length>0),o.xp6(),o.Q6J("ngIf",g.users.length>0))},dependencies:[_.mk,_.sg,_.O5,_.tP,_.PC,D.xd,D.x0,D.N7,D.j8,R.K,_.rS],styles:["fieldset[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:grid;row-gap:16px}.v-scroll[_ngcontent-%COMP%]{margin-bottom:-16px!important}.v-scroll[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-bottom:16px!important}.wrapper[_ngcontent-%COMP%]:not(.touch-device)   .list-item[_ngcontent-%COMP%]{transition:box-shadow .2s;box-shadow:none}.wrapper[_ngcontent-%COMP%]:not(.touch-device)   .list-item[_ngcontent-%COMP%]:hover{box-shadow:0 .5rem 1rem #00000026}.wrapper[_ngcontent-%COMP%]:not(.touch-device)   .v-scroll[_ngcontent-%COMP%]{margin-left:-1rem!important;margin-right:-1rem!important}.wrapper[_ngcontent-%COMP%]:not(.touch-device)   .v-scroll[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:1rem!important;padding-right:1rem!important}legend[_ngcontent-%COMP%]{height:33px}legend[_ngcontent-%COMP%]   .deleted-items[_ngcontent-%COMP%]{padding-top:.175rem}.list-item[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{height:62px}@media (min-width: 576px){fieldset[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(250px,1fr));column-gap:16px}}"]}),m})();const it=["modal"];function Y(c,m){1&c&&o._UZ(0,"app-loader",6)}function ot(c,m){if(1&c&&(o.ynx(0),o._UZ(1,"app-details-list",8),o.BQk()),2&c){const d=o.oxw(3);o.xp6(),o.Q6J("forums",d.forums)("users",d.users)("forumsWithDeletedCount",d.scriptWithStats.stats.forums.length)("usersWithDeletedCount",d.scriptWithStats.stats.users.length)}}function st(c,m){if(1&c&&o.YNc(0,ot,2,4,"ng-container",7),2&c){const d=o.oxw(2);o.Q6J("ngIf",d.scriptWithStats)}}function rt(c,m){if(1&c&&o.YNc(0,Y,1,0,"app-loader",4)(1,st,1,1,"ng-template",null,5,o.W1O),2&c){const d=o.MAs(2),u=o.oxw();o.Q6J("ngIf",u.loading)("ngIfElse",d)}}function C(c,m){if(1&c&&o._UZ(0,"div",9),2&c){const d=o.oxw();o.Q6J("innerHTML",d.forumsAndUsersCount+" "+(1===d.forumsAndUsersCount?"installazione totale":"installazioni totali"),o.oJD)}}const at=()=>["d-flex","p-0"];let G=(()=>{var c;class m{constructor(u){this.scriptDevService=u,this.modalTitle="",this.loading=!0,this.users=[],this.forums=[],this.forumsAndUsersCount=0}ngOnChanges(u){var g=this;return(0,Z.Z)(function*(){var h;u.scriptWithStats&&g.scriptWithStats&&(g.loading=!0,g.forums=[],g.users=[],g.forumsAndUsersCount=0,g.modalTitle="Dettagli dello script <em>".concat((null===(h=g.scriptWithStats)||void 0===h?void 0:h.script.name)||"","</em>"),yield g.setData(),g.loading=!1)})()}open(){this.modalComponentRef.open()}setData(){var u=this;return(0,Z.Z)(function*(){if(!u.scriptWithStats)return;u.forumsAndUsersCount=u.scriptWithStats.stats.forums.length+u.scriptWithStats.stats.users.length;const g=yield u.scriptDevService.getScriptStatsDetails(u.scriptWithStats);u.forums=g.forums.sort((h,S)=>h.domain.localeCompare(S.domain)).map(h=>({domain:h.domain,link:"https://".concat(h.domain),name:h.domain.split(".")[0]})),u.users=g.users.sort((h,S)=>h.nickname.localeCompare(S.nickname)).map(h=>{var S;const b=h.uid.substring(0,2),L=h.uid.substring(2);return{name:h.nickname,id:L,site:((null===(S=(0,v.u7)(b))||void 0===S?void 0:S.split("."))||["forumfree"])[0],link:((0,v.A)(b)||"")+"/?act=Profile&MID=".concat(L)}})})()}}return(c=m).\u0275fac=function(u){return new(u||c)(o.Y36(y.N))},c.\u0275cmp=o.Xpm({type:c,selectors:[["app-script-dev-stats-details"]],viewQuery:function(u,g){if(1&u&&o.Gf(it,5),2&u){let h;o.iGM(h=o.CRH())&&(g.modalComponentRef=h.first)}},inputs:{scriptWithStats:"scriptWithStats"},features:[o.TTD],decls:4,vars:3,consts:[["size","xl",3,"title","bodyClass"],["modal",""],["appModalBody",""],["appModalFooter",""],["message","Recupero dei dettagli","class","d-flex align-items-center justify-content-center w-100 p-3",4,"ngIf","ngIfElse"],["details",""],["message","Recupero dei dettagli",1,"d-flex","align-items-center","justify-content-center","w-100","p-3"],[4,"ngIf"],[1,"d-block","w-100",3,"forums","users","forumsWithDeletedCount","usersWithDeletedCount"],[1,"me-auto",3,"innerHTML"]],template:function(u,g){1&u&&(o.TgZ(0,"app-modal",0,1),o.YNc(2,rt,3,2,"ng-template",2)(3,C,1,1,"ng-template",3),o.qZA()),2&u&&o.Q6J("title",g.modalTitle)("bodyClass",o.DdM(2,at))},dependencies:[_.O5,k.R,t.z,x.J,I.j,M]}),m})()},8934:(ut,A,l)=>{l.d(A,{a:()=>k});var Z=l(3746),v=l(6814),t=l(7905),y=l(4610),o=l(1116),_=l(9212);let k=(()=>{var x;class I{}return(x=I).\u0275fac=function(U){return new(U||x)},x.\u0275mod=_.oAB({type:x}),x.\u0275inj=_.cJS({imports:[Z.P,v.ez,t.q,y.z,o.Cl]}),I})()},1254:(ut,A,l)=>{l.r(A),l.d(A,{ScriptDevModule:()=>ie});var Z=l(9090),v=l(6814),t=l(9212),y=function(){return y=Object.assign||function(n){for(var r,s=1,i=arguments.length;s<i;s++)for(var e in r=arguments[s])Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e]);return n},y.apply(this,arguments)},o=function(){function n(r,s,i){var e=this;this.endVal=s,this.options=i,this.version="2.8.0",this.defaults={startVal:0,decimalPlaces:0,duration:2,useEasing:!0,useGrouping:!0,useIndianSeparators:!1,smartEasingThreshold:999,smartEasingAmount:333,separator:",",decimal:".",prefix:"",suffix:"",enableScrollSpy:!1,scrollSpyDelay:200,scrollSpyOnce:!1},this.finalEndVal=null,this.useEasing=!0,this.countDown=!1,this.error="",this.startVal=0,this.paused=!0,this.once=!1,this.count=function(a){e.startTime||(e.startTime=a);var p=a-e.startTime;e.remaining=e.duration-p,e.frameVal=e.useEasing?e.countDown?e.startVal-e.easingFn(p,0,e.startVal-e.endVal,e.duration):e.easingFn(p,e.startVal,e.endVal-e.startVal,e.duration):e.startVal+p/e.duration*(e.endVal-e.startVal),e.frameVal=(e.countDown?e.frameVal<e.endVal:e.frameVal>e.endVal)?e.endVal:e.frameVal,e.frameVal=Number(e.frameVal.toFixed(e.options.decimalPlaces)),e.printValue(e.frameVal),p<e.duration?e.rAF=requestAnimationFrame(e.count):null!==e.finalEndVal?e.update(e.finalEndVal):e.options.onCompleteCallback&&e.options.onCompleteCallback()},this.formatNumber=function(a){var p,f,T,w,oe=a<0?"-":"";p=Math.abs(a).toFixed(e.options.decimalPlaces);var ct=(p+="").split(".");if(f=ct[0],T=ct.length>1?e.options.decimal+ct[1]:"",e.options.useGrouping){w="";for(var gt=3,pt=0,F=0,ht=f.length;F<ht;++F)e.options.useIndianSeparators&&4===F&&(gt=2,pt=1),0!==F&&pt%gt==0&&(w=e.options.separator+w),pt++,w=f[ht-F-1]+w;f=w}return e.options.numerals&&e.options.numerals.length&&(f=f.replace(/[0-9]/g,function(dt){return e.options.numerals[+dt]}),T=T.replace(/[0-9]/g,function(dt){return e.options.numerals[+dt]})),oe+e.options.prefix+f+T+e.options.suffix},this.easeOutExpo=function(a,p,f,T){return f*(1-Math.pow(2,-10*a/T))*1024/1023+p},this.options=y(y({},this.defaults),i),this.formattingFn=this.options.formattingFn?this.options.formattingFn:this.formatNumber,this.easingFn=this.options.easingFn?this.options.easingFn:this.easeOutExpo,this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.endVal=this.validateValue(s),this.options.decimalPlaces=Math.max(this.options.decimalPlaces),this.resetDuration(),this.options.separator=String(this.options.separator),this.useEasing=this.options.useEasing,""===this.options.separator&&(this.options.useGrouping=!1),this.el="string"==typeof r?document.getElementById(r):r,this.el?this.printValue(this.startVal):this.error="[CountUp] target is null or undefined",typeof window<"u"&&this.options.enableScrollSpy&&(this.error?console.error(this.error,r):(window.onScrollFns=window.onScrollFns||[],window.onScrollFns.push(function(){return e.handleScroll(e)}),window.onscroll=function(){window.onScrollFns.forEach(function(a){return a()})},this.handleScroll(this)))}return n.prototype.handleScroll=function(r){if(r&&window&&!r.once){var s=window.innerHeight+window.scrollY,i=r.el.getBoundingClientRect(),e=i.top+window.pageYOffset,a=i.top+i.height+window.pageYOffset;a<s&&a>window.scrollY&&r.paused?(r.paused=!1,setTimeout(function(){return r.start()},r.options.scrollSpyDelay),r.options.scrollSpyOnce&&(r.once=!0)):(window.scrollY>a||e>s)&&!r.paused&&r.reset()}},n.prototype.determineDirectionAndSmartEasing=function(){var r=this.finalEndVal?this.finalEndVal:this.endVal;this.countDown=this.startVal>r,Math.abs(r-this.startVal)>this.options.smartEasingThreshold&&this.options.useEasing?(this.finalEndVal=r,this.endVal=r+(this.countDown?1:-1)*this.options.smartEasingAmount,this.duration=this.duration/2):(this.endVal=r,this.finalEndVal=null),this.useEasing=null===this.finalEndVal&&this.options.useEasing},n.prototype.start=function(r){this.error||(this.options.onStartCallback&&this.options.onStartCallback(),r&&(this.options.onCompleteCallback=r),this.duration>0?(this.determineDirectionAndSmartEasing(),this.paused=!1,this.rAF=requestAnimationFrame(this.count)):this.printValue(this.endVal))},n.prototype.pauseResume=function(){this.paused?(this.startTime=null,this.duration=this.remaining,this.startVal=this.frameVal,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count)):cancelAnimationFrame(this.rAF),this.paused=!this.paused},n.prototype.reset=function(){cancelAnimationFrame(this.rAF),this.paused=!0,this.resetDuration(),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.printValue(this.startVal)},n.prototype.update=function(r){cancelAnimationFrame(this.rAF),this.startTime=null,this.endVal=this.validateValue(r),this.endVal!==this.frameVal&&(this.startVal=this.frameVal,null==this.finalEndVal&&this.resetDuration(),this.finalEndVal=null,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count))},n.prototype.printValue=function(r){var s;if(this.el){var i=this.formattingFn(r);null!==(s=this.options.plugin)&&void 0!==s&&s.render?this.options.plugin.render(this.el,i):"INPUT"===this.el.tagName?this.el.value=i:"text"===this.el.tagName||"tspan"===this.el.tagName?this.el.textContent=i:this.el.innerHTML=i}},n.prototype.ensureNumber=function(r){return"number"==typeof r&&!isNaN(r)},n.prototype.validateValue=function(r){var s=Number(r);return this.ensureNumber(s)?s:(this.error="[CountUp] invalid start or end value: ".concat(r),null)},n.prototype.resetDuration=function(){this.startTime=null,this.duration=1e3*Number(this.options.duration),this.remaining=this.duration},n}();let _=(()=>{class n{constructor(s,i,e){this.el=s,this.zone=i,this.platformId=e,this.options={},this.reanimateOnClick=!0,this.complete=new t.vpe}onClick(){this.reanimateOnClick&&this.animate()}ngOnChanges(s){if(!(0,v.NF)(this.platformId))return;const{options:i,endVal:e}=s;void 0!==(null==e?void 0:e.currentValue)?void 0!==this.countUp?this.zone.runOutsideAngular(()=>{this.countUp.update(this.endVal)}):this.initAndRun():void 0!==(null==i?void 0:i.currentValue)&&this.initAndRun()}animate(){this.zone.runOutsideAngular(()=>{this.countUp.reset(),this.countUp.start(()=>{this.zone.run(()=>{this.complete.emit()})})})}initAndRun(){this.zone.runOutsideAngular(()=>{this.countUp=new o(this.el.nativeElement,this.endVal,this.options),this.options.enableScrollSpy||this.animate()})}}return n.\u0275fac=function(s){return new(s||n)(t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(t.Lbi))},n.\u0275dir=t.lG2({type:n,selectors:[["","countUp",""]],hostBindings:function(s,i){1&s&&t.NdJ("click",function(){return i.onClick()})},inputs:{endVal:[t.lbL.None,"countUp","endVal"],options:"options",reanimateOnClick:"reanimateOnClick"},outputs:{complete:"complete"},features:[t.TTD]}),n})(),k=(()=>{class n{}return n.\u0275fac=function(s){return new(s||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[]]}),n})();var x=l(6223),I=l(4101),V=l(7905),U=l(4610),D=l(8726),R=l(8635),N=l(4190),H=l(9537),E=l(5861),K=l(8413),B=l(6245),O=l(3729),$=l(3285),P=l(1088),Q=l(9300),W=l(8645),z=l(9773),q=l(4723);const X=["app-script-dev-info",""];function tt(n,r){if(1&n){const s=t.EpF();t.TgZ(0,"div",7)(1,"div",8),t._uU(2," settings "),t.qZA(),t.TgZ(3,"div",9),t._uU(4,"Migliori script per utilizzo"),t.qZA(),t.TgZ(5,"div",10)(6,"div",11),t.NdJ("chartInit",function(e){t.CHM(s);const a=t.oxw();return t.KtG(a.eChartsService.addInstanceToResizeEvent(e,a.eChartsScope))}),t.qZA()()()}if(2&n){const s=t.oxw();t.xp6(6),t.Q6J("options",s.chartOptions)("autoResize",!1)}}const et=()=>["settings/add"];let nt=(()=>{var n;class r{constructor(i,e){this.eChartsService=i,this.breakpointObserver=e,this.loading=!0,this.filterEvent=new t.vpe,this.chartOptions=null,this.smallScreen=!0,this.eChartsScope="script-dev",this.componentDestroyed=new W.x,this.smallScreen=this.breakpointObserver.isMatched([P.u3.XSmall,P.u3.Small])}ngOnInit(){this.breakpointObserver.observe([P.u3.XSmall,P.u3.Small]).pipe((0,z.R)(this.componentDestroyed)).subscribe(i=>{this.smallScreen=i.matches}),this.eChartsService.setResizeChartEvent(this.componentDestroyed,this.eChartsScope)}ngOnChanges(i){i.loading&&!this.loading&&this.setData()}setData(){const e=Object.values(this.scriptStats).sort((a,p)=>p.entities.length-a.entities.length).slice(0,10);this.chartOptions=function j(n,r){return{grid:{top:30,bottom:30,right:"2%",left:"5%"},xAxis:{type:"category",data:r,show:!1},yAxis:{type:"value",minInterval:50},tooltip:{show:!0,trigger:"axis",axisPointer:{type:"none"},borderWidth:1,borderColor:"var(--bs-border-color)",textStyle:{color:"inherit"}},series:{data:n,name:"Installazioni",type:"bar",label:{position:"inside",show:!0},color:"rgba(72, 100, 254, 0.85)",emphasis:{itemStyle:{color:"rgba(114, 138, 255, 0.85)"}},itemStyle:{borderRadius:[7,7,0,0]}}}}(e.map(a=>a.entities.length),e.map(a=>{var p;return(null===(p=this.scriptList.find(f=>f.id===a.scriptId))||void 0===p?void 0:p.name)||""}))}ngOnDestroy(){this.componentDestroyed.next(),this.componentDestroyed.complete(),this.eChartsService.clearResizeInstances(this.eChartsScope)}}return(n=r).\u0275fac=function(i){return new(i||n)(t.Y36(Q.H8),t.Y36(P.Yg))},n.\u0275cmp=t.Xpm({type:n,selectors:[["","app-script-dev-info",""]],inputs:{scriptList:"scriptList",scriptStats:"scriptStats",loading:"loading"},outputs:{filterEvent:"filterEvent"},features:[t.TTD],attrs:X,decls:14,vars:5,consts:[["class","flat-container px-3 pt-3 position-relative d-flex flex-column overflow-hidden",4,"ngIf"],[1,"flat-container","px-3","px-md-4","py-3","tips","d-none","d-sm-block"],[1,"text-justify","d-none","d-sm-block","mb-0"],[1,"d-flex","utilities"],[1,"d-block","flex-grow-1","input-filter",3,"disabled","enterKeyOnly","textEvent"],[1,"d-block","new-script","btn","btn-primary","flex-shrink-0",3,"routerLink"],[1,"d-none","d-sm-inline"],[1,"flat-container","px-3","pt-3","position-relative","d-flex","flex-column","overflow-hidden"],[1,"material-icons","chart-icon","d-block","position-absolute"],[1,"mb-0","h5"],[1,"position-relative","flex-grow-1","chart-container"],["echarts","",1,"d-block","h-100",3,"options","autoResize","chartInit"]],template:function(i,e){1&i&&(t.YNc(0,tt,7,2,"div",0),t.TgZ(1,"div")(2,"div",1)(3,"p",2),t._uU(4," Tramite questo pannello \xe8 possibile gestire e visualizzare le statistiche dei "),t.TgZ(5,"em"),t._uU(6,"propri script"),t.qZA(),t._uU(7,". La tabella con l'elenco dei propri script fornisce le principali informazioni su ogni script inserito. Cliccando sul numero di installazioni, viene visualizzato un modal contenente i dettagli di tutti i siti e gli account che utilizzano lo script. Le tre icone finali consentono rispettivamente di cancellare la cache, aggiornare le impostazioni e rimuovere definitivamente lo script. "),t.qZA()(),t.TgZ(8,"div",3)(9,"app-input-filter-text",4),t.NdJ("textEvent",function(p){return e.filterEvent.emit(p)}),t.qZA(),t.TgZ(10,"a",5),t._uU(11,"Nuovo "),t.TgZ(12,"span",6),t._uU(13,"script"),t.qZA()()()()),2&i&&(t.Q6J("ngIf",!e.smallScreen),t.xp6(9),t.Q6J("disabled",e.loading)("enterKeyOnly",!0),t.xp6(),t.Q6J("routerLink",t.DdM(4,et)))},dependencies:[v.O5,q.r,R._w,N.rH],styles:["#custom-filter[_ngcontent-%COMP%]{padding-right:calc(.5rem + 26px)}.reset-custom-filter[_ngcontent-%COMP%]{top:calc(50% - 10px);right:5px;z-index:6}.chart-container[_ngcontent-%COMP%]{min-height:150px}.chart-icon[_ngcontent-%COMP%]{right:0;top:0;transform:translate(40%,-40%) rotate(46deg);font-size:8rem;opacity:.2;animation:_ngcontent-%COMP%_chart-icon-animation 1s 1}@keyframes _ngcontent-%COMP%_chart-icon-animation{0%{transform:translate(40%,-40%) rotate(46deg)}to{transform:translate(40%,-40%) rotate(406deg)}}.tips[_ngcontent-%COMP%]{margin-bottom:1rem}.utilities[_ngcontent-%COMP%]{margin:0 1rem}.utilities[_ngcontent-%COMP%]   .new-script[_ngcontent-%COMP%]{margin-left:1rem}.utilities[_ngcontent-%COMP%]   .input-filter[_ngcontent-%COMP%], .utilities[_ngcontent-%COMP%]   .new-script[_ngcontent-%COMP%]{box-shadow:0 .125rem .25rem #00000013}@media (min-width: 768px){.utilities[_ngcontent-%COMP%]{margin:0}}@media (min-width: 960px){.tips[_ngcontent-%COMP%]{margin-bottom:1.5rem}.utilities[_ngcontent-%COMP%]   .new-script[_ngcontent-%COMP%]{margin-left:1.5rem}}"]}),r})();var J=l(1378),M=l(1116),it=l(4020),Y=l(1410),ot=l(8055),st=l(6988),rt=l(9485),C=function(n){return n[n.TITLE=0]="TITLE",n[n.STATUS=1]="STATUS",n[n.DOCS=2]="DOCS",n[n.PREVIEW=3]="PREVIEW",n[n.TYPE=4]="TYPE",n[n.INSTALLATIONS=5]="INSTALLATIONS",n}(C||{}),at=l(4064);function G(n,r,s){switch(s){case C.TITLE:return n.sort((i,e)=>i.name.localeCompare(e.name));case C.INSTALLATIONS:{const i=Object.values(r).sort((a,p)=>p.entities.length-a.entities.length),e={};for(const[a,p]of i.entries())e[p.scriptId]=a+1;return n.sort((a,p)=>(e[a.id]||1e3)-(e[p.id]||1e3))}case C.DOCS:return n.sort((i,e)=>i.docs.link&&!e.docs.link?-1:!i.docs.link&&e.docs.link?1:0);case C.PREVIEW:return n.sort((i,e)=>i.preview&&!e.preview?-1:!i.preview&&e.preview?1:0);case C.STATUS:return n.sort((i,e)=>i.privacy.hidden&&!e.privacy.hidden?1:!i.privacy.hidden&&e.privacy.hidden?-1:0);case C.TYPE:return n.sort((i,e)=>i.type===O.AV.ALL?-1:e.type===O.AV.ALL?1:i.type===O.AV.FORUM?-1:e.type===O.AV.FORUM?1:0);default:return n}}var c=l(5661),m=l(7165),d=l(5245),u=l(9473),g=l(8595);const h=["cacheModal"],S=["installationModal"],b=["deletionModal"],L=["app-script-dev-list",""];function lt(n,r){1&n&&(t.TgZ(0,"li",18),t._UZ(1,"app-loader",19),t.qZA())}function ft(n,r){1&n&&(t.TgZ(0,"li",21)(1,"div",22),t._uU(2," Nessuno script trovato! "),t.qZA()())}function vt(n,r){if(1&n&&t.YNc(0,ft,3,0,"li",20),2&n){const s=t.oxw();t.Q6J("ngIf",0===s.renderScriptList.length)}}function _t(n,r){if(1&n&&t._UZ(0,"div",49),2&n){const s=r.$implicit;t.Q6J("ngClass",s?"text-success":"text-danger")("innerText",s?"assignment_turned_in":"highlight_off")}}function Ct(n,r){1&n&&t._UZ(0,"div",50),2&n&&t.Q6J("innerText","Forum")}const St=n=>({"mt-2":n});function Tt(n,r){if(1&n&&t._UZ(0,"div",51),2&n){const s=t.oxw().$implicit,i=t.oxw(2);t.Q6J("ngClass",t.VKq(2,St,s.type===i.scriptType.ALL))("innerText","Utenti")}}function Ot(n,r){if(1&n){const s=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){t.CHM(s);const e=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.installationNumberClick(e))}),t.qZA()}if(2&n){const s=t.oxw().$implicit,i=t.oxw(2);t.Q6J("innerText",i.scriptStats[s.id].entities.length)}}function xt(n,r){1&n&&(t.TgZ(0,"div"),t._uU(1,"-"),t.qZA())}function Dt(n,r){1&n&&t.GkF(0)}function yt(n,r){if(1&n){const s=t.EpF();t.TgZ(0,"a",46),t.NdJ("click",function(){t.CHM(s);const e=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.installationNumberClick(e))}),t.TgZ(1,"div",47),t._uU(2,"poll"),t.qZA(),t.TgZ(3,"div"),t._uU(4,"Installazioni"),t.qZA()()}}const Mt=n=>({"border-bottom":n}),Pt=n=>({focus:n}),bt=(n,r)=>[n,r],Lt=n=>({"cache-pending":n}),At=n=>({placement:n}),Zt=(n,r,s)=>({$implicit:n,f:r,scriptId:s}),It=n=>({"del-pending":n}),Et=()=>[10,10],wt=(n,r)=>({placement:n,offset:r}),mt=n=>["settings",n];function kt(n,r){if(1&n){const s=t.EpF();t.TgZ(0,"li",25)(1,"div",26),t._UZ(2,"a",27)(3,"div",28),t.qZA(),t._UZ(4,"div",29),t.YNc(5,_t,1,2,"div",30),t.TgZ(6,"div",31),t.YNc(7,Ct,1,1,"div",32)(8,Tt,1,4,"div",33),t.qZA(),t.TgZ(9,"div",34),t.YNc(10,Ot,1,1,"a",35)(11,xt,2,0,"ng-template",null,36,t.W1O),t.qZA(),t.TgZ(13,"div")(14,"div",37)(15,"a",38),t.NdJ("click",function(){const a=t.CHM(s).$implicit,p=t.oxw(2);return t.KtG(p.cacheIconClick(a))}),t._uU(16,"sync"),t.qZA(),t.YNc(17,Dt,1,0,"ng-container",39),t.TgZ(18,"a",40),t.NdJ("click",function(){const a=t.CHM(s).$implicit,p=t.oxw(2);return t.KtG(p.deleteScript(a))}),t._uU(19,"delete"),t.qZA()(),t.TgZ(20,"div",41,42),t.NdJ("openChange",function(){t.CHM(s);const e=t.MAs(21),a=t.oxw(2);return t.KtG(a.saveOpenedDropdown(e))}),t.TgZ(22,"div",43),t._uU(23,"more_vert"),t.qZA(),t.TgZ(24,"div",44),t.YNc(25,yt,5,0,"a",45),t.TgZ(26,"a",46),t.NdJ("click",function(){const a=t.CHM(s).$implicit,p=t.oxw(2);return t.KtG(p.cacheIconClick(a))}),t.TgZ(27,"div",47),t._uU(28,"sync"),t.qZA(),t.TgZ(29,"div"),t._uU(30,"Aggiorna cache"),t.qZA()(),t.TgZ(31,"a",48)(32,"div",47),t._uU(33,"settings"),t.qZA(),t.TgZ(34,"div"),t._uU(35,"Impostazioni"),t.qZA()(),t.TgZ(36,"a",46),t.NdJ("click",function(){const a=t.CHM(s).$implicit,p=t.oxw(2);return t.KtG(p.deleteScript(a))}),t.TgZ(37,"div",47),t._uU(38,"delete"),t.qZA(),t.TgZ(39,"div"),t._uU(40,"Cancella script"),t.qZA()()()()()()}if(2&n){const s=r.$implicit,i=r.first,e=r.last,a=t.MAs(12),p=t.oxw(2),f=t.MAs(22);t.Q6J("ngClass",t.VKq(23,Mt,!e)),t.xp6(2),t.Q6J("routerLink",s.type===p.scriptType.USER||s.type===p.scriptType.ALL?p.paths.SCRIPT_USER:p.paths.SCRIPT_FORUM)("queryParams",t.VKq(25,Pt,s.id))("innerHTML",(s.author.ffuid===p.ffuid?"":"["+s.author.name+"] ")+s.name,t.oJD),t.xp6(),t.Q6J("innerText",s.description||"Nessuna descrizione"),t.xp6(),t.Q6J("ngClass",s.privacy.hidden?"badge-red":"badge-green")("innerText",s.privacy.hidden?"Privato":"Pubblico"),t.xp6(),t.Q6J("ngForOf",t.WLB(27,bt,s.docs.link,s.preview)),t.xp6(2),t.Q6J("ngIf",s.type===p.scriptType.FORUM||s.type===p.scriptType.ALL),t.xp6(),t.Q6J("ngIf",s.type===p.scriptType.USER||s.type===p.scriptType.ALL),t.xp6(2),t.Q6J("ngIf",p.scriptStats[s.id]&&p.scriptStats[s.id].entities.length)("ngIfElse",a),t.xp6(5),t.Q6J("ngClass",t.VKq(30,Lt,p.cachePendingId===s.id))("tippyProps",t.VKq(32,At,i?"bottom":"top"))("disableOnTouchDevice",!0),t.xp6(2),t.Q6J("ngTemplateOutlet",f)("ngTemplateOutletContext",t.kEZ(34,Zt,!(s.privacy.hidden||s.description.length&&s.preview&&s.docs.link),i,s.id)),t.xp6(),t.Q6J("ngClass",t.VKq(38,It,p.deletionPending))("tippyProps",t.WLB(41,wt,i?"bottom-end":"top-end",t.DdM(40,Et)))("disableOnTouchDevice",!0)("disableInstance",p.deletionPending),t.xp6(7),t.Q6J("ngIf",p.scriptStats[s.id]),t.xp6(6),t.Q6J("routerLink",t.VKq(44,mt,s.id))}}const Vt=n=>({"touch-device":n});function Ut(n,r){if(1&n&&(t.ynx(0),t.TgZ(1,"cdk-virtual-scroll-viewport",23)(2,"ul",0),t.YNc(3,kt,41,46,"li",24),t.qZA()(),t.BQk()),2&n){const s=t.oxw();t.xp6(),t.Q6J("itemSize",88),t.xp6(),t.Q6J("ngClass",t.VKq(3,Vt,s.isTouch)),t.xp6(),t.Q6J("cdkVirtualForOf",s.renderScriptList)}}const Nt=n=>({"edit-required text-danger":n}),Jt=()=>[42,10],Ft=(n,r,s)=>({placement:n,offset:r,theme:s});function Rt(n,r){if(1&n&&(t.TgZ(0,"a",53)(1,"div",54),t._uU(2,"settings"),t.qZA()()),2&n){const s=r.$implicit,i=r.f,e=r.scriptId,a=t.oxw();t.Q6J("routerLink",t.VKq(5,mt,e))("ngClass",t.VKq(7,Nt,s))("appTippy",s?a.tippySettingsAlertMessage:a.tippySettingsMessage)("tippyProps",t.kEZ(10,Ft,i?"bottom-end":"top-end",t.DdM(9,Jt),s?"popover":""))("disableOnTouchDevice",!0)}}let Qt=(()=>{var n;class r{constructor(i,e,a){var p;this.toastService=i,this.scriptFiltersService=e,this.globalsService=a,this.loading=!0,this.deletionScriptEvent=new t.vpe,this.renderScriptList=[],this.sortOptionKeys=C,this.sortOption=C.TITLE,this.scriptType=O.AV,this.isTouch=it.b1,this.sortValue=1,this.currentCacheScript={name:""},this.currentDeletionScript={name:""},this.deletionPending=!1,this.paths=m.B2,this.tippySettingsAlertMessage="La descrizione, l'anteprima e la guida sono essenziali per comprendere il corretto funzionamento dello script e per metterlo in evidenza agli utenti. Clicca sull'icona per modificare le impostazioni dello script e accertati di aver inserito questi elementi!",this.tippySettingsMessage="Modifica le impostazioni",this.tabs=at.Oh,this.cdkScrolledIndexChange=new W.x,this.ffuid=null===(p=this.globalsService.credentials)||void 0===p?void 0:p.user.ffuid}ngOnChanges(i){if(i.filter){if(!this.filter)return void(i.filter.previousValue&&(this.renderScriptList=this.scriptList));const e=this.scriptFiltersService.createKeywordsRegex(this.filter);this.renderScriptList=this.scriptList.filter(a=>a.name.match(e)||a.description.match(e))}i.loading&&!this.loading&&(this.renderScriptList=this.scriptList,this.renderScriptList=G(this.renderScriptList,this.scriptStats,this.sortOption))}saveOpenedDropdown(i){i.isOpen()&&(this.openedDropdown=i,this.virtualScrollRef&&this.virtualScrollRef.scrolledIndexChange.pipe((0,z.R)(this.cdkScrolledIndexChange)).subscribe(()=>{var e;null===(e=this.openedDropdown)||void 0===e||e.close(),this.cdkScrolledIndexChange.next()}))}setSortOption(i){this.sortOption===i?(this.sortValue=-this.sortValue,this.renderScriptList=[...this.renderScriptList.reverse()]):(this.sortValue=i===C.INSTALLATIONS?-1:1,this.sortOption=i,this.renderScriptList=[...G(this.renderScriptList,this.scriptStats,i)])}cacheIconClick(i){void 0===this.cachePendingId?(this.currentCacheScript={id:i.id,name:i.name},this.cacheModalRef.open()):this.toastService.advice(J.V.REQUEST_PENDING)}installationNumberClick(i){(0,Q.o8)(this.scriptStats,i.id)&&(this.currentInstallationScript={script:i,stats:{forums:this.scriptStats[i.id].entities.filter(e=>e.targetType===O.D7.FORUM).map(e=>e.targetId),users:this.scriptStats[i.id].entities.filter(e=>e.targetType===O.D7.USER).map(e=>e.targetId)}},this.installationModalRef.open())}deleteScript(i){this.deletionPending?this.toastService.advice(J.V.REQUEST_PENDING):i.dependencies.children.length>0?this.toastService.show({content:"Questo script \xe8 richiesto da altri script ("+"<strong>".concat(i.dependencies.children.map(e=>e.name).join(", "),"</strong>).<br>")+"Prima di cancellarlo, elimina le dipendenze!",level:J.m.WARNING}):(this.currentDeletionScript={id:i.id,name:i.name},this.deletionModalRef.open())}}return(n=r).\u0275fac=function(i){return new(i||n)(t.Y36(c.k),t.Y36(d.v),t.Y36(Y.d))},n.\u0275cmp=t.Xpm({type:n,selectors:[["","app-script-dev-list",""]],viewQuery:function(i,e){if(1&i&&(t.Gf(h,5),t.Gf(S,5),t.Gf(b,5),t.Gf(M.N7,5)),2&i){let a;t.iGM(a=t.CRH())&&(e.cacheModalRef=a.first),t.iGM(a=t.CRH())&&(e.installationModalRef=a.first),t.iGM(a=t.CRH())&&(e.deletionModalRef=a.first),t.iGM(a=t.CRH())&&(e.virtualScrollRef=a.first)}},inputs:{scriptList:"scriptList",scriptStats:"scriptStats",filter:"filter",loading:"loading"},outputs:{deletionScriptEvent:"deletionScriptEvent"},features:[t.TTD],attrs:L,decls:29,vars:17,consts:[[1,"list-unstyled","mb-0","position-relative",3,"ngClass"],[1,"header","bg-dark","text-light","text-uppercase","fw-bold","d-flex","d-md-grid","align-items-center","py-3"],[1,"title","w-100","sortable",3,"click"],[1,"d-none","d-md-inline"],[1,"d-md-none"],[1,"d-none","d-md-block","sortable",3,"click"],[1,"d-none","d-xxl-block","sortable",3,"click"],[1,"d-none","d-xl-block","sortable",3,"click"],["class","loader py-3",4,"ngIf","ngIfElse"],["emptyContent",""],[4,"ngIf"],["settingsIcon",""],[3,"scriptName","scriptId","cachePendingEvent"],["cacheModal",""],[3,"scriptWithStats"],["installationModal",""],[3,"scriptName","scriptId","deletionPendingEvent","deletionScriptEvent"],["deletionModal",""],[1,"loader","py-3"],["message","Recupero lista script"],["class","empty p-3",4,"ngIf"],[1,"empty","p-3"],[1,"alert","alert-primary","text-center","mb-0"],["scrollWindow","",1,"mw-100",3,"itemSize"],["class","item d-flex d-md-grid align-items-center position-relative",3,"ngClass",4,"cdkVirtualFor","cdkVirtualForOf"],[1,"item","d-flex","d-md-grid","align-items-center","position-relative",3,"ngClass"],[1,"title","d-flex","flex-column","min-w-0","mw-100","me-auto","pe-2","pe-md-0"],[1,"d-block","me-auto","fw-bold","text-truncate","mw-100",3,"routerLink","queryParams","innerHTML"],[1,"fs-sm","text-muted","text-truncate","mw-100",3,"innerText"],[1,"badge","flat-badge","mx-auto","d-none","d-md-flex",3,"ngClass","innerText"],["class","material-icons-outlined d-none d-xxl-block mx-auto",3,"ngClass","innerText",4,"ngFor","ngForOf"],[1,"mx-auto","d-none","d-md-block"],["class","badge flat-badge badge-blue",3,"innerText",4,"ngIf"],["class","badge flat-badge badge-indigo",3,"ngClass","innerText",4,"ngIf"],[1,"d-none","d-xl-block","mx-auto"],["class","d-block cursor-pointer",3,"innerText","click",4,"ngIf","ngIfElse"],["noInstallations",""],[1,"d-none","d-md-flex","align-items-center","justify-content-center","utilities"],["role","button","appTippy","Aggiorna la cache",1,"d-block","material-icons-outlined","me-2",3,"ngClass","tippyProps","disableOnTouchDevice","click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["role","button","appTippy","Cancella lo script",1,"d-block","material-icons-outlined","ms-2",3,"ngClass","tippyProps","disableOnTouchDevice","disableInstance","click"],["ngbDropdown","","placement","left auto","display","dynamic","container","body",1,"d-md-none","dropdown-no-caret","utility-dropdown",3,"openChange"],["dropdown","ngbDropdown"],["ngbDropdownToggle","",1,"d-block","material-icons","cursor-pointer"],["ngbDropdownMenu","",1,"dropdown-material-icons"],["role","button","class","dropdown-item d-flex align-items-center",3,"click",4,"ngIf"],["role","button",1,"dropdown-item","d-flex","align-items-center",3,"click"],[1,"material-icons-outlined","d-block"],[1,"dropdown-item","d-flex","align-items-center",3,"routerLink"],[1,"material-icons-outlined","d-none","d-xxl-block","mx-auto",3,"ngClass","innerText"],[1,"badge","flat-badge","badge-blue",3,"innerText"],[1,"badge","flat-badge","badge-indigo",3,"ngClass","innerText"],[1,"d-block","cursor-pointer",3,"innerText","click"],[1,"d-block",3,"routerLink","ngClass","appTippy","tippyProps","disableOnTouchDevice"],[1,"d-block","material-icons-outlined","m-icon"]],template:function(i,e){if(1&i&&(t.TgZ(0,"ul",0)(1,"li",1)(2,"div",2),t.NdJ("click",function(){return e.setSortOption(e.sortOptionKeys.TITLE)}),t.TgZ(3,"span",3),t._uU(4,"Titolo"),t.qZA(),t.TgZ(5,"span",4),t._uU(6,"Lista script"),t.qZA()(),t.TgZ(7,"div",5),t.NdJ("click",function(){return e.setSortOption(e.sortOptionKeys.STATUS)}),t._uU(8,"Status"),t.qZA(),t.TgZ(9,"div",6),t.NdJ("click",function(){return e.setSortOption(e.sortOptionKeys.DOCS)}),t._uU(10,"Guida"),t.qZA(),t.TgZ(11,"div",6),t.NdJ("click",function(){return e.setSortOption(e.sortOptionKeys.PREVIEW)}),t._uU(12,"Preview"),t.qZA(),t.TgZ(13,"div",5),t.NdJ("click",function(){return e.setSortOption(e.sortOptionKeys.TYPE)}),t._uU(14,"Tipo"),t.qZA(),t.TgZ(15,"div",7),t.NdJ("click",function(){return e.setSortOption(e.sortOptionKeys.INSTALLATIONS)}),t._uU(16,"Uso"),t.qZA()(),t.YNc(17,lt,2,0,"li",8)(18,vt,1,1,"ng-template",null,9,t.W1O),t.qZA(),t.YNc(20,Ut,4,5,"ng-container",10)(21,Rt,3,14,"ng-template",null,11,t.W1O),t.TgZ(23,"app-script-dev-cache",12,13),t.NdJ("cachePendingEvent",function(p){return e.cachePendingId=p}),t.qZA(),t._UZ(25,"app-script-dev-stats-details",14,15),t.TgZ(27,"app-script-dev-deletion",16,17),t.NdJ("deletionPendingEvent",function(p){return e.deletionPending=void 0!==p})("deletionScriptEvent",function(){return e.deletionScriptEvent.emit(!0)}),t.qZA()),2&i){const a=t.MAs(19);t.ekj("touch-device",e.isTouch),t.Q6J("ngClass",e.sortValue>0?"asc":"desc"),t.xp6(2),t.uIk("data-sorted",e.sortOption===e.sortOptionKeys.TITLE),t.xp6(5),t.uIk("data-sorted",e.sortOption===e.sortOptionKeys.STATUS),t.xp6(2),t.uIk("data-sorted",e.sortOption===e.sortOptionKeys.DOCS),t.xp6(2),t.uIk("data-sorted",e.sortOption===e.sortOptionKeys.PREVIEW),t.xp6(2),t.uIk("data-sorted",e.sortOption===e.sortOptionKeys.TYPE),t.xp6(2),t.uIk("data-sorted",e.sortOption===e.sortOptionKeys.INSTALLATIONS),t.xp6(2),t.Q6J("ngIf",e.loading)("ngIfElse",a),t.xp6(3),t.Q6J("ngIf",!e.loading&&e.renderScriptList.length>0),t.xp6(3),t.Q6J("scriptName",e.currentCacheScript.name)("scriptId",e.currentCacheScript.id),t.xp6(2),t.Q6J("scriptWithStats",e.currentInstallationScript),t.xp6(2),t.Q6J("scriptName",e.currentDeletionScript.name)("scriptId",e.currentDeletionScript.id)}},dependencies:[v.mk,v.sg,v.O5,v.tP,u.R,D.jt,D.iD,D.Vi,N.rH,ot.s,st.F,rt.d,M.xd,M.x0,M.N7,M.LO,g.$],styles:['ul[_ngcontent-%COMP%]:not(.touch-device)   li[_ngcontent-%COMP%]:not(.header):not(.loader):not(.empty){background-color:#fff}ul[_ngcontent-%COMP%]:not(.touch-device)   li[_ngcontent-%COMP%]:not(.header):not(.loader):not(.empty):hover{background-color:rgb(var(--bs-light-rgb))}ul[_ngcontent-%COMP%]:not(.touch-device)   .utilities[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(.edit-required):not(.cache-pending):not(.del-pending){opacity:.5;transition:opacity .2s}ul[_ngcontent-%COMP%]:not(.touch-device)   .utilities[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(.edit-required):not(.cache-pending):not(.del-pending):hover{opacity:1}.utilities[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(.edit-required){color:inherit}li[_ngcontent-%COMP%]:not(.loader):not(.empty){padding-left:.75rem;padding-right:.5rem}li[_ngcontent-%COMP%]:not(.loader):not(.empty):not(.header){height:88px}li[_ngcontent-%COMP%]:not(.loader):not(.empty).header{padding-right:1rem}.sortable[_ngcontent-%COMP%]{position:relative;cursor:pointer}.sortable[_ngcontent-%COMP%]:before, .sortable[_ngcontent-%COMP%]:after{transition:opacity .2s;position:absolute;right:0;width:0;height:0;content:"";opacity:.4;border-right:4px solid transparent;border-left:4px solid transparent}.sortable[_ngcontent-%COMP%]:before{bottom:4px;border-top:4px solid #fff}.sortable[_ngcontent-%COMP%]:after{top:4px;border-bottom:4px solid #fff}.asc[_ngcontent-%COMP%]   .sortable[data-sorted=true][_ngcontent-%COMP%]:after{opacity:1}.desc[_ngcontent-%COMP%]   .sortable[data-sorted=true][_ngcontent-%COMP%]:before{opacity:1}.sortable[_ngcontent-%COMP%]:not([data-sorted=true]):hover:before, .sortable[_ngcontent-%COMP%]:not([data-sorted=true]):hover:after{opacity:.6}@media (min-width: 576px){li[_ngcontent-%COMP%]:not(.loader){padding-left:1rem;padding-right:.75rem}}@media (min-width: 768px){li[_ngcontent-%COMP%]:not(.loader){grid-template-columns:3fr repeat(3,1fr);padding-left:4%}li[_ngcontent-%COMP%]:not(.loader).header > div[_ngcontent-%COMP%]:not(.title){text-align:center}li[_ngcontent-%COMP%]:not(.loader):not(.empty){padding-left:1.5rem;padding-right:.5rem!important}}@media (min-width: 1200px){li[_ngcontent-%COMP%]:not(.loader){grid-template-columns:40% repeat(4,15%);padding-left:0;padding-right:0}}@media (min-width: 1400px){li[_ngcontent-%COMP%]:not(.loader){grid-template-columns:40% repeat(6,10%)}}.edit-required[_ngcontent-%COMP%]   .m-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rotation 2s infinite}.cache-pending[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fullRotation 1s linear infinite}.del-pending[_ngcontent-%COMP%], .del-pending[_ngcontent-%COMP%]:hover{opacity:.1!important;cursor:initial!important}@keyframes _ngcontent-%COMP%_rotation{50%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_fullRotation{0%{transform:rotate(0)}to{transform:rotate(-360deg)}}']}),r})();var Wt=l(4601);const zt=["app-script-dev-stats",""];let Yt=(()=>{var n;class r{constructor(i){this.globalsService=i,this.scriptCreated=0,this.totalInstall=0,this.userInstall=0,this.forumInstall=0,this.countOptions={separator:"."}}ngOnChanges(i){if(i.scriptList&&this.scriptList.length){var e;const a=(null===(e=this.globalsService.credentials)||void 0===e?void 0:e.user.ffuid)||"";this.scriptCreated=this.scriptList.filter(p=>p.author.ffuid===a).length}if(i.scriptStats&&!(0,Wt.nK)(this.scriptStats)){this.totalInstall=0;const a=[],p=[];for(const f of Object.values(this.scriptStats)){this.totalInstall+=f.entities.length;for(const T of f.entities)T.targetType===O.D7.USER&&-1===a.indexOf(T.targetId)?a.push(T.targetId):-1===p.indexOf(T.targetId)&&p.push(T.targetId)}this.userInstall=a.length,this.forumInstall=p.length}}}return(n=r).\u0275fac=function(i){return new(i||n)(t.Y36(Y.d))},n.\u0275cmp=t.Xpm({type:n,selectors:[["","app-script-dev-stats",""]],inputs:{scriptList:"scriptList",scriptStats:"scriptStats"},features:[t.TTD],attrs:zt,decls:32,vars:11,consts:[[1,"flat-container","d-flex","align-items-center"],[1,"fw-normal","lh-1","text-success",3,"countUp","reanimateOnClick"],[1,"text-muted","fs-xs","text-uppercase"],[1,"d-block","material-icons-outlined","text-success"],[1,"fw-normal","lh-1","text-primary",3,"countUp","options","reanimateOnClick"],[1,"d-block","material-icons","text-primary"],[1,"fw-normal","lh-1","text-indigo",3,"countUp","options","reanimateOnClick"],[1,"d-block","material-icons","text-indigo"],[1,"fw-normal","lh-1","text-danger",3,"countUp","options","reanimateOnClick"],[1,"d-block","material-icons-outlined","text-danger"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0)(1,"div")(2,"h2",1),t._uU(3," 0 "),t.qZA(),t.TgZ(4,"div",2),t._uU(5,"script creati"),t.qZA()(),t.TgZ(6,"div",3),t._uU(7," integration_instructions "),t.qZA()(),t.TgZ(8,"div",0)(9,"div")(10,"h2",4),t._uU(11," 0 "),t.qZA(),t.TgZ(12,"div",2),t._uU(13,"installazioni"),t.qZA()(),t.TgZ(14,"div",5),t._uU(15,"speed"),t.qZA()(),t.TgZ(16,"div",0)(17,"div")(18,"h2",6),t._uU(19," 0 "),t.qZA(),t.TgZ(20,"div",2),t._uU(21,"forum unici"),t.qZA()(),t.TgZ(22,"div",7),t._uU(23,"public"),t.qZA()(),t.TgZ(24,"div",0)(25,"div")(26,"h2",8),t._uU(27," 0 "),t.qZA(),t.TgZ(28,"div",2),t._uU(29,"utenti unici"),t.qZA()(),t.TgZ(30,"div",9),t._uU(31,"people_alt"),t.qZA()()),2&i&&(t.xp6(2),t.Q6J("countUp",e.scriptCreated)("reanimateOnClick",!1),t.xp6(8),t.Q6J("countUp",e.totalInstall)("options",e.countOptions)("reanimateOnClick",!1),t.xp6(8),t.Q6J("countUp",e.forumInstall)("options",e.countOptions)("reanimateOnClick",!1),t.xp6(8),t.Q6J("countUp",e.userInstall)("options",e.countOptions)("reanimateOnClick",!1))},dependencies:[_],styles:[".flat-container[_ngcontent-%COMP%]{padding:2rem}.flat-container[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{letter-spacing:.2em}.flat-container[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%], .flat-container[_ngcontent-%COMP%]   .material-icons-outlined[_ngcontent-%COMP%]{font-size:35px;margin-left:auto}"]}),r})(),Gt=(()=>{var n;class r{constructor(i,e,a){this.scriptDevService=i,this.scriptListService=e,this.viewportScroller=a,this.scriptList=[],this.scriptStats={},this.loading=!0}ngOnInit(){var i=this;return(0,E.Z)(function*(){yield i.setData()})()}setData(){var i=this;return(0,E.Z)(function*(){i.loading=!0;const[e,a]=yield Promise.all([i.scriptListService.getScriptsByPermissions([O.Af.EDIT]),i.scriptDevService.getStats()]);i.scriptList=e.list,i.scriptStats=a.reduce((p,f)=>(p[f.scriptId]=f,p),{}),i.loading=!1})()}refresh(){var i=this;return(0,E.Z)(function*(){i.viewportScroller.scrollToPosition([0,0]),yield i.setData()})()}}return(n=r).\u0275fac=function(i){return new(i||n)(t.Y36(K.N),t.Y36(B.o),t.Y36(v.EM))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-script-dev"]],decls:5,vars:9,consts:[["pageTitle","Sviluppo script"],["app-script-dev-stats","",1,"stats","d-grid",3,"scriptList","scriptStats"],[1,"page-container"],["app-script-dev-info","",1,"info","d-grid",3,"scriptList","scriptStats","loading","filterEvent"],["app-script-dev-list","",1,"list","flat-container","overflow-hidden",3,"scriptList","scriptStats","loading","filter","deletionScriptEvent"]],template:function(i,e){1&i&&(t._UZ(0,"app-breadcrumb",0)(1,"div",1),t.TgZ(2,"div",2)(3,"div",3),t.NdJ("filterEvent",function(p){return e.filter=p}),t.qZA(),t.TgZ(4,"div",4),t.NdJ("deletionScriptEvent",function(){return e.refresh()}),t.qZA()()),2&i&&(t.xp6(),t.Q6J("scriptList",e.scriptList)("scriptStats",e.scriptStats),t.xp6(2),t.Q6J("scriptList",e.scriptList)("scriptStats",e.scriptStats)("loading",e.loading),t.xp6(),t.Q6J("scriptList",e.scriptList)("scriptStats",e.scriptStats)("loading",e.loading)("filter",e.filter))},dependencies:[$.L,nt,Qt,Yt],styles:[".page-container[_ngcontent-%COMP%], .list[_ngcontent-%COMP%]{margin-top:1rem}.stats[_ngcontent-%COMP%], .info[_ngcontent-%COMP%]{row-gap:1rem}@media (min-width: 768px){.stats[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);column-gap:1rem}}@media (min-width: 960px){.page-container[_ngcontent-%COMP%], .list[_ngcontent-%COMP%]{margin-top:1.5rem}.stats[_ngcontent-%COMP%], .info[_ngcontent-%COMP%]{column-gap:1.5rem;row-gap:1.5rem}}@media (min-width: 1400px){.stats[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}.info[_ngcontent-%COMP%]{grid-template-columns:3fr 2fr}}"]}),r})();var Ht=l(232),Kt=l(8934),Bt=l(3038),$t=l(7230),jt=l(5644),qt=l(4970),Xt=l(8646),te=l(5230),ee=l(9644);$t.D([Xt.N,te.N,qt.N,ee.N]);const ne=[{path:"",component:Gt},{path:"settings",loadChildren:()=>Promise.all([l.e(895),l.e(592),l.e(978)]).then(l.bind(l,9978)).then(n=>n.ScriptDevSettingsModule),data:{title:"Settings"}}];let ie=(()=>{var n;class r{}return(n=r).\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[Z.w,v.ez,k,x.u5,I.O,V.q,U.z,D.XC,R.Ns.forRoot({echarts:jt}),N.Bz.forChild(ne),H.U,Ht.a,Kt.a,M.Cl,Bt.G]}),r})()}}]);